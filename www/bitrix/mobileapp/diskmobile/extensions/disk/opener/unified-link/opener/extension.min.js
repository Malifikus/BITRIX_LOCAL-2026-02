jn.define("disk/opener/unified-link/opener",((e,r,n)=>{const{showInternalAlert:t}=e("error");const{isEmpty:i}=e("utils/object");const{FileType:s}=e("disk/enum");const{withCurrentDomain:o}=e("utils/url");const{getUnifiedLinkData:a}=e("disk/opener/unified-link/rest");const u=new Set([s.FLIPCHART,s.DOCUMENT]);class p{#e;#r={};constructor(e){this.#r=e??{};this.#e=e.uniqueCode||null}async open(){if(i(this.#e)){return Promise.reject(new Error("uniqueCode is required"))}const e=await this.#n().catch(console.error);if(i(e)||e.status!=="success"){void t();return Promise.reject(new Error("Failed to retrieve unified link data"))}return this.factoryOpeners(e?.data?.object||{})}async factoryOpeners(e){if(!this.#t(e.typeFile)){console.warn("UnifiedOpener: Unsupported file type - ",e.typeFile);return null}const r=e.links?.download;if(!r){return null}const n=e.name;const t=o(r);switch(e.typeFile){case s.FLIPCHART:return this.#i(e);case s.PDF:case s.DOCUMENT:return viewer.openDocument(t,n);case s.IMAGE:return viewer.openImage(t,n);case s.VIDEO:return viewer.openVideo(t);default:return Application.openUrl(t)}}#n=()=>{const{version:e,versionId:r,attachedId:n}=this.#s();return a(this.#e,n,e||r)};#s(){const{queryParams:e}=this.#r;return e}async#i(e){const{boardOpener:r}=await requireLazy("disk:opener/board");const{queryParams:n,...t}=this.#r;return r({...t,...n,fileData:e})}#t(e){return u.has(e)}}n.exports={unifiedOpener:e=>new p(e).open()}}));
//# sourceMappingURL=extension.map.js