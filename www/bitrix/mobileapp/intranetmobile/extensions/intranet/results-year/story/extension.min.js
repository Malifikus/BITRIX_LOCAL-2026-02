jn.define("intranet/results-year/story",((e,t,s)=>{const{Corner:i}=e("tokens");const{isEmpty:r,mergeImmutable:n}=e("utils/object");const{sendAnalytics:o}=e("intranet/results-year/story/src/analytics");const{StorySlider:a,sliderInternalPosition:l}=e("layout/ui/story-slider");const{StartSlider:d}=e("intranet/results-year/story/src/slides/start");const{FeatureSlider:c}=e("intranet/results-year/story/src/slides/feature");const{WinnerFeatureSlider:h}=e("intranet/results-year/story/src/slides/winner-feature");const{loadFeaturedResultsYearData:u}=e("intranet/results-year/rest");const{ASSET_PATH:g}=e("intranet/results-year/story/src/constants");const y=120;const p=440;const S=956;const w="intranet-results-year-story-slider";class m extends LayoutComponent{#e=null;#t=null;#s=null;static createSlide(e){const{id:t}=e;const s=t.startsWith("winner_");return s?new h(e):new c(e)}static async show(e){const t=new m(e);try{const e=await t.getSlides();await t.#i(e)}catch(e){console.error("Error showing Results Year Story Slider:",e)}}async#i(e){let t=null;const{onClose:s}=this.props;const r={testId:w,ref:e=>{this.#t=e},forwardRef:e=>{this.#s=e},slides:e,slideDuration:7,clickableInsets:{bottom:y},onSlideViewed:s=>{if(!t){return}const i=e[s]?.getSlideType();o({event:`${t}_click`,type:i})},onClose:()=>{s?.();o({event:"close_click"})},onClick:e=>{t=e}};if(this.#r()){const{width:e,height:t}=this.#n();r.container=this.#o;r.style={width:e,height:t,borderRadius:i.XL.toNumber()}}const n=new a(r);this.#e=await n.show();o({event:"popup_show"})}#o=(e,t)=>{const s=n(t,{style:{alignItems:"center",justifyContent:"center"}});return View(s,...this.#a(),e)};#a=()=>[Image({style:{position:"absolute",width:143,height:143,left:-40,bottom:60},uri:`${g}/images/background/spiral.png`}),Image({style:{position:"absolute",width:141,height:141,top:54,right:0},uri:`${g}/images/background/star_plastik_violet.png`}),Image({style:{position:"absolute",width:171,height:171,top:-10,left:-5},uri:`${g}/images/background/bell_plastik.png`}),Image({style:{position:"absolute",width:200,height:149,bottom:0,right:45},uri:`${g}/images/background/green.png`}),Application.getPlatform()==="ios"?Image({style:{position:"absolute",width:"100%",height:"100%",left:0,bottom:0},svg:{uri:`${g}/images/background/bottom_vector.svg`}}):null];#r(){return device.screen.width>=p||device.screen.height>=S}#n(){return{width:device.screen.width>=p?p:device.screen.width,height:device.screen.height>=S?S:device.screen.height}}async getSlides(){const e=await u().catch(console.error);if(r(e?.errors)&&!r(e?.data)){const{data:t}=e;const s=t?.topFeatures.map((e=>m.createSlide({...e,shouldUseFixedSize:this.#r(),getParentWidget:()=>this.#e,onBeforeSharing:()=>{this.#t?.pauseAutoProgress?.()},onAfterSharing:()=>{this.#t?.resumeAutoProgress?.()},signedUserId:t?.options?.signedUserId,position:l})));return[new d({shouldUseFixedSize:this.#r(),getParentWidget:()=>this.#e,position:l,onNextSlide:()=>{this.#s?.nextSlide()}}),...s]}return[]}}s.exports={ResultsYear:m}}));
//# sourceMappingURL=extension.map.js