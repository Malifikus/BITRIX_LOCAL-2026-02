jn.define("call/callList/createConferenceView",((e,t,n)=>{const{Color:o}=e("tokens");const{BottomSheet:s}=e("bottom-sheet");const{StringInput:i,InputSize:a,InputMode:r,InputDesign:c}=e("ui-system/form/inputs/string");const{ButtonSize:l,ButtonDesign:d,Button:C}=e("ui-system/form/buttons/button");const{IconView:g,Icon:u}=e("ui-system/blocks/icon");const{DialogOpener:h}=e("im/messenger/api/dialog-opener");const{restCall:p}=e("call/callList/utils");const m=238;class f extends LayoutComponent{constructor(e){super(e);this.state={conferenceName:"",isCreating:false}}onNameChange(e){this.setState({conferenceName:e})}onNameErase(){this.setState({conferenceName:""})}onClose(){if(this.props.layout){this.props.layout.close()}}async createConference(){const{conferenceName:e}=this.state;this.setState({isCreating:true});try{const t=e.trim();const n=env.userId;const o=await p("im.v2.Chat.add",{fields:{entityType:"VIDEOCONF",title:t,users:[n]}});const s=o.chatId;if(s){const e=`chat${s}`;if(this.props.layout){this.props.layout.close((()=>{h.open({dialogId:e})}))}else{h.open({dialogId:e})}}}catch(e){console.error("[CallList][CreateConferenceView][createConference][error]",e)}finally{this.setState({isCreating:false})}}renderHeader(){return View({style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:12}},View({style:{width:32,height:32}}),Text({text:BX.message("MOBILEAPP_CALL_CONFERENCE_CREATE_TITLE"),style:{fontSize:17,fontWeight:"500",lineHeight:21,color:o.base1.toHex(),flex:1,textAlign:"center"}}),View({style:{width:32,height:32,alignItems:"center",justifyContent:"center"},onClick:()=>this.onClose()},g({icon:u.CROSS,color:o.base3,size:28})))}render(){const{conferenceName:e,isCreating:t}=this.state;return View({style:{flex:1,backgroundColor:o.bgSecondary.toHex(),flexDirection:"column",paddingHorizontal:16}},this.renderHeader(),View({style:{paddingTop:16,paddingBottom:16}},i({testId:"conference-name-input",value:e,placeholder:BX.message("MOBILEAPP_CALL_CONFERENCE_CREATE_NAME_PLACEHOLDER"),size:a.L,mode:r.STROKE,design:c.GREY,erase:true,onChange:e=>this.onNameChange(e),onErase:()=>this.onNameErase(),onSubmit:()=>this.createConference()}),View({style:{marginTop:35}},C({testId:"conference-create-button",text:BX.message("MOBILEAPP_CALL_CONFERENCE_CREATE_BUTTON"),size:l.L,design:d.FILLED,stretched:true,disabled:t,loading:t,onClick:()=>this.createConference()}))))}}function E(e=PageManager){const t=e=>new f({layout:e});const n=new s({component:t}).setParentWidget(e).setBackgroundColor(o.bgSecondary.toHex()).hideNavigationBar().setMediumPositionHeight(m,true).disableOnlyMediumPosition().disableSwipe().enableResizeContent().enableAdoptHeightByKeyboard();n.open()}n.exports={CreateConferenceViewComponent:f,openCreateConferenceView:E}}));
//# sourceMappingURL=extension.map.js