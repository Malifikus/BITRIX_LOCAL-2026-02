jn.define("call/callList/listView",((e,t,s)=>{const{OptimizedListView:n}=e("layout/ui/optimized-list-view");const{LoaderItem:i}=e("im/messenger/lib/ui/base/loader");const{CallListItem:o}=e("call/callList/item");const{formatTime:r}=e("call/callList/utils");const{Color:a}=e("tokens");const{CallLogType:l}=e("call/const");const{feature:p}=e("native/feature");const c=Application.getPlatform()==="android";class h extends LayoutComponent{constructor(e){super(e);this.state={isLongTapMenuOpened:false}}render(){const e=Array.isArray(this.props.items)?this.props.items:[];const t=[{items:e.map((e=>({id:String(e.id),key:String(e.id),type:"callListItem",item:e})))}];return n({testId:this.props.testId,style:this.props.style||{flex:1},data:t,renderItem:e=>this.renderRow(e.item),onRefresh:this.props.onRefresh,isRefreshing:Boolean(this.props.isRefreshing),isScrollable:c?!this.state.isLongTapMenuOpened:true,onLoadMore:this.props.hasMore&&typeof this.props.onLoadMore==="function"?this.props.onLoadMore:null,renderLoadMore:()=>{if(!this.props.hasMore){return null}return View({style:{alignItems:"center",justifyContent:"center",width:"100%"}},new i({enable:true,text:""}))},actionsForItem:(e,t)=>{const s=c?t-1:t;if(c){this.handleLongTapMenuOpen()}return this.generateActions(s)},onActionClick:(e,t,s)=>{const n=c?t-1:t;if(c){this.handleLongTapMenuClose()}this.onAction(n,s)},onScrollBeginDrag:()=>{if(c){this.handleLongTapMenuClose()}}})}handleLongTapMenuOpen(){if(!this.state.isLongTapMenuOpened){this.setState({isLongTapMenuOpened:true})}}handleLongTapMenuClose(){if(this.state.isLongTapMenuOpened){this.setState({isLongTapMenuOpened:false})}}renderRow(e){const t=e.status===l.Status.MISSED?a.accentMainAlert.toHex():a.base1.toHex();const s=Boolean(e.isUnseen);const n=e.color||"";const i=e.ts?r(e.ts):e.time||"";return o({item:e,timeLabel:i,avatarBg:n,titleColor:t,showMissedBadge:s,onClick:()=>{if(this.state.isLongTapMenuOpened){return}this.props.onItemClick?.(e)}})}generateActions(e){const t=Array.isArray(this.props.items)?this.props.items:[];const s=t[e];if(!s||s.isDeleting){return{left:[],right:[]}}const n=p.isFeatureEnabled("listview_icons_v1");return{left:[],right:[{color:a.accentMainAlert.toHex(),title:BX.message("MOBILEAPP_CALL_LIST_SWIPE_DELETE"),icon:n?"trashcan":"action_delete",key:"delete"},{color:a.base4.toHex(),title:BX.message("MOBILEAPP_CALL_LIST_SWIPE_CHAT"),icon:n?"chats":"action_unread",key:"open_chat"}]}}onAction(e,t){const s=Array.isArray(this.props.items)?this.props.items:[];const n=s[e];if(!n){return}if(t==="open_chat"){this.props.onOpenChat?.(n);return}if(t==="delete"){this.props.onDelete?.(n)}}}function u(e){return new h(e)}s.exports={ListView:u}}));
//# sourceMappingURL=extension.map.js