(()=>{const e=e=>jn.require(e);const{SendingForm:t}=e("mail/sending-form");const n={value:""};function s(e){const t=!e?.[0]?.customData;if(t){return e.map((e=>({value:e.email,isEmailHidden:e.isEmailHidden})))}return e.map((e=>({value:e?.customData?.email,isEmailHidden:e?.customData?.isEmailHidden,customData:e?.customData})))}function o(e){const t=[];Object.entries(e).forEach((([e,n])=>{const{typeName:s="contacts",id:o="",name:a=""}=n;let{email:r=[]}=n;if(!Array.isArray(r)){r=[{value:r}]}t.push({email:r,typeName:s,id:o,name:a})}));return t}BX.onViewLoaded((()=>{const e=BX.componentParameters.get("isForward",0);const a=BX.componentParameters.get("startEmailSender",null);const r=BX.componentParameters.get("isCrmMessage",1);const c=BX.componentParameters.get("reply_message_body",null);const m=BX.componentParameters.get("subject","");const i=BX.componentParameters.get("body","");const l=BX.componentParameters.get("files",[]);const d=BX.componentParameters.get("isSendFiles",false);const p=BX.componentParameters.get("senders",[]);const g=BX.componentParameters.get("clients",[]);const u=BX.componentParameters.get("clientIdsByType",{contacts:[],company:[]});let y=BX.componentParameters.get("contacts",[]);let B=BX.componentParameters.get("cc",[]);const X=o(g);y=y.length>0?s(y):[n];B=B.length>0?s(B):[n];const P=BX.componentParameters.get("owner",{inResponseToMessage:0,ownerType:0,ownerId:0});const f={bindingsData:X,senders:p,clientIdsByType:u,clients:g,replyMessageBody:c,to:y,cc:B,subject:m,body:i,files:l,isSendFiles:d,isCrmMessage:r,ownerEntity:P,isForward:e,widget:this.layout};if(a){f.startEmailSender=a}const w=new t(f);layout.showComponent(w)}))})();
//# sourceMappingURL=component.map.js