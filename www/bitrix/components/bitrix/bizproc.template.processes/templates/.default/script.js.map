{"version":3,"file":"script.js","sources":["src/template-processes.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\n\nimport 'ui.design-tokens';\nimport '../style.css';\n\nexport class TemplateProcesses\n{\n\t#signedParameters: string;\n\t#componentName: string;\n\t#gridId: string;\n\n\tconstructor(\n\t\toptions = {\n\t\t\tsignedParameters: string,\n\t\t\tcomponentName: string,\n\t\t\tgridId: string,\n\t\t},\n\t)\n\t{\n\t\tthis.#signedParameters = options.signedParameters;\n\t\tthis.#componentName = options.componentName;\n\t\tthis.#gridId = options.gridId;\n\t}\n\n\tdeleteTemplateAction(id: number): void\n\t{\n\t\tconst me = this;\n\n\t\tnew MessageBox({\n\t\t\tmessage: Loc.getMessage('BIZPROC_TEMPLATE_PROCESSES_DELETE_CONFIRMATION'),\n\t\t\tokCaption: Loc.getMessage('BIZPROC_TEMPLATE_PROCESSES_DELETE_OK_CAPTION_TEXT'),\n\t\t\tonOk: (messageBox) => {\n\t\t\t\tBX.ajax.runComponentAction(this.#componentName, 'deleteTemplate', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t},\n\t\t\t\t}).then(() => {\n\t\t\t\t\tme.#reloadGrid();\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tMessageBox.alert(response.errors[0].message);\n\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t});\n\t\t\t},\n\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\tpopupOptions: {\n\t\t\t\tevents: {\n\t\t\t\t\tonAfterShow: (event) => {\n\t\t\t\t\t\tconst okBtn = event.getTarget().getButton('ok');\n\n\t\t\t\t\t\tif (okBtn)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tokBtn.getContainer().focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tuseAirDesign: true,\n\t\t}).show();\n\t}\n\n\t#reloadGrid()\n\t{\n\t\tconst grid = this.#getGrid();\n\t\tif (grid)\n\t\t{\n\t\t\tgrid.reload();\n\t\t}\n\t};\n\n\t#getGrid(): BX.Main.grid | null\n\t{\n\t\tif (this.#gridId)\n\t\t{\n\t\t\treturn BX.Main.gridManager && BX.Main.gridManager.getInstanceById(this.#gridId);\n\t\t}\n\n\t\treturn null;\n\t}\n} "],"names":["TemplateProcesses","constructor","options","signedParameters","string","componentName","gridId","deleteTemplateAction","id","me","MessageBox","message","Loc","getMessage","okCaption","onOk","messageBox","BX","ajax","runComponentAction","mode","data","then","close","catch","response","alert","errors","buttons","MessageBoxButtons","OK_CANCEL","popupOptions","events","onAfterShow","event","okBtn","getTarget","getButton","getContainer","focus","useAirDesign","show","grid","reload","Main","gridManager","getInstanceById"],"mappings":";;;;;;CAIsB;CAAA;CAAA;CAAA;CAAA;AAEtB,CAAO,MAAMA,iBAAiB,CAC9B;GAKCC,WAAW,CACVC,OAAO,GAAG;KACTC,gBAAgB,EAAEC,MAAM;KACxBC,aAAa,EAAED,MAAM;KACrBE,MAAM,EAAEF;IACR,EAEF;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,0CAAqBF,OAAO,CAACC,gBAAgB;KACjD,4CAAI,oCAAkBD,OAAO,CAACG,aAAa;KAC3C,4CAAI,sBAAWH,OAAO,CAACI,MAAM;;GAG9BC,oBAAoB,CAACC,EAAU,EAC/B;KACC,MAAMC,EAAE,GAAG,IAAI;KAEf,IAAIC,gCAAU,CAAC;OACdC,OAAO,EAAEC,aAAG,CAACC,UAAU,CAAC,gDAAgD,CAAC;OACzEC,SAAS,EAAEF,aAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;OAC9EE,IAAI,EAAGC,UAAU,IAAK;SACrBC,EAAE,CAACC,IAAI,CAACC,kBAAkB,yCAAC,IAAI,mCAAiB,gBAAgB,EAAE;WACjEC,IAAI,EAAE,OAAO;WACbC,IAAI,EAAE;aACLb,EAAE,EAAEA;;UAEL,CAAC,CAACc,IAAI,CAAC,MAAM;WACb,wCAAAb,EAAE;WACFO,UAAU,CAACO,KAAK,EAAE;UAClB,CAAC,CAACC,KAAK,CAAEC,QAAQ,IAAK;WACtBf,gCAAU,CAACgB,KAAK,CAACD,QAAQ,CAACE,MAAM,CAAC,CAAC,CAAC,CAAChB,OAAO,CAAC;WAE5CK,UAAU,CAACO,KAAK,EAAE;UAClB,CAAC;QACF;OACDK,OAAO,EAAEC,uCAAiB,CAACC,SAAS;OACpCC,YAAY,EAAE;SACbC,MAAM,EAAE;WACPC,WAAW,EAAGC,KAAK,IAAK;aACvB,MAAMC,KAAK,GAAGD,KAAK,CAACE,SAAS,EAAE,CAACC,SAAS,CAAC,IAAI,CAAC;aAE/C,IAAIF,KAAK,EACT;eACCA,KAAK,CAACG,YAAY,EAAE,CAACC,KAAK,EAAE;;;;QAI/B;OACDC,YAAY,EAAE;MACd,CAAC,CAACC,IAAI,EAAE;;CAqBX;CAAC,wBAjBA;GACC,MAAMC,IAAI,2CAAG,IAAI,uBAAW;GAC5B,IAAIA,IAAI,EACR;KACCA,IAAI,CAACC,MAAM,EAAE;;CAEf;CAAC,qBAGD;GACC,4CAAI,IAAI,qBACR;KACC,OAAO1B,EAAE,CAAC2B,IAAI,CAACC,WAAW,IAAI5B,EAAE,CAAC2B,IAAI,CAACC,WAAW,CAACC,eAAe,yCAAC,IAAI,oBAAS;;GAGhF,OAAO,IAAI;CACZ;;;;;;;;"}