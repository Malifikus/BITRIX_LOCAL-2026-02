(function(e,t,n,a,s,i,r){"use strict";var c,l,o,d,u,v,h,g,m,p,b,S,T;function f(e,t){E(e,t);t.add(e)}function C(e,t,n){E(e,t);t.set(e,n)}function E(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function N(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var w=n.Reflection.namespace("BX.Crm");var L=new WeakMap;var _=new WeakMap;var A=new WeakMap;var k=new WeakMap;var H=new WeakMap;var I=new WeakMap;var B=new WeakSet;var O=new WeakSet;var P=new WeakSet;var M=new WeakSet;var y=new WeakSet;var W=new WeakSet;var R=new WeakSet;var F=new WeakSet;var G=new WeakSet;var D=new WeakSet;var x=new WeakSet;var z=new WeakSet;var U=new WeakSet;var X=new WeakSet;var K=new WeakSet;var V=new WeakSet;var j=new WeakSet;var q=new WeakSet;var J=function(){function e(t){var n;babelHelpers.classCallCheck(this,e);f(this,q);f(this,j);f(this,V);f(this,K);f(this,X);f(this,U);f(this,z);f(this,x);f(this,D);f(this,G);f(this,F);f(this,R);f(this,W);f(this,y);f(this,M);f(this,P);f(this,O);f(this,B);C(this,L,{writable:true,value:void 0});C(this,_,{writable:true,value:void 0});C(this,A,{writable:true,value:void 0});C(this,k,{writable:true,value:void 0});C(this,H,{writable:true,value:void 0});C(this,I,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,L,new Map(t.slider.pages.map((function(e){return[e.id,e]}))));babelHelpers.classPrivateFieldSet(this,_,t.currentPage);babelHelpers.classPrivateFieldSet(this,A,t.targetNodeId);babelHelpers.classPrivateFieldSet(this,H,t.contactCenterUrl);babelHelpers.classPrivateFieldSet(this,I,(n=t.analytics)!==null&&n!==void 0?n:{})}babelHelpers.createClass(e,[{key:"init",value:function e(){babelHelpers.classPrivateFieldSet(this,k,document.getElementById(babelHelpers.classPrivateFieldGet(this,A)));if(babelHelpers.classPrivateFieldGet(this,k)){N(this,B,Q).call(this)}}}]);return e}();function Q(){n.Dom.append(N(this,P,Z).call(this),babelHelpers.classPrivateFieldGet(this,k))}function Y(){n.Dom.clean(babelHelpers.classPrivateFieldGet(this,k));N(this,B,Q).call(this)}function Z(){return n.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),N(this,y,ee).call(this),N(this,R,ne).call(this,N(this,M,$).call(this)),N(this,q,he).call(this))}function $(){return babelHelpers.classPrivateFieldGet(this,L).get(babelHelpers.classPrivateFieldGet(this,_))}function ee(){var e=n.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-message-sender-connections-tab-navigation"></div>\n\t\t'])));N(this,W,te).call(this,e);return e}function te(e){var t=this;babelHelpers.classPrivateFieldGet(this,L).forEach((function(n,a){new i.Button({size:i.ButtonSize.SMALL,style:a===babelHelpers.classPrivateFieldGet(t,_)?i.AirButtonStyle.SELECTION:i.AirButtonStyle.PLAIN_NO_ACCENT,useAirDesign:true,text:n.title,onclick:function e(){if(a===babelHelpers.classPrivateFieldGet(t,_)){return}babelHelpers.classPrivateFieldSet(t,_,n.id);N(t,O,Y).call(t)}}).renderTo(e)}));new i.Button({size:i.ButtonSize.SMALL,style:i.AirButtonStyle.PLAIN_NO_ACCENT,useAirDesign:true,text:n.Loc.getMessage("CRM_MESSAGESENDER_CONNECTIONS_TAB_NAV_ALL_CONNECTION"),onclick:function e(){a.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(t,H));N(t,j,ve).call(t,"contactCenter")}}).renderTo(e);new i.Button({size:i.ButtonSize.SMALL,style:i.AirButtonStyle.PLAIN_NO_ACCENT,useAirDesign:true,text:n.Loc.getMessage("CRM_MESSAGESENDER_CONNECTIONS_TAB_NAV_MARKET"),onclick:function e(){a.SidePanel.Instance.open("/market/category/crm_robot_sms/")}}).renderTo(e)}function ne(e){var t=this;if(e.id==="recommendations"){return n.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="crm-message-sender-connections-page-recommendation">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),e.sections.map((function(e){return N(t,D,ie).call(t,e)})))}var a=n.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-message-sender-connections-page"></div>\n\t\t'])));for(var s=0;s<e.sections.length;s++){var i=e.sections[s];for(var r=0;r<i.channels.length;r++){var c=i.channels[r];n.Dom.append(N(this,F,ae).call(this,i,c),a)}}return a}function ae(e,t){var a=this;var s=n.Tag.render(u||(u=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-message-sender-connections-section-default" style="background: ','">\n\t\t\t\t','\n\t\t\t\t<div class="crm-message-sender-connections-section-default-image">\n\t\t\t\t\t<div><img alt="','" src="','"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="crm-message-sender-connections-section-channel-default-title" style="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),n.Text.encode(e.color),t.isConnected?N(this,G,se).call(this):"",n.Text.encode(e.title),n.Text.encode(e.iconPath),t.isConnected?"color: var(--ui-color-base-8)":"",n.Text.encode(e.title));n.Event.bind(s,"click",(function(){return N(a,V,ue).call(a,t)}));return s}function se(){var e=new r.Icon({icon:r.Main.CHECK,size:16,color:"#fff"}).render();return n.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-message-sender-connections-section-channel-status-connected">',"</div>\n\t\t"])),e)}function ie(e){var t=this;return n.Tag.render(h||(h=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-message-sender-connections-section" style="background: ','">\n\t\t\t\t','\n\t\t\t\t<div class="crm-message-sender-connections-section-channel-container">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),e.color,N(this,x,re).call(this,e),e.channels.map((function(e){return N(t,z,ce).call(t,e)})))}function re(e){var t=e.iconPath?n.Tag.render(g||(g=babelHelpers.taggedTemplateLiteral(['<img src="','">'])),e.iconPath):e.title;if(!e.description){return n.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<header class="crm-message-sender-connections-section-header">\n\t\t\t\t\t<div class="crm-message-sender-connections-section-icon">',"</div>\n\t\t\t\t</header>\n\t\t\t"])),n.Text.encode(t))}return n.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<header class="crm-message-sender-connections-section-header">\n\t\t\t\t<div class="crm-message-sender-connections-section-title">','</div>\n\t\t\t\t<div class="crm-message-sender-connections-section-description">',"</div>\n\t\t\t</header>\n\t\t"])),n.Text.encode(t),n.Text.encode(e.description))}function ce(e){return n.Tag.render(b||(b=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-message-sender-connections-channel">\n\t\t\t\t<div class="crm-message-sender-connections-channel-header">\n\t\t\t\t\t<div class="crm-message-sender-connections-channel-header-icon" style="background: ','">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t\t",'\n\t\t\t\t</div>\n\t\t\t\t<div class="crm-message-sender-connections-channel-content">\n\t\t\t\t\t<div class="crm-message-sender-connections-channel-content-title">\n\t\t\t\t\t\t<div class="crm-message-sender-connections-channel-content-title-text" title="','">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="crm-message-sender-connections-channel-content-description">',"</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),n.Text.encode(e.appearance.icon.background),N(this,X,oe).call(this,e.appearance.icon),N(this,K,de).call(this,e),n.Text.encode(e.appearance.title),n.Text.encode(e.appearance.title),N(this,U,le).call(this,e),n.Text.encode(e.appearance.description))}function le(e){if(!e.isConnected){return null}return n.Tag.render(S||(S=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-message-sender-connections-channel-status">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),n.Loc.getMessage("CRM_MESSAGESENDER_CONNECTIONS_CHANNEL_STATUS"))}function oe(e){return new r.Icon({icon:e.title,size:62,color:e.color}).render()}function de(e){var t=this;return new i.Button({size:i.ButtonSize.LARGE,style:e.isConnected?i.AirButtonStyle.OUTLINE:i.AirButtonStyle.FILLED,useAirDesign:true,text:e.isConnected?n.Loc.getMessage("CRM_MESSAGESENDER_CONNECTIONS_CHANNEL_SETTING_BUTTON"):n.Loc.getMessage("CRM_MESSAGESENDER_CONNECTIONS_CHANNEL_CONNECTION_BUTTON"),onclick:function n(){N(t,V,ue).call(t,e)}}).getContainer()}function ue(e){var t=this;var a=null;if(e.isLocked){a=n.Runtime.loadExtension("ui.info-helper").then((function(t){var n=t.FeaturePromotersRegistry;n.getPromoter({code:e.sliderCode}).show();return{status:"locked"}}))}else{a=n.Runtime.loadExtension("crm.router").then((function(t){var n=t.Router;return n.openSlider(e.connectionUrl).then()["catch"]()["finally"]((function(){return window.location.reload()}))})).then((function(e){return{status:e.getData().get("status")}}))}if(!e.isConnected){void a.then((function(n){var a=n.status;N(t,j,ve).call(t,e.id,a)}))}}function ve(e,n){var a=(new t.Builder.Communication.Channel.ConnectEvent).setChannelId(e).setConnectStatus(n).setSubSection(t.Dictionary.SUB_SECTION_CONNECTION_SLIDER).setSection(babelHelpers.classPrivateFieldGet(this,I).c_section).buildData();s.sendData(a)}function he(){var e=this;var t=new i.Button({size:i.ButtonSize.EXTRA_LARGE,style:i.AirButtonStyle.OUTLINE,useAirDesign:true,text:n.Loc.getMessage("CRM_MESSAGESENDER_CONNECTIONS_FOOTER_BUTTON_ALL_CONNECTION"),onclick:function t(){a.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(e,H));N(e,j,ve).call(e,"contactCenter")}}).getContainer();return n.Tag.render(T||(T=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-message-sender-connections-footer">',"</div>\n\t\t"])),t)}w.MessageSenderConnectionsComponent=J})(this.window=this.window||{},BX.Crm.Integration.Analytics,BX,BX.SidePanel,BX.UI.Analytics,BX.UI,BX.UI.IconSet);
//# sourceMappingURL=script.map.js