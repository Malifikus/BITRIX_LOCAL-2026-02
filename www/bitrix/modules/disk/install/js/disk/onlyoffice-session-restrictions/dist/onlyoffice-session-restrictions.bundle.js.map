{"version":3,"file":"onlyoffice-session-restrictions.bundle.js","sources":["../src/document-edit-session-limit.js","../src/index.js"],"sourcesContent":["import { Extension } from 'main.core';\n\nexport class DocumentEditSessionLimit\n{\n\tstatic #instance = null;\n\t#availableDocumentSessionCount: ?Number = null;\n\n\tconstructor()\n\t{\n\t\tconst extName = 'disk.onlyoffice-session-restrictions';\n\t\tconst tag = Extension.getSettings(extName).get('tag');\n\t\tthis.#availableDocumentSessionCount = Extension.getSettings(extName).get('availableDocumentSessionCount');\n\n\t\tBX.PULL.extendWatch(tag);\n\t\tBX.PULL.subscribe({\n\t\t\ttype: BX.PullClient.SubscriptionType.Server,\n\t\t\tmoduleId: 'disk',\n\t\t\tcommand: Extension.getSettings(extName).get('command'),\n\t\t\tcallback: (params) => {\n\t\t\t\tthis.#availableDocumentSessionCount = params.value;\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic initialize(): void\n\t{\n\t\tif (this.#instance === null)\n\t\t{\n\t\t\tthis.#instance = new this();\n\t\t}\n\t}\n\n\tstatic getInstance(): DocumentEditSessionLimit\n\t{\n\t\tthis.initialize();\n\n\t\treturn this.#instance;\n\t}\n\n\tisExceeded(): boolean\n\t{\n\t\treturn this.#availableDocumentSessionCount <= 0;\n\t}\n}\n","import { DocumentEditSessionLimit } from './document-edit-session-limit';\n\nDocumentEditSessionLimit.initialize();\n\nexport {\n\tDocumentEditSessionLimit,\n};\n"],"names":["DocumentEditSessionLimit","constructor","Object","writable","value","extName","tag","Extension","getSettings","get","babelHelpers","BX","PULL","extendWatch","subscribe","type","PullClient","SubscriptionType","Server","moduleId","command","callback","params","[object Object]","this","initialize","isExceeded"],"mappings":"6EAAsC,mIAE/B,MAAMA,EAKZC,cACAC,8BAAAC,YAAAC,MAH0C,OAIzC,MAAMC,EAAU,uCACVC,EAAMC,YAAUC,YAAYH,GAASI,IAAI,OAC/CC,mDAAsCH,YAAUC,YAAYH,GAASI,IAAI,iCAEzEE,GAAGC,KAAKC,YAAYP,GACpBK,GAAGC,KAAKE,UAAU,CACjBC,KAAMJ,GAAGK,WAAWC,iBAAiBC,OACrCC,SAAU,OACVC,QAASb,YAAUC,YAAYH,GAASI,IAAI,WAC5CY,SAAWC,IACVZ,mDAAsCY,EAAOlB,SAKhDmB,oBAEwB,OAAnBb,qDAEHA,mDAAiB,IAAIc,MAIvBD,qBAIC,OAFAC,KAAKC,qDAEED,WAGRE,aAEC,OAAOhB,oDAAuC,GAE/CR,sBAzCYF,KAAwBG,YAAAC,MAEjB,OCFpBJ,EAAyByB"}