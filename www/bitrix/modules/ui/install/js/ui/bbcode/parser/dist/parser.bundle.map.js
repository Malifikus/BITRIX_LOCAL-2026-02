{"version":3,"file":"parser.bundle.map.js","names":["this","BX","UI","exports","ui_bbcode_astProcessor","ui_bbcode_encoder","ui_linkify","ui_bbcode_model","main_core","getByIndex","array","index","Type","isArray","TypeError","isInteger","preparedIndex","length","ParserScheme","BBCodeScheme","getTagScheme","tagName","BBCodeTagScheme","name","isAllowedTag","isChildAllowed","parent","child","TAG_REGEX_GS","LF","CRLF","TAB","isLinebreak","symbol","includes","isTab","BBCodeTokenizer","trimQuotes","value","source","String","test","slice","toLowerCase","isStringFilled","tokenize","bbcode","tokens","listNestingLevels","lastIndex","replace","fullTag","slash","attrs","textBetween","push","parseText","isOpeningTag","Boolean","startIndex","attributes","parseAttributes","lowerCaseTagName","type","Object","fromEntries","pop","token","isUndefined","unclosed","nextContent","remainingText","i","text","regex","matches","matchAll","textBuffer","match","char","content","sourceAttributes","result","startsWith","trim","split","filter","reduce","acc","item","key","parserScheme","BBCodeParser","constructor","options","allowedLinkify","scheme","setScheme","DefaultBBCodeScheme","isFunction","onUnknown","setOnUnknown","defaultOnUnknownHandler","encoder","BBCodeEncoder","setEncoder","isBoolean","linkify","setIsAllowedLinkify","getScheme","handler","onUnknownHandler","getOnUnknownHandler","getEncoder","isAllowedLinkify","canBeLinkified","node","getName","notAllowedNodeNames","inNotAllowedNode","some","AstProcessor","findParentNodeByName","getType","BBCodeNode","ELEMENT_NODE","nodeName","newNode","createElement","setChildren","getChildren","fragment","createFragment","children","openingTag","getOpeningTag","closingTag","getClosingTag","createText","decodeAttributes","isArrayFilled","map","decodeAttribute","parse","tokenizer","createRoot","stack","wasOpened","level","forEach","tagScheme","isVoidTag","isVoid","voidNode","appendChild","currentNode","openedTagIndex","indexOf","splice","decodeText","createNewLine","createTab","getFinalLineBreaksIndexes","skip","reduceRight","flattenAst","finalLinebreaksIndexes","toString","encode","MultiTokens","Linkify","nodes","t","toHref","runOnParseHandler","BBCode"],"sources":["parser.bundle.js"],"mappings":"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","ignoreList":[]}