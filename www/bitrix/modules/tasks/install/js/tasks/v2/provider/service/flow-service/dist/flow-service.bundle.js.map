{"version":3,"file":"flow-service.bundle.js","sources":["../src/mappers.js","../src/flow-service.js","../src/index.js"],"sourcesContent":["import type { FlowModel } from 'tasks.v2.model.flows';\nimport type { FlowDto } from './types';\n\nexport function mapDtoToModel(flowDto: FlowDto): FlowModel\n{\n\treturn {\n\t\tid: flowDto.id,\n\t\tname: flowDto.name,\n\t};\n}\n","import { Endpoint, Model } from 'tasks.v2.const';\nimport { Core } from 'tasks.v2.core';\nimport { apiClient } from 'tasks.v2.lib.api-client';\nimport { GroupMappers } from 'tasks.v2.provider.service.group-service';\nimport { mapDtoToModel } from './mappers';\n\nclass FlowService\n{\n\tgetUrl(id: number, userId: number): string\n\t{\n\t\treturn `/company/personal/user/${userId}/tasks/flow/?ID_numsel=exact&ID_from=${id}&ID_to=${id}&apply_filter=Y`;\n\t}\n\n\tasync getFlow(id: number): Promise<void>\n\t{\n\t\ttry\n\t\t{\n\t\t\tconst data = await apiClient.post(Endpoint.FlowGet, { flow: { id } });\n\n\t\t\tconst flow = mapDtoToModel(data);\n\t\t\tconst group = GroupMappers.mapDtoToModel(data.group);\n\n\t\t\tawait Core.getStore().dispatch(`${Model.Flows}/insert`, flow);\n\t\t\tawait Core.getStore().dispatch(`${Model.Groups}/insert`, group);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('FlowService: getFlow error', error);\n\t\t}\n\t}\n}\n\nexport const flowService = new FlowService();\n","import { mapDtoToModel } from './mappers';\n\nexport { flowService } from './flow-service';\nexport const FlowMappers = { mapDtoToModel };\nexport type { FlowDto } from './types';\n"],"names":["mapDtoToModel","flowDto","id","name","FlowService","getUrl","userId","getFlow","data","apiClient","post","Endpoint","FlowGet","flow","group","GroupMappers","Core","getStore","dispatch","Model","Flows","Groups","error","console","flowService","FlowMappers"],"mappings":";;;;;;;;CAGO,SAASA,aAAa,CAACC,OAAgB,EAC9C;GACC,OAAO;KACNC,EAAE,EAAED,OAAO,CAACC,EAAE;KACdC,IAAI,EAAEF,OAAO,CAACE;IACd;CACF;;CCHA,MAAMC,WAAW,CACjB;GACCC,MAAM,CAACH,EAAU,EAAEI,MAAc,EACjC;KACC,OAAQ,0BAAyBA,MAAO,wCAAuCJ,EAAG,UAASA,EAAG,iBAAgB;;GAG/G,MAAMK,OAAO,CAACL,EAAU,EACxB;KACC,IACA;OACC,MAAMM,IAAI,GAAG,MAAMC,gCAAS,CAACC,IAAI,CAACC,uBAAQ,CAACC,OAAO,EAAE;SAAEC,IAAI,EAAE;WAAEX;;QAAM,CAAC;OAErE,MAAMW,IAAI,GAAGb,aAAa,CAACQ,IAAI,CAAC;OAChC,MAAMM,KAAK,GAAGC,mDAAY,CAACf,aAAa,CAACQ,IAAI,CAACM,KAAK,CAAC;OAEpD,MAAME,kBAAI,CAACC,QAAQ,EAAE,CAACC,QAAQ,CAAE,GAAEC,oBAAK,CAACC,KAAM,SAAQ,EAAEP,IAAI,CAAC;OAC7D,MAAMG,kBAAI,CAACC,QAAQ,EAAE,CAACC,QAAQ,CAAE,GAAEC,oBAAK,CAACE,MAAO,SAAQ,EAAEP,KAAK,CAAC;MAC/D,CACD,OAAOQ,KAAK,EACZ;OACCC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;;;CAGrD;AAEA,OAAaE,WAAW,GAAG,IAAIpB,WAAW,EAAE;;OC7B/BqB,WAAW,GAAG;GAAEzB;CAAc,CAAC;;;;;;;;;"}