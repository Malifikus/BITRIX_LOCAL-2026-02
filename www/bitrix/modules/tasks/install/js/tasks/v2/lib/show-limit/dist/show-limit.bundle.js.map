{"version":3,"file":"show-limit.bundle.js","sources":["../src/show-limit.js"],"sourcesContent":["import { Runtime, Type } from 'main.core';\n\nexport type LimitParams = {\n\tfeatureId: string,\n\tcode?: string,\n\tbindElement?: HTMLElement,\n\tlimitAnalyticsLabels?: Object,\n}\n\nexport const showLimit = (limitParams: LimitParams): Promise<void> => {\n\tif (!Type.isStringFilled(limitParams.featureId))\n\t{\n\t\tthrow new Error('featureId is required');\n\t}\n\n\tconst featureId: string = limitParams.featureId;\n\tconst code: string = Type.isStringFilled(limitParams.code) ? limitParams.code : `limit_${featureId}`;\n\tconst bindElement: ?HTMLElement = Type.isElementNode(limitParams.bindElement) ? limitParams.bindElement : null;\n\n\tlet limitAnalyticsLabels: Object = {};\n\tif (Type.isPlainObject(limitParams.limitAnalyticsLabels))\n\t{\n\t\tlimitAnalyticsLabels = { module: 'tasks', ...limitParams.limitAnalyticsLabels };\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\tRuntime.loadExtension('ui.info-helper')\n\t\t\t.then(({ FeaturePromotersRegistry }) => {\n\t\t\t\tif (FeaturePromotersRegistry)\n\t\t\t\t{\n\t\t\t\t\tFeaturePromotersRegistry.getPromoter({\n\t\t\t\t\t\tfeatureId,\n\t\t\t\t\t\tcode,\n\t\t\t\t\t\tbindElement,\n\t\t\t\t\t}).show();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.UI.InfoHelper.show(code, {\n\t\t\t\t\t\tlimitAnalyticsLabels,\n\t\t\t\t\t\tisLimit: true,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t})\n\t\t;\n\t});\n};\n"],"names":["showLimit","limitParams","Type","isStringFilled","featureId","Error","code","bindElement","isElementNode","limitAnalyticsLabels","isPlainObject","module","Promise","resolve","reject","Runtime","loadExtension","then","FeaturePromotersRegistry","getPromoter","show","BX","UI","InfoHelper","isLimit","catch","error"],"mappings":";;;;;;;OASaA,SAAS,GAAIC,WAAwB,IAAoB;GACrE,IAAI,CAACC,cAAI,CAACC,cAAc,CAACF,WAAW,CAACG,SAAS,CAAC,EAC/C;KACC,MAAM,IAAIC,KAAK,CAAC,uBAAuB,CAAC;;GAGzC,MAAMD,SAAiB,GAAGH,WAAW,CAACG,SAAS;GAC/C,MAAME,IAAY,GAAGJ,cAAI,CAACC,cAAc,CAACF,WAAW,CAACK,IAAI,CAAC,GAAGL,WAAW,CAACK,IAAI,GAAI,SAAQF,SAAU,EAAC;GACpG,MAAMG,WAAyB,GAAGL,cAAI,CAACM,aAAa,CAACP,WAAW,CAACM,WAAW,CAAC,GAAGN,WAAW,CAACM,WAAW,GAAG,IAAI;GAE9G,IAAIE,oBAA4B,GAAG,EAAE;GACrC,IAAIP,cAAI,CAACQ,aAAa,CAACT,WAAW,CAACQ,oBAAoB,CAAC,EACxD;KACCA,oBAAoB,GAAG;OAAEE,MAAM,EAAE,OAAO;OAAE,GAAGV,WAAW,CAACQ;MAAsB;;GAGhF,OAAO,IAAIG,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;KACvCC,iBAAO,CAACC,aAAa,CAAC,gBAAgB,CAAC,CACrCC,IAAI,CAAC,CAAC;OAAEC;MAA0B,KAAK;OACvC,IAAIA,wBAAwB,EAC5B;SACCA,wBAAwB,CAACC,WAAW,CAAC;WACpCf,SAAS;WACTE,IAAI;WACJC;UACA,CAAC,CAACa,IAAI,EAAE;QACT,MAED;SACCC,EAAE,CAACC,EAAE,CAACC,UAAU,CAACH,IAAI,CAACd,IAAI,EAAE;WAC3BG,oBAAoB;WACpBe,OAAO,EAAE;UACT,CAAC;;OAGHX,OAAO,EAAE;MACT,CAAC,CACDY,KAAK,CAAEC,KAAK,IAAK;OACjBZ,MAAM,CAACY,KAAK,CAAC;MACb,CAAC;IAEH,CAAC;CACH,CAAC;;;;;;;;"}