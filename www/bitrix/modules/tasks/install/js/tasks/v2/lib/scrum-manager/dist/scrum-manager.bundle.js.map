{"version":3,"file":"scrum-manager.bundle.js","sources":["../src/scrum-manager.js"],"sourcesContent":["import { Runtime } from 'main.core';\nimport { GroupType } from 'tasks.v2.const';\n\ntype Params = {\n\ttaskId: number,\n\tparentId: number,\n\tgroupId: number,\n};\n\nexport class ScrumManager\n{\n\t#params: Params;\n\n\t#taskStatus: TaskStatus;\n\t#isParentScrumTask: boolean;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#params = params;\n\t}\n\n\tisScrum(groupType: ?string): boolean\n\t{\n\t\treturn groupType === GroupType.Scrum;\n\t}\n\n\tasync handleDodDisplay(): Promise<boolean>\n\t{\n\t\tconst { TaskStatus } = await Runtime.loadExtension('tasks.scrum.task-status');\n\n\t\tthis.#taskStatus ??= new TaskStatus({\n\t\t\tgroupId: this.#params.groupId,\n\t\t\tparentTaskId: this.#params.parentId,\n\t\t\ttaskId: this.#params.taskId,\n\t\t\taction: 'complete',\n\t\t\tperformActionOnParentTask: true,\n\t\t});\n\n\t\tthis.#isParentScrumTask ??= await this.#taskStatus.isParentScrumTask(this.#params.parentId);\n\t\tif (!this.#isParentScrumTask)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait this.#taskStatus.showDod(this.#params.taskId);\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tasync handleParentState(): Promise<void>\n\t{\n\t\tconst { TaskStatus } = await Runtime.loadExtension('tasks.scrum.task-status');\n\n\t\tthis.#taskStatus ??= new TaskStatus({\n\t\t\tgroupId: this.#params.groupId,\n\t\t\tparentTaskId: this.#params.parentId,\n\t\t\ttaskId: this.#params.taskId,\n\t\t\taction: 'complete',\n\t\t\tperformActionOnParentTask: true,\n\t\t});\n\n\t\tthis.#isParentScrumTask ??= await this.#taskStatus.isParentScrumTask(this.#params.parentId);\n\t\tif (this.#isParentScrumTask)\n\t\t{\n\t\t\tvoid this.#taskStatus.update();\n\t\t}\n\t}\n}\n"],"names":["ScrumManager","constructor","params","isScrum","groupType","GroupType","Scrum","handleDodDisplay","TaskStatus","Runtime","loadExtension","groupId","parentTaskId","parentId","taskId","action","performActionOnParentTask","isParentScrumTask","showDod","handleParentState","update"],"mappings":";;;;;;;CAC2C;CAAA;CAAA;AAQ3C,CAAO,MAAMA,YAAY,CACzB;GAMCC,WAAW,CAACC,MAAc,EAC1B;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,sBAAWA,MAAM;;GAGtBC,OAAO,CAACC,SAAkB,EAC1B;KACC,OAAOA,SAAS,KAAKC,wBAAS,CAACC,KAAK;;GAGrC,MAAMC,gBAAgB,GACtB;KAAA;KACC,MAAM;OAAEC;MAAY,GAAG,MAAMC,iBAAO,CAACC,aAAa,CAAC,yBAAyB,CAAC;KAE7E,+FAAI,sGAAiB,IAAIF,UAAU,CAAC;OACnCG,OAAO,EAAE,4CAAI,oBAASA,OAAO;OAC7BC,YAAY,EAAE,4CAAI,oBAASC,QAAQ;OACnCC,MAAM,EAAE,4CAAI,oBAASA,MAAM;OAC3BC,MAAM,EAAE,UAAU;OAClBC,yBAAyB,EAAE;MAC3B,CAAC;KAEF,gGAAI,4HAAwB,MAAM,4CAAI,4BAAaC,iBAAiB,CAAC,4CAAI,oBAASJ,QAAQ,CAAC;KAC3F,IAAI,yCAAC,IAAI,yCAAmB,EAC5B;OACC,IACA;SACC,MAAM,4CAAI,4BAAaK,OAAO,CAAC,4CAAI,oBAASJ,MAAM,CAAC;SAEnD,OAAO,IAAI;QACX,CACD,MACA;SACC,OAAO,KAAK;;;KAId,OAAO,IAAI;;GAGZ,MAAMK,iBAAiB,GACvB;KAAA;KACC,MAAM;OAAEX;MAAY,GAAG,MAAMC,iBAAO,CAACC,aAAa,CAAC,yBAAyB,CAAC;KAE7E,gGAAI,uGAAiB,IAAIF,UAAU,CAAC;OACnCG,OAAO,EAAE,4CAAI,oBAASA,OAAO;OAC7BC,YAAY,EAAE,4CAAI,oBAASC,QAAQ;OACnCC,MAAM,EAAE,4CAAI,oBAASA,MAAM;OAC3BC,MAAM,EAAE,UAAU;OAClBC,yBAAyB,EAAE;MAC3B,CAAC;KAEF,gGAAI,4HAAwB,MAAM,4CAAI,4BAAaC,iBAAiB,CAAC,4CAAI,oBAASJ,QAAQ,CAAC;KAC3F,4CAAI,IAAI,2CACR;OACC,KAAK,4CAAI,4BAAaO,MAAM,EAAE;;;CAGjC;;;;;;;;"}