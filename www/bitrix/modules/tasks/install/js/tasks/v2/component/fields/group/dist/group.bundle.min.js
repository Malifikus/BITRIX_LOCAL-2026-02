this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{};(function(t,e,s,i,o,n,r,a,l,d,u,p,c,h,g,v,m,S,f,k,I,T,b,B,y,C,P){"use strict";const _=Object.freeze({id:I.TaskField.Group,title:p.Loc.getMessage("TASKS_V2_GROUP_TITLE"),stageTitle:p.Loc.getMessage("TASKS_V2_GROUP_STAGE_TITLE"),epicTitle:p.Loc.getMessage("TASKS_V2_GROUP_EPIC_TITLE"),storyPointsTitle:p.Loc.getMessage("TASKS_V2_GROUP_STORY_POINTS_TITLE"),getTitle:t=>{var e;const s=k.Core.getStore().getters[`${I.Model.Groups}/getById`](t);return(e={[I.GroupType.Collab]:p.Loc.getMessage("TASKS_V2_GROUP_TITLE_COLLAB"),[I.GroupType.Scrum]:p.Loc.getMessage("TASKS_V2_GROUP_TITLE_SCRUM")}[s==null?void 0:s.type])!=null?e:p.Loc.getMessage("TASKS_V2_GROUP_TITLE")}});const w={components:{Popup:i.Popup,UiButton:o.Button},inject:{task:{}},props:{getBindElement:{type:Function,required:true}},emits:["close"],setup(){return{AirButtonStyle:o.AirButtonStyle,ButtonSize:o.ButtonSize}},data(){return{isPopupShown:false,groupInfo:{}}},computed:{group(){return this.$store.getters[`${I.Model.Groups}/getById`](this.task.groupId)},bindElement(){return this.getBindElement()},options(){return{id:"tasks-field-group-popup",bindElement:this.bindElement,padding:24,minWidth:260,maxWidth:400,offsetTop:8,targetContainer:document.body}},groupOwnerUrl(){return n.userService.getUrl(this.groupInfo.ownerId)},groupMembersCountFormatted(){return p.Loc.getMessagePlural("TASKS_V2_GROUP_COUNT_MEMBERS",this.groupInfo.numberOfMembers,{"#COUNT#":this.groupInfo.numberOfMembers})},groupAboutFormatted(){var t,e;return(t={[I.GroupType.Collab]:this.loc("TASKS_V2_GROUP_ABOUT_COLLAB"),[I.GroupType.Scrum]:this.loc("TASKS_V2_GROUP_ABOUT_SCRUM")}[(e=this.group)==null?void 0:e.type])!=null?t:this.loc("TASKS_V2_GROUP_ABOUT")}},mounted(){p.Event.bind(this.bindElement,"click",this.handleClick);p.Event.bind(this.bindElement,"mouseenter",this.handleMouseEnter);p.Event.bind(this.bindElement,"mouseleave",this.handleMouseLeave)},methods:{async openGroup(){const t=await C.groupService.getUrl(this.group.id,this.group.type);BX.SidePanel.Instance.emulateAnchorClick(t)},handleClick(){this.clearTimeouts()},handleMouseEnter(){if(!this.group){return}this.groupInfoPromise=C.groupService.getGroupInfo(this.group.id);this.clearTimeouts();this.showTimeout=setTimeout((()=>this.showPopup()),400)},handleMouseLeave(){p.Event.unbind(document,"mouseover",this.updateHoverElement);p.Event.bind(document,"mouseover",this.updateHoverElement);this.clearTimeouts();this.closeTimeout=setTimeout((()=>{var t;if(!((t=this.$refs.container)!=null&&t.contains(this.hoverElement))&&!this.bindElement.contains(this.hoverElement)){this.closePopup()}}),100)},updateHoverElement(t){this.hoverElement=t.target},async showPopup(){if(this.groupInfoPromise){this.groupInfo=await this.groupInfoPromise}if(!this.group||Object.keys(this.groupInfo).length===0){return}this.clearTimeouts();this.isPopupShown=true;await this.$nextTick();this.$refs.popup.adjustPosition()},closePopup(){this.clearTimeouts();this.isPopupShown=false;p.Event.unbind(this.$refs.container,"mouseleave",this.handleMouseLeave);p.Event.unbind(document,"mouseover",this.updateHoverElement)},clearTimeouts(){clearTimeout(this.closeTimeout);clearTimeout(this.showTimeout)}},template:`\n\t\t<Popup v-if="isPopupShown" :options ref="popup" @close="closePopup">\n\t\t\t<div class="tasks-field-group-popup" ref="container">\n\t\t\t\t<div class="tasks-field-group-popup-header">\n\t\t\t\t\t<img class="tasks-field-group-popup-image" :src="encodeURI(group?.image)" :alt="group?.name">\n\t\t\t\t\t<div class="tasks-field-group-popup-title-container">\n\t\t\t\t\t\t<div class="tasks-field-group-popup-title" :title="group?.name">{{ group?.name }}</div>\n\t\t\t\t\t\t<div class="tasks-field-group-popup-subtitle">{{ groupMembersCountFormatted }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tasks-field-group-popup-button">\n\t\t\t\t\t<UiButton\n\t\t\t\t\t\t:text="groupAboutFormatted"\n\t\t\t\t\t\t:style="AirButtonStyle.OUTLINE_ACCENT_2"\n\t\t\t\t\t\t:size="ButtonSize.SMALL"\n\t\t\t\t\t\twide\n\t\t\t\t\t\t@click="openGroup"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class="tasks-field-group-popup-info">\n\t\t\t\t\t<div class="tasks-field-group-popup-field">\n\t\t\t\t\t\t<div class="tasks-field-group-popup-field-title">{{ loc('TASKS_V2_GROUP_OWNER') }}</div>\n\t\t\t\t\t\t<div class="tasks-field-group-popup-field-value">\n\t\t\t\t\t\t\t<a :href="groupOwnerUrl">{{ groupInfo.ownerName }}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tasks-field-group-popup-field">\n\t\t\t\t\t\t<div class="tasks-field-group-popup-field-title">{{ loc('TASKS_V2_GROUP_DATE_CREATE') }}</div>\n\t\t\t\t\t\t<div class="tasks-field-group-popup-field-value">{{ groupInfo.dateCreate }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tasks-field-group-popup-field">\n\t\t\t\t\t\t<div class="tasks-field-group-popup-field-title">{{ loc('TASKS_V2_GROUP_SUBJECT') }}</div>\n\t\t\t\t\t\t<div class="tasks-field-group-popup-field-value">{{ groupInfo.subjectTitle }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`};var E,O,L,A,F,H,M;const U=new(E=babelHelpers.classPrivateFieldLooseKey("dialog"),O=babelHelpers.classPrivateFieldLooseKey("taskId"),L=babelHelpers.classPrivateFieldLooseKey("onClose"),A=babelHelpers.classPrivateFieldLooseKey("createDialog"),F=babelHelpers.classPrivateFieldLooseKey("handleGroupSelect"),H=babelHelpers.classPrivateFieldLooseKey("fillStore"),M=babelHelpers.classPrivateFieldLooseKey("items"),class{constructor(){Object.defineProperty(this,M,{get:V,set:void 0});Object.defineProperty(this,A,{value:G});Object.defineProperty(this,E,{writable:true,value:void 0});Object.defineProperty(this,O,{writable:true,value:void 0});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,F,{writable:true,value:async()=>{var t,e,s;const i=await babelHelpers.classPrivateFieldLooseBase(this,H)[H]();C.groupService.setHasScrumInfo(babelHelpers.classPrivateFieldLooseBase(this,O)[O]);(t=(e=babelHelpers.classPrivateFieldLooseBase(this,L))[L])==null?void 0:t.call(e,i);const o=await P.taskService.update(babelHelpers.classPrivateFieldLooseBase(this,O)[O],{groupId:i,stageId:0});if((s=o[I.Endpoint.TaskUpdate])!=null&&s.length){const t=o[I.Endpoint.TaskUpdate][0];r.Notifier.notifyViaBrowserProvider({id:"task-notify-update-group-error",text:t==null?void 0:t.message})}}});Object.defineProperty(this,H,{writable:true,value:async()=>{const t=babelHelpers.classPrivateFieldLooseBase(this,E)[E].getSelectedItems()[0];if(!t){return 0}const e={id:t.getId(),name:t.getTitle(),image:t.getAvatar(),type:t.getEntityType()};await k.Core.getStore().dispatch(`${I.Model.Groups}/insert`,e);return e.id}})}show(t){var e,s;babelHelpers.classPrivateFieldLooseBase(this,O)[O]=t.taskId;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=t.onClose;(s=(e=babelHelpers.classPrivateFieldLooseBase(this,E))[E])!=null?s:e[E]=babelHelpers.classPrivateFieldLooseBase(this,A)[A]();babelHelpers.classPrivateFieldLooseBase(this,E)[E].selectItemsByIds(babelHelpers.classPrivateFieldLooseBase(this,M)[M]);babelHelpers.classPrivateFieldLooseBase(this,E)[E].showTo(t.targetNode)}});function G(){return new c.EntitySelectorDialog({context:"tasks-card",multiple:false,hideOnDeselect:true,enableSearch:true,entities:[{id:I.EntitySelectorEntity.Project}],preselectedItems:babelHelpers.classPrivateFieldLooseBase(this,M)[M],events:{onLoad:babelHelpers.classPrivateFieldLooseBase(this,H)[H]},popupOptions:{events:{onClose:babelHelpers.classPrivateFieldLooseBase(this,F)[F]}}})}function V(){const t=P.taskService.getStoreTask(babelHelpers.classPrivateFieldLooseBase(this,O)[O]).groupId;return t?[[I.EntitySelectorEntity.Project,t]]:[]}const R={components:{BIcon:S.BIcon,BMenu:a.BMenu,Hint:T.Hint,HoverPill:e.HoverPill,FieldAdd:s.FieldAdd,GroupPopup:w},inject:{task:{},taskId:{},isEdit:{}},setup(){return{groupMeta:_,Outline:S.Outline}},data(){return{isMenuShown:false,isHintShown:false}},computed:{group(){return this.$store.getters[`${I.Model.Groups}/getById`](this.task.groupId)},menuOptions(){return{id:"tasks-field-group-menu",bindElement:this.$refs.group,offsetTop:8,items:[{title:this.getAboutItemTitle(),icon:S.Outline.FOLDER,onClick:this.openGroup},{title:this.loc("TASKS_V2_GROUP_CHANGE"),icon:S.Outline.EDIT_L,onClick:this.isLocked?this.showLimitDialog:this.showDialog},{design:a.MenuItemDesign.Alert,title:this.loc("TASKS_V2_GROUP_CLEAR"),icon:S.Outline.CROSS_L,onClick:this.clearField}],targetContainer:document.body}},groupName(){var t,e;return(t=(e=this.group)==null?void 0:e.name)!=null?t:this.loc("TASKS_V2_GROUP_HIDDEN")},groupImage(){var t;return encodeURI((t=this.group)==null?void 0:t.image)},isSecret(){return Boolean(this.task.groupId)&&!this.group},hasFlow(){return this.task.flowId>0},readonly(){return!this.task.rights.edit||this.hasFlow},isLocked(){return!k.Core.getParams().restrictions.project.available}},methods:{getAboutItemTitle(){var t,e;return(t={[I.GroupType.Collab]:this.loc("TASKS_V2_GROUP_ABOUT_COLLAB"),[I.GroupType.Scrum]:this.loc("TASKS_V2_GROUP_ABOUT_SCRUM")}[(e=this.group)==null?void 0:e.type])!=null?t:this.loc("TASKS_V2_GROUP_ABOUT")},handleClick(){if(!this.isEdit&&this.hasFlow){this.isHintShown=true;return}if(this.readonly){if(!this.isSecret){void this.openGroup()}return}if(this.isEdit&&this.group){this.isMenuShown=true}else if(this.isLocked){this.showLimitDialog()}else{this.showDialog()}},async openGroup(){const t=await C.groupService.getUrl(this.group.id,this.group.type);BX.SidePanel.Instance.emulateAnchorClick(t)},showDialog(){U.show({targetNode:this.$refs.group,taskId:this.taskId})},clearField(){void P.taskService.update(this.taskId,{groupId:0,stageId:0})},showLimitDialog(){void B.showLimit({featureId:k.Core.getParams().restrictions.project.featureId})}},template:`\n\t\t<div\n\t\t\t:data-task-id="taskId"\n\t\t\t:data-task-field-id="groupMeta.id"\n\t\t\t:data-task-field-value="task.groupId"\n\t\t\tref="group"\n\t\t>\n\t\t\t<div class="tasks-field-group-group" :class="{ '--secret': isSecret }" @click="handleClick">\n\t\t\t\t<HoverPill\n\t\t\t\t\tv-if="task.groupId"\n\t\t\t\t\t:withClear="!readonly && !isEdit && (task.flowId ?? 0) <= 0"\n\t\t\t\t\t:active="isMenuShown"\n\t\t\t\t\t@clear="clearField"\n\t\t\t\t>\n\t\t\t\t\t<img v-if="groupImage" class="tasks-field-group-image" :src="groupImage" :alt="groupName"/>\n\t\t\t\t\t<BIcon v-else class="tasks-field-group-icon" :name="Outline.FOLDER"/>\n\t\t\t\t\t<div class="tasks-field-group-title">{{ groupName }}</div>\n\t\t\t\t</HoverPill>\n\t\t\t\t<FieldAdd v-else :icon="Outline.FOLDER_PLUS"/>\n\t\t\t</div>\n\t\t</div>\n\t\t<Hint v-if="isHintShown" :bindElement="$refs.group" @close="isHintShown = false">\n\t\t\t{{ loc('TASKS_V2_GROUP_CANT_CHANGE_FLOW') }}\n\t\t</Hint>\n\t\t<BMenu v-if="isMenuShown" :options="menuOptions" @close="isMenuShown = false"/>\n\t\t<GroupPopup :getBindElement="() => $refs.group"/>\n\t`};const X={components:{BIcon:S.BIcon,BMenu:a.BMenu,BLine:v.BLine},inject:{task:{},taskId:{},isEdit:{}},setup(){return{Outline:S.Outline}},data(){return{isMenuShown:false}},computed:{group(){return this.$store.getters[`${I.Model.Groups}/getById`](this.task.groupId)},groupId(){return this.task.groupId},stageId(){return this.task.stageId},stage(){var t;return(t=this.$store.getters[`${I.Model.Stages}/getById`](this.stageId))!=null?t:null},menuOptions(){return()=>({id:"tasks-field-group-stage-menu",bindElement:this.$refs.stage,offsetTop:8,maxWidth:500,items:this.menuItems,maxHeight:window.innerHeight/2,targetContainer:document.body})},menuItems(){var t;const e=this.$store.getters[`${I.Model.Stages}/getByIds`]((t=this.group.stagesIds)!=null?t:[]).sort((({sort:t},{sort:e})=>t-e));return e==null?void 0:e.map((t=>({title:t.title,svg:this.getStageSvg(new h.Color(t.color).limit(250).toRgb()),isSelected:t.id===this.stage.id,onClick:()=>this.setStage(t.id)})))},backgroundColor(){return new h.Color(this.stage.color).setOpacity(.1).limit(250).toRgb()},isDarkColor(){return new h.Color(this.stage.color).isDark()},readonly(){return!this.task.rights.sort}},watch:{groupId(){void this.loadStagesForCreation()}},created(){void this.loadStagesForCreation()},methods:{getStageSvg(t){return new l.Icon({icon:S.CRM.STAGE,color:t}).render()},async handleClick(){if(this.readonly){return}if(!this.group.stagesIds||this.group.stagesIds.length===0){await C.groupService.getStages(this.groupId)}this.isMenuShown=true},async setStage(t){var e,s;const i=new u.ScrumManager({taskId:this.task.id,parentId:this.task.parentId,groupId:this.task.groupId});let o=true;if(i.isScrum((e=this.group)==null?void 0:e.type)){var n;const e=(n=await this.$store.getters[`${I.Model.Stages}/getById`](t))!=null?n:null;if(e.systemType==="FINISH"){o=await i.handleDodDisplay()}}if(!o){return}await P.taskService.setStage(this.taskId,t);if(i.isScrum((s=this.group)==null?void 0:s.type)){void(i==null?void 0:i.handleParentState())}},async loadStagesForCreation(){if(this.isEdit||this.group.stagesIds){return}await C.groupService.getStages(this.groupId)}},template:`\n\t\t<div\n\t\t\tv-if="stage?.id"\n\t\t\tclass="tasks-field-group-stage"\n\t\t\t:class="{ '--dark': isDarkColor, '--readonly': readonly }"\n\t\t\t:style="{\n\t\t\t\t'--stage-color': '#' + stage.color,\n\t\t\t\t'--stage-background': backgroundColor,\n\t\t\t}"\n\t\t\t:title="stage?.title"\n\t\t\t:data-task-id="taskId"\n\t\t\t:data-task-field-id="'stageId'"\n\t\t\t:data-task-field-value="stageId"\n\t\t\t:data-task-stage-title="stage?.title"\n\t\t\tref="stage"\n\t\t\t@click="handleClick"\n\t\t>\n\t\t\t<div class="tasks-field-group-stage-text-container">\n\t\t\t\t<div class="tasks-field-group-stage-text">{{ stage.title }}</div>\n\t\t\t</div>\n\t\t\t<div class="tasks-field-group-stage-arrow"/>\n\t\t\t<BIcon v-if="!readonly" :name="Outline.CHEVRON_DOWN_S"/>\n\t\t</div>\n\t\t<div v-else class="tasks-field-group-stage-loader">\n\t\t\t<BLine :width="80" :height="10"/>\n\t\t</div>\n\t\t<BMenu v-if="isMenuShown" :options="menuOptions()" @close="isMenuShown = false"/>\n\t`};const D={components:{TextXs:g.TextXs,BIcon:S.BIcon,BLine:v.BLine},inject:{task:{},taskId:{}},setup(){return{Outline:S.Outline}},data(){return{hasScrumInfo:C.groupService.hasScrumInfo(this.taskId)}},computed:{epic(){return this.$store.getters[`${I.Model.Epics}/getById`](this.task.epicId)},preselectedEpic(){return this.epic?[["epic-selector",this.epic.id]]:[]},epicColor(){if(!this.epic){return""}return new h.Color(this.epic.color).toRgb()},backgroundColor(){if(!this.epic){return""}return new h.Color(this.epic.color).setOpacity(.3).limit(250).toRgb()},isDarkColor(){if(!this.epic){return false}return new h.Color(this.epic.color).isDark()}},async mounted(){await C.groupService.getScrumInfo(this.taskId);this.hasScrumInfo=C.groupService.hasScrumInfo(this.taskId)},methods:{showDialog(){var t,e;(t=this.handleEpicSelectedDebounced)!=null?t:this.handleEpicSelectedDebounced=p.Runtime.debounce(this.handleEpicSelected,10,this);(e=this.dialog)!=null?e:this.dialog=new c.EntitySelectorDialog({multiple:false,dropdownMode:true,enableSearch:true,compactView:true,hideOnDeselect:true,entities:[{id:I.EntitySelectorEntity.Epic,options:{groupId:this.task.groupId},dynamicLoad:true,dynamicSearch:true}],preselectedItems:this.preselectedEpic,events:{"Item:onSelect":this.handleEpicSelectedDebounced,"Item:onDeselect":this.handleEpicSelectedDebounced}});this.dialog.selectItemsByIds(this.preselectedEpic);this.dialog.showTo(this.$el)},handleEpicSelected(){var t;const e=this.dialog.getSelectedItems()[0];if(e){void this.$store.dispatch(`${I.Model.Epics}/insert`,{id:e.getId(),title:e.getTitle(),color:e.getAvatarOption("bgColor")})}void P.taskService.update(this.taskId,{epicId:(t=e==null?void 0:e.getId())!=null?t:0})}},template:`\n\t\t<div\n\t\t\tv-if="hasScrumInfo"\n\t\t\tclass="tasks-field-epic"\n\t\t\t:class="{ '--dark': isDarkColor, '--filled': epic }"\n\t\t\t:style="{\n\t\t\t\t'--epic-color': epicColor,\n\t\t\t\t'--epic-background': backgroundColor,\n\t\t\t}"\n\t\t\t:title="epic?.title"\n\t\t\t@click="showDialog"\n\t\t>\n\t\t\t<TextXs className="tasks-field-epic-title">\n\t\t\t\t{{ epic?.title || loc('TASKS_V2_GROUP_CHOOSE_EPIC') }}\n\t\t\t</TextXs>\n\t\t\t<BIcon :name="Outline.CHEVRON_DOWN_S"/>\n\t\t</div>\n\t\t<div v-else class="tasks-field-epic-loader">\n\t\t\t<BLine :width="80" :height="10"/>\n\t\t</div>\n\t`};const $={components:{TextXs:g.TextXs,BLine:v.BLine},inject:{task:{},taskId:{}},setup(){},data(){return{isFocused:false,hasScrumInfo:C.groupService.hasScrumInfo(this.taskId)}},computed:{storyPoints(){var t;return(t=this.task.storyPoints)==null?void 0:t.trim()}},async mounted(){await C.groupService.getScrumInfo(this.taskId);this.hasScrumInfo=C.groupService.hasScrumInfo(this.taskId)},methods:{async handleClick(){this.isFocused=true;await this.$nextTick();this.$refs.input.focus()},handleBlur(){this.isFocused=false;void P.taskService.update(this.taskId,{storyPoints:this.$refs.input.value.trim()})}},template:`\n\t\t<div v-if="hasScrumInfo" class="tasks-field-story-points" :class="{ '--filled': storyPoints }">\n\t\t\t<input\n\t\t\t\tv-if="isFocused"\n\t\t\t\tclass="tasks-field-story-points-input"\n\t\t\t\t:value="storyPoints"\n\t\t\t\tref="input"\n\t\t\t\t@blur="handleBlur"\n\t\t\t/>\n\t\t\t<TextXs\n\t\t\t\tv-else\n\t\t\t\tclassName="tasks-field-story-points-text"\n\t\t\t\t@click="handleClick"\n\t\t\t>\n\t\t\t\t{{ storyPoints || '-' }}\n\t\t\t</TextXs>\n\t\t</div>\n\t\t<div v-else class="tasks-field-story-points-loader">\n\t\t\t<BLine :width="30" :height="10"/>\n\t\t</div>\n\t`};const K={components:{Chip:m.Chip,Hint:T.Hint,GroupPopup:w},inject:{analytics:{},cardType:{},task:{},taskId:{}},props:{isAutonomous:{type:Boolean,default:false}},setup(){return{groupMeta:_}},data(){return{doShowHint:false}},computed:{group(){return this.$store.getters[`${I.Model.Groups}/getById`](this.task.groupId)},design(){return{[!this.isAutonomous&&!this.isSelected]:m.ChipDesign.ShadowNoAccent,[!this.isAutonomous&&this.isSelected]:m.ChipDesign.ShadowAccent,[this.isAutonomous&&!this.isSelected]:m.ChipDesign.OutlineNoAccent,[this.isAutonomous&&this.isSelected]:m.ChipDesign.OutlineAccent}.true},isSelected(){if(this.isAutonomous){return this.task.groupId>0}return this.task.filledFields[_.id]},isFilled(){return Boolean(this.isAutonomous&&this.group)},isFlowFilled(){return this.task.flowId>0},text(){if(this.isFilled){var t,e;return(t=(e=this.group)==null?void 0:e.name)!=null?t:this.loc("TASKS_V2_GROUP_HIDDEN")}return this.loc("TASKS_V2_GROUP_TITLE_CHIP")},icon(){if(this.isFilled){return null}return S.Outline.FOLDER},image(){var t,e;if(!this.isFilled){return null}return{src:encodeURI((t=this.group)==null?void 0:t.image),alt:(e=this.group)==null?void 0:e.name}},canChange(){var t;return((t=this.task.flowId)!=null?t:0)<=0},isLocked(){return!k.Core.getParams().restrictions.project.available}},created(){if(this.task.groupId&&!this.group){void C.groupService.getGroup(this.task.groupId)}},methods:{handleClick(){if(!this.isAutonomous&&this.isSelected){this.highlightField();return}if(this.isLocked){void B.showLimit({featureId:k.Core.getParams().restrictions.project.featureId});return}if(this.isFlowFilled){this.doShowHint=true;return}U.show({targetNode:this.$refs.chip.$el,taskId:this.taskId,onClose:this.handleDialogClose})},handleDialogClose(t){if(this.isAutonomous){var e;(e=this.$refs.chip)==null?void 0:e.$el.focus()}if(!this.isAutonomous&&this.isSelected){this.highlightField()}if(t&&t!==this.task.groupId){y.analytics.sendAddProject(this.analytics,{cardType:this.cardType,viewersCount:this.task.auditorsIds.length,coexecutorsCount:this.task.accomplicesIds.length})}},highlightField(){void b.fieldHighlighter.setContainer(this.$root.$el).highlight(_.id)},handleClear(){void P.taskService.update(this.taskId,{groupId:0,stageId:0})}},template:`\n\t\t<Chip\n\t\t\t:design\n\t\t\t:icon\n\t\t\t:image\n\t\t\t:text\n\t\t\t:withClear="isFilled && !isFlowFilled"\n\t\t\t:lock="isLocked"\n\t\t\t:trimmable="isFilled"\n\t\t\t:data-task-id="taskId"\n\t\t\t:data-task-chip-id="groupMeta.id"\n\t\t\t:data-task-chip-value="task.groupId"\n\t\t\tref="chip"\n\t\t\t@click="handleClick"\n\t\t\t@clear="handleClear"\n\t\t/>\n\t\t<Hint\n\t\t\tv-if="doShowHint"\n\t\t\t:bindElement="$refs.chip.$el"\n\t\t\t@close="doShowHint = false"\n\t\t>\n\t\t\t{{ loc('TASKS_V2_GROUP_CANT_CHANGE_FLOW') }}\n\t\t</Hint>\n\t\t<GroupPopup v-if="isAutonomous" :getBindElement="() => $refs.chip.$el"/>\n\t`};t.Group=R;t.Stage=X;t.Epic=D;t.StoryPoints=$;t.GroupChip=K;t.groupMeta=_})(this.BX.Tasks.V2.Component.Fields=this.BX.Tasks.V2.Component.Fields||{},BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Component.Elements,BX.UI.Vue3.Components,BX.Vue3.Components,BX.Tasks.V2.Provider.Service,BX.UI.NotificationManager,BX.UI.System.Menu,BX.UI.IconSet,BX,BX.Tasks.V2.Lib,BX,BX.Tasks.V2.Lib,BX.Tasks.V2.Lib,BX.UI.System.Typography.Vue,BX.UI.System.Skeleton.Vue,BX.UI.System.Chip.Vue,BX.UI.IconSet,BX,BX.Tasks.V2,BX.Tasks.V2.Const,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Lib,BX.Tasks.V2.Lib,BX.Tasks.V2.Lib,BX.Tasks.V2.Provider.Service,BX.Tasks.V2.Provider.Service);
//# sourceMappingURL=group.bundle.map.js