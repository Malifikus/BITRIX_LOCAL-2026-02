{"version":3,"file":"email.bundle.js","sources":["../src/email-meta.js","../src/email.js","../src/email-from.js","../src/email-date.js","../src/email-chip.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { TaskField } from 'tasks.v2.const';\n\nexport const emailMeta = Object.freeze({\n\tid: TaskField.Email,\n\ttitle: Loc.getMessage('TASKS_V2_EMAIL_TITLE'),\n\tfromTitle: Loc.getMessage('TASKS_V2_EMAIL_FROM_TITLE'),\n\tdateTitle: Loc.getMessage('TASKS_V2_EMAIL_DATE_TITLE'),\n});\n","import { Type } from 'main.core';\n\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport { hint, type HintParams } from 'ui.vue3.directives.hint';\nimport 'ui.icon-set.outline';\n\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { tooltip } from 'tasks.v2.component.elements.hint';\nimport type { EmailModel, TaskModel } from 'tasks.v2.model.tasks';\n\nimport { emailMeta } from './email-meta';\nimport './email.css';\n\n// @vue/component\nexport const Email = {\n\tname: 'TaskEmail',\n\tdirectives: { hint },\n\tcomponents: {\n\t\tBIcon,\n\t\tHoverPill,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\temailMeta,\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\temail(): EmailModel | undefined\n\t\t{\n\t\t\treturn this.task.email;\n\t\t},\n\t\temailTitle(): string\n\t\t{\n\t\t\treturn (Type.isStringFilled(this.email.title) && this.email.title.trim())\n\t\t\t\t? this.email.title\n\t\t\t\t: this.loc('TASKS_V2_EMAIL_NO_SUBJECT')\n\t\t\t;\n\t\t},\n\t\temailBody(): ?string\n\t\t{\n\t\t\treturn Type.isStringFilled(this.email.body) ? this.email.body : null;\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\treturn (): HintParams => tooltip({\n\t\t\t\ttext: this.loc('TASKS_V2_EMAIL_TITLE_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: this.$refs.email.$el.offsetWidth / 2,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tBX.SidePanel.Instance.emulateAnchorClick(this.email.link);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-field-email\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"emailMeta.id\"\n\t\t\t:data-task-field-value=\"email.id\"\n\t\t>\n\t\t\t<HoverPill v-hint=\"tooltip\" ref=\"email\" @click=\"handleClick\">\n\t\t\t\t<div class=\"tasks-field-email-content\">\n\t\t\t\t\t<BIcon :name=\"Outline.MAIL\"/>\n\t\t\t\t\t<div class=\"tasks-field-email-title\">{{ emailTitle }}</div>\n\t\t\t\t</div>\n\t\t\t</HoverPill>\n\t\t\t<div v-if=\"emailBody\" class=\"tasks-field-email-subcontent\">\n\t\t\t\t<div class=\"tasks-field-email-subtitle\">{{ emailBody }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport type { EmailModel, TaskModel } from 'tasks.v2.model.tasks';\n\nimport { emailMeta } from './email-meta';\n\n// @vue/component\nexport const EmailFrom = {\n\tname: 'TaskEmailFrom',\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\temailMeta,\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\temail(): EmailModel | undefined\n\t\t{\n\t\t\treturn this.task.email;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-if=\"email.from\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"emailMeta.id + '_from'\"\n\t\t\t:data-task-field-value=\"email.id\"\n\t\t>\n\t\t\t<div class=\"tasks-field-email-content\">\n\t\t\t\t<BIcon :name=\"Outline.PERSON\"/>\n\t\t\t\t<div class=\"tasks-field-email-title\">{{ email.from }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { calendar } from 'tasks.v2.lib.calendar';\nimport type { EmailModel, TaskModel } from 'tasks.v2.model.tasks';\n\nimport { emailMeta } from './email-meta';\n\n// @vue/component\nexport const EmailDate = {\n\tname: 'TaskEmailDate',\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\temailMeta,\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\temail(): EmailModel | undefined\n\t\t{\n\t\t\treturn this.task.email;\n\t\t},\n\t\temailDate(): string\n\t\t{\n\t\t\treturn calendar.formatDate(this.email.dateTs);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-if=\"emailDate\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"emailMeta.id + '_date'\"\n\t\t\t:data-task-field-value=\"email.id\"\n\t\t>\n\t\t\t<div class=\"tasks-field-email-content\">\n\t\t\t\t<BIcon :name=\"Outline.CALENDAR\"/>\n\t\t\t\t<div class=\"tasks-field-email-title\">{{ emailDate }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Chip, ChipDesign } from 'ui.system.chip.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\n\nimport { emailMeta } from './email-meta';\n\n// @vue/component\nexport const EmailChip = {\n\tcomponents: {\n\t\tChip,\n\t},\n\tinject: {\n\t\ttaskId: {},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tChipDesign,\n\t\t\temailMeta,\n\t\t};\n\t},\n\tmethods: {\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(emailMeta.id);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\t:design=\"ChipDesign.ShadowAccent\"\n\t\t\t:icon=\"Outline.MAIL\"\n\t\t\t:text=\"emailMeta.title\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"emailMeta.id\"\n\t\t\t@click=\"highlightField\"\n\t\t/>\n\t`,\n};\n"],"names":["emailMeta","Object","freeze","id","TaskField","Email","title","Loc","getMessage","fromTitle","dateTitle","name","directives","hint","components","BIcon","HoverPill","inject","task","taskId","setup","Outline","computed","email","emailTitle","Type","isStringFilled","trim","loc","emailBody","body","tooltip","text","popupOptions","offsetLeft","$refs","$el","offsetWidth","methods","handleClick","BX","SidePanel","Instance","emulateAnchorClick","link","template","EmailFrom","EmailDate","emailDate","calendar","formatDate","dateTs","EmailChip","Chip","ChipDesign","highlightField","fieldHighlighter","setContainer","$root","highlight"],"mappings":";;;;;;;;OAGaA,SAAS,GAAGC,MAAM,CAACC,MAAM,CAAC;GACtCC,EAAE,EAAEC,wBAAS,CAACC,KAAK;GACnBC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,sBAAsB,CAAC;GAC7CC,SAAS,EAAEF,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC;GACtDE,SAAS,EAAEH,aAAG,CAACC,UAAU,CAAC,2BAA2B;CACtD,CAAC,CAAC;;CCKF;AACA,OAAaH,KAAK,GAAG;GACpBM,IAAI,EAAE,WAAW;GACjBC,UAAU,EAAE;WAAEC;IAAM;GACpBC,UAAU,EAAE;YACXC,wBAAK;gBACLC;IACA;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE,EAAE;KACRC,MAAM,EAAE;IACR;GACDC,KAAK,GACL;KACC,OAAO;OACNpB,SAAS;gBACTqB;MACA;IACD;GACDC,QAAQ,EAAE;KACTC,KAAK,GACL;OACC,OAAO,IAAI,CAACL,IAAI,CAACK,KAAK;MACtB;KACDC,UAAU,GACV;OACC,OAAQC,cAAI,CAACC,cAAc,CAAC,IAAI,CAACH,KAAK,CAACjB,KAAK,CAAC,IAAI,IAAI,CAACiB,KAAK,CAACjB,KAAK,CAACqB,IAAI,EAAE,GACrE,IAAI,CAACJ,KAAK,CAACjB,KAAK,GAChB,IAAI,CAACsB,GAAG,CAAC,2BAA2B,CAAC;MAExC;KACDC,SAAS,GACT;OACC,OAAOJ,cAAI,CAACC,cAAc,CAAC,IAAI,CAACH,KAAK,CAACO,IAAI,CAAC,GAAG,IAAI,CAACP,KAAK,CAACO,IAAI,GAAG,IAAI;MACpE;KACDC,OAAO,GACP;OACC,OAAO,MAAkBA,wCAAO,CAAC;SAChCC,IAAI,EAAE,IAAI,CAACJ,GAAG,CAAC,2BAA2B,CAAC;SAC3CK,YAAY,EAAE;WACbC,UAAU,EAAE,IAAI,CAACC,KAAK,CAACZ,KAAK,CAACa,GAAG,CAACC,WAAW,GAAG;;QAEhD,CAAC;;IAEH;GACDC,OAAO,EAAE;KACRC,WAAW,GACX;OACCC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,kBAAkB,CAAC,IAAI,CAACpB,KAAK,CAACqB,IAAI,CAAC;;IAE1D;GACDC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;CAkBZ,CAAC;;CC3ED;AACA,OAAaC,SAAS,GAAG;GACxBnC,IAAI,EAAE,eAAe;GACrBG,UAAU,EAAE;YACXC;IACA;GACDE,MAAM,EAAE;KACPC,IAAI,EAAE,EAAE;KACRC,MAAM,EAAE;IACR;GACDC,KAAK,GACL;KACC,OAAO;OACNpB,SAAS;gBACTqB;MACA;IACD;GACDC,QAAQ,EAAE;KACTC,KAAK,GACL;OACC,OAAO,IAAI,CAACL,IAAI,CAACK,KAAK;;IAEvB;GACDsB,QAAQ,EAAG;;;;;;;;;;;;;CAaZ,CAAC;;CCnCD;AACA,OAAaE,SAAS,GAAG;GACxBpC,IAAI,EAAE,eAAe;GACrBG,UAAU,EAAE;YACXC;IACA;GACDE,MAAM,EAAE;KACPC,IAAI,EAAE,EAAE;KACRC,MAAM,EAAE;IACR;GACDC,KAAK,GACL;KACC,OAAO;OACNpB,SAAS;gBACTqB;MACA;IACD;GACDC,QAAQ,EAAE;KACTC,KAAK,GACL;OACC,OAAO,IAAI,CAACL,IAAI,CAACK,KAAK;MACtB;KACDyB,SAAS,GACT;OACC,OAAOC,8BAAQ,CAACC,UAAU,CAAC,IAAI,CAAC3B,KAAK,CAAC4B,MAAM,CAAC;;IAE9C;GACDN,QAAQ,EAAG;;;;;;;;;;;;;CAaZ,CAAC;;CCxCD;AACA,OAAaO,SAAS,GAAG;GACxBtC,UAAU,EAAE;WACXuC;IACA;GACDpC,MAAM,EAAE;KACPE,MAAM,EAAE;IACR;GACDC,KAAK,GACL;KACC,OAAO;gBACNC,0BAAO;mBACPiC,6BAAU;OACVtD;MACA;IACD;GACDsC,OAAO,EAAE;KACRiB,cAAc,GACd;OACC,KAAKC,8CAAgB,CAACC,YAAY,CAAC,IAAI,CAACC,KAAK,CAACtB,GAAG,CAAC,CAACuB,SAAS,CAAC3D,SAAS,CAACG,EAAE,CAAC;;IAE3E;GACD0C,QAAQ,EAAG;;;;;;;;;;CAUZ,CAAC;;;;;;;;;;;;"}