this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};(function(e,s){"use strict";var i=babelHelpers.classPrivateFieldLooseKey("activeHighlights");var t=babelHelpers.classPrivateFieldLooseKey("startAnimation");var a=babelHelpers.classPrivateFieldLooseKey("cleanup");var l=babelHelpers.classPrivateFieldLooseKey("nextTick");class o{constructor(){Object.defineProperty(this,l,{value:d});Object.defineProperty(this,a,{value:n});Object.defineProperty(this,t,{value:r});Object.defineProperty(this,i,{writable:true,value:new WeakMap})}async highlight(e,r=o.ANIMATION_DURATION){if(!s.Type.isElementNode(e)){return}await babelHelpers.classPrivateFieldLooseBase(this,l)[l]();babelHelpers.classPrivateFieldLooseBase(this,a)[a](e);babelHelpers.classPrivateFieldLooseBase(this,i)[i].set(e,{animationStart:null,timeoutId:null,handler:null});babelHelpers.classPrivateFieldLooseBase(this,t)[t](e);const n=()=>babelHelpers.classPrivateFieldLooseBase(this,a)[a](e);s.Event.bind(window,"click",n);s.Event.bind(window,"keydown",n);const d=babelHelpers.classPrivateFieldLooseBase(this,i)[i].get(e);d.handler=n;d.timeoutId=setTimeout((()=>babelHelpers.classPrivateFieldLooseBase(this,a)[a](e)),o.ANIMATION_DURATION)}}function r(e){s.Dom.addClass(e,[o.HIGHLIGHT_CLASS,o.ANIMATE_CLASS]);const t=babelHelpers.classPrivateFieldLooseBase(this,i)[i].get(e);if(t){t.animationStart=Date.now()}}function n(e){const t=babelHelpers.classPrivateFieldLooseBase(this,i)[i].get(e);if(!t){return}s.Dom.removeClass(e,[o.HIGHLIGHT_CLASS,o.ANIMATE_CLASS]);if(t.timeoutId){clearTimeout(t.timeoutId)}if(t.handler){s.Event.unbind(window,"click",t.handler);s.Event.unbind(window,"keydown",t.handler)}babelHelpers.classPrivateFieldLooseBase(this,i)[i].delete(e)}function d(){return new Promise((e=>setTimeout(e,0)))}o.HIGHLIGHT_CLASS="element-highlight";o.ANIMATE_CLASS="--animate";o.ANIMATION_DURATION=1e3;const c=new o;e.Highlighter=o;e.highlighter=c})(this.BX.Tasks.V2.Lib=this.BX.Tasks.V2.Lib||{},BX);
//# sourceMappingURL=highlighter.bundle.map.js