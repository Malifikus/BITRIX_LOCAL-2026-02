this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{};(function(t,s,e,a,i,n,T,o,r,d,l,S){"use strict";const k=Object.freeze({id:i.TaskField.SubTasks,icon:e.Outline.RELATED_TASKS,idsField:"subTaskIds",containsField:"containsSubTasks",getTitle:t=>{if(t){return s.Loc.getMessage("TASKS_V2_SUB_TEMPLATES_TITLE")}return s.Loc.getMessage("TASKS_V2_SUB_TASKS_TITLE")},getChipTitle:t=>{if(t){return s.Loc.getMessage("TASKS_V2_SUB_TEMPLATES_TITLE_CHIP")}return s.Loc.getMessage("TASKS_V2_SUB_TASKS_TITLE_CHIP")},getCountLoc:t=>{if(t){return"TASKS_V2_SUB_TEMPLATES_TITLE_COUNT"}return"TASKS_V2_SUB_TASKS_TITLE_COUNT"},getHint:t=>{if(t){return s.Loc.getMessage("TASKS_V2_SUB_TEMPLATES_ADD")}return s.Loc.getMessage("TASKS_V2_SUB_TASKS_ADD")},service:n.subTasksService,right:"createSubtask"});const u={name:"TaskSubTasks",components:{RelationTasks:d.RelationTasks},inject:{taskId:{},isTemplate:{},analytics:{}},setup(){return{subTasksMeta:k}},computed:{isLocked(){return this.isTemplate&&!T.Core.getParams().restrictions.templatesSubtasks.available},featureId(){return T.Core.getParams().restrictions.templatesSubtasks.featureId}},methods:{handleAdd(t){S.subTasksDialog.show({targetNode:t,taskId:this.taskId,analytics:this.analytics})}},template:`\n\t\t<RelationTasks \n\t\t\t:meta="subTasksMeta"\n\t\t\t:isLocked\n\t\t\t:featureId\n\t\t\t@add="handleAdd"\n\t\t/>\n\t`};const h={components:{RelationTasksChip:d.RelationTasksChip},directives:{hint:o.hint},inject:{task:{},taskId:{},isEdit:{},isTemplate:{},analytics:{}},setup(){return{subTasksMeta:k}},computed:{disabled(){return!this.isEdit&&!this.isLocked&&!this.task.templateId},isLocked(){return this.isTemplate&&!T.Core.getParams().restrictions.templatesSubtasks.available},featureId(){return T.Core.getParams().restrictions.templatesSubtasks.featureId},tooltip(){if(!this.disabled){return null}return()=>r.tooltip({text:this.loc(this.isTemplate?"TASKS_V2_SUB_TEMPLATES_DISABLED_HINT":"TASKS_V2_SUB_TASKS_DISABLED_HINT"),popupOptions:{offsetLeft:this.$el.offsetWidth/2,targetContainer:document.querySelector(`[data-task-card-scroll="${this.taskId}"]`)},timeout:200})}},methods:{handleAdd(t){S.subTasksDialog.show({targetNode:t,taskId:this.taskId,onClose:this.highlightField,analytics:this.analytics})},highlightField(){void l.fieldHighlighter.setContainer(this.$root.$el).highlight(k.id)}},template:`\n\t\t<RelationTasksChip \n\t\t\tv-hint="tooltip" \n\t\t\t:meta="subTasksMeta" \n\t\t\t:disabled\n\t\t\t:isLocked\n\t\t\t:featureId\n\t\t\t@add="handleAdd"\n\t\t/>\n\t`};t.SubTasks=u;t.SubTasksChip=h;t.subTasksMeta=k})(this.BX.Tasks.V2.Component.Fields=this.BX.Tasks.V2.Component.Fields||{},BX,BX.UI.IconSet,BX,BX.Tasks.V2.Const,BX.Tasks.V2.Provider.Service,BX.Tasks.V2,BX.Vue3.Directives,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Lib,BX.Tasks.V2.Lib);
//# sourceMappingURL=sub-tasks.bundle.map.js