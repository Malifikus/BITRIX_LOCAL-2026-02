this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{};(function(t,e,s,n,i,l,a,r,o,u){"use strict";const d={name:"UiUserCustomTagSelector",components:{BIcon:i.BIcon,UserAvatar:a.UserAvatar,UserLabel:r.UserLabel,BMenu:n.BMenu,BCircle:s.BCircle,BLine:s.BLine},props:{context:{type:String,required:true},userId:{type:Number,required:true},user:{type:Object,default:null},withActionMenu:{type:Boolean,default:false},clickHandler:{type:Function,default:null},readonly:{type:Boolean,default:false},avatarOnly:{type:Boolean,default:false}},emits:["freeze","unfreeze","select","close"],data(){return{localContext:`${this.context}-${this.$options.name}`,isMenuShown:false}},computed:{userProfileLink(){return u.userService.getUrl(this.userId)},testId(){return`${this.localContext}-${e.Text.getRandom()}`},menuOptions(){return{id:`${this.localContext}-${e.Text.getRandom()}-${this.userId}`,bindElement:this.$refs.user.$el,offsetTop:8,items:this.menuItems,targetContainer:document.body}},menuItems(){return[{title:this.loc("UCTS_MENU_PROFILE"),icon:i.Outline.PERSON,dataset:{id:`MenuProfile-${this.testId}`},onClick:()=>BX.SidePanel.Instance.emulateAnchorClick(this.userProfileLink)},{title:this.loc("UCTS_MENU_EDIT"),icon:i.Outline.EDIT_L,dataset:{id:`MenuEdit-${this.testId}`},onClick:()=>this.showDialog()}]}},created(){if(!this.user){o.usersDialog.init([this.userId])}},methods:{handleClick(){if(this.readonly){BX.SidePanel.Instance.emulateAnchorClick(this.userProfileLink);return}if(this.withActionMenu){this.isMenuShown=true}else{void this.showDialog()}},handleClose(){this.isMenuShown=false;this.$emit("close")},async showDialog(){if(this.clickHandler&&await this.clickHandler()===false){return}void o.usersDialog.show({targetNode:this.$refs.container,ids:[this.userId],isMultiple:false,onClose:this.handleDialogClose});this.$emit("freeze")},handleDialogClose(t){this.$emit("select",t[0]);this.$emit("unfreeze")}},template:`\n\t\t<div class="b24-user-selector" ref="container">\n\t\t\t<template v-if="userId">\n\t\t\t\t<div v-if="user" class="b24-user-selector-user" :class="'--' + user.type">\n\t\t\t\t\t<UserLabel\n\t\t\t\t\t\tref="user"\n\t\t\t\t\t\t:dataId="'Label-' + testId"\n\t\t\t\t\t\t:userId="user.id"\n\t\t\t\t\t\t:avatar="user.image"\n\t\t\t\t\t\t:type="user.type"\n\t\t\t\t\t\t:name="user.name"\n\t\t\t\t\t\t:hideName="avatarOnly"\n\t\t\t\t\t\t@click="handleClick"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div style="margin-right: 8px"><BCircle :size="22"/></div>\n\t\t\t\t\t<BLine :width="130" :height="12"/>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<div\n\t\t\t\tv-else\n\t\t\t\tclass="b24-user-selector-user-placeholder"\n\t\t\t\t:data-id="'Add-' + testId"\n\t\t\t\t@click="showDialog"\n\t\t\t>\n\t\t\t\t<UserAvatar/>\n\t\t\t\t<template v-if="!avatarOnly">\n\t\t\t\t\t{{ loc('UCTS_ADD_BTN') }}\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<BMenu v-if="isMenuShown" :options="menuOptions" @close="handleClose"/>\n\t`};t.UserCustomTagSelector=d})(this.BX.Tasks.V2.Component.Elements=this.BX.Tasks.V2.Component.Elements||{},BX,BX.UI.System.Skeleton.Vue,BX.UI.System.Menu,BX.UI.IconSet,BX,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Lib,BX.Tasks.V2.Provider.Service);
//# sourceMappingURL=user-custom-tag-selector.bundle.map.js