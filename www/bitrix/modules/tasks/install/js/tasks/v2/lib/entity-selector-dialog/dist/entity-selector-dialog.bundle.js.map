{"version":3,"file":"entity-selector-dialog.bundle.js","sources":["../src/entity-selector-dialog.js"],"sourcesContent":["import { Dialog, Item, type DialogOptions } from 'ui.entity-selector';\n\nexport { Item };\nexport type ItemId = [string, number];\n\nexport class EntitySelectorDialog extends Dialog\n{\n\tconstructor(dialogOptions: DialogOptions)\n\t{\n\t\tconst minHeight = 280;\n\t\tconst minTagSelectorHeight = 34;\n\t\tconst options = {\n\t\t\ttagSelectorOptions: {\n\t\t\t\tmaxHeight: minTagSelectorHeight * 2,\n\t\t\t\ttextBoxWidth: '50%',\n\t\t\t},\n\t\t\theight: Math.max(minHeight, dialogOptions.height ?? (window.innerHeight / 2 - minTagSelectorHeight * 2)),\n\t\t\t...dialogOptions,\n\t\t\toffsetAnimation: false,\n\t\t\tcompactView: true,\n\t\t};\n\n\t\tsuper(options);\n\t}\n\n\tshowTo(targetNode: HTMLElement): void\n\t{\n\t\tthis.getPopup();\n\t\tthis.setTargetNode(targetNode);\n\t\tthis.getPopup().bringToFront();\n\t\tthis.unfreeze();\n\t\tthis.show();\n\t}\n\n\tselectItemsByIds(items: ItemId[]): void\n\t{\n\t\tthis.getItems().forEach((item: Item) => {\n\t\t\tconst isSelected = this.#inIds(item, items);\n\n\t\t\tif (isSelected)\n\t\t\t{\n\t\t\t\titem.select(true);\n\t\t\t}\n\n\t\t\tif (!isSelected)\n\t\t\t{\n\t\t\t\titem.deselect(true);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetSelectableByIds({ selectable, unselectable }: { selectable: ItemId[], unselectable: ItemId[] }): void\n\t{\n\t\tthis.getItems().forEach((item: Item) => {\n\t\t\tif (this.#inIds(item, selectable))\n\t\t\t{\n\t\t\t\titem.setDeselectable(true);\n\t\t\t}\n\n\t\t\tif (this.#inIds(item, unselectable))\n\t\t\t{\n\t\t\t\titem.setDeselectable(false);\n\t\t\t}\n\t\t});\n\t}\n\n\t#inIds(item: Item, items: ItemId[]): boolean\n\t{\n\t\tconst itemId = [item.getEntityId(), item.getId()];\n\n\t\treturn items.some((it) => itemId[0] === it[0] && itemId[1] === it[1]);\n\t}\n}\n"],"names":["EntitySelectorDialog","Dialog","constructor","dialogOptions","minHeight","minTagSelectorHeight","options","tagSelectorOptions","maxHeight","textBoxWidth","height","Math","max","window","innerHeight","offsetAnimation","compactView","showTo","targetNode","getPopup","setTargetNode","bringToFront","unfreeze","show","selectItemsByIds","items","getItems","forEach","item","isSelected","select","deselect","setSelectableByIds","selectable","unselectable","setDeselectable","itemId","getEntityId","getId","some","it"],"mappings":";;;;;;;CAEgB;AAGhB,CAAO,MAAMA,oBAAoB,SAASC,wBAAM,CAChD;GACCC,WAAW,CAACC,aAA4B,EACxC;KAAA;KACC,MAAMC,SAAS,GAAG,GAAG;KACrB,MAAMC,oBAAoB,GAAG,EAAE;KAC/B,MAAMC,OAAO,GAAG;OACfC,kBAAkB,EAAE;SACnBC,SAAS,EAAEH,oBAAoB,GAAG,CAAC;SACnCI,YAAY,EAAE;QACd;OACDC,MAAM,EAAEC,IAAI,CAACC,GAAG,CAACR,SAAS,2BAAED,aAAa,CAACO,MAAM,oCAAKG,MAAM,CAACC,WAAW,GAAG,CAAC,GAAGT,oBAAoB,GAAG,CAAC,CAAE;OACxG,GAAGF,aAAa;OAChBY,eAAe,EAAE,KAAK;OACtBC,WAAW,EAAE;MACb;KAED,KAAK,CAACV,OAAO,CAAC;KAAC;OAAA;;;GAGhBW,MAAM,CAACC,UAAuB,EAC9B;KACC,IAAI,CAACC,QAAQ,EAAE;KACf,IAAI,CAACC,aAAa,CAACF,UAAU,CAAC;KAC9B,IAAI,CAACC,QAAQ,EAAE,CAACE,YAAY,EAAE;KAC9B,IAAI,CAACC,QAAQ,EAAE;KACf,IAAI,CAACC,IAAI,EAAE;;GAGZC,gBAAgB,CAACC,KAAe,EAChC;KACC,IAAI,CAACC,QAAQ,EAAE,CAACC,OAAO,CAAEC,IAAU,IAAK;OACvC,MAAMC,UAAU,2CAAG,IAAI,kBAAQD,IAAI,EAAEH,KAAK,CAAC;OAE3C,IAAII,UAAU,EACd;SACCD,IAAI,CAACE,MAAM,CAAC,IAAI,CAAC;;OAGlB,IAAI,CAACD,UAAU,EACf;SACCD,IAAI,CAACG,QAAQ,CAAC,IAAI,CAAC;;MAEpB,CAAC;;GAGHC,kBAAkB,CAAC;KAAEC,UAAU;KAAEC;IAAgE,EACjG;KACC,IAAI,CAACR,QAAQ,EAAE,CAACC,OAAO,CAAEC,IAAU,IAAK;OACvC,4CAAI,IAAI,kBAAQA,IAAI,EAAEK,UAAU,GAChC;SACCL,IAAI,CAACO,eAAe,CAAC,IAAI,CAAC;;OAG3B,4CAAI,IAAI,kBAAQP,IAAI,EAAEM,YAAY,GAClC;SACCN,IAAI,CAACO,eAAe,CAAC,KAAK,CAAC;;MAE5B,CAAC;;CASJ;CAAC,iBANOP,IAAU,EAAEH,KAAe,EAClC;GACC,MAAMW,MAAM,GAAG,CAACR,IAAI,CAACS,WAAW,EAAE,EAAET,IAAI,CAACU,KAAK,EAAE,CAAC;GAEjD,OAAOb,KAAK,CAACc,IAAI,CAAEC,EAAE,IAAKJ,MAAM,CAAC,CAAC,CAAC,KAAKI,EAAE,CAAC,CAAC,CAAC,IAAIJ,MAAM,CAAC,CAAC,CAAC,KAAKI,EAAE,CAAC,CAAC,CAAC,CAAC;CACtE;;;;;;;;;"}