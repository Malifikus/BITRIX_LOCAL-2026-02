this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};this.BX.Tasks.V2.Provider=this.BX.Tasks.V2.Provider||{};(function(t,e,i,s,n){"use strict";const r={[i.EntitySelectorEntity.Deal]:"D",[i.EntitySelectorEntity.Contact]:"C",[i.EntitySelectorEntity.Company]:"CO",[i.EntitySelectorEntity.Lead]:"L",[i.EntitySelectorEntity.SmartInvoice]:"SI"};const a=Object.fromEntries(Object.values(r).map(((t,e)=>[t,e])));const o=Object.fromEntries(Object.entries(r).map((t=>t.reverse())));const c={[i.EntitySelectorEntity.Deal]:2,[i.EntitySelectorEntity.Contact]:3,[i.EntitySelectorEntity.Company]:4,[i.EntitySelectorEntity.Lead]:1,[i.EntitySelectorEntity.SmartInvoice]:31};function l(t){return{id:t.id,entityId:t.entityId,type:t.type,typeName:t.typeName,title:t.title,link:t.link}}function p(t,e){if(!r[t]){const[t,i]=e.split(":");return`T${Number(t).toString(16)}_${i}`}return`${r[t]}_${e}`}function y(t){const[e,s]=t.split("_");if(!o[e]){return[i.EntitySelectorEntity.DynamicMultiple,`${u(t)}:${s}`]}return[o[e],Number(s)]}function m(t,e){var i,s;const[n,r]=t.split("_");const[o,c]=e.split("_");const l=(i=a[n])!=null?i:u(t);const p=(s=a[o])!=null?s:u(e);if(l===p){return r-c}return l-p}function u(t){const[e]=t.split("_");if(!o[e]){return parseInt(e.slice(1),16)}return c[o[e]]}var d,E;const b=new(d=babelHelpers.classPrivateFieldLooseKey("listTask"),E=babelHelpers.classPrivateFieldLooseKey("listTemplate"),class{constructor(){Object.defineProperty(this,E,{value:S});Object.defineProperty(this,d,{value:v})}async list(t,s){const r=await(n.idUtils.isTemplate(t)?babelHelpers.classPrivateFieldLooseBase(this,E)[E](t,s):babelHelpers.classPrivateFieldLooseBase(this,d)[d](t,s));const a=r.map((t=>l(t)));await e.Core.getStore().dispatch(`${i.Model.CrmItems}/upsertMany`,a)}});function v(t,e){return s.apiClient.post(i.Endpoint.TaskCrmItemList,{task:{id:t,crmItemIds:e}})}function S(t,e){return s.apiClient.post("Template.CRM.Item.list",{template:{id:n.idUtils.unbox(t),crmItemIds:e}})}const T={mapId:p,splitId:y,compareIds:m,getEntityTypeId:u};t.CrmMappers=T;t.crmService=b})(this.BX.Tasks.V2.Provider.Service=this.BX.Tasks.V2.Provider.Service||{},BX.Tasks.V2,BX.Tasks.V2.Const,BX.Tasks.V2.Lib,BX.Tasks.V2.Lib);
//# sourceMappingURL=crm-service.bundle.map.js