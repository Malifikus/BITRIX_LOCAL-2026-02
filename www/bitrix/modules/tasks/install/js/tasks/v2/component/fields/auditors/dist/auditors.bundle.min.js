this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{};(function(t,s,e,i,a,d,n,o,r,h,l,c,u){"use strict";const k=Object.freeze({id:e.TaskField.Auditors,title:i.Loc.getMessage("TASKS_V2_AUDITORS_TITLE")});const p={name:"TaskAuditors",components:{Participants:s.Participants},inject:{task:{},taskId:{},analytics:{},cardType:{}},setup(){return{auditorsMeta:k}},computed:{dataset(){return{"data-task-id":this.taskId,"data-task-field-id":k.id,"data-task-field-value":this.task.auditorsIds.join(",")}},isLocked(){return!o.Core.getParams().restrictions.stakeholder.available},featureId(){return o.Core.getParams().restrictions.stakeholder.featureId},auditorsCount(){var t,s;return(t=(s=this.task.auditorsIds)==null?void 0:s.length)!=null?t:0}},methods:{update(t){const s=u.taskService.hasChanges(this.task,{auditorsIds:t})&&t.length>0&&t.length>=this.auditorsCount;void u.taskService.update(this.taskId,{auditorsIds:t});if(s){var e,a;l.analytics.sendAddViewer(this.analytics,{cardType:this.cardType,taskId:i.Type.isNumber(this.taskId)?this.taskId:0,viewersCount:t.length,coexecutorsCount:(e=(a=this.task.accomplicesIds)==null?void 0:a.length)!=null?e:0})}}},template:`\n\t\t<Participants\n\t\t\t:taskId\n\t\t\t:context="auditorsMeta.id"\n\t\t\t:userIds="task.auditorsIds"\n\t\t\t:canAdd="task.rights.addAuditors"\n\t\t\t:canRemove="task.rights.edit"\n\t\t\t:dataset\n\t\t\t:isLocked\n\t\t\t:featureId\n\t\t\tuseRemoveAll\n\t\t\t@update="update"\n\t\t/>\n\t`};const I={components:{Chip:a.Chip},inject:{task:{},taskId:{},analytics:{},cardType:{}},setup(){return{Outline:d.Outline,auditorsMeta:k}},computed:{design(){return this.isSelected?a.ChipDesign.ShadowAccent:a.ChipDesign.ShadowNoAccent},isSelected(){return this.task.filledFields[k.id]},isLocked(){return!o.Core.getParams().restrictions.stakeholder.available}},methods:{handleClick(){if(this.isSelected){this.highlightField();return}if(this.isLocked){void h.showLimit({featureId:o.Core.getParams().restrictions.stakeholder.featureId,bindElement:this.$el});return}void c.usersDialog.show({targetNode:this.$el,ids:this.task.auditorsIds,onClose:this.handleClose})},handleClose(t){if(!this.isSelected&&t.length>0){var s,e;this.highlightField();l.analytics.sendAddViewer(this.analytics,{cardType:this.cardType,taskId:i.Type.isNumber(this.taskId)?this.taskId:0,viewersCount:t.length,coexecutorsCount:(s=(e=this.task.accomplicesIds)==null?void 0:e.length)!=null?s:0})}void u.taskService.update(this.taskId,{auditorsIds:t})},highlightField(){void r.fieldHighlighter.setContainer(this.$root.$el).highlight(k.id)}},template:`\n\t\t<Chip\n\t\t\tv-if="isSelected || task.rights.addAuditors"\n\t\t\t:design\n\t\t\t:icon="Outline.OBSERVER"\n\t\t\t:lock="isLocked"\n\t\t\t:text="loc('TASKS_V2_AUDITORS_TITLE_CHIP')"\n\t\t\t:data-task-id="taskId"\n\t\t\t:data-task-chip-id="auditorsMeta.id"\n\t\t\t:data-task-chip-value="task.auditorsIds.join(',')"\n\t\t\t@click="handleClick"\n\t\t/>\n\t`};t.Auditors=p;t.AuditorsChip=I;t.auditorsMeta=k})(this.BX.Tasks.V2.Component.Fields=this.BX.Tasks.V2.Component.Fields||{},BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Const,BX,BX.UI.System.Chip.Vue,BX.UI.IconSet,BX,BX.Tasks.V2,BX.Tasks.V2.Lib,BX.Tasks.V2.Lib,BX.Tasks.V2.Lib,BX.Tasks.V2.Lib,BX.Tasks.V2.Provider.Service);
//# sourceMappingURL=auditors.bundle.map.js