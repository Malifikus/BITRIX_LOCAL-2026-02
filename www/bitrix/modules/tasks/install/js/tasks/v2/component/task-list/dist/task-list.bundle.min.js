this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};(function(t,e,s,n,i,a,l,r,d,o,k,p,c,u,v){"use strict";const T={components:{HoverPill:p.HoverPill,GanttMenu:c.GanttMenu},inject:{parentTaskId:"taskId"},props:{taskId:{type:[Number,String],required:true}},data(){return{isMenuShown:false}},computed:{ganttLink(){return this.$store.getters[`${k.Model.GanttLinks}/getLink`]({taskId:this.parentTaskId,dependentId:this.taskId})},type:{get(){var t;return(t=this.ganttLink)==null?void 0:t.type},set(t){void u.ganttService.updateDependence({taskId:this.parentTaskId,dependentId:this.taskId,type:t})}},typeTitle(){return this.loc({finish_start:"TASKS_V2_GANTT_FINISH_START",start_start:"TASKS_V2_GANTT_START_START",start_finish:"TASKS_V2_GANTT_START_FINISH",finish_finish:"TASKS_V2_GANTT_FINISH_FINISH"}[this.type])}},template:`\n\t\t<HoverPill textOnly noOffset ref="type" @click="isMenuShown = true">\n\t\t\t{{ typeTitle }}\n\t\t</HoverPill>\n\t\t<GanttMenu v-if="isMenuShown" v-model:type="type" :bindElement="$refs.type.$el" @close="isMenuShown = false"/>\n\t`};const m={components:{TextMd:s.TextMd,BIcon:n.BIcon,Responsible:r.Responsible,Deadline:l.Deadline,Gantt:T},props:{taskId:{type:[Number,String],required:true},fields:{type:Set,required:true}},emits:["remove"],setup(){return{Outline:n.Outline}},data(){return{isHovered:false}},computed:{task(){return o.taskService.getStoreTask(this.taskId)},isTemplate(){return d.idUtils.isTemplate(this.taskId)},completed(){return this.task.status===k.TaskStatus.Completed},href(){if(String(this.taskId).startsWith("tmp.")){return a.TaskCard.getUrl(d.idUtils.boxTemplate(this.taskId.replace("tmp.","")))}return a.TaskCard.getUrl(this.taskId)},detachReadonly(){const{detachParent:t,detachRelated:e,changeDependence:s}=this.task.rights;const n=t||e||s;return!n}},methods:{handleRemove(){if(!this.detachReadonly){this.$emit("remove")}}},template:`\n\t\t<div class="tasks-task-line-cross-background" @mouseover="isHovered = true" @mouseleave="isHovered = false"/>\n\t\t<div class="tasks-task-line-title-container" @mouseover="isHovered = true" @mouseleave="isHovered = false">\n\t\t\t<TextMd class="tasks-task-line-title" :class="{ '--completed': completed }" :title="task.title">\n\t\t\t\t<a :href>{{ task.title }}</a>\n\t\t\t</TextMd>\n\t\t</div>\n\t\t<div v-if="fields.has('responsible')" class="tasks-task-line-field">\n\t\t\t<Responsible :taskId avatarOnly/>\n\t\t</div>\n\t\t<div v-if="fields.has('deadline')" class="tasks-task-line-field">\n\t\t\t<Deadline :taskId :isTemplate compact/>\n\t\t</div>\n\t\t<div v-if="fields.has('gantt')" class="tasks-task-line-field">\n\t\t\t<Gantt :taskId/>\n\t\t</div>\n\t\t<div\n\t\t\tclass="tasks-task-line-cross"\n\t\t\t:class="{ '--readonly': detachReadonly, '--hover': isHovered }"\n\t\t\t@click="handleRemove"\n\t\t\t@mouseover="isHovered = true"\n\t\t\t@mouseleave="isHovered = false"\n\t\t>\n\t\t\t<BIcon :name="Outline.CROSS_L" hoverable/>\n\t\t</div>\n\t`};const h={components:{BLine:v.BLine,BCircle:v.BCircle},props:{fields:{type:Set,required:true}},template:`\n\t\t<BLine :width="200" :height="10"/>\n\t\t<BCircle v-if="fields.size === 2" :size="25"/>\n\t\t<BLine :width="70" :height="10" style="margin: 0 10px"/>\n\t\t<div style="width: 20px"/>\n\t`};const I=k.Limit.RelationList;const f={components:{BIcon:n.BIcon,TaskLine:m,TaskLineSkeleton:h},props:{ids:{type:Array,required:true},loadingIds:{type:Array,required:true},canOpenMore:{type:Boolean,default:true},fields:{type:Set,default:new Set(["responsible","deadline"])}},emits:["openMore","removeTask"],setup(){return{Outline:n.Outline,limit:I}},computed:{limitedTasks(){return this.ids.slice(0,I)},moreText(){const t=this.ids.length-I;return e.Loc.getMessagePlural("TASKS_V2_TASK_LIST_MORE",t,{"#COUNT#":t})}},template:`\n\t\t<div>\n\t\t\t<div class="tasks-task-list" :style="{ '--fields-count': fields.size }">\n\t\t\t\t<template v-if="ids.length === 0">\n\t\t\t\t\t<div class="tasks-task-line-separator"/>\n\t\t\t\t\t<TaskLineSkeleton :fields/>\n\t\t\t\t</template>\n\t\t\t\t<template v-for="taskId in limitedTasks" :key="taskId">\n\t\t\t\t\t<div class="tasks-task-line-separator"/>\n\t\t\t\t\t<TaskLineSkeleton v-if="loadingIds.includes(taskId)" :fields/>\n\t\t\t\t\t<TaskLine v-else :taskId :fields @remove="$emit('removeTask', taskId)"/>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if="ids.length > limit"\n\t\t\t\tclass="tasks-task-list-more"\n\t\t\t\t:class="{ '--readonly': !canOpenMore }"\n\t\t\t\t@click="$emit('openMore')"\n\t\t\t>\n\t\t\t\t<div class="tasks-task-list-more-text">{{ moreText }}</div>\n\t\t\t\t<BIcon\n\t\t\t\t\tv-if="canOpenMore"\n\t\t\t\t\tclass="tasks-task-list-icon"\n\t\t\t\t\t:name="Outline.CHEVRON_RIGHT_L"\n\t\t\t\t\thoverable\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`};t.TaskList=f})(this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{},BX,BX.UI.System.Typography.Vue,BX.UI.IconSet,BX,BX.Tasks.V2.Application,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Component.Fields,BX.Tasks.V2.Lib,BX.Tasks.V2.Provider.Service,BX.Tasks.V2.Const,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Application,BX.Tasks.V2.Provider.Service,BX.UI.System.Skeleton.Vue);
//# sourceMappingURL=task-list.bundle.map.js