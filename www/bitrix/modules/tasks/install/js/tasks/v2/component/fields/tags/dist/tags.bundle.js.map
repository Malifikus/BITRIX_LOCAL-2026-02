{"version":3,"file":"tags.bundle.js","sources":["../src/tags-meta.js","../src/tags-dialog.js","../src/tags.js","../src/tags-chip.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { TaskField } from 'tasks.v2.const';\n\nexport const tagsMeta = Object.freeze({\n\tid: TaskField.Tags,\n\ttitle: Loc.getMessage('TASKS_V2_TAGS_TITLE'),\n});\n","import { EventEmitter, type BaseEvent } from 'main.core.events';\n\nimport { Footer } from 'tasks.entity-selector';\nimport { Core } from 'tasks.v2.core';\nimport { EntitySelectorEntity, EventName } from 'tasks.v2.const';\nimport { EntitySelectorDialog, type Item, type ItemId } from 'tasks.v2.lib.entity-selector-dialog';\nimport { idUtils, type TaskId } from 'tasks.v2.lib.id-utils';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\n\ntype Params = {\n\ttargetNode: HTMLElement,\n\ttaskId: TaskId,\n\tonClose: Function,\n};\n\nconst dialogs: { [key: string]: EntitySelectorDialog } = {};\n\nexport const tagsDialog = new class\n{\n\t#onClose: Function | null;\n\n\tconstructor()\n\t{\n\t\tEventEmitter.subscribe(EventName.TagDeleted, (event: BaseEvent) => {\n\t\t\tconst { tagName, groupId } = event.getData();\n\n\t\t\tObject.entries(dialogs).forEach(([key, dialog]) => {\n\t\t\t\tif (Number(key.split('-')[1]) === groupId)\n\t\t\t\t{\n\t\t\t\t\tconst tagId = dialog.getItems().find((item: Item) => item.getTitle() === tagName).getId();\n\t\t\t\t\tdialog.removeItem([EntitySelectorEntity.Tag, tagId]);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tshow(params: Params): void\n\t{\n\t\tthis.#onClose = params.onClose;\n\n\t\tthis.#fillDialog(params.taskId);\n\t\tthis.#getDialog(params.taskId).showTo(params.targetNode);\n\t}\n\n\t#getDialog(taskId: TaskId): EntitySelectorDialog\n\t{\n\t\tconst userId = Core.getParams().currentUser.id;\n\t\tconst groupId = taskService.getStoreTask(taskId).groupId ?? 0;\n\n\t\tconst key = `${taskId}-${groupId}`;\n\t\tconst entityId = this.#getEntityId(taskId);\n\t\tdialogs[key] ??= new EntitySelectorDialog({\n\t\t\tenableSearch: true,\n\t\t\tdropdownMode: true,\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: entityId,\n\t\t\t\t\toptions: { taskId, groupId },\n\t\t\t\t},\n\t\t\t],\n\t\t\tsearchOptions: {\n\t\t\t\tallowCreateItem: true,\n\t\t\t},\n\t\t\tfooter: entityId === EntitySelectorEntity.Tag ? Footer : false,\n\t\t\tfooterOptions: { userId, groupId },\n\t\t\tclearUnavailableItems: true,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => this.#fillDialog(taskId),\n\t\t\t\t'Search:onItemCreateAsync': (event: BaseEvent): void => {\n\t\t\t\t\tconst tag = event.getData().searchQuery.getQuery();\n\t\t\t\t\tif (!taskService.getStoreTask(taskId).tags.includes(tag))\n\t\t\t\t\t{\n\t\t\t\t\t\tdialogs[key].addItem(this.#getTagItem(entityId, tag));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tpopupOptions: {\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: (): void => {\n\t\t\t\t\t\tconst tags = this.#getDialog(taskId).getSelectedItems().map((item: Item) => item.getTitle());\n\n\t\t\t\t\t\tvoid taskService.update(taskId, { tags });\n\n\t\t\t\t\t\tthis.#onClose?.(tags);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn dialogs[key];\n\t}\n\n\t#fillDialog(taskId: TaskId): void\n\t{\n\t\tconst dialog = this.#getDialog(taskId);\n\t\tconst entityId = this.#getEntityId(taskId);\n\t\tconst tags: Set<string> = new Set(taskService.getStoreTask(taskId).tags);\n\n\t\tconst idsMap: Map<string, ItemId> = new Map([...tags].map((tag) => [tag, [entityId, tag]]));\n\t\tdialog.getItems().forEach((item: Item) => {\n\t\t\tif (tags.has(item.getTitle()))\n\t\t\t{\n\t\t\t\tidsMap.set(item.getTitle(), [entityId, item.getId()]);\n\t\t\t}\n\t\t});\n\n\t\tidsMap.entries().forEach(([tag, id]) => {\n\t\t\tif (!dialog.getItem(id))\n\t\t\t{\n\t\t\t\tdialog.addItem(this.#getTagItem(entityId, tag));\n\t\t\t}\n\t\t});\n\n\t\tdialog.selectItemsByIds([...idsMap.values()]);\n\t}\n\n\t#getTagItem(entityId: string, title: string): Item\n\t{\n\t\treturn {\n\t\t\tid: title || 'empty',\n\t\t\tentityId,\n\t\t\ttitle,\n\t\t\ttabs: 'all',\n\t\t\tselected: true,\n\t\t};\n\t}\n\n\t#getEntityId(taskId: TaskId): string\n\t{\n\t\treturn idUtils.isTemplate(taskId) ? EntitySelectorEntity.TemplateTag : EntitySelectorEntity.Tag;\n\t}\n}();\n","import { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { AddButton } from 'tasks.v2.component.elements.add-button';\nimport { FieldAdd } from 'tasks.v2.component.elements.field-add';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { tagsMeta } from './tags-meta';\nimport { tagsDialog } from './tags-dialog';\nimport './tags.css';\n\n// @vue/component\nexport const Tags = {\n\tcomponents: {\n\t\tBIcon,\n\t\tAddButton,\n\t\tFieldAdd,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\ttagsMeta,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisDialogShown: false,\n\t\t\ttagsIndexes: {},\n\t\t\tisHovered: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttags(): string[]\n\t\t{\n\t\t\treturn [...this.task.tags].sort((a, b) => this.tagsIndexes[a] - this.tagsIndexes[b]);\n\t\t},\n\t\tisFilled(): boolean\n\t\t{\n\t\t\treturn this.tags.length > 0;\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t\tisAddActive(): boolean\n\t\t{\n\t\t\treturn !this.readonly && this.isFilled;\n\t\t},\n\t\tisAddVisible(): boolean\n\t\t{\n\t\t\treturn this.isDialogShown || this.isHovered;\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.rememberTagsIndexes(this.tags);\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.readonly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttagsDialog.show({\n\t\t\t\ttargetNode: this.$refs.anchor,\n\t\t\t\ttaskId: this.taskId,\n\t\t\t\tonClose: this.handleDialogClose,\n\t\t\t});\n\n\t\t\tthis.isDialogShown = true;\n\t\t},\n\t\thandleDialogClose(tags: string[]): void\n\t\t{\n\t\t\tthis.isDialogShown = false;\n\t\t\tthis.rememberTagsIndexes(tags);\n\t\t},\n\t\thandleCrossClick(tag: string): void\n\t\t{\n\t\t\tconst tags = this.tags.filter((it) => it !== tag);\n\t\t\tvoid taskService.update(this.taskId, { tags });\n\t\t},\n\t\trememberTagsIndexes(tags: string[]): void\n\t\t{\n\t\t\tthis.tagsIndexes = tags.reduce((acc, tag, index) => {\n\t\t\t\tacc[tag] = index;\n\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-field-tags\"\n\t\t\t:class=\"{ '--empty': !isFilled }\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"tagsMeta.id\"\n\t\t\t:data-task-field-value=\"task.tags.join(',')\"\n\t\t\t@mouseenter=\"isHovered = true\"\n\t\t\t@mouseleave=\"isHovered = false\"\n\t\t>\n\t\t\t<AddButton v-if=\"isAddActive\" :isVisible=\"isAddVisible\" @click=\"handleClick\"/>\n\t\t\t<template v-for=\"tag in tags\" :key=\"tag\">\n\t\t\t\t<div class=\"tasks-field-tag\">\n\t\t\t\t\t<span>{{ tag }}</span>\n\t\t\t\t\t<div v-if=\"!readonly\" class=\"tasks-field-tag-cross\" @click.capture.stop=\"handleCrossClick(tag)\">\n\t\t\t\t\t\t<BIcon :name=\"Outline.CROSS_L\" hoverable/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<FieldAdd v-if=\"!isFilled\" :icon=\"Outline.TAG\" @click=\"handleClick\"/>\n\t\t\t<div class=\"tasks-field-tags-anchor\" ref=\"anchor\"/>\n\t\t</div>\n\t`,\n};\n","import { Chip, ChipDesign } from 'ui.system.chip.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { tagsMeta } from './tags-meta';\nimport { tagsDialog } from './tags-dialog';\n\n// @vue/component\nexport const TagsChip = {\n\tcomponents: {\n\t\tChip,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\ttagsMeta,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdesign(): string\n\t\t{\n\t\t\treturn this.isSelected ? ChipDesign.ShadowAccent : ChipDesign.ShadowNoAccent;\n\t\t},\n\t\tisSelected(): boolean\n\t\t{\n\t\t\treturn this.task.filledFields[tagsMeta.id];\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.isSelected)\n\t\t\t{\n\t\t\t\tthis.highlightField();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttagsDialog.show({\n\t\t\t\ttargetNode: this.$el,\n\t\t\t\ttaskId: this.taskId,\n\t\t\t\tonClose: this.highlightField,\n\t\t\t});\n\t\t},\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(tagsMeta.id);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\t:design\n\t\t\t:icon=\"Outline.TAG\"\n\t\t\t:text=\"loc('TASKS_V2_TAGS_TITLE_CHIP')\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"tagsMeta.id\"\n\t\t\t:data-task-chip-value=\"task.tags.join(',')\"\n\t\t\t@click=\"handleClick\"\n\t\t/>\n\t`,\n};\n"],"names":["tagsMeta","Object","freeze","id","TaskField","Tags","title","Loc","getMessage","dialogs","tagsDialog","constructor","EventEmitter","subscribe","EventName","TagDeleted","event","tagName","groupId","getData","entries","forEach","key","dialog","Number","split","tagId","getItems","find","item","getTitle","getId","removeItem","EntitySelectorEntity","Tag","show","params","onClose","taskId","showTo","targetNode","userId","Core","getParams","currentUser","taskService","getStoreTask","entityId","EntitySelectorDialog","enableSearch","dropdownMode","entities","options","searchOptions","allowCreateItem","footer","Footer","footerOptions","clearUnavailableItems","events","onLoad","tag","searchQuery","getQuery","tags","includes","addItem","popupOptions","getSelectedItems","map","update","Set","idsMap","Map","has","set","getItem","selectItemsByIds","values","tabs","selected","idUtils","isTemplate","TemplateTag","components","BIcon","AddButton","FieldAdd","inject","task","setup","Outline","data","isDialogShown","tagsIndexes","isHovered","computed","sort","a","b","isFilled","length","readonly","rights","edit","isAddActive","isAddVisible","created","rememberTagsIndexes","methods","handleClick","$refs","anchor","handleDialogClose","handleCrossClick","filter","it","reduce","acc","index","template","TagsChip","Chip","design","isSelected","ChipDesign","ShadowAccent","ShadowNoAccent","filledFields","highlightField","$el","fieldHighlighter","setContainer","$root","highlight"],"mappings":"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"}