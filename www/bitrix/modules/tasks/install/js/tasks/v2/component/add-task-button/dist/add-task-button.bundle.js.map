{"version":3,"file":"add-task-button.bundle.js","sources":["../src/add-task-button.js"],"sourcesContent":["import { Event, Type } from 'main.core';\n\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { Button as UiButton, ButtonSize } from 'ui.vue3.components.button';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\n\nimport { Hint } from 'tasks.v2.component.elements.hint';\nimport { Model, TaskField } from 'tasks.v2.const';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport { fileService, EntityTypes } from 'tasks.v2.provider.service.file-service';\nimport { userFieldsManager } from 'tasks.v2.component.fields.user-fields';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport type { UserFieldScheme } from 'tasks.v2.model.interface';\n\nimport './add-task-button.css';\n\n// @vue/component\nexport const AddTaskButton = {\n\tname: 'AddTaskButton',\n\tcomponents: {\n\t\tUiButton,\n\t\tHint,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisTemplate: {},\n\t},\n\tprops: {\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: ButtonSize.LARGE,\n\t\t},\n\t\thasError: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: [\n\t\t'addTask',\n\t\t'copyTask',\n\t\t'fromTemplate',\n\t\t'update:hasError',\n\t],\n\tsetup(): { task: TaskModel } {},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tfieldContainer: null,\n\t\t\tisPopupShown: false,\n\t\t\tisLoading: false,\n\t\t\terrorReason: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttaskUserFieldScheme: `${Model.Interface}/taskUserFieldScheme`,\n\t\t\ttemplateUserFieldScheme: `${Model.Interface}/templateUserFieldScheme`,\n\t\t}),\n\t\tisUploading(): boolean\n\t\t{\n\t\t\treturn fileService.get(this.taskId).isUploading();\n\t\t},\n\t\tisCheckListUploading(): boolean\n\t\t{\n\t\t\treturn this.task.checklist?.some((itemId) => {\n\t\t\t\treturn fileService.get(itemId, EntityTypes.CheckListItem).isUploading();\n\t\t\t});\n\t\t},\n\t\tuserFieldScheme(): UserFieldScheme[]\n\t\t{\n\t\t\treturn this.isTemplate\n\t\t\t\t? this.templateUserFieldScheme\n\t\t\t\t: this.taskUserFieldScheme\n\t\t\t;\n\t\t},\n\t\thasUnfilledMandatoryUserFields(): boolean\n\t\t{\n\t\t\treturn userFieldsManager.hasUnfilledMandatoryFields(this.task.userFields, this.userFieldScheme);\n\t\t},\n\t\tisDisabled(): boolean\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.task.title.trim() === ''\n\t\t\t\t|| this.isUploading\n\t\t\t\t|| this.isCheckListUploading\n\t\t\t\t|| this.hasUnfilledMandatoryUserFields\n\t\t\t\t|| this.isLoading\n\t\t\t);\n\t\t},\n\t},\n\twatch: {\n\t\thasError(value: boolean): void\n\t\t{\n\t\t\tif (value === true)\n\t\t\t{\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tasync handleClick(): Promise<void>\n\t\t{\n\t\t\tif (this.isDisabled)\n\t\t\t{\n\t\t\t\tthis.handleDisabledClick();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isLoading = true;\n\t\t\tthis.$emit('update:hasError', false);\n\n\t\t\tif (this.task.copiedFromId)\n\t\t\t{\n\t\t\t\tconst result = await this.handleCopyTask();\n\n\t\t\t\tif (!result)\n\t\t\t\t{\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.task.templateId)\n\t\t\t{\n\t\t\t\tconst result = await this.handleCreateTaskFromTemplate();\n\n\t\t\t\tif (!result)\n\t\t\t\t{\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('addTask');\n\t\t},\n\t\tasync handleCopyTask(): Promise<boolean>\n\t\t{\n\t\t\tlet withSubTasks = false;\n\n\t\t\tif (this.task.containsSubTasks)\n\t\t\t{\n\t\t\t\tconst captions = {\n\t\t\t\t\ttitle: this.loc('TASKS_V2_COPY_POPUP_TITLE'),\n\t\t\t\t\tmessage: this.loc('TASKS_V2_COPY_POPUP_MESSAGE'),\n\t\t\t\t\tyesCaption: this.loc('TASKS_V2_COPY_POPUP_YES'),\n\t\t\t\t\tnoCaption: this.loc('TASKS_V2_COPY_POPUP_NO'),\n\t\t\t\t};\n\n\t\t\t\twithSubTasks = await this.askPopup(captions);\n\n\t\t\t\tif (Type.isNull(withSubTasks))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.$emit('copyTask', { withSubTasks });\n\n\t\t\treturn true;\n\t\t},\n\t\tasync handleCreateTaskFromTemplate(): Promise<boolean>\n\t\t{\n\t\t\tlet withSubTasks = false;\n\n\t\t\tif (this.task.containsSubTasks)\n\t\t\t{\n\t\t\t\tconst captions = {\n\t\t\t\t\ttitle: this.loc('TASKS_V2_CREATE_SUBTASKS_POPUP_TITLE'),\n\t\t\t\t\tmessage: this.loc('TASKS_V2_CREATE_SUBTASKS_POPUP_MESSAGE'),\n\t\t\t\t\tyesCaption: this.loc('TASKS_V2_CREATE_SUBTASKS_POPUP_YES'),\n\t\t\t\t\tnoCaption: this.loc('TASKS_V2_CREATE_SUBTASKS_POPUP_NO'),\n\t\t\t\t};\n\n\t\t\t\twithSubTasks = await this.askPopup(captions);\n\n\t\t\t\tif (Type.isNull(withSubTasks))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.$emit('fromTemplate', { withSubTasks });\n\n\t\t\treturn true;\n\t\t},\n\t\thandleDisabledClick(): void\n\t\t{\n\t\t\tif (this.task.title.trim() === '')\n\t\t\t{\n\t\t\t\tsetTimeout(() => this.highlightTitle());\n\t\t\t}\n\t\t\telse if (this.isUploading)\n\t\t\t{\n\t\t\t\tsetTimeout(() => this.highlightFiles());\n\t\t\t}\n\t\t\telse if (this.isCheckListUploading)\n\t\t\t{\n\t\t\t\tsetTimeout(() => this.highlightChecklist());\n\t\t\t}\n\t\t\telse if (this.hasUnfilledMandatoryUserFields)\n\t\t\t{\n\t\t\t\tsetTimeout(() => this.highlightUserFields());\n\t\t\t}\n\t\t},\n\t\thighlightTitle(): void\n\t\t{\n\t\t\tthis.errorReason = this.loc(this.isTemplate ? 'TASKS_V2_TEMPLATE_TITLE_IS_EMPTY' : 'TASKS_V2_TITLE_IS_EMPTY');\n\n\t\t\tthis.fieldContainer = fieldHighlighter\n\t\t\t\t.setContainer(this.$root.$el)\n\t\t\t\t.addHighlight(TaskField.Title)\n\t\t\t\t.getFieldContainer(TaskField.Title)\n\t\t\t;\n\n\t\t\tthis.fieldContainer.querySelector('textarea').focus();\n\n\t\t\tthis.showPopup();\n\t\t},\n\t\thighlightFiles(): void\n\t\t{\n\t\t\tthis.errorReason = this.loc('TASKS_V2_FILE_IS_UPLOADING');\n\n\t\t\tthis.fieldContainer = fieldHighlighter\n\t\t\t\t.setContainer(this.$root.$el)\n\t\t\t\t.addChipHighlight(TaskField.Files)\n\t\t\t\t.getChipContainer(TaskField.Files)\n\t\t\t;\n\n\t\t\tthis.showPopup();\n\t\t},\n\t\thighlightChecklist(): void\n\t\t{\n\t\t\tthis.errorReason = this.loc('TASKS_V2_FILE_IS_UPLOADING');\n\n\t\t\tthis.fieldContainer = fieldHighlighter\n\t\t\t\t.setContainer(this.$root.$el)\n\t\t\t\t.addChipHighlight(TaskField.CheckList)\n\t\t\t\t.getChipContainer(TaskField.CheckList)\n\t\t\t;\n\n\t\t\tthis.showPopup();\n\t\t},\n\t\thighlightUserFields(): void\n\t\t{\n\t\t\tthis.errorReason = this.loc('TASKS_V2_NOT_FILLED_MANDATORY_USER_FIELDS');\n\n\t\t\tthis.fieldContainer = fieldHighlighter\n\t\t\t\t.setContainer(this.$root.$el)\n\t\t\t\t.addHighlight(TaskField.UserFields)\n\t\t\t\t.scrollToField(TaskField.UserFields)\n\t\t\t\t.getFieldContainer(TaskField.UserFields)\n\t\t\t;\n\n\t\t\tthis.showPopup();\n\t\t},\n\t\tshowPopup(): void\n\t\t{\n\t\t\tconst removeHighlight = () => {\n\t\t\t\tthis.isPopupShown = false;\n\t\t\t\tEvent.unbind(window, 'keydown', removeHighlight);\n\t\t\t};\n\t\t\tEvent.bind(window, 'keydown', removeHighlight);\n\n\t\t\tthis.isPopupShown = true;\n\t\t},\n\t\taskPopup(captions: Object): Promise<boolean>\n\t\t{\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tlet result = null;\n\n\t\t\t\tMessageBox.show({\n\t\t\t\t\t...captions,\n\t\t\t\t\tuseAirDesign: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\t\tonYes: (box) => {\n\t\t\t\t\t\tresult = true;\n\t\t\t\t\t\tbox.close();\n\t\t\t\t\t},\n\t\t\t\t\tonNo: (box) => {\n\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\tbox.close();\n\t\t\t\t\t},\n\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-add-task-button-container\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\tdata-task-button-id=\"create\"\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t<UiButton\n\t\t\t\tclass=\"tasks-add-task-button\"\n\t\t\t\t:text=\"loc('TASKS_V2_ADD_TASK')\"\n\t\t\t\t:size\n\t\t\t\t:loading=\"isLoading && !hasError\"\n\t\t\t/>\n\t\t</div>\n\t\t<Hint\n\t\t\tv-if=\"isPopupShown\"\n\t\t\t:bindElement=\"fieldContainer\"\n\t\t\t@close=\"isPopupShown = false\"\n\t\t>\n\t\t\t{{ errorReason }}\n\t\t</Hint>\n\t`,\n};\n"],"names":["AddTaskButton","name","components","UiButton","Hint","inject","task","taskId","isTemplate","props","size","type","String","default","ButtonSize","LARGE","hasError","Boolean","emits","setup","data","fieldContainer","isPopupShown","isLoading","errorReason","computed","mapGetters","taskUserFieldScheme","Model","Interface","templateUserFieldScheme","isUploading","fileService","get","isCheckListUploading","checklist","some","itemId","EntityTypes","CheckListItem","userFieldScheme","hasUnfilledMandatoryUserFields","userFieldsManager","hasUnfilledMandatoryFields","userFields","isDisabled","title","trim","watch","value","methods","handleClick","handleDisabledClick","$emit","copiedFromId","result","handleCopyTask","templateId","handleCreateTaskFromTemplate","withSubTasks","containsSubTasks","captions","loc","message","yesCaption","noCaption","askPopup","Type","isNull","setTimeout","highlightTitle","highlightFiles","highlightChecklist","highlightUserFields","fieldHighlighter","setContainer","$root","$el","addHighlight","TaskField","Title","getFieldContainer","querySelector","focus","showPopup","addChipHighlight","Files","getChipContainer","CheckList","UserFields","scrollToField","removeHighlight","Event","unbind","window","bind","Promise","resolve","MessageBox","show","useAirDesign","buttons","MessageBoxButtons","YES_NO","onYes","box","close","onNo","popupOptions","events","onClose","template"],"mappings":"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"}