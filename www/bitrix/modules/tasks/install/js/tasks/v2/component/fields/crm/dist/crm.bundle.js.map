{"version":3,"file":"crm.bundle.js","sources":["../src/crm-item.js","../src/crm-meta.js","../src/crm-dialog.js","../src/crm.js","../src/crm-chip.js"],"sourcesContent":["import { Runtime } from 'main.core';\nimport { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { TextMd } from 'ui.system.typography.vue';\nimport { BMenu, type MenuItemOptions, type MenuOptions } from 'ui.system.menu.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Core } from 'tasks.v2.core';\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { CrmMappers } from 'tasks.v2.provider.service.crm-service';\nimport type { CrmItemModel } from 'tasks.v2.model.crm-items';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './crm.css';\n\n// @vue/component\nexport const CrmItem = {\n\tcomponents: {\n\t\tHoverPill,\n\t\tTextMd,\n\t\tRichLoc,\n\t\tBMenu,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisEdit: {},\n\t},\n\tprops: {\n\t\t/** @type CrmItemModel */\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['edit', 'clear'],\n\tsetup(): { task: TaskModel } {},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisLocked(): boolean\n\t\t{\n\t\t\treturn !Core.getParams().restrictions.crmIntegration.available;\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t\tmenuOptions(): MenuOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: `tasks-crm-menu-${this.item.id}`,\n\t\t\t\tbindElement: this.$refs.pill.$el,\n\t\t\t\toffsetTop: 8,\n\t\t\t\titems: this.menuItems,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t};\n\t\t},\n\t\tmenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('TASKS_V2_CRM_OPEN'),\n\t\t\t\t\ticon: Outline.GO_TO_L,\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tid: 'tasks-crm-menu-open',\n\t\t\t\t\t},\n\t\t\t\t\tonClick: () => BX.SidePanel.Instance.emulateAnchorClick(this.item.link),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('TASKS_V2_CRM_EDIT'),\n\t\t\t\t\ticon: Outline.EDIT_L,\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tid: 'tasks-crm-menu-edit',\n\t\t\t\t\t},\n\t\t\t\t\tisLocked: this.isLocked,\n\t\t\t\t\tonClick: () => this.$emit('edit'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('TASKS_V2_CRM_UNLINK'),\n\t\t\t\t\ticon: Outline.CROSS_L,\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tid: 'tasks-crm-menu-unlink',\n\t\t\t\t\t},\n\t\t\t\t\tonClick: this.clear,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tasync mounted(): Promise<void>\n\t{\n\t\tconst { EntityMiniCard } = await Runtime.loadExtension('crm.mini-card');\n\n\t\tconst card = new EntityMiniCard({\n\t\t\tbindElement: this.$refs.pill.$el,\n\t\t\tentityTypeId: CrmMappers.getEntityTypeId(this.item.id),\n\t\t\tentityId: this.item.entityId,\n\t\t});\n\n\t\tconst scrollContainer = document.querySelector(`[data-task-card-scroll=\"${this.taskId}\"]`);\n\t\tcard.getMiniCard().popup().setTargetContainer(scrollContainer);\n\t},\n\tmethods: {\n\t\tprepareTitle(item: CrmItemModel): string\n\t\t{\n\t\t\treturn this.loc('TASKS_V2_CRM_ENTITY_TITLE', {\n\t\t\t\t'#TYPE_NAME#': item.typeName,\n\t\t\t\t'#TITLE#': item.title,\n\t\t\t});\n\t\t},\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (!this.isEdit || this.readonly)\n\t\t\t{\n\t\t\t\tBX.SidePanel.Instance.emulateAnchorClick(this.item.link);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isMenuShown = true;\n\t\t},\n\t\tclear(): void\n\t\t{\n\t\t\tthis.$emit('clear', this.item.id);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-crm-item-container\">\n\t\t\t<HoverPill\n\t\t\t\tclass=\"tasks-field-crm-item\"\n\t\t\t\t:withClear=\"!isEdit || !readonly\"\n\t\t\t\ttextOnly\n\t\t\t\t:active=\"isMenuShown\"\n\t\t\t\tref=\"pill\"\n\t\t\t\t@click.stop=\"handleClick\"\n\t\t\t\t@clear=\"clear\"\n\t\t\t>\n\t\t\t\t<TextMd class=\"tasks-field-crm-item-text\">\n\t\t\t\t\t<RichLoc tag=\"span\" :text=\"prepareTitle(item)\" placeholder=\"[a]\">\n\t\t\t\t\t\t<template #a=\"{ text }\">\n\t\t\t\t\t\t\t<a @click.prevent>{{ text }}</a>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</TextMd>\n\t\t\t</HoverPill>\n\t\t</div>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptions\" @close=\"isMenuShown = false\"/>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { TaskField } from 'tasks.v2.const';\n\nexport const crmMeta = Object.freeze({\n\tid: TaskField.Crm,\n\ttitle: Loc.getMessage('TASKS_V2_CRM_TITLE'),\n});\n","import { Extension } from 'main.core';\n\nimport { Core } from 'tasks.v2.core';\nimport { EntitySelectorEntity, Model } from 'tasks.v2.const';\nimport { idUtils, type TaskId } from 'tasks.v2.lib.id-utils';\nimport { CrmMappers } from 'tasks.v2.provider.service.crm-service';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport { EntitySelectorDialog, type Item, type ItemId } from 'tasks.v2.lib.entity-selector-dialog';\nimport type { CrmItemModel } from 'tasks.v2.model.crm-items';\n\ntype Params = {\n\ttargetNode: HTMLElement,\n\ttaskId: TaskId,\n\tonClose: Function,\n};\n\nconst dialogs: { [taskId: TaskId]: EntitySelectorDialog } = {};\n\nexport const crmDialog = new class\n{\n\t#taskId: TaskId;\n\t#onClose: Function | null;\n\n\tinit(taskId: TaskId): void\n\t{\n\t\tthis.#taskId = taskId;\n\t\t// eslint-disable-next-line no-unused-expressions\n\t\tthis.#dialog;\n\t}\n\n\tshow(params: Params): void\n\t{\n\t\tthis.#taskId = params.taskId;\n\t\tthis.#onClose = params.onClose;\n\n\t\tthis.#dialog.selectItemsByIds(this.#items);\n\t\tthis.#dialog.showTo(params.targetNode);\n\t}\n\n\tget #dialog(): EntitySelectorDialog\n\t{\n\t\tdialogs[this.#taskId] ??= this.#createDialog();\n\n\t\treturn dialogs[this.#taskId];\n\t}\n\n\t#createDialog(): EntitySelectorDialog\n\t{\n\t\tconst { crmIntegration } = Extension.getSettings('tasks.v2.component.fields.crm');\n\t\tconst settings = idUtils.isTemplate(this.#taskId) ? crmIntegration?.template : crmIntegration?.task;\n\n\t\tconst dynamicTypeIds = Object.entries(settings ?? {})\n\t\t\t.filter(([entityId, enabled]) => enabled === 'Y' && entityId.startsWith('DYNAMIC_'))\n\t\t\t.map(([entityId]) => Number(entityId.slice(8)))\n\t\t;\n\n\t\treturn new EntitySelectorDialog({\n\t\t\tcontext: 'tasks-card',\n\t\t\tenableSearch: true,\n\t\t\tentities: [\n\t\t\t\tEntitySelectorEntity.Deal,\n\t\t\t\tEntitySelectorEntity.Contact,\n\t\t\t\tEntitySelectorEntity.Company,\n\t\t\t\tEntitySelectorEntity.Lead,\n\t\t\t\tEntitySelectorEntity.SmartInvoice,\n\t\t\t\tEntitySelectorEntity.DynamicMultiple,\n\t\t\t].map((entityId: string) => ({\n\t\t\t\tid: entityId,\n\t\t\t\tdynamicLoad: true,\n\t\t\t\tdynamicSearch: true,\n\t\t\t\toptions: {\n\t\t\t\t\tdynamicTypeIds,\n\t\t\t\t\tshowTab: true,\n\t\t\t\t\tallowAllCategories: true,\n\t\t\t\t},\n\t\t\t\tdynamicSearchMatchMode: 'all',\n\t\t\t})),\n\t\t\tpreselectedItems: this.#items,\n\t\t\tevents: {\n\t\t\t\tonLoad: this.#fillStore,\n\t\t\t},\n\t\t\tpopupOptions: {\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: (): void => {\n\t\t\t\t\t\tif (!this.#dialog.isLoaded())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst items = this.#fillStore();\n\n\t\t\t\t\t\tconst crmItemIds = items.map(({ id }) => id);\n\t\t\t\t\t\tvoid taskService.update(this.#taskId, { crmItemIds });\n\n\t\t\t\t\t\tthis.#onClose?.();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\t#fillStore = (): CrmItemModel[] => {\n\t\tconst crmItems = this.#dialog.getSelectedItems().map((item: Item) => this.#mapItemToModel(item));\n\n\t\tvoid Core.getStore().dispatch(`${Model.CrmItems}/upsertMany`, crmItems);\n\n\t\treturn crmItems;\n\t};\n\n\t#mapItemToModel(item: Item): CrmItemModel\n\t{\n\t\tconst entityInfo = item.getCustomData().get('entityInfo');\n\t\tconst id = item.getId();\n\n\t\treturn {\n\t\t\tid: CrmMappers.mapId(entityInfo.type, item.getId()),\n\t\t\tentityId: Number.isInteger(id) ? id : Number(id.split(':')[1]),\n\t\t\ttype: item.getEntityId(),\n\t\t\ttypeName: entityInfo.typeNameTitle,\n\t\t\ttitle: item.getTitle(),\n\t\t\tlink: entityInfo.url,\n\t\t};\n\t}\n\n\tget #items(): ItemId[]\n\t{\n\t\treturn taskService.getStoreTask(this.#taskId).crmItemIds?.map((id) => CrmMappers.splitId(id)) ?? [];\n\t}\n}();\n","import { TextSm } from 'ui.system.typography.vue';\nimport { BLine } from 'ui.system.skeleton.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Core } from 'tasks.v2.core';\nimport { Model } from 'tasks.v2.const';\nimport { AddButton } from 'tasks.v2.component.elements.add-button';\nimport { FieldAdd } from 'tasks.v2.component.elements.field-add';\nimport { crmService, CrmMappers } from 'tasks.v2.provider.service.crm-service';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport { showLimit } from 'tasks.v2.lib.show-limit';\nimport type { CrmItemModel } from 'tasks.v2.model.crm-items';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { CrmItem } from './crm-item';\nimport { crmMeta } from './crm-meta';\nimport { crmDialog } from './crm-dialog';\nimport './crm.css';\n\nconst maxCount = 7;\n\n// @vue/component\nexport const Crm = {\n\tcomponents: {\n\t\tAddButton,\n\t\tTextSm,\n\t\tBLine,\n\t\tFieldAdd,\n\t\tCrmItem,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisEdit: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tcrmMeta,\n\t\t\tmaxCount,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisDialogShown: false,\n\t\t\tisExpanded: false,\n\t\t\tisHovered: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tcrmItems(): CrmItemModel[]\n\t\t{\n\t\t\tconst items: CrmItemModel[] = this.$store.getters[`${Model.CrmItems}/getByIds`](this.task.crmItemIds);\n\n\t\t\treturn items.sort((a, b) => CrmMappers.compareIds(a.id, b.id));\n\t\t},\n\t\tvisibleItems(): CrmItemModel[]\n\t\t{\n\t\t\treturn this.crmItems.slice(0, maxCount);\n\t\t},\n\t\tcollapsedItems(): CrmItemModel[]\n\t\t{\n\t\t\treturn this.crmItems.slice(maxCount);\n\t\t},\n\t\tisLoading(): boolean\n\t\t{\n\t\t\treturn !this.isEmpty && !this.crmItems?.length;\n\t\t},\n\t\tisEmpty(): boolean\n\t\t{\n\t\t\treturn !this.task.crmItemIds?.length;\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t\texpandButtonText(): string\n\t\t{\n\t\t\tif (this.isExpanded)\n\t\t\t{\n\t\t\t\treturn this.loc('TASKS_V2_CRM_COLLAPSE');\n\t\t\t}\n\n\t\t\treturn this.loc('TASKS_V2_CRM_AND_COUNT', {\n\t\t\t\t'#COUNT#': this.collapsedItems.length,\n\t\t\t});\n\t\t},\n\t\tisAddActive(): boolean\n\t\t{\n\t\t\treturn !this.readonly && !this.isEmpty;\n\t\t},\n\t\tisAddVisible(): boolean\n\t\t{\n\t\t\treturn this.isDialogShown || this.isHovered;\n\t\t},\n\t\tisLocked(): boolean\n\t\t{\n\t\t\treturn !Core.getParams().restrictions.crmIntegration.available;\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tif (this.isEdit)\n\t\t{\n\t\t\tvoid crmService.list(this.taskId, this.task.crmItemIds);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcrmDialog.init(this.taskId);\n\t\t}\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (!this.readonly)\n\t\t\t{\n\t\t\t\tthis.showDialog();\n\t\t\t}\n\t\t},\n\t\tshowDialog(): void\n\t\t{\n\t\t\tif (this.isLocked)\n\t\t\t{\n\t\t\t\tvoid showLimit({\n\t\t\t\t\tfeatureId: Core.getParams().restrictions.crmIntegration.featureId,\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcrmDialog.show({\n\t\t\t\ttargetNode: this.$refs.anchor,\n\t\t\t\ttaskId: this.taskId,\n\t\t\t\tonClose: this.handleClose,\n\t\t\t});\n\n\t\t\tthis.isDialogShown = true;\n\t\t},\n\t\thandleClose(): void\n\t\t{\n\t\t\tthis.isDialogShown = false;\n\t\t},\n\t\thandleClear(crmItemId: string): void\n\t\t{\n\t\t\tconst crmItemIds = this.task.crmItemIds.filter((id) => id !== crmItemId);\n\n\t\t\tvoid taskService.update(this.taskId, { crmItemIds });\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t@mouseenter=\"isHovered = true\"\n\t\t\t@mouseleave=\"isHovered = false\"\n\t\t>\n\t\t\t<AddButton \n\t\t\t\tv-if=\"isAddActive\"\n\t\t\t\t:isVisible=\"isAddVisible\"\n\t\t\t\t:isLocked\n\t\t\t\t@click=\"handleClick\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tclass=\"tasks-field-crm\"\n\t\t\t\t:data-task-id=\"taskId\"\n\t\t\t\t:data-task-field-id=\"crmMeta.id\"\n\t\t\t\t:data-task-crm-item-ids=\"task.crmItemIds?.join(',')\"\n\t\t\t>\n\t\t\t\t<FieldAdd \n\t\t\t\t\tv-if=\"isEmpty\"\n\t\t\t\t\t:icon=\"Outline.CRM\"\n\t\t\t\t\t:isLocked\n\t\t\t\t\t@click=\"showDialog\"\n\t\t\t\t/>\n\t\t\t\t<div v-if=\"isLoading\" class=\"tasks-field-crm-skeleton\">\n\t\t\t\t\t<template v-for=\"key in task.crmItemIds.slice(0, maxCount)\" :key>\n\t\t\t\t\t\t<BLine :height=\"20\"/>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<template v-for=\"item in visibleItems\" :key=\"item.id\">\n\t\t\t\t\t<CrmItem :item @edit=\"showDialog\" @clear=\"handleClear(item.id)\"/>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"isExpanded\" v-for=\"item in collapsedItems\" :key=\"item.id\">\n\t\t\t\t\t<CrmItem :item @edit=\"showDialog\" @clear=\"handleClear(item.id)\"/>\n\t\t\t\t</template>\n\t\t\t\t<TextSm\n\t\t\t\t\tv-if=\"collapsedItems.length > 0\"\n\t\t\t\t\tclass=\"tasks-field-crm-expand\"\n\t\t\t\t\t@click.capture.stop=\"isExpanded = !isExpanded\"\n\t\t\t\t>\n\t\t\t\t\t{{ expandButtonText }}\n\t\t\t\t</TextSm>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-field-crm-anchor\" ref=\"anchor\"/>\n\t\t</div>\n\t`,\n};\n","import { Chip, ChipDesign } from 'ui.system.chip.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Core } from 'tasks.v2.core';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport { showLimit } from 'tasks.v2.lib.show-limit';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { crmMeta } from './crm-meta';\nimport { crmDialog } from './crm-dialog';\nimport './crm.css';\n\n// @vue/component\nexport const CrmChip = {\n\tcomponents: {\n\t\tChip,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tcrmMeta,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdesign(): string\n\t\t{\n\t\t\treturn this.isSelected ? ChipDesign.ShadowAccent : ChipDesign.ShadowNoAccent;\n\t\t},\n\t\tisSelected(): boolean\n\t\t{\n\t\t\treturn this.task.filledFields[crmMeta.id];\n\t\t},\n\t\tisLocked(): boolean\n\t\t{\n\t\t\treturn !Core.getParams().restrictions.crmIntegration.available;\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.isSelected)\n\t\t\t{\n\t\t\t\tthis.highlightField();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isLocked)\n\t\t\t{\n\t\t\t\tvoid showLimit({\n\t\t\t\t\tfeatureId: Core.getParams().restrictions.crmIntegration.featureId,\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcrmDialog.show({\n\t\t\t\ttargetNode: this.$el,\n\t\t\t\ttaskId: this.taskId,\n\t\t\t\tonClose: this.highlightField,\n\t\t\t});\n\t\t},\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(crmMeta.id);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\tv-if=\"task.rights.edit || isSelected\"\n\t\t\t:design\n\t\t\t:icon=\"Outline.CRM\"\n\t\t\t:lock=\"isLocked\"\n\t\t\t:text=\"loc('TASKS_V2_CRM_TITLE_CHIP')\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"crmMeta.id\"\n\t\t\t:data-task-crm-item-ids=\"task.crmItemIds?.join(',')\"\n\t\t\t@click=\"handleClick\"\n\t\t/>\n\t`,\n};\n"],"names":["CrmItem","components","HoverPill","TextMd","RichLoc","BMenu","inject","task","taskId","isEdit","props","item","type","Object","required","emits","setup","data","isMenuShown","computed","isLocked","Core","getParams","restrictions","crmIntegration","available","readonly","rights","edit","menuOptions","id","bindElement","$refs","pill","$el","offsetTop","items","menuItems","targetContainer","document","body","title","loc","icon","Outline","GO_TO_L","dataset","onClick","BX","SidePanel","Instance","emulateAnchorClick","link","EDIT_L","$emit","CROSS_L","clear","mounted","EntityMiniCard","Runtime","loadExtension","card","entityTypeId","CrmMappers","getEntityTypeId","entityId","scrollContainer","querySelector","getMiniCard","popup","setTargetContainer","methods","prepareTitle","typeName","handleClick","template","crmMeta","freeze","TaskField","Crm","Loc","getMessage","dialogs","crmDialog","crmItems","getSelectedItems","map","getStore","dispatch","Model","CrmItems","init","show","params","onClose","selectItemsByIds","showTo","targetNode","Extension","getSettings","settings","idUtils","isTemplate","dynamicTypeIds","entries","filter","enabled","startsWith","Number","slice","EntitySelectorDialog","context","enableSearch","entities","EntitySelectorEntity","Deal","Contact","Company","Lead","SmartInvoice","DynamicMultiple","dynamicLoad","dynamicSearch","options","showTab","allowAllCategories","dynamicSearchMatchMode","preselectedItems","events","onLoad","popupOptions","isLoaded","crmItemIds","taskService","update","entityInfo","getCustomData","get","getId","mapId","isInteger","split","getEntityId","typeNameTitle","getTitle","url","getStoreTask","splitId","maxCount","AddButton","TextSm","BLine","FieldAdd","isDialogShown","isExpanded","isHovered","$store","getters","sort","a","b","compareIds","visibleItems","collapsedItems","isLoading","isEmpty","length","expandButtonText","isAddActive","isAddVisible","crmService","list","showDialog","showLimit","featureId","anchor","handleClose","handleClear","crmItemId","CrmChip","Chip","design","isSelected","ChipDesign","ShadowAccent","ShadowNoAccent","filledFields","highlightField","fieldHighlighter","setContainer","$root","highlight"],"mappings":"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"}