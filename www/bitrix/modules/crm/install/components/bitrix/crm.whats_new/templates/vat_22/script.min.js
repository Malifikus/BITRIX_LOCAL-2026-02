(function(e,t,a,i,s){"use strict";var n,r;function l(e,t){o(e,t);t.add(e)}function c(e,t,a){o(e,t);t.set(e,a)}function o(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function u(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var d=t.Reflection.namespace("BX.Crm.WhatsNew");var h=new WeakMap;var p=new WeakMap;var v=new WeakSet;var b=new WeakSet;var _=new WeakSet;var f=new WeakSet;var T=function(){function e(){babelHelpers.classCallCheck(this,e);l(this,f);l(this,_);l(this,b);l(this,v);c(this,h,{writable:true,value:void 0});c(this,p,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,h,null);babelHelpers.classPrivateFieldSet(this,p,false)}babelHelpers.createClass(e,[{key:"show",value:function e(){var i=this;if(!babelHelpers.classPrivateFieldGet(this,h)){babelHelpers.classPrivateFieldSet(this,h,new s.Dialog({title:t.Loc.getMessage("CRM_WHATS_NEW_VAT_22_TITLE"),content:u(this,v,w).call(this),leftButtons:[u(this,_,A).call(this),u(this,f,H).call(this)],closeByClickOutside:false,width:555,hasOverlay:true}));a.BannerDispatcher.high.toQueue((function(e){babelHelpers.classPrivateFieldGet(i,h).subscribe("onAfterHide",(function(){e();if(babelHelpers.classPrivateFieldGet(i,p)){i.updateVat22()}else{i.updateLater()}}));babelHelpers.classPrivateFieldGet(i,h).show()}))}}},{key:"updateLater",value:function e(){t.ajax.runAction("crm.settings.tourvat22.updateLater")["catch"]((function(e){console.error(e)}))}},{key:"updateVat22",value:function e(){t.ajax.runAction("crm.settings.tourvat22.updateVat22")["catch"]((function(e){console.error(e)}))}}]);return e}();function w(){return t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-whats-new-vat-22_content-description">\n\t\t\t\t<p>',"</p>\n\t\t\t\t<p>","</p>\n\t\t\t\t<p>","</p>\n\t\t\t</div>\n\t\t"])),t.Loc.getMessage("CRM_WHATS_NEW_VAT_22_CONTENT"),t.Loc.getMessage("CRM_WHATS_NEW_VAT_22_MARKETPLACE"),u(this,b,g).call(this))}function g(){var e=t.Reflection.getClass("top.BX.Helper");var a=t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(["<a>","</a>"])),t.Loc.getMessage("CRM_WHATS_NEW_VAT_22_HELP_DESC"));t.bind(a,"click",(function(){e===null||e===void 0?void 0:e.show("redirect=detail&code=27490382")}));return a}function A(){var e=this;return new i.Button({style:i.AirButtonStyle.FILLED,text:t.Loc.getMessage("CRM_WHATS_NEW_VAT_22_UPDATE_AUTO"),round:true,useAirDesign:true,onclick:function t(){babelHelpers.classPrivateFieldSet(e,p,true);babelHelpers.classPrivateFieldGet(e,h).hide()}})}function H(){var e=this;return new i.Button({style:i.AirButtonStyle.OUTLINE,text:t.Loc.getMessage("CRM_WHATS_NEW_VAT_22_UPDATE_LATER"),round:true,useAirDesign:true,onclick:function t(){babelHelpers.classPrivateFieldGet(e,h).hide()}})}d.Vat22Popup=T})(this.window=this.window||{},BX,BX.UI,BX.UI,BX.UI.System);
//# sourceMappingURL=script.map.js