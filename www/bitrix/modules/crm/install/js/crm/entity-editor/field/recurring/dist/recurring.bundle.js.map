{"version":3,"file":"recurring.bundle.js","sources":["../src/enum/mode.js","../src/enum/multiple-limit.js","../src/enum/multiple-type.js","../src/enum/offset-date-type.js","../src/enum/period.js","../src/helper.js","../src/components/common/field-title.js","../src/components/common/hidden-input.js","../src/components/common/loader.js","../src/components/email/document-selector.js","../src/components/email/sender-selector.js","../src/components/email/template-selector.js","../src/components/email/to-email-selector.js","../src/components/email/email-fields.js","../src/components/common/destroy-popup-menu.js","../src/components/field/category-selector.js","../src/components/field/date-fields.js","../src/components/field/mode-selector.js","../src/components/field/multiple-limit-selector.js","../src/components/field/multiple-repeat-selector.js","../src/components/field/multiple-type-selector.js","../src/components/field/single-fields.js","../src/components/recurring.js","../src/index.js"],"sourcesContent":["import { Loc } from 'main.core';\n\nexport type Mode = {\n\tvalue: string;\n\ttitle: string;\n}\n\ntype ModeItems = Object<string, Mode>;\n\nexport const modeItems: ModeItems = Object.freeze({\n\tnone: {\n\t\tvalue: 'N',\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MODE_ITEM_NONE'),\n\t},\n\tmultiple: {\n\t\tvalue: '2',\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MODE_ITEM_MULTIPLE'),\n\t},\n\tsingle: {\n\t\tvalue: '1',\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MODE_ITEM_SINGLE'),\n\t},\n});\n\nexport function getModeByValue(value: string): Mode | null\n{\n\treturn Object.values(modeItems).find((item) => item.value === value) ?? null;\n}\n","import { Loc } from 'main.core';\n\nexport type MultipleLimit = {\n\tvalue: string;\n\ttitle: string;\n}\n\ntype MultipleLimits = Object<string, MultipleLimit>;\n\nexport const multipleLimits: MultipleLimits = Object.freeze({\n\tno: {\n\t\tvalue: 'N',\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_LIMIT_ITEM_NO'),\n\t},\n\tdate: {\n\t\tvalue: 'D',\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_LIMIT_ITEM_DATE'),\n\t},\n\ttimes: {\n\t\tvalue: 'T',\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_LIMIT_ITEM_TIMES'),\n\t},\n});\n\nexport function getMultipleLimitByValue(value: string): MultipleLimit | null\n{\n\treturn Object.values(multipleLimits).find((item) => item.value === value) ?? null;\n}\n","import { Loc } from 'main.core';\n\nexport type MultipleType = {\n\tvalue: number;\n\ttitle: string;\n}\n\ntype MultipleTypes = Object<string, MultipleType>;\n\nexport const multipleTypes: MultipleTypes = Object.freeze({\n\tday: {\n\t\tvalue: 1,\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_TYPE_ITEM_DAY'),\n\t},\n\tweek: {\n\t\tvalue: 2,\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_TYPE_ITEM_WEEK'),\n\t},\n\tmonth: {\n\t\tvalue: 3,\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_TYPE_ITEM_MONTH'),\n\t},\n\tyear: {\n\t\tvalue: 4,\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_TYPE_ITEM_YEAR'),\n\t},\n\tcustom: {\n\t\tvalue: 5,\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_TYPE_ITEM_CUSTOM'),\n\t},\n});\n\nexport function getMultipleTypeByValue(value: number): Period | null\n{\n\treturn Object.values(multipleTypes).find((item) => item.value === value) ?? null;\n}\n","export const offsetDateTypes: Object<string, number> = Object.freeze({\n\tset: 0,\n\tcalculated: 1,\n});\n","import { Loc } from 'main.core';\n\nexport type Period = {\n\tvalue: number;\n\ttitle: string;\n\ttitleGenitive?: string;\n\textended: boolean;\n}\n\ntype Periods = Object<string, Period>;\n\nexport const periods: Periods = Object.freeze({\n\tday: {\n\t\tvalue: 1,\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_PERIOD_ITEM_DAY'),\n\t\ttitleGenitive: Loc.getMessage('CRM_EE_RECURRING_MODE_SINGLE_FIELDS_PERIOD_DAY'),\n\t\textended: false,\n\t},\n\tweek: {\n\t\tvalue: 2,\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_PERIOD_ITEM_WEEK'),\n\t\ttitleGenitive: Loc.getMessage('CRM_EE_RECURRING_MODE_SINGLE_FIELDS_PERIOD_WEEK'),\n\t\textended: false,\n\t},\n\tmonth: {\n\t\tvalue: 3,\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_PERIOD_ITEM_MONTH'),\n\t\ttitleGenitive: Loc.getMessage('CRM_EE_RECURRING_MODE_SINGLE_FIELDS_PERIOD_MONTH'),\n\t\textended: false,\n\t},\n\tyear: {\n\t\tvalue: 4,\n\t\ttitle: Loc.getMessage('CRM_EE_RECURRING_PERIOD_ITEM_YEAR'),\n\t\textended: true,\n\t},\n});\n\nexport function getPeriods(withExtended: boolean = false): Periods\n{\n\tif (withExtended)\n\t{\n\t\treturn periods;\n\t}\n\n\tconst result = {};\n\n\tObject.keys(periods).forEach((periodName) => {\n\t\tif (periods[periodName].extended === false)\n\t\t{\n\t\t\tresult[periodName] = periods[periodName];\n\t\t}\n\t});\n\n\treturn Object.freeze(result);\n}\n\nexport function getPeriodByValue(value: number): Period | null\n{\n\treturn Object.values(periods).find((item) => item.value === value) ?? null;\n}","import { DatetimeConverter } from 'crm.timeline.tools';\nimport { DateTimeFormat } from 'main.date';\nimport { PopupMenu } from 'main.popup';\nimport { DatePicker } from 'ui.date-picker';\n\nexport function showPopupMenu(id: string, target: HTMLElement, menu: Array): void\n{\n\tPopupMenu.show(\n\t\tid,\n\t\ttarget,\n\t\tmenu,\n\t\t{\n\t\t\tangle: false,\n\t\t\twidth: target.offsetWidth + 'px',\n\t\t},\n\t);\n\n\tPopupMenu.currentItem.popupWindow.setWidth(BX.pos(target).width);\n}\n\nexport function destroyPopupMenu(id: string): void\n{\n\tPopupMenu.destroy(id);\n}\n\nexport function createDatePickerInstance(date: Number, callback: Function): DatePicker\n{\n\treturn new DatePicker({\n\t\tselectedDates: [new Date(date)],\n\t\tevents: {\n\t\t\tonSelectChange: (event) => {\n\t\t\t\tcallback(event);\n\t\t\t},\n\t\t},\n\t});\n}\n\nexport function getFormattedDate(date: Number): string\n{\n\treturn DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), date);\n}\n\nexport function resolveEntityTypeName(entityTypeId: number): string\n{\n\tif (BX.CrmEntityType.isDynamicTypeByTypeId(entityTypeId))\n\t{\n\t\treturn 'DYNAMIC';\n\t}\n\n\treturn (\n\t\tentityTypeId === BX.CrmEntityType.enumeration.dealrecurring\n\t\t\t? BX.CrmEntityType.names.deal\n\t\t\t: BX.CrmEntityType.resolveName(entityTypeId)\n\t);\n}\n","export const FieldTitle = {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-entity-editor-block-title ui-entity-widget-content-block-title-edit\">\n\t\t\t<label class=\"ui-entity-editor-block-title-text\">{{title}}</label>\n\t\t</div>\n\t`,\n};\n","export const HiddenInput = {\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: [String, Number],\n\t\t\trequired: true,\n\t\t},\n\t\tchangeCallback: {\n\t\t\ttype: Function,\n\t\t\tdefault: () => {},\n\t\t},\n\t},\n\n\twatch: {\n\t\tvalue(): void\n\t\t{\n\t\t\tvoid this.$nextTick(() => {\n\t\t\t\tthis.changeCallback(this.$refs.input);\n\t\t\t});\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<input ref=\"input\" :name=\"name\" :value=\"value\" type=\"hidden\">\n\t`,\n};\n","import { Loader as UiLoader } from 'ui.loader';\n\nconst LOADER_SIZE = 'xs';\nconst LOADER_TYPE = 'BULLET';\n\n// @vue/component\nexport const Loader = {\n\tmounted(): void\n\t{\n\t\tthis.loader = new UiLoader({\n\t\t\ttarget: this.$refs.loader,\n\t\t\ttype: LOADER_TYPE,\n\t\t\tsize: LOADER_SIZE,\n\t\t});\n\t\tthis.loader.render();\n\t\tthis.loader.show();\n\t},\n\n\tbeforeUnmount(): void\n\t{\n\t\tthis.loader.hide();\n\t\tthis.loader = null;\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-entity-widget-content-block-recurring-loader\" ref=\"loader\"></div>\n\t`,\n};\n","import { Tag, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog } from 'ui.entity-selector';\nimport { SidePanel } from 'ui.sidepanel';\nimport { FieldTitle } from '../common/field-title';\n\nconst DEFAULT_TAB_ID = 'default';\n\nexport const DocumentSelector = {\n\tprops: {\n\t\tdocumentId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdocuments: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tdocumentUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomponents: {\n\t\tFieldTitle,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentDocumentId: this.documentId,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tshowDocumentDialog(event: BaseEvent): void\n\t\t{\n\t\t\tconst dialog = this.getDocumentDialog();\n\n\t\t\tdialog.setTargetNode(event.target);\n\t\t\tdialog.show();\n\t\t},\n\n\t\tgetDocumentDialog(): Dialog\n\t\t{\n\t\t\tif (!this.documentDialog)\n\t\t\t{\n\t\t\t\tconst items = this.getItems();\n\n\t\t\t\tthis.documentDialog = new Dialog({\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\tdropdownMode: true,\n\t\t\t\t\tshowAvatars: true,\n\t\t\t\t\tenableSearch: items.length > 8,\n\t\t\t\t\twidth: 500,\n\t\t\t\t\theight: 300,\n\t\t\t\t\tzIndex: 2500,\n\t\t\t\t\titems,\n\t\t\t\t\ttabs: this.getTabs(),\n\t\t\t\t\tfooter: this.getFooter(),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'Item:onSelect': this.onSelectDocument,\n\t\t\t\t\t\t'Item:onDeselect': this.onDeselectDocument,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.documentDialog;\n\t\t},\n\n\t\tonSelectDocument(event: BaseEvent): void\n\t\t{\n\t\t\tconst { item: { id } } = event.getData();\n\t\t\tthis.currentDocumentId = id;\n\n\t\t\tthis.emitChanges();\n\t\t},\n\n\t\tonDeselectDocument(): void\n\t\t{\n\t\t\tthis.currentDocumentId = null;\n\n\t\t\tthis.emitChanges();\n\t\t},\n\n\t\temitChanges(): void\n\t\t{\n\t\t\tvoid this.$nextTick(() => {\n\t\t\t\tthis.$emit('onChange', this.currentDocumentId);\n\t\t\t});\n\t\t},\n\n\t\tgetCurrentDocument(): ?Object\n\t\t{\n\t\t\tconst document = this.documents.find((item) => item.id === this.currentDocumentId);\n\n\t\t\treturn Type.isObject(document) ? document : null;\n\t\t},\n\n\t\tgetTabs(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: DEFAULT_TAB_ID,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_DOCUMENT_TAB_TITLE_SMART_INVOICE'),\n\t\t\t\t\tstub: true,\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_EMPTY_STATE_DOCUMENT_TITLE_SMART_INVOICE'),\n\t\t\t\t\t\tsubtitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_EMPTY_STATE_DOCUMENT_SUBTITLE_SMART_INVOICE'),\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\n\t\tgetItems(): Array<Object>\n\t\t{\n\t\t\tconst items = [];\n\t\t\tthis.documents.forEach((template) => {\n\t\t\t\titems.push(this.createDialogItem(template));\n\t\t\t});\n\n\t\t\treturn items;\n\t\t},\n\n\t\tcreateDialogItem(template: Object): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: template.id,\n\t\t\t\ttitle: template.title,\n\t\t\t\tentityId: DEFAULT_TAB_ID,\n\t\t\t\ttabs: DEFAULT_TAB_ID,\n\t\t\t};\n\t\t},\n\n\t\tgetFooter(): HTMLElement\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-entity-editor-recurring-template-selector-footer\">\n\t\t\t\t\t<span class=\"ui-selector-footer-link ui-selector-footer-link-add\" onclick=\"${this.createNewDocumentHandler}\">\n\t\t\t\t\t\t${this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_DOCUMENT_ADD')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t},\n\n\t\tcreateNewDocumentHandler(): void\n\t\t{\n\t\t\tthis.showDocumentsSidePanel(this.documentUrl);\n\t\t},\n\n\t\tshowDocumentsSidePanel(url: string): void\n\t\t{\n\t\t\tSidePanel.Instance.open(url, {\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 1080,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: async () => {\n\t\t\t\t\t\tthis.$emit('onReInit');\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t},\n\n\twatch: {\n\t\tdocumentId(newValue: number): void\n\t\t{\n\t\t\tif (Number(this.documentId) !== Number(this.currentDocumentId))\n\t\t\t{\n\t\t\t\tthis.currentDocumentId = Number(newValue);\n\t\t\t}\n\t\t},\n\t\tdocuments: {\n\t\t\thandler(): void\n\t\t\t{\n\t\t\t\tconst dialog = this.getDocumentDialog();\n\t\t\t\tdialog.removeItems();\n\n\t\t\t\tthis.documents.forEach((template) => {\n\t\t\t\t\tdialog.addItem(this.createDialogItem(template));\n\t\t\t\t});\n\t\t\t},\n\t\t\tdeep: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tdocumentTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_DOCUMENT_FIELD_SMART_INVOICE');\n\t\t},\n\t\tdocumentName(): ?string\n\t\t{\n\t\t\tconst document = this.getCurrentDocument();\n\n\t\t\treturn document ? document.title : null;\n\t\t},\n\t\tplaceholder(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_DOCUMENT_FIELD_PLACEHOLDER');\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t<div class=\"ui-entity-editor-block-title ui-entity-widget-content-block-title-edit\">\n\t\t\t\t<label for=\"\" class=\"ui-entity-editor-block-title-text\">\n\t\t\t\t\t{{documentTitle}}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\"\n\t\t\t\t@click=\"showDocumentDialog\"\n\t\t\t>\n\t\t\t\t<div v-if=\"documentName\" class=\"ui-ctl-element\">{{documentName}}</div>\n\t\t\t\t<div v-else class=\"ui-ctl-element placeholder\" :data-placeholder=\"placeholder\"></div>\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Tag, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog } from 'ui.entity-selector';\nimport { ProviderShowcase } from 'ui.mail.provider-showcase';\nimport { FieldTitle } from '../common/field-title';\n\nconst DEFAULT_TAB_ID = 'default';\n\nexport const SenderSelector = {\n\tprops: {\n\t\tsenderId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tsenders: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomponents: {\n\t\tFieldTitle,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentSenderId: this.senderId,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tshowSenderDialog(event: BaseEvent): void\n\t\t{\n\t\t\tconst dialog = this.getSenderDialog();\n\n\t\t\tdialog.setTargetNode(event.target);\n\t\t\tdialog.show();\n\t\t},\n\n\t\tgetSenderDialog(): Dialog\n\t\t{\n\t\t\tif (!this.senderDialog)\n\t\t\t{\n\t\t\t\tconst items = this.getItems();\n\n\t\t\t\tthis.senderDialog = new Dialog({\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\tdropdownMode: true,\n\t\t\t\t\tshowAvatars: true,\n\t\t\t\t\tenableSearch: items.length > 8,\n\t\t\t\t\twidth: 500,\n\t\t\t\t\theight: 300,\n\t\t\t\t\tzIndex: 2500,\n\t\t\t\t\ttabs: this.getTabs(),\n\t\t\t\t\titems,\n\t\t\t\t\tselectedItems: this.getSelectedItems(),\n\t\t\t\t\tfooter: this.getFooter(),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'Item:onSelect': this.onSelectSender,\n\t\t\t\t\t\t'Item:onDeselect': this.onDeselectSender,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.senderDialog;\n\t\t},\n\n\t\tgetTabs(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: DEFAULT_TAB_ID,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_EMPTY_STATE_SENDER_TITLE'),\n\t\t\t\t\tstub: true,\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_EMPTY_STATE_SENDER_TITLE'),\n\t\t\t\t\t\tsubtitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_EMPTY_STATE_SENDER_SUBTITLE_SMART_INVOICE'),\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\n\t\tgetItems(): Array<Object>\n\t\t{\n\t\t\tconst items = [];\n\t\t\tthis.senders.forEach((sender) => {\n\t\t\t\titems.push(this.createDialogItem(sender));\n\t\t\t});\n\n\t\t\treturn items;\n\t\t},\n\n\t\tgetSelectedItems(): Array<Object>\n\t\t{\n\t\t\tconst items = [];\n\t\t\tthis.senders.forEach((sender) => {\n\t\t\t\tif (Number(this.senderId) === Number(sender.id))\n\t\t\t\t{\n\t\t\t\t\titems.push(this.createDialogItem(sender));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn items;\n\t\t},\n\n\t\tcreateDialogItem(sender: Object): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: sender.id,\n\t\t\t\ttitle: sender.email,\n\t\t\t\tsubtitle: sender.name,\n\t\t\t\tentityId: DEFAULT_TAB_ID,\n\t\t\t\ttabs: DEFAULT_TAB_ID,\n\t\t\t};\n\t\t},\n\n\t\tgetFooter(): HTMLElement\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-entity-editor-recurring-template-selector-footer\">\n\t\t\t\t\t<span class=\"ui-selector-footer-link ui-selector-footer-link-add\" onclick=\"${this.createNewSenderHandler}\">\n\t\t\t\t\t\t${this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_NEW_SENDER')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t},\n\n\t\tcreateNewSenderHandler(): void\n\t\t{\n\t\t\tProviderShowcase.openSlider({\n\t\t\t\tsetSenderCallback: (senderId: number | string, senderName: string, senderEmail: string) => {\n\t\t\t\t\tthis.$emit('onReInit');\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\n\t\tonSelectSender(event: BaseEvent): void\n\t\t{\n\t\t\tconst { item: { id } } = event.getData();\n\t\t\tthis.currentSenderId = id;\n\n\t\t\tthis.emitChanges();\n\t\t},\n\n\t\tonDeselectSender(): void\n\t\t{\n\t\t\tthis.currentSenderId = null;\n\n\t\t\tthis.emitChanges();\n\t\t},\n\n\t\temitChanges(): void\n\t\t{\n\t\t\tthis.$emit('onChange', this.currentSenderId);\n\t\t},\n\n\t\tgetCurrentSender(): ?Object\n\t\t{\n\t\t\tconst sender = this.senders.find((item) => Number(item.id) === Number(this.senderId));\n\n\t\t\treturn Type.isObject(sender) ? sender : null;\n\t\t},\n\t},\n\n\twatch: {\n\t\tsenderId(newValue): void\n\t\t{\n\t\t\tif (Number(this.senderId) !== Number((this.currentSenderId)))\n\t\t\t{\n\t\t\t\tthis.currentSenderId = Number(newValue);\n\t\t\t}\n\t\t},\n\t\tsenders: {\n\t\t\thandler(): void\n\t\t\t{\n\t\t\t\tconst senderDialog = this.getSenderDialog();\n\t\t\t\tsenderDialog.removeItems();\n\n\t\t\t\tthis.senders.forEach((sender) => {\n\t\t\t\t\tsenderDialog.addItem(this.createDialogItem(sender));\n\t\t\t\t});\n\n\t\t\t\t// const sender = this.getCurrentSender();\n\t\t\t\t// this.$refs.sender.innerText = sender ? `${sender.name} (${sender.email})` : '';\n\t\t\t},\n\t\t\tdeep: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tsenderTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_SENDER_FIELD');\n\t\t},\n\t\tsenderName(): ?string\n\t\t{\n\t\t\tconst sender = this.getCurrentSender();\n\n\t\t\treturn sender ? sender.email : null;\n\t\t},\n\t\tplaceholder(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_SENDER_FIELD_PLACEHOLDER');\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t<div class=\"ui-entity-editor-block-title ui-entity-widget-content-block-title-edit\">\n\t\t\t\t<label for=\"\" class=\"ui-entity-editor-block-title-text\">\n\t\t\t\t\t{{senderTitle}}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\"\n\t\t\t\t@click=\"showSenderDialog\"\n\t\t\t>\n\t\t\t\t<div v-if=\"senderName\" class=\"ui-ctl-element\">{{senderName}}</div>\n\t\t\t\t<div v-else class=\"ui-ctl-element placeholder\" :data-placeholder=\"placeholder\"></div>\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Tag, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog } from 'ui.entity-selector';\nimport { SidePanel } from 'ui.sidepanel';\nimport { FieldTitle } from '../common/field-title';\n\nconst DEFAULT_TAB_ID = 'default';\n\nexport const TemplateSelector = {\n\tprops: {\n\t\tentityTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttemplateId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttemplates: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomponents: {\n\t\tFieldTitle,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentTemplateId: this.templateId,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tshowTemplateDialog(event: BaseEvent): void\n\t\t{\n\t\t\tconst dialog = this.getTemplateDialog();\n\n\t\t\tdialog.setTargetNode(event.target);\n\t\t\tdialog.show();\n\t\t},\n\n\t\tgetTemplateDialog(): Dialog\n\t\t{\n\t\t\tif (!this.templateDialog)\n\t\t\t{\n\t\t\t\tconst items = this.getItems();\n\n\t\t\t\tthis.templateDialog = new Dialog({\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\tdropdownMode: true,\n\t\t\t\t\tshowAvatars: true,\n\t\t\t\t\tenableSearch: items.length > 8,\n\t\t\t\t\twidth: 500,\n\t\t\t\t\theight: 300,\n\t\t\t\t\tzIndex: 2500,\n\t\t\t\t\ttabs: this.getTabs(),\n\t\t\t\t\titems,\n\t\t\t\t\tselectedItems: this.getSelectedItems(),\n\t\t\t\t\tfooter: this.getFooter(),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'Item:onSelect': this.onSelectTemplate,\n\t\t\t\t\t\t'Item:onDeselect': this.onDeselectTemplate,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.templateDialog;\n\t\t},\n\n\t\tgetTabs(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: DEFAULT_TAB_ID,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_EMPTY_STATE_TEMPLATE_TITLE'),\n\t\t\t\t\tstub: true,\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_EMPTY_STATE_TEMPLATE_TITLE'),\n\t\t\t\t\t\tsubtitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_EMPTY_STATE_TEMPLATE_SUBTITLE_SMART_INVOICE'),\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\n\t\tgetItems(): Array<Object>\n\t\t{\n\t\t\tconst items = [];\n\t\t\tthis.templates.forEach((template) => {\n\t\t\t\titems.push(this.createDialogItem(template));\n\t\t\t});\n\n\t\t\treturn items;\n\t\t},\n\n\t\tgetSelectedItems(): Array<Object>\n\t\t{\n\t\t\tconst items = [];\n\t\t\tthis.templates.forEach((template) => {\n\t\t\t\tif (Number(this.templateId) === Number(template.id))\n\t\t\t\t{\n\t\t\t\t\titems.push(this.createDialogItem(template));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn items;\n\t\t},\n\n\t\tcreateDialogItem(template: Object): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: template.id,\n\t\t\t\ttitle: template.title,\n\t\t\t\tentityId: DEFAULT_TAB_ID,\n\t\t\t\ttabs: DEFAULT_TAB_ID,\n\t\t\t};\n\t\t},\n\n\t\tgetFooter(): HTMLElement\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-entity-editor-recurring-template-selector-footer\">\n\t\t\t\t\t<span class=\"ui-selector-footer-link ui-selector-footer-link-add\" onclick=\"${this.createNewEmailTemplateHandler}\">\n\t\t\t\t\t\t${this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_NEW_TEMPLATE')}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"ui-selector-footer-link\" onclick=\"${this.showEmailTemplatesList}\">\n\t\t\t\t\t\t${this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_SHOW_TEMPLATES_LIST')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t},\n\n\t\tcreateNewEmailTemplateHandler(): void\n\t\t{\n\t\t\tlet url = '/crm/configs/mailtemplate/add/';\n\n\t\t\tconst urlParams = {\n\t\t\t\tENTITY_TYPE_ID: this.entityTypeId,\n\t\t\t};\n\n\t\t\turl = BX.util.add_url_param(url, urlParams);\n\n\t\t\tthis.showEmailTemplatesSidePanel(url, true);\n\t\t},\n\n\t\tshowEmailTemplatesList(): void\n\t\t{\n\t\t\tconst url = '/crm/configs/mailtemplate/';\n\n\t\t\tthis.showEmailTemplatesSidePanel(url, false);\n\t\t},\n\n\t\tshowEmailTemplatesSidePanel(url: string, isReInit: boolean): void\n\t\t{\n\t\t\tSidePanel.Instance.open(url, {\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 1080,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: async () => {\n\t\t\t\t\t\tif (isReInit)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('onReInit');\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\n\t\tonSelectTemplate(event: BaseEvent): void\n\t\t{\n\t\t\tconst { item: { id } } = event.getData();\n\t\t\tthis.currentTemplateId = id;\n\n\t\t\tthis.emitChanges();\n\t\t},\n\n\t\tonDeselectTemplate(): void\n\t\t{\n\t\t\tthis.currentTemplateId = null;\n\n\t\t\tthis.emitChanges();\n\t\t},\n\n\t\temitChanges(): void\n\t\t{\n\t\t\tvoid this.$nextTick(() => {\n\t\t\t\tthis.$emit('onChange', this.currentTemplateId);\n\t\t\t});\n\t\t},\n\n\t\tgetCurrentTemplate(): ?Object\n\t\t{\n\t\t\tconst template = this.templates.find((item) => Number(item.id) === Number(this.currentTemplateId));\n\n\t\t\treturn Type.isObject(template) ? template : null;\n\t\t},\n\t},\n\n\twatch: {\n\t\ttemplateId(newValue): void\n\t\t{\n\t\t\tif (Number(this.templateId) !== Number(this.currentTemplateId))\n\t\t\t{\n\t\t\t\tthis.currentTemplateId = Number(newValue);\n\t\t\t}\n\t\t},\n\t\ttemplates: {\n\t\t\thandler(): void\n\t\t\t{\n\t\t\t\tconst templateDialog = this.getTemplateDialog();\n\t\t\t\ttemplateDialog.removeItems();\n\n\t\t\t\tthis.templates.forEach((template) => {\n\t\t\t\t\ttemplateDialog.addItem(this.createDialogItem(template));\n\t\t\t\t});\n\n\t\t\t\t// const template = this.getCurrentTemplate();\n\t\t\t\t// this.$refs.template.innerText = template ? template.title : '';\n\t\t\t},\n\t\t\tdeep: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\ttemplateTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_TEMPLATE_FIELD');\n\t\t},\n\t\ttemplateName(): ?string\n\t\t{\n\t\t\tconst template = this.getCurrentTemplate();\n\n\t\t\treturn template ? template.title : null;\n\t\t},\n\t\tplaceholder(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_TEMPLATE_FIELD_PLACEHOLDER');\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t<div class=\"ui-entity-editor-block-title ui-entity-widget-content-block-title-edit\">\n\t\t\t\t<label class=\"ui-entity-editor-block-title-text\">\n\t\t\t\t\t{{templateTitle}}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\"\n\t\t\t\t@click=\"showTemplateDialog\"\n\t\t\t>\n\t\t\t\t<div v-if=\"templateName\" class=\"ui-ctl-element\">{{templateName}}</div>\n\t\t\t\t<div v-else class=\"ui-ctl-element placeholder\" :data-placeholder=\"placeholder\"></div>\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ajax, Dom, Tag } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog, TagSelector } from 'ui.entity-selector';\nimport { FieldTitle } from '../common/field-title';\n\nconst DEFAULT_TAB_ID = 'default';\n\nexport const ToEmailSelector = {\n\tprops: {\n\t\tentityId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tentityTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tcommunications: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: [],\n\t\t},\n\t\temailIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomponents: {\n\t\tFieldTitle,\n\t},\n\n\tdata(): Object\n\t{\n\t\tconst preparedEmailIds = this.emailIds\n\t\t\t.filter((emailId) => emailId > 0)\n\t\t\t.map((emailId) => Number(emailId))\n\t\t;\n\n\t\treturn {\n\t\t\tcurrentEmailIds: new Set(preparedEmailIds),\n\t\t\tcurrentCommunications: this.communications,\n\t\t};\n\t},\n\n\tmounted(): any\n\t{\n\t\tthis.initToEmailTagSelector();\n\t},\n\n\tmethods: {\n\t\tinitToEmailTagSelector()\n\t\t{\n\t\t\tif (!this.toEmailTagSelector)\n\t\t\t{\n\t\t\t\tconst tagSelectorConfig = {\n\t\t\t\t\tmultiple: true,\n\t\t\t\t\tdialogOptions: {\n\t\t\t\t\t\twidth: 400,\n\t\t\t\t\t\theight: 300,\n\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t\tdropdownMode: true,\n\t\t\t\t\t\tshowAvatars: true,\n\t\t\t\t\t\tcompactView: false,\n\t\t\t\t\t\ttabs: this.getTabs(),\n\t\t\t\t\t\titems: this.getItems(),\n\t\t\t\t\t\tselectedItems: this.getSelectedItems(),\n\t\t\t\t\t\tfooter: this.entityId > 0 ? this.getFooter() : null,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t'Item:onSelect': this.onSelectEmail,\n\t\t\t\t\t\t\t'Item:onDeselect': this.onDeselectEmail,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tthis.toEmailTagSelector = new TagSelector(tagSelectorConfig);\n\t\t\t\tthis.toEmailTagSelector.renderTo(this.$refs.toEmailContainer);\n\t\t\t}\n\t\t},\n\n\t\tgetTabs(): Array<Object>\n\t\t{\n\t\t\tlet subtitle = 'CRM_EE_RECURRING_EMAIL_EMPTY_STATE_TO_EMAIL_SUBTITLE_SMART_INVOICE';\n\t\t\tif (this.entityId <= 0)\n\t\t\t{\n\t\t\t\tsubtitle = `${subtitle}_NEW`;\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: DEFAULT_TAB_ID,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_TO_EMAIL_TAB_TITLE'),\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_EMPTY_STATE_TO_EMAIL_TITLE'),\n\t\t\t\t\t\tsubtitle: this.$Bitrix.Loc.getMessage(subtitle),\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\n\t\tgetItems(): Array<Object>\n\t\t{\n\t\t\tconst items = [];\n\t\t\tthis.currentCommunications.forEach((communication) => {\n\t\t\t\tcommunication.emails.forEach((email) => {\n\t\t\t\t\titems.push(this.createDialogItem(email, communication));\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn items;\n\t\t},\n\n\t\tgetSelectedItems(): Array<Object>\n\t\t{\n\t\t\tconst selectedItems = [];\n\n\t\t\tthis.currentEmailIds.forEach((emailId) => {\n\t\t\t\tconst email = this.getEmailById(emailId);\n\t\t\t\tif (email)\n\t\t\t\t{\n\t\t\t\t\tselectedItems.push(this.createDialogItem(email));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn selectedItems;\n\t\t},\n\n\t\tgetEmailById(emailId: string): ?Object\n\t\t{\n\t\t\tconst emails = this.currentCommunications.flatMap((communication) => {\n\t\t\t\treturn communication.emails.map((email) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...email,\n\t\t\t\t\t\tcaption: communication.caption,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst email = emails.find((item) => Number(item.id) === Number(emailId));\n\n\t\t\treturn email ?? null;\n\t\t},\n\n\t\tcreateDialogItem(email: Object, communication: ?Object = null): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: email.id,\n\t\t\t\ttitle: email.value,\n\t\t\t\tsubtitle: communication ? this.getEmailSubtitle(communication, email) : '',\n\t\t\t\tentityId: DEFAULT_TAB_ID,\n\t\t\t\ttabs: DEFAULT_TAB_ID,\n\t\t\t};\n\t\t},\n\n\t\tgetEmailSubtitle(item: Object, email: Object): string\n\t\t{\n\t\t\treturn `${item.caption} (${email.typeLabel})`;\n\t\t},\n\n\t\tgetFooter(): HTMLElement\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-entity-editor-recurring-template-selector-footer\">\n\t\t\t\t\t<span class=\"ui-selector-footer-link ui-selector-footer-link-add\" onclick=\"${this.addClientHandler.bind(this)}\">\n\t\t\t\t\t\t${this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_BIND_CLIENT')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t},\n\n\t\tonSelectEmail(event: BaseEvent): void\n\t\t{\n\t\t\tconst { item: { id } } = event.getData();\n\n\t\t\tthis.currentEmailIds.add(id);\n\n\t\t\tthis.emitChanges();\n\t\t},\n\n\t\tonDeselectEmail(event: BaseEvent): void\n\t\t{\n\t\t\tconst { item: { id } } = event.getData();\n\n\t\t\tthis.currentEmailIds.delete(id);\n\n\t\t\tthis.emitChanges();\n\t\t},\n\n\t\temitChanges(): void\n\t\t{\n\t\t\tvoid this.$nextTick(() => {\n\t\t\t\tthis.$emit('onChange', [...this.currentEmailIds.values()]);\n\t\t\t});\n\t\t},\n\n\t\taddClientHandler(event: BaseEvent): void\n\t\t{\n\t\t\tconst id = 'client-selector-dialog';\n\t\t\tconst entityTypeId = this.entityTypeId;\n\t\t\tconst context = `CRM_RECURRING-${entityTypeId}`;\n\n\t\t\tif (!this.userSelectorDialog)\n\t\t\t{\n\t\t\t\tthis.userSelectorDialog = new Dialog({\n\t\t\t\t\tid,\n\t\t\t\t\tcontext,\n\t\t\t\t\ttargetNode: event.target,\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\tdropdownMode: false,\n\t\t\t\t\tshowAvatars: true,\n\t\t\t\t\tenableSearch: true,\n\t\t\t\t\twidth: 450,\n\t\t\t\t\tzIndex: 2500,\n\t\t\t\t\tentities: this.getClientSelectorEntities(),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'Item:onSelect': this.onSelectClient,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.userSelectorDialog.isOpen())\n\t\t\t{\n\t\t\t\tthis.userSelectorDialog.hide();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.userSelectorDialog.show();\n\t\t\t}\n\t\t},\n\n\t\tgetClientSelectorEntities(): Array\n\t\t{\n\t\t\tconst contact = {\n\t\t\t\tid: 'contact',\n\t\t\t\tdynamicLoad: true,\n\t\t\t\tdynamicSearch: true,\n\t\t\t\toptions: {\n\t\t\t\t\tshowTab: true,\n\t\t\t\t\tshowPhones: true,\n\t\t\t\t\tshowMails: true,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst company = {\n\t\t\t\tid: 'company',\n\t\t\t\tdynamicLoad: true,\n\t\t\t\tdynamicSearch: true,\n\t\t\t\toptions: {\n\t\t\t\t\texcludeMyCompany: true,\n\t\t\t\t\tshowTab: true,\n\t\t\t\t\tshowPhones: true,\n\t\t\t\t\tshowMails: true,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn [contact, company];\n\t\t},\n\n\t\tasync onSelectClient(event: BaseEvent): Promise<void>\n\t\t{\n\t\t\tconst { item } = event.getData();\n\n\t\t\tthis.selectedClient = {\n\t\t\t\tentityId: item.id,\n\t\t\t\tentityTypeId: BX.CrmEntityType.resolveId(item.entityId),\n\t\t\t};\n\n\t\t\tconst isBound = await this.bindClient();\n\t\t\tif (isBound)\n\t\t\t{\n\t\t\t\tBX.Crm.EntityEditor.getDefault().reload();\n\n\t\t\t\tconst id = this.currentCommunications[0]?.emails[0]?.id;\n\t\t\t\tif (id)\n\t\t\t\t{\n\t\t\t\t\tthis.currentEmailIds.add(id);\n\t\t\t\t\tthis.emitChanges();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tasync bindClient(): Promise\n\t\t{\n\t\t\tconst { entityId: clientId, entityTypeId: clientTypeId } = this.selectedClient;\n\n\t\t\tconst ajaxParams = {\n\t\t\t\tentityId: this.entityId,\n\t\t\t\tentityTypeId: this.entityTypeId,\n\t\t\t\tclientId,\n\t\t\t\tclientTypeId,\n\t\t\t};\n\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tajax.runAction('crm.recurring.mail.bindClient', { data: ajaxParams })\n\t\t\t\t\t.then(({ data }) => {\n\t\t\t\t\t\tif (!data)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst { communications } = data;\n\t\t\t\t\t\tthis.currentCommunications = communications;\n\n\t\t\t\t\t\tthis.currentCommunications.forEach((communication) => {\n\t\t\t\t\t\t\tcommunication.emails.forEach((email) => {\n\t\t\t\t\t\t\t\tthis.toEmailTagSelector.addTag(this.createDialogItem(email, communication));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.$emit('onReInit');\n\t\t\t\t\t\tthis.emitChanges();\n\n\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((data) => {\n\t\t\t\t\t\tthis.showNotify(this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_ERROR'));\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t});\n\t\t},\n\n\t\t// eslint-disable-next-line class-methods-use-this\n\t\tshowNotify(content: string): void\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({ content });\n\t\t},\n\t},\n\n\twatch: {\n\t\temailIds(emailIds): void\n\t\t{\n\t\t\tthis.currentEmailIds = new Set(emailIds ?? []);\n\t\t},\n\t\tcommunications: {\n\t\t\thandler(data): void\n\t\t\t{\n\t\t\t\tthis.currentCommunications = data;\n\t\t\t\tthis.toEmailTagSelector = null;\n\t\t\t\tDom.clean(this.$refs.toEmailContainer);\n\t\t\t\tthis.initToEmailTagSelector();\n\t\t\t},\n\t\t\tdeep: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tcommunicationsTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_COMMUNICATIONS_FIELD');\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t<div class=\"ui-entity-editor-block-title ui-entity-widget-content-block-title-edit\">\n\t\t\t\t<label for=\"\" class=\"ui-entity-editor-block-title-text\">\n\t\t\t\t\t{{communicationsTitle}}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div ref=\"toEmailContainer\"></div>\n\t\t</div>\n\t`,\n};\n","import { ajax as Ajax } from 'main.core';\nimport { FieldTitle } from '../common/field-title';\nimport { HiddenInput } from '../common/hidden-input';\nimport { Loader } from '../common/loader';\nimport { DocumentSelector } from './document-selector';\nimport { SenderSelector } from './sender-selector';\nimport { TemplateSelector } from './template-selector';\nimport { ToEmailSelector } from './to-email-selector';\n\nexport const EmailFields = {\n\tprops: {\n\t\tentityTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tentityId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t\tchangeCallback: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomponents: {\n\t\tFieldTitle,\n\t\tHiddenInput,\n\t\tLoader,\n\t\tTemplateSelector,\n\t\tDocumentSelector,\n\t\tSenderSelector,\n\t\tToEmailSelector,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisFetchedConfig: false,\n\t\t\ttemplateId: this.data.templateId ?? null,\n\t\t\tdocumentId: this.data.documentId ?? null,\n\t\t\tsenderId: this.data.senderId ?? null,\n\t\t\tisEnabled: this.data.isEnabled ?? false,\n\t\t\temailIds: this.data.emailIds ?? [],\n\t\t\tconfig: null,\n\t\t};\n\t},\n\n\tmounted(): any\n\t{\n\t\tif (this.isEnabled && !this.isFetchedConfig)\n\t\t{\n\t\t\tthis.updateConfig();\n\t\t}\n\t},\n\n\tmethods: {\n\t\tasync setTemplateId(templateId: number): void\n\t\t{\n\t\t\tif (this.templateId !== templateId)\n\t\t\t{\n\t\t\t\tthis.templateId = templateId;\n\t\t\t}\n\t\t},\n\n\t\tasync setDocumentId(documentId: number): void\n\t\t{\n\t\t\tif (this.documentId !== documentId)\n\t\t\t{\n\t\t\t\tthis.documentId = documentId;\n\t\t\t}\n\t\t},\n\n\t\tasync setSenderId(senderId: number): void\n\t\t{\n\t\t\tif (this.senderId !== senderId)\n\t\t\t{\n\t\t\t\tthis.senderId = senderId;\n\t\t\t}\n\t\t},\n\n\t\tasync setEmailIds(emailIds: Array<number>): void\n\t\t{\n\t\t\tconst isEqualsArrays = (a, b) => {\n\t\t\t\tif (a.length !== b.length)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst sortedA = [...a].sort();\n\t\t\t\tconst sortedB = [...b].sort();\n\n\t\t\t\treturn sortedA.every((value, index) => value === sortedB[index]);\n\t\t\t};\n\n\t\t\tif (!isEqualsArrays([...this.emailIds], emailIds))\n\t\t\t{\n\t\t\t\tthis.emailIds = emailIds;\n\n\t\t\t\t// change-callback on HiddenInput doesn't work for array values\n\t\t\t\tthis.changeCallback({\n\t\t\t\t\tname: 'RECURRING[EMAIL_IDS]',\n\t\t\t\t\tvalue: [...this.emailIds],\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tasync updateConfig(): void\n\t\t{\n\t\t\tthis.config = await this.fetchConfig();\n\t\t},\n\n\t\tasync fetchConfig(): Object\n\t\t{\n\t\t\tconst ajaxParameters = {\n\t\t\t\tentityTypeId: this.entityTypeId,\n\t\t\t\tentityId: this.entityId,\n\t\t\t};\n\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tAjax\n\t\t\t\t\t.runAction('crm.recurring.mail.getConfig', { data: ajaxParameters })\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.isFetchedConfig = true;\n\n\t\t\t\t\t\tconst data = response.data;\n\t\t\t\t\t\tif (this.templateId === null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.templateId = data.templates[0]?.id ?? null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tthis.showNotify(this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_ERROR'));\n\n\t\t\t\t\t\tthis.isFetchedConfig = true;\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t});\n\t\t},\n\n\t\t// eslint-disable-next-line class-methods-use-this\n\t\tshowNotify(content: string): void\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({ content });\n\t\t},\n\n\t\tfocus(): void\n\t\t{\n\t\t\tthis.$refs.isEnabledTemplate.focus();\n\t\t},\n\n\t\t//@todo need?\n\t\tgetData(): Object\n\t\t{\n\t\t\tconst emails = this.toEmailTagSelector?.getTags();\n\t\t\tconst emailIds = emails ? emails.map((item) => item.id) : [];\n\n\t\t\treturn {\n\t\t\t\tisEnabled: this.isEnabled,\n\t\t\t\ttemplateId: this.templateId,\n\t\t\t\tdocumentId: this.documentId,\n\t\t\t\tsenderId: this.senderId,\n\t\t\t\temailIds,\n\t\t\t};\n\t\t},\n\t},\n\n\twatch: {\n\t\tasync isEnabled(isEnabled: boolean): void\n\t\t{\n\t\t\tif (!this.isFetchedConfig && isEnabled)\n\t\t\t{\n\t\t\t\tthis.config = await this.fetchConfig();\n\t\t\t}\n\t\t},\n\t},\n\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_TITLE_SMART_INVOICE');\n\t\t},\n\t\tcontainerClassList(): Array<string>\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-entity-widget-content-block-inner',\n\t\t\t\t'crm-entity-widget-content-block-colums-input',\n\t\t\t\t'crm-entity-widget-content-block-recurring-email-section-container',\n\t\t\t];\n\t\t},\n\t\tfieldsBlockClassList(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-recurring-mail-fields-container': true,\n\t\t\t\t'--disabled': !this.isEnabled,\n\t\t\t};\n\t\t},\n\t\tcheckboxLabelClassList(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-ctl': true,\n\t\t\t\t'ui-ctl-w100': true,\n\t\t\t\t'ui-ctl-checkbox': true,\n\t\t\t\t'--checked': this.isEnabled,\n\t\t\t};\n\t\t},\n\t\tisEnabledTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_EMAIL_SECTION_IS_ENABLED');\n\t\t},\n\t\tformattedIsEnabled(): string\n\t\t{\n\t\t\treturn this.isEnabled ? 'Y' : 'N';\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t<FieldTitle :title=\"title\" />\n\t\t\t<div :class=\"containerClassList\">\n\t\t\t\t<label :class=\"checkboxLabelClassList\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\tv-model=\"isEnabled\"\n\t\t\t\t\t\tref=\"isEnabledTemplate\"\n\t\t\t\t\t\tvalue=\"Y\"\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"ui-ctl-label-text\">{{isEnabledTitle}}</span>\n\t\t\t\t</label>\n\n\t\t\t\t<Loader v-if=\"isEnabled && !isFetchedConfig\" />\n\t\t\t\t\n\t\t\t\t<div v-if=\"isEnabled && isFetchedConfig\" :class=\"fieldsBlockClassList\">\n\t\t\t\t\t\n\t\t\t\t\t<TemplateSelector\n\t\t\t\t\t\tv-if=\"config\"\n\t\t\t\t\t\t:entityTypeId=\"entityTypeId\"\n\t\t\t\t\t\t:templateId=\"Number(templateId)\"\n\t\t\t\t\t\t:templates=\"config.templates\"\n\t\t\t\t\t\t@onChange=\"setTemplateId\"\n\t\t\t\t\t\t@onReInit=\"updateConfig\"\n\t\t\t\t\t/>\n\t\t\t\t\t\n\t\t\t\t\t<DocumentSelector\n\t\t\t\t\t\tv-if=\"config\"\n\t\t\t\t\t\t:documentId=\"Number(documentId)\"\n\t\t\t\t\t\t:documents=\"config.documents\"\n\t\t\t\t\t\t:documentUrl=\"config.documentUrl\"\n\t\t\t\t\t\t@onChange=\"setDocumentId\"\n\t\t\t\t\t\t@onReInit=\"updateConfig\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<SenderSelector\n\t\t\t\t\t\tv-if=\"config\"\n\t\t\t\t\t\t:senderId=\"Number(senderId)\"\n\t\t\t\t\t\t:senders=\"config.senders\"\n\t\t\t\t\t\t@onChange=\"setSenderId\"\n\t\t\t\t\t\t@onReInit=\"updateConfig\"\n\t\t\t\t\t/>\n\t\t\t\t\t\n\t\t\t\t\t<ToEmailSelector\n\t\t\t\t\t\tv-if=\"config\"\n\t\t\t\t\t\t:entityId=\"entityId\"\n\t\t\t\t\t\t:entityTypeId=\"entityTypeId\"\n\t\t\t\t\t\t:communications=\"config.communications\"\n\t\t\t\t\t\t:emailIds=\"emailIds\"\n\t\t\t\t\t\t@onChange=\"setEmailIds\"\n\t\t\t\t\t\t@onReInit=\"updateConfig\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<HiddenInput :value=\"templateId\" name=\"RECURRING[EMAIL_TEMPLATE_ID]\" :change-callback=\"changeCallback\" />\n\t\t\t\t\t<HiddenInput :value=\"documentId\" name=\"RECURRING[EMAIL_DOCUMENT_ID]\" :change-callback=\"changeCallback\" />\n\t\t\t\t\t<HiddenInput :value=\"senderId\" name=\"RECURRING[SENDER_ID]\" :change-callback=\"changeCallback\" />\n\t\t\t\t\t<HiddenInput v-for=\"emailId in emailIds\" :key=\"emailId\" :value=\"emailId\" name=\"RECURRING[EMAIL_IDS][]\" />\n\t\t\t\t</div>\n\t\t\t\t<HiddenInput :value=\"formattedIsEnabled\" name=\"RECURRING[IS_SEND_EMAIL]\" :change-callback=\"changeCallback\" />\n\t\t\t</div>\n\t\t</div>\t\n\t`,\n};\n","import { Type } from 'main.core';\nimport { destroyPopupMenu } from '../../helper';\n\nexport const popupMenuMixin = (popupMenuId: string | Array) => ({\n\tcreated(): void\n\t{\n\t\tthis.popupMenuId = popupMenuId;\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tif (Type.isArray(this.popupMenuId))\n\t\t{\n\t\t\tthis.popupMenuId.forEach((popupId) => destroyPopupMenu(popupId));\n\t\t}\n\t\telse if (Type.isStringFilled(this.popupMenuId))\n\t\t{\n\t\t\tdestroyPopupMenu(this.popupMenuId);\n\t\t}\n\t},\n});\n","import { showPopupMenu } from '../../helper';\nimport { popupMenuMixin } from '../common/destroy-popup-menu';\nimport { FieldTitle } from '../common/field-title';\n\n// @vue/component\nexport const CategorySelector = {\n\tcomponents: {\n\t\tFieldTitle,\n\t},\n\n\tmixins: [popupMenuMixin('crm-recurring-category-selector')],\n\n\tprops: {\n\t\tcategoryId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tcategories: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tcategoryTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_CATEGORY_TITLE');\n\t\t},\n\n\t\tcurrentCategoryTitle(): string\n\t\t{\n\t\t\tconst currentCategory = this.categories.find((item) => Number(item.VALUE) === Number(this.categoryId));\n\n\t\t\treturn currentCategory ? currentCategory.NAME : this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_CATEGORY_TITLE_WITHOUT_PERMISSIONS');\n\t\t},\n\t},\n\n\tmethods: {\n\t\tshowCategorySelector(): void\n\t\t{\n\t\t\tconst menu = [];\n\n\t\t\tthis.categories.forEach((category) => {\n\t\t\t\tmenu.push({\n\t\t\t\t\tvalue: Number(category.VALUE),\n\t\t\t\t\ttext: category.NAME,\n\t\t\t\t\tonclick: this.onChangeCategory.bind(this),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tshowPopupMenu(this.popupMenuId, this.$refs.categorySelector, menu);\n\t\t},\n\t\tonChangeCategory(_, item): void\n\t\t{\n\t\t\tthis.$emit('onChange', item.value);\n\n\t\t\titem.getMenuWindow().close();\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<FieldTitle :title=\"categoryTitle\" />\n\t\t\n\t\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tref=\"categorySelector\"\n\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t@click=\"showCategorySelector\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{currentCategoryTitle}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import type { Period } from '../../enum/period';\nimport { getPeriodByValue, getPeriods } from '../../enum/period';\nimport { createDatePickerInstance, getFormattedDate, resolveEntityTypeName, showPopupMenu } from '../../helper';\nimport { popupMenuMixin } from '../common/destroy-popup-menu';\nimport { FieldTitle } from '../common/field-title';\n\n// @vue/component\nexport const DateFields = {\n\tcomponents: {\n\t\tFieldTitle,\n\t},\n\n\tmixins: [\n\t\tpopupMenuMixin([\n\t\t\t'crm-recurring-dates-section-selector-beginDate',\n\t\t\t'crm-recurring-dates-section-selector-closeDate',\n\t\t]),\n\t],\n\n\tprops: {\n\t\tentityTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tisEditableDateStartField: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tdateStart: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\toffsetBeginDateValue: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\toffsetBeginDateType: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\toffsetCloseDateValue: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\toffsetCloseDateType: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisShowOffsetBeginDate: this.offsetBeginDateValue > 0,\n\t\t\tformData: {\n\t\t\t\tcurrentDateStart: this.dateStart,\n\t\t\t\tcurrentOffsetBeginDateValue: this.offsetBeginDateValue,\n\t\t\t\tcurrentOffsetBeginDateType: this.offsetBeginDateType,\n\t\t\t\tcurrentOffsetCloseDateValue: this.offsetCloseDateValue,\n\t\t\t\tcurrentOffsetCloseDateType: this.offsetCloseDateType,\n\t\t\t},\n\t\t\tisEmitting: false,\n\t\t};\n\t},\n\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\tconst entityTypeName = this.getEntityTypeName();\n\n\t\t\treturn this.$Bitrix.Loc.getMessage(`CRM_EE_RECURRING_DATE_FIELDS_TITLE_${entityTypeName}`);\n\t\t},\n\n\t\tstartDateTitle(): string\n\t\t{\n\t\t\tconst entityTypeName = this.getEntityTypeName();\n\n\t\t\treturn this.$Bitrix.Loc.getMessage(`CRM_EE_RECURRING_DATES_SECTION_FIELD_DATE_CREATE_${entityTypeName}`);\n\t\t},\n\n\t\tformattedStartDate(): string\n\t\t{\n\t\t\treturn getFormattedDate(this.formData.currentDateStart);\n\t\t},\n\n\t\tbeginDateTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_BEGINDATE_TYPE_TITLE');\n\t\t},\n\n\t\tcloseDateTitle(): string\n\t\t{\n\t\t\tconst entityTypeName = this.getEntityTypeName();\n\n\t\t\treturn this.$Bitrix.Loc.getMessage(`CRM_EE_RECURRING_CLOSEDATE_TYPE_TITLE_${entityTypeName}`);\n\t\t},\n\n\t\toffsetBeginDateTypeTitle(): string\n\t\t{\n\t\t\treturn getPeriodByValue(this.formData.currentOffsetBeginDateType).title;\n\t\t},\n\n\t\toffsetCloseDateTypeTitle(): string\n\t\t{\n\t\t\treturn getPeriodByValue(this.formData.currentOffsetCloseDateType).title;\n\t\t},\n\n\t\toffsetDateBeginTitle(): string\n\t\t{\n\t\t\tconst entityTypeName = this.getEntityTypeName();\n\n\t\t\treturn this.$Bitrix.Loc.getMessage(`CRM_EE_RECURRING_OFFSET_DATE_BEGIN_TITLE_${entityTypeName}`);\n\t\t},\n\t},\n\n\twatch: {\n\t\tformData: {\n\t\t\thandler() {\n\t\t\t\tif (!this.isEmitting)\n\t\t\t\t{\n\t\t\t\t\tvoid this.$nextTick(() => {\n\t\t\t\t\t\tthis.emitChange();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep: true,\n\t\t},\n\n\t\tisShowOffsetBeginDate: {\n\t\t\thandler() {\n\t\t\t\tif (!this.isEmitting)\n\t\t\t\t{\n\t\t\t\t\tvoid this.$nextTick(() => {\n\t\t\t\t\t\tthis.emitChange();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\tdateStart: {\n\t\t\thandler(newValue) {\n\t\t\t\tconst roundedCurrent = Math.round(this.formData.currentDateStart);\n\t\t\t\tconst roundedNew = Math.round(newValue);\n\t\t\t\tif (roundedCurrent !== roundedNew)\n\t\t\t\t{\n\t\t\t\t\tthis.formData.currentDateStart = newValue;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\toffsetBeginDateValue: {\n\t\t\thandler(newValue) {\n\t\t\t\tthis.isShowOffsetBeginDate = newValue > 0;\n\t\t\t},\n\t\t},\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.datePicker = createDatePickerInstance(this.dateStart * 1000, (event) => {\n\t\t\tthis.formData.currentDateStart = event.getTarget().getSelectedDate().getTime() / 1000;\n\t\t});\n\t},\n\n\tbeforeUnmount(): void\n\t{\n\t\tthis.datePicker.destroy();\n\t},\n\n\tmethods: {\n\t\tshowDateStartCalendar(): void\n\t\t{\n\t\t\tif (!this.isEditableDateStartField)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.datePicker.setTargetNode(this.$refs.dateStart);\n\t\t\tthis.datePicker.show();\n\t\t},\n\n\t\tshowPeriodSelector(target: HTMLElement, name: string): void\n\t\t{\n\t\t\tconst menu = [];\n\n\t\t\tObject.values(getPeriods()).forEach((item: Period) => {\n\t\t\t\tmenu.push({\n\t\t\t\t\ttext: item.title,\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t\tonclick: this.onSelectPeriodItem.bind(this, name),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst id = `crm-recurring-dates-section-selector-${name}`;\n\t\t\tshowPopupMenu(id, target, menu);\n\t\t},\n\n\t\tonSelectPeriodItem(name: string, _, item): void\n\t\t{\n\t\t\tconst value = item.value;\n\t\t\tif (name === 'beginDate')\n\t\t\t{\n\t\t\t\tthis.formData.currentOffsetBeginDateType = value;\n\t\t\t}\n\t\t\telse if (name === 'closeDate')\n\t\t\t{\n\t\t\t\tthis.formData.currentOffsetCloseDateType = value;\n\t\t\t}\n\n\t\t\titem.getMenuWindow().close();\n\t\t},\n\n\t\temitChange(): void\n\t\t{\n\t\t\tif (this.isEmitting)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isEmitting = true;\n\t\t\tthis.$emit('onChange', {\n\t\t\t\tdateStart: this.formData.currentDateStart,\n\t\t\t\toffsetBeginDateValue: this.formData.currentOffsetBeginDateValue,\n\t\t\t\toffsetBeginDateType: this.formData.currentOffsetBeginDateType,\n\t\t\t\toffsetCloseDateValue: this.formData.currentOffsetCloseDateValue,\n\t\t\t\toffsetCloseDateType: this.formData.currentOffsetCloseDateType,\n\t\t\t\tisShowOffsetBeginDate: this.isShowOffsetBeginDate,\n\t\t\t});\n\n\t\t\tvoid this.$nextTick(() => {\n\t\t\t\tthis.isEmitting = false;\n\t\t\t});\n\t\t},\n\n\t\tgetEntityTypeName(): string\n\t\t{\n\t\t\treturn resolveEntityTypeName(this.entityTypeId);\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t<FieldTitle :title=\"title\" />\n\t\t\t\n\t\t\t<div class=\"crm-entity-widget-content-block-inner crm-entity-widget-content-block-colums-input crm-entity-widget-content-block-recurring-inside-section-container\">\n\t\t\t\t<FieldTitle :title=\"startDateTitle\" />\n\t\t\t\t\n\t\t\t\t<div class=\"crm-entity-widget-content-block-inner crm-entity-widget-content-block-colums-input\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-datetime ui-ctl-w50\">\n\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref=\"dateStart\"\n\t\t\t\t\t\t\t:readonly=\"!isEditableDateStartField\"\n\t\t\t\t\t\t\t:disabled=\"!isEditableDateStartField\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t:value=\"formattedStartDate\"\n\t\t\t\t\t\t\t@click=\"showDateStartCalendar\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\n\t\t\t\t\n\t\t\t\t<label class=\"ui-ctl ui-ctl-w100 ui-ctl-checkbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\tv-model=\"isShowOffsetBeginDate\"\n\t\t\t\t\t\tvalue=\"Y\"\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"ui-ctl-label-text\">{{offsetDateBeginTitle}}</span>\n\t\t\t\t</label>\n\n\t\t\t\t<FieldTitle v-if=\"isShowOffsetBeginDate\" :title=\"beginDateTitle\" />\n\t\t\t\t\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isShowOffsetBeginDate\"\n\t\t\t\t\tclass=\"crm-entity-widget-content-block-inner crm-entity-widget-content-block-colums-input\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"crm-entity-widget-content-block-input-wrapper\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\"crm-entity-widget-content-input\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tv-model=\"formData.currentOffsetBeginDateValue\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"crm-entity-widget-content-block-select\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"crm-entity-widget-content-select\"\n\t\t\t\t\t\t\t\t@click=\"(event) => showPeriodSelector(event.target, 'beginDate')\"\n\t\t\t\t\t\t\t>{{offsetBeginDateTypeTitle}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<FieldTitle :title=\"closeDateTitle\" />\n\t\t\t\t\n\t\t\t\t<div class=\"crm-entity-widget-content-block-inner crm-entity-widget-content-block-colums-input\">\n\t\t\t\t\t<div class=\"crm-entity-widget-content-block-input-wrapper\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\"crm-entity-widget-content-input\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tv-model=\"formData.currentOffsetCloseDateValue\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"crm-entity-widget-content-block-select\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"crm-entity-widget-content-select\"\n\t\t\t\t\t\t\t\t@click=\"(event) => showPeriodSelector(event.target, 'closeDate')\"\n\t\t\t\t\t\t\t>{{offsetCloseDateTypeTitle}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { getModeByValue, modeItems } from '../../enum/mode';\nimport { resolveEntityTypeName, showPopupMenu } from '../../helper';\nimport { popupMenuMixin } from '../common/destroy-popup-menu';\nimport { FieldTitle } from '../common/field-title';\n\n// @vue/component\nexport const ModeSelector = {\n\tcomponents: {\n\t\tFieldTitle,\n\t},\n\n\tmixins: [popupMenuMixin('crm-recurring-mode-selector')],\n\n\tprops: {\n\t\tentityTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tmodeTitle(): string\n\t\t{\n\t\t\tconst entityTypeName = resolveEntityTypeName(this.entityTypeId);\n\n\t\t\treturn this.$Bitrix.Loc.getMessage(`CRM_EE_RECURRING_MODE_TITLE_${entityTypeName}`);\n\t\t},\n\n\t\tcurrentModeTitle(): string\n\t\t{\n\t\t\treturn getModeByValue(this.mode).title;\n\t\t},\n\t},\n\n\tmethods: {\n\t\tshowModeSelector(): void\n\t\t{\n\t\t\tconst menu = [];\n\n\t\t\tObject.values(modeItems).forEach(({ value, title }) => {\n\t\t\t\tmenu.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\ttext: title,\n\t\t\t\t\tonclick: this.onChangeMode.bind(this),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tshowPopupMenu(this.popupMenuId, this.$refs.modeSelector, menu);\n\t\t},\n\t\tonChangeMode(_, item): void\n\t\t{\n\t\t\tthis.$emit('onChange', item.value);\n\n\t\t\titem.getMenuWindow().close();\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<FieldTitle :title=\"modeTitle\" />\n\t\t\n\t\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tref=\"modeSelector\"\n\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t@click=\"showModeSelector\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{currentModeTitle}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { getMultipleLimitByValue, multipleLimits } from '../../enum/multiple-limit';\nimport { createDatePickerInstance, getFormattedDate, resolveEntityTypeName, showPopupMenu } from '../../helper';\nimport { popupMenuMixin } from '../common/destroy-popup-menu';\nimport { FieldTitle } from '../common/field-title';\n\n// @vue/component\nexport const MultipleLimitSelector = {\n\tcomponents: {\n\t\tFieldTitle,\n\t},\n\n\tmixins: [popupMenuMixin('crm-recurring-multiple-limit-selector')],\n\n\tprops: {\n\t\tentityTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdate: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttimes: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentType: this.type,\n\t\t\tcurrentDate: this.date,\n\t\t\tcurrentTimes: this.times,\n\t\t};\n\t},\n\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\tconst entityTypeName = resolveEntityTypeName(this.entityTypeId);\n\n\t\t\treturn this.$Bitrix.Loc.getMessage(`CRM_EE_RECURRING_MULTIPLE_LIMIT_TITLE_${entityTypeName}`);\n\t\t},\n\n\t\tdateTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_LIMIT_ITEM_DATE_FIELD_TITLE');\n\t\t},\n\n\t\ttimesTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_LIMIT_ITEM_TIMES_FIELD_TITLE');\n\t\t},\n\n\t\tcurrentMultipleLimitTitle(): string\n\t\t{\n\t\t\treturn getMultipleLimitByValue(this.currentType).title;\n\t\t},\n\n\t\tformattedDate(): string\n\t\t{\n\t\t\treturn getFormattedDate(this.currentDate);\n\t\t},\n\n\t\tisDateLimit(): boolean\n\t\t{\n\t\t\treturn this.currentType === multipleLimits.date.value;\n\t\t},\n\n\t\tisTimesLimit(): boolean\n\t\t{\n\t\t\treturn this.currentType === multipleLimits.times.value;\n\t\t},\n\t},\n\n\twatch: {\n\t\tcurrentType(): void\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\n\t\tcurrentDate(): void\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\n\t\tcurrentTimes(): void\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.datePicker = createDatePickerInstance(this.date * 1000, (event) => {\n\t\t\tthis.currentDate = event.getTarget().getSelectedDate().getTime() / 1000;\n\t\t});\n\t},\n\n\tbeforeUnmount(): void\n\t{\n\t\tthis.datePicker.destroy();\n\t},\n\n\tmethods: {\n\t\tshowSelector(): void\n\t\t{\n\t\t\tconst menu = [];\n\n\t\t\tObject.values(multipleLimits).forEach(({ value, title }) => {\n\t\t\t\tmenu.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\ttext: title,\n\t\t\t\t\tonclick: this.onChange.bind(this),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tshowPopupMenu(this.popupMenuId, this.$refs.selector, menu);\n\t\t},\n\n\t\tonChange(_, item): void\n\t\t{\n\t\t\tthis.currentType = item.value;\n\t\t\titem.getMenuWindow().close();\n\t\t},\n\n\t\temitChange(): void\n\t\t{\n\t\t\tvoid this.$nextTick(() => {\n\t\t\t\tthis.$emit('onChange', {\n\t\t\t\t\ttype: this.currentType,\n\t\t\t\t\tdate: this.currentDate,\n\t\t\t\t\ttimes: this.currentTimes,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tshowDatePicker(): void\n\t\t{\n\t\t\tthis.datePicker.setTargetNode(this.$refs.date);\n\t\t\tthis.datePicker.show();\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t<FieldTitle :title=\"title\" />\n\t\t\t\n\t\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tref=\"selector\"\n\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t@click=\"showSelector\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{currentMultipleLimitTitle}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<FieldTitle\n\t\t\t\tv-if=\"isDateLimit\"\n\t\t\t\t:title=\"dateTitle\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-if=\"isDateLimit\"\n\t\t\t\tclass=\"ui-entity-editor-content-block\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-datetime ui-ctl-w50\">\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tref=\"date\"\n\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t:value=\"formattedDate\"\n\t\t\t\t\t\t@click=\"showDatePicker\"\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<FieldTitle\n\t\t\t\tv-if=\"isTimesLimit\"\n\t\t\t\t:title=\"timesTitle\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-if=\"isTimesLimit\"\n\t\t\t\tclass=\"ui-entity-editor-content-block\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\tv-model=\"currentTimes\"\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\t`,\n};\n","import { getPeriodByValue, getPeriods } from '../../enum/period';\nimport { showPopupMenu } from '../../helper';\nimport { popupMenuMixin } from '../common/destroy-popup-menu';\nimport { FieldTitle } from '../common/field-title';\n\n// @vue/component\nexport const MultipleRepeatSelector = {\n\tcomponents: {\n\t\tFieldTitle,\n\t},\n\n\tmixins: [popupMenuMixin('crm-recurring-multiple-repeat-selector')],\n\n\tprops: {\n\t\tinterval: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttype: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentInterval: this.interval,\n\t\t\tcurrentType: this.type,\n\t\t};\n\t},\n\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_TYPE_CUSTOM_TITLE');\n\t\t},\n\n\t\tcurrentItemTitle(): string\n\t\t{\n\t\t\treturn getPeriodByValue(this.currentType).title;\n\t\t},\n\t},\n\n\twatch: {\n\t\tcurrentType(): void\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\n\t\tcurrentInterval(): void\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\t},\n\n\tmethods: {\n\t\tshowSelector(): void\n\t\t{\n\t\t\tconst menu = [];\n\n\t\t\tObject.values(getPeriods(true)).forEach(({ value, title }) => {\n\t\t\t\tmenu.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\ttext: title,\n\t\t\t\t\tonclick: this.onChange.bind(this),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tshowPopupMenu(this.popupMenuId, this.$refs.selector, menu);\n\t\t},\n\n\t\tonChange(_, item): void\n\t\t{\n\t\t\tthis.currentType = item.value;\n\n\t\t\titem.getMenuWindow().close();\n\t\t},\n\n\t\temitChange(): void\n\t\t{\n\t\t\tvoid this.$nextTick(() => {\n\t\t\t\tthis.$emit('onChange', {\n\t\t\t\t\ttype: this.currentType,\n\t\t\t\t\tvalue: this.currentInterval,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t<FieldTitle :title=\"title\" />\n\t\t\t<div class=\"crm-entity-widget-content-block-inner crm-entity-widget-content-block-colums-input\">\n\t\t\t\t<div class=\"crm-entity-widget-content-block-input-wrapper\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"crm-entity-widget-content-input\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tv-model=\"currentInterval\"\n\t\t\t\t\t>\n\t\t\t\t\t<div class=\"crm-entity-widget-content-block-select\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref=\"selector\"\n\t\t\t\t\t\t\tclass=\"crm-entity-widget-content-select\"\n\t\t\t\t\t\t\t@click=\"showSelector\"\n\t\t\t\t\t\t>{{currentItemTitle}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { getMultipleTypeByValue, multipleTypes } from '../../enum/multiple-type';\nimport { showPopupMenu } from '../../helper';\nimport { FieldTitle } from '../common/field-title';\n\n// @vue/component\nexport const MultipleTypeSelector = {\n\tcomponents: {\n\t\tFieldTitle,\n\t},\n\n\tprops: {\n\t\ttype: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentType: this.type,\n\t\t};\n\t},\n\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_MULTIPLE_TYPE_TITLE');\n\t\t},\n\n\t\tcurrentMultipleTypeTitle(): string\n\t\t{\n\t\t\treturn getMultipleTypeByValue(this.currentType).title;\n\t\t},\n\t},\n\n\twatch: {\n\t\tcurrentType(): void\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\t},\n\n\tmethods: {\n\t\tshowSelector(): void\n\t\t{\n\t\t\tconst menu = [];\n\n\t\t\tObject.values(multipleTypes).forEach(({ value, title }) => {\n\t\t\t\tmenu.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\ttext: title,\n\t\t\t\t\tonclick: this.onChange.bind(this),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconst target = this.$refs.selector;\n\t\t\tconst id = 'crm-recurring-multiple-type-selector';\n\n\t\t\tshowPopupMenu(id, target, menu);\n\t\t},\n\n\t\tonChange(_, item): void\n\t\t{\n\t\t\tthis.currentType = item.value;\n\t\t\titem.getMenuWindow().close();\n\t\t},\n\n\t\temitChange(): void\n\t\t{\n\t\t\tvoid this.$nextTick(() => {\n\t\t\t\tthis.$emit('onChange', {\n\t\t\t\t\ttype: this.currentType,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t<FieldTitle :title=\"title\"/>\n\n\t\t\t<div class=\"ui-entity-editor-content-block\">\n\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tref=\"selector\"\n\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t@click=\"showSelector\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{currentMultipleTypeTitle}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { getPeriodByValue, getPeriods } from '../../enum/period';\nimport { createDatePickerInstance, getFormattedDate, showPopupMenu } from '../../helper';\nimport { popupMenuMixin } from '../common/destroy-popup-menu';\nimport { FieldTitle } from '../common/field-title';\nimport { HiddenInput } from '../common/hidden-input';\n\n// @vue/component\nexport const SingleFields = {\n\tcomponents: {\n\t\tFieldTitle,\n\t\tHiddenInput,\n\t},\n\n\tmixins: [popupMenuMixin('crm-recurring-period-selector')],\n\n\tprops: {\n\t\tinterval: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttype: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdate: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentInterval: this.interval,\n\t\t\tcurrentType: this.type,\n\t\t\tcurrentDate: this.date,\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tprefixTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_MODE_SINGLE_FIELDS_PREFIX');\n\t\t},\n\n\t\tdatePrefixTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_EE_RECURRING_MODE_SINGLE_FIELDS_DATE_PREFIX');\n\t\t},\n\n\t\tcurrentModeTitle(): string\n\t\t{\n\t\t\treturn getPeriodByValue(this.type).titleGenitive;\n\t\t},\n\n\t\tformattedDate(): string\n\t\t{\n\t\t\treturn getFormattedDate(this.currentDate);\n\t\t},\n\t},\n\n\twatch: {\n\t\tcurrentInterval(): void\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\n\t\tcurrentType(): void\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\n\t\tcurrentDate(): void\n\t\t{\n\t\t\tthis.emitChange();\n\t\t},\n\t},\n\n\tcreated()\n\t{\n\t\tthis.datePicker = createDatePickerInstance(this.date * 1000, (event) => {\n\t\t\tthis.currentDate = event.getTarget().getSelectedDate().getTime() / 1000;\n\t\t});\n\t},\n\n\tbeforeUnmount(): void\n\t{\n\t\tthis.datePicker.destroy();\n\t},\n\n\tmethods: {\n\t\temitChange(): void\n\t\t{\n\t\t\tvoid this.$nextTick(() => {\n\t\t\t\tthis.$emit('onChange', {\n\t\t\t\t\tvalue: this.currentInterval,\n\t\t\t\t\ttype: this.currentType,\n\t\t\t\t\tdate: this.currentDate,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tshowPeriodSelector(): void\n\t\t{\n\t\t\tconst menu = [];\n\n\t\t\tObject.values(getPeriods()).forEach(({ value, titleGenitive }) => {\n\t\t\t\tmenu.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\ttext: titleGenitive,\n\t\t\t\t\tonclick: this.onChangePeriod.bind(this),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tshowPopupMenu(this.popupMenuId, this.$refs.periodSelector, menu);\n\t\t},\n\n\t\tonChangePeriod(_, item): void\n\t\t{\n\t\t\tthis.currentType = item.value;\n\n\t\t\titem.getMenuWindow().close();\n\t\t},\n\n\t\tshowDatePicker(): void\n\t\t{\n\t\t\tthis.datePicker.setTargetNode(this.$refs.date);\n\t\t\tthis.datePicker.show();\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"crm-entity-widget-content-block-field-recurring-single\">\n\t\t\t<div class=\"crm-entity-widget-content-block-inner crm-entity-widget-content-block-colums-input\">\n\t\t\t\t<div class=\"crm-entity-widget-content-block-input-wrapper\">\n\t\t\t\t\t<span>{{prefixTitle}} </span>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"crm-entity-widget-content-input\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tv-model=\"currentInterval\"\n\t\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref=\"periodSelector\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t@click=\"showPeriodSelector\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{currentModeTitle}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<span> {{datePrefixTitle}} </span>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-datetime ui-ctl-w50\">\n\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tref=\"date\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t:value=\"formattedDate\"\n\t\t\t\t\t\t\t@click=\"showDatePicker\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { DateTimeFormat } from 'main.date';\nimport { modeItems } from '../enum/mode';\nimport { multipleLimits } from '../enum/multiple-limit';\nimport { multipleTypes } from '../enum/multiple-type';\nimport { offsetDateTypes } from '../enum/offset-date-type';\nimport { periods } from '../enum/period';\nimport { getFormattedDate } from '../helper';\nimport { FieldTitle } from './common/field-title';\nimport { HiddenInput } from './common/hidden-input';\nimport { EmailFields } from './email/email-fields';\nimport { CategorySelector } from './field/category-selector';\nimport { DateFields } from './field/date-fields';\nimport { ModeSelector } from './field/mode-selector';\nimport { MultipleLimitSelector } from './field/multiple-limit-selector';\nimport { MultipleRepeatSelector } from './field/multiple-repeat-selector';\nimport { MultipleTypeSelector } from './field/multiple-type-selector';\nimport { SingleFields } from './field/single-fields';\n\n// @vue/component\nexport const Recurring = {\n\tcomponents: {\n\t\tFieldTitle,\n\t\tHiddenInput,\n\t\tModeSelector,\n\t\tSingleFields,\n\t\tDateFields,\n\t\tEmailFields,\n\t\tMultipleLimitSelector,\n\t\tMultipleRepeatSelector,\n\t\tMultipleTypeSelector,\n\t\tCategorySelector,\n\t},\n\n\tprops: {\n\t\tentityId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tentityTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tparams: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tchangeCallback: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\tconst dateStart = new Date();\n\t\tconst defaultOffsetType = this.getDefaultOffsetType();\n\n\t\tconst offsetBeginDateValue = Number(this.data['RECURRING[OFFSET_BEGINDATE_VALUE]'] ?? 0);\n\t\tconst offsetCloseDateValue = Number(this.data['RECURRING[OFFSET_CLOSEDATE_VALUE]'] ?? 0);\n\n\t\treturn {\n\t\t\tmode: this.data['RECURRING[MODE]'] ?? modeItems.none.value,\n\n\t\t\tsingleInterval: Number(this.data['RECURRING[SINGLE_INTERVAL_VALUE]'] ?? 0),\n\t\t\tsingleType: Number(this.data['RECURRING[SINGLE_TYPE]'] ?? defaultOffsetType),\n\t\t\tsingleDateBefore: this.initDateInSeconds('RECURRING[SINGLE_DATE_BEFORE]'),\n\n\t\t\tmultipleCustomIntervalValue: Number(this.data['RECURRING[MULTIPLE_CUSTOM_INTERVAL_VALUE]'] ?? 0),\n\t\t\tmultipleCustomType: Number(this.data['RECURRING[MULTIPLE_CUSTOM_TYPE]'] ?? multipleTypes.day.value),\n\n\t\t\tmultipleDateStart: this.initDateInSeconds('RECURRING[MULTIPLE_DATE_START]'),\n\t\t\tmultipleTypeLimit: this.data['RECURRING[MULTIPLE_TYPE_LIMIT]'] ?? multipleLimits.no.value,\n\t\t\tmultipleDateLimit: this.initDateInSeconds('RECURRING[MULTIPLE_DATE_LIMIT]'),\n\t\t\tmultipleTimesLimit: Number(this.data['RECURRING[MULTIPLE_TIMES_LIMIT]'] ?? 1),\n\n\t\t\tdateStart,\n\t\t\toffsetBeginDateType: Number(this.data['RECURRING[OFFSET_BEGINDATE_TYPE]'] ?? defaultOffsetType),\n\t\t\toffsetBeginDateValue,\n\t\t\toffsetCloseDateType: Number(this.data['RECURRING[OFFSET_CLOSEDATE_TYPE]'] ?? defaultOffsetType),\n\t\t\toffsetCloseDateValue,\n\t\t\tisShowOffsetBeginDate: false,\n\n\t\t\tmultipleType: Number(this.data['RECURRING[MULTIPLE_TYPE]'] ?? multipleTypes.day.value),\n\t\t\tmultipleLimit: this.data['RECURRING[MULTIPLE_TYPE_LIMIT]'] ?? multipleLimits.no.value,\n\n\t\t\tcategoryId: Number(this.data['RECURRING[CATEGORY_ID]'] ?? 0),\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tisMultipleMode(): boolean\n\t\t{\n\t\t\treturn this.mode === modeItems.multiple.value;\n\t\t},\n\n\t\tisSingleMode(): boolean\n\t\t{\n\t\t\treturn this.mode === modeItems.single.value;\n\t\t},\n\n\t\tmustShowMultipleRepeatSelector(): boolean\n\t\t{\n\t\t\treturn this.isMultipleMode && this.multipleType === multipleTypes.custom.value;\n\t\t},\n\n\t\tformattedMultipleDateLimit(): string\n\t\t{\n\t\t\treturn getFormattedDate(this.multipleDateLimit);\n\t\t},\n\n\t\tformattedDateStart(): string\n\t\t{\n\t\t\treturn getFormattedDate(this.multipleDateStart);\n\t\t},\n\n\t\tformattedSingleDateBefore(): string\n\t\t{\n\t\t\treturn getFormattedDate(this.singleDateBefore);\n\t\t},\n\n\t\tdateForDateFieldsComponent(): number\n\t\t{\n\t\t\tif (this.mode === modeItems.multiple.value)\n\t\t\t{\n\t\t\t\treturn this.multipleDateStart;\n\t\t\t}\n\n\t\t\tlet date = new Date(this.singleDateBefore * 1000);\n\n\t\t\tswitch (this.singleType)\n\t\t\t{\n\t\t\t\tcase periods.day.value:\n\t\t\t\t\tdate = date.setDate(date.getDate() - this.singleInterval);\n\t\t\t\t\tbreak;\n\t\t\t\tcase periods.week.value:\n\t\t\t\t\tdate = date.setDate(date.getDate() - this.singleInterval * 7);\n\t\t\t\t\tbreak;\n\t\t\t\tcase periods.month.value:\n\t\t\t\t\tdate = date.setMonth(date.getMonth() - this.singleInterval);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\n\t\t\treturn date / 1000;\n\t\t},\n\n\t\temailData(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tsenderId: this.data['RECURRING[SENDER_ID]'] ?? null,\n\t\t\t\tdocumentId: this.data['RECURRING[EMAIL_DOCUMENT_ID]'] ?? null,\n\t\t\t\ttemplateId: this.data['RECURRING[EMAIL_TEMPLATE_ID]'] ?? null,\n\t\t\t\tisEnabled: this.data['RECURRING[IS_SEND_EMAIL]'] ?? false,\n\t\t\t\temailIds: this.data['RECURRING[EMAIL_IDS]'] ?? [],\n\t\t\t};\n\t\t},\n\n\t\tisCategoriesEnabled(): boolean\n\t\t{\n\t\t\treturn this.params.isCategoriesEnabled ?? false;\n\t\t},\n\n\t\tisEmailEnabled(): boolean\n\t\t{\n\t\t\treturn this.entityTypeId === BX.CrmEntityType.enumeration.smartinvoice;\n\t\t},\n\n\t\tbeginDateType(): number\n\t\t{\n\t\t\tconst isCalculated = this.isShowOffsetBeginDate && this.offsetBeginDateValue > 0;\n\n\t\t\treturn isCalculated ? offsetDateTypes.calculated : offsetDateTypes.set;\n\t\t},\n\n\t\tcloseDateType(): number\n\t\t{\n\t\t\treturn this.offsetCloseDateValue > 0 ? offsetDateTypes.calculated : offsetDateTypes.set;\n\t\t},\n\t},\n\n\tmethods: {\n\t\tinitDateInSeconds(fieldName: string): number\n\t\t{\n\t\t\tconst fromData = this.data[fieldName];\n\t\t\tconst dateObject = DateTimeFormat.parse(fromData);\n\t\t\tconst value = (dateObject ?? new Date()).getTime();\n\n\t\t\treturn value / 1000;\n\t\t},\n\n\t\tsetMode(mode: string): void\n\t\t{\n\t\t\tthis.mode = mode;\n\t\t},\n\n\t\tsetMultipleTypeData({ type }): void\n\t\t{\n\t\t\tthis.multipleType = type;\n\t\t},\n\n\t\tsetMultipleRepeatData({ type, value }): void\n\t\t{\n\t\t\tthis.multipleCustomType = type;\n\t\t\tthis.multipleCustomIntervalValue = value;\n\t\t},\n\n\t\tsetMultipleLimits({ type, date, times }): void\n\t\t{\n\t\t\tthis.multipleTypeLimit = type;\n\t\t\tthis.multipleDateLimit = date;\n\t\t\tthis.multipleTimesLimit = times;\n\t\t},\n\n\t\tsetSingleFields({ value, type, date }): void\n\t\t{\n\t\t\tthis.singleInterval = value;\n\t\t\tthis.singleType = type;\n\t\t\tthis.singleDateBefore = date;\n\t\t},\n\n\t\t// eslint-disable-next-line max-len\n\t\tsetDateFields({ dateStart, offsetBeginDateValue, offsetBeginDateType, offsetCloseDateValue, offsetCloseDateType, isShowOffsetBeginDate }): void\n\t\t{\n\t\t\tif (this.mode === modeItems.multiple.value)\n\t\t\t{\n\t\t\t\tthis.multipleDateStart = dateStart;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.dateStart = new Date(dateStart * 1000);\n\t\t\t}\n\n\t\t\tthis.offsetBeginDateValue = offsetBeginDateValue;\n\t\t\tthis.offsetBeginDateType = offsetBeginDateType;\n\t\t\tthis.offsetCloseDateValue = offsetCloseDateValue;\n\t\t\tthis.offsetCloseDateType = offsetCloseDateType;\n\t\t\tthis.isShowOffsetBeginDate = isShowOffsetBeginDate;\n\t\t},\n\n\t\tsetCategoryId(categoryId: number): void\n\t\t{\n\t\t\tthis.categoryId = categoryId;\n\t\t},\n\n\t\tgetDefaultOffsetType(): number\n\t\t{\n\t\t\treturn periods.day.value;\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<ModeSelector \n\t\t\t\t:entity-type-id=\"entityTypeId\"\n\t\t\t\t:mode=\"mode\"\n\t\t\t\t@onChange=\"setMode\"\n\t\t\t/>\n\n\t\t\t<!-- region mode -->\n\t\t\t\t<HiddenInput :value=\"mode\" name=\"RECURRING[MODE]\" :change-callback=\"changeCallback\" />\n\t\t\t<!-- endregion -->\n\t\t\n\t\t\t<div v-if=\"isMultipleMode || isSingleMode\">\n\t\t\t\t<SingleFields\n\t\t\t\t\tv-if=\"isSingleMode\"\n\t\t\t\t\t:interval=\"singleInterval\"\n\t\t\t\t\t:type=\"singleType\"\n\t\t\t\t\t:date=\"singleDateBefore\"\n\t\t\t\t\t@onChange=\"setSingleFields\"\n\t\t\t\t/>\n\n\t\t\t\t<MultipleTypeSelector\n\t\t\t\t\tv-if=\"isMultipleMode\"\n\t\t\t\t\t:type=\"multipleType\"\n\t\t\t\t\t@onChange=\"setMultipleTypeData\"\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t<MultipleRepeatSelector\n\t\t\t\t\tv-if=\"mustShowMultipleRepeatSelector\"\n\t\t\t\t\t:interval=\"multipleCustomIntervalValue\"\n\t\t\t\t\t:type=\"multipleCustomType\"\n\t\t\t\t\t@onChange=\"setMultipleRepeatData\"\n\t\t\t\t/>\n\t\t\t\n\t\t\t\t<MultipleLimitSelector\n\t\t\t\t\tv-if=\"isMultipleMode\"\n\t\t\t\t\t:entity-type-id=\"entityTypeId\"\n\t\t\t\t\t:type=\"multipleTypeLimit\"\n\t\t\t\t\t:date=\"multipleDateLimit\"\n\t\t\t\t\t:times=\"multipleTimesLimit\"\n\t\t\t\t\t@onChange=\"setMultipleLimits\"\n\t\t\t\t/>\n\t\t\t\n\t\t\t\t<DateFields\n\t\t\t\t\t:entity-type-id=\"entityTypeId\"\n\t\t\t\t\t:isEditableDateStartField=\"isMultipleMode\"\n\t\t\t\t\t:dateStart=\"dateForDateFieldsComponent\"\n\t\t\t\t\t:offsetBeginDateValue=\"offsetBeginDateValue\"\n\t\t\t\t\t:offsetBeginDateType=\"offsetBeginDateType\"\n\t\t\t\t\t:offsetCloseDateValue=\"offsetCloseDateValue\"\n\t\t\t\t\t:offsetCloseDateType=\"offsetCloseDateType\"\n\t\t\t\t\t@onChange=\"setDateFields\"\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t<CategorySelector\n\t\t\t\t\tv-if=\"isCategoriesEnabled\"\n\t\t\t\t\t:categories=\"params.categories\"\n\t\t\t\t\t:categoryId=\"categoryId\"\n\t\t\t\t\t@onChange=\"setCategoryId\"\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t<EmailFields\n\t\t\t\t\tv-if=\"isEmailEnabled\"\n\t\t\t\t\t:entity-id=\"entityId\"\n\t\t\t\t\t:entity-type-id=\"entityTypeId\"\n\t\t\t\t\t:data=\"emailData\"\n\t\t\t\t\t:change-callback=\"changeCallback\"\n\t\t\t\t/>\n\n\t\t\t\t<!-- region multiple type -->\n\t\t\t\t<HiddenInput :value=\"multipleType\" name=\"RECURRING[MULTIPLE_TYPE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<!-- endregion -->\n\t\t\t\t\n\t\t\t\t<!-- region MultipleRepeatSelector fields -->\n\t\t\t\t<HiddenInput :value=\"multipleCustomIntervalValue\" name=\"RECURRING[MULTIPLE_CUSTOM_INTERVAL_VALUE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput :value=\"multipleCustomType\" name=\"RECURRING[MULTIPLE_CUSTOM_TYPE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<!-- endregion -->\n\n\t\t\t\t<!-- region MultipleLimitSelector fields -->\n\t\t\t\t<HiddenInput :value=\"multipleTypeLimit\" name=\"RECURRING[MULTIPLE_TYPE_LIMIT]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput :value=\"formattedMultipleDateLimit\" name=\"RECURRING[MULTIPLE_DATE_LIMIT]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput :value=\"multipleTimesLimit\" name=\"RECURRING[MULTIPLE_TIMES_LIMIT]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<!-- endregion -->\n\n\t\t\t\t<!-- region Date fields -->\n\t\t\t\t<HiddenInput :value=\"formattedDateStart\" name=\"RECURRING[MULTIPLE_DATE_START]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput :value=\"beginDateType\" name=\"RECURRING[BEGINDATE_TYPE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput :value=\"closeDateType\" name=\"RECURRING[CLOSEDATE_TYPE]\" />\n\t\t\t\t<HiddenInput v-if=\"isShowOffsetBeginDate\" :value=\"offsetBeginDateValue\" name=\"RECURRING[OFFSET_BEGINDATE_VALUE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput v-else value=\"\" name=\"RECURRING[OFFSET_BEGINDATE_VALUE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput v-if=\"isShowOffsetBeginDate\" :value=\"offsetBeginDateType\" name=\"RECURRING[OFFSET_BEGINDATE_TYPE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput v-else value=\"\" name=\"RECURRING[OFFSET_BEGINDATE_TYPE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput :value=\"offsetCloseDateValue\" name=\"RECURRING[OFFSET_CLOSEDATE_VALUE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput :value=\"offsetCloseDateType\" name=\"RECURRING[OFFSET_CLOSEDATE_TYPE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<!-- endregion -->\n\n\t\t\t\t<!-- region Single fields -->\n\t\t\t\t<HiddenInput :value=\"singleType\" name=\"RECURRING[SINGLE_TYPE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput :value=\"singleInterval\" name=\"RECURRING[SINGLE_INTERVAL_VALUE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<HiddenInput :value=\"formattedSingleDateBefore\" name=\"RECURRING[SINGLE_DATE_BEFORE]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<!-- endregion -->\n\n\t\t\t\t<!-- region Other fields -->\n\t\t\t\t<HiddenInput v-if=\"isCategoriesEnabled\" :value=\"categoryId\" name=\"RECURRING[CATEGORY_ID]\" :change-callback=\"changeCallback\" />\n\t\t\t\t<!-- endregion -->\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Tag } from 'main.core';\nimport { BitrixVue } from 'ui.vue3';\nimport { Recurring as RecurringComponent } from './components/recurring.js';\nimport './style.css';\n\nexport class Recurring\n{\n\t#entityTypeId: number;\n\t#entityId: number;\n\t#data: Object = {};\n\t#params: Object = {};\n\t#changeCallback: Function;\n\n\t#layoutComponent: ?Object = null;\n\t#app: ?Object = null;\n\n\tstatic create(entityTypeId: number, entityId: number, changeCallback: Function, params: ?Object = {}): Recurring\n\t{\n\t\treturn new Recurring(entityTypeId, entityId, changeCallback, params);\n\t}\n\n\tconstructor(entityTypeId: number, entityId: number, changeCallback: Function, params: ?Object = {})\n\t{\n\t\tthis.#entityTypeId = entityTypeId;\n\t\tthis.#entityId = entityId;\n\t\tthis.#changeCallback = changeCallback;\n\t\tthis.#params = params;\n\t}\n\n\tsetData(data: Object): void\n\t{\n\t\tthis.#data = data;\n\t}\n\n\tgetLayout(): void\n\t{\n\t\tif (this.#app)\n\t\t{\n\t\t\tthis.clean();\n\t\t}\n\n\t\tconst props = {\n\t\t\tentityTypeId: this.#entityTypeId,\n\t\t\tentityId: this.#entityId,\n\t\t\tdata: this.#data,\n\t\t\tparams: this.#params,\n\t\t\tchangeCallback: this.#changeCallback,\n\t\t};\n\t\tthis.#app = BitrixVue.createApp(RecurringComponent, props);\n\n\t\tconst container = Tag.render`<div></div>`;\n\t\tthis.#layoutComponent = this.#app.mount(container);\n\n\t\treturn container;\n\t}\n\n\tclean(): void\n\t{\n\t\tthis.#app?.unmount();\n\t\tthis.#app = null;\n\t}\n\n\tfocus(): void\n\t{\n\t\tthis.#layoutComponent.focus();\n\t}\n}\n"],"names":["modeItems","Object","freeze","none","value","title","Loc","getMessage","multiple","single","getModeByValue","values","find","item","multipleLimits","no","date","times","getMultipleLimitByValue","multipleTypes","day","week","month","year","custom","getMultipleTypeByValue","offsetDateTypes","set","calculated","periods","titleGenitive","extended","getPeriods","withExtended","result","keys","forEach","periodName","getPeriodByValue","showPopupMenu","id","target","menu","PopupMenu","show","angle","width","offsetWidth","currentItem","popupWindow","setWidth","BX","pos","destroyPopupMenu","destroy","createDatePickerInstance","callback","DatePicker","selectedDates","Date","events","onSelectChange","event","getFormattedDate","DateTimeFormat","format","DatetimeConverter","getSiteDateFormat","resolveEntityTypeName","entityTypeId","CrmEntityType","isDynamicTypeByTypeId","enumeration","dealrecurring","names","deal","resolveName","FieldTitle","props","type","String","required","template","HiddenInput","name","Number","changeCallback","Function","default","watch","$nextTick","$refs","input","LOADER_SIZE","LOADER_TYPE","Loader","mounted","loader","UiLoader","size","render","beforeUnmount","hide","DEFAULT_TAB_ID","DocumentSelector","documentId","documents","Array","documentUrl","components","data","currentDocumentId","methods","showDocumentDialog","dialog","getDocumentDialog","setTargetNode","documentDialog","items","getItems","Dialog","dropdownMode","showAvatars","enableSearch","length","height","zIndex","tabs","getTabs","footer","getFooter","onSelectDocument","onDeselectDocument","getData","emitChanges","$emit","getCurrentDocument","document","Type","isObject","$Bitrix","stub","stubOptions","subtitle","arrow","push","createDialogItem","entityId","Tag","createNewDocumentHandler","showDocumentsSidePanel","url","SidePanel","Instance","open","cacheable","onClose","newValue","handler","removeItems","addItem","deep","computed","documentTitle","documentName","placeholder","SenderSelector","senderId","senders","currentSenderId","showSenderDialog","getSenderDialog","senderDialog","selectedItems","getSelectedItems","onSelectSender","onDeselectSender","sender","email","createNewSenderHandler","ProviderShowcase","openSlider","setSenderCallback","senderName","senderEmail","getCurrentSender","senderTitle","TemplateSelector","templateId","templates","currentTemplateId","showTemplateDialog","getTemplateDialog","templateDialog","onSelectTemplate","onDeselectTemplate","createNewEmailTemplateHandler","showEmailTemplatesList","urlParams","ENTITY_TYPE_ID","util","add_url_param","showEmailTemplatesSidePanel","isReInit","getCurrentTemplate","templateTitle","templateName","ToEmailSelector","communications","emailIds","preparedEmailIds","filter","emailId","map","currentEmailIds","Set","currentCommunications","initToEmailTagSelector","toEmailTagSelector","tagSelectorConfig","dialogOptions","compactView","onSelectEmail","onDeselectEmail","TagSelector","renderTo","toEmailContainer","communication","emails","getEmailById","flatMap","caption","getEmailSubtitle","typeLabel","addClientHandler","bind","add","delete","context","userSelectorDialog","targetNode","entities","getClientSelectorEntities","onSelectClient","isOpen","contact","dynamicLoad","dynamicSearch","options","showTab","showPhones","showMails","company","excludeMyCompany","selectedClient","resolveId","isBound","bindClient","Crm","EntityEditor","getDefault","reload","clientId","clientTypeId","ajaxParams","Promise","resolve","ajax","runAction","then","addTag","catch","showNotify","content","UI","Notification","Center","notify","Dom","clean","communicationsTitle","EmailFields","isFetchedConfig","isEnabled","config","updateConfig","setTemplateId","setDocumentId","setSenderId","setEmailIds","isEqualsArrays","a","b","sortedA","sort","sortedB","every","index","fetchConfig","ajaxParameters","Ajax","response","focus","isEnabledTemplate","getTags","containerClassList","fieldsBlockClassList","checkboxLabelClassList","isEnabledTitle","formattedIsEnabled","popupMenuMixin","popupMenuId","created","isArray","popupId","isStringFilled","CategorySelector","mixins","categoryId","categories","categoryTitle","currentCategoryTitle","currentCategory","VALUE","NAME","showCategorySelector","category","text","onclick","onChangeCategory","categorySelector","_","getMenuWindow","close","DateFields","isEditableDateStartField","Boolean","dateStart","offsetBeginDateValue","offsetBeginDateType","offsetCloseDateValue","offsetCloseDateType","isShowOffsetBeginDate","formData","currentDateStart","currentOffsetBeginDateValue","currentOffsetBeginDateType","currentOffsetCloseDateValue","currentOffsetCloseDateType","isEmitting","entityTypeName","getEntityTypeName","startDateTitle","formattedStartDate","beginDateTitle","closeDateTitle","offsetBeginDateTypeTitle","offsetCloseDateTypeTitle","offsetDateBeginTitle","emitChange","roundedCurrent","Math","round","roundedNew","datePicker","getTarget","getSelectedDate","getTime","showDateStartCalendar","showPeriodSelector","onSelectPeriodItem","ModeSelector","mode","modeTitle","currentModeTitle","showModeSelector","onChangeMode","modeSelector","MultipleLimitSelector","currentType","currentDate","currentTimes","dateTitle","timesTitle","currentMultipleLimitTitle","formattedDate","isDateLimit","isTimesLimit","showSelector","onChange","selector","showDatePicker","MultipleRepeatSelector","interval","currentInterval","currentItemTitle","MultipleTypeSelector","currentMultipleTypeTitle","SingleFields","prefixTitle","datePrefixTitle","onChangePeriod","periodSelector","Recurring","params","defaultOffsetType","getDefaultOffsetType","singleInterval","singleType","singleDateBefore","initDateInSeconds","multipleCustomIntervalValue","multipleCustomType","multipleDateStart","multipleTypeLimit","multipleDateLimit","multipleTimesLimit","multipleType","multipleLimit","isMultipleMode","isSingleMode","mustShowMultipleRepeatSelector","formattedMultipleDateLimit","formattedDateStart","formattedSingleDateBefore","dateForDateFieldsComponent","setDate","getDate","setMonth","getMonth","emailData","isCategoriesEnabled","isEmailEnabled","smartinvoice","beginDateType","isCalculated","closeDateType","fieldName","fromData","dateObject","parse","setMode","setMultipleTypeData","setMultipleRepeatData","setMultipleLimits","setSingleFields","setDateFields","setCategoryId","create","constructor","setData","getLayout","BitrixVue","createApp","RecurringComponent","container","mount","unmount"],"mappings":";;;;;;CASO,MAAMA,SAAoB,GAAGC,MAAM,CAACC,MAAM,CAAC;GACjDC,IAAI,EAAE;KACLC,KAAK,EAAE,GAAG;KACVC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,iCAAiC;IACvD;GACDC,QAAQ,EAAE;KACTJ,KAAK,EAAE,GAAG;KACVC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,qCAAqC;IAC3D;GACDE,MAAM,EAAE;KACPL,KAAK,EAAE,GAAG;KACVC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,mCAAmC;;CAE3D,CAAC,CAAC;AAEF,CAAO,SAASG,cAAc,CAACN,KAAa,EAC5C;GAAA;GACC,8BAAOH,MAAM,CAACU,MAAM,CAACX,SAAS,CAAC,CAACY,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACT,KAAK,KAAKA,KAAK,CAAC,kCAAI,IAAI;CAC7E;;CClBO,MAAMU,cAA8B,GAAGb,MAAM,CAACC,MAAM,CAAC;GAC3Da,EAAE,EAAE;KACHX,KAAK,EAAE,GAAG;KACVC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,yCAAyC;IAC/D;GACDS,IAAI,EAAE;KACLZ,KAAK,EAAE,GAAG;KACVC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,2CAA2C;IACjE;GACDU,KAAK,EAAE;KACNb,KAAK,EAAE,GAAG;KACVC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,4CAA4C;;CAEpE,CAAC,CAAC;AAEF,CAAO,SAASW,uBAAuB,CAACd,KAAa,EACrD;GAAA;GACC,8BAAOH,MAAM,CAACU,MAAM,CAACG,cAAc,CAAC,CAACF,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACT,KAAK,KAAKA,KAAK,CAAC,kCAAI,IAAI;CAClF;;CClBO,MAAMe,aAA4B,GAAGlB,MAAM,CAACC,MAAM,CAAC;GACzDkB,GAAG,EAAE;KACJhB,KAAK,EAAE,CAAC;KACRC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,yCAAyC;IAC/D;GACDc,IAAI,EAAE;KACLjB,KAAK,EAAE,CAAC;KACRC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,0CAA0C;IAChE;GACDe,KAAK,EAAE;KACNlB,KAAK,EAAE,CAAC;KACRC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,2CAA2C;IACjE;GACDgB,IAAI,EAAE;KACLnB,KAAK,EAAE,CAAC;KACRC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,0CAA0C;IAChE;GACDiB,MAAM,EAAE;KACPpB,KAAK,EAAE,CAAC;KACRC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,4CAA4C;;CAEpE,CAAC,CAAC;AAEF,CAAO,SAASkB,sBAAsB,CAACrB,KAAa,EACpD;GAAA;GACC,8BAAOH,MAAM,CAACU,MAAM,CAACQ,aAAa,CAAC,CAACP,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACT,KAAK,KAAKA,KAAK,CAAC,kCAAI,IAAI;CACjF;;CCnCO,MAAMsB,eAAuC,GAAGzB,MAAM,CAACC,MAAM,CAAC;GACpEyB,GAAG,EAAE,CAAC;GACNC,UAAU,EAAE;CACb,CAAC,CAAC;;CCQK,MAAMC,OAAgB,GAAG5B,MAAM,CAACC,MAAM,CAAC;GAC7CkB,GAAG,EAAE;KACJhB,KAAK,EAAE,CAAC;KACRC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC;KACzDuB,aAAa,EAAExB,aAAG,CAACC,UAAU,CAAC,gDAAgD,CAAC;KAC/EwB,QAAQ,EAAE;IACV;GACDV,IAAI,EAAE;KACLjB,KAAK,EAAE,CAAC;KACRC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;KAC1DuB,aAAa,EAAExB,aAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;KAChFwB,QAAQ,EAAE;IACV;GACDT,KAAK,EAAE;KACNlB,KAAK,EAAE,CAAC;KACRC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;KAC3DuB,aAAa,EAAExB,aAAG,CAACC,UAAU,CAAC,kDAAkD,CAAC;KACjFwB,QAAQ,EAAE;IACV;GACDR,IAAI,EAAE;KACLnB,KAAK,EAAE,CAAC;KACRC,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;KAC1DwB,QAAQ,EAAE;;CAEZ,CAAC,CAAC;AAEF,CAAO,SAASC,UAAU,CAACC,YAAqB,GAAG,KAAK,EACxD;GACC,IAAIA,YAAY,EAChB;KACC,OAAOJ,OAAO;;GAGf,MAAMK,MAAM,GAAG,EAAE;GAEjBjC,MAAM,CAACkC,IAAI,CAACN,OAAO,CAAC,CAACO,OAAO,CAAEC,UAAU,IAAK;KAC5C,IAAIR,OAAO,CAACQ,UAAU,CAAC,CAACN,QAAQ,KAAK,KAAK,EAC1C;OACCG,MAAM,CAACG,UAAU,CAAC,GAAGR,OAAO,CAACQ,UAAU,CAAC;;IAEzC,CAAC;GAEF,OAAOpC,MAAM,CAACC,MAAM,CAACgC,MAAM,CAAC;CAC7B;AAEA,CAAO,SAASI,gBAAgB,CAAClC,KAAa,EAC9C;GAAA;GACC,8BAAOH,MAAM,CAACU,MAAM,CAACkB,OAAO,CAAC,CAACjB,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACT,KAAK,KAAKA,KAAK,CAAC,kCAAI,IAAI;CAC3E;;CCtDO,SAASmC,aAAa,CAACC,EAAU,EAAEC,MAAmB,EAAEC,IAAW,EAC1E;GACCC,oBAAS,CAACC,IAAI,CACbJ,EAAE,EACFC,MAAM,EACNC,IAAI,EACJ;KACCG,KAAK,EAAE,KAAK;KACZC,KAAK,EAAEL,MAAM,CAACM,WAAW,GAAG;IAC5B,CACD;GAEDJ,oBAAS,CAACK,WAAW,CAACC,WAAW,CAACC,QAAQ,CAACC,EAAE,CAACC,GAAG,CAACX,MAAM,CAAC,CAACK,KAAK,CAAC;CACjE;AAEA,CAAO,SAASO,gBAAgB,CAACb,EAAU,EAC3C;GACCG,oBAAS,CAACW,OAAO,CAACd,EAAE,CAAC;CACtB;AAEA,CAAO,SAASe,wBAAwB,CAACvC,IAAY,EAAEwC,QAAkB,EACzE;GACC,OAAO,IAAIC,wBAAU,CAAC;KACrBC,aAAa,EAAE,CAAC,IAAIC,IAAI,CAAC3C,IAAI,CAAC,CAAC;KAC/B4C,MAAM,EAAE;OACPC,cAAc,EAAGC,KAAK,IAAK;SAC1BN,QAAQ,CAACM,KAAK,CAAC;;;IAGjB,CAAC;CACH;AAEA,CAAO,SAASC,gBAAgB,CAAC/C,IAAY,EAC7C;GACC,OAAOgD,wBAAc,CAACC,MAAM,CAACC,oCAAiB,CAACC,iBAAiB,EAAE,EAAEnD,IAAI,CAAC;CAC1E;AAEA,CAAO,SAASoD,qBAAqB,CAACC,YAAoB,EAC1D;GACC,IAAIlB,EAAE,CAACmB,aAAa,CAACC,qBAAqB,CAACF,YAAY,CAAC,EACxD;KACC,OAAO,SAAS;;GAGjB,OACCA,YAAY,KAAKlB,EAAE,CAACmB,aAAa,CAACE,WAAW,CAACC,aAAa,GACxDtB,EAAE,CAACmB,aAAa,CAACI,KAAK,CAACC,IAAI,GAC3BxB,EAAE,CAACmB,aAAa,CAACM,WAAW,CAACP,YAAY,CAAC;CAE/C;;CCtDO,MAAMQ,UAAU,GAAG;GACzBC,KAAK,EAAE;KACNzE,KAAK,EAAE;OACN0E,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;;GAGDC,QAAQ,EAAG;;;;;CAKZ,CAAC;;CCdM,MAAMC,WAAW,GAAG;GAC1BL,KAAK,EAAE;KACNM,IAAI,EAAE;OACLL,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACD7E,KAAK,EAAE;OACN2E,IAAI,EAAE,CAACC,MAAM,EAAEK,MAAM,CAAC;OACtBJ,QAAQ,EAAE;MACV;KACDK,cAAc,EAAE;OACfP,IAAI,EAAEQ,QAAQ;OACdC,OAAO,EAAE,MAAM;;IAEhB;GAEDC,KAAK,EAAE;KACNrF,KAAK,GACL;OACC,KAAK,IAAI,CAACsF,SAAS,CAAC,MAAM;SACzB,IAAI,CAACJ,cAAc,CAAC,IAAI,CAACK,KAAK,CAACC,KAAK,CAAC;QACrC,CAAC;;IAEH;;GAGDV,QAAQ,EAAG;;;CAGZ,CAAC;;CC3BD,MAAMW,WAAW,GAAG,IAAI;CACxB,MAAMC,WAAW,GAAG,QAAQ;;CAE5B;AACA,CAAO,MAAMC,MAAM,GAAG;GACrBC,OAAO,GACP;KACC,IAAI,CAACC,MAAM,GAAG,IAAIC,gBAAQ,CAAC;OAC1BzD,MAAM,EAAE,IAAI,CAACkD,KAAK,CAACM,MAAM;OACzBlB,IAAI,EAAEe,WAAW;OACjBK,IAAI,EAAEN;MACN,CAAC;KACF,IAAI,CAACI,MAAM,CAACG,MAAM,EAAE;KACpB,IAAI,CAACH,MAAM,CAACrD,IAAI,EAAE;IAClB;GAEDyD,aAAa,GACb;KACC,IAAI,CAACJ,MAAM,CAACK,IAAI,EAAE;KAClB,IAAI,CAACL,MAAM,GAAG,IAAI;IAClB;GAEDf,QAAQ,EAAG;;;CAGZ,CAAC;;;;AC3BD,CAMA,MAAMqB,cAAc,GAAG,SAAS;AAEhC,CAAO,MAAMC,gBAAgB,GAAG;GAC/B1B,KAAK,EAAE;KACN2B,UAAU,EAAE;OACX1B,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDyB,SAAS,EAAE;OACV3B,IAAI,EAAE4B,KAAK;OACX1B,QAAQ,EAAE;MACV;KACD2B,WAAW,EAAE;OACZ7B,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GAED4B,UAAU,EAAE;KACXhC;IACA;GAEDiC,IAAI,GACJ;KACC,OAAO;OACNC,iBAAiB,EAAE,IAAI,CAACN;MACxB;IACD;GAEDO,OAAO,EAAE;KACRC,kBAAkB,CAACnD,KAAgB,EACnC;OACC,MAAMoD,MAAM,GAAG,IAAI,CAACC,iBAAiB,EAAE;OAEvCD,MAAM,CAACE,aAAa,CAACtD,KAAK,CAACrB,MAAM,CAAC;OAClCyE,MAAM,CAACtE,IAAI,EAAE;MACb;KAEDuE,iBAAiB,GACjB;OACC,IAAI,CAAC,IAAI,CAACE,cAAc,EACxB;SACC,MAAMC,KAAK,GAAG,IAAI,CAACC,QAAQ,EAAE;SAE7B,IAAI,CAACF,cAAc,GAAG,IAAIG,wBAAM,CAAC;WAChChH,QAAQ,EAAE,KAAK;WACfiH,YAAY,EAAE,IAAI;WAClBC,WAAW,EAAE,IAAI;WACjBC,YAAY,EAAEL,KAAK,CAACM,MAAM,GAAG,CAAC;WAC9B9E,KAAK,EAAE,GAAG;WACV+E,MAAM,EAAE,GAAG;WACXC,MAAM,EAAE,IAAI;WACZR,KAAK;WACLS,IAAI,EAAE,IAAI,CAACC,OAAO,EAAE;WACpBC,MAAM,EAAE,IAAI,CAACC,SAAS,EAAE;WACxBtE,MAAM,EAAE;aACP,eAAe,EAAE,IAAI,CAACuE,gBAAgB;aACtC,iBAAiB,EAAE,IAAI,CAACC;;UAEzB,CAAC;;OAGH,OAAO,IAAI,CAACf,cAAc;MAC1B;KAEDc,gBAAgB,CAACrE,KAAgB,EACjC;OACC,MAAM;SAAEjD,IAAI,EAAE;WAAE2B;;QAAM,GAAGsB,KAAK,CAACuE,OAAO,EAAE;OACxC,IAAI,CAACtB,iBAAiB,GAAGvE,EAAE;OAE3B,IAAI,CAAC8F,WAAW,EAAE;MAClB;KAEDF,kBAAkB,GAClB;OACC,IAAI,CAACrB,iBAAiB,GAAG,IAAI;OAE7B,IAAI,CAACuB,WAAW,EAAE;MAClB;KAEDA,WAAW,GACX;OACC,KAAK,IAAI,CAAC5C,SAAS,CAAC,MAAM;SACzB,IAAI,CAAC6C,KAAK,CAAC,UAAU,EAAE,IAAI,CAACxB,iBAAiB,CAAC;QAC9C,CAAC;MACF;KAEDyB,kBAAkB,GAClB;OACC,MAAMC,QAAQ,GAAG,IAAI,CAAC/B,SAAS,CAAC9F,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAAC2B,EAAE,KAAK,IAAI,CAACuE,iBAAiB,CAAC;OAElF,OAAO2B,cAAI,CAACC,QAAQ,CAACF,QAAQ,CAAC,GAAGA,QAAQ,GAAG,IAAI;MAChD;KAEDT,OAAO,GACP;OACC,OAAO,CACN;SACCxF,EAAE,EAAE+D,cAAc;SAClBlG,KAAK,EAAE,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,yDAAyD,CAAC;SAC7FsI,IAAI,EAAE,IAAI;SACVC,WAAW,EAAE;WACZzI,KAAK,EAAE,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,iEAAiE,CAAC;WACrGwI,QAAQ,EAAE,IAAI,CAACH,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,oEAAoE,CAAC;WAC3GyI,KAAK,EAAE;;QAER,CACD;MACD;KAEDzB,QAAQ,GACR;OACC,MAAMD,KAAK,GAAG,EAAE;OAChB,IAAI,CAACZ,SAAS,CAACtE,OAAO,CAAE8C,QAAQ,IAAK;SACpCoC,KAAK,CAAC2B,IAAI,CAAC,IAAI,CAACC,gBAAgB,CAAChE,QAAQ,CAAC,CAAC;QAC3C,CAAC;OAEF,OAAOoC,KAAK;MACZ;KAED4B,gBAAgB,CAAChE,QAAgB,EACjC;OACC,OAAO;SACN1C,EAAE,EAAE0C,QAAQ,CAAC1C,EAAE;SACfnC,KAAK,EAAE6E,QAAQ,CAAC7E,KAAK;SACrB8I,QAAQ,EAAE5C,cAAc;SACxBwB,IAAI,EAAExB;QACN;MACD;KAED2B,SAAS,GACT;OACC,OAAOkB,aAAG,CAAChD,MAAM,cAAC;;kFAE2D,CAAgC;QAC1G,CAAqE;;;IAGxE,GAJ+E,IAAI,CAACiD,wBAAwB,EACvG,IAAI,CAACT,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC;MAIvE;KAED8I,wBAAwB,GACxB;OACC,IAAI,CAACC,sBAAsB,CAAC,IAAI,CAAC1C,WAAW,CAAC;MAC7C;KAED0C,sBAAsB,CAACC,GAAW,EAClC;OACCC,sBAAS,CAACC,QAAQ,CAACC,IAAI,CAACH,GAAG,EAAE;SAC5BI,SAAS,EAAE,KAAK;SAChB7G,KAAK,EAAE,IAAI;SACXc,MAAM,EAAE;WACPgG,OAAO,EAAE,YAAY;aACpB,IAAI,CAACrB,KAAK,CAAC,UAAU,CAAC;;;QAGxB,CAAC;;IAEH;GAED9C,KAAK,EAAE;KACNgB,UAAU,CAACoD,QAAgB,EAC3B;OACC,IAAIxE,MAAM,CAAC,IAAI,CAACoB,UAAU,CAAC,KAAKpB,MAAM,CAAC,IAAI,CAAC0B,iBAAiB,CAAC,EAC9D;SACC,IAAI,CAACA,iBAAiB,GAAG1B,MAAM,CAACwE,QAAQ,CAAC;;MAE1C;KACDnD,SAAS,EAAE;OACVoD,OAAO,GACP;SACC,MAAM5C,MAAM,GAAG,IAAI,CAACC,iBAAiB,EAAE;SACvCD,MAAM,CAAC6C,WAAW,EAAE;SAEpB,IAAI,CAACrD,SAAS,CAACtE,OAAO,CAAE8C,QAAQ,IAAK;WACpCgC,MAAM,CAAC8C,OAAO,CAAC,IAAI,CAACd,gBAAgB,CAAChE,QAAQ,CAAC,CAAC;UAC/C,CAAC;QACF;OACD+E,IAAI,EAAE;;IAEP;GAEDC,QAAQ,EAAE;KACTC,aAAa,GACb;OACC,OAAO,IAAI,CAACvB,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,qDAAqD,CAAC;MACzF;KACD6J,YAAY,GACZ;OACC,MAAM3B,QAAQ,GAAG,IAAI,CAACD,kBAAkB,EAAE;OAE1C,OAAOC,QAAQ,GAAGA,QAAQ,CAACpI,KAAK,GAAG,IAAI;MACvC;KACDgK,WAAW,GACX;OACC,OAAO,IAAI,CAACzB,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;;IAExF;;GAGD2E,QAAQ,EAAG;;;;;;;;;;;;;;;;;CAiBZ,CAAC;;;;AC/ND,CAMA,MAAMqB,gBAAc,GAAG,SAAS;AAEhC,CAAO,MAAM+D,cAAc,GAAG;GAC7BxF,KAAK,EAAE;KACNyF,QAAQ,EAAE;OACTxF,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDuF,OAAO,EAAE;OACRzF,IAAI,EAAE4B,KAAK;OACX1B,QAAQ,EAAE;;IAEX;GAED4B,UAAU,EAAE;KACXhC;IACA;GAEDiC,IAAI,GACJ;KACC,OAAO;OACN2D,eAAe,EAAE,IAAI,CAACF;MACtB;IACD;GAEDvD,OAAO,EAAE;KACR0D,gBAAgB,CAAC5G,KAAgB,EACjC;OACC,MAAMoD,MAAM,GAAG,IAAI,CAACyD,eAAe,EAAE;OAErCzD,MAAM,CAACE,aAAa,CAACtD,KAAK,CAACrB,MAAM,CAAC;OAClCyE,MAAM,CAACtE,IAAI,EAAE;MACb;KAED+H,eAAe,GACf;OACC,IAAI,CAAC,IAAI,CAACC,YAAY,EACtB;SACC,MAAMtD,KAAK,GAAG,IAAI,CAACC,QAAQ,EAAE;SAE7B,IAAI,CAACqD,YAAY,GAAG,IAAIpD,wBAAM,CAAC;WAC9BhH,QAAQ,EAAE,KAAK;WACfiH,YAAY,EAAE,IAAI;WAClBC,WAAW,EAAE,IAAI;WACjBC,YAAY,EAAEL,KAAK,CAACM,MAAM,GAAG,CAAC;WAC9B9E,KAAK,EAAE,GAAG;WACV+E,MAAM,EAAE,GAAG;WACXC,MAAM,EAAE,IAAI;WACZC,IAAI,EAAE,IAAI,CAACC,OAAO,EAAE;WACpBV,KAAK;WACLuD,aAAa,EAAE,IAAI,CAACC,gBAAgB,EAAE;WACtC7C,MAAM,EAAE,IAAI,CAACC,SAAS,EAAE;WACxBtE,MAAM,EAAE;aACP,eAAe,EAAE,IAAI,CAACmH,cAAc;aACpC,iBAAiB,EAAE,IAAI,CAACC;;UAEzB,CAAC;;OAGH,OAAO,IAAI,CAACJ,YAAY;MACxB;KAED5C,OAAO,GACP;OACC,OAAO,CACN;SACCxF,EAAE,EAAE+D,gBAAc;SAClBlG,KAAK,EAAE,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;SACrFsI,IAAI,EAAE,IAAI;SACVC,WAAW,EAAE;WACZzI,KAAK,EAAE,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;WACrFwI,QAAQ,EAAE,IAAI,CAACH,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,kEAAkE,CAAC;WACzGyI,KAAK,EAAE;;QAER,CACD;MACD;KAEDzB,QAAQ,GACR;OACC,MAAMD,KAAK,GAAG,EAAE;OAChB,IAAI,CAACkD,OAAO,CAACpI,OAAO,CAAE6I,MAAM,IAAK;SAChC3D,KAAK,CAAC2B,IAAI,CAAC,IAAI,CAACC,gBAAgB,CAAC+B,MAAM,CAAC,CAAC;QACzC,CAAC;OAEF,OAAO3D,KAAK;MACZ;KAEDwD,gBAAgB,GAChB;OACC,MAAMxD,KAAK,GAAG,EAAE;OAChB,IAAI,CAACkD,OAAO,CAACpI,OAAO,CAAE6I,MAAM,IAAK;SAChC,IAAI5F,MAAM,CAAC,IAAI,CAACkF,QAAQ,CAAC,KAAKlF,MAAM,CAAC4F,MAAM,CAACzI,EAAE,CAAC,EAC/C;WACC8E,KAAK,CAAC2B,IAAI,CAAC,IAAI,CAACC,gBAAgB,CAAC+B,MAAM,CAAC,CAAC;;QAE1C,CAAC;OAEF,OAAO3D,KAAK;MACZ;KAED4B,gBAAgB,CAAC+B,MAAc,EAC/B;OACC,OAAO;SACNzI,EAAE,EAAEyI,MAAM,CAACzI,EAAE;SACbnC,KAAK,EAAE4K,MAAM,CAACC,KAAK;SACnBnC,QAAQ,EAAEkC,MAAM,CAAC7F,IAAI;SACrB+D,QAAQ,EAAE5C,gBAAc;SACxBwB,IAAI,EAAExB;QACN;MACD;KAED2B,SAAS,GACT;OACC,OAAOkB,aAAG,CAAChD,MAAM,oBAAC;;kFAE2D,CAA8B;QACxG,CAAmE;;;IAGtE,GAJ+E,IAAI,CAAC+E,sBAAsB,EACrG,IAAI,CAACvC,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;MAIrE;KAED4K,sBAAsB,GACtB;OACCC,yCAAgB,CAACC,UAAU,CAAC;SAC3BC,iBAAiB,EAAE,CAACf,QAAyB,EAAEgB,UAAkB,EAAEC,WAAmB,KAAK;WAC1F,IAAI,CAACjD,KAAK,CAAC,UAAU,CAAC;;QAEvB,CAAC;MACF;KAEDwC,cAAc,CAACjH,KAAgB,EAC/B;OACC,MAAM;SAAEjD,IAAI,EAAE;WAAE2B;;QAAM,GAAGsB,KAAK,CAACuE,OAAO,EAAE;OACxC,IAAI,CAACoC,eAAe,GAAGjI,EAAE;OAEzB,IAAI,CAAC8F,WAAW,EAAE;MAClB;KAED0C,gBAAgB,GAChB;OACC,IAAI,CAACP,eAAe,GAAG,IAAI;OAE3B,IAAI,CAACnC,WAAW,EAAE;MAClB;KAEDA,WAAW,GACX;OACC,IAAI,CAACC,KAAK,CAAC,UAAU,EAAE,IAAI,CAACkC,eAAe,CAAC;MAC5C;KAEDgB,gBAAgB,GAChB;OACC,MAAMR,MAAM,GAAG,IAAI,CAACT,OAAO,CAAC5J,IAAI,CAAEC,IAAI,IAAKwE,MAAM,CAACxE,IAAI,CAAC2B,EAAE,CAAC,KAAK6C,MAAM,CAAC,IAAI,CAACkF,QAAQ,CAAC,CAAC;OAErF,OAAO7B,cAAI,CAACC,QAAQ,CAACsC,MAAM,CAAC,GAAGA,MAAM,GAAG,IAAI;;IAE7C;GAEDxF,KAAK,EAAE;KACN8E,QAAQ,CAACV,QAAQ,EACjB;OACC,IAAIxE,MAAM,CAAC,IAAI,CAACkF,QAAQ,CAAC,KAAKlF,MAAM,CAAE,IAAI,CAACoF,eAAe,CAAE,EAC5D;SACC,IAAI,CAACA,eAAe,GAAGpF,MAAM,CAACwE,QAAQ,CAAC;;MAExC;KACDW,OAAO,EAAE;OACRV,OAAO,GACP;SACC,MAAMc,YAAY,GAAG,IAAI,CAACD,eAAe,EAAE;SAC3CC,YAAY,CAACb,WAAW,EAAE;SAE1B,IAAI,CAACS,OAAO,CAACpI,OAAO,CAAE6I,MAAM,IAAK;WAChCL,YAAY,CAACZ,OAAO,CAAC,IAAI,CAACd,gBAAgB,CAAC+B,MAAM,CAAC,CAAC;UACnD,CAAC;;;;QAIF;;OACDhB,IAAI,EAAE;;IAEP;GAEDC,QAAQ,EAAE;KACTwB,WAAW,GACX;OACC,OAAO,IAAI,CAAC9C,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC;MACzE;KACDgL,UAAU,GACV;OACC,MAAMN,MAAM,GAAG,IAAI,CAACQ,gBAAgB,EAAE;OAEtC,OAAOR,MAAM,GAAGA,MAAM,CAACC,KAAK,GAAG,IAAI;MACnC;KACDb,WAAW,GACX;OACC,OAAO,IAAI,CAACzB,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;;IAEtF;;GAGD2E,QAAQ,EAAG;;;;;;;;;;;;;;;;;CAiBZ,CAAC;;;;AClOD,CAMA,MAAMqB,gBAAc,GAAG,SAAS;AAEhC,CAAO,MAAMoF,gBAAgB,GAAG;GAC/B7G,KAAK,EAAE;KACNT,YAAY,EAAE;OACbU,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACD2G,UAAU,EAAE;OACX7G,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACD4G,SAAS,EAAE;OACV9G,IAAI,EAAE4B,KAAK;OACX1B,QAAQ,EAAE;;IAEX;GAED4B,UAAU,EAAE;KACXhC;IACA;GAEDiC,IAAI,GACJ;KACC,OAAO;OACNgF,iBAAiB,EAAE,IAAI,CAACF;MACxB;IACD;GAED5E,OAAO,EAAE;KACR+E,kBAAkB,CAACjI,KAAgB,EACnC;OACC,MAAMoD,MAAM,GAAG,IAAI,CAAC8E,iBAAiB,EAAE;OAEvC9E,MAAM,CAACE,aAAa,CAACtD,KAAK,CAACrB,MAAM,CAAC;OAClCyE,MAAM,CAACtE,IAAI,EAAE;MACb;KAEDoJ,iBAAiB,GACjB;OACC,IAAI,CAAC,IAAI,CAACC,cAAc,EACxB;SACC,MAAM3E,KAAK,GAAG,IAAI,CAACC,QAAQ,EAAE;SAE7B,IAAI,CAAC0E,cAAc,GAAG,IAAIzE,wBAAM,CAAC;WAChChH,QAAQ,EAAE,KAAK;WACfiH,YAAY,EAAE,IAAI;WAClBC,WAAW,EAAE,IAAI;WACjBC,YAAY,EAAEL,KAAK,CAACM,MAAM,GAAG,CAAC;WAC9B9E,KAAK,EAAE,GAAG;WACV+E,MAAM,EAAE,GAAG;WACXC,MAAM,EAAE,IAAI;WACZC,IAAI,EAAE,IAAI,CAACC,OAAO,EAAE;WACpBV,KAAK;WACLuD,aAAa,EAAE,IAAI,CAACC,gBAAgB,EAAE;WACtC7C,MAAM,EAAE,IAAI,CAACC,SAAS,EAAE;WACxBtE,MAAM,EAAE;aACP,eAAe,EAAE,IAAI,CAACsI,gBAAgB;aACtC,iBAAiB,EAAE,IAAI,CAACC;;UAEzB,CAAC;;OAGH,OAAO,IAAI,CAACF,cAAc;MAC1B;KAEDjE,OAAO,GACP;OACC,OAAO,CACN;SACCxF,EAAE,EAAE+D,gBAAc;SAClBlG,KAAK,EAAE,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;SACvFsI,IAAI,EAAE,IAAI;SACVC,WAAW,EAAE;WACZzI,KAAK,EAAE,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;WACvFwI,QAAQ,EAAE,IAAI,CAACH,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,oEAAoE,CAAC;WAC3GyI,KAAK,EAAE;;QAER,CACD;MACD;KAEDzB,QAAQ,GACR;OACC,MAAMD,KAAK,GAAG,EAAE;OAChB,IAAI,CAACuE,SAAS,CAACzJ,OAAO,CAAE8C,QAAQ,IAAK;SACpCoC,KAAK,CAAC2B,IAAI,CAAC,IAAI,CAACC,gBAAgB,CAAChE,QAAQ,CAAC,CAAC;QAC3C,CAAC;OAEF,OAAOoC,KAAK;MACZ;KAEDwD,gBAAgB,GAChB;OACC,MAAMxD,KAAK,GAAG,EAAE;OAChB,IAAI,CAACuE,SAAS,CAACzJ,OAAO,CAAE8C,QAAQ,IAAK;SACpC,IAAIG,MAAM,CAAC,IAAI,CAACuG,UAAU,CAAC,KAAKvG,MAAM,CAACH,QAAQ,CAAC1C,EAAE,CAAC,EACnD;WACC8E,KAAK,CAAC2B,IAAI,CAAC,IAAI,CAACC,gBAAgB,CAAChE,QAAQ,CAAC,CAAC;;QAE5C,CAAC;OAEF,OAAOoC,KAAK;MACZ;KAED4B,gBAAgB,CAAChE,QAAgB,EACjC;OACC,OAAO;SACN1C,EAAE,EAAE0C,QAAQ,CAAC1C,EAAE;SACfnC,KAAK,EAAE6E,QAAQ,CAAC7E,KAAK;SACrB8I,QAAQ,EAAE5C,gBAAc;SACxBwB,IAAI,EAAExB;QACN;MACD;KAED2B,SAAS,GACT;OACC,OAAOkB,aAAG,CAAChD,MAAM,oBAAC;;kFAE2D,CAAqC;QAC/G,CAAqE;;sDAEvB,CAA8B;QAC5E,CAA4E;;;IAG/E,GAP+E,IAAI,CAACgG,6BAA6B,EAC5G,IAAI,CAACxD,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,EAEpB,IAAI,CAAC8L,sBAAsB,EACzE,IAAI,CAACzD,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC;MAI9E;KAED6L,6BAA6B,GAC7B;OACC,IAAI7C,GAAG,GAAG,gCAAgC;OAE1C,MAAM+C,SAAS,GAAG;SACjBC,cAAc,EAAE,IAAI,CAAClI;QACrB;OAEDkF,GAAG,GAAGpG,EAAE,CAACqJ,IAAI,CAACC,aAAa,CAAClD,GAAG,EAAE+C,SAAS,CAAC;OAE3C,IAAI,CAACI,2BAA2B,CAACnD,GAAG,EAAE,IAAI,CAAC;MAC3C;KAED8C,sBAAsB,GACtB;OACC,MAAM9C,GAAG,GAAG,4BAA4B;OAExC,IAAI,CAACmD,2BAA2B,CAACnD,GAAG,EAAE,KAAK,CAAC;MAC5C;KAEDmD,2BAA2B,CAACnD,GAAW,EAAEoD,QAAiB,EAC1D;OACCnD,sBAAS,CAACC,QAAQ,CAACC,IAAI,CAACH,GAAG,EAAE;SAC5BI,SAAS,EAAE,KAAK;SAChB7G,KAAK,EAAE,IAAI;SACXc,MAAM,EAAE;WACPgG,OAAO,EAAE,YAAY;aACpB,IAAI+C,QAAQ,EACZ;eACC,IAAI,CAACpE,KAAK,CAAC,UAAU,CAAC;;;;QAIzB,CAAC;MACF;KAED2D,gBAAgB,CAACpI,KAAgB,EACjC;OACC,MAAM;SAAEjD,IAAI,EAAE;WAAE2B;;QAAM,GAAGsB,KAAK,CAACuE,OAAO,EAAE;OACxC,IAAI,CAACyD,iBAAiB,GAAGtJ,EAAE;OAE3B,IAAI,CAAC8F,WAAW,EAAE;MAClB;KAED6D,kBAAkB,GAClB;OACC,IAAI,CAACL,iBAAiB,GAAG,IAAI;OAE7B,IAAI,CAACxD,WAAW,EAAE;MAClB;KAEDA,WAAW,GACX;OACC,KAAK,IAAI,CAAC5C,SAAS,CAAC,MAAM;SACzB,IAAI,CAAC6C,KAAK,CAAC,UAAU,EAAE,IAAI,CAACuD,iBAAiB,CAAC;QAC9C,CAAC;MACF;KAEDc,kBAAkB,GAClB;OACC,MAAM1H,QAAQ,GAAG,IAAI,CAAC2G,SAAS,CAACjL,IAAI,CAAEC,IAAI,IAAKwE,MAAM,CAACxE,IAAI,CAAC2B,EAAE,CAAC,KAAK6C,MAAM,CAAC,IAAI,CAACyG,iBAAiB,CAAC,CAAC;OAElG,OAAOpD,cAAI,CAACC,QAAQ,CAACzD,QAAQ,CAAC,GAAGA,QAAQ,GAAG,IAAI;;IAEjD;GAEDO,KAAK,EAAE;KACNmG,UAAU,CAAC/B,QAAQ,EACnB;OACC,IAAIxE,MAAM,CAAC,IAAI,CAACuG,UAAU,CAAC,KAAKvG,MAAM,CAAC,IAAI,CAACyG,iBAAiB,CAAC,EAC9D;SACC,IAAI,CAACA,iBAAiB,GAAGzG,MAAM,CAACwE,QAAQ,CAAC;;MAE1C;KACDgC,SAAS,EAAE;OACV/B,OAAO,GACP;SACC,MAAMmC,cAAc,GAAG,IAAI,CAACD,iBAAiB,EAAE;SAC/CC,cAAc,CAAClC,WAAW,EAAE;SAE5B,IAAI,CAAC8B,SAAS,CAACzJ,OAAO,CAAE8C,QAAQ,IAAK;WACpC+G,cAAc,CAACjC,OAAO,CAAC,IAAI,CAACd,gBAAgB,CAAChE,QAAQ,CAAC,CAAC;UACvD,CAAC;;;;QAIF;;OACD+E,IAAI,EAAE;;IAEP;GAEDC,QAAQ,EAAE;KACT2C,aAAa,GACb;OACC,OAAO,IAAI,CAACjE,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;MAC3E;KACDuM,YAAY,GACZ;OACC,MAAM5H,QAAQ,GAAG,IAAI,CAAC0H,kBAAkB,EAAE;OAE1C,OAAO1H,QAAQ,GAAGA,QAAQ,CAAC7E,KAAK,GAAG,IAAI;MACvC;KACDgK,WAAW,GACX;OACC,OAAO,IAAI,CAACzB,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;;IAExF;;GAGD2E,QAAQ,EAAG;;;;;;;;;;;;;;;;;CAiBZ,CAAC;;;;ACrQD,CAKA,MAAMqB,gBAAc,GAAG,SAAS;AAEhC,CAAO,MAAMwG,eAAe,GAAG;GAC9BjI,KAAK,EAAE;KACNqE,QAAQ,EAAE;OACTpE,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDZ,YAAY,EAAE;OACbU,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACD+H,cAAc,EAAE;OACfjI,IAAI,EAAE4B,KAAK;OACX1B,QAAQ,EAAE,IAAI;OACdO,OAAO,EAAE;MACT;KACDyH,QAAQ,EAAE;OACTlI,IAAI,EAAE4B,KAAK;OACX1B,QAAQ,EAAE;;IAEX;GAED4B,UAAU,EAAE;KACXhC;IACA;GAEDiC,IAAI,GACJ;KACC,MAAMoG,gBAAgB,GAAG,IAAI,CAACD,QAAQ,CACpCE,MAAM,CAAEC,OAAO,IAAKA,OAAO,GAAG,CAAC,CAAC,CAChCC,GAAG,CAAED,OAAO,IAAK/H,MAAM,CAAC+H,OAAO,CAAC,CAAC;KAGnC,OAAO;OACNE,eAAe,EAAE,IAAIC,GAAG,CAACL,gBAAgB,CAAC;OAC1CM,qBAAqB,EAAE,IAAI,CAACR;MAC5B;IACD;GAEDhH,OAAO,GACP;KACC,IAAI,CAACyH,sBAAsB,EAAE;IAC7B;GAEDzG,OAAO,EAAE;KACRyG,sBAAsB,GACtB;OACC,IAAI,CAAC,IAAI,CAACC,kBAAkB,EAC5B;SACC,MAAMC,iBAAiB,GAAG;WACzBnN,QAAQ,EAAE,IAAI;WACdoN,aAAa,EAAE;aACd9K,KAAK,EAAE,GAAG;aACV+E,MAAM,EAAE,GAAG;aACXrH,QAAQ,EAAE,KAAK;aACfiH,YAAY,EAAE,IAAI;aAClBC,WAAW,EAAE,IAAI;aACjBmG,WAAW,EAAE,KAAK;aAClB9F,IAAI,EAAE,IAAI,CAACC,OAAO,EAAE;aACpBV,KAAK,EAAE,IAAI,CAACC,QAAQ,EAAE;aACtBsD,aAAa,EAAE,IAAI,CAACC,gBAAgB,EAAE;aACtC7C,MAAM,EAAE,IAAI,CAACkB,QAAQ,GAAG,CAAC,GAAG,IAAI,CAACjB,SAAS,EAAE,GAAG,IAAI;aACnDtE,MAAM,EAAE;eACP,eAAe,EAAE,IAAI,CAACkK,aAAa;eACnC,iBAAiB,EAAE,IAAI,CAACC;;;UAG1B;SAED,IAAI,CAACL,kBAAkB,GAAG,IAAIM,6BAAW,CAACL,iBAAiB,CAAC;SAC5D,IAAI,CAACD,kBAAkB,CAACO,QAAQ,CAAC,IAAI,CAACtI,KAAK,CAACuI,gBAAgB,CAAC;;MAE9D;KAEDlG,OAAO,GACP;OACC,IAAIe,QAAQ,GAAG,oEAAoE;OACnF,IAAI,IAAI,CAACI,QAAQ,IAAI,CAAC,EACtB;SACCJ,QAAQ,GAAI,GAAEA,QAAS,MAAK;;OAG7B,OAAO,CACN;SACCvG,EAAE,EAAE+D,gBAAc;SAClBlG,KAAK,EAAE,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC;SAC/EuI,WAAW,EAAE;WACZzI,KAAK,EAAE,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;WACvFwI,QAAQ,EAAE,IAAI,CAACH,OAAO,CAACtI,GAAG,CAACC,UAAU,CAACwI,QAAQ,CAAC;WAC/CC,KAAK,EAAE;;QAER,CACD;MACD;KAEDzB,QAAQ,GACR;OACC,MAAMD,KAAK,GAAG,EAAE;OAChB,IAAI,CAACkG,qBAAqB,CAACpL,OAAO,CAAE+L,aAAa,IAAK;SACrDA,aAAa,CAACC,MAAM,CAAChM,OAAO,CAAE8I,KAAK,IAAK;WACvC5D,KAAK,CAAC2B,IAAI,CAAC,IAAI,CAACC,gBAAgB,CAACgC,KAAK,EAAEiD,aAAa,CAAC,CAAC;UACvD,CAAC;QACF,CAAC;OAEF,OAAO7G,KAAK;MACZ;KAEDwD,gBAAgB,GAChB;OACC,MAAMD,aAAa,GAAG,EAAE;OAExB,IAAI,CAACyC,eAAe,CAAClL,OAAO,CAAEgL,OAAO,IAAK;SACzC,MAAMlC,KAAK,GAAG,IAAI,CAACmD,YAAY,CAACjB,OAAO,CAAC;SACxC,IAAIlC,KAAK,EACT;WACCL,aAAa,CAAC5B,IAAI,CAAC,IAAI,CAACC,gBAAgB,CAACgC,KAAK,CAAC,CAAC;;QAEjD,CAAC;OAEF,OAAOL,aAAa;MACpB;KAEDwD,YAAY,CAACjB,OAAe,EAC5B;OACC,MAAMgB,MAAM,GAAG,IAAI,CAACZ,qBAAqB,CAACc,OAAO,CAAEH,aAAa,IAAK;SACpE,OAAOA,aAAa,CAACC,MAAM,CAACf,GAAG,CAAEnC,KAAK,IAAK;WAC1C,OAAO;aACN,GAAGA,KAAK;aACRqD,OAAO,EAAEJ,aAAa,CAACI;YACvB;UACD,CAAC;QACF,CAAC;OAEF,MAAMrD,KAAK,GAAGkD,MAAM,CAACxN,IAAI,CAAEC,IAAI,IAAKwE,MAAM,CAACxE,IAAI,CAAC2B,EAAE,CAAC,KAAK6C,MAAM,CAAC+H,OAAO,CAAC,CAAC;OAExE,OAAOlC,KAAK,WAALA,KAAK,GAAI,IAAI;MACpB;KAEDhC,gBAAgB,CAACgC,KAAa,EAAEiD,aAAsB,GAAG,IAAI,EAC7D;OACC,OAAO;SACN3L,EAAE,EAAE0I,KAAK,CAAC1I,EAAE;SACZnC,KAAK,EAAE6K,KAAK,CAAC9K,KAAK;SAClB2I,QAAQ,EAAEoF,aAAa,GAAG,IAAI,CAACK,gBAAgB,CAACL,aAAa,EAAEjD,KAAK,CAAC,GAAG,EAAE;SAC1E/B,QAAQ,EAAE5C,gBAAc;SACxBwB,IAAI,EAAExB;QACN;MACD;KAEDiI,gBAAgB,CAAC3N,IAAY,EAAEqK,KAAa,EAC5C;OACC,OAAQ,GAAErK,IAAI,CAAC0N,OAAQ,KAAIrD,KAAK,CAACuD,SAAU,GAAE;MAC7C;KAEDvG,SAAS,GACT;OACC,OAAOkB,aAAG,CAAChD,MAAM,oBAAC;;kFAE2D,CAAmC;QAC7G,CAAoE;;;IAGvE,GAJ+E,IAAI,CAACsI,gBAAgB,CAACC,IAAI,CAAC,IAAI,CAAC,EAC1G,IAAI,CAAC/F,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;MAItE;KAEDuN,aAAa,CAAChK,KAAgB,EAC9B;OACC,MAAM;SAAEjD,IAAI,EAAE;WAAE2B;;QAAM,GAAGsB,KAAK,CAACuE,OAAO,EAAE;OAExC,IAAI,CAACiF,eAAe,CAACsB,GAAG,CAACpM,EAAE,CAAC;OAE5B,IAAI,CAAC8F,WAAW,EAAE;MAClB;KAEDyF,eAAe,CAACjK,KAAgB,EAChC;OACC,MAAM;SAAEjD,IAAI,EAAE;WAAE2B;;QAAM,GAAGsB,KAAK,CAACuE,OAAO,EAAE;OAExC,IAAI,CAACiF,eAAe,CAACuB,MAAM,CAACrM,EAAE,CAAC;OAE/B,IAAI,CAAC8F,WAAW,EAAE;MAClB;KAEDA,WAAW,GACX;OACC,KAAK,IAAI,CAAC5C,SAAS,CAAC,MAAM;SACzB,IAAI,CAAC6C,KAAK,CAAC,UAAU,EAAE,CAAC,GAAG,IAAI,CAAC+E,eAAe,CAAC3M,MAAM,EAAE,CAAC,CAAC;QAC1D,CAAC;MACF;KAED+N,gBAAgB,CAAC5K,KAAgB,EACjC;OACC,MAAMtB,EAAE,GAAG,wBAAwB;OACnC,MAAM6B,YAAY,GAAG,IAAI,CAACA,YAAY;OACtC,MAAMyK,OAAO,GAAI,iBAAgBzK,YAAa,EAAC;OAE/C,IAAI,CAAC,IAAI,CAAC0K,kBAAkB,EAC5B;SACC,IAAI,CAACA,kBAAkB,GAAG,IAAIvH,wBAAM,CAAC;WACpChF,EAAE;WACFsM,OAAO;WACPE,UAAU,EAAElL,KAAK,CAACrB,MAAM;WACxBjC,QAAQ,EAAE,KAAK;WACfiH,YAAY,EAAE,KAAK;WACnBC,WAAW,EAAE,IAAI;WACjBC,YAAY,EAAE,IAAI;WAClB7E,KAAK,EAAE,GAAG;WACVgF,MAAM,EAAE,IAAI;WACZmH,QAAQ,EAAE,IAAI,CAACC,yBAAyB,EAAE;WAC1CtL,MAAM,EAAE;aACP,eAAe,EAAE,IAAI,CAACuL;;UAEvB,CAAC;;OAGH,IAAI,IAAI,CAACJ,kBAAkB,CAACK,MAAM,EAAE,EACpC;SACC,IAAI,CAACL,kBAAkB,CAACzI,IAAI,EAAE;QAC9B,MAED;SACC,IAAI,CAACyI,kBAAkB,CAACnM,IAAI,EAAE;;MAE/B;KAEDsM,yBAAyB,GACzB;OACC,MAAMG,OAAO,GAAG;SACf7M,EAAE,EAAE,SAAS;SACb8M,WAAW,EAAE,IAAI;SACjBC,aAAa,EAAE,IAAI;SACnBC,OAAO,EAAE;WACRC,OAAO,EAAE,IAAI;WACbC,UAAU,EAAE,IAAI;WAChBC,SAAS,EAAE;;QAEZ;OAED,MAAMC,OAAO,GAAG;SACfpN,EAAE,EAAE,SAAS;SACb8M,WAAW,EAAE,IAAI;SACjBC,aAAa,EAAE,IAAI;SACnBC,OAAO,EAAE;WACRK,gBAAgB,EAAE,IAAI;WACtBJ,OAAO,EAAE,IAAI;WACbC,UAAU,EAAE,IAAI;WAChBC,SAAS,EAAE;;QAEZ;OAED,OAAO,CAACN,OAAO,EAAEO,OAAO,CAAC;MACzB;KAED,MAAMT,cAAc,CAACrL,KAAgB,EACrC;OACC,MAAM;SAAEjD;QAAM,GAAGiD,KAAK,CAACuE,OAAO,EAAE;OAEhC,IAAI,CAACyH,cAAc,GAAG;SACrB3G,QAAQ,EAAEtI,IAAI,CAAC2B,EAAE;SACjB6B,YAAY,EAAElB,EAAE,CAACmB,aAAa,CAACyL,SAAS,CAAClP,IAAI,CAACsI,QAAQ;QACtD;OAED,MAAM6G,OAAO,GAAG,MAAM,IAAI,CAACC,UAAU,EAAE;OACvC,IAAID,OAAO,EACX;SAAA;SACC7M,EAAE,CAAC+M,GAAG,CAACC,YAAY,CAACC,UAAU,EAAE,CAACC,MAAM,EAAE;SAEzC,MAAM7N,EAAE,4BAAG,IAAI,CAACgL,qBAAqB,CAAC,CAAC,CAAC,+CAA7B,sBAA+BY,MAAM,CAAC,CAAC,CAAC,qBAAxC,uBAA0C5L,EAAE;SACvD,IAAIA,EAAE,EACN;WACC,IAAI,CAAC8K,eAAe,CAACsB,GAAG,CAACpM,EAAE,CAAC;WAC5B,IAAI,CAAC8F,WAAW,EAAE;;;MAGpB;KAED,MAAM2H,UAAU,GAChB;OACC,MAAM;SAAE9G,QAAQ,EAAEmH,QAAQ;SAAEjM,YAAY,EAAEkM;QAAc,GAAG,IAAI,CAACT,cAAc;OAE9E,MAAMU,UAAU,GAAG;SAClBrH,QAAQ,EAAE,IAAI,CAACA,QAAQ;SACvB9E,YAAY,EAAE,IAAI,CAACA,YAAY;SAC/BiM,QAAQ;SACRC;QACA;OAED,OAAO,IAAIE,OAAO,CAAEC,OAAO,IAAK;SAC/BC,cAAI,CAACC,SAAS,CAAC,+BAA+B,EAAE;WAAE9J,IAAI,EAAE0J;UAAY,CAAC,CACnEK,IAAI,CAAC,CAAC;WAAE/J;UAAM,KAAK;WACnB,IAAI,CAACA,IAAI,EACT;aACC4J,OAAO,CAAC,KAAK,CAAC;;WAGf,MAAM;aAAE1D;YAAgB,GAAGlG,IAAI;WAC/B,IAAI,CAAC0G,qBAAqB,GAAGR,cAAc;WAE3C,IAAI,CAACQ,qBAAqB,CAACpL,OAAO,CAAE+L,aAAa,IAAK;aACrDA,aAAa,CAACC,MAAM,CAAChM,OAAO,CAAE8I,KAAK,IAAK;eACvC,IAAI,CAACwC,kBAAkB,CAACoD,MAAM,CAAC,IAAI,CAAC5H,gBAAgB,CAACgC,KAAK,EAAEiD,aAAa,CAAC,CAAC;cAC3E,CAAC;YACF,CAAC;WAEF,IAAI,CAAC5F,KAAK,CAAC,UAAU,CAAC;WACtB,IAAI,CAACD,WAAW,EAAE;WAElBoI,OAAO,CAAC,IAAI,CAAC;UACb,CAAC,CACDK,KAAK,CAAEjK,IAAI,IAAK;WAChB,IAAI,CAACkK,UAAU,CAAC,IAAI,CAACpI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,CAAC;UAC5E,CAAC;QAEH,CAAC;MACF;;KAGDyQ,UAAU,CAACC,OAAe,EAC1B;OACC9N,EAAE,CAAC+N,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;SAAEJ;QAAS,CAAC;;IAE9C;GAEDxL,KAAK,EAAE;KACNwH,QAAQ,CAACA,QAAQ,EACjB;OACC,IAAI,CAACK,eAAe,GAAG,IAAIC,GAAG,CAACN,QAAQ,WAARA,QAAQ,GAAI,EAAE,CAAC;MAC9C;KACDD,cAAc,EAAE;OACflD,OAAO,CAAChD,IAAI,EACZ;SACC,IAAI,CAAC0G,qBAAqB,GAAG1G,IAAI;SACjC,IAAI,CAAC4G,kBAAkB,GAAG,IAAI;SAC9B4D,aAAG,CAACC,KAAK,CAAC,IAAI,CAAC5L,KAAK,CAACuI,gBAAgB,CAAC;SACtC,IAAI,CAACT,sBAAsB,EAAE;QAC7B;OACDxD,IAAI,EAAE;;IAEP;GAEDC,QAAQ,EAAE;KACTsH,mBAAmB,GACnB;OACC,OAAO,IAAI,CAAC5I,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC;;IAElF;;GAGD2E,QAAQ,EAAG;;;;;;;;;;CAUZ,CAAC;;CCnWM,MAAMuM,WAAW,GAAG;GAC1B3M,KAAK,EAAE;KACNT,YAAY,EAAE;OACbU,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDkE,QAAQ,EAAE;OACTpE,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACD6B,IAAI,EAAE;OACL/B,IAAI,EAAE9E,MAAM;OACZuF,OAAO,EAAE;MACT;KACDF,cAAc,EAAE;OACfP,IAAI,EAAEQ,QAAQ;OACdN,QAAQ,EAAE;;IAEX;GAED4B,UAAU,EAAE;KACXhC,UAAU;KACVM,WAAW;KACXY,MAAM;KACN4F,gBAAgB;KAChBnF,gBAAgB;KAChB8D,cAAc;KACdyC;IACA;GAEDjG,IAAI,GACJ;KAAA;KACC,OAAO;OACN4K,eAAe,EAAE,KAAK;OACtB9F,UAAU,2BAAE,IAAI,CAAC9E,IAAI,CAAC8E,UAAU,oCAAI,IAAI;OACxCnF,UAAU,2BAAE,IAAI,CAACK,IAAI,CAACL,UAAU,oCAAI,IAAI;OACxC8D,QAAQ,yBAAE,IAAI,CAACzD,IAAI,CAACyD,QAAQ,kCAAI,IAAI;OACpCoH,SAAS,0BAAE,IAAI,CAAC7K,IAAI,CAAC6K,SAAS,mCAAI,KAAK;OACvC1E,QAAQ,yBAAE,IAAI,CAACnG,IAAI,CAACmG,QAAQ,kCAAI,EAAE;OAClC2E,MAAM,EAAE;MACR;IACD;GAED5L,OAAO,GACP;KACC,IAAI,IAAI,CAAC2L,SAAS,IAAI,CAAC,IAAI,CAACD,eAAe,EAC3C;OACC,IAAI,CAACG,YAAY,EAAE;;IAEpB;GAED7K,OAAO,EAAE;KACR,MAAM8K,aAAa,CAAClG,UAAkB,EACtC;OACC,IAAI,IAAI,CAACA,UAAU,KAAKA,UAAU,EAClC;SACC,IAAI,CAACA,UAAU,GAAGA,UAAU;;MAE7B;KAED,MAAMmG,aAAa,CAACtL,UAAkB,EACtC;OACC,IAAI,IAAI,CAACA,UAAU,KAAKA,UAAU,EAClC;SACC,IAAI,CAACA,UAAU,GAAGA,UAAU;;MAE7B;KAED,MAAMuL,WAAW,CAACzH,QAAgB,EAClC;OACC,IAAI,IAAI,CAACA,QAAQ,KAAKA,QAAQ,EAC9B;SACC,IAAI,CAACA,QAAQ,GAAGA,QAAQ;;MAEzB;KAED,MAAM0H,WAAW,CAAChF,QAAuB,EACzC;OACC,MAAMiF,cAAc,GAAG,CAACC,CAAC,EAAEC,CAAC,KAAK;SAChC,IAAID,CAAC,CAACvK,MAAM,KAAKwK,CAAC,CAACxK,MAAM,EACzB;WACC,OAAO,KAAK;;SAGb,MAAMyK,OAAO,GAAG,CAAC,GAAGF,CAAC,CAAC,CAACG,IAAI,EAAE;SAC7B,MAAMC,OAAO,GAAG,CAAC,GAAGH,CAAC,CAAC,CAACE,IAAI,EAAE;SAE7B,OAAOD,OAAO,CAACG,KAAK,CAAC,CAACpS,KAAK,EAAEqS,KAAK,KAAKrS,KAAK,KAAKmS,OAAO,CAACE,KAAK,CAAC,CAAC;QAChE;OAED,IAAI,CAACP,cAAc,CAAC,CAAC,GAAG,IAAI,CAACjF,QAAQ,CAAC,EAAEA,QAAQ,CAAC,EACjD;SACC,IAAI,CAACA,QAAQ,GAAGA,QAAQ;;;SAGxB,IAAI,CAAC3H,cAAc,CAAC;WACnBF,IAAI,EAAE,sBAAsB;WAC5BhF,KAAK,EAAE,CAAC,GAAG,IAAI,CAAC6M,QAAQ;UACxB,CAAC;;MAEH;KAED,MAAM4E,YAAY,GAClB;OACC,IAAI,CAACD,MAAM,GAAG,MAAM,IAAI,CAACc,WAAW,EAAE;MACtC;KAED,MAAMA,WAAW,GACjB;OACC,MAAMC,cAAc,GAAG;SACtBtO,YAAY,EAAE,IAAI,CAACA,YAAY;SAC/B8E,QAAQ,EAAE,IAAI,CAACA;QACf;OAED,OAAO,IAAIsH,OAAO,CAAEC,OAAO,IAAK;SAC/BkC,cAAI,CACFhC,SAAS,CAAC,8BAA8B,EAAE;WAAE9J,IAAI,EAAE6L;UAAgB,CAAC,CACnE9B,IAAI,CAAEgC,QAAQ,IAAK;WACnB,IAAI,CAACnB,eAAe,GAAG,IAAI;WAE3B,MAAM5K,IAAI,GAAG+L,QAAQ,CAAC/L,IAAI;WAC1B,IAAI,IAAI,CAAC8E,UAAU,KAAK,IAAI,EAC5B;aAAA;aACC,IAAI,CAACA,UAAU,+CAAG9E,IAAI,CAAC+E,SAAS,CAAC,CAAC,CAAC,qBAAjB,iBAAmBrJ,EAAE,mCAAI,IAAI;;WAGhDkO,OAAO,CAACmC,QAAQ,CAAC/L,IAAI,CAAC;UACtB,CAAC,CACDiK,KAAK,CAAC,MAAM;WACZ,IAAI,CAACC,UAAU,CAAC,IAAI,CAACpI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,CAAC;WAE5E,IAAI,CAACmR,eAAe,GAAG,IAAI;UAC3B,CAAC;QAEH,CAAC;MACF;;KAGDV,UAAU,CAACC,OAAe,EAC1B;OACC9N,EAAE,CAAC+N,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;SAAEJ;QAAS,CAAC;MAC7C;KAED6B,KAAK,GACL;OACC,IAAI,CAACnN,KAAK,CAACoN,iBAAiB,CAACD,KAAK,EAAE;MACpC;;KAGDzK,OAAO,GACP;OAAA;OACC,MAAM+F,MAAM,4BAAG,IAAI,CAACV,kBAAkB,qBAAvB,sBAAyBsF,OAAO,EAAE;OACjD,MAAM/F,QAAQ,GAAGmB,MAAM,GAAGA,MAAM,CAACf,GAAG,CAAExM,IAAI,IAAKA,IAAI,CAAC2B,EAAE,CAAC,GAAG,EAAE;OAE5D,OAAO;SACNmP,SAAS,EAAE,IAAI,CAACA,SAAS;SACzB/F,UAAU,EAAE,IAAI,CAACA,UAAU;SAC3BnF,UAAU,EAAE,IAAI,CAACA,UAAU;SAC3B8D,QAAQ,EAAE,IAAI,CAACA,QAAQ;SACvB0C;QACA;;IAEF;GAEDxH,KAAK,EAAE;KACN,MAAMkM,SAAS,CAACA,SAAkB,EAClC;OACC,IAAI,CAAC,IAAI,CAACD,eAAe,IAAIC,SAAS,EACtC;SACC,IAAI,CAACC,MAAM,GAAG,MAAM,IAAI,CAACc,WAAW,EAAE;;;IAGxC;GAEDxI,QAAQ,EAAE;KACT7J,KAAK,GACL;OACC,OAAO,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC;MAChF;KACD0S,kBAAkB,GAClB;OACC,OAAO,CACN,uCAAuC,EACvC,8CAA8C,EAC9C,mEAAmE,CACnE;MACD;KACDC,oBAAoB,GACpB;OACC,OAAO;SACN,qCAAqC,EAAE,IAAI;SAC3C,YAAY,EAAE,CAAC,IAAI,CAACvB;QACpB;MACD;KACDwB,sBAAsB,GACtB;OACC,OAAO;SACN,QAAQ,EAAE,IAAI;SACd,aAAa,EAAE,IAAI;SACnB,iBAAiB,EAAE,IAAI;SACvB,WAAW,EAAE,IAAI,CAACxB;QAClB;MACD;KACDyB,cAAc,GACd;OACC,OAAO,IAAI,CAACxK,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC;MAC/E;KACD8S,kBAAkB,GAClB;OACC,OAAO,IAAI,CAAC1B,SAAS,GAAG,GAAG,GAAG,GAAG;;IAElC;;GAGDzM,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAgEZ,CAAC;;CC5RM,MAAMoO,cAAc,GAAIC,WAA2B,KAAM;GAC/DC,OAAO,GACP;KACC,IAAI,CAACD,WAAW,GAAGA,WAAW;IAC9B;GACDlN,aAAa,GACb;KACC,IAAIqC,cAAI,CAAC+K,OAAO,CAAC,IAAI,CAACF,WAAW,CAAC,EAClC;OACC,IAAI,CAACA,WAAW,CAACnR,OAAO,CAAEsR,OAAO,IAAKrQ,gBAAgB,CAACqQ,OAAO,CAAC,CAAC;MAChE,MACI,IAAIhL,cAAI,CAACiL,cAAc,CAAC,IAAI,CAACJ,WAAW,CAAC,EAC9C;OACClQ,gBAAgB,CAAC,IAAI,CAACkQ,WAAW,CAAC;;;CAGrC,CAAC,CAAC;;CCfF;AACA,CAAO,MAAMK,gBAAgB,GAAG;GAC/B/M,UAAU,EAAE;KACXhC;IACA;GAEDgP,MAAM,EAAE,CAACP,cAAc,CAAC,iCAAiC,CAAC,CAAC;GAE3DxO,KAAK,EAAE;KACNgP,UAAU,EAAE;OACX/O,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACD8O,UAAU,EAAE;OACXhP,IAAI,EAAE4B,KAAK;OACX1B,QAAQ,EAAE;;IAEX;GAEDiF,QAAQ,EAAE;KACT8J,aAAa,GACb;OACC,OAAO,IAAI,CAACpL,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;MACrE;KAED0T,oBAAoB,GACpB;OACC,MAAMC,eAAe,GAAG,IAAI,CAACH,UAAU,CAACnT,IAAI,CAAEC,IAAI,IAAKwE,MAAM,CAACxE,IAAI,CAACsT,KAAK,CAAC,KAAK9O,MAAM,CAAC,IAAI,CAACyO,UAAU,CAAC,CAAC;OAEtG,OAAOI,eAAe,GAAGA,eAAe,CAACE,IAAI,GAAG,IAAI,CAACxL,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,qDAAqD,CAAC;;IAEnI;GAEDyG,OAAO,EAAE;KACRqN,oBAAoB,GACpB;OACC,MAAM3R,IAAI,GAAG,EAAE;OAEf,IAAI,CAACqR,UAAU,CAAC3R,OAAO,CAAEkS,QAAQ,IAAK;SACrC5R,IAAI,CAACuG,IAAI,CAAC;WACT7I,KAAK,EAAEiF,MAAM,CAACiP,QAAQ,CAACH,KAAK,CAAC;WAC7BI,IAAI,EAAED,QAAQ,CAACF,IAAI;WACnBI,OAAO,EAAE,IAAI,CAACC,gBAAgB,CAAC9F,IAAI,CAAC,IAAI;UACxC,CAAC;QACF,CAAC;OAEFpM,aAAa,CAAC,IAAI,CAACgR,WAAW,EAAE,IAAI,CAAC5N,KAAK,CAAC+O,gBAAgB,EAAEhS,IAAI,CAAC;MAClE;KACD+R,gBAAgB,CAACE,CAAC,EAAE9T,IAAI,EACxB;OACC,IAAI,CAAC0H,KAAK,CAAC,UAAU,EAAE1H,IAAI,CAACT,KAAK,CAAC;OAElCS,IAAI,CAAC+T,aAAa,EAAE,CAACC,KAAK,EAAE;;IAE7B;;GAGD3P,QAAQ,EAAG;;;;;;;;;;;;;;;;;;CAkBZ,CAAC;;CCzED;AACA,CAAO,MAAM4P,UAAU,GAAG;GACzBjO,UAAU,EAAE;KACXhC;IACA;GAEDgP,MAAM,EAAE,CACPP,cAAc,CAAC,CACd,gDAAgD,EAChD,gDAAgD,CAChD,CAAC,CACF;GAEDxO,KAAK,EAAE;KACNT,YAAY,EAAE;OACbU,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACD8P,wBAAwB,EAAE;OACzBhQ,IAAI,EAAEiQ,OAAO;OACbxP,OAAO,EAAE;MACT;KACDyP,SAAS,EAAE;OACVlQ,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDiQ,oBAAoB,EAAE;OACrBnQ,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDkQ,mBAAmB,EAAE;OACpBpQ,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDmQ,oBAAoB,EAAE;OACrBrQ,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDoQ,mBAAmB,EAAE;OACpBtQ,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;;IAEX;GAED6B,IAAI,GACJ;KACC,OAAO;OACNwO,qBAAqB,EAAE,IAAI,CAACJ,oBAAoB,GAAG,CAAC;OACpDK,QAAQ,EAAE;SACTC,gBAAgB,EAAE,IAAI,CAACP,SAAS;SAChCQ,2BAA2B,EAAE,IAAI,CAACP,oBAAoB;SACtDQ,0BAA0B,EAAE,IAAI,CAACP,mBAAmB;SACpDQ,2BAA2B,EAAE,IAAI,CAACP,oBAAoB;SACtDQ,0BAA0B,EAAE,IAAI,CAACP;QACjC;OACDQ,UAAU,EAAE;MACZ;IACD;GAED3L,QAAQ,EAAE;KACT7J,KAAK,GACL;OACC,MAAMyV,cAAc,GAAG,IAAI,CAACC,iBAAiB,EAAE;OAE/C,OAAO,IAAI,CAACnN,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAE,sCAAqCuV,cAAe,EAAC,CAAC;MAC1F;KAEDE,cAAc,GACd;OACC,MAAMF,cAAc,GAAG,IAAI,CAACC,iBAAiB,EAAE;OAE/C,OAAO,IAAI,CAACnN,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAE,oDAAmDuV,cAAe,EAAC,CAAC;MACxG;KAEDG,kBAAkB,GAClB;OACC,OAAOlS,gBAAgB,CAAC,IAAI,CAACwR,QAAQ,CAACC,gBAAgB,CAAC;MACvD;KAEDU,cAAc,GACd;OACC,OAAO,IAAI,CAACtN,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;MAC3E;KAED4V,cAAc,GACd;OACC,MAAML,cAAc,GAAG,IAAI,CAACC,iBAAiB,EAAE;OAE/C,OAAO,IAAI,CAACnN,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAE,yCAAwCuV,cAAe,EAAC,CAAC;MAC7F;KAEDM,wBAAwB,GACxB;OACC,OAAO9T,gBAAgB,CAAC,IAAI,CAACiT,QAAQ,CAACG,0BAA0B,CAAC,CAACrV,KAAK;MACvE;KAEDgW,wBAAwB,GACxB;OACC,OAAO/T,gBAAgB,CAAC,IAAI,CAACiT,QAAQ,CAACK,0BAA0B,CAAC,CAACvV,KAAK;MACvE;KAEDiW,oBAAoB,GACpB;OACC,MAAMR,cAAc,GAAG,IAAI,CAACC,iBAAiB,EAAE;OAE/C,OAAO,IAAI,CAACnN,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAE,4CAA2CuV,cAAe,EAAC,CAAC;;IAEjG;GAEDrQ,KAAK,EAAE;KACN8P,QAAQ,EAAE;OACTzL,OAAO,GAAG;SACT,IAAI,CAAC,IAAI,CAAC+L,UAAU,EACpB;WACC,KAAK,IAAI,CAACnQ,SAAS,CAAC,MAAM;aACzB,IAAI,CAAC6Q,UAAU,EAAE;YACjB,CAAC;;QAEH;OACDtM,IAAI,EAAE;MACN;KAEDqL,qBAAqB,EAAE;OACtBxL,OAAO,GAAG;SACT,IAAI,CAAC,IAAI,CAAC+L,UAAU,EACpB;WACC,KAAK,IAAI,CAACnQ,SAAS,CAAC,MAAM;aACzB,IAAI,CAAC6Q,UAAU,EAAE;YACjB,CAAC;;;MAGJ;KAEDtB,SAAS,EAAE;OACVnL,OAAO,CAACD,QAAQ,EAAE;SACjB,MAAM2M,cAAc,GAAGC,IAAI,CAACC,KAAK,CAAC,IAAI,CAACnB,QAAQ,CAACC,gBAAgB,CAAC;SACjE,MAAMmB,UAAU,GAAGF,IAAI,CAACC,KAAK,CAAC7M,QAAQ,CAAC;SACvC,IAAI2M,cAAc,KAAKG,UAAU,EACjC;WACC,IAAI,CAACpB,QAAQ,CAACC,gBAAgB,GAAG3L,QAAQ;;;MAG3C;KAEDqL,oBAAoB,EAAE;OACrBpL,OAAO,CAACD,QAAQ,EAAE;SACjB,IAAI,CAACyL,qBAAqB,GAAGzL,QAAQ,GAAG,CAAC;;;IAG3C;GAED2J,OAAO,GACP;KACC,IAAI,CAACoD,UAAU,GAAGrT,wBAAwB,CAAC,IAAI,CAAC0R,SAAS,GAAG,IAAI,EAAGnR,KAAK,IAAK;OAC5E,IAAI,CAACyR,QAAQ,CAACC,gBAAgB,GAAG1R,KAAK,CAAC+S,SAAS,EAAE,CAACC,eAAe,EAAE,CAACC,OAAO,EAAE,GAAG,IAAI;MACrF,CAAC;IACF;GAED1Q,aAAa,GACb;KACC,IAAI,CAACuQ,UAAU,CAACtT,OAAO,EAAE;IACzB;GAED0D,OAAO,EAAE;KACRgQ,qBAAqB,GACrB;OACC,IAAI,CAAC,IAAI,CAACjC,wBAAwB,EAClC;SACC;;OAGD,IAAI,CAAC6B,UAAU,CAACxP,aAAa,CAAC,IAAI,CAACzB,KAAK,CAACsP,SAAS,CAAC;OACnD,IAAI,CAAC2B,UAAU,CAAChU,IAAI,EAAE;MACtB;KAEDqU,kBAAkB,CAACxU,MAAmB,EAAE2C,IAAY,EACpD;OACC,MAAM1C,IAAI,GAAG,EAAE;OAEfzC,MAAM,CAACU,MAAM,CAACqB,UAAU,EAAE,CAAC,CAACI,OAAO,CAAEvB,IAAY,IAAK;SACrD6B,IAAI,CAACuG,IAAI,CAAC;WACTsL,IAAI,EAAE1T,IAAI,CAACR,KAAK;WAChBD,KAAK,EAAES,IAAI,CAACT,KAAK;WACjBoU,OAAO,EAAE,IAAI,CAAC0C,kBAAkB,CAACvI,IAAI,CAAC,IAAI,EAAEvJ,IAAI;UAChD,CAAC;QACF,CAAC;OAEF,MAAM5C,EAAE,GAAI,wCAAuC4C,IAAK,EAAC;OACzD7C,aAAa,CAACC,EAAE,EAAEC,MAAM,EAAEC,IAAI,CAAC;MAC/B;KAEDwU,kBAAkB,CAAC9R,IAAY,EAAEuP,CAAC,EAAE9T,IAAI,EACxC;OACC,MAAMT,KAAK,GAAGS,IAAI,CAACT,KAAK;OACxB,IAAIgF,IAAI,KAAK,WAAW,EACxB;SACC,IAAI,CAACmQ,QAAQ,CAACG,0BAA0B,GAAGtV,KAAK;QAChD,MACI,IAAIgF,IAAI,KAAK,WAAW,EAC7B;SACC,IAAI,CAACmQ,QAAQ,CAACK,0BAA0B,GAAGxV,KAAK;;OAGjDS,IAAI,CAAC+T,aAAa,EAAE,CAACC,KAAK,EAAE;MAC5B;KAED0B,UAAU,GACV;OACC,IAAI,IAAI,CAACV,UAAU,EACnB;SACC;;OAGD,IAAI,CAACA,UAAU,GAAG,IAAI;OACtB,IAAI,CAACtN,KAAK,CAAC,UAAU,EAAE;SACtB0M,SAAS,EAAE,IAAI,CAACM,QAAQ,CAACC,gBAAgB;SACzCN,oBAAoB,EAAE,IAAI,CAACK,QAAQ,CAACE,2BAA2B;SAC/DN,mBAAmB,EAAE,IAAI,CAACI,QAAQ,CAACG,0BAA0B;SAC7DN,oBAAoB,EAAE,IAAI,CAACG,QAAQ,CAACI,2BAA2B;SAC/DN,mBAAmB,EAAE,IAAI,CAACE,QAAQ,CAACK,0BAA0B;SAC7DN,qBAAqB,EAAE,IAAI,CAACA;QAC5B,CAAC;OAEF,KAAK,IAAI,CAAC5P,SAAS,CAAC,MAAM;SACzB,IAAI,CAACmQ,UAAU,GAAG,KAAK;QACvB,CAAC;MACF;KAEDE,iBAAiB,GACjB;OACC,OAAO3R,qBAAqB,CAAC,IAAI,CAACC,YAAY,CAAC;;IAEhD;;GAGDa,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAyEZ,CAAC;;CCrTD;AACA,CAAO,MAAMiS,YAAY,GAAG;GAC3BtQ,UAAU,EAAE;KACXhC;IACA;GAEDgP,MAAM,EAAE,CAACP,cAAc,CAAC,6BAA6B,CAAC,CAAC;GAEvDxO,KAAK,EAAE;KACNT,YAAY,EAAE;OACbU,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDmS,IAAI,EAAE;OACLrS,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GAEDiF,QAAQ,EAAE;KACTmN,SAAS,GACT;OACC,MAAMvB,cAAc,GAAG1R,qBAAqB,CAAC,IAAI,CAACC,YAAY,CAAC;OAE/D,OAAO,IAAI,CAACuE,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAE,+BAA8BuV,cAAe,EAAC,CAAC;MACnF;KAEDwB,gBAAgB,GAChB;OACC,OAAO5W,cAAc,CAAC,IAAI,CAAC0W,IAAI,CAAC,CAAC/W,KAAK;;IAEvC;GAED2G,OAAO,EAAE;KACRuQ,gBAAgB,GAChB;OACC,MAAM7U,IAAI,GAAG,EAAE;OAEfzC,MAAM,CAACU,MAAM,CAACX,SAAS,CAAC,CAACoC,OAAO,CAAC,CAAC;SAAEhC,KAAK;SAAEC;QAAO,KAAK;SACtDqC,IAAI,CAACuG,IAAI,CAAC;WACT7I,KAAK;WACLmU,IAAI,EAAElU,KAAK;WACXmU,OAAO,EAAE,IAAI,CAACgD,YAAY,CAAC7I,IAAI,CAAC,IAAI;UACpC,CAAC;QACF,CAAC;OAEFpM,aAAa,CAAC,IAAI,CAACgR,WAAW,EAAE,IAAI,CAAC5N,KAAK,CAAC8R,YAAY,EAAE/U,IAAI,CAAC;MAC9D;KACD8U,YAAY,CAAC7C,CAAC,EAAE9T,IAAI,EACpB;OACC,IAAI,CAAC0H,KAAK,CAAC,UAAU,EAAE1H,IAAI,CAACT,KAAK,CAAC;OAElCS,IAAI,CAAC+T,aAAa,EAAE,CAACC,KAAK,EAAE;;IAE7B;;GAGD3P,QAAQ,EAAG;;;;;;;;;;;;;;;;;;CAkBZ,CAAC;;CC3ED;AACA,CAAO,MAAMwS,qBAAqB,GAAG;GACpC7Q,UAAU,EAAE;KACXhC;IACA;GAEDgP,MAAM,EAAE,CAACP,cAAc,CAAC,uCAAuC,CAAC,CAAC;GAEjExO,KAAK,EAAE;KACNT,YAAY,EAAE;OACbU,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDF,IAAI,EAAE;OACLA,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDjE,IAAI,EAAE;OACL+D,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDhE,KAAK,EAAE;OACN8D,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;;IAEX;GAED6B,IAAI,GACJ;KACC,OAAO;OACN6Q,WAAW,EAAE,IAAI,CAAC5S,IAAI;OACtB6S,WAAW,EAAE,IAAI,CAAC5W,IAAI;OACtB6W,YAAY,EAAE,IAAI,CAAC5W;MACnB;IACD;GAEDiJ,QAAQ,EAAE;KACT7J,KAAK,GACL;OACC,MAAMyV,cAAc,GAAG1R,qBAAqB,CAAC,IAAI,CAACC,YAAY,CAAC;OAE/D,OAAO,IAAI,CAACuE,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAE,yCAAwCuV,cAAe,EAAC,CAAC;MAC7F;KAEDgC,SAAS,GACT;OACC,OAAO,IAAI,CAAClP,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,uDAAuD,CAAC;MAC3F;KAEDwX,UAAU,GACV;OACC,OAAO,IAAI,CAACnP,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,wDAAwD,CAAC;MAC5F;KAEDyX,yBAAyB,GACzB;OACC,OAAO9W,uBAAuB,CAAC,IAAI,CAACyW,WAAW,CAAC,CAACtX,KAAK;MACtD;KAED4X,aAAa,GACb;OACC,OAAOlU,gBAAgB,CAAC,IAAI,CAAC6T,WAAW,CAAC;MACzC;KAEDM,WAAW,GACX;OACC,OAAO,IAAI,CAACP,WAAW,KAAK7W,cAAc,CAACE,IAAI,CAACZ,KAAK;MACrD;KAED+X,YAAY,GACZ;OACC,OAAO,IAAI,CAACR,WAAW,KAAK7W,cAAc,CAACG,KAAK,CAACb,KAAK;;IAEvD;GAEDqF,KAAK,EAAE;KACNkS,WAAW,GACX;OACC,IAAI,CAACpB,UAAU,EAAE;MACjB;KAEDqB,WAAW,GACX;OACC,IAAI,CAACrB,UAAU,EAAE;MACjB;KAEDsB,YAAY,GACZ;OACC,IAAI,CAACtB,UAAU,EAAE;;IAElB;GAED/C,OAAO,GACP;KACC,IAAI,CAACoD,UAAU,GAAGrT,wBAAwB,CAAC,IAAI,CAACvC,IAAI,GAAG,IAAI,EAAG8C,KAAK,IAAK;OACvE,IAAI,CAAC8T,WAAW,GAAG9T,KAAK,CAAC+S,SAAS,EAAE,CAACC,eAAe,EAAE,CAACC,OAAO,EAAE,GAAG,IAAI;MACvE,CAAC;IACF;GAED1Q,aAAa,GACb;KACC,IAAI,CAACuQ,UAAU,CAACtT,OAAO,EAAE;IACzB;GAED0D,OAAO,EAAE;KACRoR,YAAY,GACZ;OACC,MAAM1V,IAAI,GAAG,EAAE;OAEfzC,MAAM,CAACU,MAAM,CAACG,cAAc,CAAC,CAACsB,OAAO,CAAC,CAAC;SAAEhC,KAAK;SAAEC;QAAO,KAAK;SAC3DqC,IAAI,CAACuG,IAAI,CAAC;WACT7I,KAAK;WACLmU,IAAI,EAAElU,KAAK;WACXmU,OAAO,EAAE,IAAI,CAAC6D,QAAQ,CAAC1J,IAAI,CAAC,IAAI;UAChC,CAAC;QACF,CAAC;OAEFpM,aAAa,CAAC,IAAI,CAACgR,WAAW,EAAE,IAAI,CAAC5N,KAAK,CAAC2S,QAAQ,EAAE5V,IAAI,CAAC;MAC1D;KAED2V,QAAQ,CAAC1D,CAAC,EAAE9T,IAAI,EAChB;OACC,IAAI,CAAC8W,WAAW,GAAG9W,IAAI,CAACT,KAAK;OAC7BS,IAAI,CAAC+T,aAAa,EAAE,CAACC,KAAK,EAAE;MAC5B;KAED0B,UAAU,GACV;OACC,KAAK,IAAI,CAAC7Q,SAAS,CAAC,MAAM;SACzB,IAAI,CAAC6C,KAAK,CAAC,UAAU,EAAE;WACtBxD,IAAI,EAAE,IAAI,CAAC4S,WAAW;WACtB3W,IAAI,EAAE,IAAI,CAAC4W,WAAW;WACtB3W,KAAK,EAAE,IAAI,CAAC4W;UACZ,CAAC;QACF,CAAC;MACF;KAEDU,cAAc,GACd;OACC,IAAI,CAAC3B,UAAU,CAACxP,aAAa,CAAC,IAAI,CAACzB,KAAK,CAAC3E,IAAI,CAAC;OAC9C,IAAI,CAAC4V,UAAU,CAAChU,IAAI,EAAE;;IAEvB;;GAGDsC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAyDZ,CAAC;;CC1MD;AACA,CAAO,MAAMsT,sBAAsB,GAAG;GACrC3R,UAAU,EAAE;KACXhC;IACA;GAEDgP,MAAM,EAAE,CAACP,cAAc,CAAC,wCAAwC,CAAC,CAAC;GAElExO,KAAK,EAAE;KACN2T,QAAQ,EAAE;OACT1T,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDF,IAAI,EAAE;OACLA,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;;IAEX;GAED6B,IAAI,GACJ;KACC,OAAO;OACN4R,eAAe,EAAE,IAAI,CAACD,QAAQ;OAC9Bd,WAAW,EAAE,IAAI,CAAC5S;MAClB;IACD;GAEDmF,QAAQ,EAAE;KACT7J,KAAK,GACL;OACC,OAAO,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC;MACjF;KAEDoY,gBAAgB,GAChB;OACC,OAAOrW,gBAAgB,CAAC,IAAI,CAACqV,WAAW,CAAC,CAACtX,KAAK;;IAEhD;GAEDoF,KAAK,EAAE;KACNkS,WAAW,GACX;OACC,IAAI,CAACpB,UAAU,EAAE;MACjB;KAEDmC,eAAe,GACf;OACC,IAAI,CAACnC,UAAU,EAAE;;IAElB;GAEDvP,OAAO,EAAE;KACRoR,YAAY,GACZ;OACC,MAAM1V,IAAI,GAAG,EAAE;OAEfzC,MAAM,CAACU,MAAM,CAACqB,UAAU,CAAC,IAAI,CAAC,CAAC,CAACI,OAAO,CAAC,CAAC;SAAEhC,KAAK;SAAEC;QAAO,KAAK;SAC7DqC,IAAI,CAACuG,IAAI,CAAC;WACT7I,KAAK;WACLmU,IAAI,EAAElU,KAAK;WACXmU,OAAO,EAAE,IAAI,CAAC6D,QAAQ,CAAC1J,IAAI,CAAC,IAAI;UAChC,CAAC;QACF,CAAC;OAEFpM,aAAa,CAAC,IAAI,CAACgR,WAAW,EAAE,IAAI,CAAC5N,KAAK,CAAC2S,QAAQ,EAAE5V,IAAI,CAAC;MAC1D;KAED2V,QAAQ,CAAC1D,CAAC,EAAE9T,IAAI,EAChB;OACC,IAAI,CAAC8W,WAAW,GAAG9W,IAAI,CAACT,KAAK;OAE7BS,IAAI,CAAC+T,aAAa,EAAE,CAACC,KAAK,EAAE;MAC5B;KAED0B,UAAU,GACV;OACC,KAAK,IAAI,CAAC7Q,SAAS,CAAC,MAAM;SACzB,IAAI,CAAC6C,KAAK,CAAC,UAAU,EAAE;WACtBxD,IAAI,EAAE,IAAI,CAAC4S,WAAW;WACtBvX,KAAK,EAAE,IAAI,CAACsY;UACZ,CAAC;QACF,CAAC;;IAEH;;GAGDxT,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;CAqBZ,CAAC;;CC5GD;AACA,CAAO,MAAM0T,oBAAoB,GAAG;GACnC/R,UAAU,EAAE;KACXhC;IACA;GAEDC,KAAK,EAAE;KACNC,IAAI,EAAE;OACLA,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;;IAEX;GAED6B,IAAI,GACJ;KACC,OAAO;OACN6Q,WAAW,EAAE,IAAI,CAAC5S;MAClB;IACD;GAEDmF,QAAQ,EAAE;KACT7J,KAAK,GACL;OACC,OAAO,IAAI,CAACuI,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC;MAC1E;KAEDsY,wBAAwB,GACxB;OACC,OAAOpX,sBAAsB,CAAC,IAAI,CAACkW,WAAW,CAAC,CAACtX,KAAK;;IAEtD;GAEDoF,KAAK,EAAE;KACNkS,WAAW,GACX;OACC,IAAI,CAACpB,UAAU,EAAE;;IAElB;GAEDvP,OAAO,EAAE;KACRoR,YAAY,GACZ;OACC,MAAM1V,IAAI,GAAG,EAAE;OAEfzC,MAAM,CAACU,MAAM,CAACQ,aAAa,CAAC,CAACiB,OAAO,CAAC,CAAC;SAAEhC,KAAK;SAAEC;QAAO,KAAK;SAC1DqC,IAAI,CAACuG,IAAI,CAAC;WACT7I,KAAK;WACLmU,IAAI,EAAElU,KAAK;WACXmU,OAAO,EAAE,IAAI,CAAC6D,QAAQ,CAAC1J,IAAI,CAAC,IAAI;UAChC,CAAC;QACF,CAAC;OAEF,MAAMlM,MAAM,GAAG,IAAI,CAACkD,KAAK,CAAC2S,QAAQ;OAClC,MAAM9V,EAAE,GAAG,sCAAsC;OAEjDD,aAAa,CAACC,EAAE,EAAEC,MAAM,EAAEC,IAAI,CAAC;MAC/B;KAED2V,QAAQ,CAAC1D,CAAC,EAAE9T,IAAI,EAChB;OACC,IAAI,CAAC8W,WAAW,GAAG9W,IAAI,CAACT,KAAK;OAC7BS,IAAI,CAAC+T,aAAa,EAAE,CAACC,KAAK,EAAE;MAC5B;KAED0B,UAAU,GACV;OACC,KAAK,IAAI,CAAC7Q,SAAS,CAAC,MAAM;SACzB,IAAI,CAAC6C,KAAK,CAAC,UAAU,EAAE;WACtBxD,IAAI,EAAE,IAAI,CAAC4S;UACX,CAAC;QACF,CAAC;;IAEH;;GAGDzS,QAAQ,EAAG;;;;;;;;;;;;;;;;;;CAkBZ,CAAC;;CC3FD;AACA,CAAO,MAAM4T,YAAY,GAAG;GAC3BjS,UAAU,EAAE;KACXhC,UAAU;KACVM;IACA;GAED0O,MAAM,EAAE,CAACP,cAAc,CAAC,+BAA+B,CAAC,CAAC;GAEzDxO,KAAK,EAAE;KACN2T,QAAQ,EAAE;OACT1T,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDF,IAAI,EAAE;OACLA,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDjE,IAAI,EAAE;OACL+D,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;;IAEX;GAED6B,IAAI,GACJ;KACC,OAAO;OACN4R,eAAe,EAAE,IAAI,CAACD,QAAQ;OAC9Bd,WAAW,EAAE,IAAI,CAAC5S,IAAI;OACtB6S,WAAW,EAAE,IAAI,CAAC5W;MAClB;IACD;GAEDkJ,QAAQ,EAAE;KACT6O,WAAW,GACX;OACC,OAAO,IAAI,CAACnQ,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC;MAChF;KAEDyY,eAAe,GACf;OACC,OAAO,IAAI,CAACpQ,OAAO,CAACtI,GAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;MACrF;KAED+W,gBAAgB,GAChB;OACC,OAAOhV,gBAAgB,CAAC,IAAI,CAACyC,IAAI,CAAC,CAACjD,aAAa;MAChD;KAEDmW,aAAa,GACb;OACC,OAAOlU,gBAAgB,CAAC,IAAI,CAAC6T,WAAW,CAAC;;IAE1C;GAEDnS,KAAK,EAAE;KACNiT,eAAe,GACf;OACC,IAAI,CAACnC,UAAU,EAAE;MACjB;KAEDoB,WAAW,GACX;OACC,IAAI,CAACpB,UAAU,EAAE;MACjB;KAEDqB,WAAW,GACX;OACC,IAAI,CAACrB,UAAU,EAAE;;IAElB;GAED/C,OAAO,GACP;KACC,IAAI,CAACoD,UAAU,GAAGrT,wBAAwB,CAAC,IAAI,CAACvC,IAAI,GAAG,IAAI,EAAG8C,KAAK,IAAK;OACvE,IAAI,CAAC8T,WAAW,GAAG9T,KAAK,CAAC+S,SAAS,EAAE,CAACC,eAAe,EAAE,CAACC,OAAO,EAAE,GAAG,IAAI;MACvE,CAAC;IACF;GAED1Q,aAAa,GACb;KACC,IAAI,CAACuQ,UAAU,CAACtT,OAAO,EAAE;IACzB;GAED0D,OAAO,EAAE;KACRuP,UAAU,GACV;OACC,KAAK,IAAI,CAAC7Q,SAAS,CAAC,MAAM;SACzB,IAAI,CAAC6C,KAAK,CAAC,UAAU,EAAE;WACtBnI,KAAK,EAAE,IAAI,CAACsY,eAAe;WAC3B3T,IAAI,EAAE,IAAI,CAAC4S,WAAW;WACtB3W,IAAI,EAAE,IAAI,CAAC4W;UACX,CAAC;QACF,CAAC;MACF;KAEDX,kBAAkB,GAClB;OACC,MAAMvU,IAAI,GAAG,EAAE;OAEfzC,MAAM,CAACU,MAAM,CAACqB,UAAU,EAAE,CAAC,CAACI,OAAO,CAAC,CAAC;SAAEhC,KAAK;SAAE0B;QAAe,KAAK;SACjEY,IAAI,CAACuG,IAAI,CAAC;WACT7I,KAAK;WACLmU,IAAI,EAAEzS,aAAa;WACnB0S,OAAO,EAAE,IAAI,CAACyE,cAAc,CAACtK,IAAI,CAAC,IAAI;UACtC,CAAC;QACF,CAAC;OAEFpM,aAAa,CAAC,IAAI,CAACgR,WAAW,EAAE,IAAI,CAAC5N,KAAK,CAACuT,cAAc,EAAExW,IAAI,CAAC;MAChE;KAEDuW,cAAc,CAACtE,CAAC,EAAE9T,IAAI,EACtB;OACC,IAAI,CAAC8W,WAAW,GAAG9W,IAAI,CAACT,KAAK;OAE7BS,IAAI,CAAC+T,aAAa,EAAE,CAACC,KAAK,EAAE;MAC5B;KAED0D,cAAc,GACd;OACC,IAAI,CAAC3B,UAAU,CAACxP,aAAa,CAAC,IAAI,CAACzB,KAAK,CAAC3E,IAAI,CAAC;OAC9C,IAAI,CAAC4V,UAAU,CAAChU,IAAI,EAAE;;IAEvB;;GAGDsC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAqCZ,CAAC;;CCvJD;AACA,CAAO,MAAMiU,SAAS,GAAG;GACxBtS,UAAU,EAAE;KACXhC,UAAU;KACVM,WAAW;KACXgS,YAAY;KACZ2B,YAAY;KACZhE,UAAU;KACVrD,WAAW;KACXiG,qBAAqB;KACrBc,sBAAsB;KACtBI,oBAAoB;KACpBhF;IACA;GAED9O,KAAK,EAAE;KACNqE,QAAQ,EAAE;OACTpE,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACDZ,YAAY,EAAE;OACbU,IAAI,EAAEM,MAAM;OACZJ,QAAQ,EAAE;MACV;KACD6B,IAAI,EAAE;OACL/B,IAAI,EAAE9E,MAAM;OACZgF,QAAQ,EAAE;MACV;KACDmU,MAAM,EAAE;OACPrU,IAAI,EAAE9E,MAAM;OACZgF,QAAQ,EAAE;MACV;KACDK,cAAc,EAAE;OACfP,IAAI,EAAEQ,QAAQ;OACdN,QAAQ,EAAE;;IAEX;GAED6B,IAAI,GACJ;KAAA;KACC,MAAMmO,SAAS,GAAG,IAAItR,IAAI,EAAE;KAC5B,MAAM0V,iBAAiB,GAAG,IAAI,CAACC,oBAAoB,EAAE;KAErD,MAAMpE,oBAAoB,GAAG7P,MAAM,yBAAC,IAAI,CAACyB,IAAI,CAAC,mCAAmC,CAAC,mCAAI,CAAC,CAAC;KACxF,MAAMsO,oBAAoB,GAAG/P,MAAM,0BAAC,IAAI,CAACyB,IAAI,CAAC,mCAAmC,CAAC,oCAAI,CAAC,CAAC;KAExF,OAAO;OACNsQ,IAAI,2BAAE,IAAI,CAACtQ,IAAI,CAAC,iBAAiB,CAAC,oCAAI9G,SAAS,CAACG,IAAI,CAACC,KAAK;OAE1DmZ,cAAc,EAAElU,MAAM,0BAAC,IAAI,CAACyB,IAAI,CAAC,kCAAkC,CAAC,oCAAI,CAAC,CAAC;OAC1E0S,UAAU,EAAEnU,MAAM,0BAAC,IAAI,CAACyB,IAAI,CAAC,wBAAwB,CAAC,oCAAIuS,iBAAiB,CAAC;OAC5EI,gBAAgB,EAAE,IAAI,CAACC,iBAAiB,CAAC,+BAA+B,CAAC;OAEzEC,2BAA2B,EAAEtU,MAAM,0BAAC,IAAI,CAACyB,IAAI,CAAC,2CAA2C,CAAC,oCAAI,CAAC,CAAC;OAChG8S,kBAAkB,EAAEvU,MAAM,0BAAC,IAAI,CAACyB,IAAI,CAAC,iCAAiC,CAAC,oCAAI3F,aAAa,CAACC,GAAG,CAAChB,KAAK,CAAC;OAEnGyZ,iBAAiB,EAAE,IAAI,CAACH,iBAAiB,CAAC,gCAAgC,CAAC;OAC3EI,iBAAiB,2BAAE,IAAI,CAAChT,IAAI,CAAC,gCAAgC,CAAC,oCAAIhG,cAAc,CAACC,EAAE,CAACX,KAAK;OACzF2Z,iBAAiB,EAAE,IAAI,CAACL,iBAAiB,CAAC,gCAAgC,CAAC;OAC3EM,kBAAkB,EAAE3U,MAAM,0BAAC,IAAI,CAACyB,IAAI,CAAC,iCAAiC,CAAC,oCAAI,CAAC,CAAC;OAE7EmO,SAAS;OACTE,mBAAmB,EAAE9P,MAAM,2BAAC,IAAI,CAACyB,IAAI,CAAC,kCAAkC,CAAC,qCAAIuS,iBAAiB,CAAC;OAC/FnE,oBAAoB;OACpBG,mBAAmB,EAAEhQ,MAAM,2BAAC,IAAI,CAACyB,IAAI,CAAC,kCAAkC,CAAC,qCAAIuS,iBAAiB,CAAC;OAC/FjE,oBAAoB;OACpBE,qBAAqB,EAAE,KAAK;OAE5B2E,YAAY,EAAE5U,MAAM,2BAAC,IAAI,CAACyB,IAAI,CAAC,0BAA0B,CAAC,qCAAI3F,aAAa,CAACC,GAAG,CAAChB,KAAK,CAAC;OACtF8Z,aAAa,4BAAE,IAAI,CAACpT,IAAI,CAAC,gCAAgC,CAAC,qCAAIhG,cAAc,CAACC,EAAE,CAACX,KAAK;OAErF0T,UAAU,EAAEzO,MAAM,2BAAC,IAAI,CAACyB,IAAI,CAAC,wBAAwB,CAAC,qCAAI,CAAC;MAC3D;IACD;GAEDoD,QAAQ,EAAE;KACTiQ,cAAc,GACd;OACC,OAAO,IAAI,CAAC/C,IAAI,KAAKpX,SAAS,CAACQ,QAAQ,CAACJ,KAAK;MAC7C;KAEDga,YAAY,GACZ;OACC,OAAO,IAAI,CAAChD,IAAI,KAAKpX,SAAS,CAACS,MAAM,CAACL,KAAK;MAC3C;KAEDia,8BAA8B,GAC9B;OACC,OAAO,IAAI,CAACF,cAAc,IAAI,IAAI,CAACF,YAAY,KAAK9Y,aAAa,CAACK,MAAM,CAACpB,KAAK;MAC9E;KAEDka,0BAA0B,GAC1B;OACC,OAAOvW,gBAAgB,CAAC,IAAI,CAACgW,iBAAiB,CAAC;MAC/C;KAEDQ,kBAAkB,GAClB;OACC,OAAOxW,gBAAgB,CAAC,IAAI,CAAC8V,iBAAiB,CAAC;MAC/C;KAEDW,yBAAyB,GACzB;OACC,OAAOzW,gBAAgB,CAAC,IAAI,CAAC0V,gBAAgB,CAAC;MAC9C;KAEDgB,0BAA0B,GAC1B;OACC,IAAI,IAAI,CAACrD,IAAI,KAAKpX,SAAS,CAACQ,QAAQ,CAACJ,KAAK,EAC1C;SACC,OAAO,IAAI,CAACyZ,iBAAiB;;OAG9B,IAAI7Y,IAAI,GAAG,IAAI2C,IAAI,CAAC,IAAI,CAAC8V,gBAAgB,GAAG,IAAI,CAAC;OAEjD,QAAQ,IAAI,CAACD,UAAU;SAEtB,KAAK3X,OAAO,CAACT,GAAG,CAAChB,KAAK;WACrBY,IAAI,GAAGA,IAAI,CAAC0Z,OAAO,CAAC1Z,IAAI,CAAC2Z,OAAO,EAAE,GAAG,IAAI,CAACpB,cAAc,CAAC;WACzD;SACD,KAAK1X,OAAO,CAACR,IAAI,CAACjB,KAAK;WACtBY,IAAI,GAAGA,IAAI,CAAC0Z,OAAO,CAAC1Z,IAAI,CAAC2Z,OAAO,EAAE,GAAG,IAAI,CAACpB,cAAc,GAAG,CAAC,CAAC;WAC7D;SACD,KAAK1X,OAAO,CAACP,KAAK,CAAClB,KAAK;WACvBY,IAAI,GAAGA,IAAI,CAAC4Z,QAAQ,CAAC5Z,IAAI,CAAC6Z,QAAQ,EAAE,GAAG,IAAI,CAACtB,cAAc,CAAC;WAC3D;SACD;;OAGD,OAAOvY,IAAI,GAAG,IAAI;MAClB;KAED8Z,SAAS,GACT;OAAA;OACC,OAAO;SACNvQ,QAAQ,4BAAE,IAAI,CAACzD,IAAI,CAAC,sBAAsB,CAAC,qCAAI,IAAI;SACnDL,UAAU,4BAAE,IAAI,CAACK,IAAI,CAAC,8BAA8B,CAAC,qCAAI,IAAI;SAC7D8E,UAAU,4BAAE,IAAI,CAAC9E,IAAI,CAAC,8BAA8B,CAAC,qCAAI,IAAI;SAC7D6K,SAAS,4BAAE,IAAI,CAAC7K,IAAI,CAAC,0BAA0B,CAAC,qCAAI,KAAK;SACzDmG,QAAQ,4BAAE,IAAI,CAACnG,IAAI,CAAC,sBAAsB,CAAC,qCAAI;QAC/C;MACD;KAEDiU,mBAAmB,GACnB;OAAA;OACC,gCAAO,IAAI,CAAC3B,MAAM,CAAC2B,mBAAmB,oCAAI,KAAK;MAC/C;KAEDC,cAAc,GACd;OACC,OAAO,IAAI,CAAC3W,YAAY,KAAKlB,EAAE,CAACmB,aAAa,CAACE,WAAW,CAACyW,YAAY;MACtE;KAEDC,aAAa,GACb;OACC,MAAMC,YAAY,GAAG,IAAI,CAAC7F,qBAAqB,IAAI,IAAI,CAACJ,oBAAoB,GAAG,CAAC;OAEhF,OAAOiG,YAAY,GAAGzZ,eAAe,CAACE,UAAU,GAAGF,eAAe,CAACC,GAAG;MACtE;KAEDyZ,aAAa,GACb;OACC,OAAO,IAAI,CAAChG,oBAAoB,GAAG,CAAC,GAAG1T,eAAe,CAACE,UAAU,GAAGF,eAAe,CAACC,GAAG;;IAExF;GAEDqF,OAAO,EAAE;KACR0S,iBAAiB,CAAC2B,SAAiB,EACnC;OACC,MAAMC,QAAQ,GAAG,IAAI,CAACxU,IAAI,CAACuU,SAAS,CAAC;OACrC,MAAME,UAAU,GAAGvX,wBAAc,CAACwX,KAAK,CAACF,QAAQ,CAAC;OACjD,MAAMlb,KAAK,GAAG,CAACmb,UAAU,WAAVA,UAAU,GAAI,IAAI5X,IAAI,EAAE,EAAEoT,OAAO,EAAE;OAElD,OAAO3W,KAAK,GAAG,IAAI;MACnB;KAEDqb,OAAO,CAACrE,IAAY,EACpB;OACC,IAAI,CAACA,IAAI,GAAGA,IAAI;MAChB;KAEDsE,mBAAmB,CAAC;OAAE3W;MAAM,EAC5B;OACC,IAAI,CAACkV,YAAY,GAAGlV,IAAI;MACxB;KAED4W,qBAAqB,CAAC;OAAE5W,IAAI;OAAE3E;MAAO,EACrC;OACC,IAAI,CAACwZ,kBAAkB,GAAG7U,IAAI;OAC9B,IAAI,CAAC4U,2BAA2B,GAAGvZ,KAAK;MACxC;KAEDwb,iBAAiB,CAAC;OAAE7W,IAAI;OAAE/D,IAAI;OAAEC;MAAO,EACvC;OACC,IAAI,CAAC6Y,iBAAiB,GAAG/U,IAAI;OAC7B,IAAI,CAACgV,iBAAiB,GAAG/Y,IAAI;OAC7B,IAAI,CAACgZ,kBAAkB,GAAG/Y,KAAK;MAC/B;KAED4a,eAAe,CAAC;OAAEzb,KAAK;OAAE2E,IAAI;OAAE/D;MAAM,EACrC;OACC,IAAI,CAACuY,cAAc,GAAGnZ,KAAK;OAC3B,IAAI,CAACoZ,UAAU,GAAGzU,IAAI;OACtB,IAAI,CAAC0U,gBAAgB,GAAGzY,IAAI;MAC5B;;KAGD8a,aAAa,CAAC;OAAE7G,SAAS;OAAEC,oBAAoB;OAAEC,mBAAmB;OAAEC,oBAAoB;OAAEC,mBAAmB;OAAEC;MAAuB,EACxI;OACC,IAAI,IAAI,CAAC8B,IAAI,KAAKpX,SAAS,CAACQ,QAAQ,CAACJ,KAAK,EAC1C;SACC,IAAI,CAACyZ,iBAAiB,GAAG5E,SAAS;QAClC,MAED;SACC,IAAI,CAACA,SAAS,GAAG,IAAItR,IAAI,CAACsR,SAAS,GAAG,IAAI,CAAC;;OAG5C,IAAI,CAACC,oBAAoB,GAAGA,oBAAoB;OAChD,IAAI,CAACC,mBAAmB,GAAGA,mBAAmB;OAC9C,IAAI,CAACC,oBAAoB,GAAGA,oBAAoB;OAChD,IAAI,CAACC,mBAAmB,GAAGA,mBAAmB;OAC9C,IAAI,CAACC,qBAAqB,GAAGA,qBAAqB;MAClD;KAEDyG,aAAa,CAACjI,UAAkB,EAChC;OACC,IAAI,CAACA,UAAU,GAAGA,UAAU;MAC5B;KAEDwF,oBAAoB,GACpB;OACC,OAAOzX,OAAO,CAACT,GAAG,CAAChB,KAAK;;IAEzB;;GAGD8E,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA4GZ,CAAC;;;;AC3WD,CAGqB;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAErB,CAAO,MAAMiU,WAAS,CACtB;GAUC,OAAO6C,MAAM,CAAC3X,YAAoB,EAAE8E,QAAgB,EAAE7D,cAAwB,EAAE8T,MAAe,GAAG,EAAE,EACpG;KACC,OAAO,IAAID,WAAS,CAAC9U,YAAY,EAAE8E,QAAQ,EAAE7D,cAAc,EAAE8T,MAAM,CAAC;;GAGrE6C,WAAW,CAAC5X,YAAoB,EAAE8E,QAAgB,EAAE7D,cAAwB,EAAE8T,MAAe,GAAG,EAAE,EAClG;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAbgB;;KAAE;OAAA;OAAA,OACA;;KAAE;OAAA;OAAA;;KAAA;OAAA;OAAA,OAGQ;;KAAI;OAAA;OAAA,OAChB;;KASf,4CAAI,kCAAiB/U,YAAY;KACjC,4CAAI,0BAAa8E,QAAQ;KACzB,4CAAI,sCAAmB7D,cAAc;KACrC,4CAAI,sBAAW8T,MAAM;;GAGtB8C,OAAO,CAACpV,IAAY,EACpB;KACC,4CAAI,kBAASA,IAAI;;GAGlBqV,SAAS,GACT;KACC,4CAAI,IAAI,eACR;OACC,IAAI,CAAC5K,KAAK,EAAE;;KAGb,MAAMzM,KAAK,GAAG;OACbT,YAAY,0CAAE,IAAI,+BAAc;OAChC8E,QAAQ,0CAAE,IAAI,uBAAU;OACxBrC,IAAI,0CAAE,IAAI,eAAM;OAChBsS,MAAM,0CAAE,IAAI,mBAAQ;OACpB9T,cAAc,0CAAE,IAAI;MACpB;KACD,4CAAI,gBAAQ8W,iBAAS,CAACC,SAAS,CAACC,SAAkB,EAAExX,KAAK,CAAC;KAE1D,MAAMyX,SAAS,GAAGnT,aAAG,CAAChD,MAAM,oBAAC,aAAW,EAAC;KACzC,4CAAI,wCAAoB,4CAAI,cAAMoW,KAAK,CAACD,SAAS,CAAC;KAElD,OAAOA,SAAS;;GAGjBhL,KAAK,GACL;KAAA;KACC,qEAAI,kCAAJ,sBAAWkL,OAAO,EAAE;KACpB,4CAAI,gBAAQ,IAAI;;GAGjB3J,KAAK,GACL;KACC,4CAAI,sCAAkBA,KAAK,EAAE;;CAE/B;;;;;;;;"}