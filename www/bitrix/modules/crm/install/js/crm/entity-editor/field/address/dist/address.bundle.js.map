{"version":3,"file":"address.bundle.js","sources":["../src/address.js"],"sourcesContent":["import {EntityEditorBaseAddressField} from \"crm.entity-editor.field.address.base\";\nimport {Event, Tag, Dom, Type} from \"main.core\";\nimport {EventEmitter} from \"main.core.events\";\n\nexport class EntityEditorAddressField extends BX.Crm.EntityEditorField\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis._field = null;\n\t\tthis._isMultiple = null;\n\t\tthis._autocompleteEnabled = false;\n\t\tthis._restrictionsCallback = null;\n\t}\n\n\tinitialize(id, settings)\n\t{\n\t\tsuper.initialize(id, settings);\n\n\t\tlet params = this._schemeElement.getData();\n\t\tthis._isMultiple = BX.prop.getBoolean(params, \"multiple\", false);\n\n\t\tthis._autocompleteEnabled = BX.prop.getBoolean(params, \"autocompleteEnabled\", false);\n\t\tif (!this._autocompleteEnabled)\n\t\t{\n\t\t\tthis._restrictionsCallback = BX.prop.getString(params, \"featureRestrictionCallback\", '');\n\t\t}\n\n\t\tsettings = Type.isPlainObject(settings) ? settings : {};\n\t\tsettings.crmCompatibilityMode = true;\n\t\tsettings.enableAutocomplete = this._autocompleteEnabled;\n\t\tsettings.hideDefaultAddressType = this._isMultiple; // hide for multiple addresses only\n\t\tsettings.showAddressTypeInViewMode = this._isMultiple; //for multiple addresses only\n\t\tsettings.addressZoneConfig = BX.prop.getObject(params, \"addressZoneConfig\", {});\n\t\tsettings.countryId = 0;\n\t\tsettings.defaultAddressTypeByCategory = BX.prop.getInteger(params, \"defaultAddressTypeByCategory\", 0);\n\t\tthis._field = EntityEditorBaseAddressField.create(id, settings);\n\t\tthis._field.setMultiple(this._isMultiple);\n\t\tif (this._isMultiple)\n\t\t{\n\t\t\tthis._field.setTypesList(BX.prop.getObject(params, \"types\", {}));\n\t\t}\n\t\tEventEmitter.subscribe(this._field, 'onUpdate', this.onAddressListUpdate.bind(this));\n\t\tEventEmitter.subscribe(this._field, 'onStartLoadAddress', this.onStartLoadAddress.bind(this));\n\t\tEventEmitter.subscribe(this._field, 'onAddressLoaded', this.onAddressLoaded.bind(this));\n\t\tEventEmitter.subscribe(this._field, 'onAddressDataInputting', this.onAddressDataInputting.bind(this));\n\t\tEventEmitter.subscribe(this._field, 'onError', this.onError.bind(this));\n\n\t\tthis.initializeFromModel();\n\t}\n\n\tsetupFromModel(model, options)\n\t{\n\t\tsuper.setupFromModel(model, options);\n\t\tthis.initializeFromModel();\n\t}\n\n\tinitializeFromModel()\n\t{\n\t\tthis.setAddressList(this.getValue(this._isMultiple ? {} : \"\"));\n\t}\n\n\tsetAddressList(addressList)\n\t{\n\t\tif (this._field.setValue(addressList))\n\t\t{\n\t\t\tthis.refreshLayout();\n\t\t}\n\t}\n\n\tgetCountryId()\n\t{\n\t\treturn this._field.getCountryId();\n\t}\n\n\tsetCountryId(countryId)\n\t{\n\t\tthis._field.setCountryId(countryId);\n\t}\n\n\tlayout(options)\n\t{\n\t\tif (this._hasLayout)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.ensureWrapperCreated({classNames: [\"crm-entity-widget-content-block-field-address\"]});\n\t\tthis.adjustWrapper();\n\n\t\tif (!this.isNeedToDisplay())\n\t\t{\n\t\t\tthis.registerLayout(options);\n\t\t\tthis._hasLayout = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isDragEnabled())\n\t\t{\n\t\t\tDom.append(this.createDragButton(), this._wrapper);\n\t\t}\n\n\t\tDom.append(this.createTitleNode(this.getTitle()), this._wrapper);\n\n\t\tif (!this.hasValue() && this._mode === BX.UI.EntityEditorMode.view)\n\t\t{\n\t\t\tDom.append(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-entity-editor-content-block\" onclick=\"${this.onViewModeClick.bind(this)}\">\n\t\t\t\t\t\t${BX.UI.EntityEditorField.messages.isEmpty}\n\t\t\t\t\t</div>`,\n\t\t\t\tthis._wrapper\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet fieldContainer = this._field.layout(this._mode === BX.UI.EntityEditorMode.edit);\n\t\t\tfieldContainer.classList.add('ui-entity-editor-content-block');\n\t\t\tif (this._mode === BX.UI.EntityEditorMode.view)\n\t\t\t{\n\t\t\t\tEvent.bind(fieldContainer, 'click', this.onViewModeClick.bind(this));\n\t\t\t}\n\t\t\tDom.append(fieldContainer, this._wrapper);\n\t\t}\n\n\t\tif (this.isContextMenuEnabled())\n\t\t{\n\t\t\tthis._wrapper.appendChild(this.createContextMenuButton());\n\t\t}\n\n\t\tif (this.isDragEnabled())\n\t\t{\n\t\t\tthis.initializeDragDropAbilities();\n\t\t}\n\n\t\tthis.registerLayout(options);\n\t\tthis._hasLayout = true;\n\t}\n\n\treset()\n\t{\n\t\tsuper.reset();\n\t\tthis.initializeFromModel();\n\t}\n\n\tdoClearLayout(options)\n\t{\n\t\tif (BX.prop.getBoolean(options, \"release\", false))\n\t\t{\n\t\t\tthis._field.release();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._field.resetView();\n\t\t}\n\t}\n\n\thasContentToDisplay()\n\t{\n\t\treturn this.hasValue();\n\t}\n\n\thasValue()\n\t{\n\t\tif (!Type.isObject(this._field))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn this._isMultiple ?\n\t\t\t!!(this._field.getValue().filter((item) => Type.isStringFilled(item.value)).length) :\n\t\t\t!!this._field.getValue();\n\t}\n\n\tcreateTitleMarker()\n\t{\n\t\tif(this._mode === BX.Crm.EntityEditorMode.view)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this._restrictionsCallback && this._restrictionsCallback.length)\n\t\t{\n\t\t\tlet lockIcon = Tag.render` <span class=\"tariff-lock\"></span>`;\n\t\t\tlockIcon.setAttribute('onclick', this._restrictionsCallback);\n\t\t\treturn lockIcon;\n\t\t}\n\n\t\treturn super.createTitleMarker();\n\t}\n\n\trollback()\n\t{\n\t\tthis.initializeFromModel();\n\t}\n\n\tsave()\n\t{\n\t\tif (this.isVirtual())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (!Type.isDomNode(this._wrapper))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isMultiple)\n\t\t{\n\t\t\tlet fieldNamePrefix = this.getName();\n\t\t\tfor (let address of this._field.getValue())\n\t\t\t{\n\t\t\t\tlet type = address.type;\n\t\t\t\tlet value = address.value;\n\t\t\t\tlet name = `${fieldNamePrefix}[${type}]`;\n\n\t\t\t\tlet node = Tag.render`<input type=\"hidden\">`;\n\t\t\t\tnode.name = name;\n\t\t\t\tnode.value = value;\n\t\t\t\tDom.append(node, this._wrapper);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet address = this._field.getValue();\n\t\t\tlet node = Tag.render`<input type=\"hidden\">`;\n\t\t\tnode.name = this.getName();\n\t\t\tnode.value = (address ? address : \"\");\n\t\t\tDom.append(node, this._wrapper);\n\t\t}\n\t}\n\n\tonViewModeClick()\n\t{\n\t\tif (!this.getEditor().isReadOnly())\n\t\t{\n\t\t\tthis.switchToSingleEditMode();\n\t\t}\n\t}\n\n\tonAddressListUpdate(event)\n\t{\n\t\tthis.markAsChanged();\n\t}\n\n\tonStartLoadAddress()\n\t{\n\t\tlet toolPanel = this.getEditor()._toolPanel;\n\t\tif (toolPanel)\n\t\t{\n\t\t\ttoolPanel.setLocked(true);\n\t\t}\n\t}\n\n\tonAddressLoaded()\n\t{\n\t\tlet toolPanel = this.getEditor()._toolPanel;\n\t\tif (toolPanel)\n\t\t{\n\t\t\ttoolPanel.setLocked(false);\n\t\t}\n\t}\n\n\tonAddressDataInputting()\n\t{\n\t\t\tthis.markAsChanged();\n\t}\n\n\tonError(event)\n\t{\n\t\tconst data = event.getData();\n\t\tthis.showError(data.error);\n\n\t\tconst toolPanel = this.getEditor()._toolPanel;\n\t\tif (toolPanel)\n\t\t{\n\t\t\ttoolPanel.setLocked(false);\n\t\t}\n\t}\n\n\tstatic create(id, settings)\n\t{\n\t\tlet self = new this(id, settings);\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n"],"names":["EntityEditorAddressField","_field","_isMultiple","_autocompleteEnabled","_restrictionsCallback","id","settings","params","_schemeElement","getData","BX","prop","getBoolean","getString","Type","isPlainObject","crmCompatibilityMode","enableAutocomplete","hideDefaultAddressType","showAddressTypeInViewMode","addressZoneConfig","getObject","countryId","defaultAddressTypeByCategory","getInteger","EntityEditorBaseAddressField","create","setMultiple","setTypesList","EventEmitter","subscribe","onAddressListUpdate","bind","onStartLoadAddress","onAddressLoaded","onAddressDataInputting","onError","initializeFromModel","model","options","setAddressList","getValue","addressList","setValue","refreshLayout","getCountryId","setCountryId","_hasLayout","ensureWrapperCreated","classNames","adjustWrapper","isNeedToDisplay","registerLayout","isDragEnabled","Dom","append","createDragButton","_wrapper","createTitleNode","getTitle","hasValue","_mode","UI","EntityEditorMode","view","Tag","render","onViewModeClick","EntityEditorField","messages","isEmpty","fieldContainer","layout","edit","classList","add","Event","isContextMenuEnabled","appendChild","createContextMenuButton","initializeDragDropAbilities","release","resetView","isObject","filter","item","isStringFilled","value","length","Crm","lockIcon","setAttribute","isVirtual","isDomNode","fieldNamePrefix","getName","address","type","name","node","getEditor","isReadOnly","switchToSingleEditMode","event","markAsChanged","toolPanel","_toolPanel","setLocked","data","showError","error","self","initialize"],"mappings":"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"}