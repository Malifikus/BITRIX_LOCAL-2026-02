jn.define("call/calls/users",((t,e,r)=>{let n=function(t){this.data={id:BX.prop.getInteger(t,"id",0),firstName:BX.prop.getString(t,"firstName",""),lastName:BX.prop.getString(t,"lastName",""),name:BX.prop.getString(t,"name",""),avatar:BX.prop.getString(t,"avatar",""),gender:BX.prop.getString(t,"gender",""),workPosition:BX.prop.getString(t,"workPosition",""),extranet:BX.prop.getBoolean(t,"extranet",false),invited:BX.prop.getBoolean(t,"invited",false),lastActivityDate:BX.prop.getString(t,"lastActivityDate",""),state:BX.prop.getString(t,"state",BX.Call.UserState.Idle),talking:BX.prop.getBoolean(t,"talking",false),cameraState:BX.prop.getBoolean(t,"cameraState",false),videoPaused:BX.prop.getBoolean(t,"videoPaused",false),microphoneState:BX.prop.getBoolean(t,"microphoneState",true),screenState:BX.prop.getBoolean(t,"screenState",false),floorRequestState:BX.prop.getBoolean(t,"floorRequestState",false),localUser:BX.prop.getBoolean(t,"localUser",false),centralUser:BX.prop.getBoolean(t,"centralUser",false),pinned:BX.prop.getBoolean(t,"pinned",false),presenter:BX.prop.getBoolean(t,"presenter",false),order:BX.prop.getInteger(t,"order",false),index:BX.prop.getInteger(t,"index",false)};for(var e in this.data){if(this.data.hasOwnProperty(e)){Object.defineProperty(this,e,{get:this._getField(e).bind(this),set:this._setField(e).bind(this)})}}this.onUpdate={talking:this._onUpdateTalking.bind(this),state:this._onUpdateState.bind(this)};this.talkingStop=null;this.eventEmitter=new JNEventEmitter};n.Event={Changed:"changed"};n.prototype._getField=function(t){return function(){return this.data[t]}};n.prototype._setField=function(t){return function(e){var r=this.data[t];if(r==e){return}this.data[t]=e;if(this.onUpdate.hasOwnProperty(t)){this.onUpdate[t](e,r)}this.eventEmitter.emit(n.Event.Changed,[{user:this,fieldName:t,oldValue:r,newValue:e}])}};n.prototype._onUpdateTalking=function(t){if(t){this.floorRequestState=false}else{this.talkingStop=(new Date).getTime()}};n.prototype._onUpdateState=function(t){if(t!=BX.Call.UserState.Connected){this.talking=false;this.screenState=false;this.floorRequestState=false}};n.prototype.wasTalkingAgo=function(){if(this.state!=BX.Call.UserState.Connected){return+Infinity}if(this.talking){return 0}if(!this.talkingStop){return+Infinity}return(new Date).getTime()-this.talkingStop};n.prototype.getDescription=function(){if(this.data.invited&&!this.data.last_activity_date){return BX.message("MOBILE_CALL_INVITATION_NOT_ACCEPTED")}if(this.data.workPosition){return this.data.workPosition}if(this.data.extranet){return BX.message("MOBILE_CALL_EXTRANET_USER")}return BX.message("MOBILE_CALL_EMPLOYEE")};n.prototype.subscribe=function(t,e){this.eventEmitter.on(t,e)};n.prototype.unsubscribe=function(t,e){this.eventEmitter.off(t,e)};var i=function(t){this.users=BX.prop.getArray(t,"users",[]);this.eventEmitter=new JNEventEmitter;this._sort()};i.Event={UserAdded:"userAdded",UserChanged:"userChanged"};i.prototype.subscribe=function(t,e){this.eventEmitter.on(t,e)};i.prototype.get=function(t){for(var e=0;e<this.users.length;e++){if(this.users[e].id==t){return this.users[e]}}return null};i.prototype.push=function(t){if(!(t instanceof n)){throw Error("user should be instance of UserModel")}this.users.push(t);this._sort();t.subscribe(n.Event.Changed,this._onUserChanged.bind(this));this.eventEmitter.emit(i.Event.UserAdded,[{user:t}])};i.prototype._onUserChanged=function(t){this.eventEmitter.emit(i.Event.UserChanged,[t.data])};i.prototype._sort=function(){this.users=this.users.sort((function(t,e){return t.order-e.order}))};r.exports={UserModel:n,UserRegistry:i}}));
//# sourceMappingURL=extension.map.js