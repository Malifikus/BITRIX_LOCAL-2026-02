jn.define("call/calls/call-token-manager",((e,n,t)=>{class s{#e;#n;#t;constructor(){this.#e={};this.#n={};this.#t=BX.componentParameters.get("userJwt")}getTokenCached(e){return this.#e[e]}async getToken(e){const n=this.#e[e];const t=this.#n[e];if(n){return n}else if(t){return t}this.#n[e]=new Promise((n=>{this.#s(e).then((()=>{delete this.#n[e];n(this.#e[e])}))}));return this.#n[e]}setToken(e,n){this.#e[e]=n}async getUserToken(e){const n=this.#n[e];if(this.#t){return this.#t}else if(n){return n}this.#n[e]=new Promise((n=>{this.#s(e).then((()=>{delete this.#n[e];n(this.#t)}))}));return this.#n[e]}setUserToken(e){this.#t=e}clearTokenList(){this.#e={};this.#n={};this.#t=null}async#s(e){try{const n=await BX.rest.callMethod("call.Call.getCallToken",{chatId:e});const t=n.data()?.callToken;const s=n.data()?.userToken;if(t){this.setToken(e,t)}if(s){this.setUserToken(s)}}catch(e){console.error("Error during call token retrieving",e)}}}t.exports={TokenManager:s}}));
//# sourceMappingURL=extension.map.js