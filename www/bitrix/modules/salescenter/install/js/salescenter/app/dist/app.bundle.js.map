{"version":3,"file":"app.bundle.js","sources":["../src/components/templates-type-mixin.js","../src/components/stage-blocks/tile-collection/tile-collection-mixins.js","../src/components/stage-blocks/tile-collection/uninstalled.js","../src/components/stage-blocks/tile-collection/installed.js","../src/components/stage-blocks/stage-mixin.js","../src/components/stage-blocks/cashbox.js","../src/const/mode-dictionary.js","../src/product.js","../src/components/stage-blocks/product.js","../src/components/delivery-selector.js","../src/components/shipment-view.js","../src/components/stage-blocks/delivery-vuex.js","../src/components/stage-blocks/paysystem.js","../src/const/context-dictionary.js","../src/components/stage-blocks/message-mixin.js","../src/components/stage-blocks/chat-message.js","../src/components/stage-blocks/automation.js","../src/components/deal-receiving-payment/stage-blocks/send.js","../src/components/stage-blocks/timeline.js","../src/components/stage-blocks/document-selector.js","../src/components/chat-receiving-payment/stage-blocks-list.js","../src/component-mixin.js","../src/start.js","../src/no-payment-systems.js","../src/chat.js","../src/components/stage-blocks/sms-message.js","../src/components/deal-receiving-payment/stage-blocks-list.js","../src/components/crm-entity-create-payment/stage-blocks-list.js","../src/components/deal-creating-shipment/stage-blocks/send.js","../src/components/deal-creating-shipment/stage-blocks-list.js","../src/components/stage-blocks/responsible-selector.js","../src/components/deal-terminal-payment/stage-blocks/send.js","../src/components/deal-terminal-payment/stage-blocks/amount.js","../src/components/deal-terminal-payment/stage-blocks-list.js","../src/deal.js","../src/models/application.js","../src/models/document-selector.js","../src/models/ordercreation.js","../src/components/deal-terminal-payment/mobile-app-install-popup.js","../src/app.js"],"sourcesContent":["const MixinTemplatesType = {\n\tdata() {\n\t\treturn {\n\t\t\teditable: true,\n\t\t};\n\t},\n\tcreated() {\n\t\t// TODO: this code is really weird; the only place this event is emitted in is in the products block;\n\t\t// if there's no products block on the page, the entire slider breaks\n\t\t// perhaps a little refactoring is due\n\t\tthis.$root.$on('on-change-editable', (value) => {\n\t\t\tthis.editable = value;\n\t\t});\n\t},\n};\n\nexport {\n\tMixinTemplatesType,\n};\n","import\n{\n\tAppSlider,\n\tEventTypes\n} \t\t\t\t\t\t\t\tfrom 'salescenter.marketplace';\nimport\n{\n\tLabel,\n\tTileLabel,\n\tTileHintImg,\n\tTileLabelPlus,\n\tTileHintImgCaption,\n\tTileHintBackground,\n\tTileHintBackgroundCaption,\n} \t\t\t\t\t\t\t\tfrom 'salescenter.component.stage-block.tile';\nimport * as Hint \t\t\t\tfrom 'salescenter.component.stage-block.hint';\nimport * as Tile \t\t\t\tfrom 'salescenter.tile';\n\n\nlet TileCollectionMixins = {\n\n\tcomponents:\n\t\t{\n\t\t\t'label-block'\t\t\t\t\t\t\t:\tLabel,\n\t\t\t'tile-label-block'\t\t\t\t\t\t:\tTileLabel,\n\t\t\t'tile-hint-img-block'\t\t\t\t\t:\tTileHintImg,\n\t\t\t'tile-hint-plus-block'\t\t\t\t\t:\tTileLabelPlus,\n\t\t\t'tile-hint-img-caption-block'\t\t\t:\tTileHintImgCaption,\n\t\t\t'tile-hint-background-block'\t\t\t:\tTileHintBackground,\n\t\t\t'tile-hint-background-caption-block'\t:\tTileHintBackgroundCaption\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tgetCollectionTile()\n\t\t\t{\n\t\t\t\treturn this.tiles;\n\t\t\t},\n\n\t\t\tgetCollectionTileByFilter(filter: Array)\n\t\t\t{\n\t\t\t\tlet map = new Map();\n\t\t\t\tlet collection = this.getCollectionTile();\n\n\t\t\t\tif(filter.hasOwnProperty('type') && filter.type.length > 0)\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => {\n\n\t\t\t\t\t\t\tif(filter.type === item.getType())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmap.set(index, item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcollection\n\t\t\t\t\t\t.forEach((item, index) => map.set(index, item));\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t},\n\n\t\t\thasTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\thasTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\treturn map.size > 0;\n\t\t\t},\n\n\t\t\tgetTileOfferFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.Offer.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileMoreFromCollection()\n\t\t\t{\n\t\t\t\tlet map = this.getCollectionTileByFilter({\n\t\t\t\t\ttype: Tile.More.type()\n\t\t\t\t});\n\n\t\t\t\tlet result = {};\n\t\t\t\tmap.forEach((item, inx)=> { result = {index: inx, tile: item}; return false;});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tgetTileByIndex(index)\n\t\t\t{\n\t\t\t\tlet  tile = null;\n\t\t\t\tthis.getCollectionTileByFilter({})\n\t\t\t\t\t.forEach((item, inx)=> {\n\n\t\t\t\t\t\tif(index === inx)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttile = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\treturn tile;\n\t\t\t},\n\n\t\t\topenSlider(inx)\n\t\t\t{\n\t\t\t\tlet slider = new AppSlider();\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tslider.openAppLocal(tile, this.getOptionSlider);\n\t\t\t\tslider.subscribe(EventTypes.AppSliderSliderClose,\n\t\t\t\t\t(e) => this.$emit('on-tile-slider-close', {data: e.data})\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisControlTile(tile: Tile.Base)\n\t\t\t{\n\t\t\t\treturn [Tile.More.type(), Tile.Offer.type()].includes(tile.getType());\n\t\t\t},\n\n\t\t\tshowHint(inx, e)\n\t\t\t{\n\t\t\t\tlet event = e.data.event;\n\t\t\t\tlet tile = this.getTileByIndex(inx);\n\n\t\t\t\tthis.popup = new Hint.Popup();\n\t\t\t\tthis.popup.show(event.target, tile.info);\n\t\t\t},\n\n\t\t\thideHint()\n\t\t\t{\n\t\t\t\tif(this.popup)\n\t\t\t\t{\n\t\t\t\t\tthis.popup.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tgetOptionSlider()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\twidth: 1000\n\t\t\t\t}\n\t\t\t}\n\t\t},\n};\nexport {\n\tTileCollectionMixins\n}","import { TileCollectionMixins } from './tile-collection-mixins';\n\nconst Uninstalled = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [TileCollectionMixins],\n\ttemplate: `\t\t\n\t\t<div>\n\t\t\t<template v-for=\"(tile, index) in tiles\">\n\t\t\t\t<tile-hint-background-caption-block\tv-if=\"tile.img.length > 0 && tile.showTitle\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\t:caption=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-hint-bg-label-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-background-block\t\tv-else-if=\"tile.img.length > 0\"\n\t\t\t\t\t:src=\"tile.img\"\n\t\t\t\t\t:name=\"tile.name\"\n\t\t\t\t\tv-on:tile-hint-bg-on-click=\"openSlider(index)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseenter=\"showHint(index, $event)\"\n\t\t\t\t\tv-on:tile-label-bg-hint-on-mouseleave=\"hideHint\"\n\t\t\t\t/>\n\t\t\t\t<tile-hint-plus-block\t\t\tv-else \n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-plus-on-click=\"openSlider(index)\"\n\t\t\t\t/> \n\t\t\t</template>\n\t\t</div>\n\t`\n};\n\nexport {\n\tUninstalled,\n};\n","import {TileCollectionMixins} from \"./tile-collection-mixins\";\n\nconst Installed = {\n\tprops: {\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmixins:[TileCollectionMixins],\n\n\ttemplate: `\t\n\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text\"\n\t\t\t\t\tv-for=\"(tile, index) in tiles\"\n\t\t\t\t\tv-bind:key=\"index\"\n\t\t\t\t\tv-if=\"isControlTile(tile) === false\"\n\t\t\t\t\t:name=\"tile.name\" \n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(index)\"\n\t\t\t\t/>\n\t\t\t\t<br>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileOfferFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileOfferFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileOfferFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t\t<tile-label-block class=\"salescenter-app-payment-by-sms-item-container-payment-item-text-add\"\n\t\t\t\t\tv-if=\"hasTileMoreFromCollection() === true\"\n\t\t\t\t\t:name=\"getTileMoreFromCollection().tile.name\"\n\t\t\t\t\tv-on:tile-label-on-click=\"openSlider(getTileMoreFromCollection().index)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\nexport {\n\tInstalled\n}","import {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst StageMixin = {\n\tcomputed:\n\t\t{\n\t\t\tstatusClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item'\t\t\t: true,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-current'\t: this.status === Status.current,\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled'\t: this.status === Status.disabled,\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcontainerClassMixin()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-container'\t: true\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcounterCheckedMixin()\n\t\t\t{\n\t\t\t\treturn this.status === Status.complete\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t\t{\n\t\t\t\tonSliderClose(e)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('on-stage-tile-collection-slider-close', e);\n\t\t\t\t}\n\t\t\t}\n};\n\nexport {\n\tStageMixin\n}","import {Loc} \t\t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \t\tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst Cashbox = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tcomputed:\n\t{\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_TITLE_MSGVER_1');\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigCashBox(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'cashbox', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>\n\t\t\t\t${Loc.getMessage('SALESCENTER_CASHBOX_BLOCK_SETTINGS_TITLE')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!installed\"\n\t\t\t\t\tclass=\"salescenter-app-explanation\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-img\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-area\">\n\t\t\t\t\t\t<div class=\"salescenter-app-explanation-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TERMINAL_CASHBOX_SETUP_HINT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\" v-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tCashbox\n}\n","export const ModeDictionary = Object.freeze({\n\tpayment: 'payment',\n\tdelivery: 'delivery',\n\tpaymentDelivery: 'payment_delivery',\n\tterminalPayment: 'terminal_payment',\n});\n","import { FormMode, ProductForm } from 'catalog.product-form';\nimport 'currency';\nimport { MixinTemplatesType } from './components/templates-type-mixin';\nimport { ajax as Ajax, Runtime, Type, Text, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport type { BaseEvent } from 'main.core.events';\nimport { ModeDictionary } from './const/mode-dictionary';\n\nexport default {\n\tmixins: [MixinTemplatesType],\n\tmounted()\n\t{\n\t\tconst editable = this.$root.$app.options.templateMode !== 'view';\n\t\tconst isCompilationMode = this.$root.$app.compilation !== null;\n\n\t\tthis.$root.$emit('on-change-editable', editable);\n\t\tif (this.productForm)\n\t\t{\n\t\t\tthis.productForm.setEditable(editable, isCompilationMode);\n\t\t}\n\n\t\tif (this.productForm)\n\t\t{\n\t\t\tconst formWrapper = this.$root.$el.querySelector('.salescenter-app-form-wrapper');\n\t\t\tformWrapper.appendChild(this.productForm.layout());\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.refreshId = null;\n\n\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\n\t\tthis.$store.dispatch('orderCreation/setCurrency', defaultCurrency);\n\t\tif (Type.isArray(this.$root.$app.options.basket))\n\t\t{\n\t\t\tconst fields = [];\n\t\t\tthis.$root.$app.options.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\t\t}\n\n\t\tif (Type.isObject(this.$root.$app.options.totals))\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/setTotal', this.$root.$app.options.totals);\n\t\t}\n\n\t\tthis.productForm = new ProductForm(\n\t\t\t{\n\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\tcurrency: defaultCurrency,\n\t\t\t\tiblockId: this.$root.$app.options.catalogIblockId,\n\t\t\t\tbasePriceId: this.$root.$app.options.basePriceId,\n\t\t\t\tbasket: Type.isArray(this.$root.$app.options.basket) ? this.$root.$app.options.basket : [],\n\t\t\t\ttotals: this.$root.$app.options.totals,\n\t\t\t\ttaxList: this.$root.$app.options.vatList,\n\t\t\t\tmeasures: this.$root.$app.options.measures,\n\t\t\t\tshowDiscountBlock: this.$root.$app.options.showProductDiscounts,\n\t\t\t\tshowTaxBlock: this.$root.$app.options.showProductTaxes,\n\t\t\t\ttotalResultLabel: this.$root.$app.options.mode === 'delivery' ? Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_TOTAL') : null,\n\t\t\t\turlBuilderContext: this.$root.$app.options.urlProductBuilderContext,\n\t\t\t\tisCatalogPriceEditEnabled: this.$root.$app.options.isCatalogPriceEditEnabled,\n\t\t\t\tisCatalogDiscountSetEnabled: this.$root.$app.options.isCatalogDiscountSetEnabled,\n\t\t\t\tfieldHints: this.$root.$app.options.fieldHints,\n\t\t\t\thideUnselectedProperties: (this.$root.$app.options.templateMode === 'view'),\n\t\t\t\tshowCompilationModeSwitcher: this.showCompilationModeSwitcher(),\n\t\t\t\tcompilationFormType: this.$root.$app.connector === 'facebook' && this.$root.$app.isAllowedFacebookRegion ? 'FACEBOOK' : 'REGULAR',\n\t\t\t\tfacebookFailProducts: this.$root.$app.compilation?.FAIL_PRODUCTS,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tdialogId: this.$root.$app.options.dialogId,\n\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\tisShortProductViewFormat: true,\n\t\t\t\tenableEmptyProductError: false,\n\t\t\t},\n\t\t);\n\n\t\tthis.checkProductErrors();\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onBasketChange',\n\t\t\tRuntime.debounce(this.onBasketChange, 500, this),\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onErrorsChange',\n\t\t\tRuntime.debounce(this.checkProductErrors, 500, this),\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onModeChange',\n\t\t\tthis.onProductFormModeChange,\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.productForm,\n\t\t\t'ProductForm:onCompilationCreated',\n\t\t\tthis.onProductFormCompilationCreated.bind(this),\n\t\t);\n\t},\n\twatch: {\n\t\tmessageDataSenderCode()\n\t\t{\n\t\t\tthis.productForm.setShowCompilationModeSwitcher(this.showCompilationModeSwitcher());\n\t\t},\n\t},\n\tcomputed: {\n\t\tmessageDataSenderCode()\n\t\t{\n\t\t\treturn this.$store.state.orderCreation.messageData.senderCode;\n\t\t},\n\t},\n\tmethods: {\n\t\tshowCompilationModeSwitcher(): boolean\n\t\t{\n\t\t\treturn this.$root.$app.options.templateMode === 'create'\n\t\t\t\t&& this.$root.$app.options.showCompilationModeSwitcher === 'Y'\n\t\t\t\t&& this.$root.$app.options.mode === ModeDictionary.paymentDelivery\n\t\t\t\t&& this.messageDataSenderCode !== 'bitrix24'\n\t\t\t;\n\t\t},\n\t\tonProductFormCompilationCreated(event: BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tthis.$root.$app.newCompilationId = data.compilationId;\n\t\t\tthis.$root.$app.ownerId = data.ownerId;\n\t\t\tthis.$root.$app.options.ownerId = data.ownerId;\n\t\t},\n\t\tonProductFormModeChange(event: BaseEvent)\n\t\t{\n\t\t\tconst mode = event.getData().mode;\n\t\t\tif (mode === FormMode.COMPILATION || mode === FormMode.COMPILATION_READ_ONLY)\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableCompilationMode');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableCompilationMode');\n\t\t\t}\n\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t},\n\t\tonBasketChange(event: BaseEvent)\n\t\t{\n\t\t\tconst processRefreshRequest = (data) => {\n\t\t\t\tif (this.productForm)\n\t\t\t\t{\n\t\t\t\t\tconst preparedBasket = [];\n\t\t\t\t\tdata.basket.forEach((item) => {\n\t\t\t\t\t\tif (!Type.isStringFilled(item.innerId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpreparedBasket.push({\n\t\t\t\t\t\t\tselectorId: item.innerId,\n\t\t\t\t\t\t\tfields: item,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.productForm.setData({\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\tbasket: preparedBasket,\n\t\t\t\t\t});\n\n\t\t\t\t\tif (Type.isArray(data.basket))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setBasket', data.basket);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isObject(data.total))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/setTotal', data.total);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst data = event.getData();\n\t\t\tif (!Type.isArray(data.basket))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst fields = [];\n\t\t\tdata.basket.forEach((item) => {\n\t\t\t\tfields.push(item.fields);\n\t\t\t});\n\t\t\tthis.$store.commit('orderCreation/setBasket', fields);\n\n\t\t\tif (this.$root.$app.newCompilationId)\n\t\t\t{\n\t\t\t\tthis.changeCompilationProducts();\n\t\t\t}\n\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t\tthis.$store.commit('orderCreation/setHasAvailableProducts', false);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t\t\tthis.$store.commit('orderCreation/setHasAvailableProducts', true);\n\n\t\t\tconst requestId = Text.getRandom(20);\n\t\t\tthis.refreshId = requestId;\n\t\t\tAjax.runAction(\n\t\t\t\t'salescenter.api.order.refreshBasket',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\torderId: this.$root.$app.orderId,\n\t\t\t\t\t\tbasketItems: fields,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t)\n\t\t\t\t.then((result) => {\n\t\t\t\t\tif (this.refreshId !== requestId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst data = BX.prop.getObject(result, 'data', {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\ttotal: BX.prop.getObject(\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t'total',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdiscount: 0,\n\t\t\t\t\t\t\t\tresult: 0,\n\t\t\t\t\t\t\t\tsum: 0,\n\t\t\t\t\t\t\t\t// resultNumeric: 0,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t),\n\t\t\t\t\t\tbasket: BX.prop.get(data, 'items', []),\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((result) => {\n\t\t\t\t\tconst data = BX.prop.getObject(result, 'data', {});\n\t\t\t\t\tprocessRefreshRequest({\n\t\t\t\t\t\terrors: BX.prop.get(result, 'errors', []),\n\t\t\t\t\t\tbasket: BX.prop.get(data, 'items', []),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tchangeCompilationProducts()\n\t\t{\n\t\t\tconst basketItems = this.$store.getters['orderCreation/getBasket']();\n\t\t\tconst productIds = basketItems.map((basketItem) => {\n\t\t\t\treturn basketItem.skuId;\n\t\t\t});\n\t\t\tconst compilationId = this.$root.$app.compilation\n\t\t\t\t? this.$root.$app.compilation.ID\n\t\t\t\t: this.$root.$app.newCompilationId\n\t\t\t;\n\t\t\tif (compilationId)\n\t\t\t{\n\t\t\t\tAjax.runAction(\n\t\t\t\t\t'salescenter.compilation.updateCompilation',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcompilationId,\n\t\t\t\t\t\t\tproductIds,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tcheckProductErrors()\n\t\t{\n\t\t\tif (this.isNeedDisableSubmit())\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\t\tthis.$store.commit('orderCreation/setHasAvailableProducts', false);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t\t\t\tthis.$store.commit('orderCreation/setHasAvailableProducts', true);\n\t\t\t}\n\t\t},\n\t\tisNeedDisableSubmit(): boolean\n\t\t{\n\t\t\tconst basket = this.$store.getters['orderCreation/getBasket']();\n\n\t\t\tif (\n\t\t\t\tbasket.length <= 0\n\t\t\t\t|| (this.productForm && Type.isFunction(this.productForm.hasErrors) && this.productForm.hasErrors())\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst filledProducts = basket.filter((item) => {\n\t\t\t\treturn (Type.isStringFilled(item.module) && item.productId > 0) || item.name.length > 0;\n\t\t\t});\n\n\t\t\treturn filledProducts.length <= 0;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-side\">\n\t\t\t<div class=\"salescenter-app-page-content\">\n\t\t\t\t<div class=\"salescenter-app-form-wrapper\"></div>\n\t\t\t\t<slot name=\"footer\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Block, StatusTypes as Status } from 'salescenter.component.stage-block';\nimport Product from '../../product';\nimport { StageMixin } from './stage-mixin';\n\nexport default {\n\tprops: {\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tadditionalContainerClasses: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault()\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item': Block,\n\t\t\tproduct: Product,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonItemHint(e)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowToSell(e);\n\t\t\t},\n\t\t\tonProductFormModeChange(event)\n\t\t\t{\n\t\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tstatus(): string\n\t\t\t{\n\t\t\t\treturn this.$store.getters['orderCreation/getHasAvailableProducts'] ? Status.complete : Status.current;\n\t\t\t},\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t};\n\t\t\t},\n\t\t\tcontainerClasses()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...this.statusClassMixin,\n\t\t\t\t\t...this.additionalContainerClasses,\n\t\t\t\t};\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"containerClasses\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{ title }}</template>\n\t\t\t<template v-slot:block-hint-title>{{ hintTitle }}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<product\n\t\t\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\n","import {Vuex} from 'ui.vue.vuex';\nimport {Vue} from 'ui.vue';\nimport {ajax, Loc} from 'main.core';\nimport DeliverySelector from 'salescenter.deliveryselector';\n\nexport default {\n\tprops: {\n\t\tconfig: {type: Object, required: true}\n\t},\n\tcomponents: {\n\t\t'delivery-selector': DeliverySelector,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tavailableServices: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tonChange(payload)\n\t\t{\n\t\t\tthis.$store.dispatch('orderCreation/setDelivery', payload.deliveryPrice);\n\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryId',\n\t\t\t\tpayload.deliveryServiceId\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setPropertyValues',\n\t\t\t\tpayload.relatedPropsValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryExtraServicesValues',\n\t\t\t\tpayload.relatedServicesValues\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setExpectedDelivery',\n\t\t\t\tpayload.estimatedDeliveryPrice\n\t\t\t);\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setDeliveryResponsibleId',\n\t\t\t\tpayload.responsibleUser ? payload.responsibleUser.id : null\n\t\t\t);\n\n\t\t\tthis.$emit('change', payload);\n\t\t},\n\t\tonAddressFromChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonDeliveryServiceChanged()\n\t\t{\n\t\t\tthis.refreshAvailableServices();\n\t\t},\n\t\tonSettingsChanged()\n\t\t{\n\t\t\tthis.$emit('delivery-settings-changed');\n\t\t},\n\t\trefreshAvailableServices()\n\t\t{\n\t\t\tajax.runAction(\n\t\t\t\t'salescenter.order.getCompatibleDeliverySystems',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbasketItems: this.config.basket ? this.config.basket : [],\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdeliveryServiceId: this.order.deliveryId,\n\t\t\t\t\t\tshipmentPropValues: this.order.propertyValues,\n\t\t\t\t\t\tdeliveryRelatedServiceValues: this.order.deliveryExtraServicesValues,\n\t\t\t\t\t\tdeliveryResponsibleId: this.order.deliveryResponsibleId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then((result) => {\n\t\t\t\tlet data = BX.prop.getObject(result, \"data\", {});\n\t\t\t\tthis.availableServices = data.availableServices ? data.availableServices : {};\n\t\t\t}).catch((result) => {\n\t\t\t\tthis.availableServices = {};\n\t\t\t});\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.$store.dispatch('orderCreation/setPersonTypeId', this.config.personTypeId);\n\n\t\tthis.refreshAvailableServices();\n\t},\n\n\tcomputed: {\n\t\tlocalize()\n\t\t{\n\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t},\n\t\tsumTitle()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE');\n\t\t},\n\t\tproductsPrice()\n\t\t{\n\t\t\treturn this.order.total.result;\n\t\t},\n\t\tdelivery()\n\t\t{\n\t\t\treturn this.order.delivery;\n\t\t},\n\t\tdeliveryFormatted()\n\t\t{\n\t\t\tif (this.isDeliveryCalculated)\n\t\t\t{\n\t\t\t\treturn BX.Currency.currencyFormat(this.delivery, this.config.currency, false);\n\t\t\t}\n\n\t\t},\n\t\ttotal()\n\t\t{\n\t\t\tif (this.productsPrice === null || this.delivery === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.productsPrice + this.delivery;\n\t\t},\n\t\ttotalFormatted()\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(this.total, this.config.currency, false);\n\t\t},\n\t\tisDeliveryCalculated()\n\t\t{\n\t\t\treturn (this.order.delivery !== null);\n\t\t},\n\t\texcludedServiceIds()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode === 'delivery' ? [this.$root.$app.options.emptyDeliveryServiceId] : [];\n\t\t},\n\t\tactionData()\n\t\t{\n\t\t\treturn {\n\t\t\t\tbasketItems: this.config.basket,\n\t\t\t\toptions: {\n\t\t\t\t\torderId : this.$root.$app.orderId,\n\t\t\t\t\tsessionId: this.config.sessionId,\n\t\t\t\t\townerTypeId: this.config.ownerTypeId,\n\t\t\t\t\townerId: this.config.ownerId,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\torder: state => state.orderCreation,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<delivery-selector\n\t\t\t:available-services=\"availableServices\"\n\t\t\t:excluded-service-ids=\"excludedServiceIds\"\t\t\t\t\n\t\t\t:init-entered-delivery-price=\"config.deliveryPrice\"\n\t\t\t:init-delivery-service-id=\"config.deliveryServiceId\"\n\t\t\t:init-related-services-values=\"config.relatedServicesValues\"\n\t\t\t:init-related-props-values=\"config.relatedPropsValues\"\n\t\t\t:init-related-props-options=\"config.relatedPropsOptions\"\n\t\t\t:init-responsible-id=\"config.responsibleId\"\n\t\t\t:person-type-id=\"config.personTypeId\"\n\t\t\t:action=\"'salescenter.api.order.refreshDelivery'\"\n\t\t\t:action-data=\"actionData\"\n\t\t\t:external-sum=\"productsPrice\"\n\t\t\t:external-sum-label=\"sumTitle\"\n\t\t\t:currency=\"config.currency\"\n\t\t\t:currency-symbol=\"config.currencySymbol\"\n\t\t\t@change=\"onChange\"\n\t\t\t@address-from-changed=\"onAddressFromChanged\"\n\t\t\t@delivery-service-changed=\"onDeliveryServiceChanged\"\n\t\t\t@settings-changed=\"onSettingsChanged\"\n\t\t></delivery-selector>\n\t`\n};\n","import 'ui.fonts.ruble';\nimport 'currency';\nimport {ajax, Loc, Type} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tproductsPrice: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tshipment: {\n\t\t\t\tpriceDelivery: null,\n\t\t\t\tbasePriceDelivery: null,\n\t\t\t\tcurrency: null,\n\t\t\t\tdeliveryService: {\n\t\t\t\t\tname: null,\n\t\t\t\t\tlogo: null,\n\t\t\t\t\tparent: {\n\t\t\t\t\t\tname: null,\n\t\t\t\t\t\tlogo: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\textraServices: [],\n\t\t\t\trequestProperties: [],\n\t\t\t},\n\t\t\tcanUserPerformCalls: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tajax.runAction(\n\t\t\t'salescenter.deliveryselector.getShipmentData',\n\t\t\t{data: {\n\t\t\t\t\tid: this.id\n\t\t\t\t}}\n\t\t).then((result) => {\n\t\t\tthis.shipment = result.data.shipment;\n\t\t\tthis.canUserPerformCalls = result.data.canUserPerformCalls;\n\t\t});\n\t},\n\tmethods: {\n\t\tgetFormattedPrice(price)\n\t\t{\n\t\t\treturn BX.Currency.currencyFormat(price, this.currency, true);\n\t\t},\n\t\tisPhoneRequestProperty(property)\n\t\t{\n\t\t\tif (!Type.isArray(property.tags))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn property.tags.includes('phone');\n\t\t},\n\t\tmakeCall(phoneNumber)\n\t\t{\n\t\t\tif (\n\t\t\t\t!Type.isUndefined(window.top['BXIM'])\n\t\t\t\t&& this.canUserPerformCalls === true\n\t\t\t)\n\t\t\t{\n\t\t\t\twindow.top['BXIM'].phoneTo(phoneNumber);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.open('tel:' + phoneNumber, '_self');\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\thasParent()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.shipment.hasOwnProperty('deliveryService')\n\t\t\t\t&& this.shipment.deliveryService.hasOwnProperty('parent')\n\t\t\t\t&& this.shipment.deliveryService.parent\n\t\t\t);\n\t\t},\n\t\tdeliveryServiceLogo()\n\t\t{\n\t\t\treturn this.shipment.deliveryService.logo ? this.shipment.deliveryService.logo : null;\n\t\t},\n\t\tdeliveryServiceProfileLogo()\n\t\t{\n\t\t\treturn (this.hasParent && this.shipment.deliveryService.parent.logo)\n\t\t\t\t? this.shipment.deliveryService.parent.logo\n\t\t\t\t: null;\n\t\t},\n\t\tpaymentPrice()\n\t\t{\n\t\t\treturn this.productsPrice + this.priceDelivery;\n\t\t},\n\t\tdeliveryServiceName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.parent.name : this.shipment.deliveryService.name;\n\t\t},\n\t\tdeliveryServiceProfileName()\n\t\t{\n\t\t\treturn this.hasParent ? this.shipment.deliveryService.name : null;\n\t\t},\n\t\tpriceDelivery()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.priceDelivery : null;\n\t\t},\n\t\tcurrency()\n\t\t{\n\t\t\treturn this.shipment ? this.shipment.currency : null;\n\t\t},\n\t\textraServices()\n\t\t{\n\t\t\treturn Type.isArray(this.shipment.extraServices) ? this.shipment.extraServices : [];\n\t\t},\n\t\tisExtraServicesVisible()\n\t\t{\n\t\t\treturn this.extraServices.length > 0;\n\t\t},\n\t\trequestProperties()\n\t\t{\n\t\t\treturn Type.isArray(this.shipment.requestProperties) ? this.shipment.requestProperties : [];\n\t\t},\n\t\tisRequestPropertiesVisible()\n\t\t{\n\t\t\treturn this.requestProperties.length > 0;\n\t\t},\n\t\tpriceDeliveryFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.priceDelivery);\n\t\t},\n\t\tproductsPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.productsPrice);\n\t\t},\n\t\tpaymentPriceFormatted()\n\t\t{\n\t\t\treturn this.getFormattedPrice(this.paymentPrice);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div style=\"width: 100%;\" xmlns=\"http://www.w3.org/1999/html\">\n\t\t\t<div class=\"salescenter-delivery-selector-head\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasParent && deliveryServiceLogo\"\n\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceLogo + ')' }\"\n\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-delivery-selector-info\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"deliveryServiceProfileLogo\"\n\t\t\t\t\t\t:style=\"{ backgroundImage: 'url(' + deliveryServiceProfileLogo + ')' }\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-logo\"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-delivery-selector-content\">\n\t\t\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">{{deliveryServiceName}}</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"deliveryServiceProfileName\"\n\t\t\t\t\t\t\tclass=\"salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{deliveryServiceProfileName}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"isExtraServicesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_EXTRA_SERVICES')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"extraService in extraServices\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{extraService.name}}: {{extraService.value}} \n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div v-if=\"isRequestPropertiesVisible\" class=\"salescenter-delivery-selector-main\">\n\t\t\t\t<div class=\"salescenter-delivery-selector-text-light\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_DELIVERY_REQUEST_DETAILS')}:\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"salescenter-delivery-selector-list\">\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"requestProperty in requestProperties\"\n\t\t\t\t\t\tclass=\"salescenter-delivery-selector-list-item salescenter-delivery-selector-text-dark\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{requestProperty.name}}:\n\t\t\t\t\t\t<template v-if=\"isPhoneRequestProperty(requestProperty)\">\n\t\t\t\t\t\t\t<a @click.prevent=\"makeCall(requestProperty.value)\" href=\"#\">{{requestProperty.value}}</a>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t{{requestProperty.value}}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-delivery-selector-line\"></div>\n\t\t\t<div class=\"catalog-pf-result-wrapper\">\n\t\t\t\t<table class=\"catalog-pf-result\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_PRODUCTS_PRICE')}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span v-html=\"productsPriceFormatted\" class=\"catalog-pf-text\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SHIPMENT_PRODUCT_BLOCK_DELIVERY_PRICE')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding-bottom\"> \n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--tax\" v-html=\"priceDeliveryFormatted\"></span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr> \n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span class=\"catalog-pf-text catalog-pf-text--total catalog-pf-text--border\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_TOTAL_RESULT')}: \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t\t<td class=\"catalog-pf-result-padding\">\n\t\t\t\t\t\t\t<span v-html=\"paymentPriceFormatted\" class=\"catalog-pf-text catalog-pf-text--total\"></span> \n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Vuex} \t\t\t\t\t\t\tfrom 'ui.vue.vuex';\nimport {Loc} \t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} from \"./tile-collection/uninstalled\";\nimport DeliverySelector\t\t\t\t\tfrom \"../delivery-selector\";\nimport ShipmentView\t\t\t\t\t\tfrom \"../shipment-view\";\nimport {StageMixin} \t\t\t\t\tfrom \"./stage-mixin\";\nimport {MixinTemplatesType} \t\t\tfrom \"../templates-type-mixin\";\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\n\nconst DeliveryVuex = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tisCollapsible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tselectedDeliveryServiceName: null,\n\t\t}\n\t},\n\tmixins:[StageMixin, MixinTemplatesType],\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item'\t\t\t\t:\tBlock,\n\t\t\t'delivery-selector-block'\t\t:\tDeliverySelector,\n\t\t\t'shipment-view'\t\t\t\t\t:\tShipmentView,\n\t\t\t'uninstalled-delivery-block'\t:\tTileUnInstalled,\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tstatusClass()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false || this.status === Status.disabled\n\t\t\t\t}\n\t\t\t},\n\t\t\tproductsPrice()\n\t\t\t{\n\t\t\t\treturn this.order.total.result;\n\t\t\t},\n\t\t\tshipmentId()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.shipmentId;\n\t\t\t},\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\ttitleName: this.selectedDeliveryServiceName,\n\t\t\t\t\tinstalled: this.installed,\n\t\t\t\t\tcollapsible: this.isCollapsible,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: false,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfig()\n\t\t\t{\n\t\t\t\tlet deliveryServiceId = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryServiceId')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryServiceId = this.$root.$app.options.shipmentData.deliveryServiceId;\n\t\t\t\t}\n\n\t\t\t\tlet deliveryPrice = null;\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('deliveryPrice')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdeliveryPrice = this.$root.$app.options.shipmentData.deliveryPrice;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('propValues')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsValues = this.$root.$app.options.shipmentData.propValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedServicesValues = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('shipmentData')\n\t\t\t\t\t&& this.$root.$app.options.shipmentData.hasOwnProperty('extraServicesValues')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.shipmentData.extraServicesValues)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedServicesValues = this.$root.$app.options.shipmentData.extraServicesValues;\n\t\t\t\t}\n\n\t\t\t\tlet relatedPropsOptions = {};\n\t\t\t\tif (this.$root.$app.options.hasOwnProperty('deliveryOrderPropOptions')\n\t\t\t\t\t&& !Array.isArray(this.$root.$app.options.deliveryOrderPropOptions)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\trelatedPropsOptions = this.$root.$app.options.deliveryOrderPropOptions;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tpersonTypeId: this.$root.$app.options.personTypeId,\n\t\t\t\t\tbasket: this.order.basket,\n\t\t\t\t\tcurrencySymbol: this.$root.$app.options.currencySymbol,\n\t\t\t\t\tcurrency: this.order.currency,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\tsessionId: this.$root.$app.options.sessionId,\n\t\t\t\t\trelatedPropsValues,\n\t\t\t\t\trelatedPropsOptions,\n\t\t\t\t\trelatedServicesValues,\n\t\t\t\t\tdeliveryServiceId,\n\t\t\t\t\tresponsibleId: this.$root.$app.options.assignedById,\n\t\t\t\t\tdeliveryPrice,\n\t\t\t\t};\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\n\t\t\t...Vuex.mapState({\n\t\t\t\torder: state => state.orderCreation\n\t\t\t})\n\t\t},\n\tmethods:{\n\t\tsetTitleName(state)\n\t\t{\n\t\t\tthis.selectedDeliveryServiceName = state.deliveryServiceName;\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'delivery', option);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DELIVERY_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<template v-if=\"!installed\">\n\t\t\t\t\t\t<uninstalled-delivery-block :tiles=\"tiles\" \n\t\t\t\t\t\t\t\tv-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-select\">\n\t\t\t\t\t\t\t<shipment-view\n\t\t\t\t\t\t\t\tv-if=\"isViewTemplateMode\"\n\t\t\t\t\t\t\t\t:id=\"shipmentId\"\n\t\t\t\t\t\t\t\t:productsPrice=\"productsPrice\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</shipment-view>\n\t\t\t\t\t\t\t<delivery-selector-block v-else\n\t\t\t\t\t\t\t\t:config=\"config\" \n\t\t\t\t\t\t\t\t@delivery-settings-changed=\"onSliderClose\"\n\t\t\t\t\t\t\t\t@change=\"setTitleName\" \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport {\n\tDeliveryVuex\n}","import {Loc} \t\t\t\t\t\t\t\tfrom 'main.core';\nimport {Block} \t\t\tfrom 'salescenter.component.stage-block';\nimport {Uninstalled as TileUnInstalled} \tfrom \"./tile-collection/uninstalled\";\nimport {Installed as TileInstalled} \t\tfrom \"./tile-collection/installed\";\nimport {StageMixin} \t\t\t\t\t\tfrom \"./stage-mixin\";\n\nconst PaySystem = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttiles: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tinstalled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\ttitleItems: {\n\t\t\ttype: Array\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tmixins:[StageMixin],\n\tcomponents:\n\t{\n\t\t'stage-block-item'\t\t\t\t\t:\tBlock,\n\t\t'tile-collection-installed-block'\t:\tTileInstalled,\n\t\t'tile-collection-uninstalled-block'\t:\tTileUnInstalled\n\t},\n\tmethods:\n\t{\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowToConfigDefaultPaySystem(e);\n\t\t},\n\t\tsaveCollapsedOption(option)\n\t\t{\n\t\t\tthis.$emit('on-save-collapsed-option', 'pay_system', option);\n\t\t},\n\n\t},\n\tcomputed:\n\t{\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: this.installed ? this.titleItems : [],\n\t\t\t\tinstalled: this.installed,\n\t\t\t\tcollapsible: true,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: !this.installed,\n\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t}\n\t\t},\n\t\tstatusClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-payment-by-sms-item-disabled-bg': this.installed === false\n\t\t\t}\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_TITLE_MSGVER_1');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"[statusClassMixin, statusClass]\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t@on-tile-slider-close=\"onSliderClose\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template v-slot:block-hint-title>\n\t\t\t\t${Loc.getMessage('SALESCENTER_PAYSYSTEM_BLOCK_SETTINGS_TITLE')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!installed\"\n\t\t\t\t\tclass=\"salescenter-app-explanation\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-img\"></div>\n\t\t\t\t\t<div class=\"salescenter-app-explanation-area\">\n\t\t\t\t\t\t<div class=\"salescenter-app-explanation-text\">\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TERMINAL_PAYMENT_SYSTEM_SETUP_HINT')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<tile-collection-uninstalled-block \t:tiles=\"tiles\" v-if=\"!installed\" v-on:on-tile-slider-close=\"onSliderClose\"/>\n\t\t\t\t\t<tile-collection-installed-block :tiles=\"tiles\" v-on:on-tile-slider-close=\"onSliderClose\" v-else />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tPaySystem\n}\n","export const ContextDictionary = Object.freeze({\n\tdeal: 'deal',\n\tsmartInvoice: 'smart_invoice',\n\tchat: 'chat',\n\tsms: 'sms',\n\timOpenlines: 'imopenlines_app',\n\tterminalList: 'terminal_list',\n});\n","import { Loc } from 'main.core';\n\nconst MessageMixin = {\n\twatch:\n\t\t{\n\t\t\tisCompilationMode(compilationMode): void\n\t\t\t{\n\t\t\t\tif (this.messageSenderEditor)\n\t\t\t\t{\n\t\t\t\t\tconst textModes = this.$root.$app.sendingMethodDesc.text_modes;\n\t\t\t\t\tconst currentMessage = compilationMode ? textModes.compilation : textModes.payment;\n\t\t\t\t\tthis.messageSenderEditor.setMessageText(currentMessage);\n\t\t\t\t\tthis.$store.dispatch('orderCreation/setMessageData', { body: currentMessage });\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tmessageSenderAvailable(): boolean\n\t\t\t{\n\t\t\t\treturn BX.type.isObject(this.messageSenderData);\n\t\t\t},\n\t\t\tmessageSenderId(): string\n\t\t\t{\n\t\t\t\treturn this.messageSenderData.renderTo.replace('#', '');\n\t\t\t},\n\t\t\tisCompilationMode(): boolean\n\t\t\t{\n\t\t\t\treturn this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\t},\n\t\t\tmessageData()\n\t\t\t{\n\t\t\t\treturn this.$store.getters['orderCreation/getMessageData'];\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonMessageBodyChangeHandler(event)\n\t\t\t{\n\t\t\t\tconst body = event.getData().body;\n\t\t\t\tthis.$store.dispatch('orderCreation/setMessageData', { body });\n\t\t\t\tif (this.messageData.senderCode !== 'bitrix24')\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.sendingMethodDesc.text_modes[this.isCompilationMode ? 'compilation' : 'payment'] = body;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetTemplateError(show: boolean): void\n\t\t\t{\n\t\t\t\tif (this.messageSenderEditor)\n\t\t\t\t{\n\t\t\t\t\tif (show)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!this.templateError)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.templateError = true;\n\t\t\t\t\t\t\tthis.messageSenderEditor.setError(\n\t\t\t\t\t\t\t\tLoc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_ERROR'),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.templateError)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.templateError = false;\n\t\t\t\t\t\tthis.messageSenderEditor.resetAlert();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t},\n};\n\nexport {\n\tMessageMixin,\n};\n","import { Loc } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { UserAvatar, MessageEditor } from 'salescenter.component.stage-block.sms-message';\nimport { ContextDictionary } from '../../const/context-dictionary';\nimport { StageMixin } from './stage-mixin';\nimport {MessageMixin} from \"./message-mixin\";\nimport { Editor } from 'crm.messagesender.editor';\n\nconst ChatMessage = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageSenderData: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tmixins: [StageMixin, MessageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'chat-user-avatar-block': UserAvatar,\n\t\t'chat-message-editor-block': MessageEditor,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t\tmessageSenderEditor: null,\n\t\t\ttemplateError: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t};\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate;\n\t\t},\n\t\tisMessageReadOnly()\n\t\t{\n\t\t\treturn this.$root.$app.context !== ContextDictionary.sms;\n\t\t},\n\t},\n\twatch: {\n\t\tmessageData(newMessageData): void\n\t\t{\n\t\t\tif (!this.messageSenderEditor)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setTemplateError(!newMessageData.body || !newMessageData.body.includes('#LINK#'));\n\n\t\t\tthis.$store.commit(\n\t\t\t\t'orderCreation/setIsSenderSelected',\n\t\t\t\t!this.templateError,\n\t\t\t);\n\t\t},\n\t},\n\tmounted() {\n\t\tif (this.messageSenderAvailable)\n\t\t{\n\t\t\tthis.initMessageSenderEditor();\n\t\t}\n\t},\n\tmethods: {\n\t\tinitMessageSenderEditor()\n\t\t{\n\t\t\tthis.messageSenderEditor = new Editor(this.messageSenderData);\n\t\t\tthis.messageSenderEditor.render().then(() => this.initMessageData()).catch(() => {});\n\t\t\tthis.messageSenderEditor.subscribe('onMessageBodyChange', this.onMessageBodyChangeHandler.bind(this));\n\t\t},\n\t\tinitMessageData()\n\t\t{\n\t\t\tconst state = this.messageSenderEditor.getState();\n\t\t\tconst messageData = {\n\t\t\t\tbody: state.message?.body,\n\t\t\t};\n\t\t\tthis.$store.dispatch('orderCreation/setMessageData', messageData);\n\t\t},\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_SHORTER_VERSION')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<div v-if=\"messageSenderAvailable && !isMessageReadOnly\">\n\t\t\t\t\t\t<div :id=\"messageSenderId\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<chat-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<chat-message-editor-block :editor=\"editor\" :isReadOnly=\"isMessageReadOnly\" :selectedMode=\"selectedMode\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tChatMessage\n};\n","import { Loc } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageList } from 'salescenter.component.stage-block.automation';\nimport * as AutomationStage from 'salescenter.automation-stage';\nimport { StageMixin } from './stage-mixin';\nimport { MixinTemplatesType } from '../templates-type-mixin';\n\nconst Automation = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tstageOnOrderPaid: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tstageOnDeliveryFinished: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialCollapseState: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tisDeliveryStageVisible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tmixins: [StageMixin, MixinTemplatesType],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tpaymentStages: [],\n\t\t\tshipmentStages: [],\n\t\t};\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item':\tBlock,\n\t\t\t'stage-item-list':\tStageList,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tsaveCollapsedOption(option)\n\t\t\t{\n\t\t\t\tthis.$emit('on-save-collapsed-option', 'automation', option);\n\t\t\t},\n\n\t\t\tupdatePaymentStage(e)\n\t\t\t{\n\t\t\t\tconst newStageId = e.data;\n\t\t\t\tthis.paymentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnOrderPaid = e.data;\n\t\t\t},\n\n\t\t\tupdateShipmentStage(e)\n\t\t\t{\n\t\t\t\tconst newStageId = e.data;\n\t\t\t\tthis.shipmentStages.forEach((stage) => {\n\t\t\t\t\tstage.selected = stage.id === newStageId;\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$app.stageOnDeliveryFinished = e.data;\n\t\t\t},\n\t\t\tinitStages(stages, currentValue)\n\t\t\t{\n\t\t\t\tObject.values(this.items).forEach((options) => {\n\t\t\t\t\toptions.selected = (\n\t\t\t\t\t\t(!currentValue && !options.hasOwnProperty('id'))\n\t\t\t\t\t\t|| (options.id === currentValue)\n\t\t\t\t\t);\n\t\t\t\t\tstages.push(AutomationStage.Factory.create(options));\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tcollapsible: true,\n\t\t\t\t\tinitialCollapseState: this.initialCollapseState,\n\t\t\t\t\ttitleName: this.selectedStage.name,\n\t\t\t\t};\n\t\t\t},\n\t\t\tselectedStage()\n\t\t\t{\n\t\t\t\tconst stages = this.isPayment ? this.paymentStages : this.shipmentStages;\n\n\t\t\t\treturn stages.find((stage) => {\n\t\t\t\t\treturn stage.selected;\n\t\t\t\t});\n\t\t\t},\n\t\t\tisPayment()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.$root.$app.options.mode === 'payment_delivery'\n\t\t\t\t\t|| this.$root.$app.options.mode === 'payment'\n\t\t\t\t\t|| this.$root.$app.options.mode === 'terminal_payment'\n\t\t\t\t);\n\t\t\t},\n\t\t\tisHideDeliveryStage()\n\t\t\t{\n\t\t\t\treturn !this.isDeliveryStageVisible;\n\t\t\t},\n\t\t},\n\tcreated()\n\t{\n\t\tif (this.isPayment)\n\t\t{\n\t\t\tthis.initStages(this.paymentStages, this.stageOnOrderPaid);\n\t\t}\n\n\t\tthis.initStages(this.shipmentStages, this.stageOnDeliveryFinished);\n\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t@on-adjust-collapsed=\"saveCollapsedOption\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div v-if=\"isPayment\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updatePaymentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"paymentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_BLOCK_TEXT')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-if=\"!isHideDeliveryStage\">\n\t\t\t\t\t\t<stage-item-list\n\t\t\t\t\t\t\tv-on:on-choose-select-option=\"updateShipmentStage($event)\"\n\t\t\t\t\t\t\t:stages=\"shipmentStages\"\n\t\t\t\t\t\t\t:editable=\"editable\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:stage-list-text>${Loc.getMessage('SALESCENTER_AUTOMATION_DELIVERY_FINISHED')}</template>\n\t\t\t\t\t\t</stage-item-list>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\nexport {\n\tAutomation,\n};\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tshowWhatClientSeesControl: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tisFacebookForm: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t\tshowSubmitCompilationLinkToFacebookButton()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\treturn this.isFacebookForm && isCompilationMode;\n\t\t},\n\t},\n\tmethods: {\n\t\tshowWhatClientSees(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openWhatClientSee(event);\n\t\t},\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t\tsubmitCompilationLinkToFacebook(event)\n\t\t{\n\t\t\tthis.$emit('on-submit-compilation-link-to-facebook', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{buttonLabel}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showSubmitCompilationLinkToFacebookButton\"\n\t\t\t\t\t\t\t\t@click=\"submitCompilationLinkToFacebook($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_COMPILATION_LINK_TO_FACEBOOK')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"showWhatClientSeesControl\"\n\t\t\t\t\t\t\t\t@click=\"showWhatClientSees\"\n\t\t\t\t\t\t\t\tclass=\"salescenter-app-add-item-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_TEMPLATE_WHAT_DOES_CLIENT_SEE')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {\n\tTimeLineItemBlock as Item,\n\tTimeLineItemPaymentBlock as PaymentItem,\n\tTimeLineItemCustomBlock as CustomItem,\n} from 'salescenter.component.stage-block.timeline';\nimport { Payment, Custom } from 'salescenter.timeline';\n\nconst TimeLine = {\n\tprops: {\n\t\ttimelineItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\t'timeline-item-block': Item,\n\t\t'timeline-item-payment-block': PaymentItem,\n\t\t'timeline-item-custom-block': CustomItem,\n\t},\n\tmethods: {\n\t\tisPayment(item)\n\t\t{\n\t\t\treturn item.type === Payment.type();\n\t\t},\n\t\tisCustom(item)\n\t\t{\n\t\t\treturn item.type === Custom.type();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-payment-by-sms-timeline\">\n\t\t\t<template v-for=\"(item) in timelineItems\">\n\t\t\t\t<timeline-item-payment-block :item=\"item\" v-if=\"isPayment(item)\"/>\n\t\t\t\t<timeline-item-custom-block :item=\"item\" v-else-if=\"isCustom(item)\"/>\n\t\t\t\t<timeline-item-block :item=\"item\" v-else/>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n\nexport {\n\tTimeLine,\n};\n","import {Loc, Uri} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {MenuManager} from \"main.popup\";\nimport {Manager} from 'salescenter.manager';\nimport {Block} from 'salescenter.component.stage-block';\nimport {StageMixin} from \"./stage-mixin\";\nimport \"ui.icons.disk\";\nimport type {Document, Template} from \"../../app\";\nimport {Vuex} from \"ui.vue.vuex\";\n\nconst DocumentSelector = {\n\tprops: {\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttemplateAddUrl: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t},\n\tcomputed: {\n\t\tstatus()\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.model\n\t\t\t\t&& (\n\t\t\t\t\tthis.model.templates\n\t\t\t\t\t&& this.model.templates.length\n\t\t\t\t)\n\t\t\t\t|| (\n\t\t\t\t\tthis.model.documents\n\t\t\t\t\t&& this.model.documents.length\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.complete;\n\t\t\t}\n\n\t\t\tif(\n\t\t\t\tthis.templateAddUrl\n\t\t\t\t&& this.templateAddUrl.length\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Status.current;\n\t\t\t}\n\n\t\t\treturn Status.disabled;\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: [],\n\t\t\t\tinstalled: true,\n\t\t\t\tcollapsible: false,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: false,\n\t\t\t\tinitialCollapseState: false,\n\t\t\t}\n\t\t},\n\t\tgetDocumentTitle(): ?string\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\treturn currentDocument.title;\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE');\n\t\t},\n\t\twithStamps(): string\n\t\t{\n\t\t\tlet isWithStamps = '';\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument)\n\t\t\t{\n\t\t\t\tif(currentDocument.isWithStamps)\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITH_SIGNS');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tisWithStamps = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_WITHOUT_SIGNS');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn isWithStamps;\n\t\t},\n\t\thasData()\n\t\t{\n\t\t\tconst document = this.getCurrentDocument();\n\n\t\t\treturn (document && document.detailUrl);\n\t\t},\n\t\t...Vuex.mapState({\n\t\t\tmodel: state => state.documentSelector,\n\t\t})\n\t},\n\tmethods: {\n\t\thandleDocumentClick({target})\n\t\t{\n\t\t\tif (this.getCurrentDocument() !== null)\n\t\t\t{\n\t\t\t\tthis.openSelectorMenu(target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.openTemplatesList();\n\t\t\t}\n\t\t},\n\t\topenSelectorMenu(bindElement)\n\t\t{\n\t\t\tMenuManager.show({\n\t\t\t\tid: 'payment-document-selector',\n\t\t\t\tbindElement,\n\t\t\t\titems: this.prepareSelectorMenuItems(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcacheable: false,\n\t\t\t});\n\t\t},\n\t\tcloseSelectorMenu()\n\t\t{\n\t\t\tMenuManager.destroy('payment-document-selector');\n\t\t},\n\t\tprepareSelectorMenuItems()\n\t\t{\n\t\t\tconst items = [];\n\t\t\tif (this.model.documents)\n\t\t\t{\n\t\t\t\tfor (const document of this.model.documents)\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\ttext: document.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst templateListItem = {\n\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_DOCUMENT'),\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tif (this.model.templates)\n\t\t\t{\n\t\t\t\tif (items.length > 0)\n\t\t\t\t{\n\t\t\t\t\titems.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\tfor (const template of this.model.templates)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\t\ttext: template.title,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: template.id});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.templateAddUrl)\n\t\t\t{\n\t\t\t\tif (templateListItem.items.length > 0)\n\t\t\t\t{\n\t\t\t\t\ttemplateListItem.items.push({delimiter: true});\n\t\t\t\t}\n\t\t\t\ttemplateListItem.items.push({\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_CREATE_NEW_TEMPLATE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.closeSelectorMenu();\n\t\t\t\t\t\tthis.openTemplatesList();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (templateListItem.items.length > 0)\n\t\t\t{\n\t\t\t\titems.push(templateListItem);\n\t\t\t}\n\n\t\t\treturn items;\n\t\t},\n\t\topenTemplatesList()\n\t\t{\n\t\t\tManager.openSlider(this.templateAddUrl, {\n\t\t\t\twidth: 930,\n\t\t\t}).then(() => {\n\t\t\t\tthis.$store.dispatch('documentSelector/loadTemplates');\n\t\t\t});\n\t\t},\n\t\thandleEditDocumentClick()\n\t\t{\n\t\t\tconst currentDocument = this.getCurrentDocument();\n\t\t\tif (currentDocument.detailUrl)\n\t\t\t{\n\t\t\t\tManager.openSlider(currentDocument.detailUrl, {\n\t\t\t\t\twidth: 980,\n\t\t\t\t}).then((slider) => {\n\t\t\t\t\tconst document = slider.getData().get('document');\n\t\t\t\t\tif (document)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.dispatch('documentSelector/addDocument', {document});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tgetCurrentDocument(): ?Document\n\t\t{\n\t\t\tlet document = null;\n\t\t\tif (this.model.boundDocumentId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getDocumentById(this.model.boundDocumentId);\n\t\t\t}\n\t\t\tif (!document && this.model.selectedTemplateId > 0)\n\t\t\t{\n\t\t\t\tdocument = this.getStubDocumentByTemplate(this.model.selectedTemplateId);\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst documents = this.model.documents;\n\t\t\t\tif (documents && documents[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = documents[0];\n\t\t\t\t\tthis.$store.dispatch('documentSelector/setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!document)\n\t\t\t{\n\t\t\t\tconst templates = this.model.templates;\n\t\t\t\tif (templates && templates[0])\n\t\t\t\t{\n\t\t\t\t\tdocument = this.getStubDocumentByTemplate(templates[0].id);\n\t\t\t\t\tthis.$store.commit('documentSelector/setSelectedTemplateId', {selectedTemplateId: templates[0].id});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn document;\n\t\t},\n\t\tgetDocumentById(id: number): ?Document\n\t\t{\n\t\t\tfor (const document: Document of this.model.documents)\n\t\t\t{\n\t\t\t\tif (document.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn document;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetTemplateById(id: number): ?Template\n\t\t{\n\t\t\tfor (const template: Template of this.model.templates)\n\t\t\t{\n\t\t\t\tif (template.id === id)\n\t\t\t\t{\n\t\t\t\t\treturn template;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tgetStubDocumentByTemplate(templateId: number): ?Document\n\t\t{\n\t\t\tconst template = this.getTemplateById(templateId);\n\t\t\tif (!template)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst paymentId = this.$root.$app.options.paymentId || 0;\n\t\t\tlet title = null;\n\t\t\tlet detailUrl = null;\n\t\t\tif (paymentId > 0)\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_NEW_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = Uri.addParam(template.documentCreationUrl, {\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\t_paymentId: paymentId,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttitle = Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_DOCUMENT_CREATED_LATER_SUFFIX', {\n\t\t\t\t\t'#TITLE#': template.title\n\t\t\t\t});\n\t\t\t\tdetailUrl = null;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tid: 0,\n\t\t\t\ttitle,\n\t\t\t\tdetailUrl,\n\t\t\t\tisWithStamps: template.isWithStamps,\n\t\t\t}\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t:config=\"configForBlock\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>${Loc.getMessage('SALESCENTER_DOCUMENT_SELECTOR_BLOCK_TITLE')}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-selector-file\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-lg ui-icon-file-pdf\"><i></i></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tref=\"selectorNode\"\n\t\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-title-button\"\n\t\t\t\t\t\t\t\t\t@click=\"handleDocumentClick\"\n\t\t\t\t\t\t\t\t>{{getDocumentTitle}}</div>\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-item-container-document-selector-title-sign\">{{withStamps}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"hasData\"\n\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"salescenter-app-payment-item-container-document-selector-edit-button\"\n\t\t\t\t\t\t\t\t@click=\"handleEditDocumentClick\"\n\t\t\t\t\t\t\t>\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M11.4359 0.03479L13.9865 2.61221L4.00879 12.563L1.45822 9.98561L11.4359 0.03479ZM0.0256074 13.6726C0.00148857 13.7639 0.0273302 13.8603 0.0927957 13.9275C0.159984 13.9947 0.25646 14.0205 0.347767 13.9947L3.19896 13.2265L0.793965 10.8223L0.0256074 13.6726Z\" fill=\"#525C69\"/>\n                              </svg>\n                              ${Loc.getMessage('SALESCENTER_RIGHT_ACTION_EDIT')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\n\nexport\n{\n\tDocumentSelector\n}","import { ajax as Ajax, Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as Tile from 'salescenter.tile';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {ChatMessage} from '../stage-blocks/chat-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'chat-message-block': ChatMessage,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'cashbox-block': Cashbox,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'automation-block': Automation,\n\t\t'send-block': Send,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tdata()\n\t{\n\t\tconst stages = {\n\t\t\tmessage: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\ttitleTemplate: Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_SENDER_MSGVER_1'),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t\tmessageSenderData: this.$root.$app.options.messageSenderData,\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_MSGVER_1'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed\n\t\t\t\t\t? this.$root.$app.options.isPaySystemCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.hasOwnProperty('deliveryList'))\n\t\t{\n\t\t\tstages.delivery = {\n\t\t\t\tisHidden: (\n\t\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t\t),\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed\n\t\t\t\t\t? this.$root.$app.options.isDeliveryCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed\n\t\t\t\t\t? this.$root.$app.options.isCashboxCollapsed === 'Y'\n\t\t\t\t\t: this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed\n\t\t\t\t\t? this.$root.$app.options.isAutomationCollapsed === 'Y'\n\t\t\t\t\t: false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector') && this.$root.$app.documentSelector.templateAddUrl)\n\t\t{\n\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t}\n\n\t\treturn {\n\t\t\tstages,\n\t\t};\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType,\n\t],\n\tcomputed: {\n\t\tisSendAllowed()\n\t\t{\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable && !this.$root.$app?.compilation\n\t\t\t\t? Loc.getMessage('SALESCENTER_SEND')\n\t\t\t\t: Loc.getMessage('SALESCENTER_RESEND')\n\t\t\t;\n\t\t},\n\t\tisFacebookForm()\n\t\t{\n\t\t\treturn this.$root.$app?.connector === 'facebook' && this.$root.$app?.isAllowedFacebookRegion;\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tconst list = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\tlist.push(TimeLineItem.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tconst tiles = [];\n\n\t\t\tObject.values(items).forEach((options) => {\n\t\t\t\ttiles.push(Tile.Factory.create(options))\n\t\t\t});\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tconst result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif (type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if (type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if (type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event);\n\t\t},\n\t\tonSendCompilationLinkToFacebook(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send-compilation-link-to-facebook', event);\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tonProductFormModeChange()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\tif (isCompilationMode)\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'compilation';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.stages.delivery)\n\t\t\t\t{\n\t\t\t\t\tthis.stages.delivery.status = this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t\t? Status.complete\n\t\t\t\t\t\t: Status.disabled;\n\t\t\t\t}\n\n\t\t\t\tthis.stages.message.selectedMode = 'payment';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t}\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t/>\n\t\t\t<chat-message-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.message.status\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t\t:messageSenderData=\"stages.message.messageSenderData\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"stages.delivery && !stages.delivery.isHidden\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t:isDeliveryStageVisible=\"stages.delivery && stages.delivery.installed\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t@on-submit-compilation-link-to-facebook=\"onSendCompilationLinkToFacebook\"\n\t\t\t\t:buttonEnabled=\"isSendAllowed\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t\t:isFacebookForm=\"isFacebookForm\"\n\t\t\t\t:showWhatClientSeesControl=\"false\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","export default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisFaded: false,\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tthis.createPinner();\n\t},\n\tcreated()\n\t{\n\t\tthis.$root.$on('on-start-progress', () => {\n\t\t\tthis.startFade();\n\t\t});\n\n\t\tthis.$root.$on('on-stop-progress', () => {\n\t\t\tthis.endFade();\n\t\t});\n\t},\n\tmethods: {\n\t\tstartFade()\n\t\t{\n\t\t\tthis.isFaded = true;\n\t\t},\n\t\tendFade()\n\t\t{\n\t\t\tthis.isFaded = false;\n\t\t},\n\t\tcreatePinner()\n\t\t{\n\t\t\tlet buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\tthis.$root.$el.parentNode.appendChild(buttonsPanel);\n\t\t\t\tnew BX.UI.Pinner(\n\t\t\t\t\tbuttonsPanel,\n\t\t\t\t\t{\n\t\t\t\t\t\tfixBottom: this.$root.$app.isFrame,\n\t\t\t\t\t\tfullWidth: this.$root.$app.isFrame,\n\t\t\t\t\t\tanchorBottom: '.salescenter-app-pinner-anchor',\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$root.$app.closeApplication();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPublicUrlAvailable()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlAvailable;\n\t\t},\n\t\tcompilation()\n\t\t{\n\t\t\treturn this.$root.$app.compilation;\n\t\t},\n\t\twrapperClass()\n\t\t{\n\t\t\treturn {'salescenter-app-wrapper-fade': this.isFaded};\n\t\t},\n\t\twrapperStyle()\n\t\t{\n\t\t\tconst position = BX.pos(this.$root.$el);\n\n\t\t\tlet offset = position.top + 20;\n\t\t\tif(this.$root.$nodes.footer)\n\t\t\t{\n\t\t\t\toffset += BX.pos(this.$root.$nodes.footer).height;\n\t\t\t}\n\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tif(buttonsPanel)\n\t\t\t{\n\t\t\t\toffset += BX.pos(buttonsPanel).height;\n\t\t\t}\n\n\t\t\t//?auto\n\t\t\treturn {'minHeight': 'calc(100vh - ' + offset + 'px)'};\n\t\t},\n\t}\n}\n","import {Loc} from 'main.core';\nimport {Manager} from 'salescenter.manager';\nimport { EventEmitter } from 'main.core.events';\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t};\n\t},\n\tmethods: {\n\t\tconnect()\n\t\t{\n\t\t\tconst loader = new BX.Loader({size: 200});\n\t\t\tloader.show(document.body);\n\n\t\t\tBX.Salescenter.Manager.connect({\n\t\t\t\tno_redirect: 'Y',\n\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t}).then(() =>\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.loadConfig().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tloader.hide();\n\n\t\t\t\t\tif(result.isSiteExists)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.isSiteExists = result.isSiteExists;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlExists = true;\n\t\t\t\t\t\tthis.$root.$app.orderPublicUrl = result.orderPublicUrl;\n\t\t\t\t\t\tthis.$root.$app.isOrderPublicUrlAvailable = result.isOrderPublicUrlAvailable;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$emit('on-successfully-connected');\n\t\t\t\t});\n\t\t\t}).catch(function()\n\t\t\t{\n\t\t\t\tloader.hide();\n\t\t\t});\n\t\t},\n\t\tcheckRecycle()\n\t\t{\n\t\t\tManager.openConnectedSite(true);\n\t\t},\n\t\tpublishConnectedSite()\n\t\t{\n\t\t\tthis.$root.$app.publishShop();\n\t\t},\n\t\tconfirmPhoneNumber()\n\t\t{\n\t\t\tEventEmitter.subscribeOnce('BX.Salescenter.App::onPhoneConfirmed', () => this.$root.$app.publishShop());\n\n\t\t\tthis.$root.$app.confirmPhoneNumber();\n\t\t},\n\t},\n\tcomputed: {\n\t\tisOrderPageDeleted()\n\t\t{\n\t\t\treturn (this.$root.$app.isSiteExists && !this.isOrderPublicUrlExists);\n\t\t},\n\t\tisOrderPublicUrlExists()\n\t\t{\n\t\t\treturn this.$root.$app.isOrderPublicUrlExists;\n\t\t},\n\t\tisPhoneConfirmed()\n\t\t{\n\t\t\treturn this.$root.$app.isPhoneConfirmed;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"salescenter-app-page-content salescenter-app-start-wrapper\">\n\t\t\t<div class=\"ui-title-1 ui-text-center ui-color-medium\" style=\"margin-bottom: 20px;\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_TOP_2_MSGVER_1')}\n\t\t\t</div>\n\t\t\t<div class=\"ui-hr ui-mv-25\"></div>\n\t\t\t<template v-if=\"isOrderPublicUrlExists && !isPhoneConfirmed\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_PHONE_CONFIRMATION_INFO_TEXT_BOTTOM_PUBLIC')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"confirmPhoneNumber\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PHONE_CONFIRMATION_INFO_CONFIRM')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"isOrderPublicUrlExists\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_PUBLIC')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div class=\"ui-btn ui-btn-primary ui-btn-lg\" @click=\"publishConnectedSite\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_PUBLIC')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"isOrderPageDeleted\">\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_ORDER_PAGE_DELETED')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"checkRecycle\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CHECK_RECYCLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"salescenter-title-5 ui-title-5 ui-text-center ui-color-medium\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_TEXT_BOTTOM_2')}\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"connect\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-primary ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_INFO_CREATE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"padding-top: 5px;\" class=\"ui-text-center\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"BX.Salescenter.Manager.openHowPayDealWorks(event)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link ui-btn-lg\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_HOW')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n}\n","import {Loc} from 'main.core';\nimport {Manager} from \"salescenter.manager\";\n\nexport default {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisVisible: true,\n\t\t};\n\t},\n\tmethods: {\n\t\thide()\n\t\t{\n\t\t\tthis.isVisible = false;\n\t\t\tthis.$emit('on-hide');\n\t\t},\n\t\topenControlPanel()\n\t\t{\n\t\t\tManager.openControlPanel();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isVisible\" class=\"salescenter-app-banner\" >\n\t\t\t<div class=\"salescenter-app-banner-inner\">\n\t\t\t\t<div class=\"salescenter-app-banner-title\">\n\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-banner-content\">\n\t\t\t\t\t<div class=\"salescenter-app-banner-text\">\n\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-app-banner-btn-block\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"openControlPanel\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary salescenter-app-banner-btn-connect\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_CONFIGURE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-link salescenter-app-banner-btn-hide\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_BANNER_BTN_HIDE')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t@click=\"hide\"\n\t\t\t\t\tclass=\"salescenter-app-banner-close\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import {Vue} from 'ui.vue';\nimport {Vuex} from 'ui.vue.vuex';\nimport {Manager} from 'salescenter.manager';\nimport {Loader} from 'main.loader';\nimport {Loc, Type, Uri} from 'main.core';\nimport {MixinTemplatesType} from './components/templates-type-mixin';\nimport StageBlocksList from './components/chat-receiving-payment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport { ModeDictionary } from './const/mode-dictionary';\nimport Product from './product';\nimport Start from './start';\nimport NoPaymentSystemsBanner from './no-payment-systems';\nimport 'popup';\nimport 'ui.buttons';\nimport 'ui.buttons.icons';\nimport 'ui.forms';\nimport 'ui.fonts.opensans';\nimport 'ui.pinner';\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisShowPreview: false,\n\t\t\tisShowPayment: false,\n\t\t\tpageTitle: '',\n\t\t\tcurrentPageId: null,\n\t\t\tactions: [],\n\t\t\tframeCheckShortTimeout: false,\n\t\t\tframeCheckLongTimeout: false,\n\t\t\tisPagesOpen: false,\n\t\t\tisFormsOpen: false,\n\t\t\tshowedPageIds: [],\n\t\t\tloadedPageIds: [],\n\t\t\terrorPageIds: [],\n\t\t\tlastAddedPages: [],\n\t\t\tordersCount: null,\n\t\t\tpaymentsCount: null,\n\t\t\teditedPageId: null,\n\t\t\tcurrentPageTitle: null,\n\t\t\tModeDictionary,\n\t\t};\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'product': Product,\n\t\t\t'start': Start,\n\t\t\t'no-payment-systems-banner': NoPaymentSystemsBanner,\n\t\t\t'chat-receiving-payment': StageBlocksList,\n\t\t},\n\tupdated()\n\t{\n\t\tthis.renderErrors();\n\t},\n\tmounted()\n\t{\n\t\tthis.createLoader();\n\t\tthis.$root.$app.fillPages().then(() =>\n\t\t{\n\t\t\tif (this.$root.$app.isWithOrdersMode)\n\t\t\t{\n\t\t\t\tthis.refreshOrdersCount();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t}\n\n\t\t\tthis.openFirstPage();\n\t\t});\n\n\t\tif(this.$root.$app.isPaymentsLimitReached)\n\t\t{\n\t\t\tlet paymentsLimitStartNode = this.$root.$nodes.paymentsLimit;\n\t\t\tlet paymentsLimitNode = this.$refs['paymentsLimit'];\n\t\t\tfor (let node of paymentsLimitStartNode.children)\n\t\t\t{\n\t\t\t\tpaymentsLimitNode.appendChild(node);\n\t\t\t}\n\t\t}\n\t},\n\tmethods:\n\t\t{\n\t\t\tgetActions()\n\t\t\t{\n\t\t\t\tlet actions = [];\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tactions = [\n\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_COPY_URL, onclick: this.copyUrl},\n\t\t\t\t\t];\n\t\t\t\t\tif(this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_HIDE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tactions = [\n\t\t\t\t\t\t\t...actions,\n\t\t\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_DELETE, onclick: this.hidePage},\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn [\n\t\t\t\t\t...actions,\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD, items: this.getAddPageActions()},\n\t\t\t\t];\n\t\t\t},\n\t\t\tgetAddPageActions(isWebform = false)\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_SITE_B24, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addSite(isWebform);\n\t\t\t\t\t\t}},\n\t\t\t\t\t{text: this.localize.SALESCENTER_RIGHT_ACTION_ADD_CUSTOM, onclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showAddUrlPopup({\n\t\t\t\t\t\t\t\tisWebform: isWebform === true ? 'Y' : null\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}},\n\t\t\t\t];\n\t\t\t},\n\t\t\topenFirstPage()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tif (this.$root.$app.isPaymentCreationAvailable)\n\t\t\t\t{\n\t\t\t\t\tthis.showPaymentForm();\n\t\t\t\t}\n\t\t\t\telse if(this.pages && this.pages.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet firstWebformPage = false;\n\t\t\t\t\tlet pageToOpen = false;\n\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!pageToOpen)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!page.isWebform)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageToOpen = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfirstWebformPage = page;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(!pageToOpen && firstWebformPage)\n\t\t\t\t\t{\n\t\t\t\t\t\tpageToOpen = firstWebformPage;\n\t\t\t\t\t}\n\t\t\t\t\tif(this.currentPageId !== pageToOpen.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onPageClick(pageToOpen);\n\t\t\t\t\t\tif(pageToOpen.isWebform)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isFormsOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isPagesOpen = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.currentPageId = this.pages[0].id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.pageTitle = null;\n\t\t\t\t\tthis.currentPageId = null;\n\t\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonPageClick(page)\n\t\t\t{\n\t\t\t\tthis.pageTitle = page.name;\n\t\t\t\tthis.currentPageId = page.id;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tthis.isShowPayment = false;\n\t\t\t\tthis.isShowPreview = true;\n\t\t\t\tthis.setPageTitle(this.pageTitle);\n\t\t\t\tif(page.isFrameDenied !== true)\n\t\t\t\t{\n\t\t\t\t\tif(!this.showedPageIds.includes(page.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.startFrameCheckTimeout();\n\t\t\t\t\t\tthis.showedPageIds.push(page.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowActionsPopup({target})\n\t\t\t{\n\t\t\t\tBX.PopupMenu.show('salescenter-app-actions', target, this.getActions(), {\n\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCompanyContacts({target})\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t\t},\n\t\t\tshowAddPageActionPopup({target}, isWebform = false)\n\t\t\t{\n\t\t\t\tlet menuId = 'salescenter-app-add-page-actions';\n\t\t\t\tif(isWebform)\n\t\t\t\t{\n\t\t\t\t\tmenuId += '-forms';\n\t\t\t\t}\n\t\t\t\tBX.PopupMenu.show(menuId, target, this.getAddPageActions(isWebform), {\n\t\t\t\t\toffsetLeft: target.offsetWidth + 20,\n\t\t\t\t\toffsetTop: -target.offsetHeight - 15,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tangle: {\n\t\t\t\t\t\tposition: 'left',\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thideActionsPopup()\n\t\t\t{\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-actions');\n\t\t\t\tBX.PopupMenu.destroy('salescenter-app-add-page-actions');\n\t\t\t},\n\t\t\taddSite(isWebform = false)\n\t\t\t{\n\t\t\t\tManager.addSitePage(isWebform).then((result) =>\n\t\t\t\t{\n\t\t\t\t\tlet newPage = result.answer.result.page || false;\n\t\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onPageClick(newPage);\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(newPage.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tcopyUrl(event)\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.url)\n\t\t\t\t{\n\t\t\t\t\tManager.copyUrl(this.currentPage.url, event);\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\teditPage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage.landingId && this.currentPage.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tManager.editLandingPage(this.currentPage.landingId, this.currentPage.siteId);\n\t\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAddUrlPopup(this.currentPage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\thidePage()\n\t\t\t{\n\t\t\t\tif(this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.hidePage(this.currentPage).then(() => {\n\t\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t\t});\n\t\t\t\t\tthis.hideActionsPopup();\n\t\t\t\t}\n\t\t\t},\n\t\t\thideNoPaymentSystemsBanner()\n\t\t\t{\n\t\t\t\tthis.$root.$app.hideNoPaymentSystemsBanner();\n\t\t\t},\n\t\t\tshowAddUrlPopup(newPage)\n\t\t\t{\n\t\t\t\tif(!Type.isPlainObject(newPage))\n\t\t\t\t{\n\t\t\t\t\tnewPage = {};\n\t\t\t\t}\n\t\t\t\tManager.addCustomPage(newPage).then((pageId) =>\n\t\t\t\t{\n\t\t\t\t\tif(!this.isShowPreview)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isShowPreview = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\tif(pageId && (!Type.isPlainObject(newPage) || !newPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.lastAddedPages.push(parseInt(pageId));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!pageId && newPage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpageId = newPage.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(pageId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(parseInt(page.id) === parseInt(pageId))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.onPageClick(page);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!this.isShowPayment)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.isShowPreview = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\tgetPaymentItemTitle(): ?string\n\t\t\t{\n\t\t\t\tif(!this.isOrderPublicUrlAvailable)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (this.$root.$app.options.mode === 'payment')\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_ADD_2_MSGVER_1;\n\t\t\t\t}\n\n\t\t\t\treturn this.localize.SALESCENTER_LEFT_PAYMENT_AND_DELIVERY_MSGVER_1;\n\t\t\t},\n\t\t\tshowPaymentForm()\n\t\t\t{\n\t\t\t\tthis.isShowPayment = true;\n\t\t\t\tthis.isShowPreview = false;\n\n\t\t\t\tif (this.compilation)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet title = this.getPaymentItemTitle() || this.localize.SALESCENTER_DEFAULT_TITLE;\n\n\t\t\t\tthis.setPageTitle(title);\n\t\t\t},\n\t\t\tshowOrdersList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowPaymentsList()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showPaymentsList({\n\t\t\t\t\tcontext: this.$root.$app.context,\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshPaymentsCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowOrderAdd()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.showOrderAdd({\n\t\t\t\t\townerId: this.$root.$app.ownerId,\n\t\t\t\t\townerTypeId: this.$root.$app.ownerTypeId,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.refreshOrdersCount();\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowCatalog()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openSlider(`/saleshub/catalog/?sessionId=${this.$root.$app.sessionId}`);\n\t\t\t},\n\t\t\tonFormsClick()\n\t\t\t{\n\t\t\t\tthis.isFormsOpen = !this.isFormsOpen;\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenControlPanel()\n\t\t\t{\n\t\t\t\tManager.openControlPanel();\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t},\n\t\t\topenHelpDesk()\n\t\t\t{\n\t\t\t\tthis.hideActionsPopup();\n\t\t\t\tManager.openHowItWorks();\n\t\t\t},\n\t\t\tisPageSelected(page)\n\t\t\t{\n\t\t\t\treturn (this.currentPage && this.isShowPreview && this.currentPage.id === page.id);\n\t\t\t},\n\t\t\tsendCompilationLinkToFacebook(event)\n\t\t\t{\n\t\t\t\tthis.send(event, 'n',true)\n\t\t\t},\n\t\t\tsend(event, skipPublicMessage = 'n', sendCompilationLinkToFacebook = false)\n\t\t\t{\n\t\t\t\tif(!this.isAllowedSubmitButton)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.isShowPayment && !this.isShowStartInfo)\n\t\t\t\t{\n\t\t\t\t\tif (this.$store.getters['orderCreation/isCompilationMode'])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.sendCompilation(event.target, sendCompilationLinkToFacebook);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.sendPayment(event.target, skipPublicMessage);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(this.currentPage && this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$app.sendPage(this.currentPage.id);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetPageTitle(title = null)\n\t\t\t{\n\t\t\t\tif(!title)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.$root.$nodes.title)\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$nodes.title.innerText = title;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonFrameError()\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(this.currentPage.id))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(this.currentPage.id);\n\t\t\t\t}\n\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t},\n\t\t\tonFrameLoad(pageId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tif(this.showedPageIds.includes(pageId))\n\t\t\t\t{\n\t\t\t\t\tthis.loadedPageIds.push(pageId);\n\t\t\t\t\tif(this.currentPage && this.currentPage.id === pageId)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(this.frameCheckShortTimeout && !this.currentPage.landingId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onFrameError();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.errorPageIds = this.errorPageIds.filter((pageId) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn pageId !== this.currentPage.id;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(this.frameCheckShortTimeout && this.currentPage && this.currentPage.id === pageId && !this.currentPage.landingId)\n\t\t\t\t{\n\t\t\t\t\tthis.onFrameError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSuccessfullyConnected()\n\t\t\t{\n\t\t\t\tthis.$root.$app.fillPages().then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.openFirstPage();\n\t\t\t\t});\n\t\t\t},\n\t\t\tstartFrameCheckTimeout()\n\t\t\t{\n\t\t\t\t// this is a workaround for denied through X-Frame-Options sources\n\t\t\t\tif(this.frameCheckShortTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.frameCheckShortTimeout);\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}\n\t\t\t\tthis.frameCheckShortTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.frameCheckShortTimeout = false;\n\t\t\t\t}, 500);\n\n\t\t\t\t// to show error on long loading\n\t\t\t\tclearTimeout(this.frameCheckLongTimeout);\n\t\t\t\tthis.frameCheckLongTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tif(this.currentPage && this.showedPageIds.includes(this.currentPage.id) && !this.loadedPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.errorPageIds.push(this.currentPage.id);\n\t\t\t\t\t}\n\t\t\t\t}, 5000);\n\t\t\t},\n\t\t\tgetFrameSource(page)\n\t\t\t{\n\t\t\t\tif(this.showedPageIds.includes(page.id))\n\t\t\t\t{\n\t\t\t\t\tif(page.landingId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(page.isActive)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (new Uri(page.url)).setQueryParam('theme', '').toString();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.url;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\trefreshOrdersCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getOrdersCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.ordersCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trefreshPaymentsCount()\n\t\t\t{\n\t\t\t\tthis.$root.$app.getPaymentsCount().then((result) =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = result.answer.result || null;\n\t\t\t\t}).catch(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.paymentsCount = null;\n\t\t\t\t});\n\t\t\t},\n\t\t\trenderErrors()\n\t\t\t{\n\t\t\t\tif (this.isShowPayment && this.order.errors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet errorMessages = this.order.errors.map((item) => item.message).join('<br>');\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\t\t\ttextCenter: true,\n\t\t\t\t\t\ttext: BX.util.htmlspecialchars(errorMessages)\n\t\t\t\t\t};\n\t\t\t\t\tif (this.$refs.errorBlock.innerHTML.length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tparams.animated = true;\n\t\t\t\t\t}\n\t\t\t\t\tlet alert = new BX.UI.Alert(params);\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t\tthis.$refs.errorBlock.appendChild(alert.getContainer());\n\t\t\t\t}\n\t\t\t\telse if (this.$refs.errorBlock)\n\t\t\t\t{\n\t\t\t\t\tthis.$refs.errorBlock.innerHTML = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\teditMenuItem(event, page)\n\t\t\t{\n\t\t\t\tthis.editedPageId = page.id;\n\t\t\t\tsetTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tevent.target.parentNode.parentNode.querySelector('input').focus();\n\t\t\t\t}, 50);\n\t\t\t},\n\t\t\tsaveMenuItem(event)\n\t\t\t{\n\t\t\t\tconst pageId = this.editedPageId;\n\t\t\t\tconst name = event.target.value;\n\t\t\t\tlet oldName;\n\t\t\t\tthis.pages.forEach((page) =>\n\t\t\t\t{\n\t\t\t\t\tif(page.id === this.editedPageId)\n\t\t\t\t\t{\n\t\t\t\t\t\toldName = page.name\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(pageId > 0 && oldName && name !== oldName && name.length > 0)\n\t\t\t\t{\n\t\t\t\t\tManager.addPage({\n\t\t\t\t\t\tid: pageId,\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\tanalyticsLabel: 'salescenterUpdatePageTitle',\n\t\t\t\t\t}).then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.fillPages().then(() => {\n\t\t\t\t\t\t\tif(this.editedPageId === this.currentPageId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.setPageTitle(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.editedPageId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateLoader()\n\t\t\t{\n\t\t\t\tconst loader = new Loader({size: 200});\n\t\t\t\tloader.show(this.$refs['previewLoader']);\n\t\t\t}\n\t\t},\n\n\tcomputed:\n\t\t{\n\t\t\tconfig: () => config,\n\t\t\tcurrentPage()\n\t\t\t{\n\t\t\t\tif(this.currentPageId > 0)\n\t\t\t\t{\n\t\t\t\t\tlet pages = this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.id === this.currentPageId;\n\t\t\t\t\t});\n\t\t\t\t\tif(pages.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn pages[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\n\t\t\tsendButtonLabel()\n\t\t\t{\n\t\t\t\treturn this.editable && !this.$root.$app?.compilation\n\t\t\t\t\t? Loc.getMessage('SALESCENTER_SEND')\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_RESEND')\n\t\t\t\t\t;\n\t\t\t},\n\n\t\t\tpagesSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isPagesOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn !page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tformsSubmenuHeight()\n\t\t\t{\n\t\t\t\tif(this.isFormsOpen)\n\t\t\t\t{\n\t\t\t\t\treturn (this.application.pages.filter((page) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn page.isWebform;\n\t\t\t\t\t}).length * 39 + 30) + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '0px';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tisFrameError()\n\t\t\t{\n\t\t\t\tif(this.isShowPreview && this.currentPage)\n\t\t\t\t{\n\t\t\t\t\tif(!this.currentPage.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(!this.currentPage.landingId && this.errorPageIds.includes(this.currentPage.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tisShowLoader()\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tthis.isShowPreview &&\n\t\t\t\t\tthis.currentPageId > 0 &&\n\t\t\t\t\tthis.showedPageIds.includes(this.currentPageId) &&\n\t\t\t\t\t!this.loadedPageIds.includes(this.currentPageId)\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tisShowStartInfo()\n\t\t\t{\n\t\t\t\tlet res = false;\n\t\t\t\tif(this.isShowPreview)\n\t\t\t\t{\n\t\t\t\t\tres = (!this.pages || this.pages.length <= 0);\n\t\t\t\t}\n\t\t\t\telse if(this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\tres = !this.isOrderPublicUrlAvailable;\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t},\n\n\t\t\tlastModified()\n\t\t\t{\n\t\t\t\tif(this.currentPage && this.currentPage.modifiedAgo)\n\t\t\t\t{\n\t\t\t\t\treturn this.localize.SALESCENTER_MODIFIED.replace('#AGO#', this.currentPage.modifiedAgo);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tlocalize()\n\t\t\t{\n\t\t\t\treturn Vue.getFilteredPhrases('SALESCENTER_');\n\t\t\t},\n\n\t\t\tpages()\n\t\t\t{\n\t\t\t\treturn [...this.application.pages];\n\t\t\t},\n\n\t\t\tisAllowedSubmitButton()\n\t\t\t{\n\t\t\t\tif(this.$root.$app.disableSendButton)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.isShowPreview && this.currentPage && !this.currentPage.isActive)\n\t\t\t\t{\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif (this.isShowPayment)\n\t\t\t\t{\n\t\t\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\t\t}\n\t\t\t\treturn this.currentPage;\n\t\t\t},\n\t\t\tshowSubmitCompilationLinkToFacebookButton()\n\t\t\t{\n\t\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\n\t\t\t\treturn this.$root.$app.connector === 'facebook' && this.$root.$app.isAllowedFacebookRegion && isCompilationMode;\n\t\t\t},\n\t\t\tisNoPaymentSystemsBannerVisible()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.showPaySystemSettingBanner;\n\t\t\t},\n\t\t\tmode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.mode;\n\t\t\t},\n\t\t\t...Vuex.mapState({\n\t\t\t\tapplication: state => state.application,\n\t\t\t\torder: state => state.orderCreation,\n\t\t\t})\n\t\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"wrapperClass\"\n\t\t\t:style=\"wrapperStyle\"\n\t\t\tclass=\"salescenter-app-wrapper salescenter-app-chat-wrapper\"\n\t\t>\n\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" ref=\"sidebar\">\n\t\t\t\t<ul class=\"ui-sidepanel-menu\" ref=\"sidepanelMenu\">\n\t\t\t\t\t<li v-if=\"this.$root.$app.isPaymentCreationAvailable && !this.compilation\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{getPaymentItemTitle()}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.compilation\" :class=\"{ 'salescenter-app-sidebar-menu-active': this.isShowPayment}\" class=\"ui-sidepanel-menu-item\" @click=\"showPaymentForm\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{this.compilation.TITLE_TAB}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isPagesOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"isPagesOpen = !isPagesOpen;\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAGES}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isPagesOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: pagesSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"!page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrdersList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDERS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"ordersCounter\" v-show=\"ordersCount > 0\">{{ordersCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isWithOrdersMode\" @click=\"showOrderAdd\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_ORDER_ADD}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"!this.$root.$app.isWithOrdersMode\" @click=\"showPaymentsList\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_PAYMENTS}}</div>\n\t\t\t\t\t\t\t<span class=\"ui-sidepanel-counter\" ref=\"paymentsCounter\" v-show=\"paymentsCount > 0\">{{paymentsCount}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li v-if=\"this.$root.$app.isCatalogAvailable\" @click=\"showCatalog\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_CATALOG}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li :class=\"{'salescenter-app-sidebar-menu-active': isFormsOpen}\" class=\"ui-sidepanel-menu-item\">\n\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\" @click.stop.prevent=\"onFormsClick();\">\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{localize.SALESCENTER_LEFT_FORMS_ALL}}</div>\n\t\t\t\t\t\t\t<div class=\"ui-sidepanel-toggle-btn\">{{this.isFormsOpen ? this.localize.SALESCENTER_SUBMENU_CLOSE : this.localize.SALESCENTER_SUBMENU_OPEN}}</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"ui-sidepanel-submenu\" :style=\"{height: formsSubmenuHeight}\">\n\t\t\t\t\t\t\t<li v-for=\"page in pages\" v-if=\"page.isWebform\" :key=\"page.id\"\n\t\t\t\t\t\t\t :class=\"{\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-active': (currentPage && currentPage.id == page.id && isShowPreview),\n\t\t\t\t\t\t\t\t'ui-sidepanel-submenu-edit-mode': (editedPageId === page.id)\n\t\t\t\t\t\t\t}\" class=\"ui-sidepanel-submenu-item\">\n\t\t\t\t\t\t\t\t<a :title=\"page.name\" class=\"ui-sidepanel-submenu-link\" @click.stop=\"onPageClick(page)\">\n\t\t\t\t\t\t\t\t\t<input class=\"ui-sidepanel-input\" :value=\"page.name\" v-on:keyup.enter=\"saveMenuItem($event)\" @blur=\"saveMenuItem($event)\" />\n\t\t\t\t\t\t\t\t\t<div v-if=\"lastAddedPages.includes(page.id)\" class=\"ui-sidepanel-badge-new\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{page.name}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-edit-btn\"><span class=\"ui-sidepanel-edit-btn-icon\" @click=\"editMenuItem($event, page);\"></span></div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"salescenter-app-helper-nav-item salescenter-app-menu-add-page\" @click.stop=\"showAddPageActionPopup($event, true)\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-app-helper-nav-item-text salescenter-app-helper-nav-item-add\">+</span><span class=\"salescenter-app-helper-nav-item-text\">{{localize.SALESCENTER_RIGHT_ACTION_ADD}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t<div class=\"salescenter-app-page-header\" v-show=\"isShowPreview && !isShowStartInfo\">\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-dropdown ui-btn-xs\" @click=\"showActionsPopup($event)\">{{localize.SALESCENTER_RIGHT_ACTIONS_BUTTON}}</div>\n\t\t\t\t\t<div class=\"salescenter-btn-delimiter salescenter-btn-action\"></div>\n\t\t\t\t\t<div class=\"salescenter-btn-action ui-btn ui-btn-link ui-btn-xs ui-btn-icon-edit\" @click=\"editPage\">{{localize.SALESCENTER_RIGHT_ACTION_EDIT}}</div>\n\t\t\t\t</div>\n\t\t\t\t<start\n\t\t\t\t\tv-if=\"isShowStartInfo && mode !== ModeDictionary.terminalPayment\"\n\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t>\n\t\t\t\t</start>\n\t\t\t\t<template v-else-if=\"isFrameError && isShowPreview\">\n\t\t\t\t\t<div class=\"salescenter-app-page-content salescenter-app-lost\">\n\t\t\t\t\t\t<div class=\"salescenter-app-lost-block ui-title-1 ui-text-center ui-color-medium\">{{localize.SALESCENTER_ERROR_TITLE}}</div>\n\t\t\t\t\t\t<div v-if=\"currentPage.isFrameDenied === true\" class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_RIGHT_FRAME_DENIED}}</div>\n\t\t\t\t\t\t<div v-else-if=\"currentPage.isActive !== true\" class=\"salescenter-app-lost-helper salescenter-app-not-active ui-color-medium\">{{localize.SALESCENTER_RIGHT_NOT_ACTIVE}}</div>\n\t\t\t\t\t\t<div v-else class=\"salescenter-app-lost-helper ui-color-medium\">{{localize.SALESCENTER_ERROR_TEXT}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-show=\"isShowPreview && !isShowStartInfo && !isFrameError\" class=\"salescenter-app-page-content\">\n\t\t\t\t\t<template v-for=\"page in pages\">\n\t\t\t\t\t\t<iframe class=\"salescenter-app-demo\" v-show=\"currentPage && currentPage.id == page.id\" :src=\"getFrameSource(page)\" frameborder=\"0\" @error=\"onFrameError(page.id)\" @load=\"onFrameLoad(page.id)\" :key=\"page.id\"></iframe>\n\t\t\t\t\t</template>\n\t\t\t\t\t<div class=\"salescenter-app-demo-overlay\" :class=\"{\n\t\t\t\t\t\t'salescenter-app-demo-overlay-loading': this.isShowLoader\n\t\t\t\t\t}\">\n\t\t\t\t\t\t<div v-show=\"isShowLoader\" ref=\"previewLoader\"></div>\n\t\t\t\t\t\t<div v-if=\"lastModified\" class=\"salescenter-app-demo-overlay-modification\">{{lastModified}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t    <template v-if=\"this.$root.$app.isPaymentsLimitReached\">\n\t\t\t        <div ref=\"paymentsLimit\" v-show=\"isShowPayment && !isShowStartInfo\"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<chat-receiving-payment\n\t\t\t\t\t\tv-if=\"isShowPayment && !isShowStartInfo\"\n\t\t\t\t\t\t:key=\"order.basketVersion\"\n\t\t\t\t\t\t@stage-block-send-on-send=\"send($event)\"\n\t\t\t\t\t\t@stage-block-send-on-send-compilation-link-to-facebook=\"sendCompilationLinkToFacebook($event)\"\n\t\t\t\t\t/>\n\t\t        </template>\n\t\t\t</div>\n\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\">\n\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t<button :class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\" class=\"ui-btn ui-btn-md ui-btn-success\" @click=\"send($event)\">{{sendButtonLabel}}</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"showSubmitCompilationLinkToFacebookButton\"\n\t\t\t\t\t\t:class=\"{'ui-btn-disabled': !this.isAllowedSubmitButton}\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light-border\"\n\t\t\t\t\t\t@click=\"sendCompilationLinkToFacebook($event)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{localize.SALESCENTER_SEND_COMPILATION_LINK_TO_FACEBOOK}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-link\" @click=\"close\">{{localize.SALESCENTER_CANCEL}}</button>\n\t\t\t\t\t<button v-if=\"isShowPayment && !isShowStartInfo && !this.$root.$app.isPaymentsLimitReached && this.$root.$app.isWithOrdersMode\" class=\"ui-btn ui-btn-md ui-btn-link btn-send-crm\" @click=\"send($event, 'y')\">{{localize.SALESCENTER_SAVE_ORDER}}</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n}\n","import { Loc, ajax as Ajax } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from './stage-mixin';\nimport { Error, SenderList, UserAvatar, MessageEdit, MessageView, MessageEditor, MessageControl } from 'salescenter.component.stage-block.sms-message';\nimport { Manager } from 'salescenter.manager';\nimport { SenderConfig } from 'salescenter.lib';\nimport { UI } from 'ui.notification';\nimport { StatusTypes as Status } from 'salescenter.component.stage-block';\nimport { Editor } from 'crm.messagesender.editor';\nimport { Router } from 'crm.router';\nimport { Dictionary } from 'crm.integration.analytics';\nimport { MessageMixin } from './message-mixin';\n\nconst TYPE_PHONE = 'phone';\nconst TYPE_SENDER = 'sender';\n\nconst SmsMessage = {\n\tprops: {\n\t\tinitSenders: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tinitCurrentSenderCode: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tmessageSenderData: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t\tinitPushedToUseBitrix24Notifications: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmanager: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tselectedSmsSender: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t\tphone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcontactEditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\townerTypeId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitleTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tshowHint: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\teditorTemplate: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\teditorUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tselectedMode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [StageMixin, MessageMixin],\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t\t'sms-error-block': Error,\n\t\t'sms-sender-list-block': SenderList,\n\t\t'sms-user-avatar-block': UserAvatar,\n\t\t'sms-message-edit-block': MessageEdit,\n\t\t'sms-message-view-block': MessageView,\n\t\t'sms-message-editor-block': MessageEditor,\n\t\t'sms-message-control-block': MessageControl,\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tcontactPhone: this.phone,\n\t\t\tcurrentSenderCode: null,\n\t\t\tsenders: [],\n\t\t\tpushedToUseBitrix24Notifications: null,\n\t\t\tsmsSenderListComponentKey: 0,\n\t\t\tmessageSenderEditor: null,\n\t\t\tshowMessageSenderEditor: true,\n\t\t\ttemplateError: false,\n\t\t\tclientError: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tmessageSenderError()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t};\n\t\t},\n\t\tstatus()\n\t\t{\n\t\t\treturn this.$store.getters['orderCreation/isSenderSelected'] ? Status.complete : Status.current;\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t\thintClassModifier: 'salescenter-app-payment-by-sms-item-title-info--link-gray',\n\t\t\t}\n\t\t},\n\t\teditor()\n\t\t{\n\t\t\treturn {\n\t\t\t\ttemplate: this.editorTemplate,\n\t\t\t\turl: this.editorUrl\n\t\t\t};\n\t\t},\n\t\tcurrentSender()\n\t\t{\n\t\t\treturn this.senders.find(sender => sender.code === this.currentSenderCode);\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.titleTemplate.replace('#PHONE#', this.contactPhone);\n\t\t},\n\t\terrors()\n\t\t{\n\t\t\tif (this.messageSenderAvailable)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tlet result = [];\n\n\t\t\tlet bitrix24ConnectUrlError;\n\n\t\t\tif (!this.currentSender)\n\t\t\t{\n\t\t\t\tfor (let sender of this.senders)\n\t\t\t\t{\n\t\t\t\t\tif (!SenderConfig.needConfigure(sender))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: this.getConnectionErrorText(sender),\n\t\t\t\t\t\tfixer: SenderConfig.openSliderFreeMessages(sender.connectUrl),\n\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(sender),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\n\t\t\t\t\tif (sender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t{\n\t\t\t\t\t\tbitrix24ConnectUrlError = sender.connectUrl;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.currentSender.isAvailable)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_' + this.currentSender.code.toUpperCase() + '_NOT_AVAILABLE'),\n\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.currentSender.isConnected)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = this.currentSender.usageErrors.map(error => ({ text: error, type: TYPE_SENDER }))\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\ttext: this.getConnectionErrorText(this.currentSender),\n\t\t\t\t\t\t\tfixer: this.getFixer(this.currentSender.connectUrl),\n\t\t\t\t\t\t\tfixText: this.getConnectionErrorFixText(this.currentSender),\n\t\t\t\t\t\t\ttype: TYPE_SENDER\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (this.currentSender.code === SenderConfig.BITRIX24)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbitrix24ConnectUrlError = this.currentSender.connectUrl;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.contactPhone)\n\t\t\t{\n\t\t\t\tif(this.contactEditorUrl.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\tfixer: this.getFixer(this.contactEditorUrl),\n\t\t\t\t\t\tfixText: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY_SETTINGS'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_ALERT_PHONE_EMPTY'),\n\t\t\t\t\t\ttype: TYPE_PHONE\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (this.pushedToUseBitrix24Notifications === 'N' && bitrix24ConnectUrlError)\n\t\t\t{\n\t\t\t\tthis.getFixer(bitrix24ConnectUrlError)().then(() => this.handleErrorFix());\n\t\t\t\tBX.userOptions.save('salescenter', 'payment_sender_options', 'pushed_to_use_bitrix24_notifications', 'Y');\n\t\t\t\tthis.pushedToUseBitrix24Notifications = 'Y';\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t},\n\twatch: {\n\t\tmessageData(newMessageData): void\n\t\t{\n\t\t\tif (!this.messageSenderEditor)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.showMessageSenderEditor = Boolean(\n\t\t\t\tnewMessageData.fromId && newMessageData.senderId && newMessageData.senderCode,\n\t\t\t);\n\n\t\t\tif (newMessageData.senderCode === 'bitrix24')\n\t\t\t{\n\t\t\t\tthis.setTemplateError(false);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setTemplateError(!newMessageData.body || !newMessageData.body.includes('#LINK#'));\n\t\t\t}\n\n\t\t\tthis.clientError = Boolean(\n\t\t\t\t!newMessageData.entityId\n\t\t\t\t|| !newMessageData.entityTypeId\n\t\t\t\t|| !newMessageData.phoneId,\n\t\t\t);\n\n\t\t\tthis.$store.commit(\n\t\t\t\t'orderCreation/setIsSenderSelected',\n\t\t\t\tthis.showMessageSenderEditor\n\t\t\t\t&& !this.templateError\n\t\t\t\t&& !this.clientError,\n\t\t\t);\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.initialize(this.initCurrentSenderCode, this.initSenders, this.initPushedToUseBitrix24Notifications);\n\t},\n\tmounted() {\n\t\tif (this.messageSenderAvailable)\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/setIsSenderSelected', false);\n\t\t\tthis.initMessageSenderEditor();\n\t\t}\n\t},\n\tmethods: {\n\t\tinitMessageSenderEditor()\n\t\t{\n\t\t\tthis.messageSenderEditor = new Editor(this.messageSenderData);\n\t\t\tthis.messageSenderEditor.render().then(() => this.initMessageData()).catch(() => {});\n\t\t\tthis.messageSenderEditor.subscribe('onToChange', this.onToChangeHandler.bind(this));\n\t\t\tthis.messageSenderEditor.subscribe('onMessageBodyChange', this.onMessageBodyChangeHandler.bind(this));\n\t\t\tthis.messageSenderEditor.subscribe('onFromChange', this.onFromChangeHandler.bind(this));\n\t\t\tthis.messageSenderEditor.subscribe('onChannelChange', this.onChannelChangeHandler.bind(this));\n\t\t},\n\t\topenMessageSenderConnectionsSlider()\n\t\t{\n\t\t\tRouter.Instance.openMessageSenderConnectionsSlider(\n\t\t\t\t{ c_section: Dictionary.SECTION_SALESCENTER_SLIDER },\n\t\t\t).then(() => {\n\t\t\t\tif (this.messageSenderEditor)\n\t\t\t\t{\n\t\t\t\t\tthis.messageSenderEditor.reload().then(() => {\n\t\t\t\t\t\tthis.initMessageData();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tonFromChangeHandler(event)\n\t\t{\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setMessageData',\n\t\t\t\t{\n\t\t\t\t\tfromId: event.getData().from?.id,\n\t\t\t\t\tfromType: event.getData().from?.type,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tonChannelChangeHandler(event)\n\t\t{\n\t\t\tconst channel = event.getData().channel;\n\t\t\tconst backend = channel?.backend;\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setMessageData',\n\t\t\t\t{\n\t\t\t\t\tsenderId: backend?.id,\n\t\t\t\t\tsenderCode: backend?.senderCode,\n\t\t\t\t\tchannelId: channel?.id,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tonToChangeHandler(event)\n\t\t{\n\t\t\tconst to = event.getData().to;\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'orderCreation/setMessageData',\n\t\t\t\t{\n\t\t\t\t\tentityId: to?.addressSource?.entityId,\n\t\t\t\t\tentityTypeId: to?.addressSource?.entityTypeId,\n\t\t\t\t\tphoneId: to?.address?.id,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tinitMessageData()\n\t\t{\n\t\t\tconst state = this.messageSenderEditor.getState();\n\t\t\tconst messageData = {\n\t\t\t\tbody: state.message?.body,\n\t\t\t\tfromId: state.from?.id,\n\t\t\t\tfromType: state.from?.type,\n\t\t\t\tsenderId: state.channel?.backend?.id,\n\t\t\t\tsenderCode: state.channel?.backend?.senderCode,\n\t\t\t\tchannelId: state.channel?.id,\n\t\t\t\tentityId: state.to?.addressSource?.entityId,\n\t\t\t\tentityTypeId: state.to?.addressSource?.entityTypeId,\n\t\t\t\tphoneId: state.to?.address?.id,\n\t\t\t};\n\t\t\tthis.$store.dispatch('orderCreation/setMessageData', messageData);\n\t\t},\n\t\tonConfigureContactPhone()\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-message-on-change-contact-phone');\n\t\t},\n\t\tgetConnectionErrorText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_WARNING';\n\t\t\tconst fallback = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetConnectionErrorFixText(sender)\n\t\t{\n\t\t\tconst messageCode = 'SALESCENTER_SEND_ORDER_BY_SMS_' + sender.code.toUpperCase() + '_NOT_CONNECTED_FIX';\n\t\t\tconst fallback = 'SALESCENTER_PRODUCT_DISCOUNT_EDIT_PAGE_URL_TITLE';\n\n\t\t\treturn Loc.getMessage(messageCode) || Loc.getMessage(fallback);\n\t\t},\n\t\tgetFixer(fixUrl)\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tif (typeof fixUrl === 'string')\n\t\t\t\t{\n\t\t\t\t\treturn Manager.openSlider(fixUrl, {\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonLoad: function(event) {\n\t\t\t\t\t\t\t\tconst slider = event.getSlider();\n\t\t\t\t\t\t\t\tconst sliderBx = slider.getFrameWindow().BX;\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onNothingChanged\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"BX.Crm.EntityEditor:onCancel\", () => slider.close());\n\t\t\t\t\t\t\t\tsliderBx.addCustomEvent(\"onCrmEntityUpdate\", () => slider.close());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (typeof fixUrl === 'object' && fixUrl !== null)\n\t\t\t\t{\n\t\t\t\t\tif (fixUrl.type === 'ui_helper')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.loadExt('ui.info-helper').then(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.UI.InfoHelper.show(fixUrl.value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve();\n\t\t\t};\n\t\t},\n\t\tonItemHint(e)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tinitialize(currentSenderCode, senders, pushedToUseBitrix24Notifications)\n\t\t{\n\t\t\tthis.currentSenderCode = currentSenderCode;\n\t\t\tthis.senders = senders;\n\t\t\tthis.pushedToUseBitrix24Notifications = pushedToUseBitrix24Notifications;\n\n\t\t\tthis.$root.$app.options.currentSenderCode = this.currentSenderCode;\n\t\t\tthis.$root.$app.options.senders = this.senders;\n\t\t\tthis.$root.$app.options.pushedToUseBitrix24Notifications = this.pushedToUseBitrix24Notifications;\n\n\t\t\tthis.$store.commit('orderCreation/setIsSenderSelected', this.currentSenderCode !== '');\n\t\t},\n\t\thandleOnSmsSenderSelected(value)\n\t\t{\n\t\t\tthis.$emit('stage-block-sms-send-on-change-provider', value);\n\t\t},\n\t\thandleErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshSenderSettings\", {\n\t\t\t\tmode: \"class\"\n\t\t\t})\n\t\t\t\t.then((resolve)=> {\n\t\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.initialize(\n\t\t\t\t\t\t\tresolve.data.currentSenderCode,\n\t\t\t\t\t\t\tresolve.data.senders,\n\t\t\t\t\t\t\tresolve.data.pushedToUseBitrix24Notifications,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.smsSenderListComponentKey += 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\thandlePhoneErrorFix()\n\t\t{\n\t\t\tAjax.runComponentAction(\"bitrix:salescenter.app\", \"refreshContactPhone\", {\n\t\t\t\tmode: \"class\",\n\t\t\t\tdata: {\n\t\t\t\t\tfields:{\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((resolve)=> {\n\t\t\t\tif (BX.type.isObject(resolve.data) && Object.values(resolve.data).length > 0)\n\t\t\t\t{\n\t\t\t\t\tif(this.contactPhone != resolve.data.contactPhone)\n\t\t\t\t\t{\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER_PHONE_CHANGE', {\n\t\t\t\t\t\t\t\t'#TITLE#': resolve.data.title\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.contactPhone = resolve.data.contactPhone;\n\t\t\t\t\tthis.onConfigureContactPhone();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thendleSmsErrorBlock(event)\n\t\t{\n\t\t\tif(event.data.type === TYPE_PHONE)\n\t\t\t{\n\t\t\t\tthis.handlePhoneErrorFix()\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.handleErrorFix()\n\t\t\t}\n\t\t},\n\t\topenBitrix24NotificationsHelp(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsHelp(event);\n\t\t},\n\t\topenBitrix24NotificationsWorks(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openBitrix24NotificationsWorks(event);\n\t\t},\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<stage-block-item\t\t\t\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{title}}</template>\n\t\t\t<template\n\t\t\t\tv-if=\"showHint\"\n\t\t\t\tv-slot:block-hint-title\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS_V3')}\n\t\t\t</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\" class=\"salescenter-app-payment-by-sms-item-container-offtop\">\n\t\t\t\t\t<sms-error-block\n\t\t\t\t\t\tv-if=\"!messageSenderAvailable\"\n\t\t\t\t\t\tv-for=\"(error, index) in errors\"\n\t\t\t\t\t\tv-bind:key=\"index\"\n\t\t\t\t\t\tv-on:on-configure=\"hendleSmsErrorBlock($event)\"\n\t\t\t\t\t\t:error=\"error\"\n\t\t\t\t\t>\n\t\t\t\t\t</sms-error-block>\n\t\t\t\t\t<div v-if=\"messageSenderAvailable\">\n\t\t\t\t\t\t<sms-error-block\n\t\t\t\t\t\t\tv-if=\"showMessageSenderEditor && clientError\"\n\t\t\t\t\t\t\t:error=\"messageSenderError\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</sms-error-block>\n\t\t\t\t\t\t<div v-show=\"showMessageSenderEditor\" :id=\"messageSenderId\"></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-show=\"!showMessageSenderEditor\"\n\t\t\t\t\t\t\t@click=\"openMessageSenderConnectionsSlider\"\n\t\t\t\t\t\t\tclass=\"salescenter-app-payment-by-sms-message-sender-empty-state\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-message-sender-empty-state-image\"></div>\n\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-message-sender-empty-state-right-block\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-message-sender-empty-state-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_MESSAGE_SENDER_EMPTY_STATE')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-btn --air ui-btn-md --style-filled ui-btn-no-caps\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_BITRIX24_NOT_CONNECTED_FIX')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else class=\"salescenter-app-payment-by-sms-item-container-sms\">\n\t\t\t\t\t\t<sms-user-avatar-block :manager=\"manager\"/>\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t<div v-if=\"currentSenderCode === 'bitrix24'\" class=\"salescenter-app-payment-by-sms-item-container-sms-content\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-message\">\n\t\t\t\t\t\t\t\t\t<div contenteditable=\"false\" class=\"salescenter-app-payment-by-sms-item-container-sms-content-message-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_TEMPLATE_BASED_MESSAGE_WILL_BE_SENT')}\n\t\t\t\t\t\t\t\t\t\t<a @click.stop.prevent=\"openBitrix24NotificationsHelp(event)\" href=\"#\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_MORE_DETAILS')}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<sms-message-editor-block v-else :editor=\"editor\" :selectedMode=\"selectedMode\"/>\n\t\t\t\t\t\t\t<template v-if=\"currentSenderCode === 'bitrix24'\">\n\t\t\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-sms-content-info\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_VIA_BITRIX24')}\n\t\t\t\t\t\t\t\t\t<span @click=\"openBitrix24NotificationsWorks(event)\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"currentSenderCode === 'sms_provider'\">\n\t\t\t\t\t\t\t\t<sms-sender-list-block\n\t\t\t\t\t\t\t\t\t:key=\"smsSenderListComponentKey\"\n\t\t\t\t\t\t\t\t\t:list=\"currentSender.smsSenders\"\n\t\t\t\t\t\t\t\t\t:initSelected=\"selectedSmsSender\"\n\t\t\t\t\t\t\t\t\t:settingUrl=\"currentSender.connectUrl\"\n\t\t\t\t\t\t\t\t\tv-on:on-configure=\"handleErrorFix\"\n\t\t\t\t\t\t\t\t\tv-on:on-selected=\"handleOnSmsSenderSelected\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template v-slot:sms-sender-list-text-send-from>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SEND_ORDER_BY_SMS_SENDER')}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</sms-sender-list-block>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`\n};\nexport {\n\tSmsMessage\n}\n","import { ajax as Ajax, Loc } from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tconst stages = {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tmessageSenderData: this.$root.$app.options.messageSenderData,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.getTitleTemplate(),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\ttitle: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_MSGVER_1'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tdelivery: {\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline),\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.paySystemList.groups)\n\t\t{\n\t\t\tstages.paysystem.groups = this.getTileGroupsCollection(\n\t\t\t\tthis.$root.$app.options.paySystemList.groups,\n\t\t\t\tstages.paysystem.tiles,\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\tstages,\n\t\t};\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType,\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisHideDeliveryStage()\n\t\t{\n\t\t\treturn this.isViewWithoutDelivery();\n\t\t},\n\t},\n\tmethods: {\n\t\tgetTitleTemplate(): string\n\t\t{\n\t\t\tif (this.$root.$app.options.messageSenderData)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_SENDER_MSGVER_1');\n\t\t\t}\n\n\t\t\tif (this.$root.$app.sendingMethodDesc.sent)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME');\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2');\n\t\t},\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tconst list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tconst tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTileGroupsCollection(groups, tiles)\n\t\t{\n\t\t\tconst ret = [];\n\n\t\t\tif (Array.isArray(groups))\n\t\t\t{\n\t\t\t\tObject.values(groups).forEach((item) => {\n\t\t\t\t\tconst group = new Tile.Group(item);\n\t\t\t\t\tgroup.fillTiles(tiles);\n\t\t\t\t\tret.push(group);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tconst result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif (type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.groups = this.getTileGroupsCollection(data.groups, this.stages.paysystem.tiles);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if (type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if (type === 'DELIVERY')\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = data.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tchangeContactPhone(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-on-reload', event)\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t\tonProductFormModeChange()\n\t\t{\n\t\t\tconst isCompilationMode = this.$store.getters['orderCreation/isCompilationMode'];\n\t\t\tif (isCompilationMode)\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'compilation';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.compilation;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stages.delivery.status = this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\n\t\t\t\tthis.stages.message.selectedMode = 'payment';\n\t\t\t\tthis.$root.$app.sendingMethodDesc.text = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t\tthis.stages.message.editorTemplate = this.$root.$app.sendingMethodDesc.text_modes.payment;\n\t\t\t}\n\t\t},\n\t\tisViewWithoutDelivery()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$root.$app.options.templateMode === 'view'\n\t\t\t\t&& parseInt(this.$root.$app.options.shipmentId) <= 0\n\t\t\t);\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t@on-product-form-mode-change=\"onProductFormModeChange\"\n\t\t\t/>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t@stage-block-sms-message-on-change-contact-phone=\"changeContactPhone\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:messageSenderData=\"stages.message.messageSenderData\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:ownerId=\"stages.message.ownerId\"\n\t\t\t\t:ownerTypeId=\"stages.message.ownerTypeId\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<delivery-block\n\t\t\t\tv-if=\"!isHideDeliveryStage\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"true\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t:isDeliveryStageVisible=\"stages.delivery.installed\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {ajax as Ajax, Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from '../deal-receiving-payment/stage-blocks/send';\nimport {Cashbox} from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport {PaySystem} from '../stage-blocks/paysystem';\nimport {SmsMessage} from '../stage-blocks/sms-message';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\nimport {TimeLine} from '../stage-blocks/timeline';\nimport {DocumentSelector} from '../stage-blocks/document-selector';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'sms-message-block': SmsMessage,\n\t\t'timeline-block': TimeLine,\n\t\t'document-selector-block': DocumentSelector,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet stages =  {\n\t\t\tmessage: {\n\t\t\t\tinitSenders: this.$root.$app.options.senders,\n\t\t\t\tinitCurrentSenderCode: this.$root.$app.options.currentSenderCode,\n\t\t\t\tmessageSenderData: this.$root.$app.options.messageSenderData,\n\t\t\t\tinitPushedToUseBitrix24Notifications: this.$root.$app.options.pushedToUseBitrix24Notifications,\n\t\t\t\tselectedSmsSender: this.$root.$app.sendingMethodDesc.provider,\n\t\t\t\tmanager: this.$root.$app.options.entityResponsible,\n\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\tcontactEditorUrl: this.$root.$app.options.contactEditorUrl,\n\t\t\t\ttitleTemplate: this.getTitleTemplate(),\n\t\t\t\tshowHint: this.$root.$app.options.templateMode !== 'view',\n\t\t\t\teditorTemplate: this.$root.$app.sendingMethodDesc.text,\n\t\t\t\teditorUrl: this.$root.$app.orderPublicUrl,\n\t\t\t\tselectedMode: 'payment',\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\ttitle: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_MSGVER_1'),\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_PRODUCT_SET_BLOCK_TITLE_SHORT'),\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t\tdocumentSelector: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline)\n\t\t\t}\n\t\t}\n\n\t\tif (this.$root.$app.hasOwnProperty('documentSelector'))\n\t\t{\n\t\t\tif (this.$root.$app.documentSelector.templateAddUrl)\n\t\t\t{\n\t\t\t\tstages.documentSelector.templateAddUrl = this.$root.$app.documentSelector.templateAddUrl;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstages: stages,\n\t\t}\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\tisShowDocumentSelector()\n\t\t{\n\t\t\treturn this.$root.$app.hasOwnProperty('documentSelector');\n\t\t},\n\t},\n\tmethods: {\n\t\tgetTitleTemplate(): string\n\t\t{\n\t\t\tif (this.$root.$app.options.messageSenderData)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_SENDER_MSGVER_1');\n\t\t\t}\n\n\t\t\tif (this.$root.$app.sendingMethodDesc.sent)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2_PAST_TIME');\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('SALESCENTER_APP_CONTACT_BLOCK_TITLE_MESSAGE_2');\n\t\t},\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tlet list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => list.push(TimeLineItem.Factory.create(options)));\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tlet tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\toptions => tiles.push(Tile.Factory.create(options)));\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tlet result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t\"bitrix:salescenter.app\",\n\t\t\t\t\"getAjaxData\",\n\t\t\t\t{\n\t\t\t\t\tmode: \"class\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(function(response) {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tif(type === 'PAY_SYSTEM')\n\t\t\t{\n\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t\telse if(type === 'CASHBOX')\n\t\t\t{\n\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled;\n\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t},\n\t\tchangeProvider(value)\n\t\t{\n\t\t\tthis.$root.$app.sendingMethodDesc.provider = value;\n\t\t\tBX.userOptions.save('salescenter', 'payment_sms_provider_options', 'latest_selected_provider', value);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<product-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<sms-message-block\n\t\t\t\t@stage-block-sms-send-on-change-provider=\"changeProvider\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:initSenders=\"stages.message.initSenders\"\n\t\t\t\t:initCurrentSenderCode=\"stages.message.initCurrentSenderCode\"\n\t\t\t\t:messageSenderData=\"stages.message.messageSenderData\"\n\t\t\t\t:initPushedToUseBitrix24Notifications=\"stages.message.initPushedToUseBitrix24Notifications\"\n\t\t\t\t:selectedSmsSender=\"stages.message.selectedSmsSender\"\n\t\t\t\t:manager=\"stages.message.manager\"\n\t\t\t\t:phone=\"stages.message.phone\"\n\t\t\t\t:contactEditorUrl=\"stages.message.contactEditorUrl\"\n\t\t\t\t:ownerId=\"stages.message.ownerId\"\n\t\t\t\t:ownerTypeId=\"stages.message.ownerTypeId\"\n\t\t\t\t:titleTemplate=\"stages.message.titleTemplate\"\n\t\t\t\t:showHint=\"stages.message.showHint\"\n\t\t\t\t:editorTemplate=\"stages.message.editorTemplate\"\n\t\t\t\t:editorUrl=\"stages.message.editorUrl\"\n\t\t\t\t:selectedMode=\"stages.message.selectedMode\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<document-selector-block\n\t\t\t\tv-if=\"isShowDocumentSelector\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:templateAddUrl=\"stages.documentSelector.templateAddUrl\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:showWhatClientSeesControl=\"!editable\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import {Loc} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn {'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false};\n\t\t},\n\t},\n\tmethods: {\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n}\n","import {ajax as Ajax, Loc} from 'main.core';\nimport {StatusTypes as Status} from 'salescenter.component.stage-block';\nimport {UI} from 'ui.notification';\nimport {MixinTemplatesType} from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport Send from './stage-blocks/send';\nimport Product from '../stage-blocks/product';\nimport {DeliveryVuex} from '../stage-blocks/delivery-vuex';\nimport {Automation} from '../stage-blocks/automation';\nimport {StageMixin} from '../stage-blocks/stage-mixin';\n\nexport default {\n\tcomponents: {\n\t\t'send-block': Send,\n\t\t'product-block': Product,\n\t\t'delivery-block': DeliveryVuex,\n\t\t'automation-block': Automation,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tconst stages = {\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_MSGVER_1'),\n\t\t\t},\n\t\t\tdelivery: {\n\t\t\t\tstatus: this.$root.$app.options.deliveryList.isInstalled\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.deliveryList.items),\n\t\t\t\tinstalled: this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isDeliveryCollapsed ? this.$root.$app.options.isDeliveryCollapsed === 'Y' : this.$root.$app.options.deliveryList.isInstalled,\n\t\t\t},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnDeliveryFinished: this.$root.$app.options.stageOnDeliveryFinished,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tstages,\n\t\t};\n\t},\n\tmixins: [StageMixin, MixinTemplatesType],\n\tcomputed:\n\t\t{\n\t\t\thasStageAutomation()\n\t\t\t{\n\t\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t\t},\n\t\t\teditableMixin()\n\t\t\t{\n\t\t\t\treturn this.editable === false;\n\t\t\t},\n\t\t\tisViewTemplateMode()\n\t\t\t{\n\t\t\t\treturn this.$root.$app.options.templateMode === 'view';\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tinitCounter()\n\t\t\t{\n\t\t\t\tthis.counter = 1;\n\t\t\t},\n\n\t\t\tgetTileCollection(items)\n\t\t\t{\n\t\t\t\tconst tiles = [];\n\t\t\t\tObject.values(items).forEach(\n\t\t\t\t\t(options) => tiles.push(Tile.Factory.create(options))\n\t\t\t\t);\n\n\t\t\t\treturn tiles;\n\t\t\t},\n\n\t\t\tgetTitleItems(items)\n\t\t\t{\n\t\t\t\tconst result = [];\n\t\t\t\titems.forEach((item) => {\n\t\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tstageRefresh(e, type)\n\t\t\t{\n\t\t\t\tAjax.runComponentAction(\n\t\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t\t'getAjaxData',\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t).then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tif (response.data)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\n\t\t\trefreshTilesByType(data, type)\n\t\t\t{\n\t\t\t\tif (type === 'DELIVERY')\n\t\t\t\t{\n\t\t\t\t\tthis.stages.delivery.status = data.isInstalled\n\t\t\t\t\t\t? Status.complete\n\t\t\t\t\t\t: Status.disabled;\n\t\t\t\t\tthis.stages.delivery.tiles = this.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.delivery.installed = data.isInstalled;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonSend(event)\n\t\t\t{\n\t\t\t\tthis.$emit('stage-block-send-on-send', event)\n\t\t\t},\n\n\t\t\tsaveCollapsedOption(type, value)\n\t\t\t{\n\t\t\t\tBX.userOptions.save('salescenter', 'add_shipment_collapse_options', type, value);\n\t\t\t},\n\t\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<product-block \n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\t\"stages.product.title\"\n\t\t\t\t:hintTitle=\"''\"\n\t\t\t/>\n\t\t\t\n\t\t\t<delivery-block v-on:on-stage-tile-collection-slider-close=\"stageRefresh($event, 'DELIVERY')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.delivery.status\"\n\t\t\t\t:tiles=\"stages.delivery.tiles\"\n\t\t\t\t:installed=\"stages.delivery.installed\"\n\t\t\t\t:isCollapsible=\"false\"\n\t\t\t\t:initialCollapseState=\"stages.delivery.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\n\t\t\t<automation-block v-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnDeliveryFinished=\"stages.automation.stageOnDeliveryFinished\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t:isDeliveryStageVisible=true\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t\n\t\t\t<send-block\n\t\t\t\tv-if=\"!isViewTemplateMode\"\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t/>\n\t\t</div>\n\t`\n};\n","import { ajax as Ajax, Loc, Text, Event } from 'main.core';\nimport { TagSelector } from 'ui.entity-selector';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from './stage-mixin';\n\nconst ResponsibleSelector = {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tselectedUser: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t},\n\t\tresponsible: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t\tisMobileInstalledForResponsible: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t},\n\t\teditable: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tcontact: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t},\n\t},\n\n\tmixins: [StageMixin],\n\n\tcomponents: {\n\t\t'stage-block-item':\tBlock,\n\t},\n\n\tcomputed: {\n\t\tisCreateMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.templateMode === 'create';\n\t\t},\n\t\tconfigForBlock()\n\t\t{\n\t\t\treturn {\n\t\t\t\tcounter: this.counter,\n\t\t\t\ttitleItems: [],\n\t\t\t\tinstalled: true,\n\t\t\t\tcollapsible: false,\n\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\tshowHint: true,\n\t\t\t};\n\t\t},\n\t\tcontactInfo()\n\t\t{\n\t\t\tif (this.contact.name || this.contact.phone)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage(\n\t\t\t\t\t'SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_CONTACT_INFO_TEMPLATE',\n\t\t\t\t\t{\n\t\t\t\t\t\t'[span]': '<span class=\"salescenter-responsible-block-contact\">',\n\t\t\t\t\t\t'[/span]': '</span>',\n\t\t\t\t\t\t'#CONTACT_NAME#': Text.encode(this.contact.name),\n\t\t\t\t\t\t'#CONTACT_PHONE#': Text.encode(this.contact.phone),\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\taddEmployee()\n\t\t{\n\t\t\treturn Loc.getMessage(\n\t\t\t\t'SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_ADD_EMPLOYEE',\n\t\t\t\t{\n\t\t\t\t\t'[link]': '<span id=\"add-employee-link\" class=\"salescenter-responsible-block-add-employee-link\">',\n\t\t\t\t\t'[/link]': '</span>',\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tresponsibleHeaderText()\n\t\t{\n\t\t\treturn this.isCreateMode ? Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_RESPONSIBLE_CREATE') : Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_RESPONSIBLE_VIEW');\n\t\t},\n\t\tavatarStyle()\n\t\t{\n\t\t\tconst url = this.responsible.photo ? { 'background-image': `url(${this.responsible.photo})` } : null;\n\n\t\t\treturn [url];\n\t\t},\n\t},\n\n\tmounted()\n\t{\n\t\tthis.$store.commit('orderCreation/setMobileInstalledForResponsible', this.isMobileInstalledForResponsible ?? true);\n\n\t\tconst addEmployeeLink = document.getElementById('add-employee-link');\n\t\tif (addEmployeeLink)\n\t\t{\n\t\t\tEvent.bind(addEmployeeLink, 'click', (event) => {\n\t\t\t\tthis.$root.$app.openMobileAppPopup();\n\t\t\t});\n\t\t}\n\n\t\tif (!this.editable)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectorRoot = document.getElementById('salescenterResponsibleSelector');\n\n\t\tconst dialogOptions = {\n\t\t\tcontext: 'salescenter_responsible',\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'user',\n\t\t\t\t},\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\tthis.onResponsibleChanged(event);\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tif (this.selectedUser)\n\t\t{\n\t\t\tdialogOptions.preselectedItems = [\n\t\t\t\t['user', this.selectedUser],\n\t\t\t];\n\t\t\tdialogOptions.undeselectedItems = [\n\t\t\t\t['user', this.selectedUser],\n\t\t\t];\n\t\t}\n\n\t\tconst tagSelector = new TagSelector({\n\t\t\tmultiple: false,\n\t\t\tdialogOptions,\n\t\t\tdeselectable: false,\n\t\t});\n\n\t\ttagSelector.renderTo(selectorRoot);\n\t},\n\n\tmethods: {\n\t\tonResponsibleChanged(event)\n\t\t{\n\t\t\tconst { item } = event.getData();\n\n\t\t\titem.setDeselectable(false);\n\t\t\tevent.target?.tagSelector?.updateTags();\n\t\t\tthis.$store.commit('orderCreation/setPaymentResponsibleId', item.getId());\n\n\t\t\tconst isSubmitEnabled = this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\tthis.$store.commit('orderCreation/disableSubmit');\n\t\t\tAjax.runAction('salescenter.terminalResponsible.getUserMobileInfo', {\n\t\t\t\tdata: {\n\t\t\t\t\tuserId: item.getId(),\n\t\t\t\t},\n\t\t\t}).then((result) => {\n\t\t\t\tthis.$store.commit('orderCreation/setMobileInstalledForResponsible', result.data.isMobileInstalled);\n\t\t\t\tif (!result.data.isMobileInstalled)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('orderCreation/setResponsiblePhoneNumbers', result.data.phones);\n\t\t\t\t}\n\n\t\t\t\tif (isSubmitEnabled)\n\t\t\t\t{\n\t\t\t\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t\t\t\t}\n\n\t\t\t\tthis.$emit('on-responsible-changed', event);\n\t\t\t});\n\t\t},\n\t\tonItemHint(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openHowTerminalWorks();\n\t\t},\n\t},\n\n\tcreated()\n\t{\n\t\tif (this.selectedUser)\n\t\t{\n\t\t\tthis.$store.commit('orderCreation/setPaymentResponsibleId', this.selectedUser);\n\t\t}\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t:class=\"statusClassMixin\"\n\t\t\t:config=\"configForBlock\"\n\t\t\tv-on:on-item-hint=\"onItemHint\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{ title }}</template>\n\t\t\t<template v-slot:block-hint-title>{{ hintTitle }}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<p class=\"salescenter-responsible-block-responsible-header\">{{ responsibleHeaderText }}</p>\n\t\t\t\t\t<div id=\"salescenterResponsibleSelector\" v-if=\"editable\"></div>\n\t\t\t\t\t<div class=\"salescenter-responsible-block-responsible-wrapper\" v-else>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"salescenter-app-payment-by-sms-item-container-sms-user-avatar salescenter-responsible-block-responsible-photo\"\n\t\t\t\t\t\t\t:style=\"avatarStyle\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-responsible-block-responsible-name-wrapper\">\n\t\t\t\t\t\t\t<a class=\"salescenter-responsible-block-responsible-name\">{{ responsible.fullName }}</a>\n\t\t\t\t\t\t\t<div class=\"salescenter-responsible-block-responsible-position-wrapper\">\n\t\t\t\t\t\t\t\t<span class=\"salescenter-responsible-block-responsible-position\">{{ responsible.position }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-html=\"contactInfo\" class=\"salescenter-responsible-block-contact-info\" v-if=\"!isCreateMode\"></div>\n\t\t\t\t\t<div v-html=\"addEmployee\" class=\"salescenter-responsible-block-add-employee\" v-else></div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\n\nexport\n{\n\tResponsibleSelector,\n};\n","export default {\n\tprops: {\n\t\tbuttonLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonEnabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonClass()\n\t\t{\n\t\t\treturn { 'salescenter-app-payment-by-sms-item-disabled': this.buttonEnabled === false };\n\t\t},\n\t},\n\tmethods: {\n\t\tsubmit(event)\n\t\t{\n\t\t\tthis.$emit('on-submit', event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"buttonClass\"\n\t\t\tclass=\"salescenter-app-payment-by-sms-item-show salescenter-app-payment-by-sms-item salescenter-app-payment-by-sms-item-send\"\n\t\t>\n\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-rounder\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-line\"></div>\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-counter-number\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container\">\n\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment\">\n\t\t\t\t\t\t<div class=\"salescenter-app-payment-by-sms-item-container-payment-inline\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t@click=\"submit($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-lg ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{buttonLabel}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc, Tag } from 'main.core';\nimport { Block } from 'salescenter.component.stage-block';\nimport { StageMixin } from '../../stage-blocks/stage-mixin';\nimport { CurrencyCore } from 'currency.currency-core';\n\nexport default {\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thintTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [StageMixin],\n\tmounted()\n\t{\n\t\t// temporary fix; see the comment in the product block (product.js) for more details\n\t\tconst editable = this.$root.$app.options.templateMode !== 'view';\n\t\tthis.$root.$emit('on-change-editable', editable);\n\t\tthis.$store.commit('orderCreation/enableSubmit');\n\t},\n\tcomponents:\n\t\t{\n\t\t\t'stage-block-item': Block,\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tonItemHint(e)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowToSell(e);\n\t\t\t},\n\t\t\tonProductFormModeChange(event)\n\t\t\t{\n\t\t\t\tthis.$emit('on-product-form-mode-change');\n\t\t\t},\n\t\t},\n\tcomputed:\n\t\t{\n\t\t\tconfigForBlock()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tcounter: this.counter,\n\t\t\t\t\tchecked: this.counterCheckedMixin,\n\t\t\t\t\tshowHint: true,\n\t\t\t\t};\n\t\t\t},\n\t\t\tformattedSum()\n\t\t\t{\n\t\t\t\tconst defaultCurrency = this.$root.$app.options.currencyCode || '';\n\t\t\t\tconst sum = CurrencyCore.currencyFormat(this.$root.$app.options.totals.result, defaultCurrency, false);\n\t\t\t\tconst element = Tag.render`<span class=\"catalog-pf-text salescenter-amount-block-amount-result-text--total\">${sum}</span>`;\n\n\t\t\t\treturn CurrencyCore.getPriceControl(element, defaultCurrency);\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<stage-block-item\n\t\t\t@on-item-hint.stop.prevent=\"onItemHint\"\n\t\t\t:config=\"configForBlock\"\n\t\t\t:class=\"statusClassMixin\"\n\t\t>\n\t\t\t<template v-slot:block-title-title>{{ title }}</template>\n\t\t\t<template v-slot:block-hint-title>{{ hintTitle }}</template>\n\t\t\t<template v-slot:block-container>\n\t\t\t\t<div :class=\"containerClassMixin\">\n\t\t\t\t\t<div class=\"salescenter-amount-block-stub-wrapper\">\n\t\t\t\t\t\t<div class=\"salescenter-amount-block-stub-icon\"></div>\n\t\t\t\t\t\t<div class=\"salescenter-amount-block-stub-text-wrapper\">\n\t\t\t\t\t\t\t<h3 class=\"salescenter-amount-block-stub-title\">${Loc.getMessage('SALESCENTER_AMOUNT_BLOCK_STUB_TITLE')}</h3>\n\t\t\t\t\t\t\t<p class=\"salescenter-amount-block-stub-text\">${Loc.getMessage('SALESCENTER_AMOUNT_BLOCK_STUB_TEXT')}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"salescenter-amount-block-amount-wrapper\">\n\t\t\t\t\t\t<table class=\"salescenter-amount-block-amount-result\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"salescenter-amount-block-amount-result-cell\">\n\t\t\t\t\t\t\t\t\t<span class=\"salescenter-amount-block-amount-result-text salescenter-amount-block-amount-result-text--total\">${Loc.getMessage('SALESCENTER_AMOUNT_BLOCK_TOTAL')}</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class=\"salescenter-amount-block-amount-result-cell\">\n\t\t\t\t\t\t\t\t\t<span class=\"salescenter-amount-block-amount-result-symbol salescenter-amount-block-amount-result-symbol--total\" v-html=\"formattedSum\"></span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</stage-block-item>\n\t`,\n};\n","import { ajax as Ajax, Loc, Runtime, userOptions as UserOptions } from 'main.core';\nimport { StatusTypes as Status } from 'salescenter.component.stage-block';\nimport * as TimeLineItem from 'salescenter.timeline';\nimport { UI } from 'ui.notification';\nimport { MixinTemplatesType } from '../templates-type-mixin';\nimport * as Tile from 'salescenter.tile';\nimport { ResponsibleSelector } from '../stage-blocks/responsible-selector';\nimport { Cashbox } from '../stage-blocks/cashbox';\nimport Product from '../stage-blocks/product';\nimport { PaySystem } from '../stage-blocks/paysystem';\nimport { Automation } from '../stage-blocks/automation';\nimport { StageMixin } from '../stage-blocks/stage-mixin';\nimport { TimeLine } from '../stage-blocks/timeline';\nimport Send from './stage-blocks/send';\nimport Amount from './stage-blocks/amount';\n\nexport default {\n\tcomponents: {\n\t\t'responsible-block': ResponsibleSelector,\n\t\t'cashbox-block': Cashbox,\n\t\t'product-block': Product,\n\t\t'paysystem-block': PaySystem,\n\t\t'automation-block': Automation,\n\t\t'timeline-block': TimeLine,\n\t\t'send-block': Send,\n\t\t'amount-block': Amount,\n\t},\n\tprops: {\n\t\tsendAllowed: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tconst stages = {\n\t\t\tresponsible: {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tselectedUser: parseInt(this.$root.$app.options.paymentResponsible ?? 0),\n\t\t\t\tresponsible: this.$root.$app.options.entityResponsible,\n\t\t\t\tisMobileInstalledForResponsible: this.$root.$app.options.isMobileInstalledForResponsible,\n\t\t\t\tcontact: {\n\t\t\t\t\tname: this.$root.$app.options.contactName,\n\t\t\t\t\tphone: this.$root.$app.options.contactPhone,\n\t\t\t\t},\n\t\t\t\teditable: this.$root.$app.options.templateMode === 'create' || this.$root.$app.options.payment?.PAID === 'N',\n\t\t\t\thintTitle: this.$root.$app.options.templateMode === 'view'\n\t\t\t\t\t? ''\n\t\t\t\t\t: Loc.getMessage('SALESCENTER_HOW_TERMINAL_WORKS'),\n\t\t\t},\n\t\t\tproduct: {\n\t\t\t\tstatus: this.$root.$app.options.basket && this.$root.$app.options.basket.length > 0\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.current,\n\t\t\t\ttitle: Loc.getMessage('SALESCENTER_PRODUCT_BLOCK_TITLE_MSGVER_1'),\n\t\t\t\thintTitle: '',\n\t\t\t},\n\t\t\tpaysystem: {\n\t\t\t\tstatus: this.$root.$app.options.paySystemList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinstalled: this.$root.$app.options.paySystemList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.paySystemList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isPaySystemCollapsed ? this.$root.$app.options.isPaySystemCollapsed === 'Y' : this.$root.$app.options.paySystemList.isSet,\n\t\t\t},\n\t\t\tcashbox: {},\n\t\t\tautomation: {},\n\t\t};\n\n\t\tif (this.$root.$app.options.cashboxList.hasOwnProperty('items'))\n\t\t{\n\t\t\tstages.cashbox = {\n\t\t\t\tstatus: this.$root.$app.options.cashboxList.isSet\n\t\t\t\t\t? Status.complete\n\t\t\t\t\t: Status.disabled,\n\t\t\t\ttiles: this.getTileCollection(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinstalled: this.$root.$app.options.cashboxList.isSet,\n\t\t\t\ttitleItems: this.getTitleItems(this.$root.$app.options.cashboxList.items),\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isCashboxCollapsed ? this.$root.$app.options.isCashboxCollapsed === 'Y' : this.$root.$app.options.cashboxList.isSet,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.isAutomationAvailable)\n\t\t{\n\t\t\tstages.automation = {\n\t\t\t\tstatus: Status.complete,\n\t\t\t\tstageOnOrderPaid: this.$root.$app.options.stageOnOrderPaid,\n\t\t\t\titems: this.$root.$app.options.entityStageList,\n\t\t\t\tinitialCollapseState: this.$root.$app.options.isAutomationCollapsed ? this.$root.$app.options.isAutomationCollapsed === 'Y' : false,\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.hasOwnProperty('timeline'))\n\t\t{\n\t\t\tstages.timeline = {\n\t\t\t\titems: this.getTimelineCollection(this.$root.$app.options.timeline),\n\t\t\t};\n\t\t}\n\n\t\tif (this.$root.$app.options.paySystemList.groups)\n\t\t{\n\t\t\tstages.paysystem.groups = this.getTileGroupsCollection(\n\t\t\t\tthis.$root.$app.options.paySystemList.groups,\n\t\t\t\tstages.paysystem.tiles,\n\t\t\t);\n\t\t}\n\n\t\tif (this.$root.$app.options.templateMode === 'view' && this.$root.$app.options.payment?.PAID === 'Y')\n\t\t{\n\t\t\tstages.responsible.title = Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_TITLE_PAID_VIEW');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstages.responsible.title = Loc.getMessage('SALESCENTER_PAYMENT_RESPONSIBLE_SELECTOR_BLOCK_TITLE');\n\t\t}\n\n\t\treturn {\n\t\t\tstages,\n\t\t};\n\t},\n\tmixins: [\n\t\tStageMixin,\n\t\tMixinTemplatesType,\n\t],\n\tcomputed: {\n\t\thasStageTimeLine()\n\t\t{\n\t\t\treturn this.stages.timeline.hasOwnProperty('items') && this.stages.timeline.items.length > 0;\n\t\t},\n\t\thasStageAutomation()\n\t\t{\n\t\t\treturn this.stages.automation.hasOwnProperty('items');\n\t\t},\n\t\thasStageCashBox()\n\t\t{\n\t\t\treturn this.stages.cashbox.hasOwnProperty('tiles');\n\t\t},\n\t\tsubmitButtonLabel()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_CREATE_TERMINAL_PAYMENT') : Loc.getMessage('SALESCENTER_SAVE');\n\t\t},\n\t\thasProducts()\n\t\t{\n\t\t\treturn !this.$root.$app.options.isPaymentByAmount;\n\t\t},\n\t},\n\tmethods: {\n\t\tinitCounter()\n\t\t{\n\t\t\tthis.counter = 1;\n\t\t},\n\t\tgetTimelineCollection(items)\n\t\t{\n\t\t\tconst list = [];\n\n\t\t\tObject.values(items).forEach(\n\t\t\t\t(options) => list.push(TimeLineItem.Factory.create(options)),\n\t\t\t);\n\n\t\t\treturn list;\n\t\t},\n\t\tgetTileCollection(items)\n\t\t{\n\t\t\tconst tiles = [];\n\t\t\tObject.values(items).forEach(\n\t\t\t\t(options) => tiles.push(Tile.Factory.create(options)),\n\t\t\t);\n\n\t\t\treturn tiles;\n\t\t},\n\t\tgetTileGroupsCollection(groups, tiles)\n\t\t{\n\t\t\tconst ret = [];\n\n\t\t\tif (Array.isArray(groups))\n\t\t\t{\n\t\t\t\tObject.values(groups).forEach((item) => {\n\t\t\t\t\tconst group = new Tile.Group(item);\n\t\t\t\t\tgroup.fillTiles(tiles);\n\t\t\t\t\tret.push(group);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\t\tgetTitleItems(items)\n\t\t{\n\t\t\tconst result = [];\n\t\t\titems.forEach((item) => {\n\t\t\t\tif (![Tile.More.type(), Tile.Offer.type()].includes(item.type))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tstageRefresh(e, type)\n\t\t{\n\t\t\tAjax.runComponentAction(\n\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t'getAjaxData',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif (response.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.refreshTilesByType(response.data, type);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_DATA_UPDATE_ERROR'),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\trefreshTilesByType(data, type)\n\t\t{\n\t\t\tswitch (type)\n\t\t\t{\n\t\t\t\tcase 'PAY_SYSTEM': {\n\t\t\t\t\tthis.stages.paysystem.status = data.isSet\n\t\t\t\t\t\t? Status.complete\n\t\t\t\t\t\t: Status.disabled;\n\t\t\t\t\tthis.stages.paysystem.tiles = this.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.paysystem.groups = this.getTileGroupsCollection(data.groups, this.stages.paysystem.tiles);\n\t\t\t\t\tthis.stages.paysystem.installed = data.isSet;\n\t\t\t\t\tthis.stages.paysystem.titleItems = this.getTitleItems(data.items);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase 'CASHBOX': {\n\t\t\t\t\tthis.stages.cashbox.status = data.isSet\n\t\t\t\t\t\t? Status.complete\n\t\t\t\t\t\t: Status.disabled;\n\t\t\t\t\tthis.stages.cashbox.tiles = this.getTileCollection(data.items);\n\t\t\t\t\tthis.stages.cashbox.installed = data.isSet;\n\t\t\t\t\tthis.stages.cashbox.titleItems = this.getTitleItems(data.items);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t// No default\n\t\t\t}\n\t\t},\n\t\tonSend(event)\n\t\t{\n\t\t\tthis.$emit('stage-block-send-on-send', event);\n\t\t},\n\t\tonResponsibleChanged(event)\n\t\t{\n\t\t\tthis.$emit('on-responsible-changed', event);\n\t\t},\n\t\tsaveCollapsedOption(type, value)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', 'add_payment_collapse_options', type, value);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initCounter();\n\t},\n\tbeforeUpdate()\n\t{\n\t\tthis.initCounter();\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"salescenter-app-terminal-wrapper\">\n\t\t\t<product-block\n\t\t\t\tv-if=\"hasProducts\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t\t:additionalContainerClasses=\"{ 'salescenter-app-teminal-products-item': true }\"\n\t\t\t/>\n\t\t\t<responsible-block\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.responsible.status\"\n\t\t\t\t:title=\"stages.responsible.title\"\n\t\t\t\t:selectedUser=\"stages.responsible.selectedUser\"\n\t\t\t\t:responsible=\"stages.responsible.responsible\"\n\t\t\t\t:isMobileInstalledForResponsible=\"stages.responsible.isMobileInstalledForResponsible\"\n\t\t\t\t:contact=\"stages.responsible.contact\"\n\t\t\t\t:editable=\"stages.responsible.editable\"\n\t\t\t\t:hintTitle=\"stages.responsible.hintTitle\"\n\t\t\t\t@on-responsible-changed=\"onResponsibleChanged\"\n\t\t\t/>\n\t\t\t<amount-block\n\t\t\t\tv-if=\"!hasProducts\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.product.status\"\n\t\t\t\t:title=\"stages.product.title\"\n\t\t\t\t:hintTitle=\"stages.product.hintTitle\"\n\t\t\t/>\n\t\t\t<paysystem-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'PAY_SYSTEM')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.paysystem.status\"\n\t\t\t\t:tiles=\"stages.paysystem.tiles\"\n\t\t\t\t:installed=\"stages.paysystem.installed\"\n\t\t\t\t:titleItems=\"stages.paysystem.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.paysystem.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<cashbox-block\n\t\t\t\tv-if=\"editable && hasStageCashBox\"\n\t\t\t\t@on-stage-tile-collection-slider-close=\"stageRefresh($event, 'CASHBOX')\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.cashbox.status\"\n\t\t\t\t:tiles=\"stages.cashbox.tiles\"\n\t\t\t\t:installed=\"stages.cashbox.installed\"\n\t\t\t\t:titleItems=\"stages.cashbox.titleItems\"\n\t\t\t\t:initialCollapseState=\"stages.cashbox.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<automation-block\n\t\t\t\tv-if=\"editable && hasStageAutomation\"\n\t\t\t\t:counter=\"counter++\"\n\t\t\t\t:status=\"stages.automation.status\"\n\t\t\t\t:stageOnOrderPaid=\"stages.automation.stageOnOrderPaid\"\n\t\t\t\t:items=\"stages.automation.items\"\n\t\t\t\t:initialCollapseState=\"stages.automation.initialCollapseState\"\n\t\t\t\t@on-save-collapsed-option=\"saveCollapsedOption\"\n\t\t\t/>\n\t\t\t<send-block\n\t\t\t\tv-if=\"editable\"\n\t\t\t\t@on-submit=\"onSend\"\n\t\t\t\t:buttonEnabled=\"sendAllowed\"\n\t\t\t\t:buttonLabel=\"submitButtonLabel\"\n\t\t\t/>\n\t\t\t<timeline-block\n\t\t\t\tv-if=\"hasStageTimeLine\"\n\t\t\t\t:timelineItems=\"stages.timeline.items\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\nimport { Vuex } from 'ui.vue.vuex';\nimport StageBlocksList from './components/deal-receiving-payment/stage-blocks-list';\nimport EntityCreatePaymentStages from './components/crm-entity-create-payment/stage-blocks-list';\nimport StageBlocksListShipment from './components/deal-creating-shipment/stage-blocks-list';\nimport TerminalStageBlocksList from './components/deal-terminal-payment/stage-blocks-list';\nimport ComponentMixin from './component-mixin';\nimport { Loc, Runtime, userOptions as UserOptions } from 'main.core';\nimport { MixinTemplatesType } from './components/templates-type-mixin';\nimport Start from './start';\nimport { ModeDictionary } from './const/mode-dictionary';\n\nimport { SenderConfig } from 'salescenter.lib';\n\nexport default {\n\tmixins: [MixinTemplatesType, ComponentMixin],\n\tdata()\n\t{\n\t\tlet isPanelVisible = true;\n\t\tif (this.$root.$app.options.mode === ModeDictionary.terminalPayment && this.$root.$app.options.templateMode === 'view' && this.$root.$app.options.payment?.PAID === 'N')\n\t\t{\n\t\t\tisPanelVisible = false;\n\t\t}\n\n\t\treturn {\n\t\t\tactiveMenuItem: this.$root.$app.options.mode,\n\t\t\tisLoading: false,\n\t\t\tisPanelVisible,\n\t\t\tModeDictionary,\n\t\t};\n\t},\n\tcomponents: {\n\t\t'deal-receiving-payment': StageBlocksList,\n\t\t'crm-entity-create-payment': EntityCreatePaymentStages,\n\t\t'deal-creating-shipment': StageBlocksListShipment,\n\t\t'deal-terminal-payment': TerminalStageBlocksList,\n\t\t'start': Start,\n\t},\n\tmethods: {\n\t\treload(form)\n\t\t{\n\t\t\tif (this.isLoading || !this.editable)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isLoading = true;\n\t\t\tthis.activeMenuItem = form;\n\t\t\tthis.$emit(\n\t\t\t\t'on-reload',\n\t\t\t\t{\n\t\t\t\t\tcontext: this.$root.$app.options.context,\n\t\t\t\t\torderId: this.$root.$app.orderId,\n\t\t\t\t\townerTypeId: this.$root.$app.options.ownerTypeId,\n\t\t\t\t\townerId: this.$root.$app.options.ownerId,\n\t\t\t\t\ttemplateMode: 'create',\n\t\t\t\t\tmode: this.activeMenuItem,\n\t\t\t\t\tshowModeList: this.$root.$app.options.showModeList,\n\t\t\t\t\tinitialMode: this.$root.$app.options.initialMode,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tonSuccessfullyConnected()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tonReload()\n\t\t{\n\t\t\tthis.reload(this.activeMenuItem);\n\t\t},\n\t\tsendPaymentDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedPaymentDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.$root.$app.isPhoneConfirmed)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Salescenter.App::onPhoneConfirmed', () => this.sendPaymentDeliveryForm(event));\n\t\t\t\tthis.$root.$app.showPhoneConfirmPopup();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.$store.getters['orderCreation/isCompilationMode'])\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendCompilation(event.target);\n\t\t\t}\n\t\t\telse if (this.editable)\n\t\t\t{\n\t\t\t\tthis.$root.$app.sendPayment(event.target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$root.$app.resendPayment(event.target);\n\t\t\t}\n\t\t},\n\t\tsendDeliveryForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedDeliverySubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$root.$app.sendShipment(event.target);\n\t\t},\n\t\tsendTerminalPaymentForm(event)\n\t\t{\n\t\t\tif (!this.isAllowedTerminalPaymentSubmitButton)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.templateMode === 'view')\n\t\t\t{\n\t\t\t\tthis.$root.$app.updateTerminalPayment(event.target);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$root.$app.sendTerminalPayment(event.target);\n\t\t},\n\t\t// region menu item handlers\n\t\tspecifyCompanyContacts()\n\t\t{\n\t\t\tBX.Salescenter.Manager.openSlider(this.$root.$app.options.urlSettingsCompanyContacts, {width: 1200} );\n\t\t},\n\t\tsuggestScenario(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openFeedbackPayOrderForm(event);\n\t\t},\n\t\thowItWorks(event)\n\t\t{\n\t\t\tif (this.mode === ModeDictionary.payment)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowPaySmartInvoiceWorks(event);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.mode === ModeDictionary.terminalPayment)\n\t\t\t{\n\t\t\t\tBX.Salescenter.Manager.openHowTerminalWorks(event);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.Salescenter.Manager.openHowPayDealWorks(event);\n\t\t},\n\t\topenIntegrationWindow(event)\n\t\t{\n\t\t\tBX.Salescenter.Manager.openIntegrationRequestForm(event);\n\t\t},\n\t\tfreeMessages()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\tlet fixed = SenderConfig.openSliderFreeMessages(sender[0].connectUrl);\n\t\t\t\tfixed().then()\n\t\t\t}\n\t\t},\n\t\tonResponsibleChanged(event)\n\t\t{\n\t\t\t// it needs to be done like that and not with vue's @class attribute because is breaks BX.UI.Pinner's classes\n\t\t\tconst buttonsPanel = this.$refs['buttonsPanel'];\n\t\t\tbuttonsPanel.classList.remove('salescenter-button-panel-hidden');\n\t\t\tconst pinnerAnchor = document.querySelector('.salescenter-app-pinner-anchor');\n\t\t\tpinnerAnchor.classList.remove('salescenter-app-pinner-anchor-hidden');\n\t\t},\n\t\topenTerminalToolDisabledSlider()\n\t\t{\n\t\t\tRuntime.loadExtension('ui.info-helper').then(() => {\n\t\t\t\ttop.BX.UI.InfoHelper.show('limit_crm_terminal_off');\n\t\t\t});\n\t\t},\n\t\topenSalescanterToolDisabledSlider()\n\t\t{\n\t\t\tBX.loadExt('salescenter.tool-availability-manager').then(() => {\n\t\t\t\tBX.Salescenter.ToolAvailabilityManager.openSalescenterToolDisabledSlider();\n\t\t\t});\n\t\t},\n\t\t// endregion\n\t},\n\tcomputed: {\n\t\tmode()\n\t\t{\n\t\t\treturn this.$root.$app.options.mode;\n\t\t},\n\t\ttemplateMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.templateMode;\n\t\t},\n\t\tinitialMode()\n\t\t{\n\t\t\treturn this.$root.$app.options.initialMode;\n\t\t},\n\t\tisAllowedFreeMessagesButton()\n\t\t{\n\t\t\tlet senders = this.$root.$app.options.senders\n\n\t\t\tlet sender = senders.filter(item => item.code === SenderConfig.BITRIX24)\n\n\t\t\tif(sender.length > 0)\n\t\t\t{\n\t\t\t\treturn SenderConfig.needConfigure(sender[0])\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tisOnlyDeliveryItemVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.initialMode === ModeDictionary.delivery\n\t\t\t\t&& this.$root.$app.options.hasOwnProperty('deliveryList')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasOwnProperty('hasInstallable')\n\t\t\t\t&& this.$root.$app.options.deliveryList.hasInstallable\n\t\t\t);\n\t\t},\n\t\tisTerminalItemVisible()\n\t\t{\n\t\t\treturn this.isPaymentItemVisible && this.$root.$app.options.isTerminalAvailable;\n\t\t},\n\t\tisTerminalToolEnabled()\n\t\t{\n\t\t\treturn this.$root.$app.options.isTerminalToolEnabled;\n\t\t},\n\t\tisSalescenterToolEnabled()\n\t\t{\n\t\t\treturn this.$root.$app.options.isSalescenterToolEnabled;\n\t\t},\n\t\tisPaymentItemVisible()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.initialMode === ModeDictionary.payment\n\t\t\t\t|| this.initialMode === ModeDictionary.paymentDelivery\n\t\t\t\t|| this.initialMode === ModeDictionary.terminalPayment\n\t\t\t);\n\t\t},\n\t\tisAllowedPaymentDeliverySubmitButton()\n\t\t{\n\t\t\tif (this.$root.$app.options.messageSenderData)\n\t\t\t{\n\t\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t\t}\n\n\t\t\tif (!this.$root.$app.hasClientContactInfo())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst senders = this.$root.$app.options.senders;\n\t\t\tconst filteredSenders = senders.filter(sender => (\n\t\t\t\tsender.code === this.$root.$app.options.currentSenderCode && sender.isConnected\n\t\t\t));\n\t\t\tif (filteredSenders.length === 0)\n\t\t\t{\n\t\t\t\tthis.$store.commit('orderCreation/setIsSenderSelected', false);\n\t\t\t}\n\n\t\t\treturn this.$store.getters['orderCreation/isAllowedSubmit'];\n\t\t},\n\t\tisAllowedTerminalPaymentSubmitButton()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.$store.getters['orderCreation/isAllowedSubmit']\n\t\t\t\t|| this.isTerminalViewModeSaveAllowed\n\t\t\t);\n\t\t},\n\t\tisTerminalViewModeSaveAllowed()\n\t\t{\n\t\t\treturn this.templateMode === 'view' && this.$root.$app.options.payment?.PAID === 'N';\n\t\t},\n\t\tisAllowedDeliverySubmitButton()\n\t\t{\n\t\t\tconst deliveryId = this.$store.getters['orderCreation/getDeliveryId'];\n\t\t\tif (!deliveryId)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.$store.getters['orderCreation/isAllowedSubmit'])\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn (deliveryId != this.$root.$app.options.emptyDeliveryServiceId);\n\t\t},\n\t\tisSuggestScenarioMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isBitrix24;\n\t\t},\n\t\tisRequestIntegrationMenuItemVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.isIntegrationButtonVisible;\n\t\t},\n\t\tisModeListVisible()\n\t\t{\n\t\t\treturn this.$root.$app.options.showModeList ?? true;\n\t\t},\n\t\tneedShowStoreConnection()\n\t\t{\n\t\t\treturn !this.isOrderPublicUrlAvailable && this.mode !== ModeDictionary.delivery;\n\t\t},\n\t\tisSidebarEnabled()\n\t\t{\n\t\t\treturn true; // not removing this just yet because who knows...\n\t\t},\n\t\tsendPaymentDeliveryFormButtonText()\n\t\t{\n\t\t\treturn this.editable ? Loc.getMessage('SALESCENTER_SEND') : Loc.getMessage('SALESCENTER_RESEND');\n\t\t},\n\t\ttitle()\n\t\t{\n\t\t\treturn this.$root.$app.options.title;\n\t\t},\n\t\t// classes region\n\t\tpaymentDeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedPaymentDeliverySubmitButton};\n\t\t},\n\t\tdeliveryFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedDeliverySubmitButton};\n\t\t},\n\t\tterminalPaymentFormSubmitButtonClass()\n\t\t{\n\t\t\treturn {'ui-btn-disabled': !this.isAllowedTerminalPaymentSubmitButton};\n\t\t},\n\t\tpaymentMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.payment,\n\t\t\t};\n\t\t},\n\t\tpaymentTerminalMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.terminalPayment,\n\t\t\t};\n\t\t},\n\t\tpaymentDeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.paymentDelivery,\n\t\t\t};\n\t\t},\n\t\tdeliveryMenuItemClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'salescenter-app-sidebar-menu-active': this.activeMenuItem === ModeDictionary.delivery,\n\t\t\t};\n\t\t},\n\t\t// endregion\n\t\t...Vuex.mapState({\n\t\t\tapplication: state => state.application,\n\t\t\torder: state => state.orderCreation,\n\t\t})\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div\n\t\t\t\t:class=\"wrapperClass\"\n\t\t\t\t:style=\"wrapperStyle\"\n\t\t\t\tclass=\"salescenter-app-wrapper\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-sidepanel-sidebar salescenter-app-sidebar\" v-if=\"isSidebarEnabled\">\n\t\t\t\t\t<ul class=\"ui-sidepanel-menu\">\n\t\t\t\t\t\t<template v-if=\"templateMode === 'view'\">\n\t\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item salescenter-app-sidebar-menu-active\">\n\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">{{title}}</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else-if=\"isModeListVisible\">\n\t\t\t\t\t\t\t<template v-if=\"isOnlyDeliveryItemVisible\">\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t:class=\"deliveryMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_CREATE_SHIPMENT_MSGVER_1')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tv-if=\"isPaymentItemVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"isSalescenterToolEnabled ? reload(ModeDictionary.payment) : openSalescanterToolDisabledSlider()\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TAKE_PAYMENT')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tv-if=\"isTerminalItemVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"isTerminalToolEnabled ? reload(ModeDictionary.terminalPayment) : openTerminalToolDisabledSlider()\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentTerminalMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link salescenter-menu-terminal-payment\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TERMINAL_PAYMENT')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tv-if=\"isPaymentItemVisible\"\n\t\t\t\t\t\t\t\t\t@click=\"isSalescenterToolEnabled ? reload(ModeDictionary.paymentDelivery) : openSalescanterToolDisabledSlider()\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentDeliveryMenuItemClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_TAKE_PAYMENT_AND_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</template>\n\t\n\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm ui-sidepanel-menu-item-separate\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"specifyCompanyContacts\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_COMPANY_CONTACTS')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isSuggestScenarioMenuItemVisible\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"suggestScenario($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_OFFER_SCRIPT')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"howItWorks($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_HOW_WORKS')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isAllowedFreeMessagesButton\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"freeMessages($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_FREE_MESSAGES')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-if=\"isRequestIntegrationMenuItemVisible\"\n\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-item ui-sidepanel-menu-item-sm\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t@click=\"openIntegrationWindow($event)\"\n\t\t\t\t\t\t\t\tclass=\"ui-sidepanel-menu-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\"\n\t\t\t\t\t\t\t\t\t data-manager-openIntegrationRequestForm-params=\"sender_page:deal\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_LEFT_PAYMENT_INTEGRATION_MSGVER_3')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-app-right-side\">\n\t\t\t\t\t<start\n\t\t\t\t\t\tv-if=\"needShowStoreConnection && mode !== ModeDictionary.terminalPayment\"\n\t\t\t\t\t\t@on-successfully-connected=\"onSuccessfullyConnected\"\n\t\t\t\t\t>\n\t\t\t\t\t</start>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<deal-receiving-payment\n\t\t\t\t\t\t\tv-if=\"mode === ModeDictionary.paymentDelivery\"\n\t\t\t\t\t\t\t@stage-block-on-reload=\"onReload\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<deal-creating-shipment\n\t\t\t\t\t\t\tv-else-if=\"mode === ModeDictionary.delivery\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendDeliveryForm($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedDeliverySubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<crm-entity-create-payment\n\t\t\t\t\t\t\tv-if=\"mode === ModeDictionary.payment\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedPaymentDeliverySubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<deal-terminal-payment\n\t\t\t\t\t\t\tv-if=\"mode === ModeDictionary.terminalPayment\"\n\t\t\t\t\t\t\t@stage-block-send-on-send=\"sendTerminalPaymentForm($event)\"\n\t\t\t\t\t\t\t@on-responsible-changed=\"onResponsibleChanged($event)\"\n\t\t\t\t\t\t\t:sendAllowed=\"isAllowedTerminalPaymentSubmitButton\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"!(mode === 'terminal_payment' && templateMode === 'view' && !isTerminalViewModeSaveAllowed)\">\n\t\t\t\t\t<div class=\"ui-button-panel-wrapper salescenter-button-panel\" ref=\"buttonsPanel\" :class=\"{ 'salescenter-button-panel-hidden': !isPanelVisible }\">\n\t\t\t\t\t\t<div class=\"ui-button-panel\">\n\t\t\t\t\t\t\t<template v-if=\"mode === ModeDictionary.paymentDelivery || mode === ModeDictionary.payment\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"sendPaymentDeliveryForm($event)\"\n\t\t\t\t\t\t\t\t\t:class=\"paymentDeliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{sendPaymentDeliveryFormButtonText}}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"mode === 'terminal_payment'\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tv-if=\"editable\"\n\t\t\t\t\t\t\t\t\t@click=\"sendTerminalPaymentForm($event)\"\n\t\t\t\t\t\t\t\t\t:class=\"terminalPaymentFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_TERMINAL_PAYMENT')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tv-if=\"isTerminalViewModeSaveAllowed\"\n\t\t\t\t\t\t\t\t\t@click=\"sendTerminalPaymentForm($event)\"\n\t\t\t\t\t\t\t\t\t:class=\"terminalPaymentFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_SAVE')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"mode === ModeDictionary.delivery\">\n\t\t\t\t\t\t\t\t<template v-if=\"editable\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t@click=\"sendDeliveryForm($event)\"\n\t\t\t\t\t\t\t\t\t\t:class=\"deliveryFormSubmitButtonClass\"\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-success\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CREATE_SHIPMENT')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-link\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('SALESCENTER_CANCEL')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"this.order.errors.length > 0\" ref=\"errorBlock\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<div class=\"salescenter-app-pinner-anchor\" :class=\"{ 'salescenter-app-pinner-anchor-hidden': !isPanelVisible }\"></div>\n\t\t</div>\n\t`,\n};\n","import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tpages: [],\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetPages: (state) => () =>\n\t\t\t{\n\t\t\t\treturn state.pages;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetPages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.pages === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = payload.pages        ;\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovePage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages = state.pages.filter((page) => {\n\t\t\t\t\t\treturn !(\n\t\t\t\t\t\t\t(payload.page.id && payload.page.id > 0 && page.id === payload.page.id) ||\n\t\t\t\t\t\t\t(payload.page.landingId && payload.page.landingId > 0 && page.landingId === payload.page.landingId)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\taddPage: (state, payload) =>\n\t\t\t{\n\t\t\t\tif(typeof payload.page === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.pages.push(payload.page);\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}","import {VuexBuilderModel} from 'ui.vue.vuex';\nimport {rest as Rest} from 'rest.client';\n\nexport class DocumentSelectorModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'documentSelector';\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\taddDocument({commit, dispatch}, {document})\n\t\t\t{\n\t\t\t\tcommit('addDocument', {document});\n\t\t\t\tdispatch('setBoundDocumentId', {boundDocumentId: document.id});\n\t\t\t},\n\t\t\tsetBoundDocumentId({state, commit}, {boundDocumentId})\n\t\t\t{\n\t\t\t\tif (state.paymentId > 0)\n\t\t\t\t{\n\t\t\t\t\tRest.callMethod('crm.documentgenerator.document.bindToPayment', {\n\t\t\t\t\t\tid: boundDocumentId,\n\t\t\t\t\t\tpaymentId: state.paymentId,\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\tconsole.error(response);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcommit('setBoundDocumentId', {boundDocumentId});\n\t\t\t\t}\n\t\t\t},\n\t\t\tloadTemplates({state, commit})\n\t\t\t{\n\t\t\t\tif (Number(state.entityTypeId) <= 0 || Number(state.entityId) <= 0)\n\t\t\t\t{\n\t\t\t\t\tcommit('setTemplates', {templates: []});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tRest.callMethod('crm.documentgenerator.template.listForItem', {\n\t\t\t\t\tentityTypeId: state.entityTypeId,\n\t\t\t\t\tentityId: state.entityId,\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response.answer.result.templates)\n\t\t\t\t\t{\n\t\t\t\t\t\tcommit('setTemplates', {templates: response.answer.result.templates});\n\t\t\t\t\t}\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tconsole.error(response);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tentityTypeId: null,\n\t\t\tentityId: null,\n\t\t\tpaymentId: null,\n\t\t\tdocuments: [],\n\t\t\ttemplates: [],\n\t\t\tboundDocumentId: null,\n\t\t\tselectedTemplateId: null,\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetTemplates: (state) => {\n\t\t\t\treturn state.templates;\n\t\t\t},\n\t\t\tgetDocuments: (state) => {\n\t\t\t\treturn state.documents;\n\t\t\t},\n\t\t\tgetBoundDocumentId: (state) => {\n\t\t\t\treturn state.boundDocumentId;\n\t\t\t},\n\t\t\tgetSelectedTemplateId: (state) => {\n\t\t\t\treturn state.selectedTemplateId;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tfillState: (state, payload) => {\n\t\t\t\tstate.entityTypeId = payload.entityTypeId;\n\t\t\t\tstate.entityId = payload.entityId;\n\t\t\t\tstate.paymentId = payload.paymentId;\n\t\t\t\tstate.documents = payload.documents;\n\t\t\t\tstate.templates = payload.templates;\n\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t},\n\t\t\tsetTemplates: (state, payload) => {\n\t\t\t\tif(typeof payload.templates === 'object')\n\t\t\t\t{\n\t\t\t\t\tstate.templates = payload.templates;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetBoundDocumentId: (state, payload) => {\n\t\t\t\tif(typeof payload.boundDocumentId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.boundDocumentId = payload.boundDocumentId;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetSelectedTemplateId: (state, payload) => {\n\t\t\t\tif(typeof payload.selectedTemplateId === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.selectedTemplateId = payload.selectedTemplateId;\n\t\t\t\t\tstate.boundDocumentId = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\taddDocument: (state, payload) => {\n\t\t\t\tif(typeof payload.document === 'object')\n\t\t\t\t{\n\t\t\t\t\tconst newDocument = payload.document;\n\t\t\t\t\tif (!newDocument.id)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst documents = state.documents || [];\n\t\t\t\t\tlet isUpdated = false;\n\t\t\t\t\tfor (const index in documents)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (documents[index].id === newDocument.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocuments[index] = newDocument;\n\t\t\t\t\t\t\tisUpdated = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!isUpdated)\n\t\t\t\t\t{\n\t\t\t\t\t\tdocuments.unshift(newDocument);\n\t\t\t\t\t}\n\t\t\t\t\tstate.documents = documents;\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}\n","import {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class OrderCreationModel extends VuexBuilderModel\n{\n\t/**\n\t * @inheritDoc\n\t */\n\tgetName()\n\t{\n\t\treturn 'orderCreation';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcurrency: '',\n\t\t\tprocessingId: null,\n\t\t\tbasket: [],\n\t\t\tbasketVersion: 0,\n\t\t\tpropertyValues: [],\n\t\t\tdeliveryExtraServicesValues: [],\n\t\t\texpectedDelivery: null,\n\t\t\tdeliveryResponsibleId: null,\n\t\t\tpersonTypeId: null,\n\t\t\tdeliveryId: null,\n\t\t\tdelivery: null,\n\t\t\tisEnabledSubmit: false,\n\t\t\tisSenderSelected: true,\n\t\t\tisCompilationMode: false,\n\t\t\terrors: [],\n\t\t\ttotal: {\n\t\t\t\tsum: null,\n\t\t\t\tdiscount: null,\n\t\t\t\tresult: null,\n\t\t\t},\n\t\t\t/**\n\t\t\t * ID of selected pay systems available for order payment\n\t\t\t */\n\t\t\tavailablePaySystemsIds: [],\n\t\t\tpaymentResponsibleId: null,\n\t\t\tisMobileInstalledForResponsible: false,\n\t\t\tresponsiblePhoneNumbers: [],\n\t\t\tmessageData: {},\n\t\t\thasAvailableProducts: false,\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tresetBasket ({ commit })\n\t\t\t{\n\t\t\t\tcommit('clearBasket');\n\t\t\t},\n\t\t\tsetCurrency: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tconst currency = payload || '';\n\t\t\t\tcommit('setCurrency', currency);\n\t\t\t},\n\t\t\tsetDeliveryId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryId', payload);\n\t\t\t},\n\t\t\tsetDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDelivery', payload);\n\t\t\t},\n\t\t\tsetPropertyValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPropertyValues', payload);\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryExtraServicesValues', payload);\n\t\t\t},\n\t\t\tsetExpectedDelivery: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setExpectedDelivery', payload);\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setDeliveryResponsibleId', payload);\n\t\t\t},\n\t\t\tsetPaymentResponsibleId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPaymentResponsibleId', payload);\n\t\t\t},\n\t\t\tsetMobileInstalledForResponsible: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setMobileInstalledForResponsible', payload);\n\t\t\t},\n\t\t\tsetResponsiblePhoneNumbers: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setResponsiblePhoneNumbers', payload);\n\t\t\t},\n\t\t\tsetPersonTypeId: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setPersonTypeId', payload);\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setAvailablePaySystemsIds', payload);\n\t\t\t},\n\t\t\tsetMessageData: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setMessageData', payload);\n\t\t\t},\n\t\t\tsetHasAvailableProducts: ({ commit }, payload) =>\n\t\t\t{\n\t\t\t\tcommit('setHasAvailableProducts', payload);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetBasket: state => index =>\n\t\t\t{\n\t\t\t\treturn state.basket;\n\t\t\t},\n\t\t\tisAllowedSubmit: state =>\n\t\t\t{\n\t\t\t\treturn state.isEnabledSubmit && state.isSenderSelected;\n\t\t\t},\n\t\t\tisSenderSelected: state =>\n\t\t\t{\n\t\t\t\treturn state.isSenderSelected;\n\t\t\t},\n\t\t\tisCompilationMode: state =>\n\t\t\t{\n\t\t\t\treturn state.isCompilationMode;\n\t\t\t},\n\t\t\tgetTotal: state =>\n\t\t\t{\n\t\t\t\treturn state.total;\n\t\t\t},\n\t\t\tgetDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.delivery;\n\t\t\t},\n\t\t\tgetDeliveryId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryId;\n\t\t\t},\n\t\t\tgetPropertyValues: state =>\n\t\t\t{\n\t\t\t\treturn state.propertyValues;\n\t\t\t},\n\t\t\tgetDeliveryExtraServicesValues: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tgetExpectedDelivery: state =>\n\t\t\t{\n\t\t\t\treturn state.expectedDelivery;\n\t\t\t},\n\t\t\tgetDeliveryResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.deliveryResponsibleId;\n\t\t\t},\n\t\t\tgetPaymentResponsibleId: state =>\n\t\t\t{\n\t\t\t\treturn state.paymentResponsibleId;\n\t\t\t},\n\t\t\tisMobileInstalledForResponsible: state =>\n\t\t\t{\n\t\t\t\treturn state.isMobileInstalledForResponsible;\n\t\t\t},\n\t\t\tgetResponsiblePhoneNumbers: state =>\n\t\t\t{\n\t\t\t\treturn state.responsiblePhoneNumbers;\n\t\t\t},\n\t\t\tgetPersonTypeId: state =>\n\t\t\t{\n\t\t\t\treturn state.personTypeId;\n\t\t\t},\n\t\t\tgetAvailablePaySystemsIds: state =>\n\t\t\t{\n\t\t\t\treturn state.availablePaySystemsIds;\n\t\t\t},\n\t\t\tgetMessageData: state =>\n\t\t\t{\n\t\t\t\treturn state.messageData;\n\t\t\t},\n\t\t\tgetHasAvailableProducts: state =>\n\t\t\t{\n\t\t\t\treturn state.hasAvailableProducts;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = payload;\n\t\t\t},\n\t\t\tsetTotal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.total = Object.assign(state.total, payload);\n\t\t\t},\n\t\t\tclearBasket: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.basket = [];\n\t\t\t\tstate.basketVersion++ ;\n\t\t\t},\n\t\t\tsetErrors: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.errors = payload;\n\t\t\t},\n\t\t\tsetDeliveryId: (state, deliveryId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryId = deliveryId;\n\t\t\t},\n\t\t\tsetDelivery: (state, delivery) =>\n\t\t\t{\n\t\t\t\tstate.delivery = delivery;\n\t\t\t},\n\t\t\tsetPropertyValues: (state, propertyValues) =>\n\t\t\t{\n\t\t\t\tstate.propertyValues = propertyValues;\n\t\t\t},\n\t\t\tsetDeliveryExtraServicesValues: (state, deliveryExtraServicesValues) =>\n\t\t\t{\n\t\t\t\tstate.deliveryExtraServicesValues = deliveryExtraServicesValues;\n\t\t\t},\n\t\t\tsetExpectedDelivery: (state, expectedDelivery) =>\n\t\t\t{\n\t\t\t\tstate.expectedDelivery = expectedDelivery;\n\t\t\t},\n\t\t\tsetDeliveryResponsibleId: (state, deliveryResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.deliveryResponsibleId = deliveryResponsibleId;\n\t\t\t},\n\t\t\tsetPaymentResponsibleId: (state, paymentResponsibleId) =>\n\t\t\t{\n\t\t\t\tstate.paymentResponsibleId = paymentResponsibleId;\n\t\t\t},\n\t\t\tsetMobileInstalledForResponsible: (state, isMobileInstalledForResponsible) =>\n\t\t\t{\n\t\t\t\tstate.isMobileInstalledForResponsible = isMobileInstalledForResponsible;\n\t\t\t},\n\t\t\tsetResponsiblePhoneNumbers: (state, responsiblePhoneNumbers) =>\n\t\t\t{\n\t\t\t\tstate.responsiblePhoneNumbers = responsiblePhoneNumbers;\n\t\t\t},\n\t\t\tclearErrors: (state) =>\n\t\t\t{\n\t\t\t\tstate.errors = [];\n\t\t\t},\n\t\t\tsetProcessingId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.processingId = payload;\n\t\t\t},\n\t\t\tsetCurrency: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.currency = payload;\n\t\t\t},\n\t\t\tsetPersonTypeId: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personTypeId = payload;\n\t\t\t},\n\t\t\tsetAvailablePaySystemsIds: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.availablePaySystemsIds = payload;\n\t\t\t},\n\t\t\tsetIsSenderSelected: (state, isSelected) =>\n\t\t\t{\n\t\t\t\tstate.isSenderSelected = isSelected;\n\t\t\t},\n\t\t\tenableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = true;\n\t\t\t},\n\t\t\tdisableSubmit: (state) =>\n\t\t\t{\n\t\t\t\tstate.isEnabledSubmit = false;\n\t\t\t},\n\t\t\tenableCompilationMode: (state) =>\n\t\t\t{\n\t\t\t\tstate.isCompilationMode = true;\n\t\t\t},\n\t\t\tdisableCompilationMode: (state) =>\n\t\t\t{\n\t\t\t\tstate.isCompilationMode = false;\n\t\t\t},\n\t\t\tsetMessageData: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.messageData = { ...state.messageData, ...payload };\n\t\t\t},\n\t\t\tsetHasAvailableProducts: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.hasAvailableProducts = payload;\n\t\t\t},\n\t\t}\n\t}\n}\n","import { Loc, Tag, Text, Event, ajax as Ajax } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { Button, ButtonIcon, ButtonState } from 'ui.buttons';\nimport { App } from '../../app';\n\ntype MobileAppInstallPopupOptions = {\n\tsendersConfig: Array,\n\tphoneNumbers: Array,\n\tuserId: number,\n\troot: App,\n}\n\nclass MobileAppInstallPopup\n{\n\tconstructor(options: MobileAppInstallPopupOptions)\n\t{\n\t\tthis.initSenders(options.sendersConfig);\n\t\tthis.phoneNumbers = options.phoneNumbers;\n\t\tthis.userId = options.userId;\n\t\tthis.root = options.root;\n\n\t\tthis.selectedPhoneNumber = this.phoneNumbers?.[0] ?? null;\n\t\tthis.selectedSender = this.senders?.[0] ?? null;\n\n\t\t/** @type Popup  */\n\t\tthis.mainPopup = null;\n\t\t/** @type Button */\n\t\tthis.sendButton = null;\n\t\tthis.sendersMenu = null;\n\t\tthis.phoneMenu = null;\n\t}\n\n\tinitSenders(sendersData)\n\t{\n\t\tthis.sendersConfig = sendersData.find((item) => item.code === 'sms_provider');\n\t\tthis.senders = this.sendersConfig?.smsSenders;\n\t}\n\n\trender()\n\t{\n\t\tconst popupContent = this.getPopupContent();\n\n\t\tconst linkButton = new Button({\n\t\t\tid: 'copy-install-link',\n\t\t\tcolor: Button.Color.LINK,\n\t\t\tround: true,\n\t\t\ticon: ButtonIcon.COPY,\n\t\t\ttext: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_BTN_LINK'),\n\t\t});\n\n\t\tthis.sendButton = new Button({\n\t\t\tstate: (this.selectedPhoneNumber && this.selectedSender) ? null : ButtonState.DISABLED,\n\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\tround: true,\n\t\t\ttext: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_BTN_SEND'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.sendButton.setClocking();\n\t\t\t\tthis.sendSms();\n\t\t\t},\n\t\t});\n\n\t\tthis.mainPopup = new Popup({\n\t\t\tclassName: 'salescenter-popup-mobile',\n\t\t\toverlay: true,\n\t\t\tcontent: popupContent,\n\t\t\tcloseIcon: true,\n\t\t\tmaxWidth: 666,\n\t\t\tbuttons: [\n\t\t\t\tthis.sendButton,\n\t\t\t\tlinkButton,\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.root.closeApplication();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis.mainPopup.show();\n\n\t\tthis.bindCopyLink(linkButton);\n\n\t\tthis.bindSelectors();\n\t}\n\n\tsendSms()\n\t{\n\t\tAjax.runAction('salescenter.terminalResponsible.sendLinkToMobileApp', {\n\t\t\tdata: {\n\t\t\t\tuserId: this.userId,\n\t\t\t\tphone: this.selectedPhoneNumber,\n\t\t\t\tsenderId: this.selectedSender.id,\n\t\t\t\tentity: {\n\t\t\t\t\tentityTypeId: this.root.ownerTypeId,\n\t\t\t\t\tentityId: this.root.ownerId,\n\t\t\t\t},\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.mainPopup.close();\n\t\t\tthis.root.closeApplication();\n\t\t});\n\t}\n\n\tbindCopyLink(linkButton)\n\t{\n\t\tBX.clipboard.bindCopyClick(linkButton.getContainer(), {\n\t\t\ttext: this.root.options.mobileAppLink,\n\t\t});\n\t}\n\n\tbindSelectors()\n\t{\n\t\tthis.bindSendersSelector();\n\t\tthis.bindPhoneSelector();\n\t}\n\n\tbindSendersSelector()\n\t{\n\t\tconst sendersSelector = document.getElementById('senders-selector');\n\n\t\tif (this.selectedSender)\n\t\t{\n\t\t\tEvent.bind(sendersSelector, 'click', () => {\n\t\t\t\tconst menuItems = [];\n\t\t\t\tthis.senders.forEach((sender) => {\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: Text.encode(sender.name),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.selectedSender = sender;\n\t\t\t\t\t\t\tsendersSelector.firstChild.innerText = Text.encode(this.selectedSender.name);\n\t\t\t\t\t\t\tthis.sendersMenu?.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tBX.PopupMenu.show(\n\t\t\t\t\t'sender-menu',\n\t\t\t\t\tsendersSelector,\n\t\t\t\t\tmenuItems,\n\t\t\t\t\t{\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t\toffsetLeft: 36,\n\t\t\t\t\t\tangle: { position: 'top', offset: 0 },\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tthis.sendersMenu = BX.PopupMenu.getCurrentMenu();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(sendersSelector, 'click', () => {\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\tthis.sendersConfig.connectUrl,\n\t\t\t\t\t{\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\n\tbindPhoneSelector()\n\t{\n\t\tconst phoneSelector = document.getElementById('phone-selector');\n\n\t\tif (this.selectedPhoneNumber)\n\t\t{\n\t\t\tEvent.bind(phoneSelector, 'click', () => {\n\t\t\t\tconst menuItems = [];\n\t\t\t\tthis.phoneNumbers.forEach((phoneNumber) => {\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: Text.encode(phoneNumber),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.selectedPhoneNumber = phoneNumber;\n\t\t\t\t\t\t\tphoneSelector.firstChild.innerText = Text.encode(this.selectedPhoneNumber);\n\t\t\t\t\t\t\tthis.phoneMenu?.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tBX.PopupMenu.show(\n\t\t\t\t\t'phone-menu',\n\t\t\t\t\tphoneSelector,\n\t\t\t\t\tmenuItems,\n\t\t\t\t\t{\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t\toffsetLeft: 36,\n\t\t\t\t\t\tangle: { position: 'top', offset: 0 },\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tthis.phoneMenu = BX.PopupMenu.getCurrentMenu();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(phoneSelector, 'click', () => {\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t`/company/personal/user/${this.userId}/`,\n\t\t\t\t\t{\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\n\trefresh()\n\t{\n\t\tAjax.runAction('salescenter.terminalResponsible.refreshDataForSendingLink', {\n\t\t\tdata: {\n\t\t\t\tuserId: this.userId,\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.initSenders(result.data.senders);\n\t\t\tthis.phoneNumbers = result.data.phones;\n\n\t\t\tthis.selectedPhoneNumber = this.phoneNumbers?.[0] ?? null;\n\t\t\tthis.selectedSender = this.senders?.[0] ?? null;\n\n\t\t\tthis.updateSendButtonState();\n\t\t\tthis.updateContent();\n\t\t});\n\t}\n\n\tupdateSendButtonState()\n\t{\n\t\tthis.sendButton.setDisabled(!Boolean(this.selectedPhoneNumber && this.selectedSender));\n\t}\n\n\tupdateContent()\n\t{\n\t\tthis.mainPopup.setContent(this.getPopupContent());\n\t\tthis.bindSelectors();\n\t}\n\n\tgetPopupContent()\n\t{\n\t\t// all for the sake of localization\n\t\tlet phoneAndServiceContent = '';\n\t\tif (this.selectedSender)\n\t\t{\n\t\t\tphoneAndServiceContent = Loc.getMessage(\n\t\t\t\t'SALESCENTER_TERMINAL_MOBILE_POPUP_SENDER_AND_PHONE',\n\t\t\t\t{\n\t\t\t\t\t'[main]': '<div class=\"salescenter-popup-mobile__service\">',\n\t\t\t\t\t'[/main]': '</div>',\n\t\t\t\t\t'[number]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-name\">',\n\t\t\t\t\t'#NUMBER#': `\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-inline\" id=\"phone-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-value\">\n\t\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\tthis.selectedPhoneNumber\n\t\t\t\t\t\t\t\t? Text.encode(this.selectedPhoneNumber)\n\t\t\t\t\t\t\t\t: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_ADD_PHONE')\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[/number]': `\n\t\t\t\t\t\t\t${this.selectedPhoneNumber ? '<div class=\"ui-icon-set --chevron-down\"></div>' : ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[service]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-name\">',\n\t\t\t\t\t'#SERVICE#': `\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-inline\" id=\"senders-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-value\">${Text.encode(this.selectedSender.name)}</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[/service]': `\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --chevron-down\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tphoneAndServiceContent = Loc.getMessage(\n\t\t\t\t'SALESCENTER_TERMINAL_MOBILE_POPUP_SENDER_AND_PHONE_NO_SENDER',\n\t\t\t\t{\n\t\t\t\t\t'[main]': '<div class=\"salescenter-popup-mobile__service\">',\n\t\t\t\t\t'[/main]': '</div>',\n\t\t\t\t\t'[number]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-name\">',\n\t\t\t\t\t'#NUMBER#': `\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-inline\" id=\"phone-selector\">\n\t\t\t\t\t\t\t<div class=\"salescenter-popup-mobile__service-value\">\n\t\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\t\tthis.selectedPhoneNumber\n\t\t\t\t\t\t\t\t\t\t? Text.encode(this.selectedPhoneNumber)\n\t\t\t\t\t\t\t\t\t\t: Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_ADD_PHONE')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[/number]': `\n\t\t\t\t\t\t\t${this.selectedPhoneNumber ? '<div class=\"ui-icon-set --chevron-down\"></div>' : ''}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\t'[service]': '<div class=\"salescenter-popup-mobile__service-box\"><div class=\"salescenter-popup-mobile__service-inline\" id=\"senders-selector\"><div class=\"salescenter-popup-mobile__service-value\">',\n\t\t\t\t\t'[/service]': `\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --chevron-down\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"salescenter-popup-mobile__wrap\">\n\t\t\t\t<div class=\"salescenter-popup-mobile__icon-box\">\n\t\t\t\t\t<div class=\"salescenter-popup-mobile__icon\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"salescenter-popup-mobile__content\">\n\t\t\t\t\t<div class=\"salescenter-popup-mobile__title\">${Loc.getMessage('SALESCENTER_TERMINAL_MOBILE_POPUP_TITLE')}</div>\n\t\t\t\t\t${phoneAndServiceContent}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n\nexport { MobileAppInstallPopup };\n","import { ajax as Ajax, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Loader } from 'main.loader';\nimport { MenuManager, Popup } from 'main.popup';\nimport { rest as Rest } from 'rest.client';\nimport { Manager } from 'salescenter.manager';\nimport { Button } from 'ui.buttons';\nimport { PhoneVerify } from 'bitrix24.phoneverify';\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport 'ui.notification';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { Vue } from 'ui.vue';\nimport { VuexBuilder } from 'ui.vue.vuex';\nimport Chat from './chat';\nimport { ContextDictionary } from './const/context-dictionary';\nimport './css/component.css';\nimport Deal from './deal';\nimport { ApplicationModel } from './models/application';\nimport { Backend } from 'landing.backend';\nimport { PageObject } from 'landing.pageobject';\nimport { DocumentSelectorModel } from './models/document-selector';\nimport { OrderCreationModel } from './models/ordercreation';\nimport 'ui.icon-set.actions';\nimport { MobileAppInstallPopup } from './components/deal-terminal-payment/mobile-app-install-popup';\nimport { Builder, Dictionary } from 'crm.integration.analytics';\nimport { sendData } from 'ui.analytics';\n\n\nconst instances = new Map();\n\nexport class App\n{\n\tstatic getByDialogId(dialogId: string): ?App\n\t{\n\t\treturn instances.get(dialogId) || null;\n\t}\n\n\tconstructor(options = {\n\t\tdialogId: null,\n\t\tsessionId: null,\n\t\tlineId: null,\n\t\torderAddPullTag: null,\n\t\tlandingPublicationPullTag: null,\n\t\tlandingUnPublicationPullTag: null,\n\t\tisFrame: true,\n\t\tisOrderPublicUrlAvailable: false,\n\t\tisCatalogAvailable: false,\n\t\tisOrderPublicUrlExists: false,\n\t\tisWithOrdersMode: true,\n\t\tcompilation: null,\n\t\tdocumentSelector: DocumentSelectorParams|null,\n\t})\n\t{\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.dialogId = options.dialogId;\n\t\tthis.sessionId = parseInt(options.sessionId);\n\t\tthis.lineId = parseInt(options.lineId);\n\t\tthis.orderAddPullTag = options.orderAddPullTag;\n\t\tthis.landingPublicationPullTag = options.landingPublicationPullTag;\n\t\tthis.landingUnPublicationPullTag = options.landingUnPublicationPullTag;\n\t\tthis.paySystemList = options.paySystemList;\n\t\tthis.cashboxList = options.cashboxList;\n\t\tthis.options = options;\n\t\tthis.isProgress = false;\n\t\tthis.fillPagesTimeout = false;\n\t\tthis.disableSendButton = false;\n\t\tthis.context = '';\n\t\tthis.fillPagesQueue = [];\n\t\tthis.ownerTypeId = '';\n\t\tthis.ownerId = '';\n\t\tthis.orderId = parseInt(options.orderId);\n\t\tthis.stageOnOrderPaid = null;\n\t\tthis.stageOnDeliveryFinished = null;\n\t\tthis.sendingMethod = '';\n\t\tthis.sendingMethodDesc = {};\n\t\tthis.orderPublicUrl = '';\n\t\tthis.fileControl = options.fileControl;\n\t\tthis.currencyCode = options.currencyCode;\n\t\tthis.compilation = null;\n\t\tthis.newCompilationId = null;\n\t\tthis.assignedById = options.assignedById;\n\t\tthis.isPhoneConfirmed = options.isPhoneConfirmed;\n\n\t\tif(Type.isString(options.stageOnOrderPaid))\n\t\t{\n\t\t\tthis.stageOnOrderPaid = options.stageOnOrderPaid;\n\t\t}\n\n\t\tif(Type.isString(options.stageOnDeliveryFinished))\n\t\t{\n\t\t\tthis.stageOnDeliveryFinished = options.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isFrame))\n\t\t{\n\t\t\tthis.isFrame = options.isFrame;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isFrame = true;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlAvailable))\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = options.isOrderPublicUrlAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isOrderPublicUrlExists))\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = options.isOrderPublicUrlExists;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isOrderPublicUrlExists = false;\n\t\t}\n\n\t\tif(Type.isString(options.orderPublicUrl))\n\t\t{\n\t\t\tthis.orderPublicUrl = options.orderPublicUrl;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isCatalogAvailable))\n\t\t{\n\t\t\tthis.isCatalogAvailable = options.isCatalogAvailable;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isCatalogAvailable = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isWithOrdersMode))\n\t\t{\n\t\t\tthis.isWithOrdersMode = options.isWithOrdersMode;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isWithOrdersMode = false;\n\t\t}\n\n\t\tif(Type.isBoolean(options.disableSendButton))\n\t\t{\n\t\t\tthis.disableSendButton = options.disableSendButton;\n\t\t}\n\n\t\tif(options.ownerTypeId)\n\t\t{\n\t\t\tthis.ownerTypeId = options.ownerTypeId;\n\t\t}\n\n\t\tif(options.ownerId)\n\t\t{\n\t\t\tthis.ownerId = options.ownerId;\n\t\t}\n\n\t\tif(Type.isString(options.context) && options.context.length > 0)\n\t\t{\n\t\t\tthis.context = options.context;\n\t\t}\n\t\telse if(this.sessionId && this.dialogId)\n\t\t{\n\t\t\tthis.context = ContextDictionary.imOpenlines;\n\t\t}\n\n\t\tif(Type.isBoolean(options.isPaymentsLimitReached))\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = options.isPaymentsLimitReached;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.isPaymentsLimitReached = false;\n\t\t}\n\n\t\tif(!Type.isUndefined(options.sendingMethod))\n\t\t{\n\t\t\tthis.sendingMethod = options.sendingMethod;\n\t\t}\n\t\tif(!Type.isUndefined(options.sendingMethodDesc))\n\t\t{\n\t\t\tthis.sendingMethodDesc = this.options.sendingMethodDesc;\n\t\t}\n\n\t\tif(Type.isObject(options.compilation))\n\t\t{\n\t\t\tthis.compilation = options.compilation;\n\t\t}\n\n\t\tthis.isPaymentCreationAvailable = (\n\t\t\t(this.sessionId > 0 && this.dialogId.length > 0) || (this.ownerTypeId && this.ownerId)\n\t\t);\n\t\tthis.connector = Type.isString(options.connector) ? options.connector : '';\n\n\t\tthis.isAllowedFacebookRegion = Type.isBoolean(options.isAllowedFacebookRegion) ? options.isAllowedFacebookRegion : false;\n\n\t\tif (Type.isPlainObject(options.documentSelector))\n\t\t{\n\t\t\tthis.documentSelector = options.documentSelector;\n\t\t\tthis.documentSelector.paymentId = this.options.paymentId;\n\t\t}\n\n\t\tEvent.ready(() =>\n\t\t{\n\t\t\tthis.pull = BX.PULL;\n\t\t\tthis.initPull();\n\t\t\tthis.isSiteExists = Manager.isSiteExists;\n\t\t});\n\n\t\tApp.initStore()\n\t\t\t.then((result) => this.initTemplate(result))\n\t\t\t.catch((error) => App.showError(error))\n\t\t;\n\n\t\tEventEmitter.subscribe(window.parent, 'onSendCompilationChatButtonClick', this.sendCompilation.bind(this));\n\n\t\tinstances.set(this.dialogId, this);\n\t}\n\n\tstatic initStore()\n\t{\n\t\tconst builder = new VuexBuilder();\n\n\t\treturn builder.addModel(ApplicationModel.create())\n\t\t\t.addModel(OrderCreationModel.create())\n\t\t\t.addModel(DocumentSelectorModel.create())\n\t\t\t.useNamespace(true)\n\t\t\t.build();\n\t}\n\n\tsendMessageAnalytic(): void\n\t{\n\t\tconst messageData = this.store.getters['orderCreation/getMessageData'];\n\t\tconst channelId = messageData?.channelId;\n\t\tif (!channelId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst eventData = Builder.Communication.Editor.SendEvent.createDefault(channelId)\n\t\t\t.setSection(Dictionary.SECTION_SALESCENTER_SLIDER)\n\t\t\t.buildData()\n\t\t;\n\n\t\tsendData(eventData);\n\t}\n\n\tinitPull()\n\t{\n\t\tif(this.pull)\n\t\t{\n\t\t\tif(Type.isString(this.orderAddPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.orderAddPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.sessionId) === this.sessionId && params.orderId > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tManager.showOrdersListAfterCreate(params.orderId);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(Type.isString(this.landingUnPublicationPullTag))\n\t\t\t{\n\t\t\t\tthis.pull.subscribe({\n\t\t\t\t\tmoduleId: 'salescenter',\n\t\t\t\t\tcommand: this.landingUnPublicationPullTag,\n\t\t\t\t\tcallback: (params) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif(parseInt(params.landingId) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillPages();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(params.hasOwnProperty('isOrderPublicUrlAvailable') && Type.isBoolean(params.isOrderPublicUrlAvailable))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.isOrderPublicUrlAvailable = params.isOrderPublicUrlAvailable;\n\t\t\t\t\t\t\tthis.isOrderPublicUrlExists = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitTemplate(result)\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tconst context = this;\n\t\t\tthis.store = result.store;\n\n\t\t\tthis.templateEngine = Vue.create({\n\t\t\t\tel: document.getElementById('salescenter-app-root'),\n\t\t\t\tcomponents: {\n\t\t\t\t\t'chat': Chat,\n\t\t\t\t\t'deal': Deal,\n\t\t\t\t},\n\t\t\t\ttemplate:\n\t\t\t\t\tthis.isPaymentMode()\n\t\t\t\t\t\t? `<deal :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t\t: `<chat :key=\"componentKey\" @on-reload=\"reload\"/>`\n\t\t\t\t\t,\n\t\t\t\tstore: this.store,\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$app = context;\n\t\t\t\t\tthis.$nodes = {\n\t\t\t\t\t\tfooter: document.getElementById('footer'),\n\t\t\t\t\t\tleftPanel: document.getElementById('left-panel'),\n\t\t\t\t\t\ttitle: document.getElementById('pagetitle'),\n\t\t\t\t\t\tpaymentsLimit: document.getElementById('salescenter-payment-limit-container'),\n\t\t\t\t\t\torderSelector: document.getElementById('salescenter-app-order-selector'),\n\t\t\t\t\t};\n\t\t\t\t\tthis.initOrderSelector();\n\t\t\t\t\tif (context.documentSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('documentSelector/fillState', context.documentSelector);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.$app.options.showCompilationModeSwitcher === 'N')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$store.commit('orderCreation/enableCompilationMode');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t\tmethods: {\n\t\t\t\t\treload(arParams)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$root.$app.getLoader().show(document.body);\n\n\t\t\t\t\t\tAjax.runComponentAction(\n\t\t\t\t\t\t\t'bitrix:salescenter.app',\n\t\t\t\t\t\t\t'getComponentResult',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tarParams\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).then(function(response) {\n\t\t\t\t\t\t\tif (response.data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.$root.$app.options = response.data;\n\t\t\t\t\t\t\t\tthis.$root.$app.orderId = this.$root.$app.options.orderId;\n\t\t\t\t\t\t\t\tthis.componentKey += 1;\n\n\t\t\t\t\t\t\t\tthis.$root.$app.getLoader().hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t},\n\t\t\t\t\tinitOrderSelector()\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tthis.$app.options.orderList.length < 2\n\t\t\t\t\t\t\t\t|| this.$app.options.templateMode !== 'create'\n\t\t\t\t\t\t\t\t|| !this.$app.options.orderId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst orderSelectorBtn = this.$nodes.orderSelector.querySelector('.salescenter-app-order-selector-text');\n\t\t\t\t\t\t\tif (!orderSelectorBtn)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\torderSelectorBtn.innerText = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM')\n\t\t\t\t\t\t\t\t.replace('#ORDER_ID#', this.$app.options.orderId);\n\n\t\t\t\t\t\t\torderSelectorBtn.setAttribute('data-hint', Loc.getMessage('SALESCENTER_ORDER_SELECTOR_TOOLTIP'));\n\n\t\t\t\t\t\t\tlet popupMenu;\n\t\t\t\t\t\t\tlet menuItems = [];\n\t\t\t\t\t\t\tthis.$app.options.orderList.map(orderId => {\n\t\t\t\t\t\t\t\tconst orderCaption = Loc.getMessage('SALESCENTER_ORDER_SELECTOR_ORDER_NUM').replace('#ORDER_ID#', orderId);\n\t\t\t\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\t\t\t\ttext: orderCaption,\n\t\t\t\t\t\t\t\t\tonclick: event => {\n\t\t\t\t\t\t\t\t\t\tpopupMenu.close();\n\t\t\t\t\t\t\t\t\t\torderSelectorBtn.innerText = orderCaption;\n\t\t\t\t\t\t\t\t\t\tthis.reload({\n\t\t\t\t\t\t\t\t\t\t\tcontext: this.$app.options.context,\n\t\t\t\t\t\t\t\t\t\t\torderId: orderId,\n\t\t\t\t\t\t\t\t\t\t\townerTypeId: this.$app.options.ownerTypeId,\n\t\t\t\t\t\t\t\t\t\t\townerId: this.$app.options.ownerId,\n\t\t\t\t\t\t\t\t\t\t\ttemplateMode: this.$app.options.templateMode,\n\t\t\t\t\t\t\t\t\t\t\tmode: this.$app.options.mode,\n\t\t\t\t\t\t\t\t\t\t\tinitialMode: this.$app.options.initialMode,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpopupMenu = MenuManager.create({\n\t\t\t\t\t\t\t\tid: 'deal-order-selector',\n\t\t\t\t\t\t\t\tbindElement: orderSelectorBtn,\n\t\t\t\t\t\t\t\titems: menuItems\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.classList.remove('is-hidden');\n\t\t\t\t\t\t\tthis.$nodes.orderSelector.addEventListener('click', e => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tpopupMenu.show();\n\t\t\t\t\t\t\t\tBX.UI.Hint.hide();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.UI.Hint.init(this.$nodes.orderSelector);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcomponentKey: 0,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tcloseApplication()\n\t{\n\t\tif(this.slider)\n\t\t{\n\t\t\tthis.slider.close();\n\t\t}\n\t}\n\n\tfillPages()\n\t{\n\t\treturn new Promise((resolve) =>\n\t\t{\n\t\t\tif(this.isProgress)\n\t\t\t{\n\t\t\t\tthis.fillPagesQueue.push(resolve);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(this.fillPagesTimeout)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.fillPagesTimeout);\n\t\t\t\t}\n\t\t\t\tthis.fillPagesTimeout = setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.startProgress();\n\t\t\t\t\tRest.callMethod('salescenter.page.list', {}).then((result) => {\n\t\t\t\t\t\tthis.store.commit('application/setPages', {pages: result.answer.result.pages});\n\t\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tthis.fillPagesQueue.forEach((item) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titem();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fillPagesQueue = [];\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showError(error)\n\t{\n\t\t// console.error(error);\n\t}\n\n\tgetLoader()\n\t{\n\t\tif(!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({size: 200, mode: 'custom'});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader()\n\t{\n\t\tif(this.templateEngine)\n\t\t{\n\t\t\tthis.getLoader().show(this.templateEngine.$el);\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.getLoader().hide();\n\t}\n\n\tstartProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = true;\n\t\tthis.templateEngine.$emit('on-start-progress');\n\t\tthis.showLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.add('ui-btn-wait');\n\t\t}\n\t}\n\n\tstopProgress(buttonEvent = null)\n\t{\n\t\tthis.isProgress = false;\n\t\tthis.templateEngine.$emit('on-stop-progress');\n\t\tthis.hideLoader();\n\t\tif (Type.isDomNode(buttonEvent))\n\t\t{\n\t\t\tbuttonEvent.classList.remove('ui-btn-wait');\n\t\t}\n\t}\n\n\thidePage(page)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet promise;\n\t\t\tif(page.landingId > 0)\n\t\t\t{\n\t\t\t\tpromise = Manager.hidePage(page);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpromise = Manager.deleteUrl(page);\n\t\t\t}\n\t\t\tpromise.then(() =>\n\t\t\t{\n\t\t\t\tthis.store.commit('application/removePage', {page});\n\t\t\t\tresolve();\n\t\t\t}).catch((result) =>\n\t\t\t{\n\t\t\t\tApp.showError(result.answer.error_description);\n\t\t\t\treject(result.answer.error_description);\n\t\t\t});\n\t\t});\n\t}\n\n\tsendPage(pageId)\n\t{\n\t\tif(this.isProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif(this.disableSendButton)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst pages = this.store.getters['application/getPages']();\n\t\tlet page;\n\t\tfor(let index in pages)\n\t\t{\n\t\t\tif(pages.hasOwnProperty(index) && pages[index].id === pageId)\n\t\t\t{\n\t\t\t\tpage = pages[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlet source = 'other';\n\t\tif(page.landingId > 0)\n\t\t{\n\t\t\tif(parseInt(page.siteId) === parseInt(Manager.connectedSiteId))\n\t\t\t{\n\t\t\t\tsource = 'landing_store_chat';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsource = 'landing_other';\n\t\t\t}\n\t\t}\n\t\tif(!this.dialogId)\n\t\t{\n\t\t\tthis.slider.data.set('action', 'sendPage');\n\t\t\tthis.slider.data.set('page', page);\n\t\t\tthis.slider.data.set('pageId', pageId);\n\t\t\tif(this.context === ContextDictionary.sms)\n\t\t\t{\n\t\t\t\tthis.startProgress();\n\t\t\t\tBX.Salescenter.Manager.addAnalyticAction({\n\t\t\t\t\tanalyticsLabel: 'salescenterSendSms',\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t\tsource: source,\n\t\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\t\tcode: page.code,\n\t\t\t\t}).then(() =>\n\t\t\t\t{\n\t\t\t\t\tthis.stopProgress();\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.startProgress();\n\n\t\tAjax.runAction('salescenter.page.send', {\n\t\t\tanalyticsLabel: 'salescenterSendChat',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tsource: source,\n\t\t\t\ttype: page.isWebform ? 'form' : 'info',\n\t\t\t\tconnector: this.connector,\n\t\t\t\tcode: page.code,\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tid: pageId,\n\t\t\t\toptions: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tsessionId: this.sessionId,\n\t\t\t\t},\n\t\t\t}\n\t\t}).then(() =>\n\t\t{\n\t\t\tthis.stopProgress();\n\t\t\tthis.closeApplication();\n\t\t}).catch((result) =>\n\t\t{\n\t\t\tApp.showError(result.errors.pop().message);\n\t\t\tthis.stopProgress();\n\t\t});\n\t}\n\n\tsendCompilation(buttonEvent = null, sendCompilationLinkToFacebook = false)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.isAllowedFacebookRegion)\n\t\t{\n\t\t\tsendCompilationLinkToFacebook = true;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet options = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\tconnector: this.connector,\n\t\t\tsessionId: this.sessionId,\n\t\t\tsendCompilationLinkToFacebook: sendCompilationLinkToFacebook,\n\t\t\tcompilationId: this.compilation ? this.compilation.ID : this.newCompilationId,\n\t\t\teditable: this.options.templateMode === 'create',\n\t\t\tmessageData: this.store.getters['orderCreation/getMessageData'],\n\t\t};\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\toptions.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\toptions.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tif (this.connector === 'facebook' && this.isAllowedFacebookRegion && !sendCompilationLinkToFacebook)\n\t\t{\n\t\t\tthis.sendCompilationToFacebook(buttonEvent, options)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.sendCompilationAjaxAction(buttonEvent, options);\n\t\t}\n\t}\n\n\tsendCompilationToFacebook(buttonEvent, options)\n\t{\n\t\tAjax.runComponentAction(\n\t\t\t'bitrix:salescenter.app',\n\t\t\t'getFacebookSettingsPath',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then((response) => {\n\t\t\tconst facebookSettingsPath = response.data;\n\t\t\tif (facebookSettingsPath)\n\t\t\t{\n\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\tthis.showFacebookCatalogConnectionPopup(buttonEvent, facebookSettingsPath)\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tAjax.runAction('salescenter.compilation.sendFacebookModerationWaitingNotification', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\toptions,\n\t\t\t\t\t},\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tthis.sendCompilationAjaxAction(buttonEvent, options);\n\t\t\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\t\t\tthis.closeApplication();\n\t\t\t\t\tthis.stopProgress(buttonEvent);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tpublishShop(): void\n\t{\n\t\tif (!this.isPhoneConfirmed)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.showLoader();\n\n\t\tBackend.getInstance().action('Site::publication', {\n\t\t\tid: Manager.connectedSiteId,\n\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.slider.reload();\n\t\t\t})\n\t\t\t.catch((data) => {\n\t\t\t\tthis.getLoader().hide();\n\n\t\t\t\tif (data.type === 'error' && !Type.isUndefined(data.result[0]))\n\t\t\t\t{\n\t\t\t\t\tconst errorCode = data.result[0].error;\n\n\t\t\t\t\tswitch (errorCode)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 'PUBLIC_SITE_REACHED': {\n\t\t\t\t\t\t\tManager.openLimitShopNumberInfoHelper();\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase 'PUBLIC_SITE_REACHED_FREE': {\n\t\t\t\t\t\t\tManager.openFreeTarifInfoHelper();\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase 'FREE_DOMAIN_IS_NOT_ALLOWED': {\n\t\t\t\t\t\t\tManager.openFreeDomenInfoHelper();\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase 'PHONE_NOT_CONFIRMED': {\n\t\t\t\t\t\t\tthis.showPhoneConfirmPopup();\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcase 'EMAIL_NOT_CONFIRMED': {\n\t\t\t\t\t\t\tthis.showEmailConfirmPopup();\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tMessageBox.alert(\n\t\t\t\t\t\t\t\tdata.result[0].error_description,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tconfirmPhoneNumber()\n\t{\n\t\tif (!BX.Type.isObject(PhoneVerify))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tPhoneVerify\n\t\t\t.getInstance()\n\t\t\t.setEntityType('landing_site')\n\t\t\t.setEntityId(Manager.connectedSiteId)\n\t\t\t.startVerify({\n\t\t\t\tmandatory: false,\n\t\t\t\tcallback: (verified) => {\n\t\t\t\t\tif (verified)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isPhoneConfirmed = true;\n\t\t\t\t\t\tEventEmitter.emit('BX.Salescenter.App::onPhoneConfirmed');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t;\n\t}\n\n\tshowPhoneConfirmPopup()\n\t{\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('SALESCENTER_PHONE_CONFIRMATION_POPUP_MESSAGE'),\n\t\t\tLoc.getMessage('SALESCENTER_PHONE_CONFIRMATION_POPUP_TITLE'),\n\t\t\t(messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t\tthis.confirmPhoneNumber();\n\t\t\t},\n\t\t\tLoc.getMessage('SALESCENTER_CONFIRMATION_POPUP_OK_CAPTION'),\n\t\t\t(messageBox) => messageBox.close(),\n\t\t\tLoc.getMessage('SALESCENTER_CONFIRMATION_POPUP_CANCEL_CAPTION'),\n\t\t);\n\t}\n\n\tshowEmailConfirmPopup()\n\t{\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('SALESCENTER_EMAIL_CONFIRMATION_POPUP_MESSAGE'),\n\t\t\tLoc.getMessage('SALESCENTER_EMAIL_CONFIRMATION_POPUP_TITLE'),\n\t\t\t(messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t\tManager.openConfirmEmailInfoHelper();\n\t\t\t},\n\t\t\tLoc.getMessage('SALESCENTER_CONFIRMATION_POPUP_OK_CAPTION'),\n\t\t\t(messageBox) => messageBox.close(),\n\t\t\tLoc.getMessage('SALESCENTER_CONFIRMATION_POPUP_CANCEL_CAPTION'),\n\t\t);\n\t}\n\n\tshowFacebookCatalogConnectionPopup(buttonEvent, facebookSettingsPath)\n\t{\n\t\tif (!this.facebookCatalogConnectionPopup)\n\t\t{\n\t\t\tthis.facebookCatalogConnectionPopup = new Popup({\n\t\t\t\tclassName: 'salescenter-app-catalog-facebook-connection-popup',\n\t\t\t\tcontent: this.getFacebookCatalogConnectionPopupContent(buttonEvent, facebookSettingsPath),\n\t\t\t\twidth: 500,\n\t\t\t\toverlay: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tpadding: 17,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tangle: false,\n\t\t\t\tcloseIcon: {\n\t\t\t\t\ttop: '5px',\n\t\t\t\t\tright: '5px',\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.facebookCatalogConnectionPopup.show();\n\t}\n\n\tgetFacebookCatalogConnectionPopupContent(buttonEvent, facebookSettingsPath)\n\t{\n\t\tconst setFacebookCatalogConnectionButton = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-primary\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_SET_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(setFacebookCatalogConnectionButton, 'click', this.setFacebookCatalogConnectionPopupHandler.bind(this, facebookSettingsPath));\n\n\t\tconst sendLinkToB24CompilationButton = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-light-border\">\n\t\t\t\t${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_SEND_B24_COMPILATION_LINK_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\t\tEvent.bind(sendLinkToB24CompilationButton, 'click', this.sendLinkToB24CompilationButtonPopupHandler.bind(this, buttonEvent));\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--container\">\n\t\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--title\">${Loc.getMessage('SALESCENTER_FACEBOOK_CATALOG_POPUP_TITLE_1')}</div>\n\t\t\t\t<div class=\"salescenter-app-catalog-facebook-connection-popup--button-container\">\n\t\t\t\t\t${setFacebookCatalogConnectionButton}\n\t\t\t\t\t${sendLinkToB24CompilationButton}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tsetFacebookCatalogConnectionPopupHandler(facebookSettingsPath)\n\t{\n\t\tBX.SidePanel.Instance.open(facebookSettingsPath);\n\t\tthis.facebookCatalogConnectionPopup.close();\n\t}\n\n\tsendLinkToB24CompilationButtonPopupHandler(buttonEvent)\n\t{\n\t\tthis.facebookCatalogConnectionPopup.close();\n\t\tthis.sendCompilation(buttonEvent, true);\n\t}\n\n\tsendCompilationAjaxAction(buttonEvent, options)\n\t{\n\t\tconst basketItems = this.store.getters['orderCreation/getBasket']();\n\t\tconst productIds = basketItems.map((basketItem) => {\n\t\t\treturn basketItem.skuId;\n\t\t});\n\t\tAjax.runAction('salescenter.compilation.sendCompilation', {\n\t\t\tdata: {\n\t\t\t\tproductIds,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateCompilation',\n\t\t}).then((result) => {\n\t\t\tthis.sendMessageAnalytic();\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data && result.data.compilation)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendCompilation');\n\t\t\t\tthis.slider.data.set('compilation', result.data.compilation);\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:oncompilationcreated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendShipment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tlet data = {\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\torderId: this.orderId,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t};\n\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tAjax.runAction('salescenter.order.createShipment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateShipment',\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\n\t\t\tif (result.data)\n\t\t\t{\n\t\t\t\tif (result.data.order)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('order', result.data.order);\n\t\t\t\t}\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onshipmentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\n\tsendPayment(buttonEvent, skipPublicMessage = 'n')\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst data = {\n\t\t\tdialogId: this.dialogId,\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tsessionId: this.sessionId,\n\t\t\tlineId: this.lineId,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\torderId: this.orderId,\n\t\t\townerId: this.ownerId,\n\t\t\tmode: this.options.mode,\n\t\t\tskipPublicMessage,\n\t\t\tdeliveryId: this.store.getters['orderCreation/getDeliveryId'],\n\t\t\tdeliveryPrice: this.store.getters['orderCreation/getDelivery'],\n\t\t\texpectedDeliveryPrice: this.store.getters['orderCreation/getExpectedDelivery'],\n\t\t\tdeliveryResponsibleId: this.store.getters['orderCreation/getDeliveryResponsibleId'],\n\t\t\tpersonTypeId: this.store.getters['orderCreation/getPersonTypeId'],\n\t\t\tshipmentPropValues: this.store.getters['orderCreation/getPropertyValues'],\n\t\t\tdeliveryExtraServicesValues: this.store.getters['orderCreation/getDeliveryExtraServicesValues'],\n\t\t\tavailablePaySystemsIds: this.store.getters['orderCreation/getAvailablePaySystemsIds'],\n\t\t\tconnector: this.connector,\n\t\t\tcontext: this.context,\n\t\t\tcurrency: this.currencyCode,\n\t\t\tassignedById: this.assignedById,\n\t\t\tmessageData: this.store.getters['orderCreation/getMessageData'],\n\t\t};\n\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\tdata.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\tdata.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\tdata.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\t\tif (this.stageOnDeliveryFinished !== null)\n\t\t{\n\t\t\tdata.stageOnDeliveryFinished = this.stageOnDeliveryFinished;\n\t\t}\n\n\t\tAjax.runAction('salescenter.order.createPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: (this.context === ContextDictionary.deal) ? 'salescenterCreatePaymentSms' : 'salescenterCreatePayment',\n\t\t\tgetParameters: {\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tcontext: this.context,\n\t\t\t\tconnector: this.connector,\n\t\t\t\tskipPublicMessage: skipPublicMessage,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.sendMessageAnalytic();\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tif (skipPublicMessage === 'y')\n\t\t\t{\n\t\t\t\tlet notify = {\n\t\t\t\t\tcontent: Loc.getMessage('SALESCENTER_ORDER_CREATE_NOTIFICATION').replace('#ORDER_ID#', result.data.order.number),\n\t\t\t\t};\n\t\t\t\tnotify.actions = [{\n\t\t\t\t\ttitle: Loc.getMessage('SALESCENTER_VIEW'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tManager.showOrderAdd(result.data.order.id);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}];\n\t\t\t\tBX.UI.Notification.Center.notify(notify);\n\t\t\t\tManager.showOrdersList({\n\t\t\t\t\torderId: result.data.order.id,\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\townerTypeId: this.ownerTypeId,\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\t\tif (result.data.deal)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t\t}\n\n\t\t\t\tif (result.data.entity)\n\t\t\t\t{\n\t\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t\t}\n\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentcreated');\n\t\t}).catch((data) =>\n\t\t{\n\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message)\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif(this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\tsendTerminalPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst data = {\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\torderId: this.orderId,\n\t\t\tpaymentResponsibleId: this.store.getters['orderCreation/getPaymentResponsibleId'],\n\t\t\tcontext: this.context,\n\t\t\tcurrency: this.currencyCode,\n\t\t\tassignedById: this.assignedById,\n\t\t};\n\n\t\tif (this.stageOnOrderPaid !== null)\n\t\t{\n\t\t\tdata.stageOnOrderPaid = this.stageOnOrderPaid;\n\t\t}\n\n\t\tconst isMobileInstalledForResponsible = this.store.getters['orderCreation/isMobileInstalledForResponsible'];\n\n\t\tAjax.runAction('salescenter.order.createTerminalPayment', {\n\t\t\tdata: {\n\t\t\t\tbasketItems: this.store.getters['orderCreation/getBasket'](),\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterCreateTerminalPayment',\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\tif (result.data.deal)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t}\n\n\t\t\tif (result.data.entity)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t}\n\n\t\t\tif (isMobileInstalledForResponsible)\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showMobileAppInstallLinkPopup();\n\t\t\t}\n\n\t\t\tthis.emitGlobalEvent('salescenter.app:onterminalpaymentcreated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message),\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif (this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\tshowMobileAppInstallLinkPopup()\n\t{\n\t\tconst responsiblePhoneNumbers = this.store.getters['orderCreation/getResponsiblePhoneNumbers'];\n\n\t\t(new MobileAppInstallPopup({\n\t\t\tsendersConfig: this.options.senders,\n\t\t\tphoneNumbers: responsiblePhoneNumbers,\n\t\t\tuserId: this.store.getters['orderCreation/getPaymentResponsibleId'],\n\t\t\troot: this,\n\t\t})).render();\n\t}\n\n\tupdateTerminalPayment(buttonEvent)\n\t{\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst data = {\n\t\t\tpaymentResponsibleId: this.store.getters['orderCreation/getPaymentResponsibleId'],\n\t\t};\n\n\t\tAjax.runAction('salescenter.order.updateTerminalPayment', {\n\t\t\tdata: {\n\t\t\t\tpaymentId: this.options.paymentId,\n\t\t\t\toptions: data,\n\t\t\t},\n\t\t\tanalyticsLabel: 'salescenterUpdateTerminalPayment',\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t},\n\t\t}).then((result) => {\n\t\t\tthis.store.dispatch('orderCreation/resetBasket');\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.slider.data.set('action', 'sendPayment');\n\t\t\tthis.slider.data.set('order', result.data.order);\n\n\t\t\tif (result.data.deal)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('deal', result.data.deal);\n\t\t\t}\n\n\t\t\tif (result.data.entity)\n\t\t\t{\n\t\t\t\tthis.slider.data.set('entity', result.data.entity);\n\t\t\t}\n\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onterminalpaymentupdated');\n\t\t}).catch((data) => {\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(error.message),\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\n\t\t\tif (this.needCloseApplication(data.errors))\n\t\t\t{\n\t\t\t\tthis.closeApplication();\n\t\t\t}\n\t\t});\n\t}\n\n\topenMobileAppPopup()\n\t{\n\t\tconst popupIconClass = this.options.currentLanguage === 'ru' ? 'salescenter-popup-qr__icon --ru' : 'salescenter-popup-qr__icon';\n\n\t\t// the mobile app popup goes here\n\t\tconst popupContent = Tag.render`\n\t\t\t<div class=\"salescenter-popup-qr__box\">\n\t\t\t\t<div class=\"salescenter-popup-qr__title\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_TITLE')}</div>\n\t\t\t\t<div class=\"salescenter-popup-qr__desc\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_DESC')}</div>\n\t\t\t\t<div class=\"salescenter-popup-qr__content\">\n\t\t\t\t\t<div class=\"salescenter-popup-qr__code\"></div>\n\t\t\t\t\t<ul class=\"salescenter-popup-qr__list\">\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_1')}</li>\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_2')}</li>\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_3')}</li>\n\t\t\t\t\t\t<li class=\"salescenter-popup-qr__list_item\">${Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_LIST_ITEM_4')}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<div class=\"salescenter-popup-qr__icon_box\">\n\t\t\t\t\t\t<div class=\"${popupIconClass}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\n\t\t`;\n\n\t\tconst mobilePopup = new Popup({\n\t\t\tclassName: 'salescenter-popup-qr__wrap',\n\t\t\tcontent: popupContent,\n\t\t\toverlay: true,\n\t\t\tcloseIcon: true,\n\t\t\tmaxWidth: 725,\n\t\t\tautoHide: true,\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_JS_POPUP_CLOSE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tmobilePopup.close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\tcolor: Button.Color.LINK,\n\t\t\t\t\ttext: Loc.getMessage('SALESCENTER_TERMINAL_QR_POPUP_BUTTON_ABOUT'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tManager.openHowTerminalWorks();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\tmobilePopup.show();\n\t\tthis.getQRCode();\n\t}\n\n\tgetQRCode()\n\t{\n\t\tconst qrNode = document.querySelector('.salescenter-popup-qr__code');\n\n\t\treturn new QRCode(qrNode, {\n\t\t\ttext: this.options.mobileAppLink,\n\t\t\twidth: 143,\n\t\t\theight: 143,\n\t\t});\n\t}\n\n\tneedCloseApplication(errors)\n\t{\n\t\tlet alwaysOpen = errors.filter(error => {\n\t\t\treturn error.code < 1 || error.code > 100\n\t\t}).length >= 1\n\n\t\treturn alwaysOpen === false\n\t}\n\n\tresendPayment(buttonEvent)\n\t{\n\t\tif (!this.isPaymentCreationAvailable)\n\t\t{\n\t\t\tthis.closeApplication();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.store.getters['orderCreation/isAllowedSubmit'] || this.isProgress)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.startProgress(buttonEvent);\n\n\t\tconst options = {\n\t\t\tsendingMethod: this.sendingMethod,\n\t\t\tsendingMethodDesc: this.sendingMethodDesc,\n\t\t\tstageOnOrderPaid: this.stageOnOrderPaid,\n\t\t\townerTypeId: this.ownerTypeId,\n\t\t\townerId: this.ownerId,\n\t\t\tmessageData: this.store.getters['orderCreation/getMessageData'],\n\t\t};\n\t\tif (this.documentSelector)\n\t\t{\n\t\t\toptions.boundDocumentId = this.store.getters['documentSelector/getBoundDocumentId'];\n\t\t\toptions.selectedTemplateId = this.store.getters['documentSelector/getSelectedTemplateId'];\n\t\t}\n\t\tAjax.runAction('salescenter.order.resendPayment', {\n\t\t\tdata: {\n\t\t\t\torderId: this.orderId,\n\t\t\t\tpaymentId: this.options.paymentId,\n\t\t\t\tshipmentId: this.options.shipmentId,\n\t\t\t\toptions,\n\t\t\t},\n\t\t\tgetParameters: {\n\t\t\t\tcontext: this.context,\n\t\t\t}\n\t\t}).then((result) =>\n\t\t{\n\t\t\tthis.sendMessageAnalytic();\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tthis.closeApplication();\n\t\t\tthis.emitGlobalEvent('salescenter.app:onpaymentresend');\n\t\t}).catch((data) =>\n\t\t{\n\t\t\tdata.errors.forEach((error) => {\n\t\t\t\talert(error.message);\n\t\t\t});\n\t\t\tthis.stopProgress(buttonEvent);\n\t\t\tApp.showError(data);\n\t\t});\n\t}\n\thideNoPaymentSystemsBanner()\n\t{\n\t\tconst userOptionName = this.options.orderCreationOption || false;\n\t\tconst userOptionKeyName = this.options.paySystemBannerOptionName || false;\n\t\tif (userOptionName && userOptionKeyName)\n\t\t{\n\t\t\tBX.userOptions.save('salescenter', userOptionName, userOptionKeyName, 'Y');\n\t\t}\n\t}\n\tgetOrdersCount()\n\t{\n\t\tif(this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActiveOrdersCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\tgetPaymentsCount()\n\t{\n\t\tif (this.sessionId > 0)\n\t\t{\n\t\t\treturn Rest.callMethod('salescenter.order.getActivePaymentsCount', {\n\t\t\t\tsessionId: this.sessionId\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {});\n\t\t}\n\t}\n\n\thasClientContactInfo()\n\t{\n\t\tif (this.options.sendingMethod === 'chat')\n\t\t{\n\t\t\treturn this.options.dialogId !== '';\n\t\t}\n\n\t\treturn this.options.contactPhone !== '';\n\t}\n\n\temitGlobalEvent(eventName, data)\n\t{\n\t\tEventEmitter.emit(eventName, data);\n\t\tBX.SidePanel.Instance.postMessage(this.slider, eventName, data);\n\t}\n\n\tisPaymentMode(): boolean\n\t{\n\t\treturn this.context === ContextDictionary.deal || this.context === ContextDictionary.smartInvoice || this.context === ContextDictionary.terminalList;\n\t}\n}\n\ndeclare type DocumentSelectorParams = {\n\tboundDocumentId: ?number,\n\tselectedTemplateId: ?number,\n\tdocuments: ?Document[],\n\ttemplates: ?Template[],\n\ttemplateAddUrl: ?string,\n\tprovider: ?string,\n\tvalue: ?number,\n};\n\nexport type Document = {\n\tid: number,\n\ttitle: string,\n\tdetailUrl: string,\n\tisWithStamps: boolean,\n}\n\nexport type Template = {\n\tid: number,\n\ttitle: string,\n\tdocumentCreationUrl: string,\n\tisWithStamps: boolean,\n}\n"],"names":["MixinTemplatesType","data","editable","created","$root","$on","value","TileCollectionMixins","components","Label","TileLabel","TileHintImg","TileLabelPlus","TileHintImgCaption","TileHintBackground","TileHintBackgroundCaption","methods","getCollectionTile","tiles","getCollectionTileByFilter","filter","map","Map","collection","hasOwnProperty","type","length","forEach","item","index","getType","set","hasTileOfferFromCollection","Tile","size","hasTileMoreFromCollection","getTileOfferFromCollection","result","inx","tile","getTileMoreFromCollection","getTileByIndex","openSlider","slider","AppSlider","openAppLocal","getOptionSlider","subscribe","EventTypes","AppSliderSliderClose","e","$emit","isControlTile","includes","showHint","event","popup","Hint","show","target","info","hideHint","hide","computed","width","Uninstalled","props","Array","required","mixins","template","Installed","StageMixin","statusClassMixin","status","Status","current","disabled","containerClassMixin","counterCheckedMixin","complete","onSliderClose","Cashbox","String","counter","Number","installed","Boolean","titleItems","initialCollapseState","Block","TileInstalled","TileUnInstalled","statusClass","title","Loc","getMessage","configForBlock","collapsible","checked","onItemHint","BX","Salescenter","Manager","openHowToConfigCashBox","saveCollapsedOption","option","ModeDictionary","Object","freeze","payment","delivery","paymentDelivery","terminalPayment","mounted","$app","options","templateMode","isCompilationMode","compilation","productForm","setEditable","formWrapper","$el","querySelector","appendChild","layout","refreshId","defaultCurrency","currencyCode","$store","dispatch","Type","isArray","basket","fields","push","commit","isObject","totals","ProductForm","currencySymbol","currency","iblockId","catalogIblockId","basePriceId","taxList","vatList","measures","showDiscountBlock","showProductDiscounts","showTaxBlock","showProductTaxes","totalResultLabel","mode","urlBuilderContext","urlProductBuilderContext","isCatalogPriceEditEnabled","isCatalogDiscountSetEnabled","fieldHints","hideUnselectedProperties","showCompilationModeSwitcher","compilationFormType","connector","isAllowedFacebookRegion","facebookFailProducts","FAIL_PRODUCTS","ownerId","ownerTypeId","dialogId","sessionId","isShortProductViewFormat","enableEmptyProductError","checkProductErrors","EventEmitter","Runtime","debounce","onBasketChange","onProductFormModeChange","onProductFormCompilationCreated","bind","watch","messageDataSenderCode","setShowCompilationModeSwitcher","state","orderCreation","messageData","senderCode","getData","newCompilationId","compilationId","FormMode","COMPILATION","COMPILATION_READ_ONLY","processRefreshRequest","preparedBasket","isStringFilled","innerId","selectorId","setData","total","changeCompilationProducts","isNeedDisableSubmit","requestId","Text","getRandom","Ajax","runAction","orderId","basketItems","then","prop","getObject","discount","sum","get","errors","getters","productIds","basketItem","skuId","ID","isFunction","hasErrors","filledProducts","module","productId","name","hintTitle","additionalContainerClasses","product","Product","openHowToSell","containerClasses","config","DeliverySelector","availableServices","onChange","payload","deliveryPrice","deliveryServiceId","relatedPropsValues","relatedServicesValues","estimatedDeliveryPrice","responsibleUser","id","onAddressFromChanged","refreshAvailableServices","onDeliveryServiceChanged","onSettingsChanged","ajax","order","deliveryId","shipmentPropValues","propertyValues","deliveryRelatedServiceValues","deliveryExtraServicesValues","deliveryResponsibleId","personTypeId","localize","Vue","getFilteredPhrases","sumTitle","productsPrice","deliveryFormatted","isDeliveryCalculated","Currency","currencyFormat","totalFormatted","excludedServiceIds","emptyDeliveryServiceId","actionData","Vuex","mapState","shipment","priceDelivery","basePriceDelivery","deliveryService","logo","parent","extraServices","requestProperties","canUserPerformCalls","getFormattedPrice","price","isPhoneRequestProperty","property","tags","makeCall","phoneNumber","isUndefined","window","top","phoneTo","open","hasParent","deliveryServiceLogo","deliveryServiceProfileLogo","paymentPrice","deliveryServiceName","deliveryServiceProfileName","isExtraServicesVisible","isRequestPropertiesVisible","priceDeliveryFormatted","productsPriceFormatted","paymentPriceFormatted","DeliveryVuex","isCollapsible","selectedDeliveryServiceName","ShipmentView","shipmentId","titleName","shipmentData","propValues","extraServicesValues","relatedPropsOptions","deliveryOrderPropOptions","responsibleId","assignedById","isViewTemplateMode","setTitleName","PaySystem","openHowToConfigDefaultPaySystem","ContextDictionary","deal","smartInvoice","chat","sms","imOpenlines","terminalList","MessageMixin","compilationMode","messageSenderEditor","textModes","sendingMethodDesc","text_modes","currentMessage","setMessageText","body","messageSenderAvailable","messageSenderData","messageSenderId","renderTo","replace","onMessageBodyChangeHandler","setTemplateError","templateError","setError","resetAlert","ChatMessage","manager","titleTemplate","editorTemplate","editorUrl","selectedMode","UserAvatar","MessageEditor","currentSenderCode","senders","pushedToUseBitrix24Notifications","smsSenderListComponentKey","editor","url","isMessageReadOnly","context","newMessageData","initMessageSenderEditor","Editor","render","initMessageData","getState","message","urlSettingsCompanyContacts","openBitrix24NotificationsHelp","Automation","stageOnOrderPaid","stageOnDeliveryFinished","items","isDeliveryStageVisible","paymentStages","shipmentStages","StageList","updatePaymentStage","newStageId","stage","selected","updateShipmentStage","initStages","stages","currentValue","values","AutomationStage","create","selectedStage","isPayment","find","isHideDeliveryStage","buttonLabel","buttonEnabled","showWhatClientSeesControl","isFacebookForm","buttonClass","showSubmitCompilationLinkToFacebookButton","showWhatClientSees","openWhatClientSee","submit","submitCompilationLinkToFacebook","TimeLine","timelineItems","Item","PaymentItem","CustomItem","Payment","isCustom","Custom","DocumentSelector","templateAddUrl","model","templates","documents","getDocumentTitle","currentDocument","getCurrentDocument","withStamps","isWithStamps","hasData","document","detailUrl","documentSelector","handleDocumentClick","openSelectorMenu","openTemplatesList","bindElement","MenuManager","prepareSelectorMenuItems","closeByEsc","cacheable","closeSelectorMenu","destroy","text","onclick","boundDocumentId","templateListItem","delimiter","selectedTemplateId","handleEditDocumentClick","getDocumentById","getStubDocumentByTemplate","getTemplateById","templateId","paymentId","Uri","addParam","documentCreationUrl","_paymentId","Send","entityResponsible","orderPublicUrl","paysystem","paySystemList","isSet","getTileCollection","getTitleItems","isPaySystemCollapsed","cashbox","automation","isHidden","parseInt","deliveryList","isInstalled","isDeliveryCollapsed","cashboxList","isCashboxCollapsed","isAutomationAvailable","entityStageList","isAutomationCollapsed","timeline","getTimelineCollection","isSendAllowed","hasStageTimeLine","hasStageAutomation","hasStageCashBox","submitButtonLabel","isShowDocumentSelector","initCounter","list","TimeLineItem","stageRefresh","runComponentAction","response","refreshTilesByType","UI","Notification","Center","notify","content","onSend","onSendCompilationLinkToFacebook","changeProvider","provider","userOptions","save","beforeUpdate","isFaded","createPinner","startFade","endFade","buttonsPanel","$refs","parentNode","Pinner","fixBottom","isFrame","fullWidth","anchorBottom","close","closeApplication","isOrderPublicUrlAvailable","wrapperClass","wrapperStyle","position","pos","offset","$nodes","footer","height","connect","loader","Loader","no_redirect","loadConfig","isSiteExists","isOrderPublicUrlExists","checkRecycle","openConnectedSite","publishConnectedSite","publishShop","confirmPhoneNumber","subscribeOnce","isOrderPageDeleted","isPhoneConfirmed","isVisible","openControlPanel","ComponentMixin","isShowPreview","isShowPayment","pageTitle","currentPageId","actions","frameCheckShortTimeout","frameCheckLongTimeout","isPagesOpen","isFormsOpen","showedPageIds","loadedPageIds","errorPageIds","lastAddedPages","ordersCount","paymentsCount","editedPageId","currentPageTitle","Start","NoPaymentSystemsBanner","StageBlocksList","updated","renderErrors","createLoader","fillPages","isWithOrdersMode","refreshOrdersCount","refreshPaymentsCount","openFirstPage","isPaymentsLimitReached","paymentsLimitStartNode","paymentsLimit","paymentsLimitNode","children","node","getActions","currentPage","SALESCENTER_RIGHT_ACTION_COPY_URL","copyUrl","landingId","SALESCENTER_RIGHT_ACTION_HIDE","hidePage","SALESCENTER_RIGHT_ACTION_DELETE","SALESCENTER_RIGHT_ACTION_ADD","getAddPageActions","isWebform","SALESCENTER_RIGHT_ACTION_ADD_SITE_B24","addSite","SALESCENTER_RIGHT_ACTION_ADD_CUSTOM","showAddUrlPopup","isPaymentCreationAvailable","showPaymentForm","pages","firstWebformPage","pageToOpen","page","onPageClick","setPageTitle","hideActionsPopup","isFrameDenied","startFrameCheckTimeout","onFrameError","showActionsPopup","PopupMenu","offsetLeft","offsetTop","showCompanyContacts","showAddPageActionPopup","menuId","offsetWidth","offsetHeight","angle","addSitePage","newPage","answer","editPage","editLandingPage","siteId","hideNoPaymentSystemsBanner","isPlainObject","addCustomPage","pageId","getPaymentItemTitle","SALESCENTER_LEFT_PAYMENT_ADD_2_MSGVER_1","SALESCENTER_LEFT_PAYMENT_AND_DELIVERY_MSGVER_1","SALESCENTER_DEFAULT_TITLE","showOrdersList","showPaymentsList","showOrderAdd","showCatalog","onFormsClick","openHelpDesk","openHowItWorks","isPageSelected","sendCompilationLinkToFacebook","send","skipPublicMessage","isAllowedSubmitButton","isShowStartInfo","sendCompilation","sendPayment","isActive","sendPage","innerText","clearTimeout","onFrameLoad","onSuccessfullyConnected","setTimeout","getFrameSource","setQueryParam","toString","getOrdersCount","getPaymentsCount","errorMessages","join","params","color","Alert","Color","DANGER","textCenter","util","htmlspecialchars","errorBlock","innerHTML","animated","alert","getContainer","editMenuItem","focus","saveMenuItem","oldName","addPage","analyticsLabel","application","sendButtonLabel","pagesSubmenuHeight","formsSubmenuHeight","isFrameError","isShowLoader","res","lastModified","modifiedAgo","SALESCENTER_MODIFIED","disableSendButton","isNoPaymentSystemsBannerVisible","showPaySystemSettingBanner","TYPE_PHONE","TYPE_SENDER","SmsMessage","initSenders","initCurrentSenderCode","initPushedToUseBitrix24Notifications","selectedSmsSender","phone","contactEditorUrl","Error","SenderList","MessageEdit","MessageView","MessageControl","contactPhone","showMessageSenderEditor","clientError","messageSenderError","hintClassModifier","currentSender","sender","code","bitrix24ConnectUrlError","SenderConfig","needConfigure","getConnectionErrorText","fixer","openSliderFreeMessages","connectUrl","fixText","getConnectionErrorFixText","BITRIX24","isAvailable","toUpperCase","isConnected","usageErrors","error","getFixer","handleErrorFix","fromId","senderId","entityId","entityTypeId","phoneId","initialize","onToChangeHandler","onFromChangeHandler","onChannelChangeHandler","openMessageSenderConnectionsSlider","Router","Instance","c_section","Dictionary","SECTION_SALESCENTER_SLIDER","reload","from","fromType","channel","backend","channelId","to","addressSource","address","onConfigureContactPhone","messageCode","fallback","fixUrl","events","onLoad","getSlider","sliderBx","getFrameWindow","addCustomEvent","loadExt","InfoHelper","Promise","resolve","handleOnSmsSenderSelected","handlePhoneErrorFix","hendleSmsErrorBlock","openBitrix24NotificationsWorks","sendAllowed","getTitleTemplate","groups","getTileGroupsCollection","isViewWithoutDelivery","sent","ret","group","fillTiles","changeContactPhone","editableMixin","ResponsibleSelector","selectedUser","responsible","isMobileInstalledForResponsible","contact","isCreateMode","contactInfo","encode","addEmployee","responsibleHeaderText","avatarStyle","photo","addEmployeeLink","getElementById","Event","openMobileAppPopup","selectorRoot","dialogOptions","entities","onResponsibleChanged","preselectedItems","undeselectedItems","tagSelector","TagSelector","multiple","deselectable","setDeselectable","updateTags","getId","isSubmitEnabled","userId","isMobileInstalled","phones","openHowTerminalWorks","formattedSum","CurrencyCore","element","Tag","getPriceControl","Amount","paymentResponsible","contactName","PAID","hasProducts","isPaymentByAmount","isPanelVisible","activeMenuItem","isLoading","EntityCreatePaymentStages","StageBlocksListShipment","TerminalStageBlocksList","form","showModeList","initialMode","onReload","sendPaymentDeliveryForm","isAllowedPaymentDeliverySubmitButton","showPhoneConfirmPopup","resendPayment","sendDeliveryForm","isAllowedDeliverySubmitButton","sendShipment","sendTerminalPaymentForm","isAllowedTerminalPaymentSubmitButton","updateTerminalPayment","sendTerminalPayment","specifyCompanyContacts","suggestScenario","openFeedbackPayOrderForm","howItWorks","openHowPaySmartInvoiceWorks","openHowPayDealWorks","openIntegrationWindow","openIntegrationRequestForm","freeMessages","fixed","classList","remove","pinnerAnchor","openTerminalToolDisabledSlider","loadExtension","openSalescanterToolDisabledSlider","ToolAvailabilityManager","openSalescenterToolDisabledSlider","isAllowedFreeMessagesButton","isOnlyDeliveryItemVisible","hasInstallable","isTerminalItemVisible","isPaymentItemVisible","isTerminalAvailable","isTerminalToolEnabled","isSalescenterToolEnabled","hasClientContactInfo","filteredSenders","isTerminalViewModeSaveAllowed","isSuggestScenarioMenuItemVisible","isBitrix24","isRequestIntegrationMenuItemVisible","isIntegrationButtonVisible","isModeListVisible","needShowStoreConnection","isSidebarEnabled","sendPaymentDeliveryFormButtonText","paymentDeliveryFormSubmitButtonClass","deliveryFormSubmitButtonClass","terminalPaymentFormSubmitButtonClass","paymentMenuItemClass","paymentTerminalMenuItemClass","paymentDeliveryMenuItemClass","deliveryMenuItemClass","ApplicationModel","getPages","setPages","saveState","removePage","VuexBuilderModel","DocumentSelectorModel","addDocument","setBoundDocumentId","Rest","callMethod","console","loadTemplates","getTemplates","getDocuments","getBoundDocumentId","getSelectedTemplateId","fillState","setTemplates","setSelectedTemplateId","newDocument","isUpdated","unshift","OrderCreationModel","processingId","basketVersion","expectedDelivery","isEnabledSubmit","isSenderSelected","availablePaySystemsIds","paymentResponsibleId","responsiblePhoneNumbers","hasAvailableProducts","resetBasket","setCurrency","setDeliveryId","setDelivery","setPropertyValues","setDeliveryExtraServicesValues","setExpectedDelivery","setDeliveryResponsibleId","setPaymentResponsibleId","setMobileInstalledForResponsible","setResponsiblePhoneNumbers","setPersonTypeId","setAvailablePaySystemsIds","setMessageData","setHasAvailableProducts","getBasket","isAllowedSubmit","getTotal","getDelivery","getDeliveryId","getPropertyValues","getDeliveryExtraServicesValues","getExpectedDelivery","getDeliveryResponsibleId","getPaymentResponsibleId","getResponsiblePhoneNumbers","getPersonTypeId","getAvailablePaySystemsIds","getMessageData","getHasAvailableProducts","setBasket","setTotal","assign","clearBasket","setErrors","clearErrors","setProcessingId","setIsSenderSelected","isSelected","enableSubmit","disableSubmit","enableCompilationMode","disableCompilationMode","MobileAppInstallPopup","sendersConfig","phoneNumbers","root","selectedPhoneNumber","selectedSender","mainPopup","sendButton","sendersMenu","phoneMenu","sendersData","smsSenders","popupContent","getPopupContent","linkButton","Button","LINK","round","icon","ButtonIcon","COPY","ButtonState","DISABLED","PRIMARY","setClocking","sendSms","Popup","className","overlay","closeIcon","maxWidth","buttons","onClose","bindCopyLink","bindSelectors","entity","clipboard","bindCopyClick","mobileAppLink","bindSendersSelector","bindPhoneSelector","sendersSelector","menuItems","firstChild","getCurrentMenu","SidePanel","refresh","phoneSelector","updateSendButtonState","updateContent","setDisabled","setContent","phoneAndServiceContent","instances","App","lineId","orderAddPullTag","landingPublicationPullTag","landingUnPublicationPullTag","isCatalogAvailable","DocumentSelectorParams","getTopSlider","isProgress","fillPagesTimeout","fillPagesQueue","sendingMethod","fileControl","isString","isBoolean","ready","pull","PULL","initPull","initStore","initTemplate","showError","store","eventData","Builder","Communication","SendEvent","createDefault","setSection","buildData","sendData","moduleId","command","callback","showOrdersListAfterCreate","templateEngine","el","Chat","Deal","isPaymentMode","leftPanel","orderSelector","initOrderSelector","arParams","getLoader","componentKey","orderList","orderSelectorBtn","setAttribute","popupMenu","orderCaption","addEventListener","preventDefault","init","err","startProgress","stopProgress","buttonEvent","showLoader","isDomNode","add","hideLoader","reject","promise","deleteUrl","error_description","source","connectedSiteId","addAnalyticAction","getParameters","pop","sendCompilationToFacebook","sendCompilationAjaxAction","facebookSettingsPath","showFacebookCatalogConnectionPopup","Backend","getInstance","action","errorCode","openLimitShopNumberInfoHelper","openFreeTarifInfoHelper","openFreeDomenInfoHelper","showEmailConfirmPopup","MessageBox","PhoneVerify","setEntityType","setEntityId","startVerify","mandatory","verified","emit","confirm","messageBox","openConfirmEmailInfoHelper","facebookCatalogConnectionPopup","getFacebookCatalogConnectionPopupContent","padding","animation","right","setFacebookCatalogConnectionButton","setFacebookCatalogConnectionPopupHandler","sendLinkToB24CompilationButton","sendLinkToB24CompilationButtonPopupHandler","sendMessageAnalytic","emitGlobalEvent","expectedDeliveryPrice","number","click","needCloseApplication","showMobileAppInstallLinkPopup","popupIconClass","currentLanguage","mobilePopup","autoHide","getQRCode","qrNode","QRCode","alwaysOpen","userOptionName","orderCreationOption","userOptionKeyName","paySystemBannerOptionName","eventName","postMessage","builder","VuexBuilder","addModel","useNamespace","build"],"mappings":";;;;;;;CAAA,IAAMA,kBAAkB,GAAG;GAC1BC,IAAI,kBAAG;KACN,OAAO;OACNC,QAAQ,EAAE;MACV;IACD;GACDC,OAAO,qBAAG;KAAA;;;;KAIT,IAAI,CAACC,KAAK,CAACC,GAAG,CAAC,oBAAoB,EAAE,UAACC,KAAK,EAAK;OAC/C,KAAI,CAACJ,QAAQ,GAAGI,KAAK;MACrB,CAAC;;CAEJ,CAAC;;CCKD,IAAIC,oBAAoB,GAAG;GAE1BC,UAAU,EACT;KACC,aAAa,EAASC,2CAAK;KAC3B,kBAAkB,EAAQC,+CAAS;KACnC,qBAAqB,EAAOC,iDAAW;KACvC,sBAAsB,EAAOC,mDAAa;KAC1C,6BAA6B,EAAKC,wDAAkB;KACpD,4BAA4B,EAAKC,wDAAkB;KACnD,oCAAoC,EAAGC;IACvC;GACFC,OAAO,EACN;KACCC,iBAAiB,+BACjB;OACC,OAAO,IAAI,CAACC,KAAK;MACjB;KAEDC,yBAAyB,qCAACC,MAAa,EACvC;OACC,IAAIC,GAAG,GAAG,IAAIC,GAAG,EAAE;OACnB,IAAIC,UAAU,GAAG,IAAI,CAACN,iBAAiB,EAAE;OAEzC,IAAGG,MAAM,CAACI,cAAc,CAAC,MAAM,CAAC,IAAIJ,MAAM,CAACK,IAAI,CAACC,MAAM,GAAG,CAAC,EAC1D;SACCH,UAAU,CACRI,OAAO,CAAC,UAACC,IAAI,EAAEC,KAAK,EAAK;WAEzB,IAAGT,MAAM,CAACK,IAAI,KAAKG,IAAI,CAACE,OAAO,EAAE,EACjC;aACCT,GAAG,CAACU,GAAG,CAACF,KAAK,EAAED,IAAI,CAAC;;UAErB,CAAC;QACH,MAED;SACCL,UAAU,CACRI,OAAO,CAAC,UAACC,IAAI,EAAEC,KAAK;WAAA,OAAKR,GAAG,CAACU,GAAG,CAACF,KAAK,EAAED,IAAI,CAAC;WAAC;;OAGjD,OAAOP,GAAG;MACV;KAEDW,0BAA0B,wCAC1B;OACC,IAAIX,GAAG,GAAG,IAAI,CAACF,yBAAyB,CAAC;SACxCM,IAAI,EAAEQ,UAAU,CAACR,IAAI;QACrB,CAAC;OAEF,OAAOJ,GAAG,CAACa,IAAI,GAAG,CAAC;MACnB;KAEDC,yBAAyB,uCACzB;OACC,IAAId,GAAG,GAAG,IAAI,CAACF,yBAAyB,CAAC;SACxCM,IAAI,EAAEQ,SAAS,CAACR,IAAI;QACpB,CAAC;OAEF,OAAOJ,GAAG,CAACa,IAAI,GAAG,CAAC;MACnB;KAEDE,0BAA0B,wCAC1B;OACC,IAAIf,GAAG,GAAG,IAAI,CAACF,yBAAyB,CAAC;SACxCM,IAAI,EAAEQ,UAAU,CAACR,IAAI;QACrB,CAAC;OAEF,IAAIY,MAAM,GAAG,EAAE;OACfhB,GAAG,CAACM,OAAO,CAAC,UAACC,IAAI,EAAEU,GAAG,EAAI;SAAED,MAAM,GAAG;WAACR,KAAK,EAAES,GAAG;WAAEC,IAAI,EAAEX;UAAK;SAAE,OAAO,KAAK;QAAE,CAAC;OAC9E,OAAOS,MAAM;MACb;KAEDG,yBAAyB,uCACzB;OACC,IAAInB,GAAG,GAAG,IAAI,CAACF,yBAAyB,CAAC;SACxCM,IAAI,EAAEQ,SAAS,CAACR,IAAI;QACpB,CAAC;OAEF,IAAIY,MAAM,GAAG,EAAE;OACfhB,GAAG,CAACM,OAAO,CAAC,UAACC,IAAI,EAAEU,GAAG,EAAI;SAAED,MAAM,GAAG;WAACR,KAAK,EAAES,GAAG;WAAEC,IAAI,EAAEX;UAAK;SAAE,OAAO,KAAK;QAAE,CAAC;OAC9E,OAAOS,MAAM;MACb;KAEDI,cAAc,0BAACZ,KAAK,EACpB;OACC,IAAKU,IAAI,GAAG,IAAI;OAChB,IAAI,CAACpB,yBAAyB,CAAC,EAAE,CAAC,CAChCQ,OAAO,CAAC,UAACC,IAAI,EAAEU,GAAG,EAAI;SAEtB,IAAGT,KAAK,KAAKS,GAAG,EAChB;WACCC,IAAI,GAAGX,IAAI;;QAEZ,CAAC;OACH,OAAOW,IAAI;MACX;KAEDG,UAAU,sBAACJ,GAAG,EACd;OAAA;OACC,IAAIK,MAAM,GAAG,IAAIC,iCAAS,EAAE;OAC5B,IAAIL,IAAI,GAAG,IAAI,CAACE,cAAc,CAACH,GAAG,CAAC;OAEnCK,MAAM,CAACE,YAAY,CAACN,IAAI,EAAE,IAAI,CAACO,eAAe,CAAC;OAC/CH,MAAM,CAACI,SAAS,CAACC,kCAAU,CAACC,oBAAoB,EAC/C,UAACC,CAAC;SAAA,OAAK,KAAI,CAACC,KAAK,CAAC,sBAAsB,EAAE;WAAClD,IAAI,EAAEiD,CAAC,CAACjD;UAAK,CAAC;SACzD;MACD;KAEDmD,aAAa,yBAACb,IAAe,EAC7B;OACC,OAAO,CAACN,SAAS,CAACR,IAAI,EAAE,EAAEQ,UAAU,CAACR,IAAI,EAAE,CAAC,CAAC4B,QAAQ,CAACd,IAAI,CAACT,OAAO,EAAE,CAAC;MACrE;KAEDwB,QAAQ,oBAAChB,GAAG,EAAEY,CAAC,EACf;OACC,IAAIK,KAAK,GAAGL,CAAC,CAACjD,IAAI,CAACsD,KAAK;OACxB,IAAIhB,IAAI,GAAG,IAAI,CAACE,cAAc,CAACH,GAAG,CAAC;OAEnC,IAAI,CAACkB,KAAK,GAAG,IAAIC,UAAU,EAAE;OAC7B,IAAI,CAACD,KAAK,CAACE,IAAI,CAACH,KAAK,CAACI,MAAM,EAAEpB,IAAI,CAACqB,IAAI,CAAC;MACxC;KAEDC,QAAQ,sBACR;OACC,IAAG,IAAI,CAACL,KAAK,EACb;SACC,IAAI,CAACA,KAAK,CAACM,IAAI,EAAE;;;IAGnB;GACFC,QAAQ,EACP;KACCjB,eAAe,6BACf;OACC,OAAO;SACNkB,KAAK,EAAE;QACP;;;CAGL,CAAC;;CC7JD,IAAMC,WAAW,GAAG;GACnBC,KAAK,EAAE;KACNhD,KAAK,EAAE;OACNO,IAAI,EAAE0C,KAAK;OACXC,QAAQ,EAAE;;IAEX;GACDC,MAAM,EAAE,CAAC9D,oBAAoB,CAAC;GAC9B+D,QAAQ;CAyBT,CAAC;;CCjCD,IAAMC,SAAS,GAAG;GACjBL,KAAK,EAAE;KACNhD,KAAK,EAAE;OACNO,IAAI,EAAE0C,KAAK;OACXC,QAAQ,EAAE;;IAEX;GACDC,MAAM,EAAC,CAAC9D,oBAAoB,CAAC;GAE7B+D,QAAQ;CAwBT,CAAC;;CCjCD,IAAME,UAAU,GAAG;GAClBT,QAAQ,EACP;KACCU,gBAAgB,8BAChB;OACC,OAAO;SACN,qCAAqC,EAAK,IAAI;SAC9C,6CAA6C,EAAG,IAAI,CAACC,MAAM,KAAKC,4CAAM,CAACC,OAAO;SAC9E,8CAA8C,EAAG,IAAI,CAACF,MAAM,KAAKC,4CAAM,CAACE;QACxE;MACD;KAEDC,mBAAmB,iCACnB;OACC,OAAO;SACN,+CAA+C,EAAG;QAClD;MACD;KAEDC,mBAAmB,iCACnB;OACC,OAAO,IAAI,CAACL,MAAM,KAAKC,4CAAM,CAACK,QAAQ;;IAEvC;GACDhE,OAAO,EACN;KACCiE,aAAa,yBAAC/B,CAAC,EACf;OACC,IAAI,CAACC,KAAK,CAAC,uCAAuC,EAAED,CAAC,CAAC;;;CAG3D,CAAC;;CC3BD,IAAMgC,OAAO,GAAG;GACfhB,KAAK,EAAE;KACNQ,MAAM,EAAE;OACPjD,IAAI,EAAE0D,MAAM;OACXf,QAAQ,EAAE;MACX;KACDgB,OAAO,EAAE;OACR3D,IAAI,EAAE4D,MAAM;OACXjB,QAAQ,EAAE;MACX;KACDlD,KAAK,EAAE;OACNO,IAAI,EAAE0C,KAAK;OACVC,QAAQ,EAAE;MACX;KACDkB,SAAS,EAAE;OACV7D,IAAI,EAAE8D,OAAO;OACZnB,QAAQ,EAAE;MACX;KACDoB,UAAU,EAAE;OACX/D,IAAI,EAAE0C;MACN;KACDsB,oBAAoB,EAAE;OACrBhE,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;;IAEX;GACDC,MAAM,EAAC,CAACG,UAAU,CAAC;GACnBhE,UAAU,EACV;KACC,kBAAkB,EAAOkF,sCAAK;KAC9B,iCAAiC,EAAGC,SAAa;KACjD,mCAAmC,EAAGC;IACtC;GACD7B,QAAQ,EACR;KACC8B,WAAW,yBACX;OACC,OAAO;SACN,iDAAiD,EAAE,IAAI,CAACP,SAAS,KAAK;QACtE;MACD;KACDQ,KAAK,mBACL;OACC,OAAOC,aAAG,CAACC,UAAU,CAAC,0CAA0C,CAAC;MACjE;KACDC,cAAc,4BACd;OACC,OAAO;SACNb,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBI,UAAU,EAAE,IAAI,CAACF,SAAS,GAAG,IAAI,CAACE,UAAU,GAAG,EAAE;SACjDF,SAAS,EAAE,IAAI,CAACA,SAAS;SACzBY,WAAW,EAAE,IAAI;SACjBC,OAAO,EAAE,IAAI,CAACpB,mBAAmB;SACjCzB,QAAQ,EAAE,CAAC,IAAI,CAACgC,SAAS;SACzBG,oBAAoB,EAAE,IAAI,CAACA;QAC3B;;IAEF;GACDzE,OAAO,EACP;KACCoF,UAAU,sBAAClD,CAAC,EACZ;OACCmD,EAAE,CAACC,WAAW,CAACC,OAAO,CAACC,sBAAsB,CAACtD,CAAC,CAAC;MAChD;KACDuD,mBAAmB,+BAACC,MAAM,EAC1B;OACC,IAAI,CAACvD,KAAK,CAAC,0BAA0B,EAAE,SAAS,EAAEuD,MAAM,CAAC;;IAE1D;GACDpC,QAAQ,qYAUHyB,aAAG,CAACC,UAAU,CAAC,0CAA0C,CAAC,6XAUvDD,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;CAWlE,CAAC;;CC1GM,IAAMW,cAAc,GAAGC,MAAM,CAACC,MAAM,CAAC;GAC3CC,OAAO,EAAE,SAAS;GAClBC,QAAQ,EAAE,UAAU;GACpBC,eAAe,EAAE,kBAAkB;GACnCC,eAAe,EAAE;CAClB,CAAC,CAAC;;;;ACLF,AAQA,eAAe;GACd5C,MAAM,EAAE,CAACrE,kBAAkB,CAAC;GAC5BkH,OAAO,qBACP;KACC,IAAMhH,QAAQ,GAAG,IAAI,CAACE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM;KAChE,IAAMC,iBAAiB,GAAG,IAAI,CAAClH,KAAK,CAAC+G,IAAI,CAACI,WAAW,KAAK,IAAI;KAE9D,IAAI,CAACnH,KAAK,CAAC+C,KAAK,CAAC,oBAAoB,EAAEjD,QAAQ,CAAC;KAChD,IAAI,IAAI,CAACsH,WAAW,EACpB;OACC,IAAI,CAACA,WAAW,CAACC,WAAW,CAACvH,QAAQ,EAAEoH,iBAAiB,CAAC;;KAG1D,IAAI,IAAI,CAACE,WAAW,EACpB;OACC,IAAME,WAAW,GAAG,IAAI,CAACtH,KAAK,CAACuH,GAAG,CAACC,aAAa,CAAC,+BAA+B,CAAC;OACjFF,WAAW,CAACG,WAAW,CAAC,IAAI,CAACL,WAAW,CAACM,MAAM,EAAE,CAAC;;IAEnD;GACD3H,OAAO,qBACP;KAAA;KACC,IAAI,CAAC4H,SAAS,GAAG,IAAI;KAErB,IAAMC,eAAe,GAAG,IAAI,CAAC5H,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACa,YAAY,IAAI,EAAE;KAElE,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,2BAA2B,EAAEH,eAAe,CAAC;KAClE,IAAII,cAAI,CAACC,OAAO,CAAC,IAAI,CAACjI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkB,MAAM,CAAC,EAChD;OACC,IAAMC,MAAM,GAAG,EAAE;OACjB,IAAI,CAACnI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkB,MAAM,CAAC3G,OAAO,CAAC,UAACC,IAAI,EAAK;SAChD2G,MAAM,CAACC,IAAI,CAAC5G,IAAI,CAAC2G,MAAM,CAAC;QACxB,CAAC;OACF,IAAI,CAACL,MAAM,CAACO,MAAM,CAAC,yBAAyB,EAAEF,MAAM,CAAC;;KAGtD,IAAIH,cAAI,CAACM,QAAQ,CAAC,IAAI,CAACtI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuB,MAAM,CAAC,EACjD;OACC,IAAI,CAACT,MAAM,CAACO,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAACrI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuB,MAAM,CAAC;;KAG7E,IAAI,CAACnB,WAAW,GAAG,IAAIoB,+BAAW,CACjC;OACCC,cAAc,EAAE,IAAI,CAACzI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACyB,cAAc;OACtDC,QAAQ,EAAEd,eAAe;OACzBe,QAAQ,EAAE,IAAI,CAAC3I,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC4B,eAAe;OACjDC,WAAW,EAAE,IAAI,CAAC7I,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC6B,WAAW;OAChDX,MAAM,EAAEF,cAAI,CAACC,OAAO,CAAC,IAAI,CAACjI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkB,MAAM,CAAC,GAAG,IAAI,CAAClI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkB,MAAM,GAAG,EAAE;OAC1FK,MAAM,EAAE,IAAI,CAACvI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuB,MAAM;OACtCO,OAAO,EAAE,IAAI,CAAC9I,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC+B,OAAO;OACxCC,QAAQ,EAAE,IAAI,CAAChJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgC,QAAQ;OAC1CC,iBAAiB,EAAE,IAAI,CAACjJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkC,oBAAoB;OAC/DC,YAAY,EAAE,IAAI,CAACnJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoC,gBAAgB;OACtDC,gBAAgB,EAAE,IAAI,CAACrJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI,KAAK,UAAU,GAAG3D,aAAG,CAACC,UAAU,CAAC,0CAA0C,CAAC,GAAG,IAAI;OACjI2D,iBAAiB,EAAE,IAAI,CAACvJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACwC,wBAAwB;OACnEC,yBAAyB,EAAE,IAAI,CAACzJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACyC,yBAAyB;OAC5EC,2BAA2B,EAAE,IAAI,CAAC1J,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC0C,2BAA2B;OAChFC,UAAU,EAAE,IAAI,CAAC3J,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC2C,UAAU;OAC9CC,wBAAwB,EAAG,IAAI,CAAC5J,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAO;OAC3E4C,2BAA2B,EAAE,IAAI,CAACA,2BAA2B,EAAE;OAC/DC,mBAAmB,EAAE,IAAI,CAAC9J,KAAK,CAAC+G,IAAI,CAACgD,SAAS,KAAK,UAAU,IAAI,IAAI,CAAC/J,KAAK,CAAC+G,IAAI,CAACiD,uBAAuB,GAAG,UAAU,GAAG,SAAS;OACjIC,oBAAoB,2BAAE,IAAI,CAACjK,KAAK,CAAC+G,IAAI,CAACI,WAAW,0DAA3B,sBAA6B+C,aAAa;OAChEC,OAAO,EAAE,IAAI,CAACnK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmD,OAAO;OACxCC,WAAW,EAAE,IAAI,CAACpK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoD,WAAW;OAChDC,QAAQ,EAAE,IAAI,CAACrK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACqD,QAAQ;OAC1CC,SAAS,EAAE,IAAI,CAACtK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsD,SAAS;OAC5CC,wBAAwB,EAAE,IAAI;OAC9BC,uBAAuB,EAAE;MACzB,CACD;KAED,IAAI,CAACC,kBAAkB,EAAE;KAEzBC,6BAAY,CAAC/H,SAAS,CACrB,IAAI,CAACyE,WAAW,EAChB,4BAA4B,EAC5BuD,iBAAO,CAACC,QAAQ,CAAC,IAAI,CAACC,cAAc,EAAE,GAAG,EAAE,IAAI,CAAC,CAChD;KAEDH,6BAAY,CAAC/H,SAAS,CACrB,IAAI,CAACyE,WAAW,EAChB,4BAA4B,EAC5BuD,iBAAO,CAACC,QAAQ,CAAC,IAAI,CAACH,kBAAkB,EAAE,GAAG,EAAE,IAAI,CAAC,CACpD;KAEDC,6BAAY,CAAC/H,SAAS,CACrB,IAAI,CAACyE,WAAW,EAChB,0BAA0B,EAC1B,IAAI,CAAC0D,uBAAuB,CAC5B;KAEDJ,6BAAY,CAAC/H,SAAS,CACrB,IAAI,CAACyE,WAAW,EAChB,kCAAkC,EAClC,IAAI,CAAC2D,+BAA+B,CAACC,IAAI,CAAC,IAAI,CAAC,CAC/C;IACD;GACDC,KAAK,EAAE;KACNC,qBAAqB,mCACrB;OACC,IAAI,CAAC9D,WAAW,CAAC+D,8BAA8B,CAAC,IAAI,CAACtB,2BAA2B,EAAE,CAAC;;IAEpF;GACDlG,QAAQ,EAAE;KACTuH,qBAAqB,mCACrB;OACC,OAAO,IAAI,CAACpD,MAAM,CAACsD,KAAK,CAACC,aAAa,CAACC,WAAW,CAACC,UAAU;;IAE9D;GACD3K,OAAO,EAAE;KACRiJ,2BAA2B,yCAC3B;OACC,OAAO,IAAI,CAAC7J,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,QAAQ,IACpD,IAAI,CAACjH,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC6C,2BAA2B,KAAK,GAAG,IAC3D,IAAI,CAAC7J,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI,KAAK/C,cAAc,CAACK,eAAe,IAC/D,IAAI,CAACsE,qBAAqB,KAAK,UAAU;MAE7C;KACDH,+BAA+B,2CAAC5H,KAAgB,EAChD;OACC,IAAMtD,IAAI,GAAGsD,KAAK,CAACqI,OAAO,EAAE;OAC5B,IAAI,CAACxL,KAAK,CAAC+G,IAAI,CAAC0E,gBAAgB,GAAG5L,IAAI,CAAC6L,aAAa;OACrD,IAAI,CAAC1L,KAAK,CAAC+G,IAAI,CAACoD,OAAO,GAAGtK,IAAI,CAACsK,OAAO;OACtC,IAAI,CAACnK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmD,OAAO,GAAGtK,IAAI,CAACsK,OAAO;MAC9C;KACDW,uBAAuB,mCAAC3H,KAAgB,EACxC;OACC,IAAMmG,IAAI,GAAGnG,KAAK,CAACqI,OAAO,EAAE,CAAClC,IAAI;OACjC,IAAIA,IAAI,KAAKqC,4BAAQ,CAACC,WAAW,IAAItC,IAAI,KAAKqC,4BAAQ,CAACE,qBAAqB,EAC5E;SACC,IAAI,CAAC/D,MAAM,CAACO,MAAM,CAAC,qCAAqC,CAAC;QACzD,MAED;SACC,IAAI,CAACP,MAAM,CAACO,MAAM,CAAC,sCAAsC,CAAC;;OAE3D,IAAI,CAACtF,KAAK,CAAC,6BAA6B,CAAC;MACzC;KACD8H,cAAc,0BAAC1H,KAAgB,EAC/B;OAAA;OACC,IAAM2I,qBAAqB,GAAG,SAAxBA,qBAAqB,CAAIjM,IAAI,EAAK;SACvC,IAAI,KAAI,CAACuH,WAAW,EACpB;WACC,IAAM2E,cAAc,GAAG,EAAE;WACzBlM,IAAI,CAACqI,MAAM,CAAC3G,OAAO,CAAC,UAACC,IAAI,EAAK;aAC7B,IAAI,CAACwG,cAAI,CAACgE,cAAc,CAACxK,IAAI,CAACyK,OAAO,CAAC,EACtC;eACC;;aAEDF,cAAc,CAAC3D,IAAI,CAAC;eACnB8D,UAAU,EAAE1K,IAAI,CAACyK,OAAO;eACxB9D,MAAM,EAAE3G;cACR,CAAC;YACF,CAAC;WAEF,KAAI,CAAC4F,WAAW,CAAC+E,OAAO,iCACpBtM,IAAI;aACPqI,MAAM,EAAE6D;cACP;WAEF,IAAI/D,cAAI,CAACC,OAAO,CAACpI,IAAI,CAACqI,MAAM,CAAC,EAC7B;aACC,KAAI,CAACJ,MAAM,CAACO,MAAM,CAAC,yBAAyB,EAAExI,IAAI,CAACqI,MAAM,CAAC;;WAG3D,IAAIF,cAAI,CAACM,QAAQ,CAACzI,IAAI,CAACuM,KAAK,CAAC,EAC7B;aACC,KAAI,CAACtE,MAAM,CAACO,MAAM,CAAC,wBAAwB,EAAExI,IAAI,CAACuM,KAAK,CAAC;;;QAG1D;OAED,IAAMvM,IAAI,GAAGsD,KAAK,CAACqI,OAAO,EAAE;OAC5B,IAAI,CAACxD,cAAI,CAACC,OAAO,CAACpI,IAAI,CAACqI,MAAM,CAAC,EAC9B;SACC;;OAED,IAAMC,MAAM,GAAG,EAAE;OACjBtI,IAAI,CAACqI,MAAM,CAAC3G,OAAO,CAAC,UAACC,IAAI,EAAK;SAC7B2G,MAAM,CAACC,IAAI,CAAC5G,IAAI,CAAC2G,MAAM,CAAC;QACxB,CAAC;OACF,IAAI,CAACL,MAAM,CAACO,MAAM,CAAC,yBAAyB,EAAEF,MAAM,CAAC;OAErD,IAAI,IAAI,CAACnI,KAAK,CAAC+G,IAAI,CAAC0E,gBAAgB,EACpC;SACC,IAAI,CAACY,yBAAyB,EAAE;;OAGjC,IAAI,IAAI,CAACC,mBAAmB,EAAE,EAC9B;SACC,IAAI,CAACxE,MAAM,CAACO,MAAM,CAAC,6BAA6B,CAAC;SACjD,IAAI,CAACP,MAAM,CAACO,MAAM,CAAC,uCAAuC,EAAE,KAAK,CAAC;SAElE;;OAGD,IAAI,CAACP,MAAM,CAACO,MAAM,CAAC,4BAA4B,CAAC;OAChD,IAAI,CAACP,MAAM,CAACO,MAAM,CAAC,uCAAuC,EAAE,IAAI,CAAC;OAEjE,IAAMkE,SAAS,GAAGC,cAAI,CAACC,SAAS,CAAC,EAAE,CAAC;OACpC,IAAI,CAAC9E,SAAS,GAAG4E,SAAS;OAC1BG,cAAI,CAACC,SAAS,CACb,qCAAqC,EACrC;SACC9M,IAAI,EAAE;WACL+M,OAAO,EAAE,IAAI,CAAC5M,KAAK,CAAC+G,IAAI,CAAC6F,OAAO;WAChCC,WAAW,EAAE1E;;QAEd,CACD,CACC2E,IAAI,CAAC,UAAC7K,MAAM,EAAK;SACjB,IAAI,KAAI,CAAC0F,SAAS,KAAK4E,SAAS,EAChC;WACC;;SAGD,IAAM1M,IAAI,GAAGoG,EAAE,CAAC8G,IAAI,CAACC,SAAS,CAAC/K,MAAM,EAAE,MAAM,EAAE,EAAE,CAAC;SAClD6J,qBAAqB,CAAC;WACrBM,KAAK,EAAEnG,EAAE,CAAC8G,IAAI,CAACC,SAAS,CACvBnN,IAAI,EACJ,OAAO,EACP;aACCoN,QAAQ,EAAE,CAAC;aACXhL,MAAM,EAAE,CAAC;aACTiL,GAAG,EAAE;;YAEL,CACD;;WACDhF,MAAM,EAAEjC,EAAE,CAAC8G,IAAI,CAACI,GAAG,CAACtN,IAAI,EAAE,OAAO,EAAE,EAAE;UACrC,CAAC;QACF,CAAC,SACI,CAAC,UAACoC,MAAM,EAAK;SAClB,IAAMpC,IAAI,GAAGoG,EAAE,CAAC8G,IAAI,CAACC,SAAS,CAAC/K,MAAM,EAAE,MAAM,EAAE,EAAE,CAAC;SAClD6J,qBAAqB,CAAC;WACrBsB,MAAM,EAAEnH,EAAE,CAAC8G,IAAI,CAACI,GAAG,CAAClL,MAAM,EAAE,QAAQ,EAAE,EAAE,CAAC;WACzCiG,MAAM,EAAEjC,EAAE,CAAC8G,IAAI,CAACI,GAAG,CAACtN,IAAI,EAAE,OAAO,EAAE,EAAE;UACrC,CAAC;QACF,CAAC;MACH;KACDwM,yBAAyB,uCACzB;OACC,IAAMQ,WAAW,GAAG,IAAI,CAAC/E,MAAM,CAACuF,OAAO,CAAC,yBAAyB,CAAC,EAAE;OACpE,IAAMC,UAAU,GAAGT,WAAW,CAAC5L,GAAG,CAAC,UAACsM,UAAU,EAAK;SAClD,OAAOA,UAAU,CAACC,KAAK;QACvB,CAAC;OACF,IAAM9B,aAAa,GAAG,IAAI,CAAC1L,KAAK,CAAC+G,IAAI,CAACI,WAAW,GAC9C,IAAI,CAACnH,KAAK,CAAC+G,IAAI,CAACI,WAAW,CAACsG,EAAE,GAC9B,IAAI,CAACzN,KAAK,CAAC+G,IAAI,CAAC0E,gBAAgB;OAEnC,IAAIC,aAAa,EACjB;SACCgB,cAAI,CAACC,SAAS,CACb,2CAA2C,EAC3C;WACC9M,IAAI,EAAE;aACL6L,aAAa,EAAbA,aAAa;aACb4B,UAAU,EAAVA;;UAED,CACD;;MAEF;KACD7C,kBAAkB,gCAClB;OACC,IAAI,IAAI,CAAC6B,mBAAmB,EAAE,EAC9B;SACC,IAAI,CAACxE,MAAM,CAACO,MAAM,CAAC,6BAA6B,CAAC;SACjD,IAAI,CAACP,MAAM,CAACO,MAAM,CAAC,uCAAuC,EAAE,KAAK,CAAC;QAClE,MAED;SACC,IAAI,CAACP,MAAM,CAACO,MAAM,CAAC,4BAA4B,CAAC;SAChD,IAAI,CAACP,MAAM,CAACO,MAAM,CAAC,uCAAuC,EAAE,IAAI,CAAC;;MAElE;KACDiE,mBAAmB,iCACnB;OACC,IAAMpE,MAAM,GAAG,IAAI,CAACJ,MAAM,CAACuF,OAAO,CAAC,yBAAyB,CAAC,EAAE;OAE/D,IACCnF,MAAM,CAAC5G,MAAM,IAAI,CAAC,IACd,IAAI,CAAC8F,WAAW,IAAIY,cAAI,CAAC0F,UAAU,CAAC,IAAI,CAACtG,WAAW,CAACuG,SAAS,CAAC,IAAI,IAAI,CAACvG,WAAW,CAACuG,SAAS,EAAG,EAErG;SACC,OAAO,IAAI;;OAGZ,IAAMC,cAAc,GAAG1F,MAAM,CAAClH,MAAM,CAAC,UAACQ,IAAI,EAAK;SAC9C,OAAQwG,cAAI,CAACgE,cAAc,CAACxK,IAAI,CAACqM,MAAM,CAAC,IAAIrM,IAAI,CAACsM,SAAS,GAAG,CAAC,IAAKtM,IAAI,CAACuM,IAAI,CAACzM,MAAM,GAAG,CAAC;QACvF,CAAC;OAEF,OAAOsM,cAAc,CAACtM,MAAM,IAAI,CAAC;;IAElC;GACD4C,QAAQ;CAQT,CAAC;;;;ACrTD,AAIA,iBAAe;GACdJ,KAAK,EAAE;KACNkB,OAAO,EAAE;OACR3D,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACD0B,KAAK,EAAE;OACNrE,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgK,SAAS,EAAE;OACV3M,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDiK,0BAA0B,EAAE;OAC3B5M,IAAI,EAAEmF,MAAM;OACZxC,QAAQ,EAAE,KAAK;OAAA,+BAEf;SACC,OAAO,EAAE;;;IAGX;GACDC,MAAM,EAAE,CAACG,UAAU,CAAC;GACpBhE,UAAU,EACT;KACC,kBAAkB,EAAEkF,sCAAK;KACzB4I,OAAO,EAAEC;IACT;GACFvN,OAAO,EACN;KACCoF,UAAU,sBAAClD,CAAC,EACZ;OACCmD,EAAE,CAACC,WAAW,CAACC,OAAO,CAACiI,aAAa,CAACtL,CAAC,CAAC;MACvC;KACDgI,uBAAuB,mCAAC3H,KAAK,EAC7B;OACC,IAAI,CAACJ,KAAK,CAAC,6BAA6B,CAAC;;IAE1C;GACFY,QAAQ,EACP;KACCW,MAAM,oBACN;OACC,OAAO,IAAI,CAACwD,MAAM,CAACuF,OAAO,CAAC,uCAAuC,CAAC,GAAG9I,4CAAM,CAACK,QAAQ,GAAGL,4CAAM,CAACC,OAAO;MACtG;KACDqB,cAAc,4BACd;OACC,OAAO;SACNb,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBe,OAAO,EAAE,IAAI,CAACpB,mBAAmB;SACjCzB,QAAQ,EAAE;QACV;MACD;KACDmL,gBAAgB,8BAChB;OACC,2CACI,IAAI,CAAChK,gBAAgB,GACrB,IAAI,CAAC4J,0BAA0B;;IAGpC;GACF/J,QAAQ;CAmBT,CAAC;;;;ACrFD,AAKA,0BAAe;GACdJ,KAAK,EAAE;KACNwK,MAAM,EAAE;OAACjN,IAAI,EAAEmF,MAAM;OAAExC,QAAQ,EAAE;;IACjC;GACD5D,UAAU,EAAE;KACX,mBAAmB,EAAEmO;IACrB;GACD1O,IAAI,kBACJ;KACC,OAAO;OACN2O,iBAAiB,EAAE;MACnB;IACD;GACD5N,OAAO,EAAE;KACR6N,QAAQ,oBAACC,OAAO,EAChB;OACC,IAAI,CAAC5G,MAAM,CAACC,QAAQ,CAAC,2BAA2B,EAAE2G,OAAO,CAACC,aAAa,CAAC;OAExE,IAAI,CAAC7G,MAAM,CAACC,QAAQ,CACnB,6BAA6B,EAC7B2G,OAAO,CAACE,iBAAiB,CACzB;OACD,IAAI,CAAC9G,MAAM,CAACC,QAAQ,CACnB,iCAAiC,EACjC2G,OAAO,CAACG,kBAAkB,CAC1B;OACD,IAAI,CAAC/G,MAAM,CAACC,QAAQ,CACnB,8CAA8C,EAC9C2G,OAAO,CAACI,qBAAqB,CAC7B;OACD,IAAI,CAAChH,MAAM,CAACC,QAAQ,CACnB,mCAAmC,EACnC2G,OAAO,CAACK,sBAAsB,CAC9B;OACD,IAAI,CAACjH,MAAM,CAACC,QAAQ,CACnB,wCAAwC,EACxC2G,OAAO,CAACM,eAAe,GAAGN,OAAO,CAACM,eAAe,CAACC,EAAE,GAAG,IAAI,CAC3D;OAED,IAAI,CAAClM,KAAK,CAAC,QAAQ,EAAE2L,OAAO,CAAC;MAC7B;KACDQ,oBAAoB,kCACpB;OACC,IAAI,CAACC,wBAAwB,EAAE;MAC/B;KACDC,wBAAwB,sCACxB;OACC,IAAI,CAACD,wBAAwB,EAAE;MAC/B;KACDE,iBAAiB,+BACjB;OACC,IAAI,CAACtM,KAAK,CAAC,2BAA2B,CAAC;MACvC;KACDoM,wBAAwB,sCACxB;OAAA;OACCG,cAAI,CAAC3C,SAAS,CACb,gDAAgD,EAChD;SACC9M,IAAI,EAAE;WACLgN,WAAW,EAAE,IAAI,CAACyB,MAAM,CAACpG,MAAM,GAAG,IAAI,CAACoG,MAAM,CAACpG,MAAM,GAAG,EAAE;WACzDlB,OAAO,EAAE;aACRsD,SAAS,EAAE,IAAI,CAACgE,MAAM,CAAChE,SAAS;aAChCF,WAAW,EAAE,IAAI,CAACkE,MAAM,CAAClE,WAAW;aACpCD,OAAO,EAAE,IAAI,CAACmE,MAAM,CAACnE;YACrB;WACDyE,iBAAiB,EAAE,IAAI,CAACW,KAAK,CAACC,UAAU;WACxCC,kBAAkB,EAAE,IAAI,CAACF,KAAK,CAACG,cAAc;WAC7CC,4BAA4B,EAAE,IAAI,CAACJ,KAAK,CAACK,2BAA2B;WACpEC,qBAAqB,EAAE,IAAI,CAACN,KAAK,CAACM;;QAEnC,CACD,CAAC/C,IAAI,CAAC,UAAC7K,MAAM,EAAK;SAClB,IAAIpC,IAAI,GAAGoG,EAAE,CAAC8G,IAAI,CAACC,SAAS,CAAC/K,MAAM,EAAE,MAAM,EAAE,EAAE,CAAC;SAChD,KAAI,CAACuM,iBAAiB,GAAG3O,IAAI,CAAC2O,iBAAiB,GAAG3O,IAAI,CAAC2O,iBAAiB,GAAG,EAAE;QAC7E,CAAC,SAAM,CAAC,UAACvM,MAAM,EAAK;SACpB,KAAI,CAACuM,iBAAiB,GAAG,EAAE;QAC3B,CAAC;;IAEH;GACDzO,OAAO,qBACP;KACC,IAAI,CAAC+H,MAAM,CAACC,QAAQ,CAAC,+BAA+B,EAAE,IAAI,CAACuG,MAAM,CAACwB,YAAY,CAAC;KAE/E,IAAI,CAACX,wBAAwB,EAAE;IAC/B;GAEDxL,QAAQ;KACPoM,QAAQ,sBACR;OACC,OAAOC,UAAG,CAACC,kBAAkB,CAAC,cAAc,CAAC;MAC7C;KACDC,QAAQ,sBACR;OACC,OAAOvK,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;MAC3D;KACDuK,aAAa,2BACb;OACC,OAAO,IAAI,CAACZ,KAAK,CAACnD,KAAK,CAACnK,MAAM;MAC9B;KACD0E,QAAQ,sBACR;OACC,OAAO,IAAI,CAAC4I,KAAK,CAAC5I,QAAQ;MAC1B;KACDyJ,iBAAiB,+BACjB;OACC,IAAI,IAAI,CAACC,oBAAoB,EAC7B;SACC,OAAOpK,EAAE,CAACqK,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAC5J,QAAQ,EAAE,IAAI,CAAC2H,MAAM,CAAC5F,QAAQ,EAAE,KAAK,CAAC;;MAG9E;KACD0D,KAAK,mBACL;OACC,IAAI,IAAI,CAAC+D,aAAa,KAAK,IAAI,IAAI,IAAI,CAACxJ,QAAQ,KAAK,IAAI,EACzD;SACC,OAAO,IAAI;;OAGZ,OAAO,IAAI,CAACwJ,aAAa,GAAG,IAAI,CAACxJ,QAAQ;MACzC;KACD6J,cAAc,4BACd;OACC,OAAOvK,EAAE,CAACqK,QAAQ,CAACC,cAAc,CAAC,IAAI,CAACnE,KAAK,EAAE,IAAI,CAACkC,MAAM,CAAC5F,QAAQ,EAAE,KAAK,CAAC;MAC1E;KACD2H,oBAAoB,kCACpB;OACC,OAAQ,IAAI,CAACd,KAAK,CAAC5I,QAAQ,KAAK,IAAI;MACpC;KACD8J,kBAAkB,gCAClB;OACC,OAAO,IAAI,CAACzQ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI,KAAK,UAAU,GAAG,CAAC,IAAI,CAACtJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC0J,sBAAsB,CAAC,GAAG,EAAE;MAC1G;KACDC,UAAU,wBACV;OACC,OAAO;SACN9D,WAAW,EAAE,IAAI,CAACyB,MAAM,CAACpG,MAAM;SAC/BlB,OAAO,EAAE;WACR4F,OAAO,EAAG,IAAI,CAAC5M,KAAK,CAAC+G,IAAI,CAAC6F,OAAO;WACjCtC,SAAS,EAAE,IAAI,CAACgE,MAAM,CAAChE,SAAS;WAChCF,WAAW,EAAE,IAAI,CAACkE,MAAM,CAAClE,WAAW;WACpCD,OAAO,EAAE,IAAI,CAACmE,MAAM,CAACnE;;QAEtB;;MAECyG,gBAAI,CAACC,QAAQ,CAAC;KAChBtB,KAAK,EAAE,eAAAnE,KAAK;OAAA,OAAIA,KAAK,CAACC,aAAa;;IACnC,CAAC,CACF;GACDnH,QAAQ;CAuBT,CAAC;;AC5KD,oBAAe;GACdJ,KAAK,EAAE;KACNmL,EAAE,EAAE;OACH5N,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACDmM,aAAa,EAAE;OACd9O,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;;IAEX;GACDnE,IAAI,kBACJ;KACC,OAAO;OACNiR,QAAQ,EAAE;SACTC,aAAa,EAAE,IAAI;SACnBC,iBAAiB,EAAE,IAAI;SACvBtI,QAAQ,EAAE,IAAI;SACduI,eAAe,EAAE;WAChBlD,IAAI,EAAE,IAAI;WACVmD,IAAI,EAAE,IAAI;WACVC,MAAM,EAAE;aACPpD,IAAI,EAAE,IAAI;aACVmD,IAAI,EAAE;;UAEP;SACDE,aAAa,EAAE,EAAE;SACjBC,iBAAiB,EAAE;QACnB;OACDC,mBAAmB,EAAE;MACrB;IACD;GACDvR,OAAO,qBACP;KAAA;KACCuP,cAAI,CAAC3C,SAAS,CACb,8CAA8C,EAC9C;OAAC9M,IAAI,EAAE;SACLoP,EAAE,EAAE,IAAI,CAACA;;MACR,CACH,CAACnC,IAAI,CAAC,UAAC7K,MAAM,EAAK;OAClB,KAAI,CAAC6O,QAAQ,GAAG7O,MAAM,CAACpC,IAAI,CAACiR,QAAQ;OACpC,KAAI,CAACQ,mBAAmB,GAAGrP,MAAM,CAACpC,IAAI,CAACyR,mBAAmB;MAC1D,CAAC;IACF;GACD1Q,OAAO,EAAE;KACR2Q,iBAAiB,6BAACC,KAAK,EACvB;OACC,OAAOvL,EAAE,CAACqK,QAAQ,CAACC,cAAc,CAACiB,KAAK,EAAE,IAAI,CAAC9I,QAAQ,EAAE,IAAI,CAAC;MAC7D;KACD+I,sBAAsB,kCAACC,QAAQ,EAC/B;OACC,IAAI,CAAC1J,cAAI,CAACC,OAAO,CAACyJ,QAAQ,CAACC,IAAI,CAAC,EAChC;SACC,OAAO,KAAK;;OAGb,OAAOD,QAAQ,CAACC,IAAI,CAAC1O,QAAQ,CAAC,OAAO,CAAC;MACtC;KACD2O,QAAQ,oBAACC,WAAW,EACpB;OACC,IACC,CAAC7J,cAAI,CAAC8J,WAAW,CAACC,MAAM,CAACC,GAAG,CAAC,MAAM,CAAC,CAAC,IAClC,IAAI,CAACV,mBAAmB,KAAK,IAAI,EAErC;SACCS,MAAM,CAACC,GAAG,CAAC,MAAM,CAAC,CAACC,OAAO,CAACJ,WAAW,CAAC;QACvC,MAED;SACCE,MAAM,CAACG,IAAI,CAAC,MAAM,GAAGL,WAAW,EAAE,OAAO,CAAC;;;IAG5C;GACDlO,QAAQ,EAAE;KACTwO,SAAS,uBACT;OACC,OACC,IAAI,CAACrB,QAAQ,CAAC1P,cAAc,CAAC,iBAAiB,CAAC,IAC5C,IAAI,CAAC0P,QAAQ,CAACG,eAAe,CAAC7P,cAAc,CAAC,QAAQ,CAAC,IACtD,IAAI,CAAC0P,QAAQ,CAACG,eAAe,CAACE,MAAM;MAExC;KACDiB,mBAAmB,iCACnB;OACC,OAAO,IAAI,CAACtB,QAAQ,CAACG,eAAe,CAACC,IAAI,GAAG,IAAI,CAACJ,QAAQ,CAACG,eAAe,CAACC,IAAI,GAAG,IAAI;MACrF;KACDmB,0BAA0B,wCAC1B;OACC,OAAQ,IAAI,CAACF,SAAS,IAAI,IAAI,CAACrB,QAAQ,CAACG,eAAe,CAACE,MAAM,CAACD,IAAI,GAChE,IAAI,CAACJ,QAAQ,CAACG,eAAe,CAACE,MAAM,CAACD,IAAI,GACzC,IAAI;MACP;KACDoB,YAAY,0BACZ;OACC,OAAO,IAAI,CAACnC,aAAa,GAAG,IAAI,CAACY,aAAa;MAC9C;KACDwB,mBAAmB,iCACnB;OACC,OAAO,IAAI,CAACJ,SAAS,GAAG,IAAI,CAACrB,QAAQ,CAACG,eAAe,CAACE,MAAM,CAACpD,IAAI,GAAG,IAAI,CAAC+C,QAAQ,CAACG,eAAe,CAAClD,IAAI;MACtG;KACDyE,0BAA0B,wCAC1B;OACC,OAAO,IAAI,CAACL,SAAS,GAAG,IAAI,CAACrB,QAAQ,CAACG,eAAe,CAAClD,IAAI,GAAG,IAAI;MACjE;KACDgD,aAAa,2BACb;OACC,OAAO,IAAI,CAACD,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACC,aAAa,GAAG,IAAI;MACzD;KACDrI,QAAQ,yBACR;OACC,OAAO,IAAI,CAACoI,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACpI,QAAQ,GAAG,IAAI;MACpD;KACD0I,aAAa,2BACb;OACC,OAAOpJ,cAAI,CAACC,OAAO,CAAC,IAAI,CAAC6I,QAAQ,CAACM,aAAa,CAAC,GAAG,IAAI,CAACN,QAAQ,CAACM,aAAa,GAAG,EAAE;MACnF;KACDqB,sBAAsB,oCACtB;OACC,OAAO,IAAI,CAACrB,aAAa,CAAC9P,MAAM,GAAG,CAAC;MACpC;KACD+P,iBAAiB,+BACjB;OACC,OAAOrJ,cAAI,CAACC,OAAO,CAAC,IAAI,CAAC6I,QAAQ,CAACO,iBAAiB,CAAC,GAAG,IAAI,CAACP,QAAQ,CAACO,iBAAiB,GAAG,EAAE;MAC3F;KACDqB,0BAA0B,wCAC1B;OACC,OAAO,IAAI,CAACrB,iBAAiB,CAAC/P,MAAM,GAAG,CAAC;MACxC;KACDqR,sBAAsB,oCACtB;OACC,OAAO,IAAI,CAACpB,iBAAiB,CAAC,IAAI,CAACR,aAAa,CAAC;MACjD;KACD6B,sBAAsB,oCACtB;OACC,OAAO,IAAI,CAACrB,iBAAiB,CAAC,IAAI,CAACpB,aAAa,CAAC;MACjD;KACD0C,qBAAqB,mCACrB;OACC,OAAO,IAAI,CAACtB,iBAAiB,CAAC,IAAI,CAACe,YAAY,CAAC;;IAEjD;GACDpO,QAAQ,kvCA6BFyB,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,uiBAarDD,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC,g6BAuBnDD,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,6WAUpDD,aAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC,kcAUnED,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC;CAW5D,CAAC;;;;ACjPD,CAUA,IAAMkN,YAAY,GAAG;GACpBhP,KAAK,EAAE;KACNQ,MAAM,EAAE;OACPjD,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgB,OAAO,EAAE;OACR3D,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACDlD,KAAK,EAAE;OACNO,IAAI,EAAE0C,KAAK;OACXC,QAAQ,EAAE;MACV;KACDkB,SAAS,EAAE;OACV7D,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;MACV;KACD+O,aAAa,EAAE;OACd1R,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;MACV;KACDqB,oBAAoB,EAAE;OACrBhE,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;;IAEX;GACDnE,IAAI,kBACJ;KACC,OAAO;OACNmT,2BAA2B,EAAE;MAC7B;IACD;GACD/O,MAAM,EAAC,CAACG,UAAU,EAAExE,kBAAkB,CAAC;GACvCQ,UAAU,EACT;KACC,kBAAkB,EAAMkF,sCAAK;KAC7B,yBAAyB,EAAIiJ,kBAAgB;KAC7C,eAAe,EAAO0E,YAAY;KAClC,4BAA4B,EAAGzN;IAC/B;GACF7B,QAAQ;KAEN8B,WAAW,yBACX;OACC,OAAO;SACN,iDAAiD,EAAE,IAAI,CAACP,SAAS,KAAK,KAAK,IAAI,IAAI,CAACZ,MAAM,KAAKC,4CAAM,CAACE;QACtG;MACD;KACD0L,aAAa,2BACb;OACC,OAAO,IAAI,CAACZ,KAAK,CAACnD,KAAK,CAACnK,MAAM;MAC9B;KACDiR,UAAU,wBACV;OACC,OAAO,IAAI,CAAClT,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkM,UAAU;MACzC;KACDrN,cAAc,4BACd;OACC,OAAO;SACNb,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBmO,SAAS,EAAE,IAAI,CAACH,2BAA2B;SAC3C9N,SAAS,EAAE,IAAI,CAACA,SAAS;SACzBY,WAAW,EAAE,IAAI,CAACiN,aAAa;SAC/BhN,OAAO,EAAE,IAAI,CAACpB,mBAAmB;SACjCzB,QAAQ,EAAE,KAAK;SACfmC,oBAAoB,EAAE,IAAI,CAACA;QAC3B;MACD;KACDiJ,MAAM,oBACN;OACC,IAAIM,iBAAiB,GAAG,IAAI;OAC5B,IAAI,IAAI,CAAC5O,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,cAAc,CAAC,IACtD,IAAI,CAACpB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoM,YAAY,CAAChS,cAAc,CAAC,mBAAmB,CAAC,EAE5E;SACCwN,iBAAiB,GAAG,IAAI,CAAC5O,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoM,YAAY,CAACxE,iBAAiB;;OAG3E,IAAID,aAAa,GAAG,IAAI;OACxB,IAAI,IAAI,CAAC3O,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,cAAc,CAAC,IACtD,IAAI,CAACpB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoM,YAAY,CAAChS,cAAc,CAAC,eAAe,CAAC,EAExE;SACCuN,aAAa,GAAG,IAAI,CAAC3O,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoM,YAAY,CAACzE,aAAa;;OAGnE,IAAIE,kBAAkB,GAAG,EAAE;OAC3B,IAAI,IAAI,CAAC7O,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,cAAc,CAAC,IACtD,IAAI,CAACpB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoM,YAAY,CAAChS,cAAc,CAAC,YAAY,CAAC,EAErE;SACCyN,kBAAkB,GAAG,IAAI,CAAC7O,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoM,YAAY,CAACC,UAAU;;OAGrE,IAAIvE,qBAAqB,GAAG,EAAE;OAC9B,IAAI,IAAI,CAAC9O,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,cAAc,CAAC,IACtD,IAAI,CAACpB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoM,YAAY,CAAChS,cAAc,CAAC,qBAAqB,CAAC,IAC1E,CAAC2C,KAAK,CAACkE,OAAO,CAAC,IAAI,CAACjI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoM,YAAY,CAACE,mBAAmB,CAAC,EAE5E;SACCxE,qBAAqB,GAAG,IAAI,CAAC9O,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoM,YAAY,CAACE,mBAAmB;;OAGjF,IAAIC,mBAAmB,GAAG,EAAE;OAC5B,IAAI,IAAI,CAACvT,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,0BAA0B,CAAC,IAClE,CAAC2C,KAAK,CAACkE,OAAO,CAAC,IAAI,CAACjI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACwM,wBAAwB,CAAC,EAEpE;SACCD,mBAAmB,GAAG,IAAI,CAACvT,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACwM,wBAAwB;;OAGvE,OAAO;SACN1D,YAAY,EAAE,IAAI,CAAC9P,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC8I,YAAY;SAClD5H,MAAM,EAAE,IAAI,CAACqH,KAAK,CAACrH,MAAM;SACzBO,cAAc,EAAE,IAAI,CAACzI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACyB,cAAc;SACtDC,QAAQ,EAAE,IAAI,CAAC6G,KAAK,CAAC7G,QAAQ;SAC7B0B,WAAW,EAAE,IAAI,CAACpK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoD,WAAW;SAChDD,OAAO,EAAE,IAAI,CAACnK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmD,OAAO;SACxCG,SAAS,EAAE,IAAI,CAACtK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsD,SAAS;SAC5CuE,kBAAkB,EAAlBA,kBAAkB;SAClB0E,mBAAmB,EAAnBA,mBAAmB;SACnBzE,qBAAqB,EAArBA,qBAAqB;SACrBF,iBAAiB,EAAjBA,iBAAiB;SACjB6E,aAAa,EAAE,IAAI,CAACzT,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC0M,YAAY;SACnD/E,aAAa,EAAbA;QACA;MACD;KACDgF,kBAAkB,gCAClB;OACC,OAAO,IAAI,CAAC3T,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM;;MAGpD2J,gBAAI,CAACC,QAAQ,CAAC;KAChBtB,KAAK,EAAE,eAAAnE,KAAK;OAAA,OAAIA,KAAK,CAACC,aAAa;;IACnC,CAAC,CACF;GACFzK,OAAO,EAAC;KACPgT,YAAY,wBAACxI,KAAK,EAClB;OACC,IAAI,CAAC4H,2BAA2B,GAAG5H,KAAK,CAACmH,mBAAmB;MAC5D;KACDlM,mBAAmB,+BAACC,MAAM,EAC1B;OACC,IAAI,CAACvD,KAAK,CAAC,0BAA0B,EAAE,UAAU,EAAEuD,MAAM,CAAC;;IAE3D;GACDpC,QAAQ,8QAO+ByB,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC;CA0B1F,CAAC;;CCxLD,IAAMiO,SAAS,GAAG;GACjB/P,KAAK,EAAE;KACNQ,MAAM,EAAE;OACPjD,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgB,OAAO,EAAE;OACR3D,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACDlD,KAAK,EAAE;OACNO,IAAI,EAAE0C,KAAK;OACXC,QAAQ,EAAE;MACV;KACDkB,SAAS,EAAE;OACV7D,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;MACV;KACDoB,UAAU,EAAE;OACX/D,IAAI,EAAE0C;MACN;KACDsB,oBAAoB,EAAE;OACrBhE,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;;IAEX;GACDC,MAAM,EAAC,CAACG,UAAU,CAAC;GACnBhE,UAAU,EACV;KACC,kBAAkB,EAAOkF,sCAAK;KAC9B,iCAAiC,EAAGC,SAAa;KACjD,mCAAmC,EAAGC;IACtC;GACD5E,OAAO,EACP;KACCoF,UAAU,sBAAClD,CAAC,EACZ;OACCmD,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC2N,+BAA+B,CAAChR,CAAC,CAAC;MACzD;KACDuD,mBAAmB,+BAACC,MAAM,EAC1B;OACC,IAAI,CAACvD,KAAK,CAAC,0BAA0B,EAAE,YAAY,EAAEuD,MAAM,CAAC;;IAG7D;GACD3C,QAAQ,EACR;KACCkC,cAAc,4BACd;OACC,OAAO;SACNb,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBI,UAAU,EAAE,IAAI,CAACF,SAAS,GAAG,IAAI,CAACE,UAAU,GAAG,EAAE;SACjDF,SAAS,EAAE,IAAI,CAACA,SAAS;SACzBY,WAAW,EAAE,IAAI;SACjBC,OAAO,EAAE,IAAI,CAACpB,mBAAmB;SACjCzB,QAAQ,EAAE,CAAC,IAAI,CAACgC,SAAS;SACzBG,oBAAoB,EAAE,IAAI,CAACA;QAC3B;MACD;KACDI,WAAW,yBACX;OACC,OAAO;SACN,iDAAiD,EAAE,IAAI,CAACP,SAAS,KAAK;QACtE;MACD;KACDQ,KAAK,mBACL;OACC,OAAOC,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC;;IAEpE;GAED1B,QAAQ,qYAUHyB,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC,6XAUzDD,aAAG,CAACC,UAAU,CAAC,gDAAgD,CAAC;CAWzE,CAAC;;CC5GM,IAAMmO,iBAAiB,GAAGvN,MAAM,CAACC,MAAM,CAAC;GAC9CuN,IAAI,EAAE,MAAM;GACZC,YAAY,EAAE,eAAe;GAC7BC,IAAI,EAAE,MAAM;GACZC,GAAG,EAAE,KAAK;GACVC,WAAW,EAAE,iBAAiB;GAC9BC,YAAY,EAAE;CACf,CAAC,CAAC;;CCLF,IAAMC,YAAY,GAAG;GACpBrJ,KAAK,EACJ;KACC/D,iBAAiB,6BAACqN,eAAe,EACjC;OACC,IAAI,IAAI,CAACC,mBAAmB,EAC5B;SACC,IAAMC,SAAS,GAAG,IAAI,CAACzU,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACC,UAAU;SAC9D,IAAMC,cAAc,GAAGL,eAAe,GAAGE,SAAS,CAACtN,WAAW,GAAGsN,SAAS,CAAC/N,OAAO;SAClF,IAAI,CAAC8N,mBAAmB,CAACK,cAAc,CAACD,cAAc,CAAC;SACvD,IAAI,CAAC9M,MAAM,CAACC,QAAQ,CAAC,8BAA8B,EAAE;WAAE+M,IAAI,EAAEF;UAAgB,CAAC;;;IAGhF;GACFjR,QAAQ,EACP;KACCoR,sBAAsB,oCACtB;OACC,OAAO9O,EAAE,CAAC5E,IAAI,CAACiH,QAAQ,CAAC,IAAI,CAAC0M,iBAAiB,CAAC;MAC/C;KACDC,eAAe,6BACf;OACC,OAAO,IAAI,CAACD,iBAAiB,CAACE,QAAQ,CAACC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;MACvD;KACDjO,iBAAiB,+BACjB;OACC,OAAO,IAAI,CAACY,MAAM,CAACuF,OAAO,CAAC,iCAAiC,CAAC;MAC7D;KACD/B,WAAW,yBACX;OACC,OAAO,IAAI,CAACxD,MAAM,CAACuF,OAAO,CAAC,8BAA8B,CAAC;;IAE3D;GACFzM,OAAO,EACN;KACCwU,0BAA0B,sCAACjS,KAAK,EAChC;OACC,IAAM2R,IAAI,GAAG3R,KAAK,CAACqI,OAAO,EAAE,CAACsJ,IAAI;OACjC,IAAI,CAAChN,MAAM,CAACC,QAAQ,CAAC,8BAA8B,EAAE;SAAE+M,IAAI,EAAJA;QAAM,CAAC;OAC9D,IAAI,IAAI,CAACxJ,WAAW,CAACC,UAAU,KAAK,UAAU,EAC9C;SACC,IAAI,CAACvL,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACC,UAAU,CAAC,IAAI,CAACzN,iBAAiB,GAAG,aAAa,GAAG,SAAS,CAAC,GAAG4N,IAAI;;MAExG;KACDO,gBAAgB,4BAAC/R,IAAa,EAC9B;OACC,IAAI,IAAI,CAACkR,mBAAmB,EAC5B;SACC,IAAIlR,IAAI,EACR;WACC,IAAI,CAAC,IAAI,CAACgS,aAAa,EACvB;aACC,IAAI,CAACA,aAAa,GAAG,IAAI;aACzB,IAAI,CAACd,mBAAmB,CAACe,QAAQ,CAChC5P,aAAG,CAACC,UAAU,CAAC,qDAAqD,CAAC,CACrE;;UAEF,MACI,IAAI,IAAI,CAAC0P,aAAa,EAC3B;WACC,IAAI,CAACA,aAAa,GAAG,KAAK;WAC1B,IAAI,CAACd,mBAAmB,CAACgB,UAAU,EAAE;;;;;CAK3C,CAAC;;CC5DD,IAAMC,WAAW,GAAG;GACnB3R,KAAK,EAAE;KACNQ,MAAM,EAAE;OACPjD,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgB,OAAO,EAAE;OACR3D,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACD0R,OAAO,EAAE;OACRrU,IAAI,EAAEmF,MAAM;OACZxC,QAAQ,EAAE;MACV;KACD2R,aAAa,EAAE;OACdtU,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDd,QAAQ,EAAE;OACT7B,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;MACV;KACD4R,cAAc,EAAE;OACfvU,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACD6R,SAAS,EAAE;OACVxU,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACD8R,YAAY,EAAE;OACbzU,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgR,iBAAiB,EAAE;OAClB3T,IAAI,EAAEmF,MAAM;OACZxC,QAAQ,EAAE;;IAEX;GACDC,MAAM,EAAE,CAACG,UAAU,EAAEkQ,YAAY,CAAC;GAClClU,UAAU,EAAE;KACX,kBAAkB,EAAEkF,sCAAK;KACzB,wBAAwB,EAAEyQ,sDAAU;KACpC,2BAA2B,EAAEC;IAC7B;GACDnW,IAAI,kBACJ;KACC,OAAO;OACNoW,iBAAiB,EAAE,IAAI;OACvBC,OAAO,EAAE,EAAE;OACXC,gCAAgC,EAAE,IAAI;OACtCC,yBAAyB,EAAE,CAAC;OAC5B5B,mBAAmB,EAAE,IAAI;OACzBc,aAAa,EAAE;MACf;IACD;GACD3R,QAAQ,EAAE;KACTkC,cAAc,4BACd;OACC,OAAO;SACNb,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBe,OAAO,EAAE,IAAI,CAACpB,mBAAmB;SACjCzB,QAAQ,EAAE;QACV;MACD;KACDmT,MAAM,oBACN;OACC,OAAO;SACNnS,QAAQ,EAAE,IAAI,CAAC0R,cAAc;SAC7BU,GAAG,EAAE,IAAI,CAACT;QACV;MACD;KACDnQ,KAAK,mBACL;OACC,OAAO,IAAI,CAACiQ,aAAa;MACzB;KACDY,iBAAiB,+BACjB;OACC,OAAO,IAAI,CAACvW,KAAK,CAAC+G,IAAI,CAACyP,OAAO,KAAKzC,iBAAiB,CAACI,GAAG;;IAEzD;GACDlJ,KAAK,EAAE;KACNK,WAAW,uBAACmL,cAAc,EAC1B;OACC,IAAI,CAAC,IAAI,CAACjC,mBAAmB,EAC7B;SACC;;OAGD,IAAI,CAACa,gBAAgB,CAAC,CAACoB,cAAc,CAAC3B,IAAI,IAAI,CAAC2B,cAAc,CAAC3B,IAAI,CAAC7R,QAAQ,CAAC,QAAQ,CAAC,CAAC;OAEtF,IAAI,CAAC6E,MAAM,CAACO,MAAM,CACjB,mCAAmC,EACnC,CAAC,IAAI,CAACiN,aAAa,CACnB;;IAEF;GACDxO,OAAO,qBAAG;KACT,IAAI,IAAI,CAACiO,sBAAsB,EAC/B;OACC,IAAI,CAAC2B,uBAAuB,EAAE;;IAE/B;GACD9V,OAAO,EAAE;KACR8V,uBAAuB,qCACvB;OAAA;OACC,IAAI,CAAClC,mBAAmB,GAAG,IAAImC,+BAAM,CAAC,IAAI,CAAC3B,iBAAiB,CAAC;OAC7D,IAAI,CAACR,mBAAmB,CAACoC,MAAM,EAAE,CAAC9J,IAAI,CAAC;SAAA,OAAM,KAAI,CAAC+J,eAAe,EAAE;SAAC,SAAM,CAAC,YAAM,EAAE,CAAC;OACpF,IAAI,CAACrC,mBAAmB,CAAC7R,SAAS,CAAC,qBAAqB,EAAE,IAAI,CAACyS,0BAA0B,CAACpK,IAAI,CAAC,IAAI,CAAC,CAAC;MACrG;KACD6L,eAAe,6BACf;OAAA;OACC,IAAMzL,KAAK,GAAG,IAAI,CAACoJ,mBAAmB,CAACsC,QAAQ,EAAE;OACjD,IAAMxL,WAAW,GAAG;SACnBwJ,IAAI,oBAAE1J,KAAK,CAAC2L,OAAO,mDAAb,eAAejC;QACrB;OACD,IAAI,CAAChN,MAAM,CAACC,QAAQ,CAAC,8BAA8B,EAAEuD,WAAW,CAAC;MACjE;KACDtF,UAAU,sBAAClD,CAAC,EACZ;OACCmD,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC7D,UAAU,CAAC,IAAI,CAACtC,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgQ,0BAA0B,EAAE;SAACpT,KAAK,EAAE;QAAK,CAAE;MACrG;KACDqT,6BAA6B,yCAAC9T,KAAK,EACnC;OACC8C,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC8Q,6BAA6B,CAAC9T,KAAK,CAAC;;IAE5D;GACDe,QAAQ,4TAWHyB,aAAG,CAACC,UAAU,CAAC,2DAA2D,CAAC;CAiBjF,CAAC;;CC5JD,IAAMsR,UAAU,GAAG;GAClBpT,KAAK,EAAE;KACNQ,MAAM,EAAE;OACPjD,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgB,OAAO,EAAE;OACR3D,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACDmT,gBAAgB,EAAE;OACjB9V,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDoT,uBAAuB,EAAE;OACxB/V,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDqT,KAAK,EAAE;OACNhW,IAAI,EAAE0C,KAAK;OACXC,QAAQ,EAAE;MACV;KACDqB,oBAAoB,EAAE;OACrBhE,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;MACV;KACDsT,sBAAsB,EAAE;OACvBjW,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE,KAAK;OACf,WAAS;;IAEV;GACDC,MAAM,EAAE,CAACG,UAAU,EAAExE,kBAAkB,CAAC;GACxCC,IAAI,kBACJ;KACC,OAAO;OACN0X,aAAa,EAAE,EAAE;OACjBC,cAAc,EAAE;MAChB;IACD;GACDpX,UAAU,EACT;KACC,kBAAkB,EAAEkF,sCAAK;KACzB,iBAAiB,EAAEmS;IACnB;GACF7W,OAAO,EACN;KACCyF,mBAAmB,+BAACC,MAAM,EAC1B;OACC,IAAI,CAACvD,KAAK,CAAC,0BAA0B,EAAE,YAAY,EAAEuD,MAAM,CAAC;MAC5D;KAEDoR,kBAAkB,8BAAC5U,CAAC,EACpB;OACC,IAAM6U,UAAU,GAAG7U,CAAC,CAACjD,IAAI;OACzB,IAAI,CAAC0X,aAAa,CAAChW,OAAO,CAAC,UAACqW,KAAK,EAAK;SACrCA,KAAK,CAACC,QAAQ,GAAGD,KAAK,CAAC3I,EAAE,KAAK0I,UAAU;QACxC,CAAC;OAEF,IAAI,CAAC3X,KAAK,CAAC+G,IAAI,CAACoQ,gBAAgB,GAAGrU,CAAC,CAACjD,IAAI;MACzC;KAEDiY,mBAAmB,+BAAChV,CAAC,EACrB;OACC,IAAM6U,UAAU,GAAG7U,CAAC,CAACjD,IAAI;OACzB,IAAI,CAAC2X,cAAc,CAACjW,OAAO,CAAC,UAACqW,KAAK,EAAK;SACtCA,KAAK,CAACC,QAAQ,GAAGD,KAAK,CAAC3I,EAAE,KAAK0I,UAAU;QACxC,CAAC;OAEF,IAAI,CAAC3X,KAAK,CAAC+G,IAAI,CAACqQ,uBAAuB,GAAGtU,CAAC,CAACjD,IAAI;MAChD;KACDkY,UAAU,sBAACC,MAAM,EAAEC,YAAY,EAC/B;OACCzR,MAAM,CAAC0R,MAAM,CAAC,IAAI,CAACb,KAAK,CAAC,CAAC9V,OAAO,CAAC,UAACyF,OAAO,EAAK;SAC9CA,OAAO,CAAC6Q,QAAQ,GACd,CAACI,YAAY,IAAI,CAACjR,OAAO,CAAC5F,cAAc,CAAC,IAAI,CAAC,IAC3C4F,OAAO,CAACiI,EAAE,KAAKgJ,YACnB;SACDD,MAAM,CAAC5P,IAAI,CAAC+P,uBAAuB,CAACC,MAAM,CAACpR,OAAO,CAAC,CAAC;QACpD,CAAC;;IAEH;GACFrD,QAAQ,EACP;KACCkC,cAAc,4BACd;OACC,OAAO;SACNb,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBe,OAAO,EAAE,IAAI,CAACpB,mBAAmB;SACjCmB,WAAW,EAAE,IAAI;SACjBT,oBAAoB,EAAE,IAAI,CAACA,oBAAoB;SAC/C8N,SAAS,EAAE,IAAI,CAACkF,aAAa,CAACtK;QAC9B;MACD;KACDsK,aAAa,2BACb;OACC,IAAML,MAAM,GAAG,IAAI,CAACM,SAAS,GAAG,IAAI,CAACf,aAAa,GAAG,IAAI,CAACC,cAAc;OAExE,OAAOQ,MAAM,CAACO,IAAI,CAAC,UAACX,KAAK,EAAK;SAC7B,OAAOA,KAAK,CAACC,QAAQ;QACrB,CAAC;MACF;KACDS,SAAS,uBACT;OACC,OACC,IAAI,CAACtY,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI,KAAK,kBAAkB,IAChD,IAAI,CAACtJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI,KAAK,SAAS,IAC1C,IAAI,CAACtJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI,KAAK,kBAAkB;MAEvD;KACDkP,mBAAmB,iCACnB;OACC,OAAO,CAAC,IAAI,CAAClB,sBAAsB;;IAEpC;GACFvX,OAAO,qBACP;KACC,IAAI,IAAI,CAACuY,SAAS,EAClB;OACC,IAAI,CAACP,UAAU,CAAC,IAAI,CAACR,aAAa,EAAE,IAAI,CAACJ,gBAAgB,CAAC;;KAG3D,IAAI,CAACY,UAAU,CAAC,IAAI,CAACP,cAAc,EAAE,IAAI,CAACJ,uBAAuB,CAAC;IAClE;GACDlT,QAAQ,8MAM+ByB,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,2YASlDD,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC,qXAUnDD,aAAG,CAACC,UAAU,CAAC,0CAA0C,CAAC;CAOpG,CAAC;;ACjKD,YAAe;GACd9B,KAAK,EAAE;KACN2U,WAAW,EAAE;OACZpX,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACD0U,aAAa,EAAE;OACdrX,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;MACV;KACD2U,yBAAyB,EAAE;OAC1BtX,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;MACV;KACD4U,cAAc,EAAE;OACfvX,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE,KAAK;OACf,WAAS;;IAEV;GACDL,QAAQ,EAAE;KACTkV,WAAW,yBACX;OACC,OAAO;SAAC,8CAA8C,EAAE,IAAI,CAACH,aAAa,KAAK;QAAM;MACrF;KACDI,yCAAyC,uDACzC;OACC,IAAM5R,iBAAiB,GAAG,IAAI,CAACY,MAAM,CAACuF,OAAO,CAAC,iCAAiC,CAAC;OAChF,OAAO,IAAI,CAACuL,cAAc,IAAI1R,iBAAiB;;IAEhD;GACDtG,OAAO,EAAE;KACRmY,kBAAkB,8BAAC5V,KAAK,EACxB;OACC8C,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC6S,iBAAiB,CAAC7V,KAAK,CAAC;MAC/C;KACD8V,MAAM,kBAAC9V,KAAK,EACZ;OACC,IAAI,CAACJ,KAAK,CAAC,WAAW,EAAEI,KAAK,CAAC;MAC9B;KACD+V,+BAA+B,2CAAC/V,KAAK,EACrC;OACC,IAAI,CAACJ,KAAK,CAAC,wCAAwC,EAAEI,KAAK,CAAC;;IAE5D;GACDe,QAAQ,6uCAyBCyB,aAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC,sPAO/DD,aAAG,CAACC,UAAU,CAAC,oEAAoE,CAAC;CAQ9F,CAAC;;CChFD,IAAMuT,QAAQ,GAAG;GAChBrV,KAAK,EAAE;KACNsV,aAAa,EAAE;OACd/X,IAAI,EAAE0C,KAAK;OACXC,QAAQ,EAAE;;IAEX;GACD5D,UAAU,EAAE;KACX,qBAAqB,EAAEiZ,2DAAI;KAC3B,6BAA6B,EAAEC,kEAAW;KAC1C,4BAA4B,EAAEC;IAC9B;GACD3Y,OAAO,EAAE;KACR0X,SAAS,qBAAC9W,IAAI,EACd;OACC,OAAOA,IAAI,CAACH,IAAI,KAAKmY,oBAAO,CAACnY,IAAI,EAAE;MACnC;KACDoY,QAAQ,oBAACjY,IAAI,EACb;OACC,OAAOA,IAAI,CAACH,IAAI,KAAKqY,mBAAM,CAACrY,IAAI,EAAE;;IAEnC;GACD6C,QAAQ;CAST,CAAC;;;;;;;ACtCD,CAUA,IAAMyV,gBAAgB,GAAG;GACxB7V,KAAK,EAAE;KACNkB,OAAO,EAAE;OACR3D,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACD4V,cAAc,EAAE;OACfvY,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;;IAEX;GACDC,MAAM,EAAE,CAACG,UAAU,CAAC;GACpBhE,UAAU,EAAE;KACX,kBAAkB,EAAEkF;IACpB;GACD3B,QAAQ;KACPW,MAAM,oBACN;OACC,IACC,IAAI,CAACuV,KAAK,IAET,IAAI,CAACA,KAAK,CAACC,SAAS,IACjB,IAAI,CAACD,KAAK,CAACC,SAAS,CAACxY,MACxB,IAEA,IAAI,CAACuY,KAAK,CAACE,SAAS,IACjB,IAAI,CAACF,KAAK,CAACE,SAAS,CAACzY,MACxB,EAEF;SACC,OAAOiD,4CAAM,CAACK,QAAQ;;OAGvB,IACC,IAAI,CAACgV,cAAc,IAChB,IAAI,CAACA,cAAc,CAACtY,MAAM,EAE9B;SACC,OAAOiD,4CAAM,CAACC,OAAO;;OAGtB,OAAOD,4CAAM,CAACE,QAAQ;MACtB;KACDoB,cAAc,4BACd;OACC,OAAO;SACNb,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBI,UAAU,EAAE,EAAE;SACdF,SAAS,EAAE,IAAI;SACfY,WAAW,EAAE,KAAK;SAClBC,OAAO,EAAE,IAAI,CAACpB,mBAAmB;SACjCzB,QAAQ,EAAE,KAAK;SACfmC,oBAAoB,EAAE;QACtB;MACD;KACD2U,gBAAgB,8BAChB;OACC,IAAMC,eAAe,GAAG,IAAI,CAACC,kBAAkB,EAAE;OACjD,IAAID,eAAe,EACnB;SACC,OAAOA,eAAe,CAACvU,KAAK;;OAG7B,OAAOC,aAAG,CAACC,UAAU,CAAC,yDAAyD,CAAC;MAChF;KACDuU,UAAU,wBACV;OACC,IAAIC,YAAY,GAAG,EAAE;OACrB,IAAMH,eAAe,GAAG,IAAI,CAACC,kBAAkB,EAAE;OACjD,IAAID,eAAe,EACnB;SACC,IAAGA,eAAe,CAACG,YAAY,EAC/B;WACCA,YAAY,GAAGzU,aAAG,CAACC,UAAU,CAAC,gDAAgD,CAAC;UAC/E,MAED;WACCwU,YAAY,GAAGzU,aAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;;;OAIpF,OAAOwU,YAAY;MACnB;KACDC,OAAO,qBACP;OACC,IAAMC,QAAQ,GAAG,IAAI,CAACJ,kBAAkB,EAAE;OAE1C,OAAQI,QAAQ,IAAIA,QAAQ,CAACC,SAAS;;MAEpC3J,gBAAI,CAACC,QAAQ,CAAC;KAChBgJ,KAAK,EAAE,eAAAzO,KAAK;OAAA,OAAIA,KAAK,CAACoP,gBAAgB;;IACtC,CAAC,CACF;GACD5Z,OAAO,EAAE;KACR6Z,mBAAmB,qCACnB;OAAA,IADqBlX,MAAM,QAANA,MAAM;OAE1B,IAAI,IAAI,CAAC2W,kBAAkB,EAAE,KAAK,IAAI,EACtC;SACC,IAAI,CAACQ,gBAAgB,CAACnX,MAAM,CAAC;QAC7B,MAED;SACC,IAAI,CAACoX,iBAAiB,EAAE;;MAEzB;KACDD,gBAAgB,4BAACE,WAAW,EAC5B;OACCC,sBAAW,CAACvX,IAAI,CAAC;SAChB2L,EAAE,EAAE,2BAA2B;SAC/B2L,WAAW,EAAXA,WAAW;SACXvD,KAAK,EAAE,IAAI,CAACyD,wBAAwB,EAAE;SACtCC,UAAU,EAAE,IAAI;SAChBC,SAAS,EAAE;QACX,CAAC;MACF;KACDC,iBAAiB,+BACjB;OACCJ,sBAAW,CAACK,OAAO,CAAC,2BAA2B,CAAC;MAChD;KACDJ,wBAAwB,sCACxB;OAAA;OACC,IAAMzD,KAAK,GAAG,EAAE;OAChB,IAAI,IAAI,CAACwC,KAAK,CAACE,SAAS,EACxB;SAAA,2CACwB,IAAI,CAACF,KAAK,CAACE,SAAS;WAAA;SAAA;WAAA,6BAC3C;aAAA,IADWO,QAAQ;aAElBjD,KAAK,CAACjP,IAAI,CAAC;eACV+S,IAAI,EAAEb,QAAQ,CAAC5U,KAAK;eACpB0V,OAAO,EAAE,mBAAM;iBACd,KAAI,CAACH,iBAAiB,EAAE;iBACxB,KAAI,CAACnT,MAAM,CAACC,QAAQ,CAAC,qCAAqC,EAAE;mBAACsT,eAAe,EAAEf,QAAQ,CAACrL;kBAAG,CAAC;;cAE5F,CAAC;YACF;WATD;aAAA;;;WASC;;WAAA;;;OAEF,IAAMqM,gBAAgB,GAAG;SACxBH,IAAI,EAAExV,aAAG,CAACC,UAAU,CAAC,yDAAyD,CAAC;SAC/EyR,KAAK,EAAE;QACP;OACD,IAAI,IAAI,CAACwC,KAAK,CAACC,SAAS,EACxB;SACC,IAAIzC,KAAK,CAAC/V,MAAM,GAAG,CAAC,EACpB;WACC+V,KAAK,CAACjP,IAAI,CAAC;aAACmT,SAAS,EAAE;YAAK,CAAC;;SAC7B,4CACsB,IAAI,CAAC1B,KAAK,CAACC,SAAS;WAAA;SAAA;WAAA,+BAC3C;aAAA,IADW5V,QAAQ;aAElBoX,gBAAgB,CAACjE,KAAK,CAACjP,IAAI,CAAC;eAC3B+S,IAAI,EAAEjX,QAAQ,CAACwB,KAAK;eACpB0V,OAAO,EAAE,mBAAM;iBACd,KAAI,CAACH,iBAAiB,EAAE;iBACxB,KAAI,CAACnT,MAAM,CAACO,MAAM,CAAC,wCAAwC,EAAE;mBAACmT,kBAAkB,EAAEtX,QAAQ,CAAC+K;kBAAG,CAAC;;cAEhG,CAAC;YACF;WATD;aAAA;;;WASC;;WAAA;;;OAEF,IAAI,IAAI,CAAC2K,cAAc,EACvB;SACC,IAAI0B,gBAAgB,CAACjE,KAAK,CAAC/V,MAAM,GAAG,CAAC,EACrC;WACCga,gBAAgB,CAACjE,KAAK,CAACjP,IAAI,CAAC;aAACmT,SAAS,EAAE;YAAK,CAAC;;SAE/CD,gBAAgB,CAACjE,KAAK,CAACjP,IAAI,CAAC;WAC3B+S,IAAI,EAAExV,aAAG,CAACC,UAAU,CAAC,yDAAyD,CAAC;WAC/EwV,OAAO,EAAE,mBAAM;aACd,KAAI,CAACH,iBAAiB,EAAE;aACxB,KAAI,CAACN,iBAAiB,EAAE;;UAEzB,CAAC;;OAEH,IAAIW,gBAAgB,CAACjE,KAAK,CAAC/V,MAAM,GAAG,CAAC,EACrC;SACC+V,KAAK,CAACjP,IAAI,CAACkT,gBAAgB,CAAC;;OAG7B,OAAOjE,KAAK;MACZ;KACDsD,iBAAiB,+BACjB;OAAA;OACCxU,2BAAO,CAAC7D,UAAU,CAAC,IAAI,CAACsX,cAAc,EAAE;SACvChW,KAAK,EAAE;QACP,CAAC,CAACkJ,IAAI,CAAC,YAAM;SACb,MAAI,CAAChF,MAAM,CAACC,QAAQ,CAAC,gCAAgC,CAAC;QACtD,CAAC;MACF;KACD0T,uBAAuB,qCACvB;OAAA;OACC,IAAMxB,eAAe,GAAG,IAAI,CAACC,kBAAkB,EAAE;OACjD,IAAID,eAAe,CAACM,SAAS,EAC7B;SACCpU,2BAAO,CAAC7D,UAAU,CAAC2X,eAAe,CAACM,SAAS,EAAE;WAC7C3W,KAAK,EAAE;UACP,CAAC,CAACkJ,IAAI,CAAC,UAACvK,MAAM,EAAK;WACnB,IAAM+X,QAAQ,GAAG/X,MAAM,CAACiJ,OAAO,EAAE,CAAC2B,GAAG,CAAC,UAAU,CAAC;WACjD,IAAImN,QAAQ,EACZ;aACC,MAAI,CAACxS,MAAM,CAACC,QAAQ,CAAC,8BAA8B,EAAE;eAACuS,QAAQ,EAARA;cAAS,CAAC;;UAEjE,CAAC;;MAEH;KACDJ,kBAAkB,gCAClB;OACC,IAAII,QAAQ,GAAG,IAAI;OACnB,IAAI,IAAI,CAACT,KAAK,CAACwB,eAAe,GAAG,CAAC,EAClC;SACCf,QAAQ,GAAG,IAAI,CAACoB,eAAe,CAAC,IAAI,CAAC7B,KAAK,CAACwB,eAAe,CAAC;;OAE5D,IAAI,CAACf,QAAQ,IAAI,IAAI,CAACT,KAAK,CAAC2B,kBAAkB,GAAG,CAAC,EAClD;SACClB,QAAQ,GAAG,IAAI,CAACqB,yBAAyB,CAAC,IAAI,CAAC9B,KAAK,CAAC2B,kBAAkB,CAAC;;OAEzE,IAAI,CAAClB,QAAQ,EACb;SACC,IAAMP,SAAS,GAAG,IAAI,CAACF,KAAK,CAACE,SAAS;SACtC,IAAIA,SAAS,IAAIA,SAAS,CAAC,CAAC,CAAC,EAC7B;WACCO,QAAQ,GAAGP,SAAS,CAAC,CAAC,CAAC;WACvB,IAAI,CAACjS,MAAM,CAACC,QAAQ,CAAC,qCAAqC,EAAE;aAACsT,eAAe,EAAEf,QAAQ,CAACrL;YAAG,CAAC;;;OAG7F,IAAI,CAACqL,QAAQ,EACb;SACC,IAAMR,SAAS,GAAG,IAAI,CAACD,KAAK,CAACC,SAAS;SACtC,IAAIA,SAAS,IAAIA,SAAS,CAAC,CAAC,CAAC,EAC7B;WACCQ,QAAQ,GAAG,IAAI,CAACqB,yBAAyB,CAAC7B,SAAS,CAAC,CAAC,CAAC,CAAC7K,EAAE,CAAC;WAC1D,IAAI,CAACnH,MAAM,CAACO,MAAM,CAAC,wCAAwC,EAAE;aAACmT,kBAAkB,EAAE1B,SAAS,CAAC,CAAC,CAAC,CAAC7K;YAAG,CAAC;;;OAIrG,OAAOqL,QAAQ;MACf;KACDoB,eAAe,2BAACzM,EAAU,EAC1B;OAAA,4CACkC,IAAI,CAAC4K,KAAK,CAACE,SAAS;SAAA;OAAA;SAArD,uDACA;WAAA,IADWO,QAAkB;WAE5B,IAAIA,QAAQ,CAACrL,EAAE,KAAKA,EAAE,EACtB;aACC,OAAOqL,QAAQ;;;;SAEhB;;SAAA;;OAED,OAAO,IAAI;MACX;KACDsB,eAAe,2BAAC3M,EAAU,EAC1B;OAAA,4CACkC,IAAI,CAAC4K,KAAK,CAACC,SAAS;SAAA;OAAA;SAArD,uDACA;WAAA,IADW5V,QAAkB;WAE5B,IAAIA,QAAQ,CAAC+K,EAAE,KAAKA,EAAE,EACtB;aACC,OAAO/K,QAAQ;;;;SAEhB;;SAAA;;OAED,OAAO,IAAI;MACX;KACDyX,yBAAyB,qCAACE,UAAkB,EAC5C;OACC,IAAM3X,QAAQ,GAAG,IAAI,CAAC0X,eAAe,CAACC,UAAU,CAAC;OACjD,IAAI,CAAC3X,QAAQ,EACb;SACC,OAAO,IAAI;;OAGZ,IAAM4X,SAAS,GAAG,IAAI,CAAC9b,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC8U,SAAS,IAAI,CAAC;OACxD,IAAIpW,KAAK,GAAG,IAAI;OAChB,IAAI6U,SAAS,GAAG,IAAI;OACpB,IAAIuB,SAAS,GAAG,CAAC,EACjB;SACCpW,KAAK,GAAGC,aAAG,CAACC,UAAU,CAAC,yDAAyD,EAAE;WACjF,SAAS,EAAE1B,QAAQ,CAACwB;UACpB,CAAC;SACF6U,SAAS,GAAGwB,aAAG,CAACC,QAAQ,CAAC9X,QAAQ,CAAC+X,mBAAmB,EAAE;WACtD/D,MAAM,EAAE;aACPgE,UAAU,EAAEJ;;UAEb,CAAC;QACF,MAED;SACCpW,KAAK,GAAGC,aAAG,CAACC,UAAU,CAAC,mEAAmE,EAAE;WAC3F,SAAS,EAAE1B,QAAQ,CAACwB;UACpB,CAAC;SACF6U,SAAS,GAAG,IAAI;;OAEjB,OAAO;SACNtL,EAAE,EAAE,CAAC;SACLvJ,KAAK,EAALA,KAAK;SACL6U,SAAS,EAATA,SAAS;SACTH,YAAY,EAAElW,QAAQ,CAACkW;QACvB;;IAEF;;GAEDlW,QAAQ,0JAK+ByB,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,m5DA4BnED,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC;CAO/E,CAAC;;ACxUD,uBAAe;GACdxF,UAAU,EAAE;KACX,oBAAoB,EAAEqV,WAAW;KACjC,eAAe,EAAEtH,SAAO;KACxB,iBAAiB,EAAE0F,SAAS;KAC5B,eAAe,EAAE/O,OAAO;KACxB,gBAAgB,EAAEgO,YAAY;KAC9B,kBAAkB,EAAEoE,UAAU;KAC9B,YAAY,EAAEiF,IAAI;KAClB,gBAAgB,EAAEhD,QAAQ;KAC1B,yBAAyB,EAAEQ;IAC3B;GACD9Z,IAAI,kBACJ;KACC,IAAMmY,MAAM,GAAG;OACdjB,OAAO,EAAE;SACRzS,MAAM,EAAEC,4CAAM,CAACK,QAAQ;SACvB8Q,OAAO,EAAE,IAAI,CAAC1V,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoV,iBAAiB;SAClDzG,aAAa,EAAEhQ,aAAG,CAACC,UAAU,CAAC,6DAA6D,CAAC;SAC5F1C,QAAQ,EAAE,IAAI,CAAClD,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM;SACzD2O,cAAc,EAAE,IAAI,CAAC5V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACyG,IAAI;SACtDtF,SAAS,EAAE,IAAI,CAAC7V,KAAK,CAAC+G,IAAI,CAACsV,cAAc;SACzCvG,YAAY,EAAE,SAAS;SACvBd,iBAAiB,EAAE,IAAI,CAAChV,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgO;QAC3C;OACD9G,OAAO,EAAE;SACR5J,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkB,MAAM,IAAI,IAAI,CAAClI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkB,MAAM,CAAC5G,MAAM,GAAG,CAAC,GAChFiD,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACC,OAAO;SACjBkB,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,0CAA0C,CAAC;SACjEoI,SAAS,EAAE,IAAI,CAAChO,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM,GACvD,EAAE,GACFtB,aAAG,CAACC,UAAU,CAAC,2CAA2C;QAC7D;OACD0W,SAAS,EAAE;SACVhY,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC,KAAK,GAChDjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAClF,KAAK,CAAC;SAC1EnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC,KAAK;SACtDpX,UAAU,EAAE,IAAI,CAACsX,aAAa,CAAC,IAAI,CAAC1c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAClF,KAAK,CAAC;SAC3EhS,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC2V,oBAAoB,GAC/D,IAAI,CAAC3c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC2V,oBAAoB,KAAK,GAAG,GACpD,IAAI,CAAC3c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC;QACzC;OACDI,OAAO,EAAE,EAAE;OACXC,UAAU,EAAE,EAAE;OACdrC,gBAAgB,EAAE;SACjBlW,MAAM,EAAEC,4CAAM,CAACK;;MAEhB;KAED,IAAI,IAAI,CAAC5E,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,cAAc,CAAC,EAC1D;OACC4W,MAAM,CAACrR,QAAQ,GAAG;SACjBmW,QAAQ,EACP,IAAI,CAAC9c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM,IAC5C8V,QAAQ,CAAC,IAAI,CAAC/c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkM,UAAU,CAAC,IAAI,CACnD;SACD5O,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC,WAAW,GACrD1Y,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAAC3F,KAAK,CAAC;SACzEnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC,WAAW;SAC3D5X,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkW,mBAAmB,GAC9D,IAAI,CAACld,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkW,mBAAmB,KAAK,GAAG,GACnD,IAAI,CAACld,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC;QACxC;;KAGF,IAAI,IAAI,CAACjd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC/b,cAAc,CAAC,OAAO,CAAC,EAC/D;OACC4W,MAAM,CAAC4E,OAAO,GAAG;SAChBtY,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX,KAAK,GAC9CjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC9F,KAAK,CAAC;SACxEnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX,KAAK;SACpDpX,UAAU,EAAE,IAAI,CAACsX,aAAa,CAAC,IAAI,CAAC1c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC9F,KAAK,CAAC;SACzEhS,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoW,kBAAkB,GAC7D,IAAI,CAACpd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoW,kBAAkB,KAAK,GAAG,GAClD,IAAI,CAACpd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX;QACvC;;KAGF,IAAI,IAAI,CAACxc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACqW,qBAAqB,EACjD;OACCrF,MAAM,CAAC6E,UAAU,GAAG;SACnBvY,MAAM,EAAEC,4CAAM,CAACK,QAAQ;SACvBuS,gBAAgB,EAAE,IAAI,CAACnX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmQ,gBAAgB;SAC1DC,uBAAuB,EAAE,IAAI,CAACpX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoQ,uBAAuB;SACxEC,KAAK,EAAE,IAAI,CAACrX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsW,eAAe;SAC9CjY,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuW,qBAAqB,GAChE,IAAI,CAACvd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuW,qBAAqB,KAAK,GAAG,GACrD;QACH;;KAGF,IAAI,IAAI,CAACvd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,UAAU,CAAC,EACtD;OACC4W,MAAM,CAACwF,QAAQ,GAAG;SACjBnG,KAAK,EAAE,IAAI,CAACoG,qBAAqB,CAAC,IAAI,CAACzd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACwW,QAAQ;QAClE;;KAGF,IAAI,IAAI,CAACxd,KAAK,CAAC+G,IAAI,CAAC3F,cAAc,CAAC,kBAAkB,CAAC,IAAI,IAAI,CAACpB,KAAK,CAAC+G,IAAI,CAACyT,gBAAgB,CAACZ,cAAc,EACzG;OACC5B,MAAM,CAACwC,gBAAgB,CAACZ,cAAc,GAAG,IAAI,CAAC5Z,KAAK,CAAC+G,IAAI,CAACyT,gBAAgB,CAACZ,cAAc;;KAGzF,OAAO;OACN5B,MAAM,EAANA;MACA;IACD;GACD/T,MAAM,EAAE,CACPG,UAAU,EACVxE,kBAAkB,CAClB;GACD+D,QAAQ,EAAE;KACT+Z,aAAa,2BACb;OACC,OAAO,IAAI,CAAC5V,MAAM,CAACuF,OAAO,CAAC,+BAA+B,CAAC;MAC3D;KACDsQ,gBAAgB,8BAChB;OACC,OAAO,IAAI,CAAC3F,MAAM,CAACwF,QAAQ,CAACpc,cAAc,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC4W,MAAM,CAACwF,QAAQ,CAACnG,KAAK,CAAC/V,MAAM,GAAG,CAAC;MAC5F;KACDsc,kBAAkB,gCAClB;OACC,OAAO,IAAI,CAAC5F,MAAM,CAAC6E,UAAU,CAACzb,cAAc,CAAC,OAAO,CAAC;MACrD;KACDyc,eAAe,6BACf;OACC,OAAO,IAAI,CAAC7F,MAAM,CAAC4E,OAAO,CAACxb,cAAc,CAAC,OAAO,CAAC;MAClD;KACD0c,iBAAiB,+BACjB;OAAA;OACC,OAAO,IAAI,CAAChe,QAAQ,IAAI,sBAAC,IAAI,CAACE,KAAK,CAAC+G,IAAI,6CAAf,iBAAiBI,WAAW,IAClDxB,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,GAClCD,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;MAEvC;KACDgT,cAAc,4BACd;OAAA;OACC,OAAO,0BAAI,CAAC5Y,KAAK,CAAC+G,IAAI,sDAAf,kBAAiBgD,SAAS,MAAK,UAAU,0BAAI,IAAI,CAAC/J,KAAK,CAAC+G,IAAI,sDAAf,kBAAiBiD,uBAAuB;MAC5F;KACD+T,sBAAsB,oCACtB;OACC,OAAO,IAAI,CAAC/d,KAAK,CAAC+G,IAAI,CAAC3F,cAAc,CAAC,kBAAkB,CAAC;;IAE1D;GACDR,OAAO,EAAE;KACRod,WAAW,yBACX;OACC,IAAI,CAAChZ,OAAO,GAAG,CAAC;MAChB;KACDyY,qBAAqB,iCAACpG,KAAK,EAC3B;OACC,IAAM4G,IAAI,GAAG,EAAE;OAEfzX,MAAM,CAAC0R,MAAM,CAACb,KAAK,CAAC,CAAC9V,OAAO,CAAC,UAACyF,OAAO,EAAK;SACzCiX,IAAI,CAAC7V,IAAI,CAAC8V,oBAAoB,CAAC9F,MAAM,CAACpR,OAAO,CAAC,CAAC;QAC/C,CAAC;OAEF,OAAOiX,IAAI;MACX;KACDxB,iBAAiB,6BAACpF,KAAK,EACvB;OACC,IAAMvW,KAAK,GAAG,EAAE;OAEhB0F,MAAM,CAAC0R,MAAM,CAACb,KAAK,CAAC,CAAC9V,OAAO,CAAC,UAACyF,OAAO,EAAK;SACzClG,KAAK,CAACsH,IAAI,CAACvG,YAAY,CAACuW,MAAM,CAACpR,OAAO,CAAC,CAAC;QACxC,CAAC;OAEF,OAAOlG,KAAK;MACZ;KACD4b,aAAa,yBAACrF,KAAK,EACnB;OACC,IAAMpV,MAAM,GAAG,EAAE;OACjBoV,KAAK,CAAC9V,OAAO,CAAC,UAACC,IAAI,EAAK;SACvB,IAAI,CAAC,CAACK,SAAS,CAACR,IAAI,EAAE,EAAEQ,UAAU,CAACR,IAAI,EAAE,CAAC,CAAC4B,QAAQ,CAACzB,IAAI,CAACH,IAAI,CAAC,EAC9D;WACCY,MAAM,CAACmG,IAAI,CAAC5G,IAAI,CAAC;;QAElB,CAAC;OAEF,OAAOS,MAAM;MACb;KACDkc,YAAY,wBAACrb,CAAC,EAAEzB,IAAI,EACpB;OAAA;OACCqL,cAAI,CAAC0R,kBAAkB,CACtB,wBAAwB,EACxB,aAAa,EACb;SACC9U,IAAI,EAAE,OAAO;SACbzJ,IAAI,EAAE;WACLwB,IAAI,EAAJA;;QAED,CACD,CAACyL,IAAI,CACL,UAACuR,QAAQ,EAAK;SACb,IAAIA,QAAQ,CAACxe,IAAI,EACjB;WACC,KAAI,CAACye,kBAAkB,CAACD,QAAQ,CAACxe,IAAI,EAAEwB,IAAI,CAAC;;QAE7C,EACD,YAAM;SACLkd,kBAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;WAC7BC,OAAO,EAAEhZ,aAAG,CAACC,UAAU,CAAC,+BAA+B;UACvD,CAAC;QACF,CACD;MACD;KACD0Y,kBAAkB,8BAACze,IAAI,EAAEwB,IAAI,EAC7B;OACC,IAAIA,IAAI,KAAK,YAAY,EACzB;SACC,IAAI,CAAC2W,MAAM,CAACsE,SAAS,CAAChY,MAAM,GAAGzE,IAAI,CAAC2c,KAAK,GACtCjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB,IAAI,CAACuT,MAAM,CAACsE,SAAS,CAACxb,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;SAChE,IAAI,CAACW,MAAM,CAACsE,SAAS,CAACpX,SAAS,GAAGrF,IAAI,CAAC2c,KAAK;SAC5C,IAAI,CAACxE,MAAM,CAACsE,SAAS,CAAClX,UAAU,GAAG,IAAI,CAACsX,aAAa,CAAC7c,IAAI,CAACwX,KAAK,CAAC;QACjE,MACI,IAAIhW,IAAI,KAAK,SAAS,EAC3B;SACC,IAAI,CAAC2W,MAAM,CAAC4E,OAAO,CAACtY,MAAM,GAAGzE,IAAI,CAAC2c,KAAK,GACpCjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB,IAAI,CAACuT,MAAM,CAAC4E,OAAO,CAAC9b,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;SAC9D,IAAI,CAACW,MAAM,CAAC4E,OAAO,CAAC1X,SAAS,GAAGrF,IAAI,CAAC2c,KAAK;SAC1C,IAAI,CAACxE,MAAM,CAAC4E,OAAO,CAACxX,UAAU,GAAG,IAAI,CAACsX,aAAa,CAAC7c,IAAI,CAACwX,KAAK,CAAC;QAC/D,MACI,IAAIhW,IAAI,KAAK,UAAU,EAC5B;SACC,IAAI,CAAC2W,MAAM,CAACrR,QAAQ,CAACrC,MAAM,GAAGzE,IAAI,CAACod,WAAW,GAC3C1Y,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB,IAAI,CAACuT,MAAM,CAACrR,QAAQ,CAAC7F,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;SAC/D,IAAI,CAACW,MAAM,CAACrR,QAAQ,CAACzB,SAAS,GAAGrF,IAAI,CAACod,WAAW;;MAElD;KACD2B,MAAM,kBAACzb,KAAK,EACZ;OACC,IAAI,CAACJ,KAAK,CAAC,0BAA0B,EAAEI,KAAK,CAAC;MAC7C;KACD0b,+BAA+B,2CAAC1b,KAAK,EACrC;OACC,IAAI,CAACJ,KAAK,CAAC,uDAAuD,EAAEI,KAAK,CAAC;MAC1E;KACD2b,cAAc,0BAAC5e,KAAK,EACpB;OACC,IAAI,CAACF,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACqK,QAAQ,GAAG7e,KAAK;OAClD+F,EAAE,CAAC+Y,WAAW,CAACC,IAAI,CAAC,aAAa,EAAE,8BAA8B,EAAE,0BAA0B,EAAE/e,KAAK,CAAC;MACrG;KACDmG,mBAAmB,+BAAChF,IAAI,EAAEnB,KAAK,EAC/B;OACC+F,EAAE,CAAC+Y,WAAW,CAACC,IAAI,CAAC,aAAa,EAAE,8BAA8B,EAAE5d,IAAI,EAAEnB,KAAK,CAAC;MAC/E;KACD4K,uBAAuB,qCACvB;OACC,IAAM5D,iBAAiB,GAAG,IAAI,CAACY,MAAM,CAACuF,OAAO,CAAC,iCAAiC,CAAC;OAChF,IAAInG,iBAAiB,EACrB;SACC,IAAI,CAAC8Q,MAAM,CAACrR,QAAQ,CAACrC,MAAM,GAAGC,4CAAM,CAACE,QAAQ;SAE7C,IAAI,CAACuT,MAAM,CAACjB,OAAO,CAACjB,YAAY,GAAG,aAAa;SAChD,IAAI,CAAC9V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACyG,IAAI,GAAG,IAAI,CAACnb,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACC,UAAU,CAACxN,WAAW;SACjG,IAAI,CAAC6Q,MAAM,CAACjB,OAAO,CAACnB,cAAc,GAAG,IAAI,CAAC5V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACC,UAAU,CAACxN,WAAW;QAC7F,MAED;SACC,IAAI,IAAI,CAAC6Q,MAAM,CAACrR,QAAQ,EACxB;WACC,IAAI,CAACqR,MAAM,CAACrR,QAAQ,CAACrC,MAAM,GAAG,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC,WAAW,GAC3E1Y,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;;SAGnB,IAAI,CAACuT,MAAM,CAACjB,OAAO,CAACjB,YAAY,GAAG,SAAS;SAC5C,IAAI,CAAC9V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACyG,IAAI,GAAG,IAAI,CAACnb,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACC,UAAU,CAACjO,OAAO;SAC7F,IAAI,CAACsR,MAAM,CAACjB,OAAO,CAACnB,cAAc,GAAG,IAAI,CAAC5V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACC,UAAU,CAACjO,OAAO;;;IAG3F;GACD3G,OAAO,qBACP;KACC,IAAI,CAACie,WAAW,EAAE;IAClB;GACDkB,YAAY,0BACZ;KACC,IAAI,CAAClB,WAAW,EAAE;IAClB;GACD9Z,QAAQ;CAoFT,CAAC;;AC1YD,sBAAe;GACdrE,IAAI,kBACJ;KACC,OAAO;OACNsf,OAAO,EAAE;MACT;IACD;GACDrY,OAAO,qBACP;KACC,IAAI,CAACsY,YAAY,EAAE;IACnB;GACDrf,OAAO,qBACP;KAAA;KACC,IAAI,CAACC,KAAK,CAACC,GAAG,CAAC,mBAAmB,EAAE,YAAM;OACzC,KAAI,CAACof,SAAS,EAAE;MAChB,CAAC;KAEF,IAAI,CAACrf,KAAK,CAACC,GAAG,CAAC,kBAAkB,EAAE,YAAM;OACxC,KAAI,CAACqf,OAAO,EAAE;MACd,CAAC;IACF;GACD1e,OAAO,EAAE;KACRye,SAAS,uBACT;OACC,IAAI,CAACF,OAAO,GAAG,IAAI;MACnB;KACDG,OAAO,qBACP;OACC,IAAI,CAACH,OAAO,GAAG,KAAK;MACpB;KACDC,YAAY,0BACZ;OACC,IAAIG,YAAY,GAAG,IAAI,CAACC,KAAK,CAAC,cAAc,CAAC;OAC7C,IAAGD,YAAY,EACf;SACC,IAAI,CAACvf,KAAK,CAACuH,GAAG,CAACkY,UAAU,CAAChY,WAAW,CAAC8X,YAAY,CAAC;SACnD,IAAItZ,EAAE,CAACsY,EAAE,CAACmB,MAAM,CACfH,YAAY,EACZ;WACCI,SAAS,EAAE,IAAI,CAAC3f,KAAK,CAAC+G,IAAI,CAAC6Y,OAAO;WAClCC,SAAS,EAAE,IAAI,CAAC7f,KAAK,CAAC+G,IAAI,CAAC6Y,OAAO;WAClCE,YAAY,EAAE;UACd,CACD;;MAEF;KACDC,KAAK,mBACL;OACC,IAAI,CAAC/f,KAAK,CAAC+G,IAAI,CAACiZ,gBAAgB,EAAE;;IAEnC;GACDrc,QAAQ,EAAE;KACTsc,yBAAyB,uCACzB;OACC,OAAO,IAAI,CAACjgB,KAAK,CAAC+G,IAAI,CAACkZ,yBAAyB;MAChD;KACD9Y,WAAW,yBACX;OACC,OAAO,IAAI,CAACnH,KAAK,CAAC+G,IAAI,CAACI,WAAW;MAClC;KACD+Y,YAAY,0BACZ;OACC,OAAO;SAAC,8BAA8B,EAAE,IAAI,CAACf;QAAQ;MACrD;KACDgB,YAAY,0BACZ;OACC,IAAMC,QAAQ,GAAGna,EAAE,CAACoa,GAAG,CAAC,IAAI,CAACrgB,KAAK,CAACuH,GAAG,CAAC;OAEvC,IAAI+Y,MAAM,GAAGF,QAAQ,CAACpO,GAAG,GAAG,EAAE;OAC9B,IAAG,IAAI,CAAChS,KAAK,CAACugB,MAAM,CAACC,MAAM,EAC3B;SACCF,MAAM,IAAIra,EAAE,CAACoa,GAAG,CAAC,IAAI,CAACrgB,KAAK,CAACugB,MAAM,CAACC,MAAM,CAAC,CAACC,MAAM;;OAElD,IAAMlB,YAAY,GAAG,IAAI,CAACC,KAAK,CAAC,cAAc,CAAC;OAC/C,IAAGD,YAAY,EACf;SACCe,MAAM,IAAIra,EAAE,CAACoa,GAAG,CAACd,YAAY,CAAC,CAACkB,MAAM;;;;OAItC,OAAO;SAAC,WAAW,EAAE,eAAe,GAAGH,MAAM,GAAG;QAAM;;;CAGzD,CAAC;;AC/ED,aAAe;GACdzgB,IAAI,kBACJ;KACC,OAAO,EACN;IACD;GACDe,OAAO,EAAE;KACR8f,OAAO,qBACP;OAAA;OACC,IAAMC,MAAM,GAAG,IAAI1a,EAAE,CAAC2a,MAAM,CAAC;SAAC9e,IAAI,EAAE;QAAI,CAAC;OACzC6e,MAAM,CAACrd,IAAI,CAACgX,QAAQ,CAACxF,IAAI,CAAC;OAE1B7O,EAAE,CAACC,WAAW,CAACC,OAAO,CAACua,OAAO,CAAC;SAC9BG,WAAW,EAAE,GAAG;SAChBrK,OAAO,EAAE,IAAI,CAACxW,KAAK,CAAC+G,IAAI,CAACyP;QACzB,CAAC,CAAC1J,IAAI,CAAC,YACR;SACC7G,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC2a,UAAU,EAAE,CAAChU,IAAI,CAAC,UAAC7K,MAAM,EAChD;WACC0e,MAAM,CAACjd,IAAI,EAAE;WAEb,IAAGzB,MAAM,CAAC8e,YAAY,EACtB;aACC,KAAI,CAAC/gB,KAAK,CAAC+G,IAAI,CAACga,YAAY,GAAG9e,MAAM,CAAC8e,YAAY;aAClD,KAAI,CAAC/gB,KAAK,CAAC+G,IAAI,CAACia,sBAAsB,GAAG,IAAI;aAC7C,KAAI,CAAChhB,KAAK,CAAC+G,IAAI,CAACsV,cAAc,GAAGpa,MAAM,CAACoa,cAAc;aACtD,KAAI,CAACrc,KAAK,CAAC+G,IAAI,CAACkZ,yBAAyB,GAAGhe,MAAM,CAACge,yBAAyB;;WAG7E,KAAI,CAACld,KAAK,CAAC,2BAA2B,CAAC;UACvC,CAAC;QACF,CAAC,SAAM,CAAC,YACT;SACC4d,MAAM,CAACjd,IAAI,EAAE;QACb,CAAC;MACF;KACDud,YAAY,0BACZ;OACC9a,2BAAO,CAAC+a,iBAAiB,CAAC,IAAI,CAAC;MAC/B;KACDC,oBAAoB,kCACpB;OACC,IAAI,CAACnhB,KAAK,CAAC+G,IAAI,CAACqa,WAAW,EAAE;MAC7B;KACDC,kBAAkB,gCAClB;OAAA;OACC3W,6BAAY,CAAC4W,aAAa,CAAC,sCAAsC,EAAE;SAAA,OAAM,MAAI,CAACthB,KAAK,CAAC+G,IAAI,CAACqa,WAAW,EAAE;SAAC;OAEvG,IAAI,CAACphB,KAAK,CAAC+G,IAAI,CAACsa,kBAAkB,EAAE;;IAErC;GACD1d,QAAQ,EAAE;KACT4d,kBAAkB,gCAClB;OACC,OAAQ,IAAI,CAACvhB,KAAK,CAAC+G,IAAI,CAACga,YAAY,IAAI,CAAC,IAAI,CAACC,sBAAsB;MACpE;KACDA,sBAAsB,oCACtB;OACC,OAAO,IAAI,CAAChhB,KAAK,CAAC+G,IAAI,CAACia,sBAAsB;MAC7C;KACDQ,gBAAgB,8BAChB;OACC,OAAO,IAAI,CAACxhB,KAAK,CAAC+G,IAAI,CAACya,gBAAgB;;IAExC;GACDtd,QAAQ,sMAGHyB,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC,iPAKrDD,aAAG,CAACC,UAAU,CAAC,wDAAwD,CAAC,wMAIvED,aAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC,4NAM9DD,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,0MAIpDD,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC,wNAM1CD,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,wOAOpDD,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC,8LAM5CD,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC,mOAO/CD,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC,4RAQzCD,aAAG,CAACC,UAAU,CAAC,iBAAiB,CAAC;CAMzC,CAAC;;AChID,8BAAe;GACd/F,IAAI,kBACJ;KACC,OAAO;OACN4hB,SAAS,EAAE;MACX;IACD;GACD7gB,OAAO,EAAE;KACR8C,IAAI,kBACJ;OACC,IAAI,CAAC+d,SAAS,GAAG,KAAK;OACtB,IAAI,CAAC1e,KAAK,CAAC,SAAS,CAAC;MACrB;KACD2e,gBAAgB,8BAChB;OACCvb,2BAAO,CAACub,gBAAgB,EAAE;;IAE3B;GACDxd,QAAQ,kMAIFyB,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC,0JAIzCD,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC,sRAOxCD,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC,6MAMlDD,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;CAYtD,CAAC;;;;;;;ACtDD,AAmBA,YAAe;GACd3B,MAAM,EAAE,CAACrE,kBAAkB,EAAE+hB,cAAc,CAAC;GAC5C9hB,IAAI,kBACJ;KACC,OAAO;OACN+hB,aAAa,EAAE,KAAK;OACpBC,aAAa,EAAE,KAAK;OACpBC,SAAS,EAAE,EAAE;OACbC,aAAa,EAAE,IAAI;OACnBC,OAAO,EAAE,EAAE;OACXC,sBAAsB,EAAE,KAAK;OAC7BC,qBAAqB,EAAE,KAAK;OAC5BC,WAAW,EAAE,KAAK;OAClBC,WAAW,EAAE,KAAK;OAClBC,aAAa,EAAE,EAAE;OACjBC,aAAa,EAAE,EAAE;OACjBC,YAAY,EAAE,EAAE;OAChBC,cAAc,EAAE,EAAE;OAClBC,WAAW,EAAE,IAAI;OACjBC,aAAa,EAAE,IAAI;OACnBC,YAAY,EAAE,IAAI;OAClBC,gBAAgB,EAAE,IAAI;OACtBrc,cAAc,EAAdA;MACA;IACD;GACDnG,UAAU,EACT;KACC,SAAS,EAAE+N,OAAO;KAClB,OAAO,EAAE0U,KAAK;KACd,2BAA2B,EAAEC,sBAAsB;KACnD,wBAAwB,EAAEC;IAC1B;GACFC,OAAO,qBACP;KACC,IAAI,CAACC,YAAY,EAAE;IACnB;GACDnc,OAAO,qBACP;KAAA;KACC,IAAI,CAACoc,YAAY,EAAE;KACnB,IAAI,CAACljB,KAAK,CAAC+G,IAAI,CAACoc,SAAS,EAAE,CAACrW,IAAI,CAAC,YACjC;OACC,IAAI,KAAI,CAAC9M,KAAK,CAAC+G,IAAI,CAACqc,gBAAgB,EACpC;SACC,KAAI,CAACC,kBAAkB,EAAE;QACzB,MAED;SACC,KAAI,CAACC,oBAAoB,EAAE;;OAG5B,KAAI,CAACC,aAAa,EAAE;MACpB,CAAC;KAEF,IAAG,IAAI,CAACvjB,KAAK,CAAC+G,IAAI,CAACyc,sBAAsB,EACzC;OACC,IAAIC,sBAAsB,GAAG,IAAI,CAACzjB,KAAK,CAACugB,MAAM,CAACmD,aAAa;OAC5D,IAAIC,iBAAiB,GAAG,IAAI,CAACnE,KAAK,CAAC,eAAe,CAAC;OAAC,6CACnCiE,sBAAsB,CAACG,QAAQ;SAAA;OAAA;SAAhD,oDACA;WAAA,IADSC,IAAI;WAEZF,iBAAiB,CAAClc,WAAW,CAACoc,IAAI,CAAC;;;SACnC;;SAAA;;;IAEF;GACDjjB,OAAO,EACN;KACCkjB,UAAU,wBACV;OACC,IAAI9B,OAAO,GAAG,EAAE;OAChB,IAAG,IAAI,CAAC+B,WAAW,EACnB;SACC/B,OAAO,GAAG,CACT;WAAC7G,IAAI,EAAE,IAAI,CAACpL,QAAQ,CAACiU,iCAAiC;WAAE5I,OAAO,EAAE,IAAI,CAAC6I;UAAQ,CAC9E;SACD,IAAG,IAAI,CAACF,WAAW,CAACG,SAAS,GAAG,CAAC,EACjC;WACClC,OAAO,4CACHA,OAAO,IACV;aAAC7G,IAAI,EAAE,IAAI,CAACpL,QAAQ,CAACoU,6BAA6B;aAAE/I,OAAO,EAAE,IAAI,CAACgJ;YAAS,EAC3E;UACD,MAED;WACCpC,OAAO,4CACHA,OAAO,IACV;aAAC7G,IAAI,EAAE,IAAI,CAACpL,QAAQ,CAACsU,+BAA+B;aAAEjJ,OAAO,EAAE,IAAI,CAACgJ;YAAS,EAC7E;;;OAGH,gDACIpC,OAAO,IACV;SAAC7G,IAAI,EAAE,IAAI,CAACpL,QAAQ,CAACuU,4BAA4B;SAAEjN,KAAK,EAAE,IAAI,CAACkN,iBAAiB;QAAG;MAEpF;KACDA,iBAAiB,+BACjB;OAAA;OAAA,IADkBC,SAAS,uEAAG,KAAK;OAElC,OAAO,CACN;SAACrJ,IAAI,EAAE,IAAI,CAACpL,QAAQ,CAAC0U,qCAAqC;SAAErJ,OAAO,EAAE,mBACpE;WACC,MAAI,CAACsJ,OAAO,CAACF,SAAS,CAAC;;QACtB,EACH;SAACrJ,IAAI,EAAE,IAAI,CAACpL,QAAQ,CAAC4U,mCAAmC;SAAEvJ,OAAO,EAAE,mBAClE;WACC,MAAI,CAACwJ,eAAe,CAAC;aACpBJ,SAAS,EAAEA,SAAS,KAAK,IAAI,GAAG,GAAG,GAAG;YACtC,CAAC;;QACD,CACH;MACD;KACDjB,aAAa,2BACb;OACC,IAAI,CAAC1B,aAAa,GAAG,KAAK;OAC1B,IAAI,CAACD,aAAa,GAAG,IAAI;OACzB,IAAI,IAAI,CAAC5hB,KAAK,CAAC+G,IAAI,CAAC8d,0BAA0B,EAC9C;SACC,IAAI,CAACC,eAAe,EAAE;QACtB,MACI,IAAG,IAAI,CAACC,KAAK,IAAI,IAAI,CAACA,KAAK,CAACzjB,MAAM,GAAG,CAAC,EAC3C;SACC,IAAI0jB,gBAAgB,GAAG,KAAK;SAC5B,IAAIC,UAAU,GAAG,KAAK;SACtB,IAAI,CAACF,KAAK,CAACxjB,OAAO,CAAC,UAAC2jB,IAAI,EACxB;WACC,IAAG,CAACD,UAAU,EACd;aACC,IAAG,CAACC,IAAI,CAACV,SAAS,EAClB;eACCS,UAAU,GAAGC,IAAI;cACjB,MAED;eACCF,gBAAgB,GAAGE,IAAI;;;UAGzB,CAAC;SACF,IAAG,CAACD,UAAU,IAAID,gBAAgB,EAClC;WACCC,UAAU,GAAGD,gBAAgB;;SAE9B,IAAG,IAAI,CAACjD,aAAa,KAAKkD,UAAU,CAAChW,EAAE,EACvC;WACC,IAAI,CAACkW,WAAW,CAACF,UAAU,CAAC;WAC5B,IAAGA,UAAU,CAACT,SAAS,EACvB;aACC,IAAI,CAACpC,WAAW,GAAG,IAAI;YACvB,MAED;aACC,IAAI,CAACD,WAAW,GAAG,IAAI;;UAExB,MAED;WACC,IAAI,CAACJ,aAAa,GAAG,IAAI,CAACgD,KAAK,CAAC,CAAC,CAAC,CAAC9V,EAAE;;QAEtC,MAED;SACC,IAAI,CAAC6S,SAAS,GAAG,IAAI;SACrB,IAAI,CAACC,aAAa,GAAG,IAAI;SACzB,IAAI,CAACqD,YAAY,CAAC,IAAI,CAACtD,SAAS,CAAC;;MAElC;KACDqD,WAAW,uBAACD,IAAI,EAChB;OACC,IAAI,CAACpD,SAAS,GAAGoD,IAAI,CAACnX,IAAI;OAC1B,IAAI,CAACgU,aAAa,GAAGmD,IAAI,CAACjW,EAAE;OAC5B,IAAI,CAACoW,gBAAgB,EAAE;OACvB,IAAI,CAACxD,aAAa,GAAG,KAAK;OAC1B,IAAI,CAACD,aAAa,GAAG,IAAI;OACzB,IAAI,CAACwD,YAAY,CAAC,IAAI,CAACtD,SAAS,CAAC;OACjC,IAAGoD,IAAI,CAACI,aAAa,KAAK,IAAI,EAC9B;SACC,IAAG,CAAC,IAAI,CAACjD,aAAa,CAACpf,QAAQ,CAACiiB,IAAI,CAACjW,EAAE,CAAC,EACxC;WACC,IAAI,CAACsW,sBAAsB,EAAE;WAC7B,IAAI,CAAClD,aAAa,CAACja,IAAI,CAAC8c,IAAI,CAACjW,EAAE,CAAC;;QAEjC,MAED;SACC,IAAI,CAACuW,YAAY,EAAE;;MAEpB;KACDC,gBAAgB,kCAChB;OAAA,IADkBliB,MAAM,QAANA,MAAM;OAEvB0C,EAAE,CAACyf,SAAS,CAACpiB,IAAI,CAAC,yBAAyB,EAAEC,MAAM,EAAE,IAAI,CAACugB,UAAU,EAAE,EAAE;SACvE6B,UAAU,EAAE,CAAC;SACbC,SAAS,EAAE,CAAC;SACZ7K,UAAU,EAAE;QACZ,CAAC;MACF;KACD8K,mBAAmB,sCACnB;OAAA,IADqBtiB,MAAM,SAANA,MAAM;OAE1B0C,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC7D,UAAU,CAAC,IAAI,CAACtC,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgQ,0BAA0B,EAAE;SAACpT,KAAK,EAAE;QAAK,CAAE;MACrG;KACDkiB,sBAAsB,yCACtB;OAAA,IADwBviB,MAAM,SAANA,MAAM;OAAA,IAAGihB,SAAS,uEAAG,KAAK;OAEjD,IAAIuB,MAAM,GAAG,kCAAkC;OAC/C,IAAGvB,SAAS,EACZ;SACCuB,MAAM,IAAI,QAAQ;;OAEnB9f,EAAE,CAACyf,SAAS,CAACpiB,IAAI,CAACyiB,MAAM,EAAExiB,MAAM,EAAE,IAAI,CAACghB,iBAAiB,CAACC,SAAS,CAAC,EAAE;SACpEmB,UAAU,EAAEpiB,MAAM,CAACyiB,WAAW,GAAG,EAAE;SACnCJ,SAAS,EAAE,CAACriB,MAAM,CAAC0iB,YAAY,GAAG,EAAE;SACpClL,UAAU,EAAE,IAAI;SAChBmL,KAAK,EAAE;WACN9F,QAAQ,EAAE;;QAEX,CAAC;MACF;KACDiF,gBAAgB,8BAChB;OACCpf,EAAE,CAACyf,SAAS,CAACxK,OAAO,CAAC,yBAAyB,CAAC;OAC/CjV,EAAE,CAACyf,SAAS,CAACxK,OAAO,CAAC,kCAAkC,CAAC;MACxD;KACDwJ,OAAO,qBACP;OAAA;OAAA,IADQF,SAAS,uEAAG,KAAK;OAExBre,2BAAO,CAACggB,WAAW,CAAC3B,SAAS,CAAC,CAAC1X,IAAI,CAAC,UAAC7K,MAAM,EAC3C;SACC,IAAImkB,OAAO,GAAGnkB,MAAM,CAACokB,MAAM,CAACpkB,MAAM,CAACijB,IAAI,IAAI,KAAK;SAChD,MAAI,CAACllB,KAAK,CAAC+G,IAAI,CAACoc,SAAS,EAAE,CAACrW,IAAI,CAAC,YACjC;WACC,IAAGsZ,OAAO,EACV;aACC,MAAI,CAACjB,WAAW,CAACiB,OAAO,CAAC;aACzB,MAAI,CAAC5D,cAAc,CAACpa,IAAI,CAAC2U,QAAQ,CAACqJ,OAAO,CAACnX,EAAE,CAAC,CAAC;YAC9C,MAED;aACC,MAAI,CAACsU,aAAa,EAAE;;UAErB,CAAC;QACF,CAAC;OACF,IAAI,CAAC8B,gBAAgB,EAAE;MACvB;KACDpB,OAAO,mBAAC9gB,KAAK,EACb;OACC,IAAG,IAAI,CAAC4gB,WAAW,IAAI,IAAI,CAACA,WAAW,CAACzN,GAAG,EAC3C;SACCnQ,2BAAO,CAAC8d,OAAO,CAAC,IAAI,CAACF,WAAW,CAACzN,GAAG,EAAEnT,KAAK,CAAC;SAC5C,IAAI,CAACkiB,gBAAgB,EAAE;;MAExB;KACDiB,QAAQ,sBACR;OACC,IAAG,IAAI,CAACvC,WAAW,EACnB;SACC,IAAG,IAAI,CAACA,WAAW,CAACG,SAAS,IAAI,IAAI,CAACH,WAAW,CAACG,SAAS,GAAG,CAAC,EAC/D;WACC/d,2BAAO,CAACogB,eAAe,CAAC,IAAI,CAACxC,WAAW,CAACG,SAAS,EAAE,IAAI,CAACH,WAAW,CAACyC,MAAM,CAAC;WAC5E,IAAI,CAACnB,gBAAgB,EAAE;UACvB,MAED;WACC,IAAI,CAACT,eAAe,CAAC,IAAI,CAACb,WAAW,CAAC;;;MAGxC;KACDK,QAAQ,sBACR;OAAA;OACC,IAAG,IAAI,CAACL,WAAW,EACnB;SACC,IAAI,CAAC/jB,KAAK,CAAC+G,IAAI,CAACqd,QAAQ,CAAC,IAAI,CAACL,WAAW,CAAC,CAACjX,IAAI,CAAC,YAAM;WACrD,MAAI,CAACyW,aAAa,EAAE;UACpB,CAAC;SACF,IAAI,CAAC8B,gBAAgB,EAAE;;MAExB;KACDoB,0BAA0B,wCAC1B;OACC,IAAI,CAACzmB,KAAK,CAAC+G,IAAI,CAAC0f,0BAA0B,EAAE;MAC5C;KACD7B,eAAe,2BAACwB,OAAO,EACvB;OAAA;OACC,IAAG,CAACpe,cAAI,CAAC0e,aAAa,CAACN,OAAO,CAAC,EAC/B;SACCA,OAAO,GAAG,EAAE;;OAEbjgB,2BAAO,CAACwgB,aAAa,CAACP,OAAO,CAAC,CAACtZ,IAAI,CAAC,UAAC8Z,MAAM,EAC3C;SACC,IAAG,CAAC,MAAI,CAAChF,aAAa,EACtB;WACC,MAAI,CAACA,aAAa,GAAG,KAAK;;SAE3B,MAAI,CAAC5hB,KAAK,CAAC+G,IAAI,CAACoc,SAAS,EAAE,CAACrW,IAAI,CAAC,YAAM;WACtC,IAAG8Z,MAAM,KAAK,CAAC5e,cAAI,CAAC0e,aAAa,CAACN,OAAO,CAAC,IAAI,CAACA,OAAO,CAACnX,EAAE,CAAC,EAC1D;aACC,MAAI,CAACuT,cAAc,CAACpa,IAAI,CAAC2U,QAAQ,CAAC6J,MAAM,CAAC,CAAC;;WAE3C,IAAG,CAACA,MAAM,IAAIR,OAAO,EACrB;aACCQ,MAAM,GAAGR,OAAO,CAACnX,EAAE;;WAEpB,IAAG2X,MAAM,EACT;aACC,MAAI,CAAC7B,KAAK,CAACxjB,OAAO,CAAC,UAAC2jB,IAAI,EACxB;eACC,IAAGnI,QAAQ,CAACmI,IAAI,CAACjW,EAAE,CAAC,KAAK8N,QAAQ,CAAC6J,MAAM,CAAC,EACzC;iBACC,MAAI,CAACzB,WAAW,CAACD,IAAI,CAAC;;cAEvB,CAAC;YACF,MAED;aACC,IAAG,CAAC,MAAI,CAACrD,aAAa,EACtB;eACC,MAAI,CAACD,aAAa,GAAG,IAAI;;;UAG3B,CAAC;QACF,CAAC;OACF,IAAI,CAACyD,gBAAgB,EAAE;MACvB;KACDwB,mBAAmB,iCACnB;OACC,IAAG,CAAC,IAAI,CAAC5G,yBAAyB,EAClC;SACC,OAAO,IAAI;;OAEZ,IAAI,IAAI,CAACjgB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI,KAAK,SAAS,EAC9C;SACC,OAAO,IAAI,CAACyG,QAAQ,CAAC+W,uCAAuC;;OAG7D,OAAO,IAAI,CAAC/W,QAAQ,CAACgX,8CAA8C;MACnE;KACDjC,eAAe,6BACf;OACC,IAAI,CAACjD,aAAa,GAAG,IAAI;OACzB,IAAI,CAACD,aAAa,GAAG,KAAK;OAE1B,IAAI,IAAI,CAACza,WAAW,EACpB;SACC;;OAGD,IAAIzB,KAAK,GAAG,IAAI,CAACmhB,mBAAmB,EAAE,IAAI,IAAI,CAAC9W,QAAQ,CAACiX,yBAAyB;OAEjF,IAAI,CAAC5B,YAAY,CAAC1f,KAAK,CAAC;MACxB;KACDuhB,cAAc,4BACd;OAAA;OACC,IAAI,CAAC5B,gBAAgB,EAAE;OACvBlf,2BAAO,CAAC8gB,cAAc,CAAC;SACtBzQ,OAAO,EAAE,IAAI,CAACxW,KAAK,CAAC+G,IAAI,CAACyP,OAAO;SAChCrM,OAAO,EAAE,IAAI,CAACnK,KAAK,CAAC+G,IAAI,CAACoD,OAAO;SAChCC,WAAW,EAAE,IAAI,CAACpK,KAAK,CAAC+G,IAAI,CAACqD;QAC7B,CAAC,CAAC0C,IAAI,CAAC,YACR;SACC,MAAI,CAACuW,kBAAkB,EAAE;QACzB,CAAC;MACF;KACD6D,gBAAgB,8BAChB;OAAA;OACC,IAAI,CAAC7B,gBAAgB,EAAE;OACvBlf,2BAAO,CAAC+gB,gBAAgB,CAAC;SACxB1Q,OAAO,EAAE,IAAI,CAACxW,KAAK,CAAC+G,IAAI,CAACyP,OAAO;SAChCrM,OAAO,EAAE,IAAI,CAACnK,KAAK,CAAC+G,IAAI,CAACoD,OAAO;SAChCC,WAAW,EAAE,IAAI,CAACpK,KAAK,CAAC+G,IAAI,CAACqD;QAC7B,CAAC,CAAC0C,IAAI,CAAC,YACR;SACC,MAAI,CAACwW,oBAAoB,EAAE;QAC3B,CAAC;MACF;KACD6D,YAAY,0BACZ;OAAA;OACC,IAAI,CAAC9B,gBAAgB,EAAE;OACvBlf,2BAAO,CAACghB,YAAY,CAAC;SACpBhd,OAAO,EAAE,IAAI,CAACnK,KAAK,CAAC+G,IAAI,CAACoD,OAAO;SAChCC,WAAW,EAAE,IAAI,CAACpK,KAAK,CAAC+G,IAAI,CAACqD;QAC7B,CAAC,CAAC0C,IAAI,CAAC,YACR;SACC,MAAI,CAACuW,kBAAkB,EAAE;QACzB,CAAC;MACF;KACD+D,WAAW,yBACX;OACC,IAAI,CAAC/B,gBAAgB,EAAE;OACvBlf,2BAAO,CAAC7D,UAAU,wCAAiC,IAAI,CAACtC,KAAK,CAAC+G,IAAI,CAACuD,SAAS,EAAG;MAC/E;KACD+c,YAAY,0BACZ;OACC,IAAI,CAACjF,WAAW,GAAG,CAAC,IAAI,CAACA,WAAW;OACpC,IAAI,CAACiD,gBAAgB,EAAE;MACvB;KACD3D,gBAAgB,8BAChB;OACCvb,2BAAO,CAACub,gBAAgB,EAAE;OAC1B,IAAI,CAAC2D,gBAAgB,EAAE;MACvB;KACDiC,YAAY,0BACZ;OACC,IAAI,CAACjC,gBAAgB,EAAE;OACvBlf,2BAAO,CAACohB,cAAc,EAAE;MACxB;KACDC,cAAc,0BAACtC,IAAI,EACnB;OACC,OAAQ,IAAI,CAACnB,WAAW,IAAI,IAAI,CAACnC,aAAa,IAAI,IAAI,CAACmC,WAAW,CAAC9U,EAAE,KAAKiW,IAAI,CAACjW,EAAE;MACjF;KACDwY,6BAA6B,yCAACtkB,KAAK,EACnC;OACC,IAAI,CAACukB,IAAI,CAACvkB,KAAK,EAAE,GAAG,EAAC,IAAI,CAAC;MAC1B;KACDukB,IAAI,gBAACvkB,KAAK,EACV;OAAA,IADYwkB,iBAAiB,uEAAG,GAAG;OAAA,IAAEF,6BAA6B,uEAAG,KAAK;OAEzE,IAAG,CAAC,IAAI,CAACG,qBAAqB,EAC9B;SACC;;OAED,IAAG,IAAI,CAAC/F,aAAa,IAAI,CAAC,IAAI,CAACgG,eAAe,EAC9C;SACC,IAAI,IAAI,CAAC/f,MAAM,CAACuF,OAAO,CAAC,iCAAiC,CAAC,EAC1D;WACC,IAAI,CAACrN,KAAK,CAAC+G,IAAI,CAAC+gB,eAAe,CAAC3kB,KAAK,CAACI,MAAM,EAAEkkB,6BAA6B,CAAC;UAC5E,MAED;WACC,IAAI,CAACznB,KAAK,CAAC+G,IAAI,CAACghB,WAAW,CAAC5kB,KAAK,CAACI,MAAM,EAAEokB,iBAAiB,CAAC;;QAE7D,MACI,IAAG,IAAI,CAAC5D,WAAW,IAAI,IAAI,CAACA,WAAW,CAACiE,QAAQ,EACrD;SACC,IAAI,CAAChoB,KAAK,CAAC+G,IAAI,CAACkhB,QAAQ,CAAC,IAAI,CAAClE,WAAW,CAAC9U,EAAE,CAAC;;MAE9C;KACDmW,YAAY,0BACZ;OAAA,IADa1f,KAAK,uEAAG,IAAI;OAExB,IAAG,CAACA,KAAK,EACT;SACC;;OAED,IAAG,IAAI,CAAC1F,KAAK,CAACugB,MAAM,CAAC7a,KAAK,EAC1B;SACC,IAAI,CAAC1F,KAAK,CAACugB,MAAM,CAAC7a,KAAK,CAACwiB,SAAS,GAAGxiB,KAAK;;MAE1C;KACD8f,YAAY,0BACZ;OACC2C,YAAY,CAAC,IAAI,CAACjG,qBAAqB,CAAC;OACxC,IAAG,IAAI,CAACG,aAAa,CAACpf,QAAQ,CAAC,IAAI,CAAC8gB,WAAW,CAAC9U,EAAE,CAAC,EACnD;SACC,IAAI,CAACqT,aAAa,CAACla,IAAI,CAAC,IAAI,CAAC2b,WAAW,CAAC9U,EAAE,CAAC;;OAE7C,IAAI,CAACsT,YAAY,CAACna,IAAI,CAAC,IAAI,CAAC2b,WAAW,CAAC9U,EAAE,CAAC;MAC3C;KACDmZ,WAAW,uBAACxB,MAAM,EAClB;OAAA;OACCuB,YAAY,CAAC,IAAI,CAACjG,qBAAqB,CAAC;OACxC,IAAG,IAAI,CAACG,aAAa,CAACpf,QAAQ,CAAC2jB,MAAM,CAAC,EACtC;SACC,IAAI,CAACtE,aAAa,CAACla,IAAI,CAACwe,MAAM,CAAC;SAC/B,IAAG,IAAI,CAAC7C,WAAW,IAAI,IAAI,CAACA,WAAW,CAAC9U,EAAE,KAAK2X,MAAM,EACrD;WACC,IAAG,IAAI,CAAC3E,sBAAsB,IAAI,CAAC,IAAI,CAAC8B,WAAW,CAACG,SAAS,EAC7D;aACC,IAAI,CAACsB,YAAY,EAAE;YACnB,MACI,IAAG,IAAI,CAACjD,YAAY,CAACtf,QAAQ,CAAC,IAAI,CAAC8gB,WAAW,CAAC9U,EAAE,CAAC,EACvD;aACC,IAAI,CAACsT,YAAY,GAAG,IAAI,CAACA,YAAY,CAACvhB,MAAM,CAAC,UAAC4lB,MAAM,EACpD;eACC,OAAOA,MAAM,KAAK,MAAI,CAAC7C,WAAW,CAAC9U,EAAE;cACrC,CAAC;;;;OAIL,IAAG,IAAI,CAACgT,sBAAsB,IAAI,IAAI,CAAC8B,WAAW,IAAI,IAAI,CAACA,WAAW,CAAC9U,EAAE,KAAK2X,MAAM,IAAI,CAAC,IAAI,CAAC7C,WAAW,CAACG,SAAS,EACnH;SACC,IAAI,CAACsB,YAAY,EAAE;;MAEpB;KACD6C,uBAAuB,qCACvB;OAAA;OACC,IAAI,CAACroB,KAAK,CAAC+G,IAAI,CAACoc,SAAS,EAAE,CAACrW,IAAI,CAAC,YACjC;SACC,OAAI,CAACyW,aAAa,EAAE;QACpB,CAAC;MACF;KACDgC,sBAAsB,oCACtB;OAAA;;OAEC,IAAG,IAAI,CAACtD,sBAAsB,EAC9B;SACCkG,YAAY,CAAC,IAAI,CAAClG,sBAAsB,CAAC;SACzC,IAAI,CAACA,sBAAsB,GAAG,KAAK;;OAEpC,IAAI,CAACA,sBAAsB,GAAGqG,UAAU,CAAC,YACzC;SACC,OAAI,CAACrG,sBAAsB,GAAG,KAAK;QACnC,EAAE,GAAG,CAAC;;;OAGPkG,YAAY,CAAC,IAAI,CAACjG,qBAAqB,CAAC;OACxC,IAAI,CAACA,qBAAqB,GAAGoG,UAAU,CAAC,YACxC;SACC,IAAG,OAAI,CAACvE,WAAW,IAAI,OAAI,CAAC1B,aAAa,CAACpf,QAAQ,CAAC,OAAI,CAAC8gB,WAAW,CAAC9U,EAAE,CAAC,IAAI,CAAC,OAAI,CAACqT,aAAa,CAACrf,QAAQ,CAAC,OAAI,CAAC8gB,WAAW,CAAC9U,EAAE,CAAC,EAC5H;WACC,OAAI,CAACsT,YAAY,CAACna,IAAI,CAAC,OAAI,CAAC2b,WAAW,CAAC9U,EAAE,CAAC;;QAE5C,EAAE,IAAI,CAAC;MACR;KACDsZ,cAAc,0BAACrD,IAAI,EACnB;OACC,IAAG,IAAI,CAAC7C,aAAa,CAACpf,QAAQ,CAACiiB,IAAI,CAACjW,EAAE,CAAC,EACvC;SACC,IAAGiW,IAAI,CAAChB,SAAS,GAAG,CAAC,EACrB;WACC,IAAGgB,IAAI,CAAC8C,QAAQ,EAChB;aACC,OAAQ,IAAIjM,aAAG,CAACmJ,IAAI,CAAC5O,GAAG,CAAC,CAAEkS,aAAa,CAAC,OAAO,EAAE,EAAE,CAAC,CAACC,QAAQ,EAAE;;UAEjE,MAED;WACC,OAAOvD,IAAI,CAAC5O,GAAG;;;OAIjB,OAAO,IAAI;MACX;KACD+M,kBAAkB,gCAClB;OAAA;OACC,IAAI,CAACrjB,KAAK,CAAC+G,IAAI,CAAC2hB,cAAc,EAAE,CAAC5b,IAAI,CAAC,UAAC7K,MAAM,EAC7C;SACC,OAAI,CAACwgB,WAAW,GAAGxgB,MAAM,CAACokB,MAAM,CAACpkB,MAAM,IAAI,IAAI;QAC/C,CAAC,SAAM,CAAC,YACT;SACC,OAAI,CAACwgB,WAAW,GAAG,IAAI;QACvB,CAAC;MACF;KACDa,oBAAoB,kCACpB;OAAA;OACC,IAAI,CAACtjB,KAAK,CAAC+G,IAAI,CAAC4hB,gBAAgB,EAAE,CAAC7b,IAAI,CAAC,UAAC7K,MAAM,EAC/C;SACC,OAAI,CAACygB,aAAa,GAAGzgB,MAAM,CAACokB,MAAM,CAACpkB,MAAM,IAAI,IAAI;QACjD,CAAC,SAAM,CAAC,YACT;SACC,OAAI,CAACygB,aAAa,GAAG,IAAI;QACzB,CAAC;MACF;KACDO,YAAY,0BACZ;OACC,IAAI,IAAI,CAACpB,aAAa,IAAI,IAAI,CAACtS,KAAK,CAACnC,MAAM,CAAC9L,MAAM,GAAG,CAAC,EACtD;SACC,IAAIsnB,aAAa,GAAG,IAAI,CAACrZ,KAAK,CAACnC,MAAM,CAACnM,GAAG,CAAC,UAACO,IAAI;WAAA,OAAKA,IAAI,CAACuV,OAAO;WAAC,CAAC8R,IAAI,CAAC,MAAM,CAAC;SAC9E,IAAIC,MAAM,GAAG;WACZC,KAAK,EAAE9iB,EAAE,CAACsY,EAAE,CAACyK,KAAK,CAACC,KAAK,CAACC,MAAM;WAC/BC,UAAU,EAAE,IAAI;WAChBhO,IAAI,EAAElV,EAAE,CAACmjB,IAAI,CAACC,gBAAgB,CAACT,aAAa;UAC5C;SACD,IAAI,IAAI,CAACpJ,KAAK,CAAC8J,UAAU,CAACC,SAAS,CAACjoB,MAAM,KAAK,CAAC,EAChD;WACCwnB,MAAM,CAACU,QAAQ,GAAG,IAAI;;SAEvB,IAAIC,KAAK,GAAG,IAAIxjB,EAAE,CAACsY,EAAE,CAACyK,KAAK,CAACF,MAAM,CAAC;SACnC,IAAI,CAACtJ,KAAK,CAAC8J,UAAU,CAACC,SAAS,GAAG,EAAE;SACpC,IAAI,CAAC/J,KAAK,CAAC8J,UAAU,CAAC7hB,WAAW,CAACgiB,KAAK,CAACC,YAAY,EAAE,CAAC;QACvD,MACI,IAAI,IAAI,CAAClK,KAAK,CAAC8J,UAAU,EAC9B;SACC,IAAI,CAAC9J,KAAK,CAAC8J,UAAU,CAACC,SAAS,GAAG,EAAE;;MAErC;KACDI,YAAY,wBAACxmB,KAAK,EAAE+hB,IAAI,EACxB;OACC,IAAI,CAACvC,YAAY,GAAGuC,IAAI,CAACjW,EAAE;OAC3BqZ,UAAU,CAAC,YACX;SACCnlB,KAAK,CAACI,MAAM,CAACkc,UAAU,CAACA,UAAU,CAACjY,aAAa,CAAC,OAAO,CAAC,CAACoiB,KAAK,EAAE;QACjE,EAAE,EAAE,CAAC;MACN;KACDC,YAAY,wBAAC1mB,KAAK,EAClB;OAAA;OACC,IAAMyjB,MAAM,GAAG,IAAI,CAACjE,YAAY;OAChC,IAAM5U,IAAI,GAAG5K,KAAK,CAACI,MAAM,CAACrD,KAAK;OAC/B,IAAI4pB,OAAO;OACX,IAAI,CAAC/E,KAAK,CAACxjB,OAAO,CAAC,UAAC2jB,IAAI,EACxB;SACC,IAAGA,IAAI,CAACjW,EAAE,KAAK,OAAI,CAAC0T,YAAY,EAChC;WACCmH,OAAO,GAAG5E,IAAI,CAACnX,IAAI;;QAEpB,CAAC;OACF,IAAG6Y,MAAM,GAAG,CAAC,IAAIkD,OAAO,IAAI/b,IAAI,KAAK+b,OAAO,IAAI/b,IAAI,CAACzM,MAAM,GAAG,CAAC,EAC/D;SACC6E,2BAAO,CAAC4jB,OAAO,CAAC;WACf9a,EAAE,EAAE2X,MAAM;WACV7Y,IAAI,EAAEA,IAAI;WACVic,cAAc,EAAE;UAChB,CAAC,CAACld,IAAI,CAAC,YACR;WACC,OAAI,CAAC9M,KAAK,CAAC+G,IAAI,CAACoc,SAAS,EAAE,CAACrW,IAAI,CAAC,YAAM;aACtC,IAAG,OAAI,CAAC6V,YAAY,KAAK,OAAI,CAACZ,aAAa,EAC3C;eACC,OAAI,CAACqD,YAAY,CAACrX,IAAI,CAAC;;aAExB,OAAI,CAAC4U,YAAY,GAAG,IAAI;YACxB,CAAC;UACF,CAAC;QACF,MAED;SACC,IAAI,CAACA,YAAY,GAAG,IAAI;;MAEzB;KACDO,YAAY,0BACZ;OACC,IAAMvC,MAAM,GAAG,IAAIC,kBAAM,CAAC;SAAC9e,IAAI,EAAE;QAAI,CAAC;OACtC6e,MAAM,CAACrd,IAAI,CAAC,IAAI,CAACkc,KAAK,CAAC,eAAe,CAAC,CAAC;;IAEzC;GAEF7b,QAAQ;KAEN2K,MAAM;OAAA;SAAA;;OAAA;SAAA;;OAAA;OAAE;OAAA,OAAMA,MAAM;;KACpByV,WAAW,yBACX;OAAA;OACC,IAAG,IAAI,CAAChC,aAAa,GAAG,CAAC,EACzB;SACC,IAAIgD,KAAK,GAAG,IAAI,CAACkF,WAAW,CAAClF,KAAK,CAAC/jB,MAAM,CAAC,UAACkkB,IAAI,EAC/C;WACC,OAAOA,IAAI,CAACjW,EAAE,KAAK,OAAI,CAAC8S,aAAa;UACrC,CAAC;SACF,IAAGgD,KAAK,CAACzjB,MAAM,GAAG,CAAC,EACnB;WACC,OAAOyjB,KAAK,CAAC,CAAC,CAAC;;;OAIjB,OAAO,IAAI;MACX;KAEDmF,eAAe,6BACf;OAAA;OACC,OAAO,IAAI,CAACpqB,QAAQ,IAAI,sBAAC,IAAI,CAACE,KAAK,CAAC+G,IAAI,6CAAf,iBAAiBI,WAAW,IAClDxB,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,GAClCD,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;MAEvC;KAEDukB,kBAAkB,gCAClB;OACC,IAAG,IAAI,CAAChI,WAAW,EACnB;SACC,OAAQ,IAAI,CAAC8H,WAAW,CAAClF,KAAK,CAAC/jB,MAAM,CAAC,UAACkkB,IAAI,EAC3C;WACC,OAAO,CAACA,IAAI,CAACV,SAAS;UACtB,CAAC,CAACljB,MAAM,GAAG,EAAE,GAAG,EAAE,GAAI,IAAI;QAC3B,MAED;SACC,OAAO,KAAK;;MAEb;KAED8oB,kBAAkB,gCAClB;OACC,IAAG,IAAI,CAAChI,WAAW,EACnB;SACC,OAAQ,IAAI,CAAC6H,WAAW,CAAClF,KAAK,CAAC/jB,MAAM,CAAC,UAACkkB,IAAI,EAC3C;WACC,OAAOA,IAAI,CAACV,SAAS;UACrB,CAAC,CAACljB,MAAM,GAAG,EAAE,GAAG,EAAE,GAAI,IAAI;QAC3B,MAED;SACC,OAAO,KAAK;;MAEb;KAED+oB,YAAY,0BACZ;OACC,IAAG,IAAI,CAACzI,aAAa,IAAI,IAAI,CAACmC,WAAW,EACzC;SACC,IAAG,CAAC,IAAI,CAACA,WAAW,CAACiE,QAAQ,EAC7B;WACC,OAAO,IAAI;UACX,MACI,IAAG,CAAC,IAAI,CAACjE,WAAW,CAACG,SAAS,IAAI,IAAI,CAAC3B,YAAY,CAACtf,QAAQ,CAAC,IAAI,CAAC8gB,WAAW,CAAC9U,EAAE,CAAC,EACtF;WACC,OAAO,IAAI;;;OAGb,OAAO,KAAK;MACZ;KAEDqb,YAAY,0BACZ;OACC,OACC,IAAI,CAAC1I,aAAa,IAClB,IAAI,CAACG,aAAa,GAAG,CAAC,IACtB,IAAI,CAACM,aAAa,CAACpf,QAAQ,CAAC,IAAI,CAAC8e,aAAa,CAAC,IAC/C,CAAC,IAAI,CAACO,aAAa,CAACrf,QAAQ,CAAC,IAAI,CAAC8e,aAAa,CAAC;MAEjD;KAED8F,eAAe,6BACf;OACC,IAAI0C,GAAG,GAAG,KAAK;OACf,IAAG,IAAI,CAAC3I,aAAa,EACrB;SACC2I,GAAG,GAAI,CAAC,IAAI,CAACxF,KAAK,IAAI,IAAI,CAACA,KAAK,CAACzjB,MAAM,IAAI,CAAE;QAC7C,MACI,IAAG,IAAI,CAACugB,aAAa,EAC1B;SACC0I,GAAG,GAAG,CAAC,IAAI,CAACtK,yBAAyB;;OAGtC,OAAOsK,GAAG;MACV;KAEDC,YAAY,0BACZ;OACC,IAAG,IAAI,CAACzG,WAAW,IAAI,IAAI,CAACA,WAAW,CAAC0G,WAAW,EACnD;SACC,OAAO,IAAI,CAAC1a,QAAQ,CAAC2a,oBAAoB,CAACvV,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC4O,WAAW,CAAC0G,WAAW,CAAC;;OAGzF,OAAO,KAAK;MACZ;KAED1a,QAAQ,sBACR;OACC,OAAOC,UAAG,CAACC,kBAAkB,CAAC,cAAc,CAAC;MAC7C;KAED8U,KAAK,mBACL;OACC,sCAAW,IAAI,CAACkF,WAAW,CAAClF,KAAK;MACjC;KAED6C,qBAAqB,mCACrB;OACC,IAAG,IAAI,CAAC5nB,KAAK,CAAC+G,IAAI,CAAC4jB,iBAAiB,EACpC;SACC,OAAO,KAAK;;OAEb,IAAI,IAAI,CAAC/I,aAAa,IAAI,IAAI,CAACmC,WAAW,IAAI,CAAC,IAAI,CAACA,WAAW,CAACiE,QAAQ,EACxE;SACC,OAAO,KAAK;;OAEb,IAAI,IAAI,CAACnG,aAAa,EACtB;SACC,OAAO,IAAI,CAAC/Z,MAAM,CAACuF,OAAO,CAAC,+BAA+B,CAAC;;OAE5D,OAAO,IAAI,CAAC0W,WAAW;MACvB;KACDjL,yCAAyC,uDACzC;OACC,IAAM5R,iBAAiB,GAAG,IAAI,CAACY,MAAM,CAACuF,OAAO,CAAC,iCAAiC,CAAC;OAEhF,OAAO,IAAI,CAACrN,KAAK,CAAC+G,IAAI,CAACgD,SAAS,KAAK,UAAU,IAAI,IAAI,CAAC/J,KAAK,CAAC+G,IAAI,CAACiD,uBAAuB,IAAI9C,iBAAiB;MAC/G;KACD0jB,+BAA+B,6CAC/B;OACC,OAAO,IAAI,CAAC5qB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC6jB,0BAA0B;MACzD;KACDvhB,IAAI,kBACJ;OACC,OAAO,IAAI,CAACtJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI;;MAEjCsH,gBAAI,CAACC,QAAQ,CAAC;KAChBoZ,WAAW,EAAE,qBAAA7e,KAAK;OAAA,OAAIA,KAAK,CAAC6e,WAAW;;KACvC1a,KAAK,EAAE,eAAAnE,KAAK;OAAA,OAAIA,KAAK,CAACC,aAAa;;IACnC,CAAC,CACF;GACFnH,QAAQ;CAoJT,CAAC;;;;;ACv6BD,CAaA,IAAM4mB,UAAU,GAAG,OAAO;CAC1B,IAAMC,WAAW,GAAG,QAAQ;CAE5B,IAAMC,UAAU,GAAG;GAClBlnB,KAAK,EAAE;KACNmnB,WAAW,EAAE;OACZ5pB,IAAI,EAAE0C,KAAK;OACXC,QAAQ,EAAE;MACV;KACDknB,qBAAqB,EAAE;OACtB7pB,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgR,iBAAiB,EAAE;OAClB3T,IAAI,EAAEmF,MAAM;OACZxC,QAAQ,EAAE;MACV;KACDmnB,oCAAoC,EAAE;OACrC9pB,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgB,OAAO,EAAE;OACR3D,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACD0R,OAAO,EAAE;OACRrU,IAAI,EAAEmF,MAAM;OACZxC,QAAQ,EAAE;MACV;KACDonB,iBAAiB,EAAE;OAClB/pB,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDqnB,KAAK,EAAE;OACNhqB,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDsnB,gBAAgB,EAAE;OACjBjqB,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDoG,WAAW,EAAE;OACZ/I,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACDmG,OAAO,EAAE;OACR9I,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACD2R,aAAa,EAAE;OACdtU,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDd,QAAQ,EAAE;OACT7B,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;MACV;KACD4R,cAAc,EAAE;OACfvU,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACD6R,SAAS,EAAE;OACVxU,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACD8R,YAAY,EAAE;OACbzU,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;;IAEX;GACDC,MAAM,EAAE,CAACG,UAAU,EAAEkQ,YAAY,CAAC;GAClClU,UAAU,EAAE;KACX,kBAAkB,EAAEkF,sCAAK;KACzB,iBAAiB,EAAEimB,iDAAK;KACxB,uBAAuB,EAAEC,sDAAU;KACnC,uBAAuB,EAAEzV,sDAAU;KACnC,wBAAwB,EAAE0V,uDAAW;KACrC,wBAAwB,EAAEC,uDAAW;KACrC,0BAA0B,EAAE1V,yDAAa;KACzC,2BAA2B,EAAE2V;IAC7B;GACD9rB,IAAI,kBACJ;KACC,OAAO;OACN+rB,YAAY,EAAE,IAAI,CAACP,KAAK;OACxBpV,iBAAiB,EAAE,IAAI;OACvBC,OAAO,EAAE,EAAE;OACXC,gCAAgC,EAAE,IAAI;OACtCC,yBAAyB,EAAE,CAAC;OAC5B5B,mBAAmB,EAAE,IAAI;OACzBqX,uBAAuB,EAAE,IAAI;OAC7BvW,aAAa,EAAE,KAAK;OACpBwW,WAAW,EAAE;MACb;IACD;GACDnoB,QAAQ,EAAE;KACTooB,kBAAkB,gCAClB;OACC,OAAO;SACN5Q,IAAI,EAAExV,aAAG,CAACC,UAAU,CAAC,wDAAwD;QAC7E;MACD;KACDtB,MAAM,oBACN;OACC,OAAO,IAAI,CAACwD,MAAM,CAACuF,OAAO,CAAC,gCAAgC,CAAC,GAAG9I,4CAAM,CAACK,QAAQ,GAAGL,4CAAM,CAACC,OAAO;MAC/F;KACDqB,cAAc,4BACd;OACC,OAAO;SACNb,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBe,OAAO,EAAE,IAAI,CAACpB,mBAAmB;SACjCzB,QAAQ,EAAE,IAAI;SACd8oB,iBAAiB,EAAE;QACnB;MACD;KACD3V,MAAM,oBACN;OACC,OAAO;SACNnS,QAAQ,EAAE,IAAI,CAAC0R,cAAc;SAC7BU,GAAG,EAAE,IAAI,CAACT;QACV;MACD;KACDoW,aAAa,2BACb;OAAA;OACC,OAAO,IAAI,CAAC/V,OAAO,CAACqC,IAAI,CAAC,UAAA2T,MAAM;SAAA,OAAIA,MAAM,CAACC,IAAI,KAAK,KAAI,CAAClW,iBAAiB;SAAC;MAC1E;KACDvQ,KAAK,mBACL;OACC,OAAO,IAAI,CAACiQ,aAAa,CAACR,OAAO,CAAC,SAAS,EAAE,IAAI,CAACyW,YAAY,CAAC;MAC/D;KACDxe,MAAM,oBACN;OAAA;OACC,IAAI,IAAI,CAAC2H,sBAAsB,EAC/B;SACC,OAAO,EAAE;;OAGV,IAAI9S,MAAM,GAAG,EAAE;OAEf,IAAImqB,uBAAuB;OAE3B,IAAI,CAAC,IAAI,CAACH,aAAa,EACvB;SAAA,6CACoB,IAAI,CAAC/V,OAAO;WAAA;SAAA;WAA/B,oDACA;aAAA,IADSgW,MAAM;aAEd,IAAI,CAACG,4BAAY,CAACC,aAAa,CAACJ,MAAM,CAAC,EACvC;eACC;;aAGDjqB,MAAM,CAACmG,IAAI,CAAC;eACX+S,IAAI,EAAE,IAAI,CAACoR,sBAAsB,CAACL,MAAM,CAAC;eACzCM,KAAK,EAAEH,4BAAY,CAACI,sBAAsB,CAACP,MAAM,CAACQ,UAAU,CAAC;eAC7DC,OAAO,EAAE,IAAI,CAACC,yBAAyB,CAACV,MAAM,CAAC;eAC/C7qB,IAAI,EAAE0pB;cACN,CAAC;aAEF,IAAImB,MAAM,CAACC,IAAI,KAAKE,4BAAY,CAACQ,QAAQ,EACzC;eACCT,uBAAuB,GAAGF,MAAM,CAACQ,UAAU;;;;WAE5C;;WAAA;;QACD,MAED;SACC,IAAI,CAAC,IAAI,CAACT,aAAa,CAACa,WAAW,EACnC;WACC7qB,MAAM,CAACmG,IAAI,CAAC;aACX+S,IAAI,EAAExV,aAAG,CAACC,UAAU,CAAC,gCAAgC,GAAG,IAAI,CAACqmB,aAAa,CAACE,IAAI,CAACY,WAAW,EAAE,GAAG,gBAAgB,CAAC;aACjH1rB,IAAI,EAAE0pB;YACN,CAAC;UACF,MAED;WACC,IAAI,IAAI,CAACkB,aAAa,CAACe,WAAW,EAClC;aACC/qB,MAAM,GAAG,IAAI,CAACgqB,aAAa,CAACgB,WAAW,CAAChsB,GAAG,CAAC,UAAAisB,KAAK;eAAA,OAAK;iBAAE/R,IAAI,EAAE+R,KAAK;iBAAE7rB,IAAI,EAAE0pB;gBAAa;cAAC,CAAC;YAC1F,MAED;aACC9oB,MAAM,CAACmG,IAAI,CAAC;eACX+S,IAAI,EAAE,IAAI,CAACoR,sBAAsB,CAAC,IAAI,CAACN,aAAa,CAAC;eACrDO,KAAK,EAAE,IAAI,CAACW,QAAQ,CAAC,IAAI,CAAClB,aAAa,CAACS,UAAU,CAAC;eACnDC,OAAO,EAAE,IAAI,CAACC,yBAAyB,CAAC,IAAI,CAACX,aAAa,CAAC;eAC3D5qB,IAAI,EAAE0pB;cACN,CAAC;aAEF,IAAI,IAAI,CAACkB,aAAa,CAACE,IAAI,KAAKE,4BAAY,CAACQ,QAAQ,EACrD;eACCT,uBAAuB,GAAG,IAAI,CAACH,aAAa,CAACS,UAAU;;;;;OAM3D,IAAI,CAAC,IAAI,CAACd,YAAY,EACtB;SACC,IAAG,IAAI,CAACN,gBAAgB,CAAChqB,MAAM,GAAG,CAAC,EACnC;WACCW,MAAM,CAACmG,IAAI,CAAC;aACX+S,IAAI,EAAExV,aAAG,CAACC,UAAU,CAAC,wDAAwD,CAAC;aAC9E4mB,KAAK,EAAE,IAAI,CAACW,QAAQ,CAAC,IAAI,CAAC7B,gBAAgB,CAAC;aAC3CqB,OAAO,EAAEhnB,aAAG,CAACC,UAAU,CAAC,iEAAiE,CAAC;aAC1FvE,IAAI,EAAEypB;YACN,CAAC;UACF,MAED;WACC7oB,MAAM,CAACmG,IAAI,CAAC;aACX+S,IAAI,EAAExV,aAAG,CAACC,UAAU,CAAC,wDAAwD,CAAC;aAC9EvE,IAAI,EAAEypB;YACN,CAAC;;;OAKJ,IAAI,IAAI,CAAC3U,gCAAgC,KAAK,GAAG,IAAIiW,uBAAuB,EAC5E;SACC,IAAI,CAACe,QAAQ,CAACf,uBAAuB,CAAC,EAAE,CAACtf,IAAI,CAAC;WAAA,OAAM,MAAI,CAACsgB,cAAc,EAAE;WAAC;SAC1EnnB,EAAE,CAAC+Y,WAAW,CAACC,IAAI,CAAC,aAAa,EAAE,wBAAwB,EAAE,sCAAsC,EAAE,GAAG,CAAC;SACzG,IAAI,CAAC9I,gCAAgC,GAAG,GAAG;;OAG5C,OAAOlU,MAAM;;IAEd;GACDgJ,KAAK,EAAE;KACNK,WAAW,uBAACmL,cAAc,EAC1B;OACC,IAAI,CAAC,IAAI,CAACjC,mBAAmB,EAC7B;SACC;;OAGD,IAAI,CAACqX,uBAAuB,GAAG1mB,OAAO,CACrCsR,cAAc,CAAC4W,MAAM,IAAI5W,cAAc,CAAC6W,QAAQ,IAAI7W,cAAc,CAAClL,UAAU,CAC7E;OAED,IAAIkL,cAAc,CAAClL,UAAU,KAAK,UAAU,EAC5C;SACC,IAAI,CAAC8J,gBAAgB,CAAC,KAAK,CAAC;QAC5B,MAED;SACC,IAAI,CAACA,gBAAgB,CAAC,CAACoB,cAAc,CAAC3B,IAAI,IAAI,CAAC2B,cAAc,CAAC3B,IAAI,CAAC7R,QAAQ,CAAC,QAAQ,CAAC,CAAC;;OAGvF,IAAI,CAAC6oB,WAAW,GAAG3mB,OAAO,CACzB,CAACsR,cAAc,CAAC8W,QAAQ,IACrB,CAAC9W,cAAc,CAAC+W,YAAY,IAC5B,CAAC/W,cAAc,CAACgX,OAAO,CAC1B;OAED,IAAI,CAAC3lB,MAAM,CAACO,MAAM,CACjB,mCAAmC,EACnC,IAAI,CAACwjB,uBAAuB,IACzB,CAAC,IAAI,CAACvW,aAAa,IACnB,CAAC,IAAI,CAACwW,WAAW,CACpB;;IAEF;GACD/rB,OAAO,qBAAG;KACT,IAAI,CAAC2tB,UAAU,CAAC,IAAI,CAACxC,qBAAqB,EAAE,IAAI,CAACD,WAAW,EAAE,IAAI,CAACE,oCAAoC,CAAC;IACxG;GACDrkB,OAAO,qBAAG;KACT,IAAI,IAAI,CAACiO,sBAAsB,EAC/B;OACC,IAAI,CAACjN,MAAM,CAACO,MAAM,CAAC,mCAAmC,EAAE,KAAK,CAAC;OAC9D,IAAI,CAACqO,uBAAuB,EAAE;;IAE/B;GACD9V,OAAO,EAAE;KACR8V,uBAAuB,qCACvB;OAAA;OACC,IAAI,CAAClC,mBAAmB,GAAG,IAAImC,+BAAM,CAAC,IAAI,CAAC3B,iBAAiB,CAAC;OAC7D,IAAI,CAACR,mBAAmB,CAACoC,MAAM,EAAE,CAAC9J,IAAI,CAAC;SAAA,OAAM,MAAI,CAAC+J,eAAe,EAAE;SAAC,SAAM,CAAC,YAAM,EAAE,CAAC;OACpF,IAAI,CAACrC,mBAAmB,CAAC7R,SAAS,CAAC,YAAY,EAAE,IAAI,CAACgrB,iBAAiB,CAAC3iB,IAAI,CAAC,IAAI,CAAC,CAAC;OACnF,IAAI,CAACwJ,mBAAmB,CAAC7R,SAAS,CAAC,qBAAqB,EAAE,IAAI,CAACyS,0BAA0B,CAACpK,IAAI,CAAC,IAAI,CAAC,CAAC;OACrG,IAAI,CAACwJ,mBAAmB,CAAC7R,SAAS,CAAC,cAAc,EAAE,IAAI,CAACirB,mBAAmB,CAAC5iB,IAAI,CAAC,IAAI,CAAC,CAAC;OACvF,IAAI,CAACwJ,mBAAmB,CAAC7R,SAAS,CAAC,iBAAiB,EAAE,IAAI,CAACkrB,sBAAsB,CAAC7iB,IAAI,CAAC,IAAI,CAAC,CAAC;MAC7F;KACD8iB,kCAAkC,gDAClC;OAAA;OACCC,iBAAM,CAACC,QAAQ,CAACF,kCAAkC,CACjD;SAAEG,SAAS,EAAEC,oCAAU,CAACC;QAA4B,CACpD,CAACrhB,IAAI,CAAC,YAAM;SACZ,IAAI,MAAI,CAAC0H,mBAAmB,EAC5B;WACC,MAAI,CAACA,mBAAmB,CAAC4Z,MAAM,EAAE,CAACthB,IAAI,CAAC,YAAM;aAC5C,MAAI,CAAC+J,eAAe,EAAE;YACtB,CAAC;;QAEH,CAAC;MACF;KACD+W,mBAAmB,+BAACzqB,KAAK,EACzB;OAAA;OACC,IAAI,CAAC2E,MAAM,CAACC,QAAQ,CACnB,8BAA8B,EAC9B;SACCslB,MAAM,yBAAElqB,KAAK,CAACqI,OAAO,EAAE,CAAC6iB,IAAI,wDAApB,oBAAsBpf,EAAE;SAChCqf,QAAQ,0BAAEnrB,KAAK,CAACqI,OAAO,EAAE,CAAC6iB,IAAI,yDAApB,qBAAsBhtB;QAChC,CACD;MACD;KACDwsB,sBAAsB,kCAAC1qB,KAAK,EAC5B;OACC,IAAMorB,OAAO,GAAGprB,KAAK,CAACqI,OAAO,EAAE,CAAC+iB,OAAO;OACvC,IAAMC,OAAO,GAAGD,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEC,OAAO;OAChC,IAAI,CAAC1mB,MAAM,CAACC,QAAQ,CACnB,8BAA8B,EAC9B;SACCulB,QAAQ,EAAEkB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEvf,EAAE;SACrB1D,UAAU,EAAEijB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEjjB,UAAU;SAC/BkjB,SAAS,EAAEF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEtf;QACpB,CACD;MACD;KACD0e,iBAAiB,6BAACxqB,KAAK,EACvB;OAAA;OACC,IAAMurB,EAAE,GAAGvrB,KAAK,CAACqI,OAAO,EAAE,CAACkjB,EAAE;OAC7B,IAAI,CAAC5mB,MAAM,CAACC,QAAQ,CACnB,8BAA8B,EAC9B;SACCwlB,QAAQ,EAAEmB,EAAE,aAAFA,EAAE,4CAAFA,EAAE,CAAEC,aAAa,sDAAjB,kBAAmBpB,QAAQ;SACrCC,YAAY,EAAEkB,EAAE,aAAFA,EAAE,6CAAFA,EAAE,CAAEC,aAAa,uDAAjB,mBAAmBnB,YAAY;SAC7CC,OAAO,EAAEiB,EAAE,aAAFA,EAAE,sCAAFA,EAAE,CAAEE,OAAO,gDAAX,YAAa3f;QACtB,CACD;MACD;KACD4H,eAAe,6BACf;OAAA;OACC,IAAMzL,KAAK,GAAG,IAAI,CAACoJ,mBAAmB,CAACsC,QAAQ,EAAE;OACjD,IAAMxL,WAAW,GAAG;SACnBwJ,IAAI,oBAAE1J,KAAK,CAAC2L,OAAO,mDAAb,eAAejC,IAAI;SACzBuY,MAAM,iBAAEjiB,KAAK,CAACijB,IAAI,gDAAV,YAAYpf,EAAE;SACtBqf,QAAQ,kBAAEljB,KAAK,CAACijB,IAAI,iDAAV,aAAYhtB,IAAI;SAC1BisB,QAAQ,oBAAEliB,KAAK,CAACmjB,OAAO,4EAAb,eAAeC,OAAO,0DAAtB,sBAAwBvf,EAAE;SACpC1D,UAAU,qBAAEH,KAAK,CAACmjB,OAAO,6EAAb,gBAAeC,OAAO,0DAAtB,sBAAwBjjB,UAAU;SAC9CkjB,SAAS,qBAAErjB,KAAK,CAACmjB,OAAO,oDAAb,gBAAetf,EAAE;SAC5Bse,QAAQ,eAAEniB,KAAK,CAACsjB,EAAE,uEAAR,UAAUC,aAAa,0DAAvB,sBAAyBpB,QAAQ;SAC3CC,YAAY,gBAAEpiB,KAAK,CAACsjB,EAAE,wEAAR,WAAUC,aAAa,0DAAvB,sBAAyBnB,YAAY;SACnDC,OAAO,gBAAEriB,KAAK,CAACsjB,EAAE,qEAAR,WAAUE,OAAO,uDAAjB,mBAAmB3f;QAC5B;OACD,IAAI,CAACnH,MAAM,CAACC,QAAQ,CAAC,8BAA8B,EAAEuD,WAAW,CAAC;MACjE;KACDujB,uBAAuB,qCACvB;OACC,IAAI,CAAC9rB,KAAK,CAAC,iDAAiD,CAAC;MAC7D;KACDwpB,sBAAsB,kCAACL,MAAM,EAC7B;OACC,IAAM4C,WAAW,GAAG,gCAAgC,GAAG5C,MAAM,CAACC,IAAI,CAACY,WAAW,EAAE,GAAG,wBAAwB;OAC3G,IAAMgC,QAAQ,GAAG,gCAAgC,GAAG7C,MAAM,CAACC,IAAI,CAACY,WAAW,EAAE,GAAG,gBAAgB;OAEhG,OAAOpnB,aAAG,CAACC,UAAU,CAACkpB,WAAW,CAAC,IAAInpB,aAAG,CAACC,UAAU,CAACmpB,QAAQ,CAAC;MAC9D;KACDnC,yBAAyB,qCAACV,MAAM,EAChC;OACC,IAAM4C,WAAW,GAAG,gCAAgC,GAAG5C,MAAM,CAACC,IAAI,CAACY,WAAW,EAAE,GAAG,oBAAoB;OACvG,IAAMgC,QAAQ,GAAG,kDAAkD;OAEnE,OAAOppB,aAAG,CAACC,UAAU,CAACkpB,WAAW,CAAC,IAAInpB,aAAG,CAACC,UAAU,CAACmpB,QAAQ,CAAC;MAC9D;KACD5B,QAAQ,oBAAC6B,MAAM,EACf;OACC,OAAO,YAAM;SACZ,IAAI,OAAOA,MAAM,KAAK,QAAQ,EAC9B;WACC,OAAO7oB,2BAAO,CAAC7D,UAAU,CAAC0sB,MAAM,EAAE;aACjCC,MAAM,EAAE;eACPC,MAAM,EAAE,gBAAS/rB,KAAK,EAAE;iBACvB,IAAMZ,MAAM,GAAGY,KAAK,CAACgsB,SAAS,EAAE;iBAChC,IAAMC,QAAQ,GAAG7sB,MAAM,CAAC8sB,cAAc,EAAE,CAACppB,EAAE;iBAC3CmpB,QAAQ,CAACE,cAAc,CAAC,sCAAsC,EAAE;mBAAA,OAAM/sB,MAAM,CAACwd,KAAK,EAAE;mBAAC;iBACrFqP,QAAQ,CAACE,cAAc,CAAC,8BAA8B,EAAE;mBAAA,OAAM/sB,MAAM,CAACwd,KAAK,EAAE;mBAAC;iBAC7EqP,QAAQ,CAACE,cAAc,CAAC,mBAAmB,EAAE;mBAAA,OAAM/sB,MAAM,CAACwd,KAAK,EAAE;mBAAC;;;YAGpE,CAAC;;SAGH,IAAI,uBAAOiP,MAAM,MAAK,QAAQ,IAAIA,MAAM,KAAK,IAAI,EACjD;WACC,IAAIA,MAAM,CAAC3tB,IAAI,KAAK,WAAW,EAC/B;aACC,OAAO4E,EAAE,CAACspB,OAAO,CAAC,gBAAgB,CAAC,CAACziB,IAAI,CAAC,YACzC;eACC7G,EAAE,CAACsY,EAAE,CAACiR,UAAU,CAAClsB,IAAI,CAAC0rB,MAAM,CAAC9uB,KAAK,CAAC;cACnC,CAAC;;;SAIJ,OAAOuvB,OAAO,CAACC,OAAO,EAAE;QACxB;MACD;KACD1pB,UAAU,sBAAClD,CAAC,EACZ;OACCmD,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC7D,UAAU,CAAC,IAAI,CAACtC,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgQ,0BAA0B,EAAE;SAACpT,KAAK,EAAE;QAAK,CAAE;MACrG;KACD8pB,UAAU,sBAACzX,iBAAiB,EAAEC,OAAO,EAAEC,gCAAgC,EACvE;OACC,IAAI,CAACF,iBAAiB,GAAGA,iBAAiB;OAC1C,IAAI,CAACC,OAAO,GAAGA,OAAO;OACtB,IAAI,CAACC,gCAAgC,GAAGA,gCAAgC;OAExE,IAAI,CAACnW,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACiP,iBAAiB,GAAG,IAAI,CAACA,iBAAiB;OAClE,IAAI,CAACjW,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkP,OAAO,GAAG,IAAI,CAACA,OAAO;OAC9C,IAAI,CAAClW,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmP,gCAAgC,GAAG,IAAI,CAACA,gCAAgC;OAEhG,IAAI,CAACrO,MAAM,CAACO,MAAM,CAAC,mCAAmC,EAAE,IAAI,CAAC4N,iBAAiB,KAAK,EAAE,CAAC;MACtF;KACD0Z,yBAAyB,qCAACzvB,KAAK,EAC/B;OACC,IAAI,CAAC6C,KAAK,CAAC,yCAAyC,EAAE7C,KAAK,CAAC;MAC5D;KACDktB,cAAc,4BACd;OAAA;OACC1gB,cAAI,CAAC0R,kBAAkB,CAAC,wBAAwB,EAAE,uBAAuB,EAAE;SAC1E9U,IAAI,EAAE;QACN,CAAC,CACAwD,IAAI,CAAC,UAAC4iB,OAAO,EAAI;SACjB,IAAIzpB,EAAE,CAAC5E,IAAI,CAACiH,QAAQ,CAAConB,OAAO,CAAC7vB,IAAI,CAAC,IAAI2G,MAAM,CAAC0R,MAAM,CAACwX,OAAO,CAAC7vB,IAAI,CAAC,CAACyB,MAAM,GAAG,CAAC,EAC5E;WACC,MAAI,CAACosB,UAAU,CACdgC,OAAO,CAAC7vB,IAAI,CAACoW,iBAAiB,EAC9ByZ,OAAO,CAAC7vB,IAAI,CAACqW,OAAO,EACpBwZ,OAAO,CAAC7vB,IAAI,CAACsW,gCAAgC,CAC7C;WACD,MAAI,CAACC,yBAAyB,IAAI,CAAC;;QAEpC,CAAC;MACH;KACDwZ,mBAAmB,iCACnB;OAAA;OACCljB,cAAI,CAAC0R,kBAAkB,CAAC,wBAAwB,EAAE,qBAAqB,EAAE;SACxE9U,IAAI,EAAE,OAAO;SACbzJ,IAAI,EAAE;WACLsI,MAAM,EAAC;aACNgC,OAAO,EAAE,IAAI,CAACA,OAAO;aACrBC,WAAW,EAAE,IAAI,CAACA;;;QAGpB,CAAC,CACD0C,IAAI,CAAC,UAAC4iB,OAAO,EAAI;SACjB,IAAIzpB,EAAE,CAAC5E,IAAI,CAACiH,QAAQ,CAAConB,OAAO,CAAC7vB,IAAI,CAAC,IAAI2G,MAAM,CAAC0R,MAAM,CAACwX,OAAO,CAAC7vB,IAAI,CAAC,CAACyB,MAAM,GAAG,CAAC,EAC5E;WACC,IAAG,MAAI,CAACsqB,YAAY,IAAI8D,OAAO,CAAC7vB,IAAI,CAAC+rB,YAAY,EACjD;aACCrN,kBAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;eAC7BC,OAAO,EAAEhZ,aAAG,CAACC,UAAU,CAAC,mDAAmD,EAAE;iBAC5E,SAAS,EAAE8pB,OAAO,CAAC7vB,IAAI,CAAC6F;gBACxB;cACD,CAAC;;WAGH,MAAI,CAACkmB,YAAY,GAAG8D,OAAO,CAAC7vB,IAAI,CAAC+rB,YAAY;WAC7C,MAAI,CAACiD,uBAAuB,EAAE;;QAE/B,CAAC;MACF;KACDgB,mBAAmB,+BAAC1sB,KAAK,EACzB;OACC,IAAGA,KAAK,CAACtD,IAAI,CAACwB,IAAI,KAAKypB,UAAU,EACjC;SACC,IAAI,CAAC8E,mBAAmB,EAAE;QAC1B,MAED;SACC,IAAI,CAACxC,cAAc,EAAE;;MAEtB;KACDnW,6BAA6B,yCAAC9T,KAAK,EACnC;OACC8C,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC8Q,6BAA6B,CAAC9T,KAAK,CAAC;MAC3D;KACD2sB,8BAA8B,0CAAC3sB,KAAK,EACpC;OACC8C,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC2pB,8BAA8B,CAAC3sB,KAAK,CAAC;;IAE7D;;GAEDe,QAAQ,4TAWHyB,aAAG,CAACC,UAAU,CAAC,8CAA8C,CAAC,0zCA2BzDD,aAAG,CAACC,UAAU,CAAC,wCAAwC,CAAC,+IAGxDD,aAAG,CAACC,UAAU,CAAC,0DAA0D,CAAC,usBAWzED,aAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC,sIAEhED,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC,2YAQ5CD,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,8GAEpDD,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,spBAc3DD,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC;CAUlE,CAAC;;ACtjBD,yBAAe;GACdxF,UAAU,EAAE;KACX,YAAY,EAAE+b,IAAI;KAClB,eAAe,EAAErX,OAAO;KACxB,eAAe,EAAEqJ,SAAO;KACxB,gBAAgB,EAAE2E,YAAY;KAC9B,iBAAiB,EAAEe,SAAS;KAC5B,kBAAkB,EAAEqD,UAAU;KAC9B,mBAAmB,EAAE8T,UAAU;KAC/B,gBAAgB,EAAE7R;IAClB;GACDrV,KAAK,EAAE;KACNisB,WAAW,EAAE;OACZ1uB,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;;IAEX;GACDnE,IAAI,kBACJ;KACC,IAAMmY,MAAM,GAAG;OACdjB,OAAO,EAAE;SACRkU,WAAW,EAAE,IAAI,CAACjrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkP,OAAO;SAC5CgV,qBAAqB,EAAE,IAAI,CAAClrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACiP,iBAAiB;SAChEjB,iBAAiB,EAAE,IAAI,CAAChV,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgO,iBAAiB;SAC5DmW,oCAAoC,EAAE,IAAI,CAACnrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmP,gCAAgC;SAC9FiV,iBAAiB,EAAE,IAAI,CAACprB,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACqK,QAAQ;SAC7DrJ,OAAO,EAAE,IAAI,CAAC1V,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoV,iBAAiB;SAClDiP,KAAK,EAAE,IAAI,CAACrrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC4kB,YAAY;SAC3CzhB,OAAO,EAAE,IAAI,CAACnK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmD,OAAO;SACxCC,WAAW,EAAE,IAAI,CAACpK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoD,WAAW;SAChDkhB,gBAAgB,EAAE,IAAI,CAACtrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACskB,gBAAgB;SAC1D3V,aAAa,EAAE,IAAI,CAACqa,gBAAgB,EAAE;SACtC9sB,QAAQ,EAAE,IAAI,CAAClD,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM;SACzD2O,cAAc,EAAE,IAAI,CAAC5V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACyG,IAAI;SACtDtF,SAAS,EAAE,IAAI,CAAC7V,KAAK,CAAC+G,IAAI,CAACsV,cAAc;SACzCvG,YAAY,EAAE;QACd;OACD5H,OAAO,EAAE;SACRxI,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,0CAA0C,CAAC;SACjEoI,SAAS,EAAE,IAAI,CAAChO,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM,GACvD,EAAE,GACFtB,aAAG,CAACC,UAAU,CAAC,2CAA2C;QAC7D;OACD0W,SAAS,EAAE;SACVhY,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC,KAAK,GAChDjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAClF,KAAK,CAAC;SAC1EnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC,KAAK;SACtDpX,UAAU,EAAE,IAAI,CAACsX,aAAa,CAAC,IAAI,CAAC1c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAClF,KAAK,CAAC;SAC3EhS,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC2V,oBAAoB,GAAG,IAAI,CAAC3c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC2V,oBAAoB,KAAK,GAAG,GAAG,IAAI,CAAC3c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC;QAClK;OACDI,OAAO,EAAE,EAAE;OACXjW,QAAQ,EAAE;SACTrC,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC,WAAW,GACrD1Y,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAAC3F,KAAK,CAAC;SACzEnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC,WAAW;SAC3D5X,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkW,mBAAmB,GAAG,IAAI,CAACld,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkW,mBAAmB,KAAK,GAAG,GAAG,IAAI,CAACld,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC;QAC/J;OACDJ,UAAU,EAAE;MACZ;KAED,IAAI,IAAI,CAAC7c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC/b,cAAc,CAAC,OAAO,CAAC,EAC/D;OACC4W,MAAM,CAAC4E,OAAO,GAAG;SAChBtY,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX,KAAK,GAC9CjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC9F,KAAK,CAAC;SACxEnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX,KAAK;SACpDpX,UAAU,EAAE,IAAI,CAACsX,aAAa,CAAC,IAAI,CAAC1c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC9F,KAAK,CAAC;SACzEhS,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoW,kBAAkB,GAAG,IAAI,CAACpd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoW,kBAAkB,KAAK,GAAG,GAAG,IAAI,CAACpd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX;QAC5J;;KAGF,IAAI,IAAI,CAACxc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACqW,qBAAqB,EACjD;OACCrF,MAAM,CAAC6E,UAAU,GAAG;SACnBvY,MAAM,EAAEC,4CAAM,CAACK,QAAQ;SACvBuS,gBAAgB,EAAE,IAAI,CAACnX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmQ,gBAAgB;SAC1DC,uBAAuB,EAAE,IAAI,CAACpX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoQ,uBAAuB;SACxEC,KAAK,EAAE,IAAI,CAACrX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsW,eAAe;SAC9CjY,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuW,qBAAqB,GAAG,IAAI,CAACvd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuW,qBAAqB,KAAK,GAAG,GAAG;QAC9H;;KAGF,IAAI,IAAI,CAACvd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,UAAU,CAAC,EACtD;OACC4W,MAAM,CAACwF,QAAQ,GAAG;SACjBnG,KAAK,EAAE,IAAI,CAACoG,qBAAqB,CAAC,IAAI,CAACzd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACwW,QAAQ;QAClE;;KAGF,IAAI,IAAI,CAACxd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAC0T,MAAM,EAChD;OACCjY,MAAM,CAACsE,SAAS,CAAC2T,MAAM,GAAG,IAAI,CAACC,uBAAuB,CACrD,IAAI,CAAClwB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAC0T,MAAM,EAC5CjY,MAAM,CAACsE,SAAS,CAACxb,KAAK,CACtB;;KAGF,OAAO;OACNkX,MAAM,EAANA;MACA;IACD;GACD/T,MAAM,EAAE,CACPG,UAAU,EACVxE,kBAAkB,CAClB;GACD+D,QAAQ,EAAE;KACTga,gBAAgB,8BAChB;OACC,OAAO,IAAI,CAAC3F,MAAM,CAACwF,QAAQ,CAACpc,cAAc,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC4W,MAAM,CAACwF,QAAQ,CAACnG,KAAK,CAAC/V,MAAM,GAAG,CAAC;MAC5F;KACDsc,kBAAkB,gCAClB;OACC,OAAO,IAAI,CAAC5F,MAAM,CAAC6E,UAAU,CAACzb,cAAc,CAAC,OAAO,CAAC;MACrD;KACDyc,eAAe,6BACf;OACC,OAAO,IAAI,CAAC7F,MAAM,CAAC4E,OAAO,CAACxb,cAAc,CAAC,OAAO,CAAC;MAClD;KACD0c,iBAAiB,+BACjB;OACC,OAAO,IAAI,CAAChe,QAAQ,GAAG6F,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,GAAGD,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;MAChG;KACD4S,mBAAmB,iCACnB;OACC,OAAO,IAAI,CAAC2X,qBAAqB,EAAE;;IAEpC;GACDvvB,OAAO,EAAE;KACRovB,gBAAgB,8BAChB;OACC,IAAI,IAAI,CAAChwB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgO,iBAAiB,EAC7C;SACC,OAAOrP,aAAG,CAACC,UAAU,CAAC,6DAA6D,CAAC;;OAGrF,IAAI,IAAI,CAAC5F,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAAC0b,IAAI,EAC1C;SACC,OAAOzqB,aAAG,CAACC,UAAU,CAAC,yDAAyD,CAAC;;OAGjF,OAAOD,aAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC;MACtE;KACDoY,WAAW,yBACX;OACC,IAAI,CAAChZ,OAAO,GAAG,CAAC;MAChB;KACDyY,qBAAqB,iCAACpG,KAAK,EAC3B;OACC,IAAM4G,IAAI,GAAG,EAAE;OAEfzX,MAAM,CAAC0R,MAAM,CAACb,KAAK,CAAC,CAAC9V,OAAO,CAC3B,UAAAyF,OAAO;SAAA,OAAIiX,IAAI,CAAC7V,IAAI,CAAC8V,oBAAoB,CAAC9F,MAAM,CAACpR,OAAO,CAAC,CAAC;SAAC;OAE5D,OAAOiX,IAAI;MACX;KACDxB,iBAAiB,6BAACpF,KAAK,EACvB;OACC,IAAMvW,KAAK,GAAG,EAAE;OAChB0F,MAAM,CAAC0R,MAAM,CAACb,KAAK,CAAC,CAAC9V,OAAO,CAC3B,UAAAyF,OAAO;SAAA,OAAIlG,KAAK,CAACsH,IAAI,CAACvG,YAAY,CAACuW,MAAM,CAACpR,OAAO,CAAC,CAAC;SAAC;OAErD,OAAOlG,KAAK;MACZ;KACDovB,uBAAuB,mCAACD,MAAM,EAAEnvB,KAAK,EACrC;OACC,IAAMuvB,GAAG,GAAG,EAAE;OAEd,IAAItsB,KAAK,CAACkE,OAAO,CAACgoB,MAAM,CAAC,EACzB;SACCzpB,MAAM,CAAC0R,MAAM,CAAC+X,MAAM,CAAC,CAAC1uB,OAAO,CAAC,UAACC,IAAI,EAAK;WACvC,IAAM8uB,KAAK,GAAG,IAAIzuB,UAAU,CAACL,IAAI,CAAC;WAClC8uB,KAAK,CAACC,SAAS,CAACzvB,KAAK,CAAC;WACtBuvB,GAAG,CAACjoB,IAAI,CAACkoB,KAAK,CAAC;UACf,CAAC;;OAGH,OAAOD,GAAG;MACV;KACD3T,aAAa,yBAACrF,KAAK,EACnB;OACC,IAAMpV,MAAM,GAAG,EAAE;OACjBoV,KAAK,CAAC9V,OAAO,CAAC,UAACC,IAAI,EAAK;SACvB,IAAI,CAAC,CAACK,SAAS,CAACR,IAAI,EAAE,EAAEQ,UAAU,CAACR,IAAI,EAAE,CAAC,CAAC4B,QAAQ,CAACzB,IAAI,CAACH,IAAI,CAAC,EAC9D;WACCY,MAAM,CAACmG,IAAI,CAAC5G,IAAI,CAAC;;QAElB,CAAC;OAEF,OAAOS,MAAM;MACb;KACDkc,YAAY,wBAACrb,CAAC,EAAEzB,IAAI,EACpB;OAAA;OACCqL,cAAI,CAAC0R,kBAAkB,CACtB,wBAAwB,EACxB,aAAa,EACb;SACC9U,IAAI,EAAE,OAAO;SACbzJ,IAAI,EAAE;WACLwB,IAAI,EAAJA;;QAED,CACD,CAACyL,IAAI,CACL,UAACuR,QAAQ,EAAK;SACb,IAAIA,QAAQ,CAACxe,IAAI,EACjB;WACC,KAAI,CAACye,kBAAkB,CAACD,QAAQ,CAACxe,IAAI,EAAEwB,IAAI,CAAC;;QAE7C,EACD,YAAM;SACLkd,kBAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;WAC7BC,OAAO,EAAEhZ,aAAG,CAACC,UAAU,CAAC,+BAA+B;UACvD,CAAC;QACF,CACD;MACD;KACD0Y,kBAAkB,8BAACze,IAAI,EAAEwB,IAAI,EAC7B;OACC,IAAIA,IAAI,KAAK,YAAY,EACzB;SACC,IAAI,CAAC2W,MAAM,CAACsE,SAAS,CAAChY,MAAM,GAAGzE,IAAI,CAAC2c,KAAK,GACtCjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB,IAAI,CAACuT,MAAM,CAACsE,SAAS,CAACxb,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;SAChE,IAAI,CAACW,MAAM,CAACsE,SAAS,CAAC2T,MAAM,GAAG,IAAI,CAACC,uBAAuB,CAACrwB,IAAI,CAACowB,MAAM,EAAE,IAAI,CAACjY,MAAM,CAACsE,SAAS,CAACxb,KAAK,CAAC;SACrG,IAAI,CAACkX,MAAM,CAACsE,SAAS,CAACpX,SAAS,GAAGrF,IAAI,CAAC2c,KAAK;SAC5C,IAAI,CAACxE,MAAM,CAACsE,SAAS,CAAClX,UAAU,GAAG,IAAI,CAACsX,aAAa,CAAC7c,IAAI,CAACwX,KAAK,CAAC;QACjE,MACI,IAAIhW,IAAI,KAAK,SAAS,EAC3B;SACC,IAAI,CAAC2W,MAAM,CAAC4E,OAAO,CAACtY,MAAM,GAAGzE,IAAI,CAAC2c,KAAK,GACpCjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB,IAAI,CAACuT,MAAM,CAAC4E,OAAO,CAAC9b,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;SAC9D,IAAI,CAACW,MAAM,CAAC4E,OAAO,CAAC1X,SAAS,GAAGrF,IAAI,CAAC2c,KAAK;SAC1C,IAAI,CAACxE,MAAM,CAAC4E,OAAO,CAACxX,UAAU,GAAG,IAAI,CAACsX,aAAa,CAAC7c,IAAI,CAACwX,KAAK,CAAC;QAC/D,MACI,IAAIhW,IAAI,KAAK,UAAU,EAC5B;SACC,IAAI,CAAC2W,MAAM,CAACrR,QAAQ,CAACrC,MAAM,GAAGzE,IAAI,CAACod,WAAW,GAC3C1Y,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB,IAAI,CAACuT,MAAM,CAACrR,QAAQ,CAAC7F,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;SAC/D,IAAI,CAACW,MAAM,CAACrR,QAAQ,CAACzB,SAAS,GAAGrF,IAAI,CAACod,WAAW;;MAElD;KACD2B,MAAM,kBAACzb,KAAK,EACZ;OACC,IAAI,CAACJ,KAAK,CAAC,0BAA0B,EAAEI,KAAK,CAAC;MAC7C;KACD2b,cAAc,0BAAC5e,KAAK,EACpB;OACC,IAAI,CAACF,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACqK,QAAQ,GAAG7e,KAAK;OAClD+F,EAAE,CAAC+Y,WAAW,CAACC,IAAI,CAAC,aAAa,EAAE,8BAA8B,EAAE,0BAA0B,EAAE/e,KAAK,CAAC;MACrG;KACDswB,kBAAkB,8BAACrtB,KAAK,EACxB;OACC,IAAI,CAACJ,KAAK,CAAC,uBAAuB,EAAEI,KAAK,CAAC;MAC1C;KACDkD,mBAAmB,+BAAChF,IAAI,EAAEnB,KAAK,EAC/B;OACC+F,EAAE,CAAC+Y,WAAW,CAACC,IAAI,CAAC,aAAa,EAAE,8BAA8B,EAAE5d,IAAI,EAAEnB,KAAK,CAAC;MAC/E;KACD4K,uBAAuB,qCACvB;OACC,IAAM5D,iBAAiB,GAAG,IAAI,CAACY,MAAM,CAACuF,OAAO,CAAC,iCAAiC,CAAC;OAChF,IAAInG,iBAAiB,EACrB;SACC,IAAI,CAAC8Q,MAAM,CAACrR,QAAQ,CAACrC,MAAM,GAAGC,4CAAM,CAACE,QAAQ;SAE7C,IAAI,CAACuT,MAAM,CAACjB,OAAO,CAACjB,YAAY,GAAG,aAAa;SAChD,IAAI,CAAC9V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACyG,IAAI,GAAG,IAAI,CAACnb,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACC,UAAU,CAACxN,WAAW;SACjG,IAAI,CAAC6Q,MAAM,CAACjB,OAAO,CAACnB,cAAc,GAAG,IAAI,CAAC5V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACC,UAAU,CAACxN,WAAW;QAC7F,MAED;SACC,IAAI,CAAC6Q,MAAM,CAACrR,QAAQ,CAACrC,MAAM,GAAG,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC,WAAW,GAC3E1Y,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAElB,IAAI,CAACuT,MAAM,CAACjB,OAAO,CAACjB,YAAY,GAAG,SAAS;SAC5C,IAAI,CAAC9V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACyG,IAAI,GAAG,IAAI,CAACnb,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACC,UAAU,CAACjO,OAAO;SAC7F,IAAI,CAACsR,MAAM,CAACjB,OAAO,CAACnB,cAAc,GAAG,IAAI,CAAC5V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACC,UAAU,CAACjO,OAAO;;MAE1F;KACDypB,qBAAqB,mCACrB;OACC,OACC,IAAI,CAACnwB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM,IAC5C8V,QAAQ,CAAC,IAAI,CAAC/c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkM,UAAU,CAAC,IAAI,CAAC;;IAGtD;GACDnT,OAAO,qBACP;KACC,IAAI,CAACie,WAAW,EAAE;IAClB;GACDkB,YAAY,0BACZ;KACC,IAAI,CAAClB,WAAW,EAAE;IAClB;;GAED9Z,QAAQ;CAoFT,CAAC;;ACvYD,iCAAe;GACd9D,UAAU,EAAE;KACX,YAAY,EAAE+b,IAAI;KAClB,eAAe,EAAErX,OAAO;KACxB,eAAe,EAAEqJ,SAAO;KACxB,iBAAiB,EAAE0F,SAAS;KAC5B,kBAAkB,EAAEqD,UAAU;KAC9B,mBAAmB,EAAE8T,UAAU;KAC/B,gBAAgB,EAAE7R,QAAQ;KAC1B,yBAAyB,EAAEQ;IAC3B;GACD7V,KAAK,EAAE;KACNisB,WAAW,EAAE;OACZ1uB,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;;IAEX;GACDnE,IAAI,kBACJ;KACC,IAAImY,MAAM,GAAI;OACbjB,OAAO,EAAE;SACRkU,WAAW,EAAE,IAAI,CAACjrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkP,OAAO;SAC5CgV,qBAAqB,EAAE,IAAI,CAAClrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACiP,iBAAiB;SAChEjB,iBAAiB,EAAE,IAAI,CAAChV,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgO,iBAAiB;SAC5DmW,oCAAoC,EAAE,IAAI,CAACnrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmP,gCAAgC;SAC9FiV,iBAAiB,EAAE,IAAI,CAACprB,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACqK,QAAQ;SAC7DrJ,OAAO,EAAE,IAAI,CAAC1V,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoV,iBAAiB;SAClDiP,KAAK,EAAE,IAAI,CAACrrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC4kB,YAAY;SAC3CzhB,OAAO,EAAE,IAAI,CAACnK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmD,OAAO;SACxCC,WAAW,EAAE,IAAI,CAACpK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoD,WAAW;SAChDkhB,gBAAgB,EAAE,IAAI,CAACtrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACskB,gBAAgB;SAC1D3V,aAAa,EAAE,IAAI,CAACqa,gBAAgB,EAAE;SACtC9sB,QAAQ,EAAE,IAAI,CAAClD,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM;SACzD2O,cAAc,EAAE,IAAI,CAAC5V,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACyG,IAAI;SACtDtF,SAAS,EAAE,IAAI,CAAC7V,KAAK,CAAC+G,IAAI,CAACsV,cAAc;SACzCvG,YAAY,EAAE;QACd;OACD5H,OAAO,EAAE;SACRxI,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,0CAA0C,CAAC;SACjEoI,SAAS,EAAE,IAAI,CAAChO,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM,GACvD,EAAE,GACFtB,aAAG,CAACC,UAAU,CAAC,2CAA2C;QAC7D;OACD0W,SAAS,EAAE;SACVhY,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC,KAAK,GAChDjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAClF,KAAK,CAAC;SAC1EnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC,KAAK;SACtDpX,UAAU,EAAE,IAAI,CAACsX,aAAa,CAAC,IAAI,CAAC1c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAClF,KAAK,CAAC;SAC3EhS,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC2V,oBAAoB,GAAG,IAAI,CAAC3c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC2V,oBAAoB,KAAK,GAAG,GAAG,IAAI,CAAC3c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC;QAClK;OACDI,OAAO,EAAE,EAAE;OACXC,UAAU,EAAE,EAAE;OACdrC,gBAAgB,EAAE;SACjBlW,MAAM,EAAEC,4CAAM,CAACK;;MAEhB;KAED,IAAI,IAAI,CAAC5E,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC/b,cAAc,CAAC,OAAO,CAAC,EAC/D;OACC4W,MAAM,CAAC4E,OAAO,GAAG;SAChBtY,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX,KAAK,GAC9CjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC9F,KAAK,CAAC;SACxEnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX,KAAK;SACpDpX,UAAU,EAAE,IAAI,CAACsX,aAAa,CAAC,IAAI,CAAC1c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC9F,KAAK,CAAC;SACzEhS,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoW,kBAAkB,GAAG,IAAI,CAACpd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoW,kBAAkB,KAAK,GAAG,GAAG,IAAI,CAACpd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX;QAC5J;;KAGF,IAAI,IAAI,CAACxc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACqW,qBAAqB,EACjD;OACCrF,MAAM,CAAC6E,UAAU,GAAG;SACnBvY,MAAM,EAAEC,4CAAM,CAACK,QAAQ;SACvBuS,gBAAgB,EAAE,IAAI,CAACnX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmQ,gBAAgB;SAC1DE,KAAK,EAAE,IAAI,CAACrX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsW,eAAe;SAC9CjY,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuW,qBAAqB,GAAG,IAAI,CAACvd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuW,qBAAqB,KAAK,GAAG,GAAG;QAC9H;;KAGF,IAAI,IAAI,CAACvd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,UAAU,CAAC,EACtD;OACC4W,MAAM,CAACwF,QAAQ,GAAG;SACjBnG,KAAK,EAAE,IAAI,CAACoG,qBAAqB,CAAC,IAAI,CAACzd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACwW,QAAQ;QAClE;;KAGF,IAAI,IAAI,CAACxd,KAAK,CAAC+G,IAAI,CAAC3F,cAAc,CAAC,kBAAkB,CAAC,EACtD;OACC,IAAI,IAAI,CAACpB,KAAK,CAAC+G,IAAI,CAACyT,gBAAgB,CAACZ,cAAc,EACnD;SACC5B,MAAM,CAACwC,gBAAgB,CAACZ,cAAc,GAAG,IAAI,CAAC5Z,KAAK,CAAC+G,IAAI,CAACyT,gBAAgB,CAACZ,cAAc;;;KAI1F,OAAO;OACN5B,MAAM,EAAEA;MACR;IACD;GACD/T,MAAM,EAAE,CACPG,UAAU,EACVxE,kBAAkB,CAClB;GACD+D,QAAQ,EAAE;KACTga,gBAAgB,8BAChB;OACC,OAAO,IAAI,CAAC3F,MAAM,CAACwF,QAAQ,CAACpc,cAAc,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC4W,MAAM,CAACwF,QAAQ,CAACnG,KAAK,CAAC/V,MAAM,GAAG,CAAC;MAC5F;KACDsc,kBAAkB,gCAClB;OACC,OAAO,IAAI,CAAC5F,MAAM,CAAC6E,UAAU,CAACzb,cAAc,CAAC,OAAO,CAAC;MACrD;KACDyc,eAAe,6BACf;OACC,OAAO,IAAI,CAAC7F,MAAM,CAAC4E,OAAO,CAACxb,cAAc,CAAC,OAAO,CAAC;MAClD;KACD0c,iBAAiB,+BACjB;OACC,OAAO,IAAI,CAAChe,QAAQ,GAAG6F,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,GAAGD,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;MAChG;KACDmY,sBAAsB,oCACtB;OACC,OAAO,IAAI,CAAC/d,KAAK,CAAC+G,IAAI,CAAC3F,cAAc,CAAC,kBAAkB,CAAC;;IAE1D;GACDR,OAAO,EAAE;KACRovB,gBAAgB,8BAChB;OACC,IAAI,IAAI,CAAChwB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgO,iBAAiB,EAC7C;SACC,OAAOrP,aAAG,CAACC,UAAU,CAAC,6DAA6D,CAAC;;OAGrF,IAAI,IAAI,CAAC5F,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAAC0b,IAAI,EAC1C;SACC,OAAOzqB,aAAG,CAACC,UAAU,CAAC,yDAAyD,CAAC;;OAGjF,OAAOD,aAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC;MACtE;KACDoY,WAAW,yBACX;OACC,IAAI,CAAChZ,OAAO,GAAG,CAAC;MAChB;KACDyY,qBAAqB,iCAACpG,KAAK,EAC3B;OACC,IAAI4G,IAAI,GAAG,EAAE;OAEbzX,MAAM,CAAC0R,MAAM,CAACb,KAAK,CAAC,CAAC9V,OAAO,CAC3B,UAAAyF,OAAO;SAAA,OAAIiX,IAAI,CAAC7V,IAAI,CAAC8V,oBAAoB,CAAC9F,MAAM,CAACpR,OAAO,CAAC,CAAC;SAAC;OAE5D,OAAOiX,IAAI;MACX;KACDxB,iBAAiB,6BAACpF,KAAK,EACvB;OACC,IAAIvW,KAAK,GAAG,EAAE;OACd0F,MAAM,CAAC0R,MAAM,CAACb,KAAK,CAAC,CAAC9V,OAAO,CAC3B,UAAAyF,OAAO;SAAA,OAAIlG,KAAK,CAACsH,IAAI,CAACvG,YAAY,CAACuW,MAAM,CAACpR,OAAO,CAAC,CAAC;SAAC;OAErD,OAAOlG,KAAK;MACZ;KACD4b,aAAa,yBAACrF,KAAK,EACnB;OACC,IAAIpV,MAAM,GAAG,EAAE;OACfoV,KAAK,CAAC9V,OAAO,CAAC,UAACC,IAAI,EAAK;SACvB,IAAI,CAAC,CAACK,SAAS,CAACR,IAAI,EAAE,EAAEQ,UAAU,CAACR,IAAI,EAAE,CAAC,CAAC4B,QAAQ,CAACzB,IAAI,CAACH,IAAI,CAAC,EAC9D;WACCY,MAAM,CAACmG,IAAI,CAAC5G,IAAI,CAAC;;QAElB,CAAC;OAEF,OAAOS,MAAM;MACb;KACDkc,YAAY,wBAACrb,CAAC,EAAEzB,IAAI,EACpB;OACCqL,cAAI,CAAC0R,kBAAkB,CACtB,wBAAwB,EACxB,aAAa,EACb;SACC9U,IAAI,EAAE,OAAO;SACbzJ,IAAI,EAAE;WACLwB,IAAI,EAAEA;;QAEP,CACD,CAACyL,IAAI,CAAC,UAASuR,QAAQ,EAAE;SACxB,IAAIA,QAAQ,CAACxe,IAAI,EACjB;WACC,IAAI,CAACye,kBAAkB,CAACD,QAAQ,CAACxe,IAAI,EAAEwB,IAAI,CAAC;;QAE7C,CAAC2J,IAAI,CAAC,IAAI,CAAC,EACZ,YAAW;SACVuT,kBAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;WAC7BC,OAAO,EAAEhZ,aAAG,CAACC,UAAU,CAAC,+BAA+B;UACvD,CAAC;QACF,CAAC;MACH;KACD0Y,kBAAkB,8BAACze,IAAI,EAAEwB,IAAI,EAC7B;OACC,IAAGA,IAAI,KAAK,YAAY,EACxB;SACC,IAAI,CAAC2W,MAAM,CAACsE,SAAS,CAAChY,MAAM,GAAGzE,IAAI,CAAC2c,KAAK,GACtCjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB,IAAI,CAACuT,MAAM,CAACsE,SAAS,CAACxb,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;SAChE,IAAI,CAACW,MAAM,CAACsE,SAAS,CAACpX,SAAS,GAAGrF,IAAI,CAAC2c,KAAK;SAC5C,IAAI,CAACxE,MAAM,CAACsE,SAAS,CAAClX,UAAU,GAAG,IAAI,CAACsX,aAAa,CAAC7c,IAAI,CAACwX,KAAK,CAAC;QACjE,MACI,IAAGhW,IAAI,KAAK,SAAS,EAC1B;SACC,IAAI,CAAC2W,MAAM,CAAC4E,OAAO,CAACtY,MAAM,GAAGzE,IAAI,CAAC2c,KAAK,GACpCjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB,IAAI,CAACuT,MAAM,CAAC4E,OAAO,CAAC9b,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;SAC9D,IAAI,CAACW,MAAM,CAAC4E,OAAO,CAAC1X,SAAS,GAAGrF,IAAI,CAAC2c,KAAK;SAC1C,IAAI,CAACxE,MAAM,CAAC4E,OAAO,CAACxX,UAAU,GAAG,IAAI,CAACsX,aAAa,CAAC7c,IAAI,CAACwX,KAAK,CAAC;;MAEhE;KACDuH,MAAM,kBAACzb,KAAK,EACZ;OACC,IAAI,CAACJ,KAAK,CAAC,0BAA0B,EAAEI,KAAK,CAAC;MAC7C;KACD2b,cAAc,0BAAC5e,KAAK,EACpB;OACC,IAAI,CAACF,KAAK,CAAC+G,IAAI,CAAC2N,iBAAiB,CAACqK,QAAQ,GAAG7e,KAAK;OAClD+F,EAAE,CAAC+Y,WAAW,CAACC,IAAI,CAAC,aAAa,EAAE,8BAA8B,EAAE,0BAA0B,EAAE/e,KAAK,CAAC;MACrG;KACDmG,mBAAmB,+BAAChF,IAAI,EAAEnB,KAAK,EAC/B;OACC+F,EAAE,CAAC+Y,WAAW,CAACC,IAAI,CAAC,aAAa,EAAE,8BAA8B,EAAE5d,IAAI,EAAEnB,KAAK,CAAC;;IAEhF;GACDH,OAAO,qBACP;KACC,IAAI,CAACie,WAAW,EAAE;IAClB;GACDkB,YAAY,0BACZ;KACC,IAAI,CAAClB,WAAW,EAAE;IAClB;GACD9Z,QAAQ;CA0ET,CAAC;;ACzUD,cAAe;GACdJ,KAAK,EAAE;KACN4U,aAAa,EAAE;OACdrX,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;;IAEX;GACDL,QAAQ,EAAE;KACTkV,WAAW,yBACX;OACC,OAAO;SAAC,8CAA8C,EAAE,IAAI,CAACH,aAAa,KAAK;QAAM;;IAEtF;GACD9X,OAAO,EAAE;KACRqY,MAAM,kBAAC9V,KAAK,EACZ;OACC,IAAI,CAACJ,KAAK,CAAC,WAAW,EAAEI,KAAK,CAAC;;IAE/B;GACDe,QAAQ,47BAkBCyB,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;CAQvD,CAAC;;ACpCD,+BAAe;GACdxF,UAAU,EAAE;KACX,YAAY,EAAE+b,MAAI;KAClB,eAAe,EAAEhO,SAAO;KACxB,gBAAgB,EAAE2E,YAAY;KAC9B,kBAAkB,EAAEoE;IACpB;GACDpT,KAAK,EAAE;KACNisB,WAAW,EAAE;OACZ1uB,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;;IAEX;GACDnE,IAAI,kBACJ;KACC,IAAMmY,MAAM,GAAG;OACd9J,OAAO,EAAE;SACR5J,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkB,MAAM,IAAI,IAAI,CAAClI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkB,MAAM,CAAC5G,MAAM,GAAG,CAAC,GAChFiD,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACC,OAAO;SACjBkB,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,0CAA0C;QAChE;OACDe,QAAQ,EAAE;SACTrC,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC,WAAW,GACrD1Y,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAAC3F,KAAK,CAAC;SACzEnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC,WAAW;SAC3D5X,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkW,mBAAmB,GAAG,IAAI,CAACld,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkW,mBAAmB,KAAK,GAAG,GAAG,IAAI,CAACld,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACC;QAC/J;OACDJ,UAAU,EAAE;MACZ;KAED,IAAI,IAAI,CAAC7c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACqW,qBAAqB,EACjD;OACCrF,MAAM,CAAC6E,UAAU,GAAG;SACnBvY,MAAM,EAAEC,4CAAM,CAACK,QAAQ;SACvBwS,uBAAuB,EAAE,IAAI,CAACpX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoQ,uBAAuB;SACxEC,KAAK,EAAE,IAAI,CAACrX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsW,eAAe;SAC9CjY,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuW,qBAAqB,GAAG,IAAI,CAACvd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuW,qBAAqB,KAAK,GAAG,GAAG;QAC9H;;KAGF,OAAO;OACNvF,MAAM,EAANA;MACA;IACD;GACD/T,MAAM,EAAE,CAACG,UAAU,EAAExE,kBAAkB,CAAC;GACxC+D,QAAQ,EACP;KACCia,kBAAkB,gCAClB;OACC,OAAO,IAAI,CAAC5F,MAAM,CAAC6E,UAAU,CAACzb,cAAc,CAAC,OAAO,CAAC;MACrD;KACDqvB,aAAa,2BACb;OACC,OAAO,IAAI,CAAC3wB,QAAQ,KAAK,KAAK;MAC9B;KACD6T,kBAAkB,gCAClB;OACC,OAAO,IAAI,CAAC3T,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM;;IAEvD;GACFrG,OAAO,EACN;KACCod,WAAW,yBACX;OACC,IAAI,CAAChZ,OAAO,GAAG,CAAC;MAChB;KAEDyX,iBAAiB,6BAACpF,KAAK,EACvB;OACC,IAAMvW,KAAK,GAAG,EAAE;OAChB0F,MAAM,CAAC0R,MAAM,CAACb,KAAK,CAAC,CAAC9V,OAAO,CAC3B,UAACyF,OAAO;SAAA,OAAKlG,KAAK,CAACsH,IAAI,CAACvG,YAAY,CAACuW,MAAM,CAACpR,OAAO,CAAC,CAAC;SACrD;OAED,OAAOlG,KAAK;MACZ;KAED4b,aAAa,yBAACrF,KAAK,EACnB;OACC,IAAMpV,MAAM,GAAG,EAAE;OACjBoV,KAAK,CAAC9V,OAAO,CAAC,UAACC,IAAI,EAAK;SACvB,IAAI,CAAC,CAACK,SAAS,CAACR,IAAI,EAAE,EAAEQ,UAAU,CAACR,IAAI,EAAE,CAAC,CAAC4B,QAAQ,CAACzB,IAAI,CAACH,IAAI,CAAC,EAC9D;WACCY,MAAM,CAACmG,IAAI,CAAC5G,IAAI,CAAC;;QAElB,CAAC;OAEF,OAAOS,MAAM;MACb;KAEDkc,YAAY,wBAACrb,CAAC,EAAEzB,IAAI,EACpB;OAAA;OACCqL,cAAI,CAAC0R,kBAAkB,CACtB,wBAAwB,EACxB,aAAa,EACb;SACC9U,IAAI,EAAE,OAAO;SACbzJ,IAAI,EAAE;WACLwB,IAAI,EAAJA;;QAED,CACD,CAACyL,IAAI,CACL,UAACuR,QAAQ,EAAK;SACb,IAAIA,QAAQ,CAACxe,IAAI,EACjB;WACC,KAAI,CAACye,kBAAkB,CAACD,QAAQ,CAACxe,IAAI,EAAEwB,IAAI,CAAC;;QAE7C,EACD,YAAM;SACLkd,kBAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;WAC7BC,OAAO,EAAEhZ,aAAG,CAACC,UAAU,CAAC,+BAA+B;UACvD,CAAC;QACF,CACD;MACD;KAED0Y,kBAAkB,8BAACze,IAAI,EAAEwB,IAAI,EAC7B;OACC,IAAIA,IAAI,KAAK,UAAU,EACvB;SACC,IAAI,CAAC2W,MAAM,CAACrR,QAAQ,CAACrC,MAAM,GAAGzE,IAAI,CAACod,WAAW,GAC3C1Y,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB,IAAI,CAACuT,MAAM,CAACrR,QAAQ,CAAC7F,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;SAC/D,IAAI,CAACW,MAAM,CAACrR,QAAQ,CAACzB,SAAS,GAAGrF,IAAI,CAACod,WAAW;;MAElD;KAED2B,MAAM,kBAACzb,KAAK,EACZ;OACC,IAAI,CAACJ,KAAK,CAAC,0BAA0B,EAAEI,KAAK,CAAC;MAC7C;KAEDkD,mBAAmB,+BAAChF,IAAI,EAAEnB,KAAK,EAC/B;OACC+F,EAAE,CAAC+Y,WAAW,CAACC,IAAI,CAAC,aAAa,EAAE,+BAA+B,EAAE5d,IAAI,EAAEnB,KAAK,CAAC;;IAEjF;GACFH,OAAO,qBACP;KACC,IAAI,CAACie,WAAW,EAAE;IAClB;GACDkB,YAAY,0BACZ;KACC,IAAI,CAAClB,WAAW,EAAE;IAClB;GACD9Z,QAAQ;CAoCT,CAAC;;CC/LD,IAAMwsB,mBAAmB,GAAG;GAC3B5sB,KAAK,EAAE;KACNQ,MAAM,EAAE;OACPjD,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgB,OAAO,EAAE;OACR3D,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACD0B,KAAK,EAAE;OACNrE,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACD2sB,YAAY,EAAE;OACbtvB,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACD4sB,WAAW,EAAE;OACZvvB,IAAI,EAAEmF,MAAM;OACZxC,QAAQ,EAAE;MACV;KACD6sB,+BAA+B,EAAE;OAChCxvB,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;MACV;KACDlE,QAAQ,EAAE;OACTuB,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;MACV;KACD8sB,OAAO,EAAE;OACRzvB,IAAI,EAAEmF,MAAM;OACZxC,QAAQ,EAAE;MACV;KACDgK,SAAS,EAAE;OACV3M,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;;IAEX;GAEDC,MAAM,EAAE,CAACG,UAAU,CAAC;GAEpBhE,UAAU,EAAE;KACX,kBAAkB,EAAEkF;IACpB;GAED3B,QAAQ,EAAE;KACTotB,YAAY,0BACZ;OACC,OAAO,IAAI,CAAC/wB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,QAAQ;MACxD;KACDpB,cAAc,4BACd;OACC,OAAO;SACNb,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBI,UAAU,EAAE,EAAE;SACdF,SAAS,EAAE,IAAI;SACfY,WAAW,EAAE,KAAK;SAClBC,OAAO,EAAE,IAAI,CAACpB,mBAAmB;SACjCzB,QAAQ,EAAE;QACV;MACD;KACD8tB,WAAW,yBACX;OACC,IAAI,IAAI,CAACF,OAAO,CAAC/iB,IAAI,IAAI,IAAI,CAAC+iB,OAAO,CAACzF,KAAK,EAC3C;SACC,OAAO1lB,aAAG,CAACC,UAAU,CACpB,sEAAsE,EACtE;WACC,QAAQ,EAAE,sDAAsD;WAChE,SAAS,EAAE,SAAS;WACpB,gBAAgB,EAAE4G,cAAI,CAACykB,MAAM,CAAC,IAAI,CAACH,OAAO,CAAC/iB,IAAI,CAAC;WAChD,iBAAiB,EAAEvB,cAAI,CAACykB,MAAM,CAAC,IAAI,CAACH,OAAO,CAACzF,KAAK;UACjD,CACD;;OAGF,OAAO,EAAE;MACT;KACD6F,WAAW,yBACX;OACC,OAAOvrB,aAAG,CAACC,UAAU,CACpB,6DAA6D,EAC7D;SACC,QAAQ,EAAE,uFAAuF;SACjG,SAAS,EAAE;QACX,CACD;MACD;KACDurB,qBAAqB,mCACrB;OACC,OAAO,IAAI,CAACJ,YAAY,GAAGprB,aAAG,CAACC,UAAU,CAAC,mEAAmE,CAAC,GAAGD,aAAG,CAACC,UAAU,CAAC,iEAAiE,CAAC;MAClM;KACDwrB,WAAW,yBACX;OACC,IAAM9a,GAAG,GAAG,IAAI,CAACsa,WAAW,CAACS,KAAK,GAAG;SAAE,kBAAkB,gBAAS,IAAI,CAACT,WAAW,CAACS,KAAK;QAAK,GAAG,IAAI;OAEpG,OAAO,CAAC/a,GAAG,CAAC;;IAEb;GAEDxP,OAAO,qBACP;KAAA;OAAA;KACC,IAAI,CAACgB,MAAM,CAACO,MAAM,CAAC,gDAAgD,2BAAE,IAAI,CAACwoB,+BAA+B,yEAAI,IAAI,CAAC;KAElH,IAAMS,eAAe,GAAGhX,QAAQ,CAACiX,cAAc,CAAC,mBAAmB,CAAC;KACpE,IAAID,eAAe,EACnB;OACCE,eAAK,CAACxmB,IAAI,CAACsmB,eAAe,EAAE,OAAO,EAAE,UAACnuB,KAAK,EAAK;SAC/C,KAAI,CAACnD,KAAK,CAAC+G,IAAI,CAAC0qB,kBAAkB,EAAE;QACpC,CAAC;;KAGH,IAAI,CAAC,IAAI,CAAC3xB,QAAQ,EAClB;OACC;;KAGD,IAAM4xB,YAAY,GAAGpX,QAAQ,CAACiX,cAAc,CAAC,gCAAgC,CAAC;KAE9E,IAAMI,aAAa,GAAG;OACrBnb,OAAO,EAAE,yBAAyB;OAClCob,QAAQ,EAAE,CACT;SACC3iB,EAAE,EAAE;QACJ,CACD;OACDggB,MAAM,EAAE;SACP,eAAe,EAAE,sBAAC9rB,KAAK,EAAK;WAC3B,KAAI,CAAC0uB,oBAAoB,CAAC1uB,KAAK,CAAC;;;MAGlC;KAED,IAAI,IAAI,CAACwtB,YAAY,EACrB;OACCgB,aAAa,CAACG,gBAAgB,GAAG,CAChC,CAAC,MAAM,EAAE,IAAI,CAACnB,YAAY,CAAC,CAC3B;OACDgB,aAAa,CAACI,iBAAiB,GAAG,CACjC,CAAC,MAAM,EAAE,IAAI,CAACpB,YAAY,CAAC,CAC3B;;KAGF,IAAMqB,WAAW,GAAG,IAAIC,6BAAW,CAAC;OACnCC,QAAQ,EAAE,KAAK;OACfP,aAAa,EAAbA,aAAa;OACbQ,YAAY,EAAE;MACd,CAAC;KAEFH,WAAW,CAAC9c,QAAQ,CAACwc,YAAY,CAAC;IAClC;GAED9wB,OAAO,EAAE;KACRixB,oBAAoB,gCAAC1uB,KAAK,EAC1B;OAAA;SAAA;SAAA;OACC,qBAAiBA,KAAK,CAACqI,OAAO,EAAE;SAAxBhK,IAAI,kBAAJA,IAAI;OAEZA,IAAI,CAAC4wB,eAAe,CAAC,KAAK,CAAC;OAC3B,iBAAAjvB,KAAK,CAACI,MAAM,2EAAZ,cAAcyuB,WAAW,0DAAzB,sBAA2BK,UAAU,EAAE;OACvC,IAAI,CAACvqB,MAAM,CAACO,MAAM,CAAC,uCAAuC,EAAE7G,IAAI,CAAC8wB,KAAK,EAAE,CAAC;OAEzE,IAAMC,eAAe,GAAG,IAAI,CAACzqB,MAAM,CAACuF,OAAO,CAAC,+BAA+B,CAAC;OAC5E,IAAI,CAACvF,MAAM,CAACO,MAAM,CAAC,6BAA6B,CAAC;OACjDqE,cAAI,CAACC,SAAS,CAAC,mDAAmD,EAAE;SACnE9M,IAAI,EAAE;WACL2yB,MAAM,EAAEhxB,IAAI,CAAC8wB,KAAK;;QAEnB,CAAC,CAACxlB,IAAI,CAAC,UAAC7K,MAAM,EAAK;SACnB,MAAI,CAAC6F,MAAM,CAACO,MAAM,CAAC,gDAAgD,EAAEpG,MAAM,CAACpC,IAAI,CAAC4yB,iBAAiB,CAAC;SACnG,IAAI,CAACxwB,MAAM,CAACpC,IAAI,CAAC4yB,iBAAiB,EAClC;WACC,MAAI,CAAC3qB,MAAM,CAACO,MAAM,CAAC,0CAA0C,EAAEpG,MAAM,CAACpC,IAAI,CAAC6yB,MAAM,CAAC;;SAGnF,IAAIH,eAAe,EACnB;WACC,MAAI,CAACzqB,MAAM,CAACO,MAAM,CAAC,4BAA4B,CAAC;;SAGjD,MAAI,CAACtF,KAAK,CAAC,wBAAwB,EAAEI,KAAK,CAAC;QAC3C,CAAC;MACF;KACD6C,UAAU,sBAAC7C,KAAK,EAChB;OACC8C,EAAE,CAACC,WAAW,CAACC,OAAO,CAACwsB,oBAAoB,EAAE;;IAE9C;GAED5yB,OAAO,qBACP;KACC,IAAI,IAAI,CAAC4wB,YAAY,EACrB;OACC,IAAI,CAAC7oB,MAAM,CAACO,MAAM,CAAC,uCAAuC,EAAE,IAAI,CAACsoB,YAAY,CAAC;;IAE/E;;GAGDzsB,QAAQ;CA6BT,CAAC;;ACxOD,cAAe;GACdJ,KAAK,EAAE;KACN2U,WAAW,EAAE;OACZpX,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACD0U,aAAa,EAAE;OACdrX,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;;IAEX;GACDL,QAAQ,EAAE;KACTkV,WAAW,yBACX;OACC,OAAO;SAAE,8CAA8C,EAAE,IAAI,CAACH,aAAa,KAAK;QAAO;;IAExF;GACD9X,OAAO,EAAE;KACRqY,MAAM,kBAAC9V,KAAK,EACZ;OACC,IAAI,CAACJ,KAAK,CAAC,WAAW,EAAEI,KAAK,CAAC;;IAE/B;GACDe,QAAQ;CA0BT,CAAC;;;ACjDD,AAKA,cAAe;GACdJ,KAAK,EAAE;KACNQ,MAAM,EAAE;OACPjD,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgB,OAAO,EAAE;OACR3D,IAAI,EAAE4D,MAAM;OACZjB,QAAQ,EAAE;MACV;KACD0B,KAAK,EAAE;OACNrE,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;MACV;KACDgK,SAAS,EAAE;OACV3M,IAAI,EAAE0D,MAAM;OACZf,QAAQ,EAAE;;IAEX;GACDC,MAAM,EAAE,CAACG,UAAU,CAAC;GACpB0C,OAAO,qBACP;;KAEC,IAAMhH,QAAQ,GAAG,IAAI,CAACE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM;KAChE,IAAI,CAACjH,KAAK,CAAC+C,KAAK,CAAC,oBAAoB,EAAEjD,QAAQ,CAAC;KAChD,IAAI,CAACgI,MAAM,CAACO,MAAM,CAAC,4BAA4B,CAAC;IAChD;GACDjI,UAAU,EACT;KACC,kBAAkB,EAAEkF;IACpB;GACF1E,OAAO,EACN;KACCoF,UAAU,sBAAClD,CAAC,EACZ;OACCmD,EAAE,CAACC,WAAW,CAACC,OAAO,CAACiI,aAAa,CAACtL,CAAC,CAAC;MACvC;KACDgI,uBAAuB,mCAAC3H,KAAK,EAC7B;OACC,IAAI,CAACJ,KAAK,CAAC,6BAA6B,CAAC;;IAE1C;GACFY,QAAQ,EACP;KACCkC,cAAc,4BACd;OACC,OAAO;SACNb,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBe,OAAO,EAAE,IAAI,CAACpB,mBAAmB;SACjCzB,QAAQ,EAAE;QACV;MACD;KACD0vB,YAAY,0BACZ;OACC,IAAMhrB,eAAe,GAAG,IAAI,CAAC5H,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACa,YAAY,IAAI,EAAE;OAClE,IAAMqF,GAAG,GAAG2lB,kCAAY,CAACtiB,cAAc,CAAC,IAAI,CAACvQ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuB,MAAM,CAACtG,MAAM,EAAE2F,eAAe,EAAE,KAAK,CAAC;OACtG,IAAMkrB,OAAO,GAAGC,aAAG,CAACnc,MAAM,gLAAoF1J,GAAG,CAAS;OAE1H,OAAO2lB,kCAAY,CAACG,eAAe,CAACF,OAAO,EAAElrB,eAAe,CAAC;;IAE9D;GACF1D,QAAQ,6oBAagDyB,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,kFACvDD,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,maAOaD,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;CAYxK,CAAC;;ACnFD,+BAAe;GACdxF,UAAU,EAAE;KACX,mBAAmB,EAAEswB,mBAAmB;KACxC,eAAe,EAAE5rB,OAAO;KACxB,eAAe,EAAEqJ,SAAO;KACxB,iBAAiB,EAAE0F,SAAS;KAC5B,kBAAkB,EAAEqD,UAAU;KAC9B,gBAAgB,EAAEiC,QAAQ;KAC1B,YAAY,EAAEgD,MAAI;KAClB,cAAc,EAAE8W;IAChB;GACDnvB,KAAK,EAAE;KACNisB,WAAW,EAAE;OACZ1uB,IAAI,EAAE8D,OAAO;OACbnB,QAAQ,EAAE;;IAEX;GACDnE,IAAI,kBACJ;KAAA;KACC,IAAMmY,MAAM,GAAG;OACd4Y,WAAW,EAAE;SACZtsB,MAAM,EAAEC,4CAAM,CAACK,QAAQ;SACvB+rB,YAAY,EAAE5T,QAAQ,0BAAC,IAAI,CAAC/c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACksB,kBAAkB,yEAAI,CAAC,CAAC;SACvEtC,WAAW,EAAE,IAAI,CAAC5wB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoV,iBAAiB;SACtDyU,+BAA+B,EAAE,IAAI,CAAC7wB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC6pB,+BAA+B;SACxFC,OAAO,EAAE;WACR/iB,IAAI,EAAE,IAAI,CAAC/N,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmsB,WAAW;WACzC9H,KAAK,EAAE,IAAI,CAACrrB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC4kB;UAC/B;SACD9rB,QAAQ,EAAE,IAAI,CAACE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,QAAQ,IAAI,+BAAI,CAACjH,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACN,OAAO,2DAA/B,uBAAiC0sB,IAAI,MAAK,GAAG;SAC5GplB,SAAS,EAAE,IAAI,CAAChO,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM,GACvD,EAAE,GACFtB,aAAG,CAACC,UAAU,CAAC,gCAAgC;QAClD;OACDsI,OAAO,EAAE;SACR5J,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkB,MAAM,IAAI,IAAI,CAAClI,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkB,MAAM,CAAC5G,MAAM,GAAG,CAAC,GAChFiD,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACC,OAAO;SACjBkB,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,0CAA0C,CAAC;SACjEoI,SAAS,EAAE;QACX;OACDsO,SAAS,EAAE;SACVhY,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC,KAAK,GAChDjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAClF,KAAK,CAAC;SAC1EnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC,KAAK;SACtDpX,UAAU,EAAE,IAAI,CAACsX,aAAa,CAAC,IAAI,CAAC1c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAClF,KAAK,CAAC;SAC3EhS,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC2V,oBAAoB,GAAG,IAAI,CAAC3c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC2V,oBAAoB,KAAK,GAAG,GAAG,IAAI,CAAC3c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAACC;QAClK;OACDI,OAAO,EAAE,EAAE;OACXC,UAAU,EAAE;MACZ;KAED,IAAI,IAAI,CAAC7c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC/b,cAAc,CAAC,OAAO,CAAC,EAC/D;OACC4W,MAAM,CAAC4E,OAAO,GAAG;SAChBtY,MAAM,EAAE,IAAI,CAACtE,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX,KAAK,GAC9CjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;SAClB3D,KAAK,EAAE,IAAI,CAAC2b,iBAAiB,CAAC,IAAI,CAACzc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC9F,KAAK,CAAC;SACxEnS,SAAS,EAAE,IAAI,CAAClF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX,KAAK;SACpDpX,UAAU,EAAE,IAAI,CAACsX,aAAa,CAAC,IAAI,CAAC1c,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAAC9F,KAAK,CAAC;SACzEhS,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoW,kBAAkB,GAAG,IAAI,CAACpd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoW,kBAAkB,KAAK,GAAG,GAAG,IAAI,CAACpd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmW,WAAW,CAACX;QAC5J;;KAGF,IAAI,IAAI,CAACxc,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACqW,qBAAqB,EACjD;OACCrF,MAAM,CAAC6E,UAAU,GAAG;SACnBvY,MAAM,EAAEC,4CAAM,CAACK,QAAQ;SACvBuS,gBAAgB,EAAE,IAAI,CAACnX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmQ,gBAAgB;SAC1DE,KAAK,EAAE,IAAI,CAACrX,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsW,eAAe;SAC9CjY,oBAAoB,EAAE,IAAI,CAACrF,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuW,qBAAqB,GAAG,IAAI,CAACvd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuW,qBAAqB,KAAK,GAAG,GAAG;QAC9H;;KAGF,IAAI,IAAI,CAACvd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,UAAU,CAAC,EACtD;OACC4W,MAAM,CAACwF,QAAQ,GAAG;SACjBnG,KAAK,EAAE,IAAI,CAACoG,qBAAqB,CAAC,IAAI,CAACzd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACwW,QAAQ;QAClE;;KAGF,IAAI,IAAI,CAACxd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAC0T,MAAM,EAChD;OACCjY,MAAM,CAACsE,SAAS,CAAC2T,MAAM,GAAG,IAAI,CAACC,uBAAuB,CACrD,IAAI,CAAClwB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACuV,aAAa,CAAC0T,MAAM,EAC5CjY,MAAM,CAACsE,SAAS,CAACxb,KAAK,CACtB;;KAGF,IAAI,IAAI,CAACd,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM,IAAI,+BAAI,CAACjH,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACN,OAAO,2DAA/B,uBAAiC0sB,IAAI,MAAK,GAAG,EACpG;OACCpb,MAAM,CAAC4Y,WAAW,CAAClrB,KAAK,GAAGC,aAAG,CAACC,UAAU,CAAC,gEAAgE,CAAC;MAC3G,MAED;OACCoS,MAAM,CAAC4Y,WAAW,CAAClrB,KAAK,GAAGC,aAAG,CAACC,UAAU,CAAC,sDAAsD,CAAC;;KAGlG,OAAO;OACNoS,MAAM,EAANA;MACA;IACD;GACD/T,MAAM,EAAE,CACPG,UAAU,EACVxE,kBAAkB,CAClB;GACD+D,QAAQ,EAAE;KACTga,gBAAgB,8BAChB;OACC,OAAO,IAAI,CAAC3F,MAAM,CAACwF,QAAQ,CAACpc,cAAc,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC4W,MAAM,CAACwF,QAAQ,CAACnG,KAAK,CAAC/V,MAAM,GAAG,CAAC;MAC5F;KACDsc,kBAAkB,gCAClB;OACC,OAAO,IAAI,CAAC5F,MAAM,CAAC6E,UAAU,CAACzb,cAAc,CAAC,OAAO,CAAC;MACrD;KACDyc,eAAe,6BACf;OACC,OAAO,IAAI,CAAC7F,MAAM,CAAC4E,OAAO,CAACxb,cAAc,CAAC,OAAO,CAAC;MAClD;KACD0c,iBAAiB,+BACjB;OACC,OAAO,IAAI,CAAChe,QAAQ,GAAG6F,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,GAAGD,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC;MACjH;KACDytB,WAAW,yBACX;OACC,OAAO,CAAC,IAAI,CAACrzB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACssB,iBAAiB;;IAElD;GACD1yB,OAAO,EAAE;KACRod,WAAW,yBACX;OACC,IAAI,CAAChZ,OAAO,GAAG,CAAC;MAChB;KACDyY,qBAAqB,iCAACpG,KAAK,EAC3B;OACC,IAAM4G,IAAI,GAAG,EAAE;OAEfzX,MAAM,CAAC0R,MAAM,CAACb,KAAK,CAAC,CAAC9V,OAAO,CAC3B,UAACyF,OAAO;SAAA,OAAKiX,IAAI,CAAC7V,IAAI,CAAC8V,oBAAoB,CAAC9F,MAAM,CAACpR,OAAO,CAAC,CAAC;SAC5D;OAED,OAAOiX,IAAI;MACX;KACDxB,iBAAiB,6BAACpF,KAAK,EACvB;OACC,IAAMvW,KAAK,GAAG,EAAE;OAChB0F,MAAM,CAAC0R,MAAM,CAACb,KAAK,CAAC,CAAC9V,OAAO,CAC3B,UAACyF,OAAO;SAAA,OAAKlG,KAAK,CAACsH,IAAI,CAACvG,YAAY,CAACuW,MAAM,CAACpR,OAAO,CAAC,CAAC;SACrD;OAED,OAAOlG,KAAK;MACZ;KACDovB,uBAAuB,mCAACD,MAAM,EAAEnvB,KAAK,EACrC;OACC,IAAMuvB,GAAG,GAAG,EAAE;OAEd,IAAItsB,KAAK,CAACkE,OAAO,CAACgoB,MAAM,CAAC,EACzB;SACCzpB,MAAM,CAAC0R,MAAM,CAAC+X,MAAM,CAAC,CAAC1uB,OAAO,CAAC,UAACC,IAAI,EAAK;WACvC,IAAM8uB,KAAK,GAAG,IAAIzuB,UAAU,CAACL,IAAI,CAAC;WAClC8uB,KAAK,CAACC,SAAS,CAACzvB,KAAK,CAAC;WACtBuvB,GAAG,CAACjoB,IAAI,CAACkoB,KAAK,CAAC;UACf,CAAC;;OAGH,OAAOD,GAAG;MACV;KACD3T,aAAa,yBAACrF,KAAK,EACnB;OACC,IAAMpV,MAAM,GAAG,EAAE;OACjBoV,KAAK,CAAC9V,OAAO,CAAC,UAACC,IAAI,EAAK;SACvB,IAAI,CAAC,CAACK,SAAS,CAACR,IAAI,EAAE,EAAEQ,UAAU,CAACR,IAAI,EAAE,CAAC,CAAC4B,QAAQ,CAACzB,IAAI,CAACH,IAAI,CAAC,EAC9D;WACCY,MAAM,CAACmG,IAAI,CAAC5G,IAAI,CAAC;;QAElB,CAAC;OAEF,OAAOS,MAAM;MACb;KACDkc,YAAY,wBAACrb,CAAC,EAAEzB,IAAI,EACpB;OAAA;OACCqL,cAAI,CAAC0R,kBAAkB,CACtB,wBAAwB,EACxB,aAAa,EACb;SACC9U,IAAI,EAAE,OAAO;SACbzJ,IAAI,EAAE;WACLwB,IAAI,EAAJA;;QAED,CACD,CAACyL,IAAI,CACL,UAACuR,QAAQ,EAAK;SACb,IAAIA,QAAQ,CAACxe,IAAI,EACjB;WACC,KAAI,CAACye,kBAAkB,CAACD,QAAQ,CAACxe,IAAI,EAAEwB,IAAI,CAAC;;QAE7C,EACD,YAAM;SACLkd,kBAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;WAC7BC,OAAO,EAAEhZ,aAAG,CAACC,UAAU,CAAC,+BAA+B;UACvD,CAAC;QACF,CACD;MACD;KACD0Y,kBAAkB,8BAACze,IAAI,EAAEwB,IAAI,EAC7B;OACC,QAAQA,IAAI;SAEX,KAAK,YAAY;WAAE;aAClB,IAAI,CAAC2W,MAAM,CAACsE,SAAS,CAAChY,MAAM,GAAGzE,IAAI,CAAC2c,KAAK,GACtCjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;aAClB,IAAI,CAACuT,MAAM,CAACsE,SAAS,CAACxb,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;aAChE,IAAI,CAACW,MAAM,CAACsE,SAAS,CAAC2T,MAAM,GAAG,IAAI,CAACC,uBAAuB,CAACrwB,IAAI,CAACowB,MAAM,EAAE,IAAI,CAACjY,MAAM,CAACsE,SAAS,CAACxb,KAAK,CAAC;aACrG,IAAI,CAACkX,MAAM,CAACsE,SAAS,CAACpX,SAAS,GAAGrF,IAAI,CAAC2c,KAAK;aAC5C,IAAI,CAACxE,MAAM,CAACsE,SAAS,CAAClX,UAAU,GAAG,IAAI,CAACsX,aAAa,CAAC7c,IAAI,CAACwX,KAAK,CAAC;aAEjE;;SAGD,KAAK,SAAS;WAAE;aACf,IAAI,CAACW,MAAM,CAAC4E,OAAO,CAACtY,MAAM,GAAGzE,IAAI,CAAC2c,KAAK,GACpCjY,4CAAM,CAACK,QAAQ,GACfL,4CAAM,CAACE,QAAQ;aAClB,IAAI,CAACuT,MAAM,CAAC4E,OAAO,CAAC9b,KAAK,GAAG,IAAI,CAAC2b,iBAAiB,CAAC5c,IAAI,CAACwX,KAAK,CAAC;aAC9D,IAAI,CAACW,MAAM,CAAC4E,OAAO,CAAC1X,SAAS,GAAGrF,IAAI,CAAC2c,KAAK;aAC1C,IAAI,CAACxE,MAAM,CAAC4E,OAAO,CAACxX,UAAU,GAAG,IAAI,CAACsX,aAAa,CAAC7c,IAAI,CAACwX,KAAK,CAAC;aAE/D;;;;MAIF;KACDuH,MAAM,kBAACzb,KAAK,EACZ;OACC,IAAI,CAACJ,KAAK,CAAC,0BAA0B,EAAEI,KAAK,CAAC;MAC7C;KACD0uB,oBAAoB,gCAAC1uB,KAAK,EAC1B;OACC,IAAI,CAACJ,KAAK,CAAC,wBAAwB,EAAEI,KAAK,CAAC;MAC3C;KACDkD,mBAAmB,+BAAChF,IAAI,EAAEnB,KAAK,EAC/B;OACC+F,EAAE,CAAC+Y,WAAW,CAACC,IAAI,CAAC,aAAa,EAAE,8BAA8B,EAAE5d,IAAI,EAAEnB,KAAK,CAAC;;IAEhF;GACDH,OAAO,qBACP;KACC,IAAI,CAACie,WAAW,EAAE;IAClB;GACDkB,YAAY,0BACZ;KACC,IAAI,CAAClB,WAAW,EAAE;IAClB;;GAED9Z,QAAQ;CAwET,CAAC;;;;AC1VD,AAcA,YAAe;GACdD,MAAM,EAAE,CAACrE,kBAAkB,EAAE+hB,cAAc,CAAC;GAC5C9hB,IAAI,kBACJ;KAAA;KACC,IAAI0zB,cAAc,GAAG,IAAI;KACzB,IAAI,IAAI,CAACvzB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI,KAAK/C,cAAc,CAACM,eAAe,IAAI,IAAI,CAAC7G,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,MAAM,IAAI,8BAAI,CAACjH,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACN,OAAO,0DAA/B,sBAAiC0sB,IAAI,MAAK,GAAG,EACvK;OACCG,cAAc,GAAG,KAAK;;KAGvB,OAAO;OACNC,cAAc,EAAE,IAAI,CAACxzB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI;OAC5CmqB,SAAS,EAAE,KAAK;OAChBF,cAAc,EAAdA,cAAc;OACdhtB,cAAc,EAAdA;MACA;IACD;GACDnG,UAAU,EAAE;KACX,wBAAwB,EAAE2iB,iBAAe;KACzC,2BAA2B,EAAE2Q,yBAAyB;KACtD,wBAAwB,EAAEC,uBAAuB;KACjD,uBAAuB,EAAEC,uBAAuB;KAChD,OAAO,EAAE/Q;IACT;GACDjiB,OAAO,EAAE;KACRwtB,MAAM,kBAACyF,IAAI,EACX;OACC,IAAI,IAAI,CAACJ,SAAS,IAAI,CAAC,IAAI,CAAC3zB,QAAQ,EACpC;SACC;;OAGD,IAAI,CAAC2zB,SAAS,GAAG,IAAI;OACrB,IAAI,CAACD,cAAc,GAAGK,IAAI;OAC1B,IAAI,CAAC9wB,KAAK,CACT,WAAW,EACX;SACCyT,OAAO,EAAE,IAAI,CAACxW,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACwP,OAAO;SACxC5J,OAAO,EAAE,IAAI,CAAC5M,KAAK,CAAC+G,IAAI,CAAC6F,OAAO;SAChCxC,WAAW,EAAE,IAAI,CAACpK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACoD,WAAW;SAChDD,OAAO,EAAE,IAAI,CAACnK,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmD,OAAO;SACxClD,YAAY,EAAE,QAAQ;SACtBqC,IAAI,EAAE,IAAI,CAACkqB,cAAc;SACzBM,YAAY,EAAE,IAAI,CAAC9zB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC8sB,YAAY;SAClDC,WAAW,EAAE,IAAI,CAAC/zB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC+sB;QACrC,CACD;MACD;KACD1L,uBAAuB,qCACvB;OACC,IAAI,CAAC+F,MAAM,CAAC,IAAI,CAACoF,cAAc,CAAC;MAChC;KACDQ,QAAQ,sBACR;OACC,IAAI,CAAC5F,MAAM,CAAC,IAAI,CAACoF,cAAc,CAAC;MAChC;KACDS,uBAAuB,mCAAC9wB,KAAK,EAC7B;OAAA;OACC,IAAI,CAAC,IAAI,CAAC+wB,oCAAoC,EAC9C;SACC;;OAGD,IAAI,CAAC,IAAI,CAACl0B,KAAK,CAAC+G,IAAI,CAACya,gBAAgB,EACrC;SACC9W,6BAAY,CAAC4W,aAAa,CAAC,sCAAsC,EAAE;WAAA,OAAM,KAAI,CAAC2S,uBAAuB,CAAC9wB,KAAK,CAAC;WAAC;SAC7G,IAAI,CAACnD,KAAK,CAAC+G,IAAI,CAACotB,qBAAqB,EAAE;SAEvC;;OAGD,IAAI,IAAI,CAACrsB,MAAM,CAACuF,OAAO,CAAC,iCAAiC,CAAC,EAC1D;SACC,IAAI,CAACrN,KAAK,CAAC+G,IAAI,CAAC+gB,eAAe,CAAC3kB,KAAK,CAACI,MAAM,CAAC;QAC7C,MACI,IAAI,IAAI,CAACzD,QAAQ,EACtB;SACC,IAAI,CAACE,KAAK,CAAC+G,IAAI,CAACghB,WAAW,CAAC5kB,KAAK,CAACI,MAAM,CAAC;QACzC,MAED;SACC,IAAI,CAACvD,KAAK,CAAC+G,IAAI,CAACqtB,aAAa,CAACjxB,KAAK,CAACI,MAAM,CAAC;;MAE5C;KACD8wB,gBAAgB,4BAAClxB,KAAK,EACtB;OACC,IAAI,CAAC,IAAI,CAACmxB,6BAA6B,EACvC;SACC;;OAGD,IAAI,CAACt0B,KAAK,CAAC+G,IAAI,CAACwtB,YAAY,CAACpxB,KAAK,CAACI,MAAM,CAAC;MAC1C;KACDixB,uBAAuB,mCAACrxB,KAAK,EAC7B;OACC,IAAI,CAAC,IAAI,CAACsxB,oCAAoC,EAC9C;SACC;;OAGD,IAAI,IAAI,CAACxtB,YAAY,KAAK,MAAM,EAChC;SACC,IAAI,CAACjH,KAAK,CAAC+G,IAAI,CAAC2tB,qBAAqB,CAACvxB,KAAK,CAACI,MAAM,CAAC;SAEnD;;OAGD,IAAI,CAACvD,KAAK,CAAC+G,IAAI,CAAC4tB,mBAAmB,CAACxxB,KAAK,CAACI,MAAM,CAAC;MACjD;;KAEDqxB,sBAAsB,oCACtB;OACC3uB,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC7D,UAAU,CAAC,IAAI,CAACtC,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgQ,0BAA0B,EAAE;SAACpT,KAAK,EAAE;QAAK,CAAE;MACrG;KACDixB,eAAe,2BAAC1xB,KAAK,EACrB;OACC8C,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC2uB,wBAAwB,CAAC3xB,KAAK,CAAC;MACtD;KACD4xB,UAAU,sBAAC5xB,KAAK,EAChB;OACC,IAAI,IAAI,CAACmG,IAAI,KAAK/C,cAAc,CAACG,OAAO,EACxC;SACCT,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC6uB,2BAA2B,CAAC7xB,KAAK,CAAC;SAEzD;;OAGD,IAAI,IAAI,CAACmG,IAAI,KAAK/C,cAAc,CAACM,eAAe,EAChD;SACCZ,EAAE,CAACC,WAAW,CAACC,OAAO,CAACwsB,oBAAoB,CAACxvB,KAAK,CAAC;SAElD;;OAGD8C,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC8uB,mBAAmB,CAAC9xB,KAAK,CAAC;MACjD;KACD+xB,qBAAqB,iCAAC/xB,KAAK,EAC3B;OACC8C,EAAE,CAACC,WAAW,CAACC,OAAO,CAACgvB,0BAA0B,CAAChyB,KAAK,CAAC;MACxD;KACDiyB,YAAY,0BACZ;OACC,IAAIlf,OAAO,GAAG,IAAI,CAAClW,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkP,OAAO;OAE7C,IAAIgW,MAAM,GAAGhW,OAAO,CAAClV,MAAM,CAAC,UAAAQ,IAAI;SAAA,OAAIA,IAAI,CAAC2qB,IAAI,KAAKE,4BAAY,CAACQ,QAAQ;SAAC;OAExE,IAAGX,MAAM,CAAC5qB,MAAM,GAAG,CAAC,EACpB;SACC,IAAI+zB,KAAK,GAAGhJ,4BAAY,CAACI,sBAAsB,CAACP,MAAM,CAAC,CAAC,CAAC,CAACQ,UAAU,CAAC;SACrE2I,KAAK,EAAE,CAACvoB,IAAI,EAAE;;MAEf;KACD+kB,oBAAoB,gCAAC1uB,KAAK,EAC1B;;OAEC,IAAMoc,YAAY,GAAG,IAAI,CAACC,KAAK,CAAC,cAAc,CAAC;OAC/CD,YAAY,CAAC+V,SAAS,CAACC,MAAM,CAAC,iCAAiC,CAAC;OAChE,IAAMC,YAAY,GAAGlb,QAAQ,CAAC9S,aAAa,CAAC,gCAAgC,CAAC;OAC7EguB,YAAY,CAACF,SAAS,CAACC,MAAM,CAAC,sCAAsC,CAAC;MACrE;KACDE,8BAA8B,4CAC9B;OACC9qB,iBAAO,CAAC+qB,aAAa,CAAC,gBAAgB,CAAC,CAAC5oB,IAAI,CAAC,YAAM;SAClDkF,GAAG,CAAC/L,EAAE,CAACsY,EAAE,CAACiR,UAAU,CAAClsB,IAAI,CAAC,wBAAwB,CAAC;QACnD,CAAC;MACF;KACDqyB,iCAAiC,+CACjC;OACC1vB,EAAE,CAACspB,OAAO,CAAC,uCAAuC,CAAC,CAACziB,IAAI,CAAC,YAAM;SAC9D7G,EAAE,CAACC,WAAW,CAAC0vB,uBAAuB,CAACC,iCAAiC,EAAE;QAC1E,CAAC;MACF;IAED;GACDlyB,QAAQ;KACP2F,IAAI,kBACJ;OACC,OAAO,IAAI,CAACtJ,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACsC,IAAI;MACnC;KACDrC,YAAY,0BACZ;OACC,OAAO,IAAI,CAACjH,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACC,YAAY;MAC3C;KACD8sB,WAAW,yBACX;OACC,OAAO,IAAI,CAAC/zB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC+sB,WAAW;MAC1C;KACD+B,2BAA2B,yCAC3B;OACC,IAAI5f,OAAO,GAAG,IAAI,CAAClW,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkP,OAAO;OAE7C,IAAIgW,MAAM,GAAGhW,OAAO,CAAClV,MAAM,CAAC,UAAAQ,IAAI;SAAA,OAAIA,IAAI,CAAC2qB,IAAI,KAAKE,4BAAY,CAACQ,QAAQ;SAAC;OAExE,IAAGX,MAAM,CAAC5qB,MAAM,GAAG,CAAC,EACpB;SACC,OAAO+qB,4BAAY,CAACC,aAAa,CAACJ,MAAM,CAAC,CAAC,CAAC,CAAC;;OAE7C,OAAO,KAAK;MACZ;KACD6J,yBAAyB,uCACzB;OACC,OACC,IAAI,CAAChC,WAAW,KAAKxtB,cAAc,CAACI,QAAQ,IACzC,IAAI,CAAC3G,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC5F,cAAc,CAAC,cAAc,CAAC,IACtD,IAAI,CAACpB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAAC5b,cAAc,CAAC,gBAAgB,CAAC,IACrE,IAAI,CAACpB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgW,YAAY,CAACgZ,cAAc;MAEvD;KACDC,qBAAqB,mCACrB;OACC,OAAO,IAAI,CAACC,oBAAoB,IAAI,IAAI,CAACl2B,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACmvB,mBAAmB;MAC/E;KACDC,qBAAqB,mCACrB;OACC,OAAO,IAAI,CAACp2B,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACovB,qBAAqB;MACpD;KACDC,wBAAwB,sCACxB;OACC,OAAO,IAAI,CAACr2B,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACqvB,wBAAwB;MACvD;KACDH,oBAAoB,kCACpB;OACC,OACC,IAAI,CAACnC,WAAW,KAAKxtB,cAAc,CAACG,OAAO,IACxC,IAAI,CAACqtB,WAAW,KAAKxtB,cAAc,CAACK,eAAe,IACnD,IAAI,CAACmtB,WAAW,KAAKxtB,cAAc,CAACM,eAAe;MAEvD;KACDqtB,oCAAoC,kDACpC;OAAA;OACC,IAAI,IAAI,CAACl0B,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACgO,iBAAiB,EAC7C;SACC,OAAO,IAAI,CAAClN,MAAM,CAACuF,OAAO,CAAC,+BAA+B,CAAC;;OAG5D,IAAI,CAAC,IAAI,CAACrN,KAAK,CAAC+G,IAAI,CAACuvB,oBAAoB,EAAE,EAC3C;SACC,OAAO,KAAK;;OAGb,IAAMpgB,OAAO,GAAG,IAAI,CAAClW,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACkP,OAAO;OAC/C,IAAMqgB,eAAe,GAAGrgB,OAAO,CAAClV,MAAM,CAAC,UAAAkrB,MAAM;SAAA,OAC5CA,MAAM,CAACC,IAAI,KAAK,MAAI,CAACnsB,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACiP,iBAAiB,IAAIiW,MAAM,CAACc,WAAW;QAC/E,CAAC;OACF,IAAIuJ,eAAe,CAACj1B,MAAM,KAAK,CAAC,EAChC;SACC,IAAI,CAACwG,MAAM,CAACO,MAAM,CAAC,mCAAmC,EAAE,KAAK,CAAC;;OAG/D,OAAO,IAAI,CAACP,MAAM,CAACuF,OAAO,CAAC,+BAA+B,CAAC;MAC3D;KACDonB,oCAAoC,kDACpC;OACC,OACC,IAAI,CAAC3sB,MAAM,CAACuF,OAAO,CAAC,+BAA+B,CAAC,IACjD,IAAI,CAACmpB,6BAA6B;MAEtC;KACDA,6BAA6B,2CAC7B;OAAA;OACC,OAAO,IAAI,CAACvvB,YAAY,KAAK,MAAM,IAAI,+BAAI,CAACjH,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACN,OAAO,2DAA/B,uBAAiC0sB,IAAI,MAAK,GAAG;MACpF;KACDkB,6BAA6B,2CAC7B;OACC,IAAM9kB,UAAU,GAAG,IAAI,CAAC1H,MAAM,CAACuF,OAAO,CAAC,6BAA6B,CAAC;OACrE,IAAI,CAACmC,UAAU,EACf;SACC,OAAO,KAAK;;OAGb,IAAI,CAAC,IAAI,CAAC1H,MAAM,CAACuF,OAAO,CAAC,+BAA+B,CAAC,EACzD;SACC,OAAO,KAAK;;OAGb,OAAQmC,UAAU,IAAI,IAAI,CAACxP,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC0J,sBAAsB;MACpE;KACD+lB,gCAAgC,8CAChC;OACC,OAAO,IAAI,CAACz2B,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC0vB,UAAU;MACzC;KACDC,mCAAmC,iDACnC;OACC,OAAO,IAAI,CAAC32B,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC4vB,0BAA0B;MACzD;KACDC,iBAAiB,+BACjB;OAAA;OACC,iCAAO,IAAI,CAAC72B,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC8sB,YAAY,2EAAI,IAAI;MACnD;KACDgD,uBAAuB,qCACvB;OACC,OAAO,CAAC,IAAI,CAAC7W,yBAAyB,IAAI,IAAI,CAAC3W,IAAI,KAAK/C,cAAc,CAACI,QAAQ;MAC/E;KACDowB,gBAAgB,8BAChB;OACC,OAAO,IAAI,CAAC;MACZ;KACDC,iCAAiC,+CACjC;OACC,OAAO,IAAI,CAACl3B,QAAQ,GAAG6F,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,GAAGD,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;MAChG;KACDF,KAAK,mBACL;OACC,OAAO,IAAI,CAAC1F,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAACtB,KAAK;MACpC;;KAEDuxB,oCAAoC,kDACpC;OACC,OAAO;SAAC,iBAAiB,EAAE,CAAC,IAAI,CAAC/C;QAAqC;MACtE;KACDgD,6BAA6B,2CAC7B;OACC,OAAO;SAAC,iBAAiB,EAAE,CAAC,IAAI,CAAC5C;QAA8B;MAC/D;KACD6C,oCAAoC,kDACpC;OACC,OAAO;SAAC,iBAAiB,EAAE,CAAC,IAAI,CAAC1C;QAAqC;MACtE;KACD2C,oBAAoB,kCACpB;OACC,OAAO;SACN,qCAAqC,EAAE,IAAI,CAAC5D,cAAc,KAAKjtB,cAAc,CAACG;QAC9E;MACD;KACD2wB,4BAA4B,0CAC5B;OACC,OAAO;SACN,qCAAqC,EAAE,IAAI,CAAC7D,cAAc,KAAKjtB,cAAc,CAACM;QAC9E;MACD;KACDywB,4BAA4B,0CAC5B;OACC,OAAO;SACN,qCAAqC,EAAE,IAAI,CAAC9D,cAAc,KAAKjtB,cAAc,CAACK;QAC9E;MACD;KACD2wB,qBAAqB,mCACrB;OACC,OAAO;SACN,qCAAqC,EAAE,IAAI,CAAC/D,cAAc,KAAKjtB,cAAc,CAACI;QAC9E;;MAGCiK,gBAAI,CAACC,QAAQ,CAAC;KAChBoZ,WAAW,EAAE,qBAAA7e,KAAK;OAAA,OAAIA,KAAK,CAAC6e,WAAW;;KACvC1a,KAAK,EAAE,eAAAnE,KAAK;OAAA,OAAIA,KAAK,CAACC,aAAa;;IACnC,CAAC,CACF;;GAEDnH,QAAQ,qhCAwBIyB,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,mmBAc3DD,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC,wlBAa/CD,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC,2jBAanDD,aAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC,sdAarED,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,ycAa3DD,aAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC,8WAUvDD,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,icAapDD,aAAG,CAACC,UAAU,CAAC,wCAAwC,CAAC,8iBAcxDD,aAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC,y8EAoD/DD,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC,0aAUpCD,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,gWAQrDD,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,sMAMlCD,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC,sbAUnCD,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC,kNAM7CD,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;CAYhD,CAAC;;KChlBY4xB,gBAAgB;GAAA;GAAA;KAAA;KAAA;;GAAA;KAAA;;CAG7B;CACA;KAFC,0BAIA;OACC,OAAO,aAAa;;;KACpB;KAAA,2BAGD;OACC,OAAO;SACNzS,KAAK,EAAE;QACP;;;KACD;KAAA,6BAGD;OACC,OAAO;SACN0S,QAAQ,EAAE,kBAACrsB,KAAK;WAAA,OAAK,YACrB;aACC,OAAOA,KAAK,CAAC2Z,KAAK;YAClB;;QACD;;;KACD;KAAA,+BAGD;OAAA;OACC,OAAO;SACN2S,QAAQ,EAAE,kBAACtsB,KAAK,EAAEsD,OAAO,EACzB;WACC,IAAG,uBAAOA,OAAO,CAACqW,KAAK,MAAK,QAAQ,EACpC;aACC3Z,KAAK,CAAC2Z,KAAK,GAAGrW,OAAO,CAACqW,KAAK;aAC3B,KAAI,CAAC4S,SAAS,CAACvsB,KAAK,CAAC;;UAEtB;SACDwsB,UAAU,EAAE,oBAACxsB,KAAK,EAAEsD,OAAO,EAC3B;WACC,IAAG,uBAAOA,OAAO,CAACwW,IAAI,MAAK,QAAQ,EACnC;aACC9Z,KAAK,CAAC2Z,KAAK,GAAG3Z,KAAK,CAAC2Z,KAAK,CAAC/jB,MAAM,CAAC,UAACkkB,IAAI,EAAK;eAC1C,OAAO,EACLxW,OAAO,CAACwW,IAAI,CAACjW,EAAE,IAAIP,OAAO,CAACwW,IAAI,CAACjW,EAAE,GAAG,CAAC,IAAIiW,IAAI,CAACjW,EAAE,KAAKP,OAAO,CAACwW,IAAI,CAACjW,EAAE,IACrEP,OAAO,CAACwW,IAAI,CAAChB,SAAS,IAAIxV,OAAO,CAACwW,IAAI,CAAChB,SAAS,GAAG,CAAC,IAAIgB,IAAI,CAAChB,SAAS,KAAKxV,OAAO,CAACwW,IAAI,CAAChB,SAAU,CACnG;cACD,CAAC;aACF,KAAI,CAACyT,SAAS,CAACvsB,KAAK,CAAC;;UAEtB;SACD2e,OAAO,EAAE,iBAAC3e,KAAK,EAAEsD,OAAO,EACxB;WACC,IAAG,uBAAOA,OAAO,CAACwW,IAAI,MAAK,QAAQ,EACnC;aACC9Z,KAAK,CAAC2Z,KAAK,CAAC3c,IAAI,CAACsG,OAAO,CAACwW,IAAI,CAAC;aAC9B,KAAI,CAACyS,SAAS,CAACvsB,KAAK,CAAC;;;QAGvB;;;GACD;CAAA,EA5DoCysB,4BAAgB;;KCCzCC,qBAAqB;GAAA;GAAA;KAAA;KAAA;;GAAA;KAAA;;CAGlC;CACA;KAFC,0BAIA;OACC,OAAO,kBAAkB;;;KACzB;KAAA,6BAGD;OACC,OAAO;SACNC,WAAW,oCACX;WAAA,IADa1vB,MAAM,QAANA,MAAM;aAAEN,QAAQ,QAARA,QAAQ;WAAA,IAAIuS,QAAQ,SAARA,QAAQ;WAExCjS,MAAM,CAAC,aAAa,EAAE;aAACiS,QAAQ,EAARA;YAAS,CAAC;WACjCvS,QAAQ,CAAC,oBAAoB,EAAE;aAACsT,eAAe,EAAEf,QAAQ,CAACrL;YAAG,CAAC;UAC9D;SACD+oB,kBAAkB,4CAClB;WAAA,IADoB5sB,KAAK,SAALA,KAAK;aAAE/C,MAAM,SAANA,MAAM;WAAA,IAAIgT,eAAe,SAAfA,eAAe;WAEnD,IAAIjQ,KAAK,CAAC0Q,SAAS,GAAG,CAAC,EACvB;aACCmc,gBAAI,CAACC,UAAU,CAAC,8CAA8C,EAAE;eAC/DjpB,EAAE,EAAEoM,eAAe;eACnBS,SAAS,EAAE1Q,KAAK,CAAC0Q;cACjB,CAAC,CAAChP,IAAI,CAAC,YAAM;eACbzE,MAAM,CAAC,oBAAoB,EAAE;iBAACgT,eAAe,EAAfA;gBAAgB,CAAC;cAC/C,CAAC,SAAM,CAAC,UAACgD,QAAQ,EAAK;eACtB8Z,OAAO,CAACjL,KAAK,CAAC7O,QAAQ,CAAC;cACvB,CAAC;YACF,MAED;aACChW,MAAM,CAAC,oBAAoB,EAAE;eAACgT,eAAe,EAAfA;cAAgB,CAAC;;UAEhD;SACD+c,aAAa,gCACb;WAAA,IADehtB,KAAK,SAALA,KAAK;aAAE/C,MAAM,SAANA,MAAM;WAE3B,IAAIpD,MAAM,CAACmG,KAAK,CAACoiB,YAAY,CAAC,IAAI,CAAC,IAAIvoB,MAAM,CAACmG,KAAK,CAACmiB,QAAQ,CAAC,IAAI,CAAC,EAClE;aACCllB,MAAM,CAAC,cAAc,EAAE;eAACyR,SAAS,EAAE;cAAG,CAAC;aACvC;;WAEDme,gBAAI,CAACC,UAAU,CAAC,4CAA4C,EAAE;aAC7D1K,YAAY,EAAEpiB,KAAK,CAACoiB,YAAY;aAChCD,QAAQ,EAAEniB,KAAK,CAACmiB;YAChB,CAAC,CAACzgB,IAAI,CAAC,UAACuR,QAAQ,EAAK;aACrB,IAAIA,QAAQ,CAACgI,MAAM,CAACpkB,MAAM,CAAC6X,SAAS,EACpC;eACCzR,MAAM,CAAC,cAAc,EAAE;iBAACyR,SAAS,EAAEuE,QAAQ,CAACgI,MAAM,CAACpkB,MAAM,CAAC6X;gBAAU,CAAC;;YAEtE,CAAC,SAAM,CAAC,UAACuE,QAAQ,EAAK;aACtB8Z,OAAO,CAACjL,KAAK,CAAC7O,QAAQ,CAAC;YACvB,CAAC;;QAEH;;;KACD;KAAA,2BAGD;OACC,OAAO;SACNmP,YAAY,EAAE,IAAI;SAClBD,QAAQ,EAAE,IAAI;SACdzR,SAAS,EAAE,IAAI;SACf/B,SAAS,EAAE,EAAE;SACbD,SAAS,EAAE,EAAE;SACbuB,eAAe,EAAE,IAAI;SACrBG,kBAAkB,EAAE;QACpB;;;KACD;KAAA,6BAGD;OACC,OAAO;SACN6c,YAAY,EAAE,sBAACjtB,KAAK,EAAK;WACxB,OAAOA,KAAK,CAAC0O,SAAS;UACtB;SACDwe,YAAY,EAAE,sBAACltB,KAAK,EAAK;WACxB,OAAOA,KAAK,CAAC2O,SAAS;UACtB;SACDwe,kBAAkB,EAAE,4BAACntB,KAAK,EAAK;WAC9B,OAAOA,KAAK,CAACiQ,eAAe;UAC5B;SACDmd,qBAAqB,EAAE,+BAACptB,KAAK,EAAK;WACjC,OAAOA,KAAK,CAACoQ,kBAAkB;;QAEhC;;;KACD;KAAA,+BAGD;OACC,OAAO;SACNid,SAAS,EAAE,mBAACrtB,KAAK,EAAEsD,OAAO,EAAK;WAC9BtD,KAAK,CAACoiB,YAAY,GAAG9e,OAAO,CAAC8e,YAAY;WACzCpiB,KAAK,CAACmiB,QAAQ,GAAG7e,OAAO,CAAC6e,QAAQ;WACjCniB,KAAK,CAAC0Q,SAAS,GAAGpN,OAAO,CAACoN,SAAS;WACnC1Q,KAAK,CAAC2O,SAAS,GAAGrL,OAAO,CAACqL,SAAS;WACnC3O,KAAK,CAAC0O,SAAS,GAAGpL,OAAO,CAACoL,SAAS;WACnC1O,KAAK,CAACiQ,eAAe,GAAG3M,OAAO,CAAC2M,eAAe;WAC/CjQ,KAAK,CAACoQ,kBAAkB,GAAG9M,OAAO,CAAC8M,kBAAkB;UACrD;SACDkd,YAAY,EAAE,sBAACttB,KAAK,EAAEsD,OAAO,EAAK;WACjC,IAAG,uBAAOA,OAAO,CAACoL,SAAS,MAAK,QAAQ,EACxC;aACC1O,KAAK,CAAC0O,SAAS,GAAGpL,OAAO,CAACoL,SAAS;;UAEpC;SACDke,kBAAkB,EAAE,4BAAC5sB,KAAK,EAAEsD,OAAO,EAAK;WACvC,IAAG,OAAOA,OAAO,CAAC2M,eAAe,KAAK,QAAQ,EAC9C;aACCjQ,KAAK,CAACiQ,eAAe,GAAG3M,OAAO,CAAC2M,eAAe;;UAEhD;SACDsd,qBAAqB,EAAE,+BAACvtB,KAAK,EAAEsD,OAAO,EAAK;WAC1C,IAAG,OAAOA,OAAO,CAAC8M,kBAAkB,KAAK,QAAQ,EACjD;aACCpQ,KAAK,CAACoQ,kBAAkB,GAAG9M,OAAO,CAAC8M,kBAAkB;aACrDpQ,KAAK,CAACiQ,eAAe,GAAG,IAAI;;UAE7B;SACD0c,WAAW,EAAE,qBAAC3sB,KAAK,EAAEsD,OAAO,EAAK;WAChC,IAAG,uBAAOA,OAAO,CAAC4L,QAAQ,MAAK,QAAQ,EACvC;aACC,IAAMse,WAAW,GAAGlqB,OAAO,CAAC4L,QAAQ;aACpC,IAAI,CAACse,WAAW,CAAC3pB,EAAE,EACnB;eACC;;aAED,IAAM8K,SAAS,GAAG3O,KAAK,CAAC2O,SAAS,IAAI,EAAE;aACvC,IAAI8e,SAAS,GAAG,KAAK;aACrB,KAAK,IAAMp3B,KAAK,IAAIsY,SAAS,EAC7B;eACC,IAAIA,SAAS,CAACtY,KAAK,CAAC,CAACwN,EAAE,KAAK2pB,WAAW,CAAC3pB,EAAE,EAC1C;iBACC8K,SAAS,CAACtY,KAAK,CAAC,GAAGm3B,WAAW;iBAC9BC,SAAS,GAAG,IAAI;iBAChB;;;aAGF,IAAI,CAACA,SAAS,EACd;eACC9e,SAAS,CAAC+e,OAAO,CAACF,WAAW,CAAC;;aAE/BxtB,KAAK,CAAC2O,SAAS,GAAGA,SAAS;;;QAG7B;;;GACD;CAAA,EAnJyC8d,4BAAgB;;;;ACH3D,KAEakB,kBAAkB;GAAA;GAAA;KAAA;KAAA;;GAAA;KAAA;;CAG/B;CACA;KAFC,0BAIA;OACC,OAAO,eAAe;;;KACtB;KAAA,2BAGD;OACC,OAAO;SACNrwB,QAAQ,EAAE,EAAE;SACZswB,YAAY,EAAE,IAAI;SAClB9wB,MAAM,EAAE,EAAE;SACV+wB,aAAa,EAAE,CAAC;SAChBvpB,cAAc,EAAE,EAAE;SAClBE,2BAA2B,EAAE,EAAE;SAC/BspB,gBAAgB,EAAE,IAAI;SACtBrpB,qBAAqB,EAAE,IAAI;SAC3BC,YAAY,EAAE,IAAI;SAClBN,UAAU,EAAE,IAAI;SAChB7I,QAAQ,EAAE,IAAI;SACdwyB,eAAe,EAAE,KAAK;SACtBC,gBAAgB,EAAE,IAAI;SACtBlyB,iBAAiB,EAAE,KAAK;SACxBkG,MAAM,EAAE,EAAE;SACVhB,KAAK,EAAE;WACNc,GAAG,EAAE,IAAI;WACTD,QAAQ,EAAE,IAAI;WACdhL,MAAM,EAAE;UACR;;CAEJ;CACA;SACGo3B,sBAAsB,EAAE,EAAE;SAC1BC,oBAAoB,EAAE,IAAI;SAC1BzI,+BAA+B,EAAE,KAAK;SACtC0I,uBAAuB,EAAE,EAAE;SAC3BjuB,WAAW,EAAE,EAAE;SACfkuB,oBAAoB,EAAE;QACtB;;;KACD;KAAA,6BAGD;OACC,OAAO;SACNC,WAAW,6BACX;WAAA,IADepxB,MAAM,QAANA,MAAM;WAEpBA,MAAM,CAAC,aAAa,CAAC;UACrB;SACDqxB,WAAW,EAAE,4BAAahrB,OAAO,EACjC;WAAA,IADgBrG,MAAM,SAANA,MAAM;WAErB,IAAMK,WAAQ,GAAGgG,OAAO,IAAI,EAAE;WAC9BrG,MAAM,CAAC,aAAa,EAAEK,WAAQ,CAAC;UAC/B;SACDixB,aAAa,EAAE,8BAAajrB,OAAO,EACnC;WAAA,IADkBrG,MAAM,SAANA,MAAM;WAEvBA,MAAM,CAAC,eAAe,EAAEqG,OAAO,CAAC;UAChC;SACDkrB,WAAW,EAAE,4BAAalrB,OAAO,EACjC;WAAA,IADgBrG,MAAM,SAANA,MAAM;WAErBA,MAAM,CAAC,aAAa,EAAEqG,OAAO,CAAC;UAC9B;SACDmrB,iBAAiB,EAAE,kCAAanrB,OAAO,EACvC;WAAA,IADsBrG,MAAM,SAANA,MAAM;WAE3BA,MAAM,CAAC,mBAAmB,EAAEqG,OAAO,CAAC;UACpC;SACDorB,8BAA8B,EAAE,+CAAaprB,OAAO,EACpD;WAAA,IADmCrG,MAAM,SAANA,MAAM;WAExCA,MAAM,CAAC,gCAAgC,EAAEqG,OAAO,CAAC;UACjD;SACDqrB,mBAAmB,EAAE,oCAAarrB,OAAO,EACzC;WAAA,IADwBrG,MAAM,SAANA,MAAM;WAE7BA,MAAM,CAAC,qBAAqB,EAAEqG,OAAO,CAAC;UACtC;SACDsrB,wBAAwB,EAAE,yCAAatrB,OAAO,EAC9C;WAAA,IAD6BrG,MAAM,SAANA,MAAM;WAElCA,MAAM,CAAC,0BAA0B,EAAEqG,OAAO,CAAC;UAC3C;SACDurB,uBAAuB,EAAE,wCAAavrB,OAAO,EAC7C;WAAA,IAD4BrG,MAAM,SAANA,MAAM;WAEjCA,MAAM,CAAC,yBAAyB,EAAEqG,OAAO,CAAC;UAC1C;SACDwrB,gCAAgC,EAAE,kDAAaxrB,OAAO,EACtD;WAAA,IADqCrG,MAAM,UAANA,MAAM;WAE1CA,MAAM,CAAC,kCAAkC,EAAEqG,OAAO,CAAC;UACnD;SACDyrB,0BAA0B,EAAE,4CAAazrB,OAAO,EAChD;WAAA,IAD+BrG,MAAM,UAANA,MAAM;WAEpCA,MAAM,CAAC,4BAA4B,EAAEqG,OAAO,CAAC;UAC7C;SACD0rB,eAAe,EAAE,iCAAa1rB,OAAO,EACrC;WAAA,IADoBrG,MAAM,UAANA,MAAM;WAEzBA,MAAM,CAAC,iBAAiB,EAAEqG,OAAO,CAAC;UAClC;SACD2rB,yBAAyB,EAAE,2CAAa3rB,OAAO,EAC/C;WAAA,IAD8BrG,MAAM,UAANA,MAAM;WAEnCA,MAAM,CAAC,2BAA2B,EAAEqG,OAAO,CAAC;UAC5C;SACD4rB,cAAc,EAAE,gCAAa5rB,OAAO,EACpC;WAAA,IADmBrG,MAAM,UAANA,MAAM;WAExBA,MAAM,CAAC,gBAAgB,EAAEqG,OAAO,CAAC;UACjC;SACD6rB,uBAAuB,EAAE,yCAAa7rB,OAAO,EAC7C;WAAA,IAD4BrG,MAAM,UAANA,MAAM;WAEjCA,MAAM,CAAC,yBAAyB,EAAEqG,OAAO,CAAC;;QAE3C;;;KACD;KAAA,6BAGD;OACC,OAAO;SACN8rB,SAAS,EAAE,mBAAApvB,KAAK;WAAA,OAAI,UAAA3J,KAAK,EACzB;aACC,OAAO2J,KAAK,CAAClD,MAAM;YACnB;;SACDuyB,eAAe,EAAE,yBAAArvB,KAAK,EACtB;WACC,OAAOA,KAAK,CAAC+tB,eAAe,IAAI/tB,KAAK,CAACguB,gBAAgB;UACtD;SACDA,gBAAgB,EAAE,0BAAAhuB,KAAK,EACvB;WACC,OAAOA,KAAK,CAACguB,gBAAgB;UAC7B;SACDlyB,iBAAiB,EAAE,2BAAAkE,KAAK,EACxB;WACC,OAAOA,KAAK,CAAClE,iBAAiB;UAC9B;SACDwzB,QAAQ,EAAE,kBAAAtvB,KAAK,EACf;WACC,OAAOA,KAAK,CAACgB,KAAK;UAClB;SACDuuB,WAAW,EAAE,qBAAAvvB,KAAK,EAClB;WACC,OAAOA,KAAK,CAACzE,QAAQ;UACrB;SACDi0B,aAAa,EAAE,uBAAAxvB,KAAK,EACpB;WACC,OAAOA,KAAK,CAACoE,UAAU;UACvB;SACDqrB,iBAAiB,EAAE,2BAAAzvB,KAAK,EACxB;WACC,OAAOA,KAAK,CAACsE,cAAc;UAC3B;SACDorB,8BAA8B,EAAE,wCAAA1vB,KAAK,EACrC;WACC,OAAOA,KAAK,CAACwE,2BAA2B;UACxC;SACDmrB,mBAAmB,EAAE,6BAAA3vB,KAAK,EAC1B;WACC,OAAOA,KAAK,CAAC8tB,gBAAgB;UAC7B;SACD8B,wBAAwB,EAAE,kCAAA5vB,KAAK,EAC/B;WACC,OAAOA,KAAK,CAACyE,qBAAqB;UAClC;SACDorB,uBAAuB,EAAE,iCAAA7vB,KAAK,EAC9B;WACC,OAAOA,KAAK,CAACkuB,oBAAoB;UACjC;SACDzI,+BAA+B,EAAE,yCAAAzlB,KAAK,EACtC;WACC,OAAOA,KAAK,CAACylB,+BAA+B;UAC5C;SACDqK,0BAA0B,EAAE,oCAAA9vB,KAAK,EACjC;WACC,OAAOA,KAAK,CAACmuB,uBAAuB;UACpC;SACD4B,eAAe,EAAE,yBAAA/vB,KAAK,EACtB;WACC,OAAOA,KAAK,CAAC0E,YAAY;UACzB;SACDsrB,yBAAyB,EAAE,mCAAAhwB,KAAK,EAChC;WACC,OAAOA,KAAK,CAACiuB,sBAAsB;UACnC;SACDgC,cAAc,EAAE,wBAAAjwB,KAAK,EACrB;WACC,OAAOA,KAAK,CAACE,WAAW;UACxB;SACDgwB,uBAAuB,EAAE,iCAAAlwB,KAAK,EAC9B;WACC,OAAOA,KAAK,CAACouB,oBAAoB;;QAElC;;;KACD;KAAA,+BAGD;OACC,OAAO;SACN+B,SAAS,EAAE,mBAACnwB,KAAK,EAAEsD,OAAO,EAC1B;WACCtD,KAAK,CAAClD,MAAM,GAAGwG,OAAO;UACtB;SACD8sB,QAAQ,EAAE,kBAACpwB,KAAK,EAAEsD,OAAO,EACzB;WACCtD,KAAK,CAACgB,KAAK,GAAG5F,MAAM,CAACi1B,MAAM,CAACrwB,KAAK,CAACgB,KAAK,EAAEsC,OAAO,CAAC;UACjD;SACDgtB,WAAW,EAAE,qBAACtwB,KAAK,EAAEsD,OAAO,EAC5B;WACCtD,KAAK,CAAClD,MAAM,GAAG,EAAE;WACjBkD,KAAK,CAAC6tB,aAAa,EAAE;UACrB;SACD0C,SAAS,EAAE,mBAACvwB,KAAK,EAAEsD,OAAO,EAC1B;WACCtD,KAAK,CAACgC,MAAM,GAAGsB,OAAO;UACtB;SACDirB,aAAa,EAAE,uBAACvuB,KAAK,EAAEoE,UAAU,EACjC;WACCpE,KAAK,CAACoE,UAAU,GAAGA,UAAU;UAC7B;SACDoqB,WAAW,EAAE,qBAACxuB,KAAK,EAAEzE,QAAQ,EAC7B;WACCyE,KAAK,CAACzE,QAAQ,GAAGA,QAAQ;UACzB;SACDkzB,iBAAiB,EAAE,2BAACzuB,KAAK,EAAEsE,cAAc,EACzC;WACCtE,KAAK,CAACsE,cAAc,GAAGA,cAAc;UACrC;SACDoqB,8BAA8B,EAAE,wCAAC1uB,KAAK,EAAEwE,2BAA2B,EACnE;WACCxE,KAAK,CAACwE,2BAA2B,GAAGA,2BAA2B;UAC/D;SACDmqB,mBAAmB,EAAE,6BAAC3uB,KAAK,EAAE8tB,gBAAgB,EAC7C;WACC9tB,KAAK,CAAC8tB,gBAAgB,GAAGA,gBAAgB;UACzC;SACDc,wBAAwB,EAAE,kCAAC5uB,KAAK,EAAEyE,qBAAqB,EACvD;WACCzE,KAAK,CAACyE,qBAAqB,GAAGA,qBAAqB;UACnD;SACDoqB,uBAAuB,EAAE,iCAAC7uB,KAAK,EAAEkuB,oBAAoB,EACrD;WACCluB,KAAK,CAACkuB,oBAAoB,GAAGA,oBAAoB;UACjD;SACDY,gCAAgC,EAAE,0CAAC9uB,KAAK,EAAEylB,+BAA+B,EACzE;WACCzlB,KAAK,CAACylB,+BAA+B,GAAGA,+BAA+B;UACvE;SACDsJ,0BAA0B,EAAE,oCAAC/uB,KAAK,EAAEmuB,uBAAuB,EAC3D;WACCnuB,KAAK,CAACmuB,uBAAuB,GAAGA,uBAAuB;UACvD;SACDqC,WAAW,EAAE,qBAACxwB,KAAK,EACnB;WACCA,KAAK,CAACgC,MAAM,GAAG,EAAE;UACjB;SACDyuB,eAAe,EAAE,yBAACzwB,KAAK,EAAEsD,OAAO,EAChC;WACCtD,KAAK,CAAC4tB,YAAY,GAAGtqB,OAAO;UAC5B;SACDgrB,WAAW,EAAE,qBAACtuB,KAAK,EAAEsD,OAAO,EAC5B;WACCtD,KAAK,CAAC1C,QAAQ,GAAGgG,OAAO;UACxB;SACD0rB,eAAe,EAAE,yBAAChvB,KAAK,EAAEsD,OAAO,EAChC;WACCtD,KAAK,CAAC0E,YAAY,GAAGpB,OAAO;UAC5B;SACD2rB,yBAAyB,EAAE,mCAACjvB,KAAK,EAAEsD,OAAO,EAC1C;WACCtD,KAAK,CAACiuB,sBAAsB,GAAG3qB,OAAO;UACtC;SACDotB,mBAAmB,EAAE,6BAAC1wB,KAAK,EAAE2wB,UAAU,EACvC;WACC3wB,KAAK,CAACguB,gBAAgB,GAAG2C,UAAU;UACnC;SACDC,YAAY,EAAE,sBAAC5wB,KAAK,EACpB;WACCA,KAAK,CAAC+tB,eAAe,GAAG,IAAI;UAC5B;SACD8C,aAAa,EAAE,uBAAC7wB,KAAK,EACrB;WACCA,KAAK,CAAC+tB,eAAe,GAAG,KAAK;UAC7B;SACD+C,qBAAqB,EAAE,+BAAC9wB,KAAK,EAC7B;WACCA,KAAK,CAAClE,iBAAiB,GAAG,IAAI;UAC9B;SACDi1B,sBAAsB,EAAE,gCAAC/wB,KAAK,EAC9B;WACCA,KAAK,CAAClE,iBAAiB,GAAG,KAAK;UAC/B;SACDozB,cAAc,EAAE,wBAAClvB,KAAK,EAAEsD,OAAO,EAC/B;WACCtD,KAAK,CAACE,WAAW,uCAAQF,KAAK,CAACE,WAAW,GAAKoD,OAAO,CAAE;UACxD;SACD6rB,uBAAuB,EAAE,iCAACnvB,KAAK,EAAEsD,OAAO,EACxC;WACCtD,KAAK,CAACouB,oBAAoB,GAAG9qB,OAAO;;QAErC;;;GACD;CAAA,EAvSsCmpB,4BAAgB;;;ACFxD,CAGgC,IAS1BuE,qBAAqB;GAE1B,+BAAYp1B,OAAqC,EACjD;KAAA;KAAA;KACC,IAAI,CAACikB,WAAW,CAACjkB,OAAO,CAACq1B,aAAa,CAAC;KACvC,IAAI,CAACC,YAAY,GAAGt1B,OAAO,CAACs1B,YAAY;KACxC,IAAI,CAAC9J,MAAM,GAAGxrB,OAAO,CAACwrB,MAAM;KAC5B,IAAI,CAAC+J,IAAI,GAAGv1B,OAAO,CAACu1B,IAAI;KAExB,IAAI,CAACC,mBAAmB,gDAAG,IAAI,CAACF,YAAY,uDAAjB,mBAAoB,CAAC,CAAC,qEAAI,IAAI;KACzD,IAAI,CAACG,cAAc,sCAAG,IAAI,CAACvmB,OAAO,kDAAZ,cAAe,CAAC,CAAC,2DAAI,IAAI;;;KAG/C,IAAI,CAACwmB,SAAS,GAAG,IAAI;;KAErB,IAAI,CAACC,UAAU,GAAG,IAAI;KACtB,IAAI,CAACC,WAAW,GAAG,IAAI;KACvB,IAAI,CAACC,SAAS,GAAG,IAAI;;GACrB;KAAA;KAAA,4BAEWC,WAAW,EACvB;OAAA;OACC,IAAI,CAACT,aAAa,GAAGS,WAAW,CAACvkB,IAAI,CAAC,UAAC/W,IAAI;SAAA,OAAKA,IAAI,CAAC2qB,IAAI,KAAK,cAAc;SAAC;OAC7E,IAAI,CAACjW,OAAO,0BAAG,IAAI,CAACmmB,aAAa,wDAAlB,oBAAoBU,UAAU;;;KAC7C;KAAA,yBAGD;OAAA;OACC,IAAMC,YAAY,GAAG,IAAI,CAACC,eAAe,EAAE;OAE3C,IAAMC,UAAU,GAAG,IAAIC,iBAAM,CAAC;SAC7BluB,EAAE,EAAE,mBAAmB;SACvB8Z,KAAK,EAAEoU,iBAAM,CAAClU,KAAK,CAACmU,IAAI;SACxBC,KAAK,EAAE,IAAI;SACXC,IAAI,EAAEC,qBAAU,CAACC,IAAI;SACrBriB,IAAI,EAAExV,aAAG,CAACC,UAAU,CAAC,4CAA4C;QACjE,CAAC;OAEF,IAAI,CAAC+2B,UAAU,GAAG,IAAIQ,iBAAM,CAAC;SAC5B/xB,KAAK,EAAG,IAAI,CAACoxB,mBAAmB,IAAI,IAAI,CAACC,cAAc,GAAI,IAAI,GAAGgB,sBAAW,CAACC,QAAQ;SACtF3U,KAAK,EAAEoU,iBAAM,CAAClU,KAAK,CAAC0U,OAAO;SAC3BN,KAAK,EAAE,IAAI;SACXliB,IAAI,EAAExV,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC;SAClEwV,OAAO,EAAE,mBAAM;WACd,KAAI,CAACuhB,UAAU,CAACiB,WAAW,EAAE;WAC7B,KAAI,CAACC,OAAO,EAAE;;QAEf,CAAC;OAEF,IAAI,CAACnB,SAAS,GAAG,IAAIoB,gBAAK,CAAC;SAC1BC,SAAS,EAAE,0BAA0B;SACrCC,OAAO,EAAE,IAAI;SACbrf,OAAO,EAAEqe,YAAY;SACrBiB,SAAS,EAAE,IAAI;SACfC,QAAQ,EAAE,GAAG;SACbC,OAAO,EAAE,CACR,IAAI,CAACxB,UAAU,EACfO,UAAU,CACV;SACDjO,MAAM,EAAE;WACPmP,OAAO,EAAE,mBAAM;aACd,KAAI,CAAC7B,IAAI,CAACvc,gBAAgB,EAAE;;;QAG9B,CAAC;OAEF,IAAI,CAAC0c,SAAS,CAACp5B,IAAI,EAAE;OAErB,IAAI,CAAC+6B,YAAY,CAACnB,UAAU,CAAC;OAE7B,IAAI,CAACoB,aAAa,EAAE;;;KACpB;KAAA,0BAGD;OAAA;OACC5xB,cAAI,CAACC,SAAS,CAAC,qDAAqD,EAAE;SACrE9M,IAAI,EAAE;WACL2yB,MAAM,EAAE,IAAI,CAACA,MAAM;WACnBnH,KAAK,EAAE,IAAI,CAACmR,mBAAmB;WAC/BlP,QAAQ,EAAE,IAAI,CAACmP,cAAc,CAACxtB,EAAE;WAChCsvB,MAAM,EAAE;aACP/Q,YAAY,EAAE,IAAI,CAAC+O,IAAI,CAACnyB,WAAW;aACnCmjB,QAAQ,EAAE,IAAI,CAACgP,IAAI,CAACpyB;;;QAGtB,CAAC,CAAC2C,IAAI,CAAC,UAAC7K,MAAM,EAAK;SACnB,MAAI,CAACy6B,SAAS,CAAC3c,KAAK,EAAE;SACtB,MAAI,CAACwc,IAAI,CAACvc,gBAAgB,EAAE;QAC5B,CAAC;;;KACF;KAAA,6BAEYkd,UAAU,EACvB;OACCj3B,EAAE,CAACu4B,SAAS,CAACC,aAAa,CAACvB,UAAU,CAACxT,YAAY,EAAE,EAAE;SACrDvO,IAAI,EAAE,IAAI,CAACohB,IAAI,CAACv1B,OAAO,CAAC03B;QACxB,CAAC;;;KACF;KAAA,gCAGD;OACC,IAAI,CAACC,mBAAmB,EAAE;OAC1B,IAAI,CAACC,iBAAiB,EAAE;;;KACxB;KAAA,sCAGD;OAAA;OACC,IAAMC,eAAe,GAAGvkB,QAAQ,CAACiX,cAAc,CAAC,kBAAkB,CAAC;OAEnE,IAAI,IAAI,CAACkL,cAAc,EACvB;SACCjL,eAAK,CAACxmB,IAAI,CAAC6zB,eAAe,EAAE,OAAO,EAAE,YAAM;WAC1C,IAAMC,SAAS,GAAG,EAAE;WACpB,MAAI,CAAC5oB,OAAO,CAAC3U,OAAO,CAAC,UAAC2qB,MAAM,EAAK;aAChC4S,SAAS,CAAC12B,IAAI,CAAC;eACd+S,IAAI,EAAE3O,cAAI,CAACykB,MAAM,CAAC/E,MAAM,CAACne,IAAI,CAAC;eAC9BqN,OAAO,EAAE,mBAAM;iBAAA;iBACd,MAAI,CAACqhB,cAAc,GAAGvQ,MAAM;iBAC5B2S,eAAe,CAACE,UAAU,CAAC7W,SAAS,GAAG1b,cAAI,CAACykB,MAAM,CAAC,MAAI,CAACwL,cAAc,CAAC1uB,IAAI,CAAC;iBAC5E,4BAAI,CAAC6uB,WAAW,uDAAhB,mBAAkB7c,KAAK,EAAE;;cAE1B,CAAC;YACF,CAAC;WAEF9Z,EAAE,CAACyf,SAAS,CAACpiB,IAAI,CAChB,aAAa,EACbu7B,eAAe,EACfC,SAAS,EACT;aACClZ,SAAS,EAAE,CAAC;aACZD,UAAU,EAAE,EAAE;aACdO,KAAK,EAAE;eAAE9F,QAAQ,EAAE,KAAK;eAAEE,MAAM,EAAE;;YAClC,CACD;WAED,MAAI,CAACsc,WAAW,GAAG32B,EAAE,CAACyf,SAAS,CAACsZ,cAAc,EAAE;UAChD,CAAC;QACF,MAED;SACCxN,eAAK,CAACxmB,IAAI,CAAC6zB,eAAe,EAAE,OAAO,EAAE,YAAM;WAC1C54B,EAAE,CAACg5B,SAAS,CAACjR,QAAQ,CAAC9b,IAAI,CACzB,MAAI,CAACmqB,aAAa,CAAC3P,UAAU,EAC7B;aACCuC,MAAM,EAAE;eACPmP,OAAO,EAAE,mBAAM;iBACd,MAAI,CAACc,OAAO,EAAE;;;YAGhB,CACD;UACD,CAAC;;;;KAEH;KAAA,oCAGD;OAAA;OACC,IAAMC,aAAa,GAAG7kB,QAAQ,CAACiX,cAAc,CAAC,gBAAgB,CAAC;OAE/D,IAAI,IAAI,CAACiL,mBAAmB,EAC5B;SACChL,eAAK,CAACxmB,IAAI,CAACm0B,aAAa,EAAE,OAAO,EAAE,YAAM;WACxC,IAAML,SAAS,GAAG,EAAE;WACpB,MAAI,CAACxC,YAAY,CAAC/6B,OAAO,CAAC,UAACsQ,WAAW,EAAK;aAC1CitB,SAAS,CAAC12B,IAAI,CAAC;eACd+S,IAAI,EAAE3O,cAAI,CAACykB,MAAM,CAACpf,WAAW,CAAC;eAC9BuJ,OAAO,EAAE,mBAAM;iBAAA;iBACd,MAAI,CAACohB,mBAAmB,GAAG3qB,WAAW;iBACtCstB,aAAa,CAACJ,UAAU,CAAC7W,SAAS,GAAG1b,cAAI,CAACykB,MAAM,CAAC,MAAI,CAACuL,mBAAmB,CAAC;iBAC1E,0BAAI,CAACK,SAAS,qDAAd,iBAAgB9c,KAAK,EAAE;;cAExB,CAAC;YACF,CAAC;WAEF9Z,EAAE,CAACyf,SAAS,CAACpiB,IAAI,CAChB,YAAY,EACZ67B,aAAa,EACbL,SAAS,EACT;aACClZ,SAAS,EAAE,CAAC;aACZD,UAAU,EAAE,EAAE;aACdO,KAAK,EAAE;eAAE9F,QAAQ,EAAE,KAAK;eAAEE,MAAM,EAAE;;YAClC,CACD;WAED,MAAI,CAACuc,SAAS,GAAG52B,EAAE,CAACyf,SAAS,CAACsZ,cAAc,EAAE;UAC9C,CAAC;QACF,MAED;SACCxN,eAAK,CAACxmB,IAAI,CAACm0B,aAAa,EAAE,OAAO,EAAE,YAAM;WACxCl5B,EAAE,CAACg5B,SAAS,CAACjR,QAAQ,CAAC9b,IAAI,kCACC,MAAI,CAACsgB,MAAM,QACrC;aACCvD,MAAM,EAAE;eACPmP,OAAO,EAAE,mBAAM;iBACd,MAAI,CAACc,OAAO,EAAE;;;YAGhB,CACD;UACD,CAAC;;;;KAEH;KAAA,0BAGD;OAAA;OACCxyB,cAAI,CAACC,SAAS,CAAC,2DAA2D,EAAE;SAC3E9M,IAAI,EAAE;WACL2yB,MAAM,EAAE,IAAI,CAACA;;QAEd,CAAC,CAAC1lB,IAAI,CAAC,UAAC7K,MAAM,EAAK;SAAA;SACnB,MAAI,CAACgpB,WAAW,CAAChpB,MAAM,CAACpC,IAAI,CAACqW,OAAO,CAAC;SACrC,MAAI,CAAComB,YAAY,GAAGr6B,MAAM,CAACpC,IAAI,CAAC6yB,MAAM;SAEtC,MAAI,CAAC8J,mBAAmB,kDAAG,MAAI,CAACF,YAAY,wDAAjB,oBAAoB,CAAC,CAAC,uEAAI,IAAI;SACzD,MAAI,CAACG,cAAc,wCAAG,MAAI,CAACvmB,OAAO,mDAAZ,eAAe,CAAC,CAAC,6DAAI,IAAI;SAE/C,MAAI,CAACkpB,qBAAqB,EAAE;SAC5B,MAAI,CAACC,aAAa,EAAE;QACpB,CAAC;;;KACF;KAAA,wCAGD;OACC,IAAI,CAAC1C,UAAU,CAAC2C,WAAW,CAAC,CAACn6B,OAAO,CAAC,IAAI,CAACq3B,mBAAmB,IAAI,IAAI,CAACC,cAAc,CAAC,CAAC;;;KACtF;KAAA,gCAGD;OACC,IAAI,CAACC,SAAS,CAAC6C,UAAU,CAAC,IAAI,CAACtC,eAAe,EAAE,CAAC;OACjD,IAAI,CAACqB,aAAa,EAAE;;;KACpB;KAAA,kCAGD;;OAEC,IAAIkB,sBAAsB,GAAG,EAAE;OAC/B,IAAI,IAAI,CAAC/C,cAAc,EACvB;SACC+C,sBAAsB,GAAG75B,aAAG,CAACC,UAAU,CACtC,oDAAoD,EACpD;WACC,QAAQ,EAAE,iDAAiD;WAC3D,SAAS,EAAE,QAAQ;WACnB,UAAU,EAAE,yGAAyG;WACrH,UAAU,qNAKR,IAAI,CAAC42B,mBAAmB,GACrBhwB,cAAI,CAACykB,MAAM,CAAC,IAAI,CAACuL,mBAAmB,CAAC,GACrC72B,aAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC,uCAGjE;WACD,WAAW,4BACP,IAAI,CAAC42B,mBAAmB,GAAG,gDAAgD,GAAG,EAAE,yDAGnF;WACD,WAAW,EAAE,yGAAyG;WACtH,WAAW,qMAG8ChwB,cAAI,CAACykB,MAAM,CAAC,IAAI,CAACwL,cAAc,CAAC1uB,IAAI,CAAC,uBAC7F;WACD,YAAY;UAKZ,CACD;QACD,MAED;SACCyxB,sBAAsB,GAAG75B,aAAG,CAACC,UAAU,CACtC,8DAA8D,EAC9D;WACC,QAAQ,EAAE,iDAAiD;WAC3D,SAAS,EAAE,QAAQ;WACnB,UAAU,EAAE,yGAAyG;WACrH,UAAU,qNAKN,IAAI,CAAC42B,mBAAmB,GACrBhwB,cAAI,CAACykB,MAAM,CAAC,IAAI,CAACuL,mBAAmB,CAAC,GACrC72B,aAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC,uCAGnE;WACD,WAAW,4BACP,IAAI,CAAC42B,mBAAmB,GAAG,gDAAgD,GAAG,EAAE,2DAGnF;WACD,WAAW,EAAE,sLAAsL;WACnM,YAAY;UAKZ,CACD;;OAGF,OAAOzJ,aAAG,CAACnc,MAAM,4cAMiCjR,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC,EACtG45B,sBAAsB;;;GAI3B;CAAA;;;AC5UF,CA6BA,IAAMC,SAAS,GAAG,IAAIv+B,GAAG,EAAE;AAE3B,KAAaw+B,GAAG;GAAA;KAAA;KAAA,8BAEMr1B,QAAgB,EACrC;OACC,OAAOo1B,SAAS,CAACtyB,GAAG,CAAC9C,QAAQ,CAAC,IAAI,IAAI;;;GAGvC,eAeA;KAAA;KAAA,IAfYrD,OAAO,uEAAG;OACrBqD,QAAQ,EAAE,IAAI;OACdC,SAAS,EAAE,IAAI;OACfq1B,MAAM,EAAE,IAAI;OACZC,eAAe,EAAE,IAAI;OACrBC,yBAAyB,EAAE,IAAI;OAC/BC,2BAA2B,EAAE,IAAI;OACjClgB,OAAO,EAAE,IAAI;OACbK,yBAAyB,EAAE,KAAK;OAChC8f,kBAAkB,EAAE,KAAK;OACzB/e,sBAAsB,EAAE,KAAK;OAC7BoC,gBAAgB,EAAE,IAAI;OACtBjc,WAAW,EAAE,IAAI;OACjBqT,gBAAgB,EAAEwlB,sBAAsB,GAAC;MACzC;KAAA;KAEA,IAAI,CAACz9B,MAAM,GAAG0D,EAAE,CAACg5B,SAAS,CAACjR,QAAQ,CAACiS,YAAY,EAAE;KAClD,IAAI,CAAC51B,QAAQ,GAAGrD,OAAO,CAACqD,QAAQ;KAChC,IAAI,CAACC,SAAS,GAAGyS,QAAQ,CAAC/V,OAAO,CAACsD,SAAS,CAAC;KAC5C,IAAI,CAACq1B,MAAM,GAAG5iB,QAAQ,CAAC/V,OAAO,CAAC24B,MAAM,CAAC;KACtC,IAAI,CAACC,eAAe,GAAG54B,OAAO,CAAC44B,eAAe;KAC9C,IAAI,CAACC,yBAAyB,GAAG74B,OAAO,CAAC64B,yBAAyB;KAClE,IAAI,CAACC,2BAA2B,GAAG94B,OAAO,CAAC84B,2BAA2B;KACtE,IAAI,CAACvjB,aAAa,GAAGvV,OAAO,CAACuV,aAAa;KAC1C,IAAI,CAACY,WAAW,GAAGnW,OAAO,CAACmW,WAAW;KACtC,IAAI,CAACnW,OAAO,GAAGA,OAAO;KACtB,IAAI,CAACk5B,UAAU,GAAG,KAAK;KACvB,IAAI,CAACC,gBAAgB,GAAG,KAAK;KAC7B,IAAI,CAACxV,iBAAiB,GAAG,KAAK;KAC9B,IAAI,CAACnU,OAAO,GAAG,EAAE;KACjB,IAAI,CAAC4pB,cAAc,GAAG,EAAE;KACxB,IAAI,CAACh2B,WAAW,GAAG,EAAE;KACrB,IAAI,CAACD,OAAO,GAAG,EAAE;KACjB,IAAI,CAACyC,OAAO,GAAGmQ,QAAQ,CAAC/V,OAAO,CAAC4F,OAAO,CAAC;KACxC,IAAI,CAACuK,gBAAgB,GAAG,IAAI;KAC5B,IAAI,CAACC,uBAAuB,GAAG,IAAI;KACnC,IAAI,CAACipB,aAAa,GAAG,EAAE;KACvB,IAAI,CAAC3rB,iBAAiB,GAAG,EAAE;KAC3B,IAAI,CAAC2H,cAAc,GAAG,EAAE;KACxB,IAAI,CAACikB,WAAW,GAAGt5B,OAAO,CAACs5B,WAAW;KACtC,IAAI,CAACz4B,YAAY,GAAGb,OAAO,CAACa,YAAY;KACxC,IAAI,CAACV,WAAW,GAAG,IAAI;KACvB,IAAI,CAACsE,gBAAgB,GAAG,IAAI;KAC5B,IAAI,CAACiI,YAAY,GAAG1M,OAAO,CAAC0M,YAAY;KACxC,IAAI,CAAC8N,gBAAgB,GAAGxa,OAAO,CAACwa,gBAAgB;KAEhD,IAAGxZ,cAAI,CAACu4B,QAAQ,CAACv5B,OAAO,CAACmQ,gBAAgB,CAAC,EAC1C;OACC,IAAI,CAACA,gBAAgB,GAAGnQ,OAAO,CAACmQ,gBAAgB;;KAGjD,IAAGnP,cAAI,CAACu4B,QAAQ,CAACv5B,OAAO,CAACoQ,uBAAuB,CAAC,EACjD;OACC,IAAI,CAACA,uBAAuB,GAAGpQ,OAAO,CAACoQ,uBAAuB;;KAG/D,IAAGpP,cAAI,CAACw4B,SAAS,CAACx5B,OAAO,CAAC4Y,OAAO,CAAC,EAClC;OACC,IAAI,CAACA,OAAO,GAAG5Y,OAAO,CAAC4Y,OAAO;MAC9B,MAED;OACC,IAAI,CAACA,OAAO,GAAG,IAAI;;KAGpB,IAAG5X,cAAI,CAACw4B,SAAS,CAACx5B,OAAO,CAACiZ,yBAAyB,CAAC,EACpD;OACC,IAAI,CAACA,yBAAyB,GAAGjZ,OAAO,CAACiZ,yBAAyB;MAClE,MAED;OACC,IAAI,CAACA,yBAAyB,GAAG,KAAK;;KAGvC,IAAGjY,cAAI,CAACw4B,SAAS,CAACx5B,OAAO,CAACga,sBAAsB,CAAC,EACjD;OACC,IAAI,CAACA,sBAAsB,GAAGha,OAAO,CAACga,sBAAsB;MAC5D,MAED;OACC,IAAI,CAACA,sBAAsB,GAAG,KAAK;;KAGpC,IAAGhZ,cAAI,CAACu4B,QAAQ,CAACv5B,OAAO,CAACqV,cAAc,CAAC,EACxC;OACC,IAAI,CAACA,cAAc,GAAGrV,OAAO,CAACqV,cAAc;;KAG7C,IAAGrU,cAAI,CAACw4B,SAAS,CAACx5B,OAAO,CAAC+4B,kBAAkB,CAAC,EAC7C;OACC,IAAI,CAACA,kBAAkB,GAAG/4B,OAAO,CAAC+4B,kBAAkB;MACpD,MAED;OACC,IAAI,CAACA,kBAAkB,GAAG,KAAK;;KAGhC,IAAG/3B,cAAI,CAACw4B,SAAS,CAACx5B,OAAO,CAACoc,gBAAgB,CAAC,EAC3C;OACC,IAAI,CAACA,gBAAgB,GAAGpc,OAAO,CAACoc,gBAAgB;MAChD,MAED;OACC,IAAI,CAACA,gBAAgB,GAAG,KAAK;;KAG9B,IAAGpb,cAAI,CAACw4B,SAAS,CAACx5B,OAAO,CAAC2jB,iBAAiB,CAAC,EAC5C;OACC,IAAI,CAACA,iBAAiB,GAAG3jB,OAAO,CAAC2jB,iBAAiB;;KAGnD,IAAG3jB,OAAO,CAACoD,WAAW,EACtB;OACC,IAAI,CAACA,WAAW,GAAGpD,OAAO,CAACoD,WAAW;;KAGvC,IAAGpD,OAAO,CAACmD,OAAO,EAClB;OACC,IAAI,CAACA,OAAO,GAAGnD,OAAO,CAACmD,OAAO;;KAG/B,IAAGnC,cAAI,CAACu4B,QAAQ,CAACv5B,OAAO,CAACwP,OAAO,CAAC,IAAIxP,OAAO,CAACwP,OAAO,CAAClV,MAAM,GAAG,CAAC,EAC/D;OACC,IAAI,CAACkV,OAAO,GAAGxP,OAAO,CAACwP,OAAO;MAC9B,MACI,IAAG,IAAI,CAAClM,SAAS,IAAI,IAAI,CAACD,QAAQ,EACvC;OACC,IAAI,CAACmM,OAAO,GAAGzC,iBAAiB,CAACK,WAAW;;KAG7C,IAAGpM,cAAI,CAACw4B,SAAS,CAACx5B,OAAO,CAACwc,sBAAsB,CAAC,EACjD;OACC,IAAI,CAACA,sBAAsB,GAAGxc,OAAO,CAACwc,sBAAsB;MAC5D,MAED;OACC,IAAI,CAACA,sBAAsB,GAAG,KAAK;;KAGpC,IAAG,CAACxb,cAAI,CAAC8J,WAAW,CAAC9K,OAAO,CAACq5B,aAAa,CAAC,EAC3C;OACC,IAAI,CAACA,aAAa,GAAGr5B,OAAO,CAACq5B,aAAa;;KAE3C,IAAG,CAACr4B,cAAI,CAAC8J,WAAW,CAAC9K,OAAO,CAAC0N,iBAAiB,CAAC,EAC/C;OACC,IAAI,CAACA,iBAAiB,GAAG,IAAI,CAAC1N,OAAO,CAAC0N,iBAAiB;;KAGxD,IAAG1M,cAAI,CAACM,QAAQ,CAACtB,OAAO,CAACG,WAAW,CAAC,EACrC;OACC,IAAI,CAACA,WAAW,GAAGH,OAAO,CAACG,WAAW;;KAGvC,IAAI,CAAC0d,0BAA0B,GAC7B,IAAI,CAACva,SAAS,GAAG,CAAC,IAAI,IAAI,CAACD,QAAQ,CAAC/I,MAAM,GAAG,CAAC,IAAM,IAAI,CAAC8I,WAAW,IAAI,IAAI,CAACD,OAC9E;KACD,IAAI,CAACJ,SAAS,GAAG/B,cAAI,CAACu4B,QAAQ,CAACv5B,OAAO,CAAC+C,SAAS,CAAC,GAAG/C,OAAO,CAAC+C,SAAS,GAAG,EAAE;KAE1E,IAAI,CAACC,uBAAuB,GAAGhC,cAAI,CAACw4B,SAAS,CAACx5B,OAAO,CAACgD,uBAAuB,CAAC,GAAGhD,OAAO,CAACgD,uBAAuB,GAAG,KAAK;KAExH,IAAIhC,cAAI,CAAC0e,aAAa,CAAC1f,OAAO,CAACwT,gBAAgB,CAAC,EAChD;OACC,IAAI,CAACA,gBAAgB,GAAGxT,OAAO,CAACwT,gBAAgB;OAChD,IAAI,CAACA,gBAAgB,CAACsB,SAAS,GAAG,IAAI,CAAC9U,OAAO,CAAC8U,SAAS;;KAGzD0V,eAAK,CAACiP,KAAK,CAAC,YACZ;OACC,KAAI,CAACC,IAAI,GAAGz6B,EAAE,CAAC06B,IAAI;OACnB,KAAI,CAACC,QAAQ,EAAE;OACf,KAAI,CAAC7f,YAAY,GAAG5a,2BAAO,CAAC4a,YAAY;MACxC,CAAC;KAEF2e,GAAG,CAACmB,SAAS,EAAE,CACb/zB,IAAI,CAAC,UAAC7K,MAAM;OAAA,OAAK,KAAI,CAAC6+B,YAAY,CAAC7+B,MAAM,CAAC;OAAC,SACtC,CAAC,UAACirB,KAAK;OAAA,OAAKwS,GAAG,CAACqB,SAAS,CAAC7T,KAAK,CAAC;OAAC;KAGxCxiB,6BAAY,CAAC/H,SAAS,CAACoP,MAAM,CAACZ,MAAM,EAAE,kCAAkC,EAAE,IAAI,CAAC2W,eAAe,CAAC9c,IAAI,CAAC,IAAI,CAAC,CAAC;KAE1Gy0B,SAAS,CAAC99B,GAAG,CAAC,IAAI,CAAC0I,QAAQ,EAAE,IAAI,CAAC;;GAClC;KAAA;KAAA,sCAcD;OACC,IAAMiB,WAAW,GAAG,IAAI,CAAC01B,KAAK,CAAC3zB,OAAO,CAAC,8BAA8B,CAAC;OACtE,IAAMohB,SAAS,GAAGnjB,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEmjB,SAAS;OACxC,IAAI,CAACA,SAAS,EACd;SACC;;OAGD,IAAMwS,SAAS,GAAGC,iCAAO,CAACC,aAAa,CAACxqB,MAAM,CAACyqB,SAAS,CAACC,aAAa,CAAC5S,SAAS,CAAC,CAC/E6S,UAAU,CAACpT,oCAAU,CAACC,0BAA0B,CAAC,CACjDoT,SAAS,EAAE;OAGbC,qBAAQ,CAACP,SAAS,CAAC;;;KACnB;KAAA,2BAGD;OAAA;OACC,IAAG,IAAI,CAACP,IAAI,EACZ;SACC,IAAG14B,cAAI,CAACu4B,QAAQ,CAAC,IAAI,CAACX,eAAe,CAAC,EACtC;WACC,IAAI,CAACc,IAAI,CAAC/9B,SAAS,CAAC;aACnB8+B,QAAQ,EAAE,aAAa;aACvBC,OAAO,EAAE,IAAI,CAAC9B,eAAe;aAC7B+B,QAAQ,EAAE,kBAAC7Y,MAAM,EACjB;eACC,IAAG/L,QAAQ,CAAC+L,MAAM,CAACxe,SAAS,CAAC,KAAK,MAAI,CAACA,SAAS,IAAIwe,MAAM,CAAClc,OAAO,GAAG,CAAC,EACtE;iBACCzG,2BAAO,CAACy7B,yBAAyB,CAAC9Y,MAAM,CAAClc,OAAO,CAAC;;;YAGnD,CAAC;;SAGH,IAAG5E,cAAI,CAACu4B,QAAQ,CAAC,IAAI,CAACV,yBAAyB,CAAC,EAChD;WACC,IAAI,CAACa,IAAI,CAAC/9B,SAAS,CAAC;aACnB8+B,QAAQ,EAAE,aAAa;aACvBC,OAAO,EAAE,IAAI,CAAC7B,yBAAyB;aACvC8B,QAAQ,EAAE,kBAAC7Y,MAAM,EACjB;eACC,IAAG/L,QAAQ,CAAC+L,MAAM,CAAC5E,SAAS,CAAC,GAAG,CAAC,EACjC;iBACC,MAAI,CAACf,SAAS,EAAE;;eAEjB,IAAG2F,MAAM,CAAC1nB,cAAc,CAAC,2BAA2B,CAAC,IAAI4G,cAAI,CAACw4B,SAAS,CAAC1X,MAAM,CAAC7I,yBAAyB,CAAC,EACzG;iBACC,MAAI,CAACA,yBAAyB,GAAG6I,MAAM,CAAC7I,yBAAyB;iBACjE,MAAI,CAACe,sBAAsB,GAAG,IAAI;;;YAGpC,CAAC;;SAGH,IAAGhZ,cAAI,CAACu4B,QAAQ,CAAC,IAAI,CAACT,2BAA2B,CAAC,EAClD;WACC,IAAI,CAACY,IAAI,CAAC/9B,SAAS,CAAC;aACnB8+B,QAAQ,EAAE,aAAa;aACvBC,OAAO,EAAE,IAAI,CAAC5B,2BAA2B;aACzC6B,QAAQ,EAAE,kBAAC7Y,MAAM,EACjB;eACC,IAAG/L,QAAQ,CAAC+L,MAAM,CAAC5E,SAAS,CAAC,GAAG,CAAC,EACjC;iBACC,MAAI,CAACf,SAAS,EAAE;;eAEjB,IAAG2F,MAAM,CAAC1nB,cAAc,CAAC,2BAA2B,CAAC,IAAI4G,cAAI,CAACw4B,SAAS,CAAC1X,MAAM,CAAC7I,yBAAyB,CAAC,EACzG;iBACC,MAAI,CAACA,yBAAyB,GAAG6I,MAAM,CAAC7I,yBAAyB;iBACjE,MAAI,CAACe,sBAAsB,GAAG,IAAI;;;YAGpC,CAAC;;;;;KAGJ;KAAA,6BAEY/e,MAAM,EACnB;OAAA;OACC,OAAO,IAAIwtB,OAAO,CAAC,UAACC,OAAO,EAC3B;SACC,IAAMlZ,OAAO,GAAG,MAAI;SACpB,MAAI,CAACwqB,KAAK,GAAG/+B,MAAM,CAAC++B,KAAK;SAEzB,MAAI,CAACa,cAAc,GAAG7xB,UAAG,CAACoI,MAAM,CAAC;WAChC0pB,EAAE,EAAExnB,QAAQ,CAACiX,cAAc,CAAC,sBAAsB,CAAC;WACnDnxB,UAAU,EAAE;aACX,MAAM,EAAE2hC,IAAI;aACZ,MAAM,EAAEC;YACR;WACD99B,QAAQ,EACP,MAAI,CAAC+9B,aAAa,EAAE,gHAEgC;WAErDjB,KAAK,EAAE,MAAI,CAACA,KAAK;WACjBjhC,OAAO,qBACP;aACC,IAAI,CAACgH,IAAI,GAAGyP,OAAO;aACnB,IAAI,CAAC+J,MAAM,GAAG;eACbC,MAAM,EAAElG,QAAQ,CAACiX,cAAc,CAAC,QAAQ,CAAC;eACzC2Q,SAAS,EAAE5nB,QAAQ,CAACiX,cAAc,CAAC,YAAY,CAAC;eAChD7rB,KAAK,EAAE4U,QAAQ,CAACiX,cAAc,CAAC,WAAW,CAAC;eAC3C7N,aAAa,EAAEpJ,QAAQ,CAACiX,cAAc,CAAC,qCAAqC,CAAC;eAC7E4Q,aAAa,EAAE7nB,QAAQ,CAACiX,cAAc,CAAC,gCAAgC;cACvE;aACD,IAAI,CAAC6Q,iBAAiB,EAAE;aACxB,IAAI5rB,OAAO,CAACgE,gBAAgB,EAC5B;eACC,IAAI,CAAC1S,MAAM,CAACO,MAAM,CAAC,4BAA4B,EAAEmO,OAAO,CAACgE,gBAAgB,CAAC;;aAG3E,IAAI,IAAI,CAACzT,IAAI,CAACC,OAAO,CAAC6C,2BAA2B,KAAK,GAAG,EACzD;eACC,IAAI,CAAC/B,MAAM,CAACO,MAAM,CAAC,qCAAqC,CAAC;;YAE1D;WACDvB,OAAO,qBACP;aACC4oB,OAAO,EAAE;YACT;WACD9uB,OAAO,EAAE;aACRwtB,MAAM,kBAACiU,QAAQ,EACf;eACC,IAAI,CAACriC,KAAK,CAAC+G,IAAI,CAACu7B,SAAS,EAAE,CAACh/B,IAAI,CAACgX,QAAQ,CAACxF,IAAI,CAAC;eAE/CpI,cAAI,CAAC0R,kBAAkB,CACtB,wBAAwB,EACxB,oBAAoB,EACpB;iBACC9U,IAAI,EAAE,OAAO;iBACbzJ,IAAI,EAAE;mBACLwiC,QAAQ,EAARA;;gBAED,CACD,CAACv1B,IAAI,CAAC,UAASuR,QAAQ,EAAE;iBACzB,IAAIA,QAAQ,CAACxe,IAAI,EACjB;mBACC,IAAI,CAACG,KAAK,CAAC+G,IAAI,CAACC,OAAO,GAAGqX,QAAQ,CAACxe,IAAI;mBACvC,IAAI,CAACG,KAAK,CAAC+G,IAAI,CAAC6F,OAAO,GAAG,IAAI,CAAC5M,KAAK,CAAC+G,IAAI,CAACC,OAAO,CAAC4F,OAAO;mBACzD,IAAI,CAAC21B,YAAY,IAAI,CAAC;mBAEtB,IAAI,CAACviC,KAAK,CAAC+G,IAAI,CAACu7B,SAAS,EAAE,CAAC5+B,IAAI,EAAE;;gBAEnC,CAACsH,IAAI,CAAC,IAAI,CAAC,CAAC;cACb;aACDo3B,iBAAiB,+BACjB;eAAA;eACC,IACA;iBACC,IAEC,IAAI,CAACr7B,IAAI,CAACC,OAAO,CAACw7B,SAAS,CAAClhC,MAAM,GAAG,CAAC,IACnC,IAAI,CAACyF,IAAI,CAACC,OAAO,CAACC,YAAY,KAAK,QAAQ,IAC3C,CAAC,IAAI,CAACF,IAAI,CAACC,OAAO,CAAC4F,OAAO,EAE9B;mBACC;;iBAGD,IAAM61B,gBAAgB,GAAG,IAAI,CAACliB,MAAM,CAAC4hB,aAAa,CAAC36B,aAAa,CAAC,sCAAsC,CAAC;iBACxG,IAAI,CAACi7B,gBAAgB,EACrB;mBACC;;iBAGDA,gBAAgB,CAACva,SAAS,GAAGviB,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC,CACjFuP,OAAO,CAAC,YAAY,EAAE,IAAI,CAACpO,IAAI,CAACC,OAAO,CAAC4F,OAAO,CAAC;iBAElD61B,gBAAgB,CAACC,YAAY,CAAC,WAAW,EAAE/8B,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,CAAC;iBAEhG,IAAI+8B,SAAS;iBACb,IAAI7D,SAAS,GAAG,EAAE;iBAClB,IAAI,CAAC/3B,IAAI,CAACC,OAAO,CAACw7B,SAAS,CAACvhC,GAAG,CAAC,UAAA2L,OAAO,EAAI;mBAC1C,IAAMg2B,YAAY,GAAGj9B,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC,CAACuP,OAAO,CAAC,YAAY,EAAEvI,OAAO,CAAC;mBAC1GkyB,SAAS,CAAC12B,IAAI,CAAC;qBACd+S,IAAI,EAAEynB,YAAY;qBAClBxnB,OAAO,EAAE,iBAAAjY,KAAK,EAAI;uBACjBw/B,SAAS,CAAC5iB,KAAK,EAAE;uBACjB0iB,gBAAgB,CAACva,SAAS,GAAG0a,YAAY;uBACzC,MAAI,CAACxU,MAAM,CAAC;yBACX5X,OAAO,EAAE,MAAI,CAACzP,IAAI,CAACC,OAAO,CAACwP,OAAO;yBAClC5J,OAAO,EAAEA,OAAO;yBAChBxC,WAAW,EAAE,MAAI,CAACrD,IAAI,CAACC,OAAO,CAACoD,WAAW;yBAC1CD,OAAO,EAAE,MAAI,CAACpD,IAAI,CAACC,OAAO,CAACmD,OAAO;yBAClClD,YAAY,EAAE,MAAI,CAACF,IAAI,CAACC,OAAO,CAACC,YAAY;yBAC5CqC,IAAI,EAAE,MAAI,CAACvC,IAAI,CAACC,OAAO,CAACsC,IAAI;yBAC5ByqB,WAAW,EAAE,MAAI,CAAChtB,IAAI,CAACC,OAAO,CAAC+sB;wBAC/B,CAAC;;oBAEH,CAAC;kBACF,CAAC;iBACF4O,SAAS,GAAG9nB,sBAAW,CAACzC,MAAM,CAAC;mBAC9BnJ,EAAE,EAAE,qBAAqB;mBACzB2L,WAAW,EAAE6nB,gBAAgB;mBAC7BprB,KAAK,EAAEynB;kBACP,CAAC;iBAEF,IAAI,CAACve,MAAM,CAAC4hB,aAAa,CAAC7M,SAAS,CAACC,MAAM,CAAC,WAAW,CAAC;iBACvD,IAAI,CAAChV,MAAM,CAAC4hB,aAAa,CAACU,gBAAgB,CAAC,OAAO,EAAE,UAAA//B,CAAC,EAAI;mBACxDA,CAAC,CAACggC,cAAc,EAAE;mBAClBH,SAAS,CAACr/B,IAAI,EAAE;mBAChB2C,EAAE,CAACsY,EAAE,CAAClb,IAAI,CAACK,IAAI,EAAE;kBACjB,CAAC;iBAEFuC,EAAE,CAACsY,EAAE,CAAClb,IAAI,CAAC0/B,IAAI,CAAC,IAAI,CAACxiB,MAAM,CAAC4hB,aAAa,CAAC;gBAC1C,CACD,OAAOa,GAAG,EACV;;;;YAID;WACDnjC,IAAI,kBAAG;aACN,OAAO;eACN0iC,YAAY,EAAE;cACd;;UAEF,CAAC;QACF,CAAC;;;KACF;KAAA,mCAGD;OACC,IAAG,IAAI,CAAChgC,MAAM,EACd;SACC,IAAI,CAACA,MAAM,CAACwd,KAAK,EAAE;;;;KAEpB;KAAA,4BAGD;OAAA;OACC,OAAO,IAAI0P,OAAO,CAAC,UAACC,OAAO,EAC3B;SACC,IAAG,MAAI,CAACwQ,UAAU,EAClB;WACC,MAAI,CAACE,cAAc,CAACh4B,IAAI,CAACsnB,OAAO,CAAC;UACjC,MAED;WACC,IAAG,MAAI,CAACyQ,gBAAgB,EACxB;aACChY,YAAY,CAAC,MAAI,CAACgY,gBAAgB,CAAC;;WAEpC,MAAI,CAACA,gBAAgB,GAAG7X,UAAU,CAAC,YACnC;aACC,MAAI,CAAC2a,aAAa,EAAE;aACpBhL,gBAAI,CAACC,UAAU,CAAC,uBAAuB,EAAE,EAAE,CAAC,CAACprB,IAAI,CAAC,UAAC7K,MAAM,EAAK;eAC7D,MAAI,CAAC++B,KAAK,CAAC34B,MAAM,CAAC,sBAAsB,EAAE;iBAAC0c,KAAK,EAAE9iB,MAAM,CAACokB,MAAM,CAACpkB,MAAM,CAAC8iB;gBAAM,CAAC;eAC9E,MAAI,CAACme,YAAY,EAAE;eACnBxT,OAAO,EAAE;eACT,MAAI,CAAC0Q,cAAc,CAAC7+B,OAAO,CAAC,UAACC,IAAI,EACjC;iBACCA,IAAI,EAAE;gBACN,CAAC;eACF,MAAI,CAAC4+B,cAAc,GAAG,EAAE;cACxB,CAAC;YACF,EAAE,GAAG,CAAC;;QAER,CAAC;;;KACF;KAAA,4BAQD;OACC,IAAG,CAAC,IAAI,CAACzf,MAAM,EACf;SACC,IAAI,CAACA,MAAM,GAAG,IAAIC,kBAAM,CAAC;WAAC9e,IAAI,EAAE,GAAG;WAAEwH,IAAI,EAAE;UAAS,CAAC;;OAGtD,OAAO,IAAI,CAACqX,MAAM;;;KAClB;KAAA,6BAGD;OACC,IAAG,IAAI,CAACkhB,cAAc,EACtB;SACC,IAAI,CAACS,SAAS,EAAE,CAACh/B,IAAI,CAAC,IAAI,CAACu+B,cAAc,CAACt6B,GAAG,CAAC;;;;KAE/C;KAAA,6BAGD;OACC,IAAI,CAAC+6B,SAAS,EAAE,CAAC5+B,IAAI,EAAE;;;KACvB;KAAA,gCAGD;OAAA,IADcy/B,WAAW,uEAAG,IAAI;OAE/B,IAAI,CAACjD,UAAU,GAAG,IAAI;OACtB,IAAI,CAAC2B,cAAc,CAAC9+B,KAAK,CAAC,mBAAmB,CAAC;OAC9C,IAAI,CAACqgC,UAAU,EAAE;OACjB,IAAIp7B,cAAI,CAACq7B,SAAS,CAACF,WAAW,CAAC,EAC/B;SACCA,WAAW,CAAC7N,SAAS,CAACgO,GAAG,CAAC,aAAa,CAAC;;;;KAEzC;KAAA,+BAGD;OAAA,IADaH,WAAW,uEAAG,IAAI;OAE9B,IAAI,CAACjD,UAAU,GAAG,KAAK;OACvB,IAAI,CAAC2B,cAAc,CAAC9+B,KAAK,CAAC,kBAAkB,CAAC;OAC7C,IAAI,CAACwgC,UAAU,EAAE;OACjB,IAAIv7B,cAAI,CAACq7B,SAAS,CAACF,WAAW,CAAC,EAC/B;SACCA,WAAW,CAAC7N,SAAS,CAACC,MAAM,CAAC,aAAa,CAAC;;;;KAE5C;KAAA,yBAEQrQ,IAAI,EACb;OAAA;OACC,OAAO,IAAIuK,OAAO,CAAC,UAACC,OAAO,EAAE8T,MAAM,EAAK;SACvC,IAAIC,OAAO;SACX,IAAGve,IAAI,CAAChB,SAAS,GAAG,CAAC,EACrB;WACCuf,OAAO,GAAGt9B,2BAAO,CAACie,QAAQ,CAACc,IAAI,CAAC;UAChC,MAED;WACCue,OAAO,GAAGt9B,2BAAO,CAACu9B,SAAS,CAACxe,IAAI,CAAC;;SAElCue,OAAO,CAAC32B,IAAI,CAAC,YACb;WACC,MAAI,CAACk0B,KAAK,CAAC34B,MAAM,CAAC,wBAAwB,EAAE;aAAC6c,IAAI,EAAJA;YAAK,CAAC;WACnDwK,OAAO,EAAE;UACT,CAAC,SAAM,CAAC,UAACztB,MAAM,EAChB;WACCy9B,GAAG,CAACqB,SAAS,CAAC9+B,MAAM,CAACokB,MAAM,CAACsd,iBAAiB,CAAC;WAC9CH,MAAM,CAACvhC,MAAM,CAACokB,MAAM,CAACsd,iBAAiB,CAAC;UACvC,CAAC;QACF,CAAC;;;KACF;KAAA,yBAEQ/c,MAAM,EACf;OAAA;OACC,IAAG,IAAI,CAACsZ,UAAU,EAClB;SACC;;OAED,IAAG,IAAI,CAACvV,iBAAiB,EACzB;SACC;;OAED,IAAM5F,KAAK,GAAG,IAAI,CAACic,KAAK,CAAC3zB,OAAO,CAAC,sBAAsB,CAAC,EAAE;OAC1D,IAAI6X,IAAI;OACR,KAAI,IAAIzjB,KAAK,IAAIsjB,KAAK,EACtB;SACC,IAAGA,KAAK,CAAC3jB,cAAc,CAACK,KAAK,CAAC,IAAIsjB,KAAK,CAACtjB,KAAK,CAAC,CAACwN,EAAE,KAAK2X,MAAM,EAC5D;WACC1B,IAAI,GAAGH,KAAK,CAACtjB,KAAK,CAAC;WACnB;;;OAGF,IAAImiC,MAAM,GAAG,OAAO;OACpB,IAAG1e,IAAI,CAAChB,SAAS,GAAG,CAAC,EACrB;SACC,IAAGnH,QAAQ,CAACmI,IAAI,CAACsB,MAAM,CAAC,KAAKzJ,QAAQ,CAAC5W,2BAAO,CAAC09B,eAAe,CAAC,EAC9D;WACCD,MAAM,GAAG,oBAAoB;UAC7B,MAED;WACCA,MAAM,GAAG,eAAe;;;OAG1B,IAAG,CAAC,IAAI,CAACv5B,QAAQ,EACjB;SACC,IAAI,CAAC9H,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,QAAQ,EAAE,UAAU,CAAC;SAC1C,IAAI,CAACY,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,MAAM,EAAEujB,IAAI,CAAC;SAClC,IAAI,CAAC3iB,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,QAAQ,EAAEilB,MAAM,CAAC;SACtC,IAAG,IAAI,CAACpQ,OAAO,KAAKzC,iBAAiB,CAACI,GAAG,EACzC;WACC,IAAI,CAAC8uB,aAAa,EAAE;WACpBh9B,EAAE,CAACC,WAAW,CAACC,OAAO,CAAC29B,iBAAiB,CAAC;aACxC9Z,cAAc,EAAE,oBAAoB;aACpCxT,OAAO,EAAE,IAAI,CAACA,OAAO;aACrBotB,MAAM,EAAEA,MAAM;aACdviC,IAAI,EAAE6jB,IAAI,CAACV,SAAS,GAAG,MAAM,GAAG,MAAM;aACtC2H,IAAI,EAAEjH,IAAI,CAACiH;YACX,CAAC,CAACrf,IAAI,CAAC,YACR;aACC,MAAI,CAACo2B,YAAY,EAAE;aACnB,MAAI,CAACljB,gBAAgB,EAAE;YACvB,CAAC;UACF,MAED;WACC,IAAI,CAACA,gBAAgB,EAAE;;SAExB;;OAED,IAAI,CAACijB,aAAa,EAAE;OAEpBv2B,cAAI,CAACC,SAAS,CAAC,uBAAuB,EAAE;SACvCqd,cAAc,EAAE,qBAAqB;SACrC+Z,aAAa,EAAE;WACd15B,QAAQ,EAAE,IAAI,CAACA,QAAQ;WACvBmM,OAAO,EAAE,IAAI,CAACA,OAAO;WACrBotB,MAAM,EAAEA,MAAM;WACdviC,IAAI,EAAE6jB,IAAI,CAACV,SAAS,GAAG,MAAM,GAAG,MAAM;WACtCza,SAAS,EAAE,IAAI,CAACA,SAAS;WACzBoiB,IAAI,EAAEjH,IAAI,CAACiH;UACX;SACDtsB,IAAI,EAAE;WACLoP,EAAE,EAAE2X,MAAM;WACV5f,OAAO,EAAE;aACRqD,QAAQ,EAAE,IAAI,CAACA,QAAQ;aACvBC,SAAS,EAAE,IAAI,CAACA;;;QAGlB,CAAC,CAACwC,IAAI,CAAC,YACR;SACC,MAAI,CAACo2B,YAAY,EAAE;SACnB,MAAI,CAACljB,gBAAgB,EAAE;QACvB,CAAC,SAAM,CAAC,UAAC/d,MAAM,EAChB;SACCy9B,GAAG,CAACqB,SAAS,CAAC9+B,MAAM,CAACmL,MAAM,CAAC42B,GAAG,EAAE,CAACjtB,OAAO,CAAC;SAC1C,MAAI,CAACmsB,YAAY,EAAE;QACnB,CAAC;;;KACF;KAAA,kCAGD;OAAA,IADgBC,WAAW,uEAAG,IAAI;OAAA,IAAE1b,6BAA6B,uEAAG,KAAK;OAExE,IAAI,CAAC,IAAI,CAAC5C,0BAA0B,EACpC;SACC,IAAI,CAAC7E,gBAAgB,EAAE;SACvB,OAAO,IAAI;;OAGZ,IAAI,CAAC,IAAI,CAACghB,KAAK,CAAC3zB,OAAO,CAAC,+BAA+B,CAAC,IAAI,IAAI,CAAC6yB,UAAU,EAC3E;SACC,OAAO,IAAI;;OAGZ,IAAI,CAAC,IAAI,CAACl2B,uBAAuB,EACjC;SACCyd,6BAA6B,GAAG,IAAI;;OAGrC,IAAI,CAACwb,aAAa,CAACE,WAAW,CAAC;OAE/B,IAAIn8B,OAAO,GAAG;SACbqD,QAAQ,EAAE,IAAI,CAACA,QAAQ;SACvBg2B,aAAa,EAAE,IAAI,CAACA,aAAa;SACjC3rB,iBAAiB,EAAE,IAAI,CAACA,iBAAiB;SACzCtK,WAAW,EAAE,IAAI,CAACA,WAAW;SAC7BD,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBJ,SAAS,EAAE,IAAI,CAACA,SAAS;SACzBO,SAAS,EAAE,IAAI,CAACA,SAAS;SACzBmd,6BAA6B,EAAEA,6BAA6B;SAC5D/b,aAAa,EAAE,IAAI,CAACvE,WAAW,GAAG,IAAI,CAACA,WAAW,CAACsG,EAAE,GAAG,IAAI,CAAChC,gBAAgB;SAC7E3L,QAAQ,EAAE,IAAI,CAACkH,OAAO,CAACC,YAAY,KAAK,QAAQ;SAChDqE,WAAW,EAAE,IAAI,CAAC01B,KAAK,CAAC3zB,OAAO,CAAC,8BAA8B;QAC9D;OAED,IAAI,IAAI,CAAC8J,gBAAgB,KAAK,IAAI,EAClC;SACCnQ,OAAO,CAACmQ,gBAAgB,GAAG,IAAI,CAACA,gBAAgB;;OAEjD,IAAI,IAAI,CAACC,uBAAuB,KAAK,IAAI,EACzC;SACCpQ,OAAO,CAACoQ,uBAAuB,GAAG,IAAI,CAACA,uBAAuB;;OAG/D,IAAI,IAAI,CAACrN,SAAS,KAAK,UAAU,IAAI,IAAI,CAACC,uBAAuB,IAAI,CAACyd,6BAA6B,EACnG;SACC,IAAI,CAACwc,yBAAyB,CAACd,WAAW,EAAEn8B,OAAO,CAAC;QACpD,MAED;SACC,IAAI,CAACk9B,yBAAyB,CAACf,WAAW,EAAEn8B,OAAO,CAAC;;;;KAErD;KAAA,0CAEyBm8B,WAAW,EAAEn8B,OAAO,EAC9C;OAAA;OACC0F,cAAI,CAAC0R,kBAAkB,CACtB,wBAAwB,EACxB,yBAAyB,EACzB;SACC9U,IAAI,EAAE,OAAO;SACbzJ,IAAI,EAAE;WACLwK,QAAQ,EAAE,IAAI,CAACA;;QAEhB,CACD,CAACyC,IAAI,CAAC,UAACuR,QAAQ,EAAK;SACpB,IAAM8lB,oBAAoB,GAAG9lB,QAAQ,CAACxe,IAAI;SAC1C,IAAIskC,oBAAoB,EACxB;WACC,MAAI,CAACjB,YAAY,CAACC,WAAW,CAAC;WAC9B,MAAI,CAACiB,kCAAkC,CAACjB,WAAW,EAAEgB,oBAAoB,CAAC;UAC1E,MAED;WACCz3B,cAAI,CAACC,SAAS,CAAC,mEAAmE,EAAE;aACnF9M,IAAI,EAAE;eACLmH,OAAO,EAAPA;;YAED,CAAC,CAAC8F,IAAI,CAAC,UAAC7K,MAAM,EAAK;aACnB,MAAI,CAACiiC,yBAAyB,CAACf,WAAW,EAAEn8B,OAAO,CAAC;aACpD,MAAI,CAACg6B,KAAK,CAACj5B,QAAQ,CAAC,2BAA2B,CAAC;aAChD,MAAI,CAACiY,gBAAgB,EAAE;aACvB,MAAI,CAACkjB,YAAY,CAACC,WAAW,CAAC;YAC9B,CAAC;;QAEH,CAAC;;;KACF;KAAA,8BAGD;OAAA;OACC,IAAI,CAAC,IAAI,CAAC3hB,gBAAgB,EAC1B;SACC;;OAGD,IAAI,CAAC4hB,UAAU,EAAE;OAEjBiB,uBAAO,CAACC,WAAW,EAAE,CAACC,MAAM,CAAC,mBAAmB,EAAE;SACjDt1B,EAAE,EAAE9I,2BAAO,CAAC09B;QACZ,CAAC,CACA/2B,IAAI,CAAC,YAAM;SACX,MAAI,CAACvK,MAAM,CAAC6rB,MAAM,EAAE;QACpB,CAAC,SACI,CAAC,UAACvuB,IAAI,EAAK;SAChB,MAAI,CAACyiC,SAAS,EAAE,CAAC5+B,IAAI,EAAE;SAEvB,IAAI7D,IAAI,CAACwB,IAAI,KAAK,OAAO,IAAI,CAAC2G,cAAI,CAAC8J,WAAW,CAACjS,IAAI,CAACoC,MAAM,CAAC,CAAC,CAAC,CAAC,EAC9D;WACC,IAAMuiC,SAAS,GAAG3kC,IAAI,CAACoC,MAAM,CAAC,CAAC,CAAC,CAACirB,KAAK;WAEtC,QAAQsX,SAAS;aAEhB,KAAK,qBAAqB;eAAE;iBAC3Br+B,2BAAO,CAACs+B,6BAA6B,EAAE;iBAEvC;;aAGD,KAAK,0BAA0B;eAAE;iBAChCt+B,2BAAO,CAACu+B,uBAAuB,EAAE;iBAEjC;;aAGD,KAAK,4BAA4B;eAAE;iBAClCv+B,2BAAO,CAACw+B,uBAAuB,EAAE;iBAEjC;;aAGD,KAAK,qBAAqB;eAAE;iBAC3B,MAAI,CAACxQ,qBAAqB,EAAE;iBAE5B;;aAGD,KAAK,qBAAqB;eAAE;iBAC3B,MAAI,CAACyQ,qBAAqB,EAAE;iBAE5B;;aAGD;eAAS;iBACRC,gCAAU,CAACpb,KAAK,CACf5pB,IAAI,CAACoC,MAAM,CAAC,CAAC,CAAC,CAAC0hC,iBAAiB,CAChC;;;;QAIJ,CAAC;;;KACH;KAAA,qCAGD;OAAA;OACC,IAAI,CAAC19B,EAAE,CAAC+B,IAAI,CAACM,QAAQ,CAACw8B,gCAAW,CAAC,EAClC;SACC;;OAGDA,gCAAW,CACTR,WAAW,EAAE,CACbS,aAAa,CAAC,cAAc,CAAC,CAC7BC,WAAW,CAAC7+B,2BAAO,CAAC09B,eAAe,CAAC,CACpCoB,WAAW,CAAC;SACZC,SAAS,EAAE,KAAK;SAChBvD,QAAQ,EAAE,kBAACwD,QAAQ,EAAK;WACvB,IAAIA,QAAQ,EACZ;aACC,OAAI,CAAC3jB,gBAAgB,GAAG,IAAI;aAC5B9W,6BAAY,CAAC06B,IAAI,CAAC,sCAAsC,CAAC;;;QAG3D,CAAC;;;KAEH;KAAA,wCAGD;OAAA;OACCP,gCAAU,CAACQ,OAAO,CACjB1/B,aAAG,CAACC,UAAU,CAAC,8CAA8C,CAAC,EAC9DD,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC,EAC5D,UAAC0/B,UAAU,EAAK;SACfA,UAAU,CAACvlB,KAAK,EAAE;SAClB,OAAI,CAACsB,kBAAkB,EAAE;QACzB,EACD1b,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,EAC3D,UAAC0/B,UAAU;SAAA,OAAKA,UAAU,CAACvlB,KAAK,EAAE;UAClCpa,aAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC,CAC/D;;;KACD;KAAA,wCAGD;OACCi/B,gCAAU,CAACQ,OAAO,CACjB1/B,aAAG,CAACC,UAAU,CAAC,8CAA8C,CAAC,EAC9DD,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC,EAC5D,UAAC0/B,UAAU,EAAK;SACfA,UAAU,CAACvlB,KAAK,EAAE;SAClB5Z,2BAAO,CAACo/B,0BAA0B,EAAE;QACpC,EACD5/B,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,EAC3D,UAAC0/B,UAAU;SAAA,OAAKA,UAAU,CAACvlB,KAAK,EAAE;UAClCpa,aAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC,CAC/D;;;KACD;KAAA,mDAEkCu9B,WAAW,EAAEgB,oBAAoB,EACpE;OACC,IAAI,CAAC,IAAI,CAACqB,8BAA8B,EACxC;SACC,IAAI,CAACA,8BAA8B,GAAG,IAAI1H,gBAAK,CAAC;WAC/CC,SAAS,EAAE,mDAAmD;WAC9Dpf,OAAO,EAAE,IAAI,CAAC8mB,wCAAwC,CAACtC,WAAW,EAAEgB,oBAAoB,CAAC;WACzFvgC,KAAK,EAAE,GAAG;WACVo6B,OAAO,EAAE,IAAI;WACbpY,SAAS,EAAE,CAAC;WACZD,UAAU,EAAE,CAAC;WACb+f,OAAO,EAAE,EAAE;WACXC,SAAS,EAAE,cAAc;WACzBzf,KAAK,EAAE,KAAK;WACZ+X,SAAS,EAAE;aACVjsB,GAAG,EAAE,KAAK;aACV4zB,KAAK,EAAE;;UAER,CAAC;;OAGH,IAAI,CAACJ,8BAA8B,CAACliC,IAAI,EAAE;;;KAC1C;KAAA,yDAEwC6/B,WAAW,EAAEgB,oBAAoB,EAC1E;OACC,IAAM0B,kCAAkC,GAAG9S,aAAG,CAACnc,MAAM,qLAEjDjR,aAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC,CAElE;OACD4rB,eAAK,CAACxmB,IAAI,CAAC66B,kCAAkC,EAAE,OAAO,EAAE,IAAI,CAACC,wCAAwC,CAAC96B,IAAI,CAAC,IAAI,EAAEm5B,oBAAoB,CAAC,CAAC;OAEvI,IAAM4B,8BAA8B,GAAGhT,aAAG,CAACnc,MAAM,wLAE7CjR,aAAG,CAACC,UAAU,CAAC,qEAAqE,CAAC,CAExF;OACD4rB,eAAK,CAACxmB,IAAI,CAAC+6B,8BAA8B,EAAE,OAAO,EAAE,IAAI,CAACC,0CAA0C,CAACh7B,IAAI,CAAC,IAAI,EAAEm4B,WAAW,CAAC,CAAC;OAE5H,OAAOpQ,aAAG,CAACnc,MAAM,qaAEyDjR,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC,EAEjIigC,kCAAkC,EAClCE,8BAA8B;;;KAInC;KAAA,yDAEwC5B,oBAAoB,EAC7D;OACCl+B,EAAE,CAACg5B,SAAS,CAACjR,QAAQ,CAAC9b,IAAI,CAACiyB,oBAAoB,CAAC;OAChD,IAAI,CAACqB,8BAA8B,CAACzlB,KAAK,EAAE;;;KAC3C;KAAA,2DAE0CojB,WAAW,EACtD;OACC,IAAI,CAACqC,8BAA8B,CAACzlB,KAAK,EAAE;OAC3C,IAAI,CAAC+H,eAAe,CAACqb,WAAW,EAAE,IAAI,CAAC;;;KACvC;KAAA,0CAEyBA,WAAW,EAAEn8B,OAAO,EAC9C;OAAA;OACC,IAAM6F,WAAW,GAAG,IAAI,CAACm0B,KAAK,CAAC3zB,OAAO,CAAC,yBAAyB,CAAC,EAAE;OACnE,IAAMC,UAAU,GAAGT,WAAW,CAAC5L,GAAG,CAAC,UAACsM,UAAU,EAAK;SAClD,OAAOA,UAAU,CAACC,KAAK;QACvB,CAAC;OACFd,cAAI,CAACC,SAAS,CAAC,yCAAyC,EAAE;SACzD9M,IAAI,EAAE;WACLyN,UAAU,EAAVA,UAAU;WACVtG,OAAO,EAAPA;UACA;SACDgjB,cAAc,EAAE;QAChB,CAAC,CAACld,IAAI,CAAC,UAAC7K,MAAM,EAAK;SACnB,OAAI,CAACgkC,mBAAmB,EAAE;SAC1B,OAAI,CAACjF,KAAK,CAACj5B,QAAQ,CAAC,2BAA2B,CAAC;SAChD,OAAI,CAACm7B,YAAY,CAACC,WAAW,CAAC;SAE9B,IAAIlhC,MAAM,CAACpC,IAAI,IAAIoC,MAAM,CAACpC,IAAI,CAACsH,WAAW,EAC1C;WACC,OAAI,CAAC5E,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,QAAQ,EAAE,iBAAiB,CAAC;WACjD,OAAI,CAACY,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,aAAa,EAAEM,MAAM,CAACpC,IAAI,CAACsH,WAAW,CAAC;;SAG7D,OAAI,CAAC6Y,gBAAgB,EAAE;SACvB,OAAI,CAACkmB,eAAe,CAAC,sCAAsC,CAAC;QAC5D,CAAC,SAAM,CAAC,UAACrmC,IAAI,EAAK;SAClBA,IAAI,CAACuN,MAAM,CAAC7L,OAAO,CAAC,UAAC2rB,KAAK,EAAK;WAC9BzD,KAAK,CAACyD,KAAK,CAACnW,OAAO,CAAC;UACpB,CAAC;SACF,OAAI,CAACmsB,YAAY,CAACC,WAAW,CAAC;SAC9BzD,GAAG,CAACqB,SAAS,CAAClhC,IAAI,CAAC;QACnB,CAAC;;;KACF;KAAA,6BAEYsjC,WAAW,EACxB;OAAA;OACC,IAAI,CAAC,IAAI,CAACte,0BAA0B,EACpC;SACC,IAAI,CAAC7E,gBAAgB,EAAE;SACvB,OAAO,IAAI;;OAGZ,IAAI,CAAC,IAAI,CAACghB,KAAK,CAAC3zB,OAAO,CAAC,+BAA+B,CAAC,IAAI,IAAI,CAAC6yB,UAAU,EAC3E;SACC,OAAO,IAAI;;OAGZ,IAAI,CAAC+C,aAAa,CAACE,WAAW,CAAC;OAE/B,IAAItjC,IAAI,GAAG;SACVuK,WAAW,EAAE,IAAI,CAACA,WAAW;SAC7BD,OAAO,EAAE,IAAI,CAACA,OAAO;SACrByC,OAAO,EAAE,IAAI,CAACA,OAAO;SACrB4C,UAAU,EAAE,IAAI,CAACwxB,KAAK,CAAC3zB,OAAO,CAAC,6BAA6B,CAAC;SAC7DsB,aAAa,EAAE,IAAI,CAACqyB,KAAK,CAAC3zB,OAAO,CAAC,2BAA2B,CAAC;SAC9D84B,qBAAqB,EAAE,IAAI,CAACnF,KAAK,CAAC3zB,OAAO,CAAC,mCAAmC,CAAC;SAC9EwC,qBAAqB,EAAE,IAAI,CAACmxB,KAAK,CAAC3zB,OAAO,CAAC,wCAAwC,CAAC;SACnFyC,YAAY,EAAE,IAAI,CAACkxB,KAAK,CAAC3zB,OAAO,CAAC,+BAA+B,CAAC;SACjEoC,kBAAkB,EAAE,IAAI,CAACuxB,KAAK,CAAC3zB,OAAO,CAAC,iCAAiC,CAAC;SACzEuC,2BAA2B,EAAE,IAAI,CAACoxB,KAAK,CAAC3zB,OAAO,CAAC,8CAA8C;QAC9F;OAED,IAAI,IAAI,CAAC+J,uBAAuB,KAAK,IAAI,EACzC;SACCvX,IAAI,CAACuX,uBAAuB,GAAG,IAAI,CAACA,uBAAuB;;OAG5D1K,cAAI,CAACC,SAAS,CAAC,kCAAkC,EAAE;SAClD9M,IAAI,EAAE;WACLgN,WAAW,EAAE,IAAI,CAACm0B,KAAK,CAAC3zB,OAAO,CAAC,yBAAyB,CAAC,EAAE;WAC5DrG,OAAO,EAAEnH;UACT;SACDmqB,cAAc,EAAE;QAChB,CAAC,CAACld,IAAI,CAAC,UAAC7K,MAAM,EACf;SACC,OAAI,CAAC++B,KAAK,CAACj5B,QAAQ,CAAC,2BAA2B,CAAC;SAChD,OAAI,CAACm7B,YAAY,CAACC,WAAW,CAAC;SAE9B,IAAIlhC,MAAM,CAACpC,IAAI,EACf;WACC,IAAIoC,MAAM,CAACpC,IAAI,CAAC0P,KAAK,EACrB;aACC,OAAI,CAAChN,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,OAAO,EAAEM,MAAM,CAACpC,IAAI,CAAC0P,KAAK,CAAC;;WAEjD,IAAItN,MAAM,CAACpC,IAAI,CAACmU,IAAI,EACpB;aACC,OAAI,CAACzR,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,MAAM,EAAEM,MAAM,CAACpC,IAAI,CAACmU,IAAI,CAAC;;;SAIhD,OAAI,CAACgM,gBAAgB,EAAE;SACvB,OAAI,CAACkmB,eAAe,CAAC,mCAAmC,CAAC;QACzD,CAAC,SAAM,CAAC,UAACrmC,IAAI,EACd;SACCA,IAAI,CAACuN,MAAM,CAAC7L,OAAO,CAAC,UAAC2rB,KAAK,EAAK;WAC9BzD,KAAK,CAACyD,KAAK,CAACnW,OAAO,CAAC;UACpB,CAAC;SACF,OAAI,CAACmsB,YAAY,CAACC,WAAW,CAAC;SAC9BzD,GAAG,CAACqB,SAAS,CAAClhC,IAAI,CAAC;QACnB,CAAC;;;KACF;KAAA,4BAEWsjC,WAAW,EACvB;OAAA;OAAA,IADyBxb,iBAAiB,uEAAG,GAAG;OAE/C,IAAI,CAAC,IAAI,CAAC9C,0BAA0B,EACpC;SACC,IAAI,CAAC7E,gBAAgB,EAAE;SACvB,OAAO,IAAI;;OAGZ,IAAI,CAAC,IAAI,CAACghB,KAAK,CAAC3zB,OAAO,CAAC,+BAA+B,CAAC,IAAI,IAAI,CAAC6yB,UAAU,EAC3E;SACC,OAAO,IAAI;;OAGZ,IAAI,CAAC+C,aAAa,CAACE,WAAW,CAAC;OAE/B,IAAMtjC,IAAI,GAAG;SACZwK,QAAQ,EAAE,IAAI,CAACA,QAAQ;SACvBg2B,aAAa,EAAE,IAAI,CAACA,aAAa;SACjC3rB,iBAAiB,EAAE,IAAI,CAACA,iBAAiB;SACzCpK,SAAS,EAAE,IAAI,CAACA,SAAS;SACzBq1B,MAAM,EAAE,IAAI,CAACA,MAAM;SACnBv1B,WAAW,EAAE,IAAI,CAACA,WAAW;SAC7BwC,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBzC,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBb,IAAI,EAAE,IAAI,CAACtC,OAAO,CAACsC,IAAI;SACvBqe,iBAAiB,EAAjBA,iBAAiB;SACjBnY,UAAU,EAAE,IAAI,CAACwxB,KAAK,CAAC3zB,OAAO,CAAC,6BAA6B,CAAC;SAC7DsB,aAAa,EAAE,IAAI,CAACqyB,KAAK,CAAC3zB,OAAO,CAAC,2BAA2B,CAAC;SAC9D84B,qBAAqB,EAAE,IAAI,CAACnF,KAAK,CAAC3zB,OAAO,CAAC,mCAAmC,CAAC;SAC9EwC,qBAAqB,EAAE,IAAI,CAACmxB,KAAK,CAAC3zB,OAAO,CAAC,wCAAwC,CAAC;SACnFyC,YAAY,EAAE,IAAI,CAACkxB,KAAK,CAAC3zB,OAAO,CAAC,+BAA+B,CAAC;SACjEoC,kBAAkB,EAAE,IAAI,CAACuxB,KAAK,CAAC3zB,OAAO,CAAC,iCAAiC,CAAC;SACzEuC,2BAA2B,EAAE,IAAI,CAACoxB,KAAK,CAAC3zB,OAAO,CAAC,8CAA8C,CAAC;SAC/FgsB,sBAAsB,EAAE,IAAI,CAAC2H,KAAK,CAAC3zB,OAAO,CAAC,yCAAyC,CAAC;SACrFtD,SAAS,EAAE,IAAI,CAACA,SAAS;SACzByM,OAAO,EAAE,IAAI,CAACA,OAAO;SACrB9N,QAAQ,EAAE,IAAI,CAACb,YAAY;SAC3B6L,YAAY,EAAE,IAAI,CAACA,YAAY;SAC/BpI,WAAW,EAAE,IAAI,CAAC01B,KAAK,CAAC3zB,OAAO,CAAC,8BAA8B;QAC9D;OAED,IAAI,IAAI,CAACmN,gBAAgB,EACzB;SACC3a,IAAI,CAACwb,eAAe,GAAG,IAAI,CAAC2lB,KAAK,CAAC3zB,OAAO,CAAC,qCAAqC,CAAC;SAChFxN,IAAI,CAAC2b,kBAAkB,GAAG,IAAI,CAACwlB,KAAK,CAAC3zB,OAAO,CAAC,wCAAwC,CAAC;;OAGvF,IAAI,IAAI,CAAC8J,gBAAgB,KAAK,IAAI,EAClC;SACCtX,IAAI,CAACsX,gBAAgB,GAAG,IAAI,CAACA,gBAAgB;;OAE9C,IAAI,IAAI,CAACC,uBAAuB,KAAK,IAAI,EACzC;SACCvX,IAAI,CAACuX,uBAAuB,GAAG,IAAI,CAACA,uBAAuB;;OAG5D1K,cAAI,CAACC,SAAS,CAAC,iCAAiC,EAAE;SACjD9M,IAAI,EAAE;WACLgN,WAAW,EAAE,IAAI,CAACm0B,KAAK,CAAC3zB,OAAO,CAAC,yBAAyB,CAAC,EAAE;WAC5DrG,OAAO,EAAEnH;UACT;SACDmqB,cAAc,EAAG,IAAI,CAACxT,OAAO,KAAKzC,iBAAiB,CAACC,IAAI,GAAI,6BAA6B,GAAG,0BAA0B;SACtH+vB,aAAa,EAAE;WACd15B,QAAQ,EAAE,IAAI,CAACA,QAAQ;WACvBmM,OAAO,EAAE,IAAI,CAACA,OAAO;WACrBzM,SAAS,EAAE,IAAI,CAACA,SAAS;WACzB4d,iBAAiB,EAAEA;;QAEpB,CAAC,CAAC7a,IAAI,CAAC,UAAC7K,MAAM,EACf;SACC,OAAI,CAACgkC,mBAAmB,EAAE;SAC1B,OAAI,CAACjF,KAAK,CAACj5B,QAAQ,CAAC,2BAA2B,CAAC;SAChD,OAAI,CAACm7B,YAAY,CAACC,WAAW,CAAC;SAC9B,IAAIxb,iBAAiB,KAAK,GAAG,EAC7B;WACC,IAAIjJ,MAAM,GAAG;aACZC,OAAO,EAAEhZ,aAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC,CAACuP,OAAO,CAAC,YAAY,EAAElT,MAAM,CAACpC,IAAI,CAAC0P,KAAK,CAAC62B,MAAM;YAC/G;WACD1nB,MAAM,CAACsD,OAAO,GAAG,CAAC;aACjBtc,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC;aACzCqpB,MAAM,EAAE;eACPoX,KAAK,mBAAG;iBACPlgC,2BAAO,CAACghB,YAAY,CAACllB,MAAM,CAACpC,IAAI,CAAC0P,KAAK,CAACN,EAAE,CAAC;;;YAG5C,CAAC;WACFhJ,EAAE,CAACsY,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAACA,MAAM,CAAC;WACxCvY,2BAAO,CAAC8gB,cAAc,CAAC;aACtBra,OAAO,EAAE3K,MAAM,CAACpC,IAAI,CAAC0P,KAAK,CAACN,EAAE;aAC7B9E,OAAO,EAAE,OAAI,CAACA,OAAO;aACrBC,WAAW,EAAE,OAAI,CAACA,WAAW;aAC7BoM,OAAO,EAAE,OAAI,CAACA;YACd,CAAC;UACF,MAED;WACC,OAAI,CAACjU,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,QAAQ,EAAE,aAAa,CAAC;WAC7C,OAAI,CAACY,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,OAAO,EAAEM,MAAM,CAACpC,IAAI,CAAC0P,KAAK,CAAC;WAEhD,IAAItN,MAAM,CAACpC,IAAI,CAACmU,IAAI,EACpB;aACC,OAAI,CAACzR,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,MAAM,EAAEM,MAAM,CAACpC,IAAI,CAACmU,IAAI,CAAC;;WAG/C,IAAI/R,MAAM,CAACpC,IAAI,CAAC0+B,MAAM,EACtB;aACC,OAAI,CAACh8B,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,QAAQ,EAAEM,MAAM,CAACpC,IAAI,CAAC0+B,MAAM,CAAC;;WAGnD,OAAI,CAACve,gBAAgB,EAAE;;SAExB,OAAI,CAACkmB,eAAe,CAAC,kCAAkC,CAAC;QACxD,CAAC,SAAM,CAAC,UAACrmC,IAAI,EACd;SAECA,IAAI,CAACuN,MAAM,CAAC7L,OAAO,CAAC,UAAC2rB,KAAK,EAAK;WAC9Blb,GAAG,CAAC/L,EAAE,CAACsY,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;aACpCC,OAAO,EAAEnS,cAAI,CAACykB,MAAM,CAAC/D,KAAK,CAACnW,OAAO;YAClC,CAAC;UACF,CAAC;SACF,OAAI,CAACmsB,YAAY,CAACC,WAAW,CAAC;SAC9BzD,GAAG,CAACqB,SAAS,CAAClhC,IAAI,CAAC;SAEnB,IAAG,OAAI,CAACymC,oBAAoB,CAACzmC,IAAI,CAACuN,MAAM,CAAC,EACzC;WACC,OAAI,CAAC4S,gBAAgB,EAAE;;QAExB,CAAC;;;KACF;KAAA,oCAEmBmjB,WAAW,EAC/B;OAAA;OACC,IAAI,CAAC,IAAI,CAACte,0BAA0B,EACpC;SACC,IAAI,CAAC7E,gBAAgB,EAAE;SAEvB,OAAO,IAAI;;OAGZ,IAAI,CAAC,IAAI,CAACghB,KAAK,CAAC3zB,OAAO,CAAC,+BAA+B,CAAC,IAAI,IAAI,CAAC6yB,UAAU,EAC3E;SACC,OAAO,IAAI;;OAGZ,IAAI,CAAC+C,aAAa,CAACE,WAAW,CAAC;OAE/B,IAAMtjC,IAAI,GAAG;SACZuK,WAAW,EAAE,IAAI,CAACA,WAAW;SAC7BD,OAAO,EAAE,IAAI,CAACA,OAAO;SACrByC,OAAO,EAAE,IAAI,CAACA,OAAO;SACrB0sB,oBAAoB,EAAE,IAAI,CAAC0H,KAAK,CAAC3zB,OAAO,CAAC,uCAAuC,CAAC;SACjFmJ,OAAO,EAAE,IAAI,CAACA,OAAO;SACrB9N,QAAQ,EAAE,IAAI,CAACb,YAAY;SAC3B6L,YAAY,EAAE,IAAI,CAACA;QACnB;OAED,IAAI,IAAI,CAACyD,gBAAgB,KAAK,IAAI,EAClC;SACCtX,IAAI,CAACsX,gBAAgB,GAAG,IAAI,CAACA,gBAAgB;;OAG9C,IAAM0Z,+BAA+B,GAAG,IAAI,CAACmQ,KAAK,CAAC3zB,OAAO,CAAC,+CAA+C,CAAC;OAE3GX,cAAI,CAACC,SAAS,CAAC,yCAAyC,EAAE;SACzD9M,IAAI,EAAE;WACLgN,WAAW,EAAE,IAAI,CAACm0B,KAAK,CAAC3zB,OAAO,CAAC,yBAAyB,CAAC,EAAE;WAC5DrG,OAAO,EAAEnH;UACT;SACDmqB,cAAc,EAAE,kCAAkC;SAClD+Z,aAAa,EAAE;WACdvtB,OAAO,EAAE,IAAI,CAACA;;QAEf,CAAC,CAAC1J,IAAI,CAAC,UAAC7K,MAAM,EAAK;SACnB,OAAI,CAAC++B,KAAK,CAACj5B,QAAQ,CAAC,2BAA2B,CAAC;SAChD,OAAI,CAACm7B,YAAY,CAACC,WAAW,CAAC;SAC9B,OAAI,CAAC5gC,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,QAAQ,EAAE,aAAa,CAAC;SAC7C,OAAI,CAACY,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,OAAO,EAAEM,MAAM,CAACpC,IAAI,CAAC0P,KAAK,CAAC;SAEhD,IAAItN,MAAM,CAACpC,IAAI,CAACmU,IAAI,EACpB;WACC,OAAI,CAACzR,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,MAAM,EAAEM,MAAM,CAACpC,IAAI,CAACmU,IAAI,CAAC;;SAG/C,IAAI/R,MAAM,CAACpC,IAAI,CAAC0+B,MAAM,EACtB;WACC,OAAI,CAACh8B,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,QAAQ,EAAEM,MAAM,CAACpC,IAAI,CAAC0+B,MAAM,CAAC;;SAGnD,IAAI1N,+BAA+B,EACnC;WACC,OAAI,CAAC7Q,gBAAgB,EAAE;UACvB,MAED;WACC,OAAI,CAACumB,6BAA6B,EAAE;;SAGrC,OAAI,CAACL,eAAe,CAAC,0CAA0C,CAAC;QAChE,CAAC,SAAM,CAAC,UAACrmC,IAAI,EAAK;SAClBA,IAAI,CAACuN,MAAM,CAAC7L,OAAO,CAAC,UAAC2rB,KAAK,EAAK;WAC9Blb,GAAG,CAAC/L,EAAE,CAACsY,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;aACpCC,OAAO,EAAEnS,cAAI,CAACykB,MAAM,CAAC/D,KAAK,CAACnW,OAAO;YAClC,CAAC;UACF,CAAC;SACF,OAAI,CAACmsB,YAAY,CAACC,WAAW,CAAC;SAC9BzD,GAAG,CAACqB,SAAS,CAAClhC,IAAI,CAAC;SAEnB,IAAI,OAAI,CAACymC,oBAAoB,CAACzmC,IAAI,CAACuN,MAAM,CAAC,EAC1C;WACC,OAAI,CAAC4S,gBAAgB,EAAE;;QAExB,CAAC;;;KACF;KAAA,gDAGD;OACC,IAAMuZ,uBAAuB,GAAG,IAAI,CAACyH,KAAK,CAAC3zB,OAAO,CAAC,0CAA0C,CAAC;OAE7F,IAAI+uB,qBAAqB,CAAC;SAC1BC,aAAa,EAAE,IAAI,CAACr1B,OAAO,CAACkP,OAAO;SACnComB,YAAY,EAAE/C,uBAAuB;SACrC/G,MAAM,EAAE,IAAI,CAACwO,KAAK,CAAC3zB,OAAO,CAAC,uCAAuC,CAAC;SACnEkvB,IAAI,EAAE;QACN,CAAC,CAAE3lB,MAAM,EAAE;;;KACZ;KAAA,sCAEqBusB,WAAW,EACjC;OAAA;OACC,IAAI,CAAC,IAAI,CAACnC,KAAK,CAAC3zB,OAAO,CAAC,+BAA+B,CAAC,IAAI,IAAI,CAAC6yB,UAAU,EAC3E;SACC,OAAO,IAAI;;OAGZ,IAAI,CAAC+C,aAAa,CAACE,WAAW,CAAC;OAE/B,IAAMtjC,IAAI,GAAG;SACZy5B,oBAAoB,EAAE,IAAI,CAAC0H,KAAK,CAAC3zB,OAAO,CAAC,uCAAuC;QAChF;OAEDX,cAAI,CAACC,SAAS,CAAC,yCAAyC,EAAE;SACzD9M,IAAI,EAAE;WACLic,SAAS,EAAE,IAAI,CAAC9U,OAAO,CAAC8U,SAAS;WACjC9U,OAAO,EAAEnH;UACT;SACDmqB,cAAc,EAAE,kCAAkC;SAClD+Z,aAAa,EAAE;WACdvtB,OAAO,EAAE,IAAI,CAACA;;QAEf,CAAC,CAAC1J,IAAI,CAAC,UAAC7K,MAAM,EAAK;SACnB,OAAI,CAAC++B,KAAK,CAACj5B,QAAQ,CAAC,2BAA2B,CAAC;SAChD,OAAI,CAACm7B,YAAY,CAACC,WAAW,CAAC;SAC9B,OAAI,CAAC5gC,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,QAAQ,EAAE,aAAa,CAAC;SAC7C,OAAI,CAACY,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,OAAO,EAAEM,MAAM,CAACpC,IAAI,CAAC0P,KAAK,CAAC;SAEhD,IAAItN,MAAM,CAACpC,IAAI,CAACmU,IAAI,EACpB;WACC,OAAI,CAACzR,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,MAAM,EAAEM,MAAM,CAACpC,IAAI,CAACmU,IAAI,CAAC;;SAG/C,IAAI/R,MAAM,CAACpC,IAAI,CAAC0+B,MAAM,EACtB;WACC,OAAI,CAACh8B,MAAM,CAAC1C,IAAI,CAAC8B,GAAG,CAAC,QAAQ,EAAEM,MAAM,CAACpC,IAAI,CAAC0+B,MAAM,CAAC;;SAGnD,OAAI,CAACve,gBAAgB,EAAE;SACvB,OAAI,CAACkmB,eAAe,CAAC,0CAA0C,CAAC;QAChE,CAAC,SAAM,CAAC,UAACrmC,IAAI,EAAK;SAClBA,IAAI,CAACuN,MAAM,CAAC7L,OAAO,CAAC,UAAC2rB,KAAK,EAAK;WAC9Blb,GAAG,CAAC/L,EAAE,CAACsY,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;aACpCC,OAAO,EAAEnS,cAAI,CAACykB,MAAM,CAAC/D,KAAK,CAACnW,OAAO;YAClC,CAAC;UACF,CAAC;SACF,OAAI,CAACmsB,YAAY,CAACC,WAAW,CAAC;SAC9BzD,GAAG,CAACqB,SAAS,CAAClhC,IAAI,CAAC;SAEnB,IAAI,OAAI,CAACymC,oBAAoB,CAACzmC,IAAI,CAACuN,MAAM,CAAC,EAC1C;WACC,OAAI,CAAC4S,gBAAgB,EAAE;;QAExB,CAAC;;;KACF;KAAA,qCAGD;OACC,IAAMwmB,cAAc,GAAG,IAAI,CAACx/B,OAAO,CAACy/B,eAAe,KAAK,IAAI,GAAG,iCAAiC,GAAG,4BAA4B;;;OAG/H,IAAMzJ,YAAY,GAAGjK,aAAG,CAACnc,MAAM,22BAEcjR,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,EACtDD,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,EAI9CD,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,EAC3DD,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,EAC3DD,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,EAC3DD,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,EAG3F4gC,cAAc,CAI/B;OAED,IAAME,WAAW,GAAG,IAAI5I,gBAAK,CAAC;SAC7BC,SAAS,EAAE,4BAA4B;SACvCpf,OAAO,EAAEqe,YAAY;SACrBgB,OAAO,EAAE,IAAI;SACbC,SAAS,EAAE,IAAI;SACfC,QAAQ,EAAE,GAAG;SACbyI,QAAQ,EAAE,IAAI;SACd3rB,SAAS,EAAE,KAAK;SAChBmjB,OAAO,EAAE,CACR,IAAIhB,iBAAM,CAAC;WACVpU,KAAK,EAAEoU,iBAAM,CAAClU,KAAK,CAAC0U,OAAO;WAC3BxiB,IAAI,EAAExV,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC;WAClDwV,OAAO,EAAE,mBAAM;aACdsrB,WAAW,CAAC3mB,KAAK,EAAE;;UAEpB,CAAC,EACF,IAAIod,iBAAM,CAAC;WACVpU,KAAK,EAAEoU,iBAAM,CAAClU,KAAK,CAACmU,IAAI;WACxBjiB,IAAI,EAAExV,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC;WAClEwV,OAAO,EAAE,mBAAM;aACdjV,2BAAO,CAACwsB,oBAAoB,EAAE;;UAE/B,CAAC;QAEH,CAAC;OAEF+T,WAAW,CAACpjC,IAAI,EAAE;OAClB,IAAI,CAACsjC,SAAS,EAAE;;;KAChB;KAAA,4BAGD;OACC,IAAMC,MAAM,GAAGvsB,QAAQ,CAAC9S,aAAa,CAAC,6BAA6B,CAAC;OAEpE,OAAO,IAAIs/B,MAAM,CAACD,MAAM,EAAE;SACzB1rB,IAAI,EAAE,IAAI,CAACnU,OAAO,CAAC03B,aAAa;SAChC96B,KAAK,EAAE,GAAG;SACV6c,MAAM,EAAE;QACR,CAAC;;;KACF;KAAA,qCAEoBrT,MAAM,EAC3B;OACC,IAAI25B,UAAU,GAAG35B,MAAM,CAACpM,MAAM,CAAC,UAAAksB,KAAK,EAAI;SACvC,OAAOA,KAAK,CAACf,IAAI,GAAG,CAAC,IAAIe,KAAK,CAACf,IAAI,GAAG,GAAG;QACzC,CAAC,CAAC7qB,MAAM,IAAI,CAAC;OAEd,OAAOylC,UAAU,KAAK,KAAK;;;KAC3B;KAAA,8BAEa5D,WAAW,EACzB;OAAA;OACC,IAAI,CAAC,IAAI,CAACte,0BAA0B,EACpC;SACC,IAAI,CAAC7E,gBAAgB,EAAE;SACvB,OAAO,IAAI;;OAGZ,IAAI,CAAC,IAAI,CAACghB,KAAK,CAAC3zB,OAAO,CAAC,+BAA+B,CAAC,IAAI,IAAI,CAAC6yB,UAAU,EAC3E;SACC,OAAO,IAAI;;OAGZ,IAAI,CAAC+C,aAAa,CAACE,WAAW,CAAC;OAE/B,IAAMn8B,OAAO,GAAG;SACfq5B,aAAa,EAAE,IAAI,CAACA,aAAa;SACjC3rB,iBAAiB,EAAE,IAAI,CAACA,iBAAiB;SACzCyC,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;SACvC/M,WAAW,EAAE,IAAI,CAACA,WAAW;SAC7BD,OAAO,EAAE,IAAI,CAACA,OAAO;SACrBmB,WAAW,EAAE,IAAI,CAAC01B,KAAK,CAAC3zB,OAAO,CAAC,8BAA8B;QAC9D;OACD,IAAI,IAAI,CAACmN,gBAAgB,EACzB;SACCxT,OAAO,CAACqU,eAAe,GAAG,IAAI,CAAC2lB,KAAK,CAAC3zB,OAAO,CAAC,qCAAqC,CAAC;SACnFrG,OAAO,CAACwU,kBAAkB,GAAG,IAAI,CAACwlB,KAAK,CAAC3zB,OAAO,CAAC,wCAAwC,CAAC;;OAE1FX,cAAI,CAACC,SAAS,CAAC,iCAAiC,EAAE;SACjD9M,IAAI,EAAE;WACL+M,OAAO,EAAE,IAAI,CAACA,OAAO;WACrBkP,SAAS,EAAE,IAAI,CAAC9U,OAAO,CAAC8U,SAAS;WACjC5I,UAAU,EAAE,IAAI,CAAClM,OAAO,CAACkM,UAAU;WACnClM,OAAO,EAAPA;UACA;SACD+8B,aAAa,EAAE;WACdvtB,OAAO,EAAE,IAAI,CAACA;;QAEf,CAAC,CAAC1J,IAAI,CAAC,UAAC7K,MAAM,EACf;SACC,OAAI,CAACgkC,mBAAmB,EAAE;SAC1B,OAAI,CAAC/C,YAAY,CAACC,WAAW,CAAC;SAC9B,OAAI,CAACnjB,gBAAgB,EAAE;SACvB,OAAI,CAACkmB,eAAe,CAAC,iCAAiC,CAAC;QACvD,CAAC,SAAM,CAAC,UAACrmC,IAAI,EACd;SACCA,IAAI,CAACuN,MAAM,CAAC7L,OAAO,CAAC,UAAC2rB,KAAK,EAAK;WAC9BzD,KAAK,CAACyD,KAAK,CAACnW,OAAO,CAAC;UACpB,CAAC;SACF,OAAI,CAACmsB,YAAY,CAACC,WAAW,CAAC;SAC9BzD,GAAG,CAACqB,SAAS,CAAClhC,IAAI,CAAC;QACnB,CAAC;;;KACF;KAAA,6CAED;OACC,IAAMmnC,cAAc,GAAG,IAAI,CAAChgC,OAAO,CAACigC,mBAAmB,IAAI,KAAK;OAChE,IAAMC,iBAAiB,GAAG,IAAI,CAAClgC,OAAO,CAACmgC,yBAAyB,IAAI,KAAK;OACzE,IAAIH,cAAc,IAAIE,iBAAiB,EACvC;SACCjhC,EAAE,CAAC+Y,WAAW,CAACC,IAAI,CAAC,aAAa,EAAE+nB,cAAc,EAAEE,iBAAiB,EAAE,GAAG,CAAC;;;;KAE3E;KAAA,iCAED;OACC,IAAG,IAAI,CAAC58B,SAAS,GAAG,CAAC,EACrB;SACC,OAAO2tB,gBAAI,CAACC,UAAU,CAAC,wCAAwC,EAAE;WAChE5tB,SAAS,EAAE,IAAI,CAACA;UAChB,CAAC;QACF,MAED;SACC,OAAO,IAAImlB,OAAO,CAAC,UAACC,OAAO,EAAE8T,MAAM,EAAK,EAAE,CAAC;;;;KAE5C;KAAA,mCAGD;OACC,IAAI,IAAI,CAACl5B,SAAS,GAAG,CAAC,EACtB;SACC,OAAO2tB,gBAAI,CAACC,UAAU,CAAC,0CAA0C,EAAE;WAClE5tB,SAAS,EAAE,IAAI,CAACA;UAChB,CAAC;QACF,MAED;SACC,OAAO,IAAImlB,OAAO,CAAC,UAACC,OAAO,EAAE8T,MAAM,EAAK,EAAE,CAAC;;;;KAE5C;KAAA,uCAGD;OACC,IAAI,IAAI,CAACx8B,OAAO,CAACq5B,aAAa,KAAK,MAAM,EACzC;SACC,OAAO,IAAI,CAACr5B,OAAO,CAACqD,QAAQ,KAAK,EAAE;;OAGpC,OAAO,IAAI,CAACrD,OAAO,CAAC4kB,YAAY,KAAK,EAAE;;;KACvC;KAAA,gCAEewb,SAAS,EAAEvnC,IAAI,EAC/B;OACC6K,6BAAY,CAAC06B,IAAI,CAACgC,SAAS,EAAEvnC,IAAI,CAAC;OAClCoG,EAAE,CAACg5B,SAAS,CAACjR,QAAQ,CAACqZ,WAAW,CAAC,IAAI,CAAC9kC,MAAM,EAAE6kC,SAAS,EAAEvnC,IAAI,CAAC;;;KAC/D;KAAA,gCAGD;OACC,OAAO,IAAI,CAAC2W,OAAO,KAAKzC,iBAAiB,CAACC,IAAI,IAAI,IAAI,CAACwC,OAAO,KAAKzC,iBAAiB,CAACE,YAAY,IAAI,IAAI,CAACuC,OAAO,KAAKzC,iBAAiB,CAACM,YAAY;;;KACpJ;KAAA,4BAtvCD;OACC,IAAMizB,OAAO,GAAG,IAAIC,uBAAW,EAAE;OAEjC,OAAOD,OAAO,CAACE,QAAQ,CAAChQ,gBAAgB,CAACpf,MAAM,EAAE,CAAC,CAChDovB,QAAQ,CAACzO,kBAAkB,CAAC3gB,MAAM,EAAE,CAAC,CACrCovB,QAAQ,CAAC1P,qBAAqB,CAAC1f,MAAM,EAAE,CAAC,CACxCqvB,YAAY,CAAC,IAAI,CAAC,CAClBC,KAAK,EAAE;;;KACT;KAAA,0BAyQgBxa,KAAK,EACtB;;;;GAEC;CAAA;;;;;;;;"}