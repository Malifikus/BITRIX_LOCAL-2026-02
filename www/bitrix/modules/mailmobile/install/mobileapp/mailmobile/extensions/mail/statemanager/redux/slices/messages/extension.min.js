jn.define("mail/statemanager/redux/slices/messages",((e,s,t)=>{const{isOffline:d}=e("device/connection");const{createSlice:a}=e("statemanager/redux/toolkit");const{ReducerRegistry:r}=e("statemanager/redux/reducer-registry");const{sliceName:l,messagesListAdapter:i}=e("mail/statemanager/redux/slices/messages/meta");const{remove:n,changeReadStatus:o,moveToFolder:c,addToChat:m}=e("mail/statemanager/redux/slices/messages/thunk");const{removePending:u,removeFulfilled:f,changeReadStatusPending:p,changeReadStatusFulfilled:g,addToChatFulfilled:S}=e("mail/statemanager/redux/slices/messages/extra-reducer");const{MessageModel:M}=e("mail/statemanager/redux/slices/messages/model/message");const I=e=>e.map((e=>M.prepareReduxMailFromServer(e)));const v=a({name:l,initialState:{...i.getInitialState(),isMultiSelectMode:false,selectedIds:[]},reducers:{mailsUpsertedFromServer:{reducer:i.upsertMany,prepare:e=>({payload:I(e)})},mailsAddedFromServer:{reducer:i.addMany,prepare:e=>({payload:I(e)})},mailsUpserted:{reducer:i.upsertMany},mailsAdded:{reducer:i.upsertMany},markAsRemoved:(e,{payload:s})=>{if(d()){return}const{objectIds:t}=s;const a=t.map((s=>{const t=e.entities[s];return t?{...t,isRemoved:true}:null})).filter(Boolean);if(a.length>0){i.upsertMany(e,a)}},unmarkAsRemoved:(e,{payload:s})=>{if(d()){return}const{objectIds:t}=s;const a=t.map((s=>{const t=e.entities[s];return t?{...t,isRemoved:false}:null})).filter(Boolean);if(a.length>0){i.upsertMany(e,a)}},markAsSelected:(e,{payload:s})=>{if(d()){return}const{objectId:t}=s;const a=e.entities[t];i.upsertOne(e,{...a,isSelected:true});if(!e.isMultiSelectMode){e.isMultiSelectMode=true}if(!e.selectedIds.includes(t)){e.selectedIds.push(t)}},unmarkAsSelected:(e,{payload:s})=>{if(d()){return}const{objectId:t}=s;const a=e.entities[t];i.upsertOne(e,{...a,isSelected:false});if(e.selectedIds.includes(t)){e.selectedIds=e.selectedIds.filter((e=>e!==t))}if(e.selectedIds.length===0){e.isMultiSelectMode=false}},setTaskId:(e,{payload:s})=>{if(d()){return}const{objectId:t,taskId:a}=s;const r=e.entities[t];i.upsertOne(e,{...r,taskBindId:a})},setMultiSelectMode:(e,{payload:s})=>{if(d()){return}const{isMultiSelectMode:t}=s;e.isMultiSelectMode=t;if(!t){e.selectedIds=[];Object.keys(e.entities).forEach((s=>{const t=e.entities[s];if(t.isSelected){i.upsertOne(e,{...t,isSelected:false})}}))}},clearSelection:e=>{const s=[...e.selectedIds];e.selectedIds=[];s.forEach((s=>{const t=e.entities[s];if(t){i.upsertOne(e,{...t,isSelected:false})}}))},moveMessagesToFolder:(e,{payload:s})=>{const{messageIds:t,targetFolderId:d}=s;const a=t.map((s=>{const t=e.entities[s];return t?{...t,folderId:d}:null})).filter(Boolean);if(a.length>0){i.upsertMany(e,a)}}},extraReducers:e=>{e.addCase(n.pending,u).addCase(n.fulfilled,f).addCase(o.pending,p).addCase(o.fulfilled,g).addCase(c.pending,u).addCase(c.fulfilled,f).addCase(m.fulfilled,S)}});const{reducer:k,actions:y}=v;const{mailsUpsertedFromServer:A,mailsUpserted:F,setTaskId:R,mailsAddedFromServer:h,mailsAdded:x,markAsRemoved:C,unmarkAsRemoved:T,markAsSelected:j,unmarkAsSelected:O,setMultiSelectMode:b,clearSelection:U,moveMessagesToFolder:B}=y;r.register(l,k);t.exports={mailsUpsertedFromServer:A,mailsUpserted:F,setTaskId:R,mailsAddedFromServer:h,mailsAdded:x,markAsRemoved:C,unmarkAsRemoved:T,markAsSelected:j,unmarkAsSelected:O,setMultiSelectMode:b,clearSelection:U,moveMessagesToFolder:B}}));
//# sourceMappingURL=extension.map.js