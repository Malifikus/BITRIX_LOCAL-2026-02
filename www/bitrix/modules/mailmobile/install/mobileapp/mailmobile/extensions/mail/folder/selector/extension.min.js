jn.define("mail/folder/selector",((e,t,o)=>{const{setCurrentFolder:r}=e("mail/statemanager/redux/slices/folders");const{selectSystemFolders:i,selectCustomFolders:s,selectCurrentFolder:n}=e("mail/statemanager/redux/slices/folders/selector");const l=e("statemanager/redux/store");const{dispatch:a}=l;const{IconView:d,Icon:c}=e("ui-system/blocks/icon");const{ScrollView:u}=e("layout/ui/scroll-view");const{Box:m}=e("ui-system/layout/box");const{Color:g}=e("tokens");const{Selector:h}=e("mail/mailbox/selector");const{observeFoldersChange:f}=e("mail/statemanager/redux/slices/folders/observers/stateful-list");const{Loc:C}=e("loc");class b extends LayoutComponent{static SWITCH_MODE=0;static MOVE_MODE=1;static FOLDER_LAYOUT_PROPERTIES={backgroundColor:g.bgContentPrimary.toHex(),resizableByKeyboard:true,rightButtons:[],leftButtons:[],backdrop:{forceDismissOnSwipeDown:true,hideNavigationBar:true,horizontalSwipeAllowed:false,mediumPositionPercent:80,onlyMediumPosition:true,shouldResizeContent:true,swipeAllowed:true,swipeContentAllowed:false}};static FOLDER_LAYOUT_PROPERTIES_MOVE={titleParams:{text:C.getMessage("MAIL_FOLDER_SELECTOR_MOVE_TITLE"),type:"dialog"},backgroundColor:g.bgContentPrimary.toHex(),resizableByKeyboard:true,rightButtons:[],leftButtons:[],backdrop:{forceDismissOnSwipeDown:true,hideNavigationBar:false,horizontalSwipeAllowed:false,mediumPositionPercent:65,onlyMediumPosition:true,shouldResizeContent:true,swipeAllowed:true,swipeContentAllowed:false}};constructor(e={}){super(e);const{layoutWidget:t,parentWidget:o,mode:r=b.SWITCH_MODE,onSelect:i=null,additionalPropsForSelect:s={},customHiddenCallback:n}=e;this.additionalPropsForSelect=s;this.mode=r;this.layoutWidget=t;this.parentWidget=o;this.onSelect=i;this.customHiddenCallback=n??null;if(r===b.SWITCH_MODE){this.mailboxSelector=new h({parentWidget:t})}}componentDidMount(){this.unsubscribeFoldersObserver=f(l,this.onVisibleFoldersChange);this.initCurrentFolder()}initCurrentFolder(){if(n(l.getState())!==null&&n(l.getState())!==undefined){return}const e=i(l.getState());const t=s(l.getState());const o=e[0]||t[0]||null;if(o){a(r({folderPath:o.path}))}}renderMailboxSelector(){if(this.mode===b.SWITCH_MODE){return this.mailboxSelector}return null}render(){return View({style:{paddingTop:8}},this.renderMailboxSelector(),m({backgroundColor:g.bgPrimary,style:{flex:1}},this.renderFoldersList()))}renderFoldersList(){return u({style:{flex:1}},View({style:{paddingHorizontal:8}},this.renderSystemFolders(),this.renderCustomFolders()))}renderSystemFolders(){const e=i(l.getState());const t=e.map((e=>this.renderFolderItem(e)));return View({},...t)}renderCustomFolders(){const e=s(l.getState());if(e.length===0){return null}return View({style:{}},...e.map((e=>this.renderFolderItem(e))))}renderFolderItem(e){let t=false;const o=n(l.getState());if(o!==null&&o!==undefined&&o.id===e.id&&this.mode===b.SWITCH_MODE){t=true}let r=Number(e.unreadCount)||"";if(this.mode!==b.SWITCH_MODE){r=""}return View({style:{flexDirection:"row",alignItems:"center",paddingVertical:11.5,paddingHorizontal:12,backgroundColor:"transparent",borderRadius:12,marginBottom:4,height:51},onClick:()=>this.onFolderClick(e)},View({style:{width:24,height:24,justifyContent:"center",alignItems:"center",marginRight:12}},this.getFolderIcon(e.type)),View({style:{flex:1,flexDirection:"row"}},Text({text:e.name,style:{paddingRight:4,fontSize:16,fontWeight:t?"500":"400",color:g.base1.toHex()}}),t&&S()),e.messageCount>0&&View({style:{minWidth:20,borderRadius:50,backgroundColor:t&&r!==""?g.accentMainPrimary.toHex():"transparent"}},Text({text:String(r),style:{ellipsize:"end",numberOfLines:1,textAlign:"center",paddingVertical:1,paddingHorizontal:6,color:t?g.baseWhiteFixed.toHex():g.base3.toHex(),fontSize:13,fontWeight:"500"}})))}getFolderIcon(e){const t={default:c.MAIL,drafts:c.FILE,outcome:c.SEND,trash:c.TRASHCAN,spam:c.ALERT,custom:c.FOLDER};return d({size:28,icon:t[e]||t.custom,color:g.accentMainPrimaryalt})}onFolderClick=e=>{if(this.mode===b.MOVE_MODE&&this.onSelect){this.onSelect({...this.additionalPropsForSelect,folder:e})}else if(this.mode===b.SWITCH_MODE){a(r({folderPath:e.path}))}this.layoutWidget.close()};getMenuButton(e){return{type:"folder",id:"message-grid-more",testId:"message-grid-more",callback:e}}onVisibleFoldersChange=()=>{this.initCurrentFolder();this.setState({})};componentWillUnmount(){if(this.unsubscribeFoldersObserver){this.unsubscribeFoldersObserver()}if(this.customHiddenCallback){this.customHiddenCallback()}}}function S(){return View({style:{}},Image({style:{width:30,height:30},svg:{content:'<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.0857 10.1819C21.3303 9.93861 21.726 9.93934 21.9695 10.1838C22.213 10.4284 22.2119 10.8241 21.9675 11.0676L13.1804 19.8176C12.9366 20.0605 12.5424 20.0605 12.2986 19.8176L8.30933 15.845C8.06477 15.6014 8.06382 15.2058 8.30737 14.9612C8.55091 14.7168 8.94663 14.7159 9.19116 14.9592L12.739 18.4934L21.0857 10.1819Z" fill="#0075FF"/></svg>'}}))}o.exports={Selector:b}}));
//# sourceMappingURL=extension.map.js