{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { Reflection, Type, Event, Text, Dom, Tag, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Alert, AlertColor } from 'ui.alerts';\nimport { Starter } from 'bizproc.workflow.starter';\n\nimport 'sidepanel';\n\nconst namespace = Reflection.namespace('BX.Bizproc.Component');\n\nclass WorkflowStartList\n{\n\tgridId;\n\tcreateTemplateButton;\n\terrorsContainerDiv;\n\n\t#signedDocumentType: string;\n\t#signedDocumentId: string;\n\t#counters: Map = new Map();\n\n\t#canEdit: boolean;\n\t#bizprocEditorUrl: string;\n\t#bizprocNewEditorUrl: string;\n\n\tstatic NEW_TEMPLATE_TYPE = 'nodes';\n\n\tpopupHint;\n\thintTimeout;\n\n\tconstructor(options)\n\t{\n\t\tif (!Type.isPlainObject(options))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.gridId = options.gridId;\n\t\tthis.createTemplateButton = options.createTemplateButton;\n\t\tthis.errorsContainerDiv = options.errorsContainerDiv;\n\t\tthis.#canEdit = options.canEdit;\n\t\tthis.#bizprocEditorUrl = options.bizprocEditorUrl;\n\t\tthis.#bizprocNewEditorUrl = options.bizprocNewEditorUrl;\n\n\t\tif (Type.isStringFilled(options.signedDocumentType))\n\t\t{\n\t\t\tthis.#signedDocumentType = options.signedDocumentType;\n\t\t}\n\n\t\tif (Type.isStringFilled(options.signedDocumentId))\n\t\t{\n\t\t\tthis.#signedDocumentId = options.signedDocumentId;\n\t\t}\n\t}\n\n\tinit()\n\t{\n\t\tBX.UI.Hint.init(document);\n\n\t\tif (this.getGrid())\n\t\t{\n\t\t\tBX.Bizproc.Component.WorkflowStartList.colorPinnedRows(this.getGrid());\n\t\t}\n\n\t\tEventEmitter.subscribe('Grid::updated', this.#onAfterGridUpdated.bind(this));\n\t}\n\n\teditTemplate(event, templateId, templateType): void\n\t{\n\t\tif (!this.#canEdit)\n\t\t{\n\t\t\tthis.showNoPermissionsHint(event.target);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.#bizprocEditorUrl.length === 0)\n\t\t{\n\t\t\tthis.showNoEditorHint(event.target);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.openBizprocEditor(templateId, templateType);\n\t}\n\n\tshowAngleHint(node, text)\n\t{\n\t\tif (this.hintTimeout)\n\t\t{\n\t\t\tclearTimeout(this.hintTimeout);\n\t\t}\n\n\t\tthis.popupHint = BX.UI.Hint.createInstance({\n\t\t\tpopupParameters: {\n\t\t\t\twidth: 334,\n\t\t\t\theight: 104,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tangle: {\n\t\t\t\t\toffset: Dom.getPosition(node).width / 2,\n\t\t\t\t},\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis.popupHint.close = function()\n\t\t{\n\t\t\tthis.hide();\n\t\t};\n\t\tthis.popupHint.show(node, text);\n\t\tthis.timeout = setTimeout(this.hideHint.bind(this), 5000);\n\t}\n\n\thideHint()\n\t{\n\t\tif (this.popupHint)\n\t\t{\n\t\t\tthis.popupHint.close();\n\t\t}\n\t\tthis.popupHint = null;\n\t}\n\n\tshowNoPermissionsHint(node)\n\t{\n\t\tthis.showAngleHint(node, Loc.getMessage('BIZPROC_CMP_WORKKFLOW_START_LIST_START_RIGHTS_ERROR'));\n\t}\n\n\tshowNoEditorHint(node): void\n\t{\n\t\tthis.showAngleHint(node, Loc.getMessage('BIZPROC_CMP_WORKKFLOW_START_LIST_START_MODULE_ERROR'));\n\t}\n\n\tstatic changePin(templateId, gridId, event) {\n\t\tconst eventData = event.getData();\n\t\tconst button = eventData.button;\n\n\t\tif (Dom.hasClass(button, BX.Grid.CellActionState.ACTIVE))\n\t\t{\n\t\t\tBX.Bizproc.Component.WorkflowStartList.action('unpin', templateId, gridId);\n\t\t\tDom.removeClass(button, BX.Grid.CellActionState.ACTIVE);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.Bizproc.Component.WorkflowStartList.action('pin', templateId, gridId);\n\t\t\tDom.addClass(button, BX.Grid.CellActionState.ACTIVE);\n\t\t}\n\n\t\tconst grid = BX.Main.gridManager.getInstanceById(gridId);\n\t\tif (grid)\n\t\t{\n\t\t\tBX.Bizproc.Component.WorkflowStartList.colorPinnedRows(grid);\n\t\t}\n\t}\n\n\tstatic action(action, templateId, gridId): void\n\t{\n\t\tconst component = 'bitrix:bizproc.workflow.start.list';\n\n\t\tBX.ajax.runComponentAction(component, action, {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\ttemplateId,\n\t\t\t},\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tconst grid = BX.Main.gridManager.getInstanceById(gridId);\n\t\t\t\tif (grid)\n\t\t\t\t{\n\t\t\t\t\tgrid.reload();\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tshowErrors(errors: Array<{message: string}>)\n\t{\n\t\tthis.errorsContainerDiv.style.margin = '10px';\n\n\t\terrors.forEach((error) => {\n\t\t\tconst alert = new Alert({\n\t\t\t\ttext: error.message,\n\t\t\t\tcolor: AlertColor.DANGER,\n\t\t\t\tcloseBtn: true,\n\t\t\t\tanimated: true,\n\t\t\t});\n\n\t\t\talert.renderTo(this.errorsContainerDiv);\n\t\t});\n\t}\n\n\treloadGrid()\n\t{\n\t\tconst grid = this.getGrid();\n\t\tif (grid)\n\t\t{\n\t\t\tgrid.reload();\n\t\t}\n\t}\n\n\tgetGrid(): ?BX.Main.grid\n\t{\n\t\tif (this.gridId)\n\t\t{\n\t\t\treturn BX.Main.gridManager && BX.Main.gridManager.getInstanceById(this.gridId);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstartWorkflow(event: PointerEvent, templateId: number, triggerType: ?string)\n\t{\n\t\tevent.preventDefault();\n\n\t\tconst id = Text.toNumber(templateId);\n\t\tif (id <= 0 || !this.#signedDocumentType || !this.#signedDocumentId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst afterSuccessStart = () => {\n\t\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\t\tif (slider)\n\t\t\t{\n\t\t\t\tslider.close();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.#counters.has(templateId))\n\t\t\t{\n\t\t\t\tthis.#counters.set(templateId, 0);\n\t\t\t}\n\t\t\tthis.#counters.set(templateId, this.#counters.get(templateId) + 1);\n\n\t\t\tthis.getGrid()?.reload();\n\t\t};\n\n\t\tStarter.singleStart({\n\t\t\tsignedDocumentId: this.#signedDocumentId,\n\t\t\tsignedDocumentType: this.#signedDocumentType,\n\t\t\ttemplateId: id,\n\t\t\ttriggerType,\n\t\t}, afterSuccessStart);\n\t}\n\n\t#onAfterGridUpdated()\n\t{\n\t\tif (this.getGrid())\n\t\t{\n\t\t\tBX.UI.Hint.init(this.getGrid().getContainer());\n\t\t\tBX.Bizproc.Component.WorkflowStartList.colorPinnedRows(this.getGrid());\n\t\t}\n\n\t\tthis.#counters.forEach((value, key) => {\n\t\t\tconst counter = document.querySelector(`[data-role=\"template-${key}-counter\"]`);\n\t\t\tif (Type.isElementNode(counter))\n\t\t\t{\n\t\t\t\tDom.clean(counter);\n\t\t\t\tDom.append(this.#renderStartedByMeNow(key), counter);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic colorPinnedRows(grid) {\n\t\tgrid.getRows().getRows().forEach((row) => {\n\t\t\tconst node = row.getNode();\n\t\t\tif (Type.isElementNode(node.querySelector('.main-grid-cell-content-action-pin.main-grid-cell-content-action-active')))\n\t\t\t{\n\t\t\t\tDom.addClass(node, 'bizproc-workflow-start-list-item-pinned');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(node, 'bizproc-workflow-start-list-item-pinned');\n\t\t\t}\n\t\t});\n\t}\n\n\t#renderStartedByMeNow(templateId: number): HTMLElement\n\t{\n\t\tlet message = Text.encode(Loc.getMessage(\n\t\t\t'BIZPROC_CMP_TMP_WORKKFLOW_START_LIST_START_COUNTER',\n\t\t\t{\n\t\t\t\t'#COUNTER#': this.#counters.get(templateId),\n\t\t\t},\n\t\t));\n\n\t\tmessage = message.replace('[bold]', '<span class=\"bizproc-workflow-start-list-column-start-counter\">');\n\t\tmessage = message.replace('[/bold]', '</span>');\n\n\t\treturn Tag.render`<div class=\"ui-typography-text-xs\">${message}</div>`;\n\t}\n\n\topenBizprocEditor(templateId, templateType)\n\t{\n\t\tif (templateType === WorkflowStartList.NEW_TEMPLATE_TYPE)\n\t\t{\n\t\t\ttop.window.location.href = this.#bizprocNewEditorUrl.replace('#ID#', templateId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop.window.location.href = this.#bizprocEditorUrl.replace('#ID#', templateId);\n\t\t}\n\t}\n}\n\nnamespace.WorkflowStartList = WorkflowStartList;\n"],"names":["namespace","Reflection","WorkflowStartList","options","Map","Type","isPlainObject","gridId","createTemplateButton","errorsContainerDiv","canEdit","bizprocEditorUrl","bizprocNewEditorUrl","isStringFilled","signedDocumentType","signedDocumentId","BX","UI","Hint","init","document","getGrid","Bizproc","Component","colorPinnedRows","EventEmitter","subscribe","bind","event","templateId","templateType","showNoPermissionsHint","target","length","showNoEditorHint","openBizprocEditor","node","text","hintTimeout","clearTimeout","popupHint","createInstance","popupParameters","width","height","closeByEsc","autoHide","angle","offset","Dom","getPosition","bindOptions","position","close","hide","show","timeout","setTimeout","hideHint","showAngleHint","Loc","getMessage","errors","style","margin","forEach","error","alert","Alert","message","color","AlertColor","DANGER","closeBtn","animated","renderTo","grid","reload","Main","gridManager","getInstanceById","triggerType","preventDefault","id","Text","toNumber","afterSuccessStart","slider","SidePanel","Instance","getSliderByWindow","window","has","set","get","Starter","singleStart","NEW_TEMPLATE_TYPE","top","location","href","replace","eventData","getData","button","hasClass","Grid","CellActionState","ACTIVE","action","removeClass","addClass","component","ajax","runComponentAction","mode","data","then","response","getRows","row","getNode","isElementNode","querySelector","getContainer","value","key","counter","clean","append","encode","Tag","render"],"mappings":"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"}