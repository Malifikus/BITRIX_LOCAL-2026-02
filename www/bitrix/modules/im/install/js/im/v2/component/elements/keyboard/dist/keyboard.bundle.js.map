{"version":3,"file":"keyboard.bundle.js","sources":["../src/components/keyboard-button.js","../src/components/keyboard-separator.js","../src/classes/action-manager.js","../src/classes/bot-service.js","../src/keyboard.js"],"sourcesContent":["import { Text } from 'main.core';\n\nimport { Logger } from 'im.v2.lib.logger';\nimport { KeyboardButtonDisplay, ColorToken } from 'im.v2.const';\nimport { Utils } from 'im.v2.lib.utils';\n\nimport type { JsonObject } from 'main.core';\nimport type { KeyboardButtonConfig } from 'im.v2.const';\n\ntype ButtonStyle = {\n\twidth?: string,\n\tbackgroundColor?: string\n};\n\n// @vue/component\nexport const KeyboardButton = {\n\tname: 'KeyboardButton',\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tkeyboardBlocked: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['action', 'customCommand', 'blockKeyboard'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tbutton(): KeyboardButtonConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\tcommonAttributes(): { class: string[], style: ButtonStyle }\n\t\t{\n\t\t\treturn {\n\t\t\t\tclass: ['bx-im-keyboard-button__container', this.buttonClasses],\n\t\t\t\tstyle: this.buttonStyles,\n\t\t\t};\n\t\t},\n\t\tbuttonClasses(): string[]\n\t\t{\n\t\t\tconst { bgColorToken = ColorToken.base, display, disabled, wait } = this.button;\n\t\t\tconst displayClass = display === KeyboardButtonDisplay.block ? '--block' : '--line';\n\t\t\tconst classes = [displayClass, bgColorToken];\n\t\t\tif (this.keyboardBlocked || disabled)\n\t\t\t{\n\t\t\t\tclasses.push('--disabled');\n\t\t\t}\n\n\t\t\tif (wait)\n\t\t\t{\n\t\t\t\tclasses.push('--loading');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\tbuttonStyles(): ButtonStyle\n\t\t{\n\t\t\tconst styles = {};\n\t\t\tconst { width } = this.button;\n\t\t\tif (width)\n\t\t\t{\n\t\t\t\tstyles.width = `${width}px`;\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t},\n\t\tpreparedLink(): string\n\t\t{\n\t\t\tif (!this.button.link)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Text.decode(this.button.link);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonClick(event: PointerEvent)\n\t\t{\n\t\t\tif (this.keyboardBlocked || this.button.disabled || this.button.wait)\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// proceed with native link handling\n\t\t\tif (this.button.link)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.button.action && this.button.actionValue)\n\t\t\t{\n\t\t\t\tthis.handleAction();\n\t\t\t}\n\t\t\telse if (this.button.appId)\n\t\t\t{\n\t\t\t\tLogger.warn('Messenger keyboard: open app is not implemented.');\n\t\t\t}\n\t\t\telse if (this.button.command)\n\t\t\t{\n\t\t\t\tthis.handleCustomCommand();\n\t\t\t}\n\t\t},\n\t\thandleAction()\n\t\t{\n\t\t\tthis.$emit('action', {\n\t\t\t\taction: this.button.action,\n\t\t\t\tpayload: this.button.actionValue,\n\t\t\t});\n\t\t},\n\t\thandleCustomCommand()\n\t\t{\n\t\t\tif (this.button.block)\n\t\t\t{\n\t\t\t\tthis.$emit('blockKeyboard');\n\t\t\t}\n\n\t\t\tthis.button.wait = true;\n\n\t\t\tthis.$emit('customCommand', {\n\t\t\t\tbotId: this.button.botId,\n\t\t\t\tcommand: this.button.command,\n\t\t\t\tpayload: this.button.commandParams,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<a\n\t\t\tv-if=\"button.link\"\n\t\t\t:href=\"preparedLink\"\n\t\t\ttarget=\"_blank\"\n\t\t\tv-bind=\"commonAttributes\"\n\t\t\t@click=\"onClick\"\n\t\t>\n\t\t\t{{ button.text }}\n\t\t</a>\n\t\t<div\n\t\t\tv-else\n\t\t\tv-bind=\"commonAttributes\"\n\t\t\t@click=\"onClick\"\n\t\t>\n\t\t\t{{ button.text }}\n\t\t</div>\n\t`,\n};\n","import type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const KeyboardSeparator = {\n\tname: 'KeyboardSeparator',\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-keyboard-button__separator\"></div>\n\t`,\n};\n","import { Messenger } from 'im.public';\nimport { EventType, KeyboardButtonAction } from 'im.v2.const';\nimport { SendingService } from 'im.v2.provider.service.sending';\nimport { PhoneManager } from 'im.v2.lib.phone';\nimport { Notifier } from 'im.v2.lib.notifier';\n\nimport type { EventEmitter } from 'main.core.events';\nimport type { ApplicationContext } from 'im.v2.const';\nimport type { ActionEvent } from '../types/events';\n\ntype ActionConfig = {\n\t[$Values<typeof KeyboardButtonAction>]: (payload: string) => void,\n};\n\nexport class ActionManager\n{\n\t#dialogId: string;\n\t#emitter: EventEmitter;\n\t#actionHandlers: ActionConfig = {\n\t\t[KeyboardButtonAction.send]: this.#sendMessage.bind(this),\n\t\t[KeyboardButtonAction.put]: this.#insertText.bind(this),\n\t\t[KeyboardButtonAction.call]: this.#startCall.bind(this),\n\t\t[KeyboardButtonAction.copy]: this.#copyText.bind(this),\n\t\t[KeyboardButtonAction.dialog]: this.#openChat.bind(this),\n\t};\n\n\tconstructor(payload: { dialogId: string, context: ApplicationContext })\n\t{\n\t\tconst { dialogId, context: { emitter } } = payload;\n\t\tthis.#dialogId = dialogId;\n\t\tthis.#emitter = emitter;\n\t}\n\n\thandleAction(event: ActionEvent): void\n\t{\n\t\tconst { action, payload } = event;\n\t\tif (!this.#actionHandlers[action])\n\t\t{\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error('Keyboard: action not found');\n\t\t}\n\n\t\tthis.#actionHandlers[action](payload);\n\t}\n\n\t#sendMessage(payload: string): void\n\t{\n\t\tSendingService.getInstance().sendMessage({\n\t\t\ttext: payload,\n\t\t\tdialogId: this.#dialogId,\n\t\t});\n\t}\n\n\t#insertText(payload: string): void\n\t{\n\t\tthis.#emitter.emit(EventType.textarea.insertText, {\n\t\t\ttext: payload,\n\t\t\tdialogId: this.#dialogId,\n\t\t});\n\t}\n\n\t#startCall(payload: string): void\n\t{\n\t\tvoid PhoneManager.getInstance().startCall(payload);\n\t}\n\n\t#copyText(payload: string): void\n\t{\n\t\tif (BX.clipboard?.copy(payload))\n\t\t{\n\t\t\tNotifier.onCopyTextComplete();\n\t\t}\n\t}\n\n\t#openChat(payload: string): void\n\t{\n\t\tvoid Messenger.openChat(payload);\n\t}\n}\n","import { Core } from 'im.v2.application.core';\nimport { RestMethod } from 'im.v2.const';\n\nimport type { CustomCommandEvent } from '../types/events';\n\nexport class BotService\n{\n\t#messageId: string | number;\n\t#dialogId: string;\n\n\tconstructor(params: { messageId: string | number, dialogId: string })\n\t{\n\t\tconst { messageId, dialogId } = params;\n\t\tthis.#messageId = messageId;\n\t\tthis.#dialogId = dialogId;\n\t}\n\n\tsendCommand(event: CustomCommandEvent): void\n\t{\n\t\tconst { botId, command, payload } = event;\n\n\t\tconst queryParams = {\n\t\t\tMESSAGE_ID: this.#messageId,\n\t\t\tDIALOG_ID: this.#dialogId,\n\t\t\tBOT_ID: botId,\n\t\t\tCOMMAND: command,\n\t\t\tCOMMAND_PARAMS: payload,\n\t\t};\n\n\t\tCore.getRestClient().callMethod(RestMethod.imMessageCommand, queryParams)\n\t\t\t.catch((result: RestResult) => {\n\t\t\t\tconsole.error('BotService: error sending command:', result.error());\n\t\t\t});\n\t}\n}\n","import { KeyboardButtonType, KeyboardButtonContext } from 'im.v2.const';\n\nimport { KeyboardButton } from './components/keyboard-button';\nimport { KeyboardSeparator } from './components/keyboard-separator';\n\nimport { ActionManager } from './classes/action-manager';\nimport { BotService } from './classes/bot-service';\n\nimport './keyboard.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { EventEmitter } from 'main.core.events';\nimport type { KeyboardButtonConfig } from 'im.v2.const';\nimport type { ActionEvent, CustomCommandEvent } from './types/events';\n\nexport const Keyboard = {\n\tprops:\n\t{\n\t\tbuttons: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: { KeyboardButton, KeyboardSeparator },\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tkeyboardBlocked: false,\n\t\t};\n\t},\n\temits: ['click'],\n\twatch:\n\t{\n\t\tbuttons()\n\t\t{\n\t\t\tthis.keyboardBlocked = false;\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tButtonType: () => KeyboardButtonType,\n\t\tpreparedButtons(): KeyboardButtonConfig[]\n\t\t{\n\t\t\treturn this.buttons.filter((button: KeyboardButtonConfig) => {\n\t\t\t\treturn button.context !== KeyboardButtonContext.mobile;\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonButtonActionClick(event: ActionEvent)\n\t\t{\n\t\t\tthis.getActionManager().handleAction(event);\n\t\t},\n\t\tonButtonCustomCommandClick(event: CustomCommandEvent)\n\t\t{\n\t\t\tthis.getBotService().sendCommand(event);\n\t\t},\n\t\tgetActionManager(): ActionManager\n\t\t{\n\t\t\tif (!this.actionManager)\n\t\t\t{\n\t\t\t\tthis.actionManager = new ActionManager({\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tcontext: { emitter: this.getEmitter() },\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.actionManager;\n\t\t},\n\t\tgetBotService(): BotService\n\t\t{\n\t\t\tif (!this.botService)\n\t\t\t{\n\t\t\t\tthis.botService = new BotService({\n\t\t\t\t\tmessageId: this.messageId,\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.botService;\n\t\t},\n\t\tgetEmitter(): EventEmitter\n\t\t{\n\t\t\treturn this.$Bitrix.eventEmitter;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-keyboard__container\">\n\t\t\t<template v-for=\"button in preparedButtons\">\n\t\t\t\t<KeyboardButton\n\t\t\t\t\tv-if=\"button.type === ButtonType.button\"\n\t\t\t\t\t:config=\"button\"\n\t\t\t\t\t:keyboardBlocked=\"keyboardBlocked\"\n\t\t\t\t\t@blockKeyboard=\"keyboardBlocked = true\"\n\t\t\t\t\t@action=\"onButtonActionClick\"\n\t\t\t\t\t@customCommand=\"onButtonCustomCommandClick\"\n\t\t\t\t/>\n\t\t\t\t<KeyboardSeparator v-else-if=\"button.type === ButtonType.newLine\" />\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n"],"names":["KeyboardButton","name","props","config","type","Object","required","keyboardBlocked","Boolean","emits","data","computed","button","commonAttributes","class","buttonClasses","style","buttonStyles","bgColorToken","ColorToken","base","display","disabled","wait","displayClass","KeyboardButtonDisplay","block","classes","push","styles","width","preparedLink","link","Text","decode","methods","onClick","event","preventDefault","action","actionValue","handleAction","appId","Logger","warn","command","handleCustomCommand","$emit","payload","botId","commandParams","template","KeyboardSeparator","ActionManager","constructor","KeyboardButtonAction","send","bind","put","call","copy","dialog","dialogId","context","emitter","console","error","SendingService","getInstance","sendMessage","text","emit","EventType","textarea","insertText","PhoneManager","startCall","BX","clipboard","Notifier","onCopyTextComplete","Messenger","openChat","BotService","params","messageId","sendCommand","queryParams","MESSAGE_ID","DIALOG_ID","BOT_ID","COMMAND","COMMAND_PARAMS","Core","getRestClient","callMethod","RestMethod","imMessageCommand","catch","result","Keyboard","buttons","Array","String","Number","components","watch","ButtonType","KeyboardButtonType","preparedButtons","filter","KeyboardButtonContext","mobile","onButtonActionClick","getActionManager","onButtonCustomCommandClick","getBotService","actionManager","getEmitter","botService","$Bitrix","eventEmitter"],"mappings":";;;;;;;;CAcA;AACA,CAAO,MAAMA,cAAc,GAAG;GAC7BC,IAAI,EAAE,gBAAgB;GACtBC,KAAK,EACL;KACCC,MAAM,EAAE;OACPC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,eAAe,EAAE;OAChBH,IAAI,EAAEI,OAAO;OACbF,QAAQ,EAAE;;IAEX;GACDG,KAAK,EAAE,CAAC,QAAQ,EAAE,eAAe,EAAE,eAAe,CAAC;GACnDC,IAAI,GACJ;KACC,OAAO,EAAE;IACT;GACDC,QAAQ,EACR;KACCC,MAAM,GACN;OACC,OAAO,IAAI,CAACT,MAAM;MAClB;KACDU,gBAAgB,GAChB;OACC,OAAO;SACNC,KAAK,EAAE,CAAC,kCAAkC,EAAE,IAAI,CAACC,aAAa,CAAC;SAC/DC,KAAK,EAAE,IAAI,CAACC;QACZ;MACD;KACDF,aAAa,GACb;OACC,MAAM;SAAEG,YAAY,GAAGC,sBAAU,CAACC,IAAI;SAAEC,OAAO;SAAEC,QAAQ;SAAEC;QAAM,GAAG,IAAI,CAACX,MAAM;OAC/E,MAAMY,YAAY,GAAGH,OAAO,KAAKI,iCAAqB,CAACC,KAAK,GAAG,SAAS,GAAG,QAAQ;OACnF,MAAMC,OAAO,GAAG,CAACH,YAAY,EAAEN,YAAY,CAAC;OAC5C,IAAI,IAAI,CAACX,eAAe,IAAIe,QAAQ,EACpC;SACCK,OAAO,CAACC,IAAI,CAAC,YAAY,CAAC;;OAG3B,IAAIL,IAAI,EACR;SACCI,OAAO,CAACC,IAAI,CAAC,WAAW,CAAC;;OAG1B,OAAOD,OAAO;MACd;KACDV,YAAY,GACZ;OACC,MAAMY,MAAM,GAAG,EAAE;OACjB,MAAM;SAAEC;QAAO,GAAG,IAAI,CAAClB,MAAM;OAC7B,IAAIkB,KAAK,EACT;SACCD,MAAM,CAACC,KAAK,GAAI,GAAEA,KAAM,IAAG;;OAG5B,OAAOD,MAAM;MACb;KACDE,YAAY,GACZ;OACC,IAAI,CAAC,IAAI,CAACnB,MAAM,CAACoB,IAAI,EACrB;SACC,OAAO,EAAE;;OAGV,OAAOC,cAAI,CAACC,MAAM,CAAC,IAAI,CAACtB,MAAM,CAACoB,IAAI,CAAC;;IAErC;GACDG,OAAO,EACP;KACCC,OAAO,CAACC,KAAmB,EAC3B;OACC,IAAI,IAAI,CAAC9B,eAAe,IAAI,IAAI,CAACK,MAAM,CAACU,QAAQ,IAAI,IAAI,CAACV,MAAM,CAACW,IAAI,EACpE;SACCc,KAAK,CAACC,cAAc,EAAE;SAEtB;;;;OAID,IAAI,IAAI,CAAC1B,MAAM,CAACoB,IAAI,EACpB;SACC;;OAGD,IAAI,IAAI,CAACpB,MAAM,CAAC2B,MAAM,IAAI,IAAI,CAAC3B,MAAM,CAAC4B,WAAW,EACjD;SACC,IAAI,CAACC,YAAY,EAAE;QACnB,MACI,IAAI,IAAI,CAAC7B,MAAM,CAAC8B,KAAK,EAC1B;SACCC,uBAAM,CAACC,IAAI,CAAC,kDAAkD,CAAC;QAC/D,MACI,IAAI,IAAI,CAAChC,MAAM,CAACiC,OAAO,EAC5B;SACC,IAAI,CAACC,mBAAmB,EAAE;;MAE3B;KACDL,YAAY,GACZ;OACC,IAAI,CAACM,KAAK,CAAC,QAAQ,EAAE;SACpBR,MAAM,EAAE,IAAI,CAAC3B,MAAM,CAAC2B,MAAM;SAC1BS,OAAO,EAAE,IAAI,CAACpC,MAAM,CAAC4B;QACrB,CAAC;MACF;KACDM,mBAAmB,GACnB;OACC,IAAI,IAAI,CAAClC,MAAM,CAACc,KAAK,EACrB;SACC,IAAI,CAACqB,KAAK,CAAC,eAAe,CAAC;;OAG5B,IAAI,CAACnC,MAAM,CAACW,IAAI,GAAG,IAAI;OAEvB,IAAI,CAACwB,KAAK,CAAC,eAAe,EAAE;SAC3BE,KAAK,EAAE,IAAI,CAACrC,MAAM,CAACqC,KAAK;SACxBJ,OAAO,EAAE,IAAI,CAACjC,MAAM,CAACiC,OAAO;SAC5BG,OAAO,EAAE,IAAI,CAACpC,MAAM,CAACsC;QACrB,CAAC;;IAEH;GACDC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;CAkBZ,CAAC;;CCzJD;AACA,CAAO,MAAMC,iBAAiB,GAAG;GAChCnD,IAAI,EAAE,mBAAmB;GACzBS,IAAI,GACJ;KACC,OAAO,EAAE;IACT;GACDyC,QAAQ,EAAG;;;CAGZ,CAAC;;CCR6C;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAU9C,CAAO,MAAME,aAAa,CAC1B;GAWCC,WAAW,CAACN,QAA0D,EACtE;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OATgC;SAC/B,CAACO,gCAAoB,CAACC,IAAI,GAAG,4CAAI,8BAAcC,IAAI,CAAC,IAAI,CAAC;SACzD,CAACF,gCAAoB,CAACG,GAAG,GAAG,4CAAI,4BAAaD,IAAI,CAAC,IAAI,CAAC;SACvD,CAACF,gCAAoB,CAACI,IAAI,GAAG,4CAAI,0BAAYF,IAAI,CAAC,IAAI,CAAC;SACvD,CAACF,gCAAoB,CAACK,IAAI,GAAG,4CAAI,wBAAWH,IAAI,CAAC,IAAI,CAAC;SACtD,CAACF,gCAAoB,CAACM,MAAM,GAAG,4CAAI,wBAAWJ,IAAI,CAAC,IAAI;;;KAKvD,MAAM;OAAEK,QAAQ;OAAEC,OAAO,EAAE;SAAEC;;MAAW,GAAGhB,QAAO;KAClD,4CAAI,0BAAac,QAAQ;KACzB,4CAAI,wBAAYE,OAAO;;GAGxBvB,YAAY,CAACJ,KAAkB,EAC/B;KACC,MAAM;OAAEE,MAAM;OAAES;MAAS,GAAGX,KAAK;KACjC,IAAI,CAAC,4CAAI,oCAAiBE,MAAM,CAAC,EACjC;;OAEC0B,OAAO,CAACC,KAAK,CAAC,4BAA4B,CAAC;;KAG5C,4CAAI,oCAAiB3B,MAAM,CAAC,CAACS,OAAO,CAAC;;CAoCvC;CAAC,uBAjCaA,OAAe,EAC5B;GACCmB,6CAAc,CAACC,WAAW,EAAE,CAACC,WAAW,CAAC;KACxCC,IAAI,EAAEtB,OAAO;KACbc,QAAQ,0CAAE,IAAI;IACd,CAAC;CACH;CAAC,sBAEWd,OAAe,EAC3B;GACC,4CAAI,sBAAUuB,IAAI,CAACC,qBAAS,CAACC,QAAQ,CAACC,UAAU,EAAE;KACjDJ,IAAI,EAAEtB,OAAO;KACbc,QAAQ,0CAAE,IAAI;IACd,CAAC;CACH;CAAC,qBAEUd,OAAe,EAC1B;GACC,KAAK2B,4BAAY,CAACP,WAAW,EAAE,CAACQ,SAAS,CAAC5B,OAAO,CAAC;CACnD;CAAC,oBAESA,OAAe,EACzB;GAAA;GACC,qBAAI6B,EAAE,CAACC,SAAS,aAAZ,cAAclB,IAAI,CAACZ,OAAO,CAAC,EAC/B;KACC+B,2BAAQ,CAACC,kBAAkB,EAAE;;CAE/B;CAAC,oBAEShC,OAAe,EACzB;GACC,KAAKiC,mBAAS,CAACC,QAAQ,CAAClC,OAAO,CAAC;CACjC;;CC5EwC;CAAA;AAIzC,CAAO,MAAMmC,UAAU,CACvB;GAIC7B,WAAW,CAAC8B,MAAwD,EACpE;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,MAAM;OAAEC,SAAS;OAAEvB;MAAU,GAAGsB,MAAM;KACtC,4CAAI,4BAAcC,SAAS;KAC3B,4CAAI,8BAAavB,QAAQ;;GAG1BwB,WAAW,CAACjD,KAAyB,EACrC;KACC,MAAM;OAAEY,KAAK;OAAEJ,OAAO;OAAEG;MAAS,GAAGX,KAAK;KAEzC,MAAMkD,WAAW,GAAG;OACnBC,UAAU,0CAAE,IAAI,yBAAW;OAC3BC,SAAS,0CAAE,IAAI,2BAAU;OACzBC,MAAM,EAAEzC,KAAK;OACb0C,OAAO,EAAE9C,OAAO;OAChB+C,cAAc,EAAE5C;MAChB;KAED6C,2BAAI,CAACC,aAAa,EAAE,CAACC,UAAU,CAACC,sBAAU,CAACC,gBAAgB,EAAEV,WAAW,CAAC,CACvEW,KAAK,CAAEC,MAAkB,IAAK;OAC9BlC,OAAO,CAACC,KAAK,CAAC,oCAAoC,EAAEiC,MAAM,CAACjC,KAAK,EAAE,CAAC;MACnE,CAAC;;CAEL;;OCnBakC,QAAQ,GAAG;GACvBlG,KAAK,EACL;KACCmG,OAAO,EAAE;OACRjG,IAAI,EAAEkG,KAAK;OACXhG,QAAQ,EAAE;MACV;KACDwD,QAAQ,EAAE;OACT1D,IAAI,EAAEmG,MAAM;OACZjG,QAAQ,EAAE;MACV;KACD+E,SAAS,EAAE;OACVjF,IAAI,EAAE,CAACoG,MAAM,EAAED,MAAM,CAAC;OACtBjG,QAAQ,EAAE;;IAEX;GACDmG,UAAU,EAAE;KAAEzG,cAAc;KAAEoD;IAAmB;GACjD1C,IAAI,GACJ;KACC,OAAO;OACNH,eAAe,EAAE;MACjB;IACD;GACDE,KAAK,EAAE,CAAC,OAAO,CAAC;GAChBiG,KAAK,EACL;KACCL,OAAO,GACP;OACC,IAAI,CAAC9F,eAAe,GAAG,KAAK;;IAE7B;GACDI,QAAQ,EACR;KACCgG,UAAU,EAAE,MAAMC,8BAAkB;KACpCC,eAAe,GACf;OACC,OAAO,IAAI,CAACR,OAAO,CAACS,MAAM,CAAElG,MAA4B,IAAK;SAC5D,OAAOA,MAAM,CAACmD,OAAO,KAAKgD,iCAAqB,CAACC,MAAM;QACtD,CAAC;;IAEH;GACD7E,OAAO,EACP;KACC8E,mBAAmB,CAAC5E,KAAkB,EACtC;OACC,IAAI,CAAC6E,gBAAgB,EAAE,CAACzE,YAAY,CAACJ,KAAK,CAAC;MAC3C;KACD8E,0BAA0B,CAAC9E,KAAyB,EACpD;OACC,IAAI,CAAC+E,aAAa,EAAE,CAAC9B,WAAW,CAACjD,KAAK,CAAC;MACvC;KACD6E,gBAAgB,GAChB;OACC,IAAI,CAAC,IAAI,CAACG,aAAa,EACvB;SACC,IAAI,CAACA,aAAa,GAAG,IAAIhE,aAAa,CAAC;WACtCS,QAAQ,EAAE,IAAI,CAACA,QAAQ;WACvBC,OAAO,EAAE;aAAEC,OAAO,EAAE,IAAI,CAACsD,UAAU;;UACnC,CAAC;;OAGH,OAAO,IAAI,CAACD,aAAa;MACzB;KACDD,aAAa,GACb;OACC,IAAI,CAAC,IAAI,CAACG,UAAU,EACpB;SACC,IAAI,CAACA,UAAU,GAAG,IAAIpC,UAAU,CAAC;WAChCE,SAAS,EAAE,IAAI,CAACA,SAAS;WACzBvB,QAAQ,EAAE,IAAI,CAACA;UACf,CAAC;;OAGH,OAAO,IAAI,CAACyD,UAAU;MACtB;KACDD,UAAU,GACV;OACC,OAAO,IAAI,CAACE,OAAO,CAACC,YAAY;;IAEjC;GACDtE,QAAQ,EAAG;;;;;;;;;;;;;;;CAeZ,CAAC;;;;;;;;"}