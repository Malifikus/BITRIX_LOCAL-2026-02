{"version":3,"file":"chat-content.bundle.js","sources":["../src/components/content/channel/components/comments-button.js","../src/components/content/channel/components/dialog.js","../src/components/content/channel/components/join-panel.js","../src/components/content/channel/components/textarea.js","../src/components/content/channel/channel.js","../src/components/content/collab/components/collab-title.js","../src/components/content/collab/classes/tooltip-content/icon-key.js","../src/components/content/collab/classes/tooltip-content/tooltip-content.js","../src/components/content/collab/components/entities-panel/components/entity-counter.js","../src/components/content/collab/components/entities-panel/components/entity-link.js","../src/components/content/collab/components/entities-panel/entities-panel.js","../src/components/content/collab/components/add-to-chat-button.js","../src/components/content/collab/components/header.js","../src/components/content/collab/collab.js","../src/components/content/multidialog/components/title.js","../src/components/content/multidialog/components/header.js","../src/components/content/multidialog/multidialog.js","../src/components/content/notes/notes-content.js","../src/components/content/copilot/components/add-to-chat/add-to-chat-hint.js","../src/components/content/copilot/components/add-to-chat/add-to-chat-button.js","../src/components/content/copilot/components/header.js","../src/components/content/copilot/components/reasoning-button.js","../src/components/content/copilot/components/textarea.js","../src/components/content/copilot/copilot.js","../src/components/content/ai-assistant-bot/components/mcp-integration.js","../src/components/content/ai-assistant-bot/classes/service-health.js","../src/components/content/ai-assistant-bot/components/service-health-panel.js","../src/components/content/ai-assistant-bot/ai-assistant-bot.js","../src/components/content/task-comments/task-comments.js","../src/components/openers/chat/components/empty-state/base/components/feature-block.js","../src/components/openers/chat/components/empty-state/base/base.js","../src/components/openers/chat/components/empty-state/channel.js","../src/components/openers/chat/components/empty-state/chat/embedded-promo.js","../src/components/openers/chat/components/empty-state/chat/embedded.js","../src/components/openers/chat/components/empty-state/collab.js","../src/components/openers/chat/components/empty-state/copilot/copilot.js","../src/components/openers/chat/components/empty-state/task.js","../src/components/openers/chat/classes/user-service.js","../src/components/openers/chat/chat.js","../src/components/content/comments/components/subscribe-toggle.js","../src/components/content/comments/components/header.js","../src/components/content/comments/components/dialog-loader.js","../src/components/content/comments/components/message-list.js","../src/components/content/comments/components/dialog.js","../src/components/content/comments/components/textarea.js","../src/components/content/comments/components/join-panel.js","../src/components/content/comments/comments.js","../src/components/openers/comments/comments.js","../src/chat-content.js"],"sourcesContent":["import { FloatButton, FloatButtonIcon, FloatButtonColor } from 'im.v2.component.dialog.chat';\n\n// @vue/component\nexport const CommentsButton = {\n\tname: 'CommentsButton',\n\tcomponents: {\n\t\tFloatButton,\n\t},\n\tprops:\n\t{\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tfloatButtonProps(): { icon: string, color: string, counter: number }\n\t\t{\n\t\t\treturn {\n\t\t\t\ticon: FloatButtonIcon.comment,\n\t\t\t\tcolor: FloatButtonColor.success,\n\t\t\t\tcounter: this.counter,\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<FloatButton v-bind=\"floatButtonProps\" />\n\t`,\n};\n","import { ChatDialog, ScrollManager } from 'im.v2.component.dialog.chat';\nimport { Layout, UserRole } from 'im.v2.const';\nimport { CommentsService } from 'im.v2.provider.service.comments';\n\nimport { CommentsButton } from './comments-button';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelChat, ImModelLayout } from 'im.v2.model';\n\n// @vue/component\nexport const ChannelDialog = {\n\tname: 'ChannelDialog',\n\tcomponents: { ChatDialog, CommentsButton },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tlastScrolledChatId: 0,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tlayout(): ImModelLayout\n\t\t{\n\t\t\treturn this.$store.getters['application/getLayout'];\n\t\t},\n\t\tisGuest(): boolean\n\t\t{\n\t\t\treturn this.dialog.role === UserRole.guest;\n\t\t},\n\t\tisChatLayout(): boolean\n\t\t{\n\t\t\treturn this.layout.name === Layout.chat;\n\t\t},\n\t\tchannelComments(): number[]\n\t\t{\n\t\t\treturn this.$store.getters['counters/getChannelComments'](this.dialog.chatId);\n\t\t},\n\t\ttotalChannelCommentsCounter(): number\n\t\t{\n\t\t\tlet counter = 0;\n\t\t\tObject.values(this.channelComments).forEach((commentCounter) => {\n\t\t\t\tcounter += commentCounter;\n\t\t\t});\n\n\t\t\treturn counter;\n\t\t},\n\t\tshowCommentsButton(): boolean\n\t\t{\n\t\t\treturn this.isChatLayout && this.totalChannelCommentsCounter > 0;\n\t\t},\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.readAllChannelComments();\n\t},\n\tmethods:\n\t{\n\t\tasync onCommentsButtonClick()\n\t\t{\n\t\t\tconst chatIdToJump = this.getNextChatIdToJump();\n\t\t\tthis.lastScrolledChatId = chatIdToJump;\n\n\t\t\tconst messageIdToJump: ?number = this.$store.getters['messages/comments/getMessageIdByChatId'](chatIdToJump);\n\n\t\t\tif (messageIdToJump)\n\t\t\t{\n\t\t\t\tthis.$refs.dialog.goToMessageContext(messageIdToJump, {\n\t\t\t\t\tposition: ScrollManager.scrollPosition.messageBottom,\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait this.goToMessageContextByCommentsChatId(chatIdToJump);\n\t\t},\n\t\tasync goToMessageContextByCommentsChatId(chatId: string)\n\t\t{\n\t\t\tthis.$refs.dialog.showLoadingBar();\n\t\t\tconst messageId = await this.$refs.dialog.getMessageService().loadContextByChatId(chatId);\n\t\t\tthis.$refs.dialog.hideLoadingBar();\n\n\t\t\tif (!messageId)\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error('ChannelDialog: no messageId after loading context');\n\t\t\t}\n\n\t\t\tawait this.$nextTick();\n\t\t\tthis.$refs.dialog.getScrollManager().scrollToMessage(messageId, {\n\t\t\t\tposition: ScrollManager.scrollPosition.messageBottom,\n\t\t\t});\n\t\t\tawait this.$nextTick();\n\t\t\tthis.$refs.dialog.highlightMessage(messageId);\n\t\t},\n\t\tgetNextChatIdToJump(): number\n\t\t{\n\t\t\tconst commentChatIds = this.getCommentsChatIds();\n\t\t\tcommentChatIds.sort((a, z) => a - z);\n\t\t\tif (this.lastScrolledChatId === 0)\n\t\t\t{\n\t\t\t\treturn commentChatIds[0];\n\t\t\t}\n\n\t\t\tconst filteredChatIds = commentChatIds.filter((chatId) => chatId > this.lastScrolledChatId);\n\t\t\tif (filteredChatIds.length === 0)\n\t\t\t{\n\t\t\t\treturn commentChatIds[0];\n\t\t\t}\n\n\t\t\treturn filteredChatIds[0];\n\t\t},\n\t\tgetCommentsChatIds(): number[]\n\t\t{\n\t\t\treturn Object.keys(this.channelComments).map((chatId) => {\n\t\t\t\treturn Number(chatId);\n\t\t\t});\n\t\t},\n\t\treadAllChannelComments()\n\t\t{\n\t\t\tvoid CommentsService.readAllChannelComments(this.dialogId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatDialog ref=\"dialog\" :dialogId=\"dialogId\" :clearOnExit=\"isGuest\">\n\t\t\t<template #additional-float-button>\n\t\t\t\t<CommentsButton\n\t\t\t\t\tv-if=\"showCommentsButton\"\n\t\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t\t:counter=\"totalChannelCommentsCounter\"\n\t\t\t\t\t@click=\"onCommentsButtonClick\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</ChatDialog>\n\t`,\n};\n","import { ChatButton, ButtonColor, ButtonSize } from 'im.v2.component.elements.button';\nimport { ChatService } from 'im.v2.provider.service.chat';\n\n// @vue/component\nexport const JoinPanel = {\n\tcomponents: { ChatButton },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t},\n\tmethods:\n\t{\n\t\tonButtonClick()\n\t\t{\n\t\t\tthis.getChatService().joinChat(this.dialogId);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat__textarea_placeholder\">\n\t\t\t<ChatButton\n\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t:color=\"ButtonColor.Primary\"\n\t\t\t\t:text=\"loc('IM_CONTENT_BLOCKED_TEXTAREA_JOIN_CHANNEL_V2')\"\n\t\t\t\t:isRounded=\"true\"\n\t\t\t\t@click=\"onButtonClick\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { ChatTextarea } from 'im.v2.component.textarea';\n\n// @vue/component\nexport const ChannelTextarea = {\n\tname: 'ChannelTextarea',\n\tcomponents: { ChatTextarea },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatTextarea\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:placeholder=\"this.loc('IM_CONTENT_CHANNEL_TEXTAREA_PLACEHOLDER')\"\n\t\t\t:withMarket=\"false\"\n\t\t\tclass=\"bx-im-channel-send-panel__container\"\n\t\t/>\n\t`,\n};\n","import { BaseChatContent } from 'im.v2.component.content.elements';\n\nimport { ChannelDialog } from './components/dialog';\nimport { JoinPanel } from './components/join-panel';\nimport { ChannelTextarea } from './components/textarea';\n\nexport const ChannelContent = {\n\tname: 'ChannelContent',\n\tcomponents: { BaseChatContent, ChannelDialog, ChannelTextarea, JoinPanel },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseChatContent :dialogId=\"dialogId\">\n\t\t\t<template #dialog>\n\t\t\t\t<ChannelDialog :dialogId=\"dialogId\" :key=\"dialogId\" />\n\t\t\t</template>\n\t\t\t<template #join-panel>\n\t\t\t\t<JoinPanel :dialogId=\"dialogId\" />\n\t\t\t</template>\n\t\t\t<template #textarea=\"{ onTextareaMount }\">\n\t\t\t\t<ChannelTextarea :dialogId=\"dialogId\" :key=\"dialogId\" @mounted=\"onTextareaMount\" />\n\t\t\t</template>\n\t\t</BaseChatContent>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nimport { EventType, SidebarDetailBlock } from 'im.v2.const';\nimport { LineLoader } from 'im.v2.component.elements.loader';\nimport { ChatTitle } from 'im.v2.component.elements.chat-title';\nimport { FadeAnimation } from 'im.v2.component.animation';\n\nimport '../css/collab-title.css';\n\nimport type { EventEmitter } from 'main.core.events';\nimport type { ImModelChat, ImModelCollabInfo } from 'im.v2.model';\n\n// @vue/component\nexport const CollabTitle = {\n\tname: 'CollabTitle',\n\tcomponents: { ChatTitle, LineLoader, FadeAnimation },\n\tinject: ['currentSidebarPanel'],\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tcollabInfo(): ImModelCollabInfo\n\t\t{\n\t\t\treturn this.$store.getters['chats/collabs/getByChatId'](this.dialog.chatId);\n\t\t},\n\t\tguestCounter(): number\n\t\t{\n\t\t\treturn this.collabInfo.guestCount;\n\t\t},\n\t\tuserCounterText(): string\n\t\t{\n\t\t\treturn Loc.getMessagePlural('IM_CONTENT_CHAT_HEADER_USER_COUNT', this.dialog.userCounter, {\n\t\t\t\t'#COUNT#': this.dialog.userCounter,\n\t\t\t});\n\t\t},\n\t\tguestCounterText(): string\n\t\t{\n\t\t\treturn Loc.getMessagePlural('IM_CONTENT_COLLAB_HEADER_GUEST_COUNT', this.guestCounter, {\n\t\t\t\t'#COUNT#': this.guestCounter,\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonMembersClick()\n\t\t{\n\t\t\tif (this.currentSidebarPanel === SidebarDetailBlock.members)\n\t\t\t{\n\t\t\t\tthis.getEmitter().emit(EventType.sidebar.close, { panel: SidebarDetailBlock.members });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.getEmitter().emit(EventType.sidebar.open, {\n\t\t\t\tpanel: SidebarDetailBlock.members,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\tgetEmitter(): EventEmitter\n\t\t{\n\t\t\treturn this.$Bitrix.eventEmitter;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-collab-header-title__container\">\n\t\t\t<div class=\"bx-im-collab-header-title__title-container --ellipsis\">\n\t\t\t\t<ChatTitle :dialogId=\"dialogId\" :withAutoDelete=\"true\" />\n\t\t\t</div>\n\t\t\t<LineLoader v-if=\"!dialog.inited\" :width=\"50\" :height=\"16\" />\n\t\t\t<FadeAnimation :duration=\"100\">\n\t\t\t\t<div v-if=\"dialog.inited\" class=\"bx-im-collab-header-title__subtitle_container\">\n\t\t\t\t\t<div @click=\"onMembersClick\" class=\"bx-im-collab-header-title__subtitle_content --ellipsis\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t:title=\"loc('IM_CONTENT_CHAT_HEADER_OPEN_MEMBERS')\"\n\t\t\t\t\t\t\tclass=\"bx-im-collab-header-title__user-counter\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ userCounterText }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span v-if=\"guestCounter > 0\" class=\"bx-im-collab-header-title__guest-counter\">\n\t\t\t\t\t\t\t{{ guestCounterText }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</FadeAnimation>\n\t\t</div>\n\t`,\n};\n","export const IconKey = Object.freeze({\n\taddToChat: 'add-to-chat',\n\tcollabEntities: 'collab-entities',\n});\n","import { Tag } from 'main.core';\n\nimport { IconKey } from './icon-key';\n\nimport './css/tooltip-content.css';\n\ntype CollabTooltipParams = {\n\ttitle: string,\n\ttext: string,\n\ticonKey: $Values<typeof IconKey>,\n}\n\nexport class CollabTooltipContent\n{\n\t#title: string;\n\t#text: string;\n\t#iconKey: $Values<typeof IconKey>;\n\n\tconstructor(params: CollabTooltipParams)\n\t{\n\t\tthis.#title = params.title;\n\t\tthis.#text = params.text;\n\t\tthis.#iconKey = params.iconKey;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"bx-im-collab-tooltip__scope bx-im-collab-tooltip__container\">\n\t\t\t\t<div class=\"bx-im-collab-tooltip__icon --${this.#iconKey}\"></div>\n\t\t\t\t<div class=\"bx-im-collab-tooltip__title-container\">\n\t\t\t\t\t<div class=\"bx-im-collab-tooltip__title\">\n\t\t\t\t\t\t${this.#title}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-im-collab-tooltip__text\">\n\t\t\t\t\t\t${this.#text}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","// @vue/component\nexport const EntityCounter = {\n\tname: 'EntityCounter',\n\tprops:\n\t{\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tpreparedCounter(): string\n\t\t{\n\t\t\treturn this.counter > 99 ? '99+' : this.counter.toString();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span class=\"bx-im-collab-header__link-counter\">\n\t\t\t{{ preparedCounter }}\n\t\t</span>\n\t`,\n};\n","import { Type } from 'main.core';\n\nimport { Analytics } from 'im.v2.lib.analytics';\n\nimport { EntityCounter } from './entity-counter';\n\nexport const EntityType = {\n\ttasks: 'tasks',\n\tfiles: 'files',\n\tcalendar: 'calendar',\n};\n\n// @vue/component\nexport const EntityLink = {\n\tname: 'EntityLink',\n\tcomponents: { EntityCounter },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcompactMode: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcounter: {\n\t\t\ttype: [Number, null],\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tshowCounter(): boolean\n\t\t{\n\t\t\treturn !Type.isNull(this.counter) && this.counter > 0;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonLinkClick()\n\t\t{\n\t\t\tAnalytics.getInstance().collabEntities.onClick(this.dialogId, this.type);\n\n\t\t\tBX.SidePanel.Instance.open(this.url, {\n\t\t\t\tcacheable: false,\n\t\t\t\tcustomLeftBoundary: 0,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<a :href=\"url\" @click.prevent=\"onLinkClick\" class=\"bx-im-collab-header__link\" :class=\"'--' + type\">\n\t\t\t<span v-if=\"compactMode\" class=\"bx-im-collab-header__link-icon\"></span>\n\t\t\t<span v-else class=\"bx-im-collab-header__link-text\">{{ title }}</span>\n\t\t\t<EntityCounter v-if=\"showCounter\" :counter=\"counter\" />\n\t\t</a>\n\t`,\n};\n","import { CloseIconSize } from 'main.popup';\nimport { Tooltip } from 'ui.dialogs.tooltip';\nimport { CollabEntityType, PromoId } from 'im.v2.const';\nimport { PromoManager } from 'im.v2.lib.promo';\n\nimport { CollabTooltipContent } from '../../classes/tooltip-content/tooltip-content';\nimport { IconKey } from '../../classes/tooltip-content/icon-key';\nimport { EntityLink } from './components/entity-link';\n\nimport './css/entities-panel.css';\n\nimport type { ImModelChat, ImModelCollabInfo } from 'im.v2.model';\nimport type { PromoParams } from 'im.v2.provider.pull';\n\n// @vue/component\nexport const EntitiesPanel = {\n\tname: 'EntitiesPanel',\n\tcomponents: { EntityLink },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tcompactMode: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\thighlightMode: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tCollabEntityType: () => CollabEntityType,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tcollabInfo(): ImModelCollabInfo\n\t\t{\n\t\t\treturn this.$store.getters['chats/collabs/getByChatId'](this.dialog.chatId);\n\t\t},\n\t\ttasksInfo(): { url: string, counter: number }\n\t\t{\n\t\t\treturn this.collabInfo.entities.tasks;\n\t\t},\n\t\ttasksUrl(): string\n\t\t{\n\t\t\treturn this.tasksInfo.url;\n\t\t},\n\t\ttasksCounter(): number\n\t\t{\n\t\t\treturn this.tasksInfo.counter;\n\t\t},\n\t\tfilesInfo(): { url: string, counter: number }\n\t\t{\n\t\t\treturn this.collabInfo.entities.files;\n\t\t},\n\t\tfilesUrl(): string\n\t\t{\n\t\t\treturn this.filesInfo.url;\n\t\t},\n\t\tcalendarInfo(): { url: string, counter: number }\n\t\t{\n\t\t\treturn this.collabInfo.entities.calendar;\n\t\t},\n\t\tcalendarUrl(): string\n\t\t{\n\t\t\treturn this.calendarInfo.url;\n\t\t},\n\t\tcalendarCounter(): number\n\t\t{\n\t\t\treturn this.calendarInfo.counter;\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.initPromo();\n\t},\n\tmethods:\n\t{\n\t\tinitPromo(): void\n\t\t{\n\t\t\tconst promoManager = PromoManager.getInstance();\n\n\t\t\tconst promoId = PromoId.collabEntities;\n\t\t\tconst promoParams = { chatId: this.dialog.chatId };\n\n\t\t\tif (promoManager.needToShow(promoId, promoParams))\n\t\t\t{\n\t\t\t\tvoid this.showCollabEntitiesPromo(promoId, promoParams);\n\t\t\t}\n\t\t},\n\t\tasync showCollabEntitiesPromo(promoId: $Values<typeof PromoId>, promoParams: PromoParams): Promise<void>\n\t\t{\n\t\t\tconst tooltip = new Tooltip({\n\t\t\t\tbindElement: this.$refs['collab-entities'],\n\t\t\t\tcontent: this.renderTooltipContent(),\n\t\t\t\tminWidth: 410,\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetTop: 11,\n\t\t\t\t\toffsetLeft: 38,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\tcloseIconSize: CloseIconSize.LARGE,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\t\tthis.highlightMode = true;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\t\tthis.highlightMode = false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\ttooltip.show();\n\t\t\tvoid PromoManager.getInstance().markAsWatched(promoId, promoParams);\n\t\t},\n\t\trenderTooltipContent(): HTMLElement\n\t\t{\n\t\t\tconst tooltipContent = new CollabTooltipContent({\n\t\t\t\ttitle: this.loc('IM_CONTENT_COLLAB_ONBOARDING_ENTITIES_TITLE'),\n\t\t\t\ttext: this.loc('IM_CONTENT_COLLAB_ONBOARDING_ENTITIES_TEXT'),\n\t\t\t\ticonKey: IconKey.collabEntities,\n\t\t\t});\n\n\t\t\treturn tooltipContent.render();\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"bx-im-collab-header__links-container\"\n\t\t\t:class=\"{'--compact': compactMode, '--highlight': highlightMode}\"\n\t\t\tref=\"collab-entities\"\n\t\t>\n\t\t\t<EntityLink\n\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t:compactMode=\"compactMode\"\n\t\t\t\t:url=\"tasksUrl\"\n\t\t\t\t:type=\"CollabEntityType.tasks\"\n\t\t\t\t:title=\"loc('IM_CONTENT_COLLAB_HEADER_LINK_TASKS')\"\n\t\t\t\t:counter=\"tasksCounter\"\n\t\t\t/>\n\t\t\t<EntityLink\n\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t:compactMode=\"compactMode\"\n\t\t\t\t:url=\"filesUrl\"\n\t\t\t\t:type=\"CollabEntityType.files\"\n\t\t\t\t:title=\"loc('IM_CONTENT_COLLAB_HEADER_LINK_FILES')\"\n\t\t\t/>\n\t\t\t<EntityLink\n\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t:compactMode=\"compactMode\"\n\t\t\t\t:url=\"calendarUrl\"\n\t\t\t\t:type=\"CollabEntityType.calendar\"\n\t\t\t\t:title=\"loc('IM_CONTENT_COLLAB_HEADER_LINK_CALENDAR')\"\n\t\t\t\t:counter=\"calendarCounter\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { CloseIconSize } from 'main.popup';\nimport { Tooltip } from 'ui.dialogs.tooltip';\nimport { AddToCollab } from 'im.v2.component.entity-selector';\nimport { PromoId } from 'im.v2.const';\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { PromoManager } from 'im.v2.lib.promo';\n\nimport { CollabTooltipContent } from '../classes/tooltip-content/tooltip-content';\nimport { IconKey } from '../classes/tooltip-content/icon-key';\n\nimport type { ImModelChat } from 'im.v2.model';\nimport type { PromoParams } from 'im.v2.provider.pull';\nimport type { JsonObject } from 'main.core';\n\nconst PromoMessages = {\n\t[PromoId.membersNotInvitedOneDayToCollab]: {\n\t\ttitle: 'IM_CONTENT_COLLAB_ONBOARDING_INVITE_MEMBERS_ONE_DAY_TITLE',\n\t\ttext: 'IM_CONTENT_COLLAB_ONBOARDING_INVITE_MEMBERS_ONE_DAY_TEXT',\n\t},\n\t[PromoId.membersNotInvitedFourDayToCollab]: {\n\t\ttitle: 'IM_CONTENT_COLLAB_ONBOARDING_INVITE_MEMBERS_FOUR_DAYS_TITLE',\n\t\ttext: 'IM_CONTENT_COLLAB_ONBOARDING_INVITE_MEMBERS_FOUR_DAYS_TEXT',\n\t},\n};\n\n// @vue/component\nexport const AddToChatButton = {\n\tname: 'AddToChatButton',\n\tcomponents: { AddToCollab },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twithAnimation: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tshowAddToChatPopup: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.initPromo();\n\t},\n\tmethods:\n\t{\n\t\topenAddToChatPopup()\n\t\t{\n\t\t\tAnalytics.getInstance().userAdd.onChatHeaderClick(this.dialogId);\n\t\t\tthis.showAddToChatPopup = true;\n\t\t},\n\t\tcloseAddToChatPopup()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t\tthis.showAddToChatPopup = false;\n\t\t},\n\t\tinitPromo(): void\n\t\t{\n\t\t\tconst promoManager = PromoManager.getInstance();\n\n\t\t\tObject.keys(PromoMessages).forEach((promoId: $Values<typeof PromoId>): void => {\n\t\t\t\tconst promoParams = { chatId: this.dialog.chatId };\n\n\t\t\t\tif (promoManager.needToShow(promoId, promoParams))\n\t\t\t\t{\n\t\t\t\t\tvoid this.showMembersNotInvitedPromo(promoId, promoParams);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tshowMembersNotInvitedPromo(promoId: $Values<typeof PromoId>, promoParams: PromoParams): Promise<void>\n\t\t{\n\t\t\tconst tooltip = new Tooltip({\n\t\t\t\tbindElement: this.$refs['add-members'],\n\t\t\t\tcontent: this.renderTooltipContent(promoId),\n\t\t\t\tminWidth: 410,\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetTop: 8,\n\t\t\t\t\toffsetLeft: 9,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\tcloseIconSize: CloseIconSize.LARGE,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\ttooltip.show();\n\t\t\tvoid PromoManager.getInstance().markAsWatched(promoId, promoParams);\n\t\t},\n\t\trenderTooltipContent(promoId: $Values<typeof PromoId>): HTMLElement\n\t\t{\n\t\t\tconst tooltipContent = new CollabTooltipContent({\n\t\t\t\ttitle: this.loc(PromoMessages[promoId].title),\n\t\t\t\ttext: this.loc(PromoMessages[promoId].text),\n\t\t\t\ticonKey: IconKey.addToChat,\n\t\t\t});\n\n\t\t\treturn tooltipContent.render();\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:title=\"loc('IM_CONTENT_CHAT_HEADER_OPEN_INVITE_POPUP_TITLE')\"\n\t\t\t:class=\"{'--active': showAddToChatPopup}\"\n\t\t\tclass=\"bx-im-collab-header__add-people-icon\"\n\t\t\t@click=\"openAddToChatPopup\"\n\t\t\tref=\"add-members\"\n\t\t></div>\n\t\t<AddToCollab\n\t\t\tv-if=\"showAddToChatPopup\"\n\t\t\t:bindElement=\"$refs['add-members'] ?? {}\"\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:popupConfig=\"{ offsetTop: 25, offsetLeft: -300 }\"\n\t\t\t@close=\"closeAddToChatPopup\"\n\t\t/>\n\t`,\n};\n","import { ChatHeader } from 'im.v2.component.content.elements';\nimport { PulseAnimation } from 'im.v2.component.elements.pulse-animation';\nimport { EventType } from 'im.v2.const';\nimport { AddToChat as AddToChatPopup } from 'im.v2.component.entity-selector';\n\nimport { CollabTitle } from './collab-title';\nimport { EntitiesPanel } from './entities-panel/entities-panel';\nimport { AddToChatButton } from './add-to-chat-button';\n\nimport type { JsonObject } from 'main.core';\nimport type { EventEmitter } from 'main.core.events';\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const CollabHeader = {\n\tname: 'CollabHeader',\n\tcomponents: { ChatHeader, CollabTitle, EntitiesPanel, AddToChatButton, AddToChatPopup, PulseAnimation },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tcompactMode: false,\n\t\t\tshowAddToChatPopupDelayed: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisInited(): boolean\n\t\t{\n\t\t\treturn this.dialog.inited;\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tasync isInited(isInited: boolean)\n\t\t{\n\t\t\tif (isInited && this.showAddToChatPopupDelayed)\n\t\t\t{\n\t\t\t\tawait this.$nextTick();\n\t\t\t\tthis.openAddToChatPopup();\n\t\t\t}\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.getEmitter().subscribe(EventType.header.openAddToChatPopup, this.onOpenAddToChatPopup);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.getEmitter().unsubscribe(EventType.header.openAddToChatPopup, this.onOpenAddToChatPopup);\n\t},\n\tmethods:\n\t{\n\t\tonOpenAddToChatPopup()\n\t\t{\n\t\t\tif (!this.isInited)\n\t\t\t{\n\t\t\t\tthis.showAddToChatPopupDelayed = true;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.openAddToChatPopup();\n\t\t},\n\t\topenAddToChatPopup()\n\t\t{\n\t\t\tthis.$refs['add-to-chat-button'].openAddToChatPopup();\n\t\t},\n\t\tonCompactModeChange(compactMode: boolean)\n\t\t{\n\t\t\tthis.compactMode = compactMode;\n\t\t},\n\t\tgetEmitter(): EventEmitter\n\t\t{\n\t\t\treturn this.$Bitrix.eventEmitter;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatHeader :dialogId=\"dialogId\" @compactModeChange=\"onCompactModeChange\" class=\"bx-im-collab-header__container\">\n\t\t\t<template #title>\n\t\t\t\t<CollabTitle :dialogId=\"dialogId\" />\n\t\t\t</template>\n\t\t\t<template #before-actions>\n\t\t\t\t<EntitiesPanel :dialogId=\"dialogId\" :compactMode=\"compactMode\" />\n\t\t\t</template>\n\t\t\t<template #add-to-chat-button>\n\t\t\t\t<PulseAnimation :showPulse=\"showAddToChatPopupDelayed\" class=\"bx-im-collab-header__add-to-chat\">\n\t\t\t\t\t<AddToChatButton \n\t\t\t\t\t\t:withAnimation=\"showAddToChatPopupDelayed\" \n\t\t\t\t\t\t:dialogId=\"dialogId\" \n\t\t\t\t\t\tref=\"add-to-chat-button\" \n\t\t\t\t\t\t@close=\"showAddToChatPopupDelayed = false\"\n\t\t\t\t\t/>\n\t\t\t\t</PulseAnimation>\n\t\t\t</template>\n\t\t</ChatHeader>\n\t`,\n};\n","import { BaseChatContent } from 'im.v2.component.content.elements';\nimport { PromoId } from 'im.v2.const';\nimport { Notifier } from 'im.v2.lib.notifier';\nimport { PromoManager } from 'im.v2.lib.promo';\n\nimport { CollabHeader } from './components/header';\n\nimport './css/collab.css';\n\nimport type { ImModelChat } from 'im.v2.model';\nimport type { PromoParams } from 'im.v2.provider.pull';\n\nexport const CollabContent = {\n\tname: 'CollabContent',\n\tcomponents: { BaseChatContent, CollabHeader },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tdialogInited(): boolean\n\t\t{\n\t\t\treturn this.dialog.inited;\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tdialogInited(newValue: boolean, oldValue: boolean): void\n\t\t{\n\t\t\tif (!newValue || oldValue)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.initPromo();\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tinitPromo(): void\n\t\t{\n\t\t\tconst promoManager = PromoManager.getInstance();\n\n\t\t\tconst promoId = PromoId.collaberNotAcceptInvitationOneDay;\n\t\t\tconst promoParams = { chatId: this.dialog.chatId };\n\n\t\t\tif (promoManager.needToShow(promoId, promoParams))\n\t\t\t{\n\t\t\t\tthis.showNotAcceptInvitationPromo(promoId, promoParams);\n\t\t\t}\n\t\t},\n\t\tshowNotAcceptInvitationPromo(promoId: $Values<typeof PromoId>, promoParams: PromoParams): void\n\t\t{\n\t\t\tNotifier.collab.onCollaberNotAcceptInvitation();\n\n\t\t\tvoid PromoManager.getInstance().markAsWatched(promoId, promoParams);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseChatContent :dialogId=\"dialogId\">\n\t\t\t<template #header>\n\t\t\t\t<CollabHeader :dialogId=\"dialogId\" :key=\"dialogId\" />\n\t\t\t</template>\n\t\t</BaseChatContent>\n\t`,\n};\n","import { ChatTitle, EditableChatTitle } from 'im.v2.component.elements.chat-title';\n\n// @vue/component\nexport const MultidialogChatTitle = {\n\tname: 'MultidialogChatTitle',\n\tcomponents: { EditableChatTitle, ChatTitle },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['newTitle'],\n\tcomputed:\n\t{\n\t\tisSupportBot(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['users/bots/isSupport'](this.dialogId);\n\t\t},\n\t\tsubtitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('IM_CONTENT_CHAT_HEADER_SUPPORT_SUBTITLE');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-header__info\">\n\t\t\t<ChatTitle v-if=\"isSupportBot\" :dialogId=\"dialogId\" />\n\t\t\t<EditableChatTitle v-else :dialogId=\"dialogId\" @newTitleSubmit=\"$emit('newTitle', $event)\" />\n\t\t\t<div class=\"bx-im-chat-header__subtitle_container\">\n\t\t\t\t<div class=\"bx-im-chat-header__subtitle_content\">{{ subtitle }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ChatHeader } from 'im.v2.component.content.elements';\n\nimport { MultidialogChatTitle } from './title';\n\n// @vue/component\nexport const MultidialogHeader = {\n\tname: 'MultidialogHeader',\n\tcomponents: { ChatHeader, MultidialogChatTitle },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatHeader :dialogId=\"dialogId\">\n\t\t\t<template #title=\"{ onNewTitleHandler }\">\n\t\t\t\t<MultidialogChatTitle\n\t\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t\t@newTitle=\"onNewTitleHandler\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</ChatHeader>\n\t`,\n};\n","import { BaseChatContent } from 'im.v2.component.content.elements';\n\nimport { MultidialogHeader } from './components/header';\n\nexport const MultidialogContent = {\n\tname: 'MultidialogContent',\n\tcomponents: { BaseChatContent, MultidialogHeader },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseChatContent :dialogId=\"dialogId\">\n\t\t\t<template #header>\n\t\t\t\t<MultidialogHeader :dialogId=\"dialogId\" :key=\"dialogId\" />\n\t\t\t</template>\n\t\t</BaseChatContent>\n\t`,\n};\n","import { Core } from 'im.v2.application.core';\nimport { BaseChatContent, ChatHeader } from 'im.v2.component.content.elements';\nimport { ChatTitle, ChatTitleType } from 'im.v2.component.elements.chat-title';\n\n// @vue/component\nexport const NotesContent = {\n\tname: 'NotesContent',\n\tcomponents: { BaseChatContent, ChatHeader, ChatTitle },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitleType(): string\n\t\t{\n\t\t\treturn Number.parseInt(this.dialogId, 10) === Core.getUserId() ? ChatTitleType.notes : '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseChatContent :dialogId=\"dialogId\">\n\t\t\t<template #header>\n\t\t\t\t<ChatHeader :dialogId=\"dialogId\" :withCallButton=\"false\" :withAddToChatButton=\"false\">\n\t\t\t\t\t<template #title>\n\t\t\t\t\t\t<ChatTitle :dialogId=\"dialogId\" :customType=\"titleType\" :showItsYou=\"false\"/>\n\t\t\t\t\t</template>\n\t\t\t\t</ChatHeader>\n\t\t\t</template>\n\t\t</BaseChatContent>\n\t`,\n};\n","import { PopupOptions } from 'main.popup';\n\nimport { MessengerPopup } from 'im.v2.component.elements.popup';\n\nimport '../../css/add-to-chat-hint.css';\n\nconst POPUP_ID = 'im-add-to-chat-hint-popup';\n\n// @vue/component\nexport const AddToChatHint = {\n\tname: 'AddToChatHint',\n\tcomponents: { MessengerPopup },\n\tprops: {\n\t\tbindElement: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close', 'hide'],\n\tcomputed: {\n\t\tPOPUP_ID: () => POPUP_ID,\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tdarkMode: true,\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tangle: true,\n\t\t\t\twidth: 346,\n\t\t\t\tcloseIcon: true,\n\t\t\t\toffsetLeft: 8,\n\t\t\t\tclassName: 'bx-im-copilot-add-to-chat-hint__scope',\n\t\t\t\tcontentBorderRadius: 0,\n\t\t\t};\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<MessengerPopup\n\t\t\t:config=\"config\"\n\t\t\t:id=\"POPUP_ID\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<div class=\"bx-im-copilot-add-to-chat-hint__title\">\n\t\t\t\t{{ loc('IM_CONTENT_COPILOT_ADD_TO_CHAT_HINT_TITLE') }}\n\t\t\t</div>\n\t\t\t<br />\n\t\t\t<div class=\"bx-im-copilot-add-to-chat-hint__description\">\n\t\t\t\t{{ loc('IM_CONTENT_COPILOT_ADD_TO_CHAT_HINT_DESCRIPTION') }}\n\t\t\t</div>\n\t\t\t<br />\n\t\t\t<button class=\"bx-im-copilot-add-to-chat-hint__hide\" @click=\"$emit('hide')\">\n\t\t\t\t{{ loc('IM_CONTENT_COPILOT_ADD_TO_CHAT_HINT_HIDE') }}\n\t\t\t</button>\n\t\t</MessengerPopup>\n\t`,\n};\n","import { AddToChat } from 'im.v2.component.entity-selector';\nimport { PromoId } from 'im.v2.const';\nimport { PromoManager } from 'im.v2.lib.promo';\nimport { Analytics } from 'im.v2.lib.analytics';\n\nimport { AddToChatHint } from './add-to-chat-hint';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const AddToChatButton = {\n\tname: 'AddToChatButton',\n\tcomponents: { AddToChat, AddToChatHint },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tshowInviteButton: false,\n\t\t\tshowAddToChatPopup: false,\n\t\t\tshowAddToChatHint: false,\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tconst needCopilotInRecentTabHint = PromoManager.getInstance().needToShow(PromoId.copilotInRecentTab);\n\t\tconst needAddUsersToChatHint = PromoManager.getInstance().needToShow(PromoId.addUsersToCopilotChat);\n\n\t\tthis.showAddToChatHint = !needCopilotInRecentTabHint && needAddUsersToChatHint;\n\t},\n\tmethods:\n\t{\n\t\topenAddToChatPopup(): void\n\t\t{\n\t\t\tAnalytics.getInstance().userAdd.onChatHeaderClick(this.dialogId);\n\t\t\tthis.showAddToChatPopup = true;\n\t\t},\n\t\tcloseAddToChatPopup(): void\n\t\t{\n\t\t\tthis.showAddToChatPopup = false;\n\t\t},\n\t\tshowHint()\n\t\t{\n\t\t\tthis.showAddToChatHint = true;\n\t\t},\n\t\tcloseHint()\n\t\t{\n\t\t\tthis.showAddToChatHint = false;\n\t\t},\n\t\tonHintHide()\n\t\t{\n\t\t\tvoid PromoManager.getInstance().markAsWatched(PromoId.addUsersToCopilotChat);\n\t\t\tthis.closeHint();\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:title=\"loc('IM_CONTENT_CHAT_HEADER_OPEN_INVITE_POPUP_TITLE')\"\n\t\t\t:class=\"{'--active': showAddToChatPopup}\"\n\t\t\tclass=\"bx-im-chat-header__icon --add-people\"\n\t\t\t@click=\"openAddToChatPopup\"\n\t\t\tref=\"add-members\"\n\t\t>\n\t\t\t<slot name=\"invite-hint\" :inviteButtonRef=\"$refs['add-members']\"></slot>\n\t\t</div>\n\t\t<AddToChat\n\t\t\tv-if=\"showAddToChatPopup\"\n\t\t\t:bindElement=\"$refs['add-members'] ?? {}\"\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:popupConfig=\"{ offsetTop: 15, offsetLeft: -300 }\"\n\t\t\t@close=\"closeAddToChatPopup\"\n\t\t/>\n\t\t<AddToChatHint\n\t\t\tv-if=\"showAddToChatHint\"\n\t\t\t:bindElement=\"$refs['add-members'] ?? {}\"\n\t\t\t@close=\"closeHint\"\n\t\t\t@hide=\"onHintHide\"\n\t\t/>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nimport { ChatService } from 'im.v2.provider.service.chat';\nimport { EditableChatTitle } from 'im.v2.component.elements.chat-title';\nimport { AvatarSize, ChatAvatar } from 'im.v2.component.elements.avatar';\nimport { ChatHeader } from 'im.v2.component.content.elements';\nimport { EventType, SidebarDetailBlock } from 'im.v2.const';\nimport { CopilotManager } from 'im.v2.lib.copilot';\n\nimport { AddToChatButton } from './add-to-chat/add-to-chat-button';\n\nimport '../css/chat-header.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { EventEmitter } from 'main.core.events';\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const CopilotChatHeader = {\n\tname: 'CopilotChatHeader',\n\tcomponents: { ChatHeader, EditableChatTitle, ChatAvatar, AddToChatButton },\n\tinject: ['currentSidebarPanel'],\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tbuttonPanelReady: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tAvatarSize: () => AvatarSize,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisInited(): boolean\n\t\t{\n\t\t\treturn this.dialog.inited;\n\t\t},\n\t\tisGroupCopilotChat(): boolean\n\t\t{\n\t\t\treturn (new CopilotManager()).isGroupCopilotChat(this.dialogId);\n\t\t},\n\t\tcopilotRole(): string\n\t\t{\n\t\t\tconst role = this.$store.getters['copilot/chats/getRole'](this.dialogId);\n\n\t\t\treturn role?.name ?? '';\n\t\t},\n\t\tformattedUserCounter(): string\n\t\t{\n\t\t\treturn Loc.getMessagePlural('IM_CONTENT_COPILOT_HEADER_USER_COUNT', this.dialog.userCounter, {\n\t\t\t\t'#COUNT#': this.dialog.userCounter,\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonNewTitleSubmit(newTitle: string)\n\t\t{\n\t\t\tvoid this.getChatService().renameChat(this.dialogId, newTitle);\n\t\t},\n\t\tonMembersClick()\n\t\t{\n\t\t\tif (!this.isInited)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentSidebarPanel === SidebarDetailBlock.members)\n\t\t\t{\n\t\t\t\tthis.getEmitter().emit(EventType.sidebar.close, { panel: SidebarDetailBlock.members });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.getEmitter().emit(EventType.sidebar.open, {\n\t\t\t\tpanel: SidebarDetailBlock.members,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\tonButtonPanelReady()\n\t\t{\n\t\t\tthis.buttonPanelReady = true;\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tgetEmitter(): EventEmitter\n\t\t{\n\t\t\treturn this.$Bitrix.eventEmitter;\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatHeader\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:withSearchButton=\"false\"\n\t\t\tclass=\"bx-im-copilot-header__container\"\n\t\t\t@buttonPanelReady=\"onButtonPanelReady\"\n\t\t>\n\t\t\t<template #left>\n\t\t\t\t<div class=\"bx-im-copilot-header__avatar\">\n\t\t\t\t\t<ChatAvatar\n\t\t\t\t\t\t:avatarDialogId=\"dialogId\"\n\t\t\t\t\t\t:contextDialogId=\"dialogId\"\n\t\t\t\t\t\t:withSpecialTypes=\"false\"\n\t\t\t\t\t\t:size=\"AvatarSize.L\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-copilot-header__info\">\n\t\t\t\t\t<EditableChatTitle :dialogId=\"dialogId\" @newTitleSubmit=\"onNewTitleSubmit\" />\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isGroupCopilotChat\"\n\t\t\t\t\t\t:title=\"loc('IM_CONTENT_COPILOT_HEADER_OPEN_MEMBERS_TITLE')\"\n\t\t\t\t\t\t@click=\"onMembersClick\"\n\t\t\t\t\t\tclass=\"bx-im-copilot-header__subtitle --click\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ formattedUserCounter }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else class=\"bx-im-copilot-header__subtitle\">\n\t\t\t\t\t\t{{ copilotRole }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-if=\"buttonPanelReady\" #add-to-chat-button>\n\t\t\t\t<AddToChatButton :dialogId=\"dialogId\" />\n\t\t\t</template>\n\t\t</ChatHeader>\n\t`,\n};\n","import { Outline as OutlineIcons } from 'ui.icon-set.api.core';\nimport { ChipDesign, ChipSize, Chip } from 'ui.system.chip.vue';\nimport { hint } from 'ui.vue3.directives.hint';\n\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\n\n// @vue/component\nexport const ReasoningButton = {\n\tname: 'ReasoningButton',\n\tdirectives: { hint },\n\tcomponents: { Chip },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tOutlineIcons: () => OutlineIcons,\n\t\tChipDesign: () => ChipDesign,\n\t\tChipSize: () => ChipSize,\n\t\tisActive(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['copilot/chats/isReasoningEnabled'](this.dialogId);\n\t\t},\n\t\tmodelCode(): ?string\n\t\t{\n\t\t\treturn this.$store.getters['copilot/chats/getAIModel'](this.dialogId)?.code;\n\t\t},\n\t\tisReasoningAvailable(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.isCopilotReasoningAvailable);\n\t\t},\n\t\tisReasoningAvailableInModel(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['copilot/isReasoningAvailableInModel'](this.modelCode);\n\t\t},\n\t\tdesign(): string\n\t\t{\n\t\t\tif (!this.isReasoningAvailableInModel)\n\t\t\t{\n\t\t\t\treturn ChipDesign.Disabled;\n\t\t\t}\n\n\t\t\tif (this.isActive)\n\t\t\t{\n\t\t\t\treturn ChipDesign.OutlineCopilot;\n\t\t\t}\n\n\t\t\treturn ChipDesign.Outline;\n\t\t},\n\t\thint(): { text: string } | null\n\t\t{\n\t\t\tif (this.isReasoningAvailableInModel)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttext: this.loc('IM_CONTENT_COPILOT_TEXTAREA_REASONING_BUTTON_HINT_NOT_AVAILABLE'),\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\ttoggle()\n\t\t{\n\t\t\tif (!this.isReasoningAvailableInModel)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('copilot/chats/toggleReasoning', this.dialogId);\n\t\t\tAnalytics.getInstance().copilot.onToggleReasoning(this.dialogId);\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\tv-if=\"isReasoningAvailable\"\n\t\t\tv-hint=\"hint\"\n\t\t\t:text=\"loc('IM_CONTENT_COPILOT_TEXTAREA_REASONING_BUTTON')\"\n\t\t\t:rounded=\"true\"\n\t\t\t:size=\"ChipSize.Sm\"\n\t\t\t:icon=\"OutlineIcons.AI_STARS\"\n\t\t\t:design=\"design\"\n\t\t\t@click=\"toggle\"\n\t\t/>\n\t`,\n};\n","import { ChatTextarea } from 'im.v2.component.textarea';\n\nimport { ReasoningButton } from './reasoning-button';\n\n// @vue/component\nexport const CopilotTextarea = {\n\tname: 'CopilotTextarea',\n\tcomponents: { ChatTextarea, ReasoningButton },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmethods: {\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatTextarea\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:placeholder=\"loc('IM_CONTENT_COPILOT_TEXTAREA_PLACEHOLDER')\"\n\t\t\t:withMarket=\"false\"\n\t\t\t:withEdit=\"false\"\n\t\t\t:withUploadMenu=\"false\"\n\t\t\t:withSmileSelector=\"false\"\n\t\t>\n\t\t\t<template #bottom-panel-buttons>\n\t\t\t\t<ReasoningButton :dialogId=\"dialogId\" />\n\t\t\t</template>\n\t\t</ChatTextarea>\n\t`,\n};\n","import { BaseChatContent } from 'im.v2.component.content.elements';\n\nimport { CopilotChatHeader } from './components/header';\nimport { CopilotTextarea } from './components/textarea';\n\n// @vue/component\nexport const CopilotContent = {\n\tname: 'CopilotContent',\n\tcomponents: { BaseChatContent, CopilotChatHeader, CopilotTextarea },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseChatContent :dialogId=\"dialogId\" :withDropArea=\"false\">\n\t\t\t<template #header>\n\t\t\t\t<CopilotChatHeader :dialogId=\"dialogId\" :key=\"dialogId\" />\n\t\t\t</template>\n\t\t\t<template #textarea=\"{ onTextareaMount }\">\n\t\t\t\t<CopilotTextarea :dialogId=\"dialogId\" :key=\"dialogId\" @mounted=\"onTextareaMount\" />\n\t\t\t</template>\n\t\t</BaseChatContent>\n\t`,\n};\n","import { Outline as OutlineIcons } from 'ui.icon-set.api.core';\nimport { ChipDesign, ChipSize, Chip } from 'ui.system.chip.vue';\nimport { McpSelector } from 'aiassistant.mcp-selector';\n\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\n\nimport './css/mcp-integration.css';\n\nimport type { JsonObject } from 'main.core';\n\nconst MAX_INTEGRATION_NAME_LENGTH = 20;\nconst MARTA_ANALYTICS_CONTEXT = 'marta_chat';\n\n// @vue/component\nexport const McpIntegration = {\n\tname: 'McpIntegration',\n\tcomponents: { Chip },\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisSelectorOpened: false,\n\t\t\tmcpAuth: {\n\t\t\t\tid: null,\n\t\t\t\tname: null,\n\t\t\t\ticon: null,\n\t\t\t},\n\t\t};\n\t},\n\tcomputed: {\n\t\tOutlineIcons: () => OutlineIcons,\n\t\tChipDesign: () => ChipDesign,\n\t\tChipSize: () => ChipSize,\n\t\thasSelectedMcpAuth(): boolean\n\t\t{\n\t\t\treturn this.mcpAuth.id !== null;\n\t\t},\n\t\tchipDesign(): string\n\t\t{\n\t\t\tif (this.hasSelectedMcpAuth)\n\t\t\t{\n\t\t\t\treturn ChipDesign.OutlineAccent2;\n\t\t\t}\n\n\t\t\treturn ChipDesign.Outline;\n\t\t},\n\t\tisAvailable(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.aiAssistantMcpSelectorAvailable);\n\t\t},\n\t\tdefaultIcon(): ?string\n\t\t{\n\t\t\tif (this.mcpIcon)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn OutlineIcons.APPS;\n\t\t},\n\t\tmcpIcon(): ?{ src: string, alt: '' }\n\t\t{\n\t\t\tif (!this.mcpAuth.icon)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tsrc: this.mcpAuth.icon,\n\t\t\t\talt: '',\n\t\t\t};\n\t\t},\n\t\tchipName(): string\n\t\t{\n\t\t\tif (!this.mcpAuth.name)\n\t\t\t{\n\t\t\t\treturn this.loc('IM_CONTENT_AI_ASSISTANT_MCP_INTEGRATIONS');\n\t\t\t}\n\n\t\t\tconst needEllipsis = this.mcpAuth.name.length > MAX_INTEGRATION_NAME_LENGTH;\n\t\t\tif (needEllipsis)\n\t\t\t{\n\t\t\t\treturn `${this.mcpAuth.name.slice(0, MAX_INTEGRATION_NAME_LENGTH)}...`;\n\t\t\t}\n\n\t\t\treturn this.mcpAuth.name;\n\t\t},\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.clear();\n\t\tthis.selector?.destroy();\n\t},\n\tmethods: {\n\t\ttoggle()\n\t\t{\n\t\t\tAnalytics.getInstance().aiAssistant.onMcpIntegrationClick();\n\n\t\t\tif (this.isSelectorOpened)\n\t\t\t{\n\t\t\t\tthis.getSelector().hide();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.getSelector().show();\n\t\t},\n\t\tgetSelector(): McpSelector\n\t\t{\n\t\t\tif (this.selector)\n\t\t\t{\n\t\t\t\treturn this.selector;\n\t\t\t}\n\n\t\t\tthis.selector = new McpSelector({\n\t\t\t\tcontext: MARTA_ANALYTICS_CONTEXT,\n\t\t\t\ttargetNode: this.$refs.selector,\n\t\t\t\tdialogOptions: {\n\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\tclassName: 'mcp-selector-dialog', // widget z-index fix\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tentityOptions: {\n\t\t\t\t\tagentMode: false,\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonSelect: (event) => {\n\t\t\t\t\t\tconst { auth, mcp } = event.getData();\n\t\t\t\t\t\tif (!auth)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.clear();\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setMcpAuth({\n\t\t\t\t\t\t\tid: auth.id,\n\t\t\t\t\t\t\tname: auth.name,\n\t\t\t\t\t\t\ticon: mcp.iconUrl,\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tonHide: () => {\n\t\t\t\t\t\tthis.isSelectorOpened = false;\n\t\t\t\t\t},\n\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\tthis.isSelectorOpened = true;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn this.selector;\n\t\t},\n\t\tsetMcpAuth(mcpAuth: {id: number, name: string, icon: string})\n\t\t{\n\t\t\tthis.mcpAuth = mcpAuth;\n\t\t\tthis.$store.dispatch('aiAssistant/setMcpAuthId', this.mcpAuth.id);\n\t\t},\n\t\tclear()\n\t\t{\n\t\t\tthis.mcpAuth = {\n\t\t\t\tid: null,\n\t\t\t\tname: null,\n\t\t\t\ticon: null,\n\t\t\t};\n\t\t\tthis.$store.dispatch('aiAssistant/setMcpAuthId', null);\n\t\t},\n\t\tonChipClearClick()\n\t\t{\n\t\t\tthis.selector.clear();\n\t\t\tthis.clear();\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span v-if=\"isAvailable\" ref=\"selector\" class=\"bx-im-mcp-integration__container\">\n\t\t\t<Chip\n\t\t\t\t:text=\"chipName\"\n\t\t\t\t:rounded=\"true\"\n\t\t\t\t:size=\"ChipSize.Sm\"\n\t\t\t\t:dropdown=\"!hasSelectedMcpAuth\"\n\t\t\t\t:icon=\"defaultIcon\"\n\t\t\t\t:image=\"mcpIcon\"\n\t\t\t\t:design=\"chipDesign\"\n\t\t\t\t:withClear=\"hasSelectedMcpAuth\"\n\t\t\t\t@click=\"toggle\"\n\t\t\t\t@clear=\"onChipClearClick\"\n\t\t\t/>\n\t\t</span>\n\t`,\n};\n","import { ajax as Ajax, Loc } from 'main.core';\n\nimport { Core } from 'im.v2.application.core';\n\nexport type ServiceHealthResponse = {\n\tresult: 'notice' | 'warning' | 'error',\n\tinfo: string,\n\tstatusTitle: string,\n\tstatusInfo: string,\n\tid: number,\n};\n\nexport class HealthCheckService\n{\n\tgetEndpoint(): string\n\t{\n\t\tconst langId = Loc.getMessage('LANGUAGE_ID');\n\t\tconst { serviceHealthUrl } = Core.getApplicationData();\n\n\t\tconst url = new URL(serviceHealthUrl);\n\t\turl.searchParams.set('userLang', langId);\n\n\t\treturn url.toString();\n\t}\n\n\tasync getServiceHealthStatus(): Promise<ServiceHealthResponse | null>\n\t{\n\t\tconst endpoint = this.getEndpoint();\n\n\t\treturn new Promise((resolve) => {\n\t\t\tAjax.get(endpoint, (rawJson: string) => {\n\t\t\t\tlet response = {};\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tresponse = JSON.parse(rawJson);\n\t\t\t\t}\n\t\t\t\tcatch\n\t\t\t\t{\n\t\t\t\t\tresolve(null);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (response.result !== 'error')\n\t\t\t\t{\n\t\t\t\t\tresolve(null);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresolve(response);\n\t\t\t});\n\t\t});\n\t}\n}\n","import { BIcon, Outline as OutlineIcons } from 'ui.icon-set.api.vue';\n\nimport { Color } from 'im.v2.const';\nimport { HealthCheckManager } from 'im.v2.lib.health-check';\n\nimport { HealthCheckService } from '../classes/service-health';\n\nimport './css/service-health-panel.css';\n\nimport type { ServiceHealthResponse } from '../classes/service-health';\n\nconst ICON_SIZE = 18;\n\n// @vue/component\nexport const ServiceHealthPanel = {\n\tcomponents: { BIcon },\n\tdata(): { isShow: boolean, title: string, text: string }\n\t{\n\t\treturn {\n\t\t\tisShow: false,\n\t\t\ttitle: '',\n\t\t\ttext: '',\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tColor: () => Color,\n\t\tOutlineIcons: () => OutlineIcons,\n\t\tICON_SIZE: () => ICON_SIZE,\n\t\tisServiceHealthPanelShown(): boolean\n\t\t{\n\t\t\treturn HealthCheckManager.getInstance().getIsShown();\n\t\t},\n\t\tprocessedTitle(): string\n\t\t{\n\t\t\treturn BX.util.strip_tags(this.title);\n\t\t},\n\t\tprocessedText(): string\n\t\t{\n\t\t\treturn BX.util.strip_tags(this.text);\n\t\t},\n\t},\n\tasync created()\n\t{\n\t\tif (this.isServiceHealthPanelShown)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = await (new HealthCheckService()).getServiceHealthStatus();\n\t\tif (!data)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.setData(data);\n\t\tthis.show();\n\t},\n\tmethods:\n\t{\n\t\tsetData(data: ServiceHealthResponse): void\n\t\t{\n\t\t\tconst { statusTitle, statusInfo } = data;\n\t\t\tthis.title = statusTitle;\n\t\t\tthis.text = statusInfo;\n\t\t},\n\t\tshow(): void\n\t\t{\n\t\t\tthis.isShow = true;\n\t\t},\n\t\thide(): void\n\t\t{\n\t\t\tthis.isShow = false;\n\t\t\tHealthCheckManager.getInstance().setIsShown(true);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isShow\" class=\"bx-im-content-chat__service-health-panel\">\n\t\t\t<div class=\"bx-im-content-chat__service-health-panel_content\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"processedTitle\"\n\t\t\t\t\t:title=\"processedTitle\"\n\t\t\t\t\tclass=\"bx-im-content-chat__service-health-panel_title --ellipsis\"\n\t\t\t\t>\n\t\t\t\t\t{{ processedTitle }}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"processedText\"\n\t\t\t\t\t:title=\"processedText\"\n\t\t\t\t\tclass=\"bx-im-content-chat__service-health-panel_text --line-clamp-4\"\n\t\t\t\t>\n\t\t\t\t\t{{ processedText }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclass=\"bx-im-content-chat__service-health-panel_close-button\"\n\t\t\t\t@click=\"hide\"\n\t\t\t>\n\t\t\t\t<BIcon\n\t\t\t\t\t:name=\"OutlineIcons.CROSS_M\"\n\t\t\t\t\t:color=\"Color.white\"\n\t\t\t\t\t:size=\"ICON_SIZE\"\n\t\t\t\t\t:hoverable=\"false\"\n\t\t\t\t/>\n\t\t\t</button>\n\t\t</div>\n\t`,\n};\n","import { BaseChatContent } from 'im.v2.component.content.elements';\nimport { ChatTextarea } from 'im.v2.component.textarea';\n\nimport { McpIntegration } from './components/mcp-integration';\nimport { ServiceHealthPanel } from './components/service-health-panel';\n\nexport const AiAssistantBotContent = {\n\tname: 'AiAssistantBotContent',\n\tcomponents: { BaseChatContent, ChatTextarea, ServiceHealthPanel, McpIntegration },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\twithSidebar: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseChatContent :dialogId=\"dialogId\" :withSidebar=\"withSidebar\" :withDropArea=\"false\">\n\t\t\t<template #header v-if=\"$slots['header']\">\n\t\t\t\t<slot name=\"header\"></slot>\n\t\t\t</template>\n\t\t\t<template #sub-header>\n\t\t\t\t<ServiceHealthPanel />\n\t\t\t</template>\n\t\t\t<template #textarea=\"{ onTextareaMount }\">\n\t\t\t\t<ChatTextarea\n\t\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t\t:key=\"dialogId\"\n\t\t\t\t\t:placeholder=\"loc('IM_CONTENT_AIASSISTANT_TEXTAREA_PLACEHOLDER_MSGVER_1')\"\n\t\t\t\t\t:withMarket=\"false\"\n\t\t\t\t\t:withEdit=\"false\"\n\t\t\t\t\t:withUploadMenu=\"false\"\n\t\t\t\t\t:withSmileSelector=\"false\"\n\t\t\t\t\t@mounted=\"onTextareaMount\"\n\t\t\t\t>\n\t\t\t\t\t<template #bottom-panel-buttons>\n\t\t\t\t\t\t<McpIntegration />\n\t\t\t\t\t</template>\n\t\t\t\t</ChatTextarea>\n\t\t\t</template>\n\t\t</BaseChatContent>\n\t`,\n};\n","import { BaseChatContent } from 'im.v2.component.content.elements';\n\nexport const TaskCommentsContent = {\n\tname: 'TaskCommentsContent',\n\tcomponents: { BaseChatContent },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseChatContent :dialogId=\"dialogId\" />\n\t`,\n};\n","import '../css/feature-block.css';\n\n// @vue/component\nexport const FeatureBlock = {\n\tname: 'FeatureBlock',\n\tprops:\n\t{\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsubtitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat-start__block\">\n\t\t\t<div class=\"bx-im-content-chat-start__block_icon\" :class=\"'--' + name\"></div>\n\t\t\t<div class=\"bx-im-content-chat-start__block_content\">\n\t\t\t\t<div class=\"bx-im-content-chat-start__block_title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-chat-start__block_subtitle\">\n\t\t\t\t\t{{ subtitle }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\n\nimport { ThemeManager } from 'im.v2.lib.theme';\nimport { LegacyRecentService } from 'im.v2.provider.service.recent';\n\nimport { FeatureBlock } from './components/feature-block';\n\nimport './css/base.css';\n\nimport type { BackgroundStyle } from 'im.v2.lib.theme';\n\nexport const IconClass = {\n\tgroup: '--group',\n\tchat: '--chat',\n\tlist: '--list',\n};\n\nexport const EmptyStateListItemName = {\n\taudio: 'audio',\n\tmessages: 'messages',\n\tchat: 'chat',\n\tcollaboration: 'collaboration',\n\tbusiness: 'business',\n\tresult: 'result',\n};\n\nexport type EmptyStateListItem = {\n\ttitle: string,\n\tsubtitle: string,\n\tname: $Values<typeof EmptyStateListItemName>,\n};\n\n// @vue/component\nexport const BaseEmptyState = {\n\tcomponents: { FeatureBlock },\n\tprops:\n\t{\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tsubtext: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tbackgroundId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: '',\n\t\t},\n\t\tlistItems: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\ticonClassName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\titems(): EmptyStateListItem[]\n\t\t{\n\t\t\treturn this.listItems;\n\t\t},\n\t\ticonClass(): string\n\t\t{\n\t\t\tif (this.iconClassName)\n\t\t\t{\n\t\t\t\treturn this.iconClassName;\n\t\t\t}\n\n\t\t\treturn this.isEmptyRecent ? IconClass.group : IconClass.chat;\n\t\t},\n\t\tpreparedText(): string\n\t\t{\n\t\t\tif (this.text)\n\t\t\t{\n\t\t\t\treturn this.text;\n\t\t\t}\n\n\t\t\tif (this.isEmptyRecent)\n\t\t\t{\n\t\t\t\treturn this.loc('IM_CONTENT_CHAT_NO_CHATS_START_MESSAGE');\n\t\t\t}\n\n\t\t\treturn this.loc('IM_CONTENT_CHAT_START_MESSAGE_V2');\n\t\t},\n\t\tpreparedSubtext(): string\n\t\t{\n\t\t\tif (this.subtext)\n\t\t\t{\n\t\t\t\treturn this.subtext;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\tisEmptyRecent(): boolean\n\t\t{\n\t\t\treturn LegacyRecentService.getInstance().getCollection().length === 0;\n\t\t},\n\t\tbackgroundStyle(): BackgroundStyle\n\t\t{\n\t\t\tif (Type.isStringFilled(this.backgroundId) || Type.isNumber(this.backgroundId))\n\t\t\t{\n\t\t\t\treturn ThemeManager.getBackgroundStyleById(this.backgroundId);\n\t\t\t}\n\n\t\t\treturn ThemeManager.getCurrentBackgroundStyle();\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat-start__container\" :style=\"backgroundStyle\">\n\t\t\t<div class=\"bx-im-content-chat-start__content\">\n\t\t\t\t<div class=\"bx-im-content-chat-start__icon\" :class=\"iconClass\"></div>\n\t\t\t\t<div class=\"bx-im-content-chat-start__title\">\n\t\t\t\t\t{{ preparedText }}\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"preparedSubtext\" class=\"bx-im-content-chat-start__subtitle\">\n\t\t\t\t\t{{ preparedSubtext }}\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"items.length > 0\" class=\"bx-im-content-chat-start__blocks\">\n\t\t\t\t\t<FeatureBlock\n\t\t\t\t\t\tv-for=\"item in items\"\n\t\t\t\t\t\t:name=\"item.name\"\n\t\t\t\t\t\t:title=\"item.title\"\n\t\t\t\t\t\t:subtitle=\"item.subtitle\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<slot name=\"bottom-content\"></slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BaseEmptyState } from './base/base';\n\n// @vue/component\nexport const ChannelEmptyState = {\n\tname: 'ChannelEmptyState',\n\tcomponents: { BaseEmptyState },\n\tcomputed:\n\t{\n\t\ttext(): string\n\t\t{\n\t\t\treturn this.loc('IM_CONTENT_CHANNEL_START_MESSAGE_V3');\n\t\t},\n\t\tsubtext(): string\n\t\t{\n\t\t\treturn this.loc('IM_CONTENT_CHANNEL_START_MESSAGE_SUBTITLE');\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseEmptyState :text=\"text\" :subtext=\"subtext\" />\n\t`,\n};\n","import { Loc } from 'main.core';\n\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\nimport { PromoId } from 'im.v2.const';\nimport { PromoManager } from 'im.v2.lib.promo';\n\nimport 'im.v2.lib.invite';\n\nimport './css/embedded-promo.css';\n\nconst SHOWCASE_TOOLS_PHRASES = [\n\tLoc.getMessage('IM_CONTENT_EMBEDDED_CHAT_START_TOOL_CHATS'),\n\tLoc.getMessage('IM_CONTENT_EMBEDDED_CHAT_START_TOOL_CALLS'),\n\tLoc.getMessage('IM_CONTENT_EMBEDDED_CHAT_START_TOOL_CHANNELS'),\n\tLoc.getMessage('IM_CONTENT_EMBEDDED_CHAT_START_TOOL_DOCS'),\n\tLoc.getMessage('IM_CONTENT_EMBEDDED_CHAT_START_TOOL_TASKS'),\n\tLoc.getMessage('IM_CONTENT_EMBEDDED_CHAT_START_TOOL_CALENDAR'),\n\tLoc.getMessage('IM_CONTENT_EMBEDDED_CHAT_START_TOOL_FILES'),\n\tLoc.getMessage('IM_CONTENT_EMBEDDED_CHAT_START_TOOL_BOARDS'),\n];\n\n// @vue/component\nexport const EmbeddedChatPromoEmptyState = {\n\tname: 'EmbeddedChatPromoEmptyState',\n\tcomputed: {\n\t\tSHOWCASE_TOOLS_PHRASES: () => SHOWCASE_TOOLS_PHRASES,\n\t\tcanInviteUsers(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.intranetInviteAvailable);\n\t\t},\n\t\tpreparedTitle(): string\n\t\t{\n\t\t\treturn Loc.getMessage('IM_CONTENT_EMBEDDED_CHAT_START_TITLE', {\n\t\t\t\t'[color]': '<span class=\"--brand-accent-with-icon\">',\n\t\t\t\t'[/color]': '</span>',\n\t\t\t});\n\t\t},\n\t\tpreparedInviteText(): string\n\t\t{\n\t\t\tconst openInviteSliderHandler = 'BX.Messenger.v2.Lib.InviteManager.openInviteSlider()';\n\n\t\t\treturn Loc.getMessage('IM_CONTENT_EMBEDDED_CHAT_START_FEATURE_INVITE_MSGVER_2', {\n\t\t\t\t'[action]': `<span class=\"bx-im-embedded-promo-start__invite-action\" onclick=\"${openInviteSliderHandler}\">`,\n\t\t\t\t'[/action]': '</span>',\n\t\t\t});\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tvoid PromoManager.getInstance().markAsWatched(PromoId.embeddedChatEmptyState);\n\t},\n\tmethods: {\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-embedded-promo-start__container\">\n\t\t\t<div class=\"bx-im-embedded-promo-start__title\" v-html=\"preparedTitle\"></div>\n\t\t\t<div class=\"bx-im-embedded-promo-start__tools\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"tool in SHOWCASE_TOOLS_PHRASES\"\n\t\t\t\t\t:key=\"tool\"\n\t\t\t\t\tclass=\"bx-im-embedded-promo-start__tools_item\"\n\t\t\t\t>{{ tool }}</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-embedded-promo-start__content\">\n\t\t\t\t<div class=\"bx-im-embedded-promo-start__features\">\n\t\t\t\t\t<div class=\"bx-im-embedded-promo-start__features_content\">\n\t\t\t\t\t\t<div class=\"bx-im-embedded-promo-start__feature_item\">\n\t\t\t\t\t\t\t<div class=\"bx-im-embedded-promo-start__feature_icon --people\"></div>\n\t\t\t\t\t\t\t<div class=\"bx-im-embedded-promo-start__feature_text\">{{ loc('IM_CONTENT_EMBEDDED_CHAT_START_FEATURE_EASE') }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-im-embedded-promo-start__feature_item\">\n\t\t\t\t\t\t\t<div class=\"bx-im-embedded-promo-start__feature_icon --shield\"></div>\n\t\t\t\t\t\t\t<div class=\"bx-im-embedded-promo-start__feature_text\">{{ loc('IM_CONTENT_EMBEDDED_CHAT_START_FEATURE_SAFETY') }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-im-embedded-promo-start__feature_item\">\n\t\t\t\t\t\t\t<div class=\"bx-im-embedded-promo-start__feature_icon --ai\"></div>\n\t\t\t\t\t\t\t<div class=\"bx-im-embedded-promo-start__feature_text\">{{ loc('IM_CONTENT_EMBEDDED_CHAT_START_FEATURE_AI') }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"canInviteUsers\" v-html=\"preparedInviteText\" class=\"bx-im-embedded-promo-start__invite_item\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-embedded-promo-start__image\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Analytics } from 'im.v2.lib.analytics';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\nimport { InviteManager } from 'im.v2.lib.invite';\n\nimport './css/embedded.css';\n\n// @vue/component\nexport const EmbeddedChatEmptyState = {\n\tname: 'EmbeddedChatEmptyState',\n\tcomputed: {\n\t\tcanInviteUsers(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.intranetInviteAvailable);\n\t\t},\n\t},\n\tmethods: {\n\t\tonInviteActionClick(): void\n\t\t{\n\t\t\tconst analyticsContext = Analytics.getInstance().sliderInvite.getEmptyStateContext();\n\t\t\tInviteManager.openInviteSlider(analyticsContext);\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-embedded-chat-start__container\">\n\t\t\t<div class=\"bx-im-embedded-chat-start__image\"></div>\n\t\t\t<div class=\"bx-im-embedded-chat-start__title\">\n\t\t\t\t{{ loc('IM_CONTENT_EMBEDDED_CHAT_START_FEATURE_SUBTITLE') }}\n\t\t\t</div>\n\t\t\t<template v-if=\"canInviteUsers\">\n\t\t\t\t<div class=\"bx-im-embedded-chat-start__separator_text\">\n\t\t\t\t\t{{ loc('IM_CONTENT_EMBEDDED_CHAT_START_SEPARATOR_TEXT') }}\n\t\t\t\t</div>\n\t\t\t\t<div @click=\"onInviteActionClick\" class=\"bx-im-embedded-chat-start__invite\">\n\t\t\t\t\t{{ loc('IM_CONTENT_EMBEDDED_CHAT_START_INVITE_ACTION') }}\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n","import { Core } from 'im.v2.application.core';\n\nimport { Messenger } from 'im.public';\nimport { Color, ActionByUserType, UserType } from 'im.v2.const';\nimport { ChatButton, ButtonSize, type CustomColorScheme } from 'im.v2.component.elements.button';\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { CreatableChat } from 'im.v2.component.content.chat-forms.forms';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\nimport { SpecialBackground } from 'im.v2.lib.theme';\n\nimport { BaseEmptyState, IconClass, EmptyStateListItemName } from './base/base';\n\nimport type { EmptyStateListItem } from './base/base';\n\n// @vue/component\nexport const CollabEmptyState = {\n\tname: 'CollabEmptyState',\n\tcomponents: { ChatButton, BaseEmptyState },\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tIconClass: () => IconClass,\n\t\tSpecialBackground: () => SpecialBackground,\n\t\tcanCreateCollab(): boolean\n\t\t{\n\t\t\tconst isAvailable = FeatureManager.isFeatureAvailable(Feature.collabCreationAvailable);\n\t\t\tconst canCreate = PermissionManager.getInstance().canPerformActionByUserType(ActionByUserType.createCollab);\n\n\t\t\treturn isAvailable && canCreate;\n\t\t},\n\t\tcreateButtonColorScheme(): CustomColorScheme\n\t\t{\n\t\t\treturn {\n\t\t\t\tborderColor: Color.transparent,\n\t\t\t\tbackgroundColor: Color.white,\n\t\t\t\ticonColor: Color.gray90,\n\t\t\t\ttextColor: Color.gray90,\n\t\t\t\thoverColor: Color.white,\n\t\t\t\ttextHoverColor: Color.collab70,\n\t\t\t};\n\t\t},\n\t\tcollaberEmptyStateListItems(): EmptyStateListItem[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_COLLABER_TITLE_1'),\n\t\t\t\t\tsubtitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_SUBTITLE_1'),\n\t\t\t\t\tname: EmptyStateListItemName.collaboration,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_COLLABER_TITLE_2'),\n\t\t\t\t\tsubtitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_COLLABER_SUBTITLE_2'),\n\t\t\t\t\tname: EmptyStateListItemName.business,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_TITLE_3'),\n\t\t\t\t\tsubtitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_SUBTITLE_3'),\n\t\t\t\t\tname: EmptyStateListItemName.result,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tbaseEmptyStateListItems(): EmptyStateListItem[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_TITLE_1'),\n\t\t\t\t\tsubtitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_SUBTITLE_1'),\n\t\t\t\t\tname: EmptyStateListItemName.collaboration,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_TITLE_2'),\n\t\t\t\t\tsubtitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_SUBTITLE_2'),\n\t\t\t\t\tname: EmptyStateListItemName.business,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_TITLE_3'),\n\t\t\t\t\tsubtitle: this.loc('IM_CONTENT_COLLAB_START_BLOCK_SUBTITLE_3'),\n\t\t\t\t\tname: EmptyStateListItemName.result,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\temptyStateListItems(): EmptyStateListItem[]\n\t\t{\n\t\t\tif (this.isCurrentUserCollaber)\n\t\t\t{\n\t\t\t\treturn this.collaberEmptyStateListItems;\n\t\t\t}\n\n\t\t\treturn this.baseEmptyStateListItems;\n\t\t},\n\t\tisCurrentUserCollaber(): boolean\n\t\t{\n\t\t\tconst currentUser = this.$store.getters['users/get'](Core.getUserId(), true);\n\n\t\t\treturn currentUser.type === UserType.collaber;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonCreateClick()\n\t\t{\n\t\t\tAnalytics.getInstance().chatCreate.onCollabEmptyStateCreateClick();\n\t\t\tMessenger.openChatCreation(CreatableChat.collab);\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseEmptyState\n\t\t\t:text=\"loc('IM_CONTENT_COLLAB_START_TITLE_V2')\"\n\t\t\t:backgroundId=\"SpecialBackground.collab\"\n\t\t\t:listItems=\"emptyStateListItems\"\n\t\t\t:iconClassName=\"IconClass.list\"\n\t\t>\n\t\t\t<template #bottom-content>\n\t\t\t\t<ChatButton\n\t\t\t\t\tv-if=\"canCreateCollab\"\n\t\t\t\t\t:size=\"ButtonSize.XXL\"\n\t\t\t\t\t:customColorScheme=\"createButtonColorScheme\"\n\t\t\t\t\t:text=\"loc('IM_CONTENT_COLLAB_START_CREATE_BUTTON')\"\n\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t@click=\"onCreateClick\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</BaseEmptyState>\n\t`,\n};\n","import { Messenger } from 'im.public';\nimport { ChatButton, ButtonSize, type CustomColorScheme } from 'im.v2.component.elements.button';\nimport { Color } from 'im.v2.const';\nimport { SpecialBackground, ThemeManager } from 'im.v2.lib.theme';\nimport { CopilotService } from 'im.v2.provider.service.copilot';\n\nimport './css/empty-state.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { BackgroundStyle } from 'im.v2.lib.theme';\n\nconst BUTTON_BACKGROUND_COLOR = '#fff';\nconst BUTTON_HOVER_COLOR = '#eee';\nconst BUTTON_TEXT_COLOR = 'rgba(82, 92, 105, 0.9)';\n\n// @vue/component\nexport const CopilotEmptyState = {\n\tname: 'CopilotEmptyState',\n\tcomponents: { ChatButton },\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreatingChat: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tbackgroundStyle(): BackgroundStyle\n\t\t{\n\t\t\treturn ThemeManager.getBackgroundStyleById(SpecialBackground.copilot);\n\t\t},\n\t\tpreparedText(): string\n\t\t{\n\t\t\treturn this.loc('IM_CONTENT_COPILOT_EMPTY_STATE_MESSAGE_MSGVER_1', {\n\t\t\t\t'#BR#': '\\n',\n\t\t\t});\n\t\t},\n\t\tbuttonColorScheme(): CustomColorScheme\n\t\t{\n\t\t\treturn {\n\t\t\t\tborderColor: Color.transparent,\n\t\t\t\tbackgroundColor: BUTTON_BACKGROUND_COLOR,\n\t\t\t\ticonColor: BUTTON_TEXT_COLOR,\n\t\t\t\ttextColor: BUTTON_TEXT_COLOR,\n\t\t\t\thoverColor: BUTTON_HOVER_COLOR,\n\t\t\t};\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tasync createDefaultChat(): Promise<void>\n\t\t{\n\t\t\tthis.isCreatingChat = true;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tconst newDialogId = await this.getCopilotService().createDefaultChat();\n\n\t\t\t\tthis.isCreatingChat = false;\n\t\t\t\tvoid Messenger.openCopilot(newDialogId);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tthis.isCreatingChat = false;\n\t\t\t}\n\t\t},\n\t\tgetCopilotService(): CopilotService\n\t\t{\n\t\t\tif (!this.copilotService)\n\t\t\t{\n\t\t\t\tthis.copilotService = new CopilotService();\n\t\t\t}\n\n\t\t\treturn this.copilotService;\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-copilot-empty-state__container\" :style=\"backgroundStyle\">\n\t\t\t<div class=\"bx-im-content-copilot-empty-state__content\">\n\t\t\t\t<div class=\"bx-im-content-copilot-empty-state__icon\"></div>\n\t\t\t\t<div class=\"bx-im-content-copilot-empty-state__text\">{{ preparedText }}</div>\n\t\t\t\t<ChatButton\n\t\t\t\t\tclass=\"--black-loader\"\n\t\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t\t:customColorScheme=\"buttonColorScheme\"\n\t\t\t\t\t:text=\"loc('IM_CONTENT_COPILOT_EMPTY_STATE_ASK_QUESTION')\"\n\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t:isLoading=\"isCreatingChat\"\n\t\t\t\t\t@click=\"createDefaultChat\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BaseEmptyState, IconClass, EmptyStateListItemName } from './base/base';\n\nimport type { EmptyStateListItem } from './base/base';\n\n// @vue/component\nexport const TaskEmptyState = {\n\tname: 'TaskFeatureListEmptyState',\n\tcomponents: { BaseEmptyState },\n\tcomputed: {\n\t\tIconClass: () => IconClass,\n\t\temptyStateListItems(): EmptyStateListItem[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('IM_CONTENT_TASK_START_FEATURE_LIST_BLOCK_TITLE_1'),\n\t\t\t\t\tsubtitle: this.loc('IM_CONTENT_TASK_START_FEATURE_LIST_BLOCK_SUBTITLE_1'),\n\t\t\t\t\tname: EmptyStateListItemName.audio,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('IM_CONTENT_TASK_START_FEATURE_LIST_BLOCK_TITLE_2'),\n\t\t\t\t\tsubtitle: this.loc('IM_CONTENT_TASK_START_FEATURE_LIST_BLOCK_SUBTITLE_2'),\n\t\t\t\t\tname: EmptyStateListItemName.messages,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('IM_CONTENT_TASK_START_FEATURE_LIST_BLOCK_TITLE_3'),\n\t\t\t\t\tsubtitle: this.loc('IM_CONTENT_TASK_START_FEATURE_LIST_BLOCK_SUBTITLE_3'),\n\t\t\t\t\tname: EmptyStateListItemName.chat,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmethods: {\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseEmptyState\n\t\t\t:text=\"loc('IM_CONTENT_TASK_START_FEATURE_LIST_TITLE')\"\n\t\t\t:listItems=\"emptyStateListItems\"\n\t\t\t:iconClassName=\"IconClass.list\"\n\t\t/>\n\t`,\n};\n","import { Type, type JsonObject } from 'main.core';\n\nimport { Core } from 'im.v2.application.core';\nimport { Logger } from 'im.v2.lib.logger';\nimport { RestMethod } from 'im.v2.const';\n\ntype RawUser = {\n\tid: number,\n\t[key: string]: any,\n};\ntype PullUserActivityResult = {\n\t[userId: string]: number,\n};\n\nexport class UserService\n{\n\tasync updateLastActivityDate(userId: number): void\n\t{\n\t\tif (this.#isPullServerWithUserStatusSupport())\n\t\t{\n\t\t\tconst lastActivityDate = await this.#getUserActivityFromPull(userId);\n\t\t\tif (!lastActivityDate)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.#updateUserModel(userId, { lastActivityDate });\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst userData = await this.#requestUserData(userId);\n\n\t\tthis.#updateUserModel(userId, userData);\n\t}\n\n\tasync #getUserActivityFromPull(userId: number): Promise<null | Date>\n\t{\n\t\tconst result: PullUserActivityResult = await Core.getPullClient().getUsersLastSeen([userId])\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('UserService: error getting user activity from P&P', error);\n\t\t\t\tthrow error;\n\t\t\t});\n\n\t\tif (!Type.isNumber(result[userId]))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst activityDateAgo = result[userId] * 1000;\n\n\t\treturn new Date(Date.now() - activityDateAgo);\n\t}\n\n\tasync #requestUserData(userId: number): Promise<RawUser>\n\t{\n\t\tLogger.warn(`UserService: get actual user data for - ${userId}`);\n\t\tconst answer = await Core.getRestClient().callMethod(RestMethod.imUserGet, { ID: userId })\n\t\t\t.catch((result: RestResult) => {\n\t\t\t\tconsole.error('UserService: error getting user data', result.error());\n\t\t\t});\n\n\t\treturn answer.data();\n\t}\n\n\tasync #updateUserModel(userId: number, userFields: JsonObject): void\n\t{\n\t\tLogger.warn('UserService: update user data', userFields);\n\n\t\tvoid Core.getStore().dispatch('users/update', {\n\t\t\tid: userId,\n\t\t\tfields: userFields,\n\t\t});\n\t}\n\n\t#isPullServerWithUserStatusSupport(): boolean\n\t{\n\t\treturn Core.getPullClient().isJsonRpc();\n\t}\n}\n","import 'ui.notification';\n\nimport { Messenger } from 'im.public';\nimport { ChatType, Layout, UserRole, ErrorCode, PromoId } from 'im.v2.const';\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { LayoutManager } from 'im.v2.lib.layout';\nimport { Logger } from 'im.v2.lib.logger';\nimport { Utils } from 'im.v2.lib.utils';\nimport { ChannelManager } from 'im.v2.lib.channel';\nimport { PromoManager } from 'im.v2.lib.promo';\nimport { ChatService } from 'im.v2.provider.service.chat';\nimport { BaseChatContent } from 'im.v2.component.content.elements';\n\nimport { ChannelContent } from '../../content/channel/channel';\nimport { CollabContent } from '../../content/collab/collab';\nimport { MultidialogContent } from '../../content/multidialog/multidialog';\nimport { NotesContent } from '../../content/notes/notes-content';\nimport { CopilotContent } from '../../content/copilot/copilot';\nimport { AiAssistantBotContent } from '../../content/ai-assistant-bot/ai-assistant-bot';\nimport { TaskCommentsContent } from '../../content/task-comments/task-comments';\nimport { BaseEmptyState as EmptyState } from './components/empty-state/base/base';\nimport { ChannelEmptyState } from './components/empty-state/channel';\nimport { EmbeddedChatPromoEmptyState } from './components/empty-state/chat/embedded-promo';\nimport { EmbeddedChatEmptyState } from './components/empty-state/chat/embedded';\nimport { CollabEmptyState } from './components/empty-state/collab';\nimport { CopilotEmptyState } from './components/empty-state/copilot/copilot';\nimport { TaskEmptyState } from './components/empty-state/task';\nimport { UserService } from './classes/user-service';\n\nimport './css/default-chat-content.css';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\nimport type { ImModelChat, ImModelLayout } from 'im.v2.model';\n\ntype ContentComponentConfigItem = {\n\tcondition: boolean,\n\tcomponent: BitrixVueComponentProps\n};\n\n// @vue/component\nexport const ChatOpener = {\n\tname: 'ChatOpener',\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tcomputed:\n\t{\n\t\tlayout(): ImModelLayout\n\t\t{\n\t\t\treturn this.$store.getters['application/getLayout'];\n\t\t},\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.user;\n\t\t},\n\t\tisChannel(): boolean\n\t\t{\n\t\t\treturn ChannelManager.isChannel(this.dialogId);\n\t\t},\n\t\tisCollab(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.collab;\n\t\t},\n\t\tisMultidialog(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['sidebar/multidialog/isSupport'](this.dialogId);\n\t\t},\n\t\tisNotes(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['chats/isNotes'](this.dialogId);\n\t\t},\n\t\tisCopilot(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.copilot;\n\t\t},\n\t\tisAiAssistantBot(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['users/bots/isAiAssistant'](this.dialogId);\n\t\t},\n\t\tisTaskComments(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.taskComments;\n\t\t},\n\t\tisGuest(): boolean\n\t\t{\n\t\t\treturn this.dialog.role === UserRole.guest;\n\t\t},\n\t\tcontentComponentConfig(): ContentComponentConfigItem[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tcondition: this.isChannel,\n\t\t\t\t\tcomponent: ChannelContent,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcondition: this.isCollab,\n\t\t\t\t\tcomponent: CollabContent,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcondition: this.isMultidialog,\n\t\t\t\t\tcomponent: MultidialogContent,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcondition: this.isNotes,\n\t\t\t\t\tcomponent: NotesContent,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcondition: this.isCopilot,\n\t\t\t\t\tcomponent: CopilotContent,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcondition: this.isAiAssistantBot,\n\t\t\t\t\tcomponent: AiAssistantBotContent,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcondition: this.isTaskComments,\n\t\t\t\t\tcomponent: TaskCommentsContent,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tcontentComponent(): BitrixVueComponentProps\n\t\t{\n\t\t\tconst matchingItem: ContentComponentConfigItem = this.contentComponentConfig.find((item) => {\n\t\t\t\treturn item.condition === true;\n\t\t\t});\n\n\t\t\treturn matchingItem ? matchingItem.component : BaseChatContent;\n\t\t},\n\t\temptyStateComponent(): BitrixVueComponentProps\n\t\t{\n\t\t\tconst EmptyStateComponentByLayout = {\n\t\t\t\t[Layout.channel]: ChannelEmptyState,\n\t\t\t\t[Layout.collab]: CollabEmptyState,\n\t\t\t\t[Layout.copilot]: CopilotEmptyState,\n\t\t\t\t[Layout.chat]: this.chatEmptyStateComponent,\n\t\t\t\t[Layout.taskComments]: TaskEmptyState,\n\t\t\t\tdefault: EmptyState,\n\t\t\t};\n\n\t\t\treturn EmptyStateComponentByLayout[this.layout.name] ?? EmptyStateComponentByLayout.default;\n\t\t},\n\t\tchatEmptyStateComponent(): BitrixVueComponentProps\n\t\t{\n\t\t\tconst isEmbeddedMode = LayoutManager.getInstance().isEmbeddedMode();\n\t\t\tconst needToShowPromoEmptyState = PromoManager.getInstance().needToShow(PromoId.embeddedChatEmptyState);\n\n\t\t\tif (!isEmbeddedMode)\n\t\t\t{\n\t\t\t\treturn EmptyState;\n\t\t\t}\n\n\t\t\treturn needToShowPromoEmptyState ? EmbeddedChatPromoEmptyState : EmbeddedChatEmptyState;\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tdialogId(newValue, oldValue)\n\t\t{\n\t\t\tLogger.warn(`ChatContent: switching from ${oldValue || 'empty'} to ${newValue}`);\n\t\t\tthis.onChatChange();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tif (!this.dialogId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.onChatChange();\n\t},\n\tmethods:\n\t{\n\t\tasync onChatChange(): void\n\t\t{\n\t\t\tif (this.dialogId === '')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (Utils.dialog.isExternalId(this.dialogId))\n\t\t\t{\n\t\t\t\tconst realDialogId = await this.getChatService().prepareDialogId(this.dialogId);\n\n\t\t\t\tvoid LayoutManager.getInstance().setLayout({\n\t\t\t\t\tname: Layout.chat,\n\t\t\t\t\tentityId: realDialogId,\n\t\t\t\t\tcontextId: this.layout.contextId,\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.dialog.inited)\n\t\t\t{\n\t\t\t\tLogger.warn(`ChatContent: chat ${this.dialogId} is already loaded`);\n\t\t\t\tif (this.isUser)\n\t\t\t\t{\n\t\t\t\t\tconst userId = parseInt(this.dialog.dialogId, 10);\n\t\t\t\t\tthis.getUserService().updateLastActivityDate(userId);\n\t\t\t\t}\n\t\t\t\telse if (this.isChannel && !this.isGuest)\n\t\t\t\t{\n\t\t\t\t\tLogger.warn(`ChatContent: channel ${this.dialogId} is loaded, loading comments metadata`);\n\t\t\t\t\tvoid this.getChatService().loadCommentInfo(this.dialogId);\n\t\t\t\t}\n\t\t\t\tAnalytics.getInstance().onOpenChat(this.dialog);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.dialog.loading)\n\t\t\t{\n\t\t\t\tLogger.warn(`ChatContent: chat ${this.dialogId} is loading`);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.layout.contextId)\n\t\t\t{\n\t\t\t\tawait this.loadChatWithContext();\n\t\t\t\tAnalytics.getInstance().onOpenChat(this.dialog);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait this.loadChat();\n\t\t\tAnalytics.getInstance().onOpenChat(this.dialog);\n\t\t},\n\t\tasync loadChatWithContext(): Promise\n\t\t{\n\t\t\tLogger.warn(`ChatContent: loading chat ${this.dialogId} with context - ${this.layout.contextId}`);\n\n\t\t\tawait this.getChatService().loadChatWithContext(this.dialogId, this.layout.contextId)\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tthis.sendAnalytics(error);\n\t\t\t\t\tMessenger.openChat();\n\t\t\t\t});\n\n\t\t\tLogger.warn(`ChatContent: chat ${this.dialogId} is loaded with context of ${this.layout.contextId}`);\n\t\t},\n\t\tasync loadChat(): Promise\n\t\t{\n\t\t\tLogger.warn(`ChatContent: loading chat ${this.dialogId}`);\n\n\t\t\tawait this.getChatService().loadChatWithMessages(this.dialogId)\n\t\t\t\t.catch(() => {\n\t\t\t\t\tMessenger.openChat();\n\t\t\t\t});\n\n\t\t\tLogger.warn(`ChatContent: chat ${this.dialogId} is loaded`);\n\t\t},\n\t\tsendAnalytics(error: Error)\n\t\t{\n\t\t\tif (error.code !== ErrorCode.message.notFound)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tAnalytics.getInstance().messageDelete.onNotFoundNotification({ dialogId: this.dialogId });\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tgetUserService(): UserService\n\t\t{\n\t\t\tif (!this.userService)\n\t\t\t{\n\t\t\t\tthis.userService = new UserService();\n\t\t\t}\n\n\t\t\treturn this.userService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-default-chat__container\">\n\t\t\t<component :is=\"emptyStateComponent\" v-if=\"!dialogId\" />\n\t\t\t<component :is=\"contentComponent\" v-else :dialogId=\"dialogId\" />\n\t\t</div>\n\t`,\n};\n","import { Toggle, ToggleSize } from 'im.v2.component.elements.toggle';\nimport { CommentsService } from 'im.v2.provider.service.comments';\n\nimport '../css/follow-toggle.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const SubscribeToggle = {\n\tname: 'SubscribeToggle',\n\tcomponents: { Toggle },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tToggleSize: () => ToggleSize,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tpostMessageId(): ?number\n\t\t{\n\t\t\treturn this.$store.getters['messages/comments/getMessageIdByChatId'](this.dialog.chatId);\n\t\t},\n\t\tisSubscribed(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['messages/comments/isUserSubscribed'](this.postMessageId);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonToggleClick(): void\n\t\t{\n\t\t\tif (this.isSubscribed)\n\t\t\t{\n\t\t\t\tCommentsService.unsubscribe(this.postMessageId);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tCommentsService.subscribe(this.postMessageId);\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div @click=\"onToggleClick\" class=\"bx-im-comments-header-follow__container\">\n\t\t\t<div class=\"bx-im-comments-header-follow__text\">{{ loc('IM_CONTENT_COMMENTS_FOLLOW_TOGGLE_TEXT') }}</div>\n\t\t\t<Toggle :size=\"ToggleSize.M\" :isEnabled=\"isSubscribed\" />\n\t\t</div>\n\t`,\n};\n","import { EventType, ActionByRole } from 'im.v2.const';\nimport { AvatarSize, ChatAvatar } from 'im.v2.component.elements.avatar';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ChatHeader } from 'im.v2.component.content.elements';\n\nimport { SubscribeToggle } from './subscribe-toggle';\n\nimport '../css/header.css';\n\nimport type { EventEmitter } from 'main.core.events';\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const CommentsHeader = {\n\tname: 'CommentsHeader',\n\tcomponents: { ChatHeader, ChatAvatar, SubscribeToggle },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tchannelId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\tchannel(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.channelId, true);\n\t\t},\n\t\tshowSubscribeToggle(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformActionByRole(ActionByRole.subscribeToComments, this.dialogId);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonBackClick()\n\t\t{\n\t\t\tthis.getEmitter().emit(EventType.dialog.closeComments);\n\t\t},\n\t\tgetEmitter(): EventEmitter\n\t\t{\n\t\t\treturn this.$Bitrix.eventEmitter;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatHeader\n\t\t\t:dialogId=\"dialogId\"\n\t\t\tclass=\"bx-im-comment-header__container\"\n\t\t>\n\t\t\t<template #left>\n\t\t\t\t<div @click=\"onBackClick\" class=\"bx-im-comment-header__back\"></div>\n\t\t\t\t<div class=\"bx-im-comment-header__info\">\n\t\t\t\t\t<div class=\"bx-im-comment-header__title\">{{ loc('IM_CONTENT_COMMENTS_HEADER_TITLE') }}</div>\n\t\t\t\t\t<div class=\"bx-im-comment-header__subtitle\">\n\t\t\t\t\t\t<div class=\"bx-im-comment-header__subtitle_avatar\">\n\t\t\t\t\t\t\t<ChatAvatar :avatarDialogId=\"channelId\" :size=\"AvatarSize.XS\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-im-comment-header__subtitle_text\">{{ channel.name }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-if=\"showSubscribeToggle\" #before-actions>\n\t\t\t\t<SubscribeToggle :dialogId=\"dialogId\" />\n\t\t\t</template>\n\t\t</ChatHeader>\n\t`,\n};\n","import { type JsonObject } from 'main.core';\n\nimport '../css/dialog-loader.css';\n\n// @vue/component\nexport const CommentsDialogLoader = {\n\tname: 'CommentsDialogLoader',\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-comments-dialog-loader__container\">\n\t\t\t<div class=\"bx-im-comments-dialog-loader__spinner\"></div>\n\t\t</div>\n\t`,\n};\n","import {\n\tMessageList,\n\tAuthorGroup,\n\tMessageComponents,\n\tCollectionManager,\n} from 'im.v2.component.message-list';\nimport { MessageComponentManager } from 'im.v2.lib.message-component';\nimport { MessageComponent } from 'im.v2.const';\n\nimport { CommentsDialogLoader } from './dialog-loader';\n\nimport '../css/message-list.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelChat, ImModelMessage } from 'im.v2.model';\n\n// @vue/component\nexport const CommentsMessageList = {\n\tname: 'CommentsMessageList',\n\tcomponents: { MessageList, CommentsDialogLoader, AuthorGroup, ...MessageComponents },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tshowPostMessage(): boolean\n\t\t{\n\t\t\treturn this.dialog.inited && !this.dialog.hasPrevPage;\n\t\t},\n\t\tpostMessageId(): number\n\t\t{\n\t\t\treturn this.$store.getters['messages/comments/getMessageIdByChatId'](this.dialog.chatId);\n\t\t},\n\t\tpostMessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.$store.getters['messages/getById'](this.postMessageId);\n\t\t},\n\t\tpostAuthorGroup(): JsonObject | null\n\t\t{\n\t\t\tif (!this.dialog.inited)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst collectionManager = new CollectionManager(this.dialogId);\n\n\t\t\treturn collectionManager.formatAuthorGroup(this.postMessage);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tgetMessageComponentName(message: ImModelMessage): $Values<typeof MessageComponent>\n\t\t{\n\t\t\treturn (new MessageComponentManager(message)).getName();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<MessageList\n\t\t\t:dialogId=\"dialogId\"\n\t\t\tref=\"messageList\"\n\t\t>\n\t\t\t<template #loader>\n\t\t\t\t<CommentsDialogLoader />\n\t\t\t</template>\n\t\t\t<template v-if=\"showPostMessage\" #before-messages>\n\t\t\t\t<div class=\"bx-im-comments-message-list__channel-post\">\n\t\t\t\t\t<AuthorGroup :item=\"postAuthorGroup\" :contextDialogId=\"dialogId\" :withAvatarMenu=\"false\">\n\t\t\t\t\t\t<template #message>\n\t\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t\t:is=\"getMessageComponentName(postMessage)\"\n\t\t\t\t\t\t\t\t:item=\"postMessage\"\n\t\t\t\t\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t\t\t\t\t:key=\"postMessage.id\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</component>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</AuthorGroup>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</MessageList>\n\t`,\n};\n","import { Logger } from 'im.v2.lib.logger';\nimport { ImModelMessage } from 'im.v2.model';\n\nimport { ChatDialog, PinnedMessages } from 'im.v2.component.dialog.chat';\n\nimport { CommentsMessageList } from './message-list';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const CommentsDialog = {\n\tname: 'CommentsDialog',\n\tcomponents: { ChatDialog, CommentsMessageList, PinnedMessages },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tdialogInited(): boolean\n\t\t{\n\t\t\treturn this.dialog.inited;\n\t\t},\n\t\tpostMessageId(): number\n\t\t{\n\t\t\treturn this.$store.getters['messages/comments/getMessageIdByChatId'](this.dialog.chatId);\n\t\t},\n\t\tpostMessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.$store.getters['messages/getById'](this.postMessageId);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tasync goToPostMessageContext()\n\t\t{\n\t\t\tconst dialog = this.$refs.dialog;\n\n\t\t\tconst postMessageIsShown = this.dialogInited && !this.dialog.hasPrevPage;\n\t\t\tif (postMessageIsShown)\n\t\t\t{\n\t\t\t\tawait dialog.getScrollManager().animatedScrollToMessage(this.postMessageId);\n\t\t\t\tdialog.highlightMessage(this.postMessageId);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdialog.showLoadingBar();\n\t\t\tawait dialog.getMessageService().loadFirstPage();\n\t\t\tawait this.$nextTick();\n\t\t\tdialog.hideLoadingBar();\n\t\t\tdialog.getScrollManager().scrollToMessage(this.postMessageId);\n\t\t\tawait this.$nextTick();\n\t\t\tdialog.highlightMessage(this.postMessageId);\n\t\t},\n\t\tonPinnedPostMessageClick()\n\t\t{\n\t\t\tthis.goToPostMessageContext();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatDialog ref=\"dialog\" :dialogId=\"dialogId\" :saveScrollOnExit=\"false\" :clearOnExit=\"true\">\n\t\t\t<template v-if=\"dialogInited\" #pinned-panel>\n\t\t\t\t<PinnedMessages\n\t\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t\t:messages=\"[postMessage]\"\n\t\t\t\t\t@messageClick=\"onPinnedPostMessageClick\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t\t<template #message-list>\n\t\t\t\t<CommentsMessageList :dialogId=\"dialogId\" />\n\t\t\t</template>\n\t\t</ChatDialog>\n\t`,\n};\n","import { ChatTextarea } from 'im.v2.component.textarea';\n\n// @vue/component\nexport const CommentsTextarea = {\n\tname: 'CommentsTextarea',\n\tcomponents: { ChatTextarea },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatTextarea\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:withMarket=\"false\"\n\t\t\tclass=\"bx-im-comments-send-panel__container\"\n\t\t/>\n\t`,\n};\n","import { ChatButton, ButtonColor, ButtonSize } from 'im.v2.component.elements.button';\nimport { ChatService } from 'im.v2.provider.service.chat';\n\n// @vue/component\nexport const JoinPanel = {\n\tcomponents: { ChatButton },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t},\n\tmethods:\n\t{\n\t\tonButtonClick()\n\t\t{\n\t\t\tthis.getChatService().joinChat(this.dialogId);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat__textarea_placeholder\">\n\t\t\t<ChatButton\n\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t:color=\"ButtonColor.Primary\"\n\t\t\t\t:text=\"loc('IM_CONTENT_BLOCKED_TEXTAREA_JOIN_CHANNEL_V2')\"\n\t\t\t\t:isRounded=\"true\"\n\t\t\t\t@click=\"onButtonClick\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { BaseChatContent } from 'im.v2.component.content.elements';\n\nimport { CommentsHeader } from './components/header';\nimport { CommentsDialog } from './components/dialog';\nimport { CommentsTextarea } from './components/textarea';\nimport { JoinPanel } from './components/join-panel';\n\nimport './css/comments-content.css';\n\nexport const CommentsContent = {\n\tname: 'CommentsContent',\n\tcomponents: { BaseChatContent, CommentsHeader, CommentsDialog, CommentsTextarea, JoinPanel },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tchannelId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseChatContent :dialogId=\"dialogId\">\n\t\t\t<template #header>\n\t\t\t\t<CommentsHeader :dialogId=\"dialogId\" :channelId=\"channelId\" :key=\"dialogId\" />\n\t\t\t</template>\n\t\t\t<template #dialog>\n\t\t\t\t<CommentsDialog :dialogId=\"dialogId\" :key=\"dialogId\" />\n\t\t\t</template>\n\t\t\t<template #join-panel>\n\t\t\t\t<JoinPanel :dialogId=\"dialogId\" />\n\t\t\t</template>\n\t\t\t<template #textarea=\"{ onTextareaMount }\">\n\t\t\t\t<CommentsTextarea :dialogId=\"dialogId\" :key=\"dialogId\" @mounted=\"onTextareaMount\" />\n\t\t\t</template>\n\t\t</BaseChatContent>\n\t`,\n};\n","import { Analytics } from 'im.v2.lib.analytics';\nimport { Logger } from 'im.v2.lib.logger';\nimport { ChatService } from 'im.v2.provider.service.chat';\n\nimport { CommentsContent } from '../../content/comments/comments';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelChat, ImModelCommentInfo } from 'im.v2.model';\n\n// @vue/component\nexport const CommentsOpener = {\n\tname: 'CommentsOpener',\n\tcomponents: { CommentsContent },\n\tprops:\n\t{\n\t\tpostId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tchannelId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ?ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/getByChatId'](this.commentsChatId);\n\t\t},\n\t\tcommentInfo(): ImModelCommentInfo\n\t\t{\n\t\t\treturn this.$store.getters['messages/comments/getByMessageId'](this.postId);\n\t\t},\n\t\tcommentsChatId(): number\n\t\t{\n\t\t\treturn this.commentInfo.chatId;\n\t\t},\n\t\tcommentsDialogId(): string\n\t\t{\n\t\t\tif (!this.dialog)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.dialog.dialogId;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.onCreated();\n\t},\n\tmethods:\n\t{\n\t\tasync onCreated()\n\t\t{\n\t\t\tawait this.loadChat();\n\t\t\tAnalytics.getInstance().onOpenChat(this.dialog);\n\t\t},\n\t\tasync loadChat(): Promise\n\t\t{\n\t\t\tLogger.warn(`CommentsContent: loading comments for post ${this.postId}`);\n\n\t\t\tawait this.getChatService().loadComments(this.postId)\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.$emit('close');\n\t\t\t\t});\n\n\t\t\tLogger.warn(`CommentsContent: comments for post ${this.postId} are loaded`);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-comments__container\">\n\t\t\t<CommentsContent :dialogId=\"commentsDialogId\" :channelId=\"channelId\" />\n\t\t</div>\n\t`,\n};\n","import { EventEmitter, BaseEvent } from 'main.core.events';\n\nimport { EventType } from 'im.v2.const';\n\nimport { ChatOpener } from './components/openers/chat/chat';\nimport { CommentsOpener } from './components/openers/comments/comments';\n\nimport './css/chat-content.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelLayout } from 'im.v2.model';\n\nexport { AiAssistantBotContent } from './components/content/ai-assistant-bot/ai-assistant-bot';\n\n// @vue/component\nexport const ChatContent = {\n\tname: 'ChatContent',\n\tcomponents: { ChatOpener, CommentsOpener },\n\tprops:\n\t{\n\t\tentityId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tcommentsPostId: 0,\n\t\t\tcommentsAnimationFlag: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tlayout(): ImModelLayout\n\t\t{\n\t\t\treturn this.$store.getters['application/getLayout'];\n\t\t},\n\t\tshowComments(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['messages/comments/areOpened'];\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tlayout()\n\t\t{\n\t\t\tthis.closeComments();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.dialog.closeComments, this.onCloseComments);\n\n\t\tthis.getEmitter().subscribe(EventType.dialog.openComments, this.onOpenComments);\n\t\tthis.getEmitter().subscribe(EventType.dialog.closeComments, this.onCloseComments);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tEventEmitter.unsubscribe(EventType.dialog.closeComments, this.onCloseComments);\n\n\t\tthis.getEmitter().unsubscribe(EventType.dialog.openComments, this.onOpenComments);\n\t\tthis.getEmitter().unsubscribe(EventType.dialog.closeComments, this.onCloseComments);\n\t},\n\tmethods:\n\t{\n\t\tonOpenComments(event: BaseEvent<{ messageId: number }>)\n\t\t{\n\t\t\tconst { messageId } = event.getData();\n\t\t\tthis.commentsPostId = messageId;\n\t\t\tthis.commentsAnimationFlag = true;\n\t\t\tthis.$store.dispatch('messages/comments/setOpened', {\n\t\t\t\tchannelDialogId: this.entityId,\n\t\t\t\tcommentsPostId: this.commentsPostId,\n\t\t\t});\n\t\t},\n\t\tonCloseComments()\n\t\t{\n\t\t\tthis.closeComments();\n\t\t},\n\t\tcloseComments()\n\t\t{\n\t\t\tthis.commentsPostId = 0;\n\t\t\tthis.$store.dispatch('messages/comments/setClosed');\n\t\t},\n\t\tonCommentsAnimationEnd()\n\t\t{\n\t\t\tthis.commentsAnimationFlag = false;\n\t\t},\n\t\tgetEmitter(): EventEmitter\n\t\t{\n\t\t\treturn this.$Bitrix.eventEmitter;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ChatOpener :dialogId=\"entityId\" :class=\"{'--comments-show-animation': commentsAnimationFlag}\" />\n\t\t<Transition name=\"comments-content\" @after-enter=\"onCommentsAnimationEnd\">\n\t\t\t<CommentsOpener\n\t\t\t\tv-if=\"showComments\"\n\t\t\t\t:postId=\"commentsPostId\"\n\t\t\t\t:channelId=\"entityId\"\n\t\t\t/>\n\t\t</Transition>\n\t`,\n};\n"],"names":["CommentsButton","name","components","FloatButton","props","counter","type","Number","required","computed","floatButtonProps","icon","FloatButtonIcon","comment","color","FloatButtonColor","success","template","ChannelDialog","ChatDialog","dialogId","String","data","lastScrolledChatId","dialog","$store","getters","layout","isGuest","role","UserRole","guest","isChatLayout","Layout","chat","channelComments","chatId","totalChannelCommentsCounter","Object","values","forEach","commentCounter","showCommentsButton","beforeUnmount","readAllChannelComments","methods","onCommentsButtonClick","chatIdToJump","getNextChatIdToJump","messageIdToJump","$refs","goToMessageContext","position","ScrollManager","scrollPosition","messageBottom","goToMessageContextByCommentsChatId","showLoadingBar","messageId","getMessageService","loadContextByChatId","hideLoadingBar","console","error","$nextTick","getScrollManager","scrollToMessage","highlightMessage","commentChatIds","getCommentsChatIds","sort","a","z","filteredChatIds","filter","length","keys","map","CommentsService","JoinPanel","ChatButton","ButtonSize","ButtonColor","onButtonClick","getChatService","joinChat","chatService","ChatService","loc","phraseCode","$Bitrix","Loc","getMessage","ChannelTextarea","ChatTextarea","default","ChannelContent","BaseChatContent","CollabTitle","ChatTitle","LineLoader","FadeAnimation","inject","collabInfo","guestCounter","guestCount","userCounterText","getMessagePlural","userCounter","guestCounterText","onMembersClick","currentSidebarPanel","SidebarDetailBlock","members","getEmitter","emit","EventType","sidebar","close","panel","open","eventEmitter","IconKey","freeze","addToChat","collabEntities","CollabTooltipContent","constructor","params","title","text","iconKey","render","Tag","EntityCounter","preparedCounter","toString","EntityLink","compactMode","Boolean","url","showCounter","Type","isNull","onLinkClick","Analytics","getInstance","onClick","BX","SidePanel","Instance","cacheable","customLeftBoundary","EntitiesPanel","highlightMode","CollabEntityType","tasksInfo","entities","tasks","tasksUrl","tasksCounter","filesInfo","files","filesUrl","calendarInfo","calendar","calendarUrl","calendarCounter","mounted","initPromo","promoManager","PromoManager","promoId","PromoId","promoParams","needToShow","showCollabEntitiesPromo","tooltip","Tooltip","bindElement","content","renderTooltipContent","minWidth","popupOptions","offsetTop","offsetLeft","autoHide","closeIcon","closeIconSize","CloseIconSize","LARGE","events","onPopupShow","onPopupClose","show","markAsWatched","tooltipContent","PromoMessages","membersNotInvitedOneDayToCollab","membersNotInvitedFourDayToCollab","AddToChatButton","AddToCollab","withAnimation","emits","showAddToChatPopup","openAddToChatPopup","userAdd","onChatHeaderClick","closeAddToChatPopup","$emit","showMembersNotInvitedPromo","CollabHeader","ChatHeader","AddToChatPopup","PulseAnimation","showAddToChatPopupDelayed","isInited","inited","watch","created","subscribe","header","onOpenAddToChatPopup","unsubscribe","onCompactModeChange","CollabContent","dialogInited","newValue","oldValue","collaberNotAcceptInvitationOneDay","showNotAcceptInvitationPromo","Notifier","collab","onCollaberNotAcceptInvitation","MultidialogChatTitle","EditableChatTitle","isSupportBot","subtitle","MultidialogHeader","MultidialogContent","NotesContent","titleType","parseInt","Core","getUserId","ChatTitleType","notes","POPUP_ID","AddToChatHint","MessengerPopup","config","darkMode","angle","width","className","contentBorderRadius","AddToChat","showInviteButton","showAddToChatHint","needCopilotInRecentTabHint","copilotInRecentTab","needAddUsersToChatHint","addUsersToCopilotChat","showHint","closeHint","onHintHide","CopilotChatHeader","ChatAvatar","buttonPanelReady","AvatarSize","isGroupCopilotChat","CopilotManager","copilotRole","formattedUserCounter","onNewTitleSubmit","newTitle","renameChat","onButtonPanelReady","replacements","ReasoningButton","directives","hint","Chip","OutlineIcons","ChipDesign","ChipSize","isActive","modelCode","code","isReasoningAvailable","FeatureManager","isFeatureAvailable","Feature","isCopilotReasoningAvailable","isReasoningAvailableInModel","design","Disabled","OutlineCopilot","Outline","toggle","dispatch","copilot","onToggleReasoning","CopilotTextarea","CopilotContent","MAX_INTEGRATION_NAME_LENGTH","MARTA_ANALYTICS_CONTEXT","McpIntegration","isSelectorOpened","mcpAuth","id","hasSelectedMcpAuth","chipDesign","OutlineAccent2","isAvailable","aiAssistantMcpSelectorAvailable","defaultIcon","mcpIcon","APPS","src","alt","chipName","needEllipsis","slice","clear","selector","destroy","aiAssistant","onMcpIntegrationClick","getSelector","hide","McpSelector","context","targetNode","dialogOptions","entityOptions","agentMode","onSelect","event","auth","mcp","getData","setMcpAuth","iconUrl","onHide","onShow","onChipClearClick","HealthCheckService","getEndpoint","langId","serviceHealthUrl","getApplicationData","URL","searchParams","set","getServiceHealthStatus","endpoint","Promise","resolve","Ajax","get","rawJson","response","JSON","parse","result","ICON_SIZE","ServiceHealthPanel","BIcon","isShow","Color","isServiceHealthPanelShown","HealthCheckManager","getIsShown","processedTitle","util","strip_tags","processedText","setData","statusTitle","statusInfo","setIsShown","AiAssistantBotContent","withSidebar","TaskCommentsContent","FeatureBlock","IconClass","group","list","EmptyStateListItemName","audio","messages","collaboration","business","BaseEmptyState","subtext","backgroundId","listItems","Array","iconClassName","items","iconClass","isEmptyRecent","preparedText","preparedSubtext","LegacyRecentService","getCollection","backgroundStyle","isStringFilled","isNumber","ThemeManager","getBackgroundStyleById","getCurrentBackgroundStyle","ChannelEmptyState","SHOWCASE_TOOLS_PHRASES","EmbeddedChatPromoEmptyState","canInviteUsers","intranetInviteAvailable","preparedTitle","preparedInviteText","openInviteSliderHandler","embeddedChatEmptyState","EmbeddedChatEmptyState","onInviteActionClick","analyticsContext","sliderInvite","getEmptyStateContext","InviteManager","openInviteSlider","CollabEmptyState","SpecialBackground","canCreateCollab","collabCreationAvailable","canCreate","PermissionManager","canPerformActionByUserType","ActionByUserType","createCollab","createButtonColorScheme","borderColor","transparent","backgroundColor","white","iconColor","gray90","textColor","hoverColor","textHoverColor","collab70","collaberEmptyStateListItems","baseEmptyStateListItems","emptyStateListItems","isCurrentUserCollaber","currentUser","UserType","collaber","onCreateClick","chatCreate","onCollabEmptyStateCreateClick","Messenger","openChatCreation","CreatableChat","BUTTON_BACKGROUND_COLOR","BUTTON_HOVER_COLOR","BUTTON_TEXT_COLOR","CopilotEmptyState","isCreatingChat","buttonColorScheme","createDefaultChat","newDialogId","getCopilotService","openCopilot","copilotService","CopilotService","TaskEmptyState","UserService","updateLastActivityDate","userId","lastActivityDate","userData","getPullClient","getUsersLastSeen","catch","activityDateAgo","Date","now","Logger","warn","answer","getRestClient","callMethod","RestMethod","imUserGet","ID","userFields","getStore","fields","isJsonRpc","ChatOpener","isUser","ChatType","user","isChannel","ChannelManager","isCollab","isMultidialog","isNotes","isCopilot","isAiAssistantBot","isTaskComments","taskComments","contentComponentConfig","condition","component","contentComponent","matchingItem","find","item","emptyStateComponent","EmptyStateComponentByLayout","channel","chatEmptyStateComponent","EmptyState","isEmbeddedMode","LayoutManager","needToShowPromoEmptyState","onChatChange","Utils","isExternalId","realDialogId","prepareDialogId","setLayout","entityId","contextId","getUserService","loadCommentInfo","onOpenChat","loading","loadChatWithContext","loadChat","sendAnalytics","openChat","loadChatWithMessages","ErrorCode","message","notFound","messageDelete","onNotFoundNotification","userService","SubscribeToggle","Toggle","ToggleSize","postMessageId","isSubscribed","onToggleClick","CommentsHeader","channelId","showSubscribeToggle","canPerformActionByRole","ActionByRole","subscribeToComments","onBackClick","closeComments","CommentsDialogLoader","CommentsMessageList","MessageList","AuthorGroup","MessageComponents","showPostMessage","hasPrevPage","postMessage","postAuthorGroup","collectionManager","CollectionManager","formatAuthorGroup","getMessageComponentName","MessageComponentManager","getName","CommentsDialog","PinnedMessages","goToPostMessageContext","postMessageIsShown","animatedScrollToMessage","loadFirstPage","onPinnedPostMessageClick","CommentsTextarea","CommentsContent","CommentsOpener","postId","commentsChatId","commentInfo","commentsDialogId","onCreated","loadComments","ChatContent","commentsPostId","commentsAnimationFlag","showComments","EventEmitter","onCloseComments","openComments","onOpenComments","channelDialogId","onCommentsAnimationEnd"],"mappings":"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"}