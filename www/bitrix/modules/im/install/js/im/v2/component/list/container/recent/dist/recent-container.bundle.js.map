{"version":3,"file":"recent-container.bundle.js","sources":["../src/components/header-menu.js","../src/components/create-chat-menu/components/create-chat-help.js","../src/components/create-chat-menu/components/collab/description-banner.js","../src/components/create-chat-menu/components/copilot-role-selection-button.js","../src/components/create-chat-menu/components/invite-promo.js","../src/components/create-chat-menu/create-chat-menu.js","../src/components/unread-slider/components/container.js","../src/components/unread-slider/unread-slider.js","../src/recent-container.js"],"sourcesContent":["import { FeatureManager, Feature } from 'im.v2.lib.feature';\nimport { ChatService } from 'im.v2.provider.service.chat';\nimport { MenuItem } from 'im.v2.component.elements.menu';\nimport { showReadMessagesConfirm } from 'im.v2.lib.confirm';\nimport { BaseHeaderMenu } from 'im.v2.component.list.container.elements.base-header-menu';\n\n// @vue/component\nexport const HeaderMenu = {\n\tcomponents: { BaseHeaderMenu, MenuItem },\n\tprops:\n\t{\n\t\tunreadOnlyMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['toggleUnreadMode'],\n\tcomputed:\n\t{\n\t\tunreadCounter(): number\n\t\t{\n\t\t\tconst counter = this.$store.getters['counters/getTotalChatCounter'];\n\n\t\t\treturn this.unreadOnlyMode ? 0 : counter;\n\t\t},\n\t\tisUnreadRecentModeAvailable(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.unreadRecentModeAvailable);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tasync onReadAllClick(closeCallback: () => void)\n\t\t{\n\t\t\tconst confirmResult = await showReadMessagesConfirm(this.loc('IM_RECENT_HEADER_MENU_READ_ALL_CONFIRM_TEXT'));\n\n\t\t\tif (!confirmResult)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t(new ChatService()).readAll();\n\n\t\t\tcloseCallback();\n\t\t},\n\t\tonToggleUnreadMode(closeCallback: () => void)\n\t\t{\n\t\t\tthis.$emit('toggleUnreadMode');\n\n\t\t\tcloseCallback();\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseHeaderMenu>\n\t\t\t<template #menu-items=\"{ closeCallback }\">\n\t\t\t\t<MenuItem\n\t\t\t\t\t:title=\"loc('IM_RECENT_HEADER_MENU_READ_ALL_MSGVER_1')\"\n\t\t\t\t\t@click=\"onReadAllClick(closeCallback)\"\n\t\t\t\t/>\n\t\t\t\t<MenuItem\n\t\t\t\t\tv-if=\"isUnreadRecentModeAvailable\"\n\t\t\t\t\t:title=\"loc('IM_RECENT_HEADER_MENU_SHOW_UNREAD_ONLY_MSGVER_2')\"\n\t\t\t\t\t:counter=\"unreadCounter\"\n\t\t\t\t\t@click=\"onToggleUnreadMode(closeCallback)\"\n\t\t\t\t/>\n\t\t\t\t<MenuItem\n\t\t\t\t\tv-if=\"false\"\n\t\t\t\t\t:title=\"loc('IM_RECENT_HEADER_MENU_CHAT_GROUPS_TITLE')\"\n\t\t\t\t\t:subtitle=\"loc('IM_RECENT_HEADER_MENU_CHAT_GROUPS_SUBTITLE')\"\n\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</BaseHeaderMenu>\n\t`,\n};\n","import { openHelpdeskArticle } from 'im.v2.lib.helpdesk';\n\nimport '../css/create-chat-help.css';\n\n// @vue/component\nexport const CreateChatHelp = {\n\temits: ['articleOpen'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tmethods:\n\t{\n\t\topenHelpArticle()\n\t\t{\n\t\t\tconst ARTICLE_CODE = '17412872';\n\t\t\topenHelpdeskArticle(ARTICLE_CODE);\n\t\t\tthis.$emit('articleOpen');\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-create-chat-help__container\">\n\t\t\t<div @click=\"openHelpArticle\" class=\"bx-im-create-chat-help__content\">\n\t\t\t\t<div class=\"bx-im-create-chat-help__icon\"></div>\n\t\t\t\t<div class=\"bx-im-create-chat-help__text\">{{ loc('IM_RECENT_CREATE_CHAT_WHAT_TO_CHOOSE') }}</div>\t\n\t\t\t</div>\n\t\t</div>\n\t`\n};","import { Loc } from 'main.core';\n\nimport '../../css/description-banner.css';\n\n// @vue/component\nexport const DescriptionBanner = {\n\tname: 'DescriptionBanner',\n\temits: ['close'],\n\tcomputed:\n\t{\n\t\tpreparedText(): string\n\t\t{\n\t\t\treturn Loc.getMessage('IM_RECENT_CREATE_COLLAB_DESCRIPTION_BANNER', {\n\t\t\t\t'[color_highlight]': '<span class=\"bx-im-create-chat-menu-description-banner__highlight\">',\n\t\t\t\t'[/color_highlight]': '</span>',\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-create-chat-menu-description-banner__container\">\n\t\t\t<div class=\"bx-im-create-chat-menu-description-banner__content\" v-html=\"preparedText\"></div>\n\t\t\t<div class=\"bx-im-create-chat-menu-description-banner__close-icon\" @click.stop=\"$emit('close')\"></div>\n\t\t</div>\n\t`,\n};\n","import '../css/copilot-role-selection-button.css';\n\n// @vue/component\nexport const CopilotRoleSelectionButton = {\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"bx-im-create-chat-menu-item__button --copilot\"\n\t\t\t:title=\"loc('IM_RECENT_CREATE_COPILOT_ROLE_SELECTION_TITLE')\"\n\t\t>\n\t\t\t<div class=\"bx-im-create-chat-menu-item__icon-more\"></div>\n\t\t</div>\n\t`,\n};\n","import { Analytics } from 'im.v2.lib.analytics';\nimport { InviteManager } from 'im.v2.lib.invite';\nimport { PromoManager } from 'im.v2.lib.promo';\nimport { PromoId } from 'im.v2.const';\n\nimport '../css/invite-promo.css';\n\n// @vue/component\nexport const InvitePromo = {\n\tname: 'InvitePromo',\n\temits: ['close'],\n\tmethods:\n\t{\n\t\tonContainerClick(): void\n\t\t{\n\t\t\tconst analyticsContext = Analytics.getInstance().sliderInvite.getRecentCreateMenuContext();\n\t\t\tInviteManager.openInviteSlider(analyticsContext);\n\t\t},\n\t\tonCloseClick(): void\n\t\t{\n\t\t\tvoid PromoManager.getInstance().markAsWatched(PromoId.recentCreateChatInviteUsers);\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div @click=\"onContainerClick\" class=\"bx-im-recent-invite-promo__container\">\n\t\t\t<div class=\"bx-im-recent-invite-promo__icon\"></div>\n\t\t\t<div class=\"bx-im-recent-invite-promo__content\">\n\t\t\t\t<div class=\"bx-im-recent-invite-promo__title\">\n\t\t\t\t\t{{ loc('IM_RECENT_CREATE_INVITE_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-recent-invite-promo__subtitle\">\n\t\t\t\t\t{{ loc('IM_RECENT_CREATE_INVITE_SUBTITLE') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div @click.stop=\"onCloseClick\" class=\"bx-im-recent-invite-promo__close-icon\"></div>\n\t\t</div>\n\t`,\n};\n","import { FeaturePromoter } from 'ui.info-helper';\n\nimport { Messenger } from 'im.public';\nimport { MessengerMenu, MenuItem, MenuItemIcon } from 'im.v2.component.elements.menu';\nimport { CopilotRolesDialog } from 'im.v2.component.elements.copilot-roles-dialog';\nimport { CreateChatPromo } from 'im.v2.component.list.container.elements.create-chat-promo';\nimport { Layout, PromoId, ChatType, ActionByUserType, SliderCode } from 'im.v2.const';\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { PromoManager } from 'im.v2.lib.promo';\nimport { CreateChatManager } from 'im.v2.lib.create-chat';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\nimport { CopilotService } from 'im.v2.provider.service.copilot';\n\nimport { CreateChatHelp } from './components/create-chat-help';\nimport { DescriptionBanner } from './components/collab/description-banner';\nimport { CopilotRoleSelectionButton } from './components/copilot-role-selection-button';\nimport { InvitePromo } from './components/invite-promo';\n\nimport type { JsonObject } from 'main.core';\nimport type { MenuOptions } from 'main.popup';\n\nconst PromoByChatType = {\n\t[ChatType.chat]: PromoId.createGroupChat,\n\t[ChatType.videoconf]: PromoId.createConference,\n\t[ChatType.channel]: PromoId.createChannel,\n};\n\n// @vue/component\nexport const CreateChatMenu = {\n\tcomponents: {\n\t\tMessengerMenu,\n\t\tMenuItem,\n\t\tCreateChatHelp,\n\t\tCreateChatPromo,\n\t\tDescriptionBanner,\n\t\tCopilotRoleSelectionButton,\n\t\tCopilotRolesDialog,\n\t\tInvitePromo,\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tshowMenu: false,\n\t\t\tchatTypeToCreate: '',\n\t\t\tshowCreateChatPromo: false,\n\t\t\tshowCollabPromo: false,\n\t\t\tshowInvitePromo: false,\n\t\t\tshowCopilotRolesDialog: false,\n\t\t\tisLoading: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tChatType: () => ChatType,\n\t\tMenuItemIcon: () => MenuItemIcon,\n\t\tmenuConfig(): MenuOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: 'im-create-chat-menu',\n\t\t\t\twidth: 275,\n\t\t\t\tbindElement: this.$refs.icon || {},\n\t\t\t\toffsetTop: 4,\n\t\t\t\tpadding: 0,\n\t\t\t};\n\t\t},\n\t\tcollabAvailable(): boolean\n\t\t{\n\t\t\tconst hasAccess = PermissionManager.getInstance().canPerformActionByUserType(\n\t\t\t\tActionByUserType.createCollab,\n\t\t\t);\n\t\t\tconst creationAvailable = FeatureManager.isFeatureAvailable(Feature.collabCreationAvailable);\n\t\t\tconst featureAvailable = FeatureManager.isFeatureAvailable(Feature.collabAvailable);\n\n\t\t\treturn hasAccess && featureAvailable && creationAvailable;\n\t\t},\n\t\tcanCreateChat(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformActionByUserType(\n\t\t\t\tActionByUserType.createChat,\n\t\t\t);\n\t\t},\n\t\tcanCreateCopilot(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformActionByUserType(\n\t\t\t\tActionByUserType.createCopilot,\n\t\t\t);\n\t\t},\n\t\tisCopilotAvailable(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.copilotAvailable);\n\t\t},\n\t\tisCopilotActive(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.copilotActive);\n\t\t},\n\t\tisCopilotAvailableAndCreatable(): boolean\n\t\t{\n\t\t\treturn this.isCopilotAvailable && this.canCreateCopilot;\n\t\t},\n\t\tcanCreateChannel(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformActionByUserType(\n\t\t\t\tActionByUserType.createChannel,\n\t\t\t);\n\t\t},\n\t\tcanCreateConference(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformActionByUserType(\n\t\t\t\tActionByUserType.createConference,\n\t\t\t);\n\t\t},\n\t\ticonStatusClasses(): { [key: string]: boolean }\n\t\t{\n\t\t\treturn {\n\t\t\t\t'--default': !this.isLoading,\n\t\t\t\t'--loading': this.isLoading,\n\t\t\t};\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.showCollabPromo = PromoManager.getInstance().needToShow(PromoId.createCollabDescription);\n\t\tthis.showInvitePromo = PromoManager.getInstance().needToShow(PromoId.recentCreateChatInviteUsers);\n\t},\n\tmethods:\n\t{\n\t\tonChatCreateClick(type: $Values<typeof ChatType>)\n\t\t{\n\t\t\tAnalytics.getInstance().chatCreate.onStartClick(type);\n\t\t\tthis.chatTypeToCreate = type;\n\n\t\t\tconst promoBannerIsNeeded = PromoManager.getInstance().needToShow(this.getPromoType());\n\t\t\tif (promoBannerIsNeeded)\n\t\t\t{\n\t\t\t\tthis.showCreateChatPromo = true;\n\t\t\t\tthis.showMenu = false;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.startChatCreation();\n\t\t\tthis.showMenu = false;\n\t\t},\n\t\tshowCopilotPromoter()\n\t\t{\n\t\t\tconst promoter = new FeaturePromoter({ code: SliderCode.copilotDisabled });\n\t\t\tpromoter.show();\n\t\t},\n\t\tcheckCopilotActive(): boolean\n\t\t{\n\t\t\tif (!this.isCopilotActive)\n\t\t\t{\n\t\t\t\tthis.showCopilotPromoter();\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tasync onDefaultCopilotCreateClick()\n\t\t{\n\t\t\tif (!this.checkCopilotActive())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.showMenu = false;\n\t\t\tthis.isLoading = true;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tconst newDialogId = await this.getCopilotService().createDefaultChat();\n\n\t\t\t\tAnalytics.getInstance().copilot.onCreateDefaultChatInRecent();\n\n\t\t\t\tthis.isLoading = false;\n\t\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t},\n\t\tonCopilotRoleSelectClick()\n\t\t{\n\t\t\tif (!this.checkCopilotActive())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tAnalytics.getInstance().copilot.onSelectRoleInRecent();\n\t\t\tthis.showCopilotRolesDialog = true;\n\t\t},\n\t\tasync onCopilotDialogSelectRole(role)\n\t\t{\n\t\t\tawait this.createCopilotChat(role.code);\n\t\t},\n\t\tasync createCopilotChat(roleCode: string)\n\t\t{\n\t\t\tthis.showMenu = false;\n\t\t\tthis.isLoading = true;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tconst newDialogId = await this.getCopilotService().createChat({ roleCode });\n\n\t\t\t\tthis.isLoading = false;\n\t\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t},\n\t\tonPromoContinueClick()\n\t\t{\n\t\t\tPromoManager.getInstance().markAsWatched(this.getPromoType());\n\t\t\tthis.startChatCreation();\n\t\t\tthis.showCreateChatPromo = false;\n\t\t\tthis.showMenu = false;\n\t\t\tthis.chatTypeToCreate = '';\n\t\t},\n\t\tonCollabDescriptionClose(): void\n\t\t{\n\t\t\tvoid PromoManager.getInstance().markAsWatched(PromoId.createCollabDescription);\n\t\t\tthis.showCollabPromo = false;\n\t\t},\n\t\tstartChatCreation()\n\t\t{\n\t\t\tconst { name: currentLayoutName, entityId: currentLayoutChatType } = this.$store.getters['application/getLayout'];\n\t\t\tif (currentLayoutName === Layout.createChat && currentLayoutChatType === this.chatTypeToCreate)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tCreateChatManager.getInstance().startChatCreation(this.chatTypeToCreate);\n\t\t},\n\t\tgetPromoType(): string\n\t\t{\n\t\t\treturn PromoByChatType[this.chatTypeToCreate] ?? '';\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t\tgetCopilotService(): CopilotService\n\t\t{\n\t\t\tif (!this.copilotService)\n\t\t\t{\n\t\t\t\tthis.copilotService = new CopilotService();\n\t\t\t}\n\n\t\t\treturn this.copilotService;\n\t\t},\n\t\thandleShowPopup()\n\t\t{\n\t\t\tAnalytics.getInstance().chatCreate.onMenuCreateClick();\n\t\t\tthis.showMenu = true;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"bx-im-list-container-recent__create-chat_icon\"\n\t\t\t:class=\"{'--active': showMenu}\"\n\t\t\t@click=\"handleShowPopup\"\n\t\t\tref=\"icon\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"bx-im-list-container-recent__create-chat_icon_status\"\n\t\t\t\t:class=\"iconStatusClasses\"\n\t\t\t></div>\n\t\t</div>\n\t\t<MessengerMenu v-if=\"showMenu\" :config=\"menuConfig\" @close=\"showMenu = false\">\n\t\t\t<MenuItem\n\t\t\t\tv-if=\"canCreateChat\"\n\t\t\t\t:icon=\"MenuItemIcon.chat\"\n\t\t\t\t:title=\"loc('IM_RECENT_CREATE_GROUP_CHAT_TITLE_V2')\"\n\t\t\t\t:subtitle=\"loc('IM_RECENT_CREATE_GROUP_CHAT_SUBTITLE_MSGVER_1')\"\n\t\t\t\t@click=\"onChatCreateClick(ChatType.chat)\"\n\t\t\t/>\n\t\t\t<MenuItem\n\t\t\t\tv-if=\"isCopilotAvailableAndCreatable\"\n\t\t\t\t:icon=\"MenuItemIcon.copilot\"\n\t\t\t\t:title=\"loc('IM_RECENT_CREATE_COPILOT_TITLE')\"\n\t\t\t\t:subtitle=\"loc('IM_RECENT_CREATE_COPILOT_SUBTITLE_MSGVER_1')\"\n\t\t\t\t@click.stop=\"onDefaultCopilotCreateClick\"\n\t\t\t>\n\t\t\t\t<template #after-content>\n\t\t\t\t\t<CopilotRoleSelectionButton @click.stop=\"onCopilotRoleSelectClick\" />\n\t\t\t\t</template>\n\t\t\t</MenuItem>\n\t\t\t<MenuItem\n\t\t\t\tv-if=\"canCreateChannel\"\n\t\t\t\t:icon=\"MenuItemIcon.channel\"\n\t\t\t\t:title=\"loc('IM_RECENT_CREATE_CHANNEL_TITLE_V2')\"\n\t\t\t\t:subtitle=\"loc('IM_RECENT_CREATE_CHANNEL_SUBTITLE_MSGVER_1')\"\n\t\t\t\t@click=\"onChatCreateClick(ChatType.channel)\"\n\t\t\t/>\n\t\t\t<MenuItem\n\t\t\t\tv-if=\"collabAvailable\"\n\t\t\t\t:icon=\"MenuItemIcon.collab\"\n\t\t\t\t:title=\"loc('IM_RECENT_CREATE_COLLAB_TITLE')\"\n\t\t\t\t:subtitle=\"loc('IM_RECENT_CREATE_COLLAB_SUBTITLE_MSGVER_1')\"\n\t\t\t\t@click=\"onChatCreateClick(ChatType.collab)\"\n\t\t\t>\n\t\t\t\t<template #below-content>\n\t\t\t\t\t<DescriptionBanner v-if=\"showCollabPromo\" @close=\"onCollabDescriptionClose\" />\n\t\t\t\t</template>\n\t\t\t</MenuItem>\n\t\t\t<MenuItem\n\t\t\t\tv-if=\"canCreateConference\"\n\t\t\t\t:icon=\"MenuItemIcon.conference\"\n\t\t\t\t:title=\"loc('IM_RECENT_CREATE_CONFERENCE_TITLE')\"\n\t\t\t\t:subtitle=\"loc('IM_RECENT_CREATE_CONFERENCE_SUBTITLE_MSGVER_1')\"\n\t\t\t\t:withBottomBorder=\"showInvitePromo\"\n\t\t\t\t@click=\"onChatCreateClick(ChatType.videoconf)\"\n\t\t\t/>\n\t\t\t<InvitePromo v-if=\"showInvitePromo\" @close=\"showInvitePromo = false\" />\n\t\t\t<template #footer>\n\t\t\t\t<CreateChatHelp @articleOpen=\"showMenu = false\" />\n\t\t\t</template>\n\t\t</MessengerMenu>\n\t\t<CreateChatPromo\n\t\t\tv-if=\"showCreateChatPromo\"\n\t\t\t:chatType=\"chatTypeToCreate\"\n\t\t\t@continue=\"onPromoContinueClick\"\n\t\t\t@close=\"showCreateChatPromo = false\"\n\t\t/>\n\t\t<CopilotRolesDialog\n\t\t\tv-if=\"showCopilotRolesDialog\"\n\t\t\t@selectRole=\"onCopilotDialogSelectRole\"\n\t\t\t@close=\"showCopilotRolesDialog = false\"\n\t\t/>\n\t`,\n};\n","import { RecentUnreadList } from 'im.v2.component.list.items.recent';\n\nimport './css/container.css';\n\n// @vue/component\nexport const RecentUnreadListContainer = {\n\tname: 'RecentUnreadListContainer',\n\tcomponents: { RecentUnreadList },\n\temits: ['chatClick', 'toggleUnreadMode'],\n\tmethods: {\n\t\tcloseUnreadMode()\n\t\t{\n\t\t\tthis.$emit('toggleUnreadMode');\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-list-container-recent-unread-slider\">\n\t\t\t<div class=\"bx-im-list-container-recent-unread-slider__header\">\n\t\t\t\t<div class=\"bx-im-list-container-recent-unread-slider__back-icon\" @click=\"closeUnreadMode\"></div>\n\t\t\t\t<div class=\"bx-im-list-container-recent-unread-slider__title\">{{ loc('IM_LIST_UNREAD_RECENT_SLIDER_TITLE') }}</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-list-container-recent-unread-slider__content\">\n\t\t\t\t<RecentUnreadList @chatClick=\"$emit('chatClick', $event)\" />\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { SlideAnimation } from 'im.v2.component.animation';\n\nimport { RecentUnreadListContainer } from './components/container';\n\n// @vue/component\nexport const RecentUnreadListSlider = {\n\tname: 'RecentUnreadListSlider',\n\tcomponents: { RecentUnreadListContainer, SlideAnimation },\n\tprops: {\n\t\tunreadOnlyMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['chatClick', 'toggleUnreadMode'],\n\ttemplate: `\n\t\t<SlideAnimation>\n\t\t\t<RecentUnreadListContainer \n\t\t\t\tv-if=\"unreadOnlyMode\"\n\t\t\t\t@chatClick=\"$emit('chatClick', $event)\" \n\t\t\t\t@toggleUnreadMode=\"$emit('toggleUnreadMode')\"\n\t\t\t/>\n\t\t</SlideAnimation>\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\nimport { Event as CoreEvent } from 'main.core';\n\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { RecentList } from 'im.v2.component.list.items.recent';\nimport { ChatSearchInput, ChatSearch } from 'im.v2.component.search';\nimport { Layout, EventType, ActionByUserType } from 'im.v2.const';\nimport { Logger } from 'im.v2.lib.logger';\n\nimport { HeaderMenu } from './components/header-menu';\nimport { CreateChatMenu } from './components/create-chat-menu/create-chat-menu';\nimport { RecentUnreadListSlider } from './components/unread-slider/unread-slider';\n\nimport './css/recent-container.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const RecentListContainer = {\n\tname: 'RecentListContainer',\n\tcomponents: {\n\t\tHeaderMenu,\n\t\tCreateChatMenu,\n\t\tChatSearchInput,\n\t\tRecentList,\n\t\tChatSearch,\n\t\tRecentUnreadListSlider,\n\t},\n\temits: ['selectEntity'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tsearchMode: false,\n\t\t\tunreadOnlyMode: false,\n\t\t\tsearchQuery: '',\n\t\t\tisSearchLoading: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tcanCreateChat(): boolean\n\t\t{\n\t\t\tconst actions = [\n\t\t\t\tActionByUserType.createChat,\n\t\t\t\tActionByUserType.createCollab,\n\t\t\t\tActionByUserType.createChannel,\n\t\t\t\tActionByUserType.createConference,\n\t\t\t];\n\n\t\t\treturn actions.some((action) => PermissionManager.getInstance().canPerformActionByUserType(action));\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tLogger.warn('List: Recent container created');\n\n\t\tEventEmitter.subscribe(EventType.recent.openSearch, this.onOpenSearch);\n\t\tCoreEvent.bind(document, 'mousedown', this.onDocumentClick);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tEventEmitter.unsubscribe(EventType.recent.openSearch, this.onOpenSearch);\n\t\tCoreEvent.unbind(document, 'mousedown', this.onDocumentClick);\n\t},\n\tmethods:\n\t{\n\t\tonChatClick(dialogId)\n\t\t{\n\t\t\tthis.$emit('selectEntity', { layoutName: Layout.chat, entityId: dialogId });\n\t\t},\n\t\tonOpenSearch()\n\t\t{\n\t\t\tthis.searchMode = true;\n\t\t},\n\t\tonCloseSearch()\n\t\t{\n\t\t\tthis.searchMode = false;\n\t\t\tthis.searchQuery = '';\n\t\t},\n\t\tonUpdateSearch(query)\n\t\t{\n\t\t\tthis.searchMode = true;\n\t\t\tthis.searchQuery = query;\n\t\t},\n\t\tonDocumentClick(event: Event)\n\t\t{\n\t\t\tconst clickOnRecentContainer = event.composedPath().includes(this.$refs['recent-container']);\n\t\t\tif (this.searchMode && !clickOnRecentContainer)\n\t\t\t{\n\t\t\t\tthis.onCloseSearch();\n\t\t\t}\n\t\t},\n\t\tonLoading(value: boolean)\n\t\t{\n\t\t\tthis.isSearchLoading = value;\n\t\t},\n\t\tonToggleUnreadMode()\n\t\t{\n\t\t\tthis.$store.dispatch('recent/clearUnreadCollection');\n\t\t\tthis.unreadOnlyMode = !this.unreadOnlyMode;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-list-container-recent__scope bx-im-list-container-recent__container\" ref=\"recent-container\">\n\t\t\t<RecentUnreadListSlider \n\t\t\t\t:unreadOnlyMode=\"unreadOnlyMode\" \n\t\t\t\t@chatClick=\"onChatClick\" \n\t\t\t\t@toggleUnreadMode=\"onToggleUnreadMode\"\n\t\t\t/>\n\t\t\t<div class=\"bx-im-list-container-recent__header_container\">\n\t\t\t\t<HeaderMenu :unreadOnlyMode=\"unreadOnlyMode\" @toggleUnreadMode=\"onToggleUnreadMode\" />\n\t\t\t\t<div class=\"bx-im-list-container-recent__search-input_container\">\n\t\t\t\t\t<ChatSearchInput \n\t\t\t\t\t\t:searchMode=\"searchMode\" \n\t\t\t\t\t\t:isLoading=\"searchMode && isSearchLoading\"\n\t\t\t\t\t\t@openSearch=\"onOpenSearch\"\n\t\t\t\t\t\t@closeSearch=\"onCloseSearch\"\n\t\t\t\t\t\t@updateSearch=\"onUpdateSearch\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<CreateChatMenu v-if=\"canCreateChat\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-list-container-recent__elements_container\">\n\t\t\t\t<div class=\"bx-im-list-container-recent__elements\">\n\t\t\t\t\t<ChatSearch \n\t\t\t\t\t\tv-show=\"searchMode\" \n\t\t\t\t\t\t:searchMode=\"searchMode\"\n\t\t\t\t\t\t:query=\"searchQuery\"\n\t\t\t\t\t\t@loading=\"onLoading\"\n\t\t\t\t\t\t@closeSearch=\"onCloseSearch\"\n\t\t\t\t\t/>\n\t\t\t\t\t<RecentList v-show=\"!searchMode && !unreadOnlyMode\" @chatClick=\"onChatClick\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n"],"names":["HeaderMenu","components","BaseHeaderMenu","MenuItem","props","unreadOnlyMode","type","Boolean","default","emits","computed","unreadCounter","counter","$store","getters","isUnreadRecentModeAvailable","FeatureManager","isFeatureAvailable","Feature","unreadRecentModeAvailable","methods","onReadAllClick","closeCallback","confirmResult","showReadMessagesConfirm","loc","ChatService","readAll","onToggleUnreadMode","$emit","phraseCode","$Bitrix","Loc","getMessage","template","CreateChatHelp","data","openHelpArticle","ARTICLE_CODE","openHelpdeskArticle","DescriptionBanner","name","preparedText","CopilotRoleSelectionButton","InvitePromo","onContainerClick","analyticsContext","Analytics","getInstance","sliderInvite","getRecentCreateMenuContext","InviteManager","openInviteSlider","onCloseClick","PromoManager","markAsWatched","PromoId","recentCreateChatInviteUsers","PromoByChatType","ChatType","chat","createGroupChat","videoconf","createConference","channel","createChannel","CreateChatMenu","MessengerMenu","CreateChatPromo","CopilotRolesDialog","showMenu","chatTypeToCreate","showCreateChatPromo","showCollabPromo","showInvitePromo","showCopilotRolesDialog","isLoading","MenuItemIcon","menuConfig","id","width","bindElement","$refs","icon","offsetTop","padding","collabAvailable","hasAccess","PermissionManager","canPerformActionByUserType","ActionByUserType","createCollab","creationAvailable","collabCreationAvailable","featureAvailable","canCreateChat","createChat","canCreateCopilot","createCopilot","isCopilotAvailable","copilotAvailable","isCopilotActive","copilotActive","isCopilotAvailableAndCreatable","canCreateChannel","canCreateConference","iconStatusClasses","created","needToShow","createCollabDescription","onChatCreateClick","chatCreate","onStartClick","promoBannerIsNeeded","getPromoType","startChatCreation","showCopilotPromoter","promoter","FeaturePromoter","code","SliderCode","copilotDisabled","show","checkCopilotActive","onDefaultCopilotCreateClick","newDialogId","getCopilotService","createDefaultChat","copilot","onCreateDefaultChatInRecent","Messenger","openChat","onCopilotRoleSelectClick","onSelectRoleInRecent","onCopilotDialogSelectRole","role","createCopilotChat","roleCode","onPromoContinueClick","onCollabDescriptionClose","currentLayoutName","entityId","currentLayoutChatType","Layout","CreateChatManager","copilotService","CopilotService","handleShowPopup","onMenuCreateClick","RecentUnreadListContainer","RecentUnreadList","closeUnreadMode","RecentUnreadListSlider","SlideAnimation","RecentListContainer","ChatSearchInput","RecentList","ChatSearch","searchMode","searchQuery","isSearchLoading","actions","some","action","Logger","warn","EventEmitter","subscribe","EventType","recent","openSearch","onOpenSearch","CoreEvent","bind","document","onDocumentClick","beforeUnmount","unsubscribe","unbind","onChatClick","dialogId","layoutName","onCloseSearch","onUpdateSearch","query","event","clickOnRecentContainer","composedPath","includes","onLoading","value","dispatch"],"mappings":"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"}