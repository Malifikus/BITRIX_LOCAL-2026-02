this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,n,s,o,i,a,r,l,c,g,C,m,p,h,u,v,M,d,B,L,y,X,b,k,I,_,f,O,E,D,S,w,x,V){"use strict";const R={[S.Layout.chat]:{list:O.RecentListContainer,content:M.ChatContent},[S.Layout.createChat]:{list:O.RecentListContainer,content:d.CreateChatContent},[S.Layout.updateChat]:{list:O.RecentListContainer,content:d.UpdateChatContent},[S.Layout.channel]:{list:k.ChannelListContainer,content:M.ChatContent},[S.Layout.notification]:{list:O.RecentListContainer,content:L.NotificationContent},[S.Layout.openlines]:{content:y.OpenlinesContent},[S.Layout.openlinesV2]:{list:f.OpenlineListContainer,content:X.OpenlinesV2Content},[S.Layout.conference]:{list:O.RecentListContainer,content:M.ChatContent},[S.Layout.settings]:{content:b.SettingsContent},[S.Layout.copilot]:{list:_.CopilotListContainer,content:M.ChatContent},[S.Layout.collab]:{list:I.CollabListContainer,content:M.ChatContent},[S.Layout.market]:{content:B.MarketContent},[S.Layout.taskComments]:{list:E.TaskListContainer,content:M.ChatContent}};const N={name:"DesktopOverlay",components:{DesktopModeSelectionBanner:D.DesktopModeSelectionBanner},data(){return{isBannerVisible:false}},computed:{shouldShowBanner(){const e=V.PromoManager.getInstance();const t=e.needToShow(S.PromoId.desktopModeSelection);return t&&x.DesktopApi.isChatWindow()}},created(){this.isBannerVisible=this.shouldShowBanner;if(this.isBannerVisible){w.Analytics.getInstance().desktopMode.onBannerShow()}},methods:{onCloseBanner(){this.isBannerVisible=false}},template:`\n\t\t<DesktopModeSelectionBanner v-if="isBannerVisible" @close="onCloseBanner" />\n\t`};const T={name:"MessengerRoot",components:{OpenlinesContent:y.OpenlinesContent,DesktopOverlay:N},data(){return{openlinesContentOpened:false}},computed:{layout(){return this.$store.getters["application/getLayout"]},layoutName(){return this.layout.name},entityId(){return this.layout.entityId},hasListComponent(){return Boolean(this.listComponent)},listComponent(){return R[this.layoutName].list},contentComponent(){return R[this.layoutName].content},isOpenline(){return this.layout.name===S.Layout.openlines},containerClasses(){return{"--dark-theme":h.ThemeManager.isDarkTheme(),"--light-theme":h.ThemeManager.isLightTheme(),"--desktop":u.DesktopManager.isDesktop()}}},watch:{layoutName:{handler(e){if(e!==S.Layout.openlines){return}this.openlinesContentOpened=true},immediate:true}},created(){p.InitManager.init();g.CounterManager.getInstance().emitCounters();v.LayoutManager.getInstance().bindEvents({emitter:this.getEmitter()});c.BulkActionsManager.getInstance().bindEvents({emitter:this.getEmitter()});m.Logger.warn("MessengerRoot created");void this.getLayoutManager().prepareInitialLayout()},mounted(){C.EscManager.getInstance().register({messengerContainer:this.$refs.container,context:{emitter:this.getEmitter()}})},beforeUnmount(){this.getLayoutManager().destroy();C.EscManager.getInstance().unregister()},methods:{onEntitySelect({layoutName:e,entityId:t}){void this.getLayoutManager().setLayout({name:e,entityId:t})},getLayoutManager(){return v.LayoutManager.getInstance()},getEmitter(){return this.$Bitrix.eventEmitter}},template:`\n\t\t<div class="bx-im-messenger__scope bx-im-messenger__container --ui-context-content-light" :class="containerClasses" ref="container">\n\t\t\t<div class="bx-im-messenger__layout_container">\n\t\t\t\t<div class="bx-im-messenger__layout_content">\n\t\t\t\t\t<div v-if="hasListComponent" class="bx-im-messenger__list_container">\n\t\t\t\t\t\t<KeepAlive>\n\t\t\t\t\t\t\t<component :is="listComponent" @selectEntity="onEntitySelect" />\n\t\t\t\t\t\t</KeepAlive>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bx-im-messenger__content_container" :class="{'--with-list': hasListComponent}">\n\t\t\t\t\t\t<div v-if="openlinesContentOpened" class="bx-im-messenger__openlines_container" :class="{'--hidden': !isOpenline}">\n\t\t\t\t\t\t\t<OpenlinesContent v-show="isOpenline" :entityId="entityId" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<component v-if="!isOpenline" :is="contentComponent" :entityId="entityId" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<DesktopOverlay />\n\t`};e.Messenger=T})(this.BX.Messenger.v2.Component=this.BX.Messenger.v2.Component||{},BX,BX,BX.Messenger.Integration.Viewer,BX,BX,BX.Messenger.v2.Css,BX.Messenger.v2.Css,BX.Messenger.v2.Css,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Component.Content,BX.Messenger.v2.Component.Content,BX.Messenger.v2.Component.Content,BX.Messenger.v2.Component.Content,BX.Messenger.v2.Component.Content,BX.Messenger.v2.Component.Content,BX.Messenger.v2.Component.Content,BX.Messenger.v2.Component.List,BX.Messenger.v2.Component.List,BX.Messenger.v2.Component.List,BX.Messenger.v2.Component.List,BX.Messenger.v2.Component.List,BX.Messenger.v2.Component.List,BX.Messenger.v2.Component.Desktop,BX.Messenger.v2.Const,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib);
//# sourceMappingURL=messenger.bundle.map.js