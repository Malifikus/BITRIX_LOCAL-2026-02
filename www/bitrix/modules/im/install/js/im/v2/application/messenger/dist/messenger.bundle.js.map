{"version":3,"file":"messenger.bundle.js","sources":["../src/messenger.js"],"sourcesContent":["import { Core } from 'im.v2.application.core';\nimport { Messenger as MessengerComponent } from 'im.v2.component.messenger';\n\nimport type { JsonObject } from 'main.core';\n\ntype RootComponentNode = string | HTMLElement;\n\nexport class MessengerApplication\n{\n\t// assigned externally\n\tbitrixVue: Object = null;\n\n\t#initPromise: Promise<MessengerApplication>;\n\t#params: ?JsonObject = null;\n\t#vueInstance: Object = null;\n\n\t#applicationName = 'Messenger';\n\n\tconstructor(params: JsonObject = {})\n\t{\n\t\tthis.#params = params;\n\t\tthis.#initPromise = this.#init();\n\t}\n\n\tready(): Promise<MessengerApplication>\n\t{\n\t\treturn this.#initPromise;\n\t}\n\n\tasync initComponent(node: RootComponentNode): Promise\n\t{\n\t\tthis.unmountComponent();\n\n\t\tthis.#vueInstance = await Core.createVue(this, {\n\t\t\tname: this.#applicationName,\n\t\t\tel: node,\n\t\t\tcomponents: { MessengerComponent },\n\t\t\ttemplate: '<MessengerComponent />',\n\t\t});\n\t}\n\n\tunmountComponent()\n\t{\n\t\tif (!this.#vueInstance)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.bitrixVue.unmount();\n\t\tthis.#vueInstance = null;\n\t}\n\n\tasync #init(): Promise<MessengerApplication>\n\t{\n\t\tawait this.#initCore();\n\n\t\treturn this;\n\t}\n\n\tasync #initCore(): Promise\n\t{\n\t\tCore.setApplicationData(this.#params);\n\t\tawait Core.ready();\n\t}\n}\n"],"names":["MessengerApplication","constructor","params","bitrixVue","ready","initComponent","node","unmountComponent","Core","createVue","name","el","components","MessengerComponent","template","unmount","setApplicationData"],"mappings":";;;;;;;CAC4E;CAAA;CAAA;CAAA;CAAA;CAAA;AAM5E,CAAO,MAAMA,oBAAoB,CACjC;;;GAUCC,WAAW,CAACC,MAAkB,GAAG,EAAE,EACnC;KAAA;OAAA;;KAAA;OAAA;;KAAA,KATAC,SAAS,GAAW,IAAI;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAGD;;KAAI;OAAA;OAAA,OACJ;;KAAI;OAAA;OAAA,OAER;;KAIlB,4CAAI,sBAAWD,MAAM;KACrB,4CAAI,wEAAgB,IAAI,iBAAQ;;GAGjCE,KAAK,GACL;KACC,+CAAO,IAAI;;GAGZ,MAAMC,aAAa,CAACC,IAAuB,EAC3C;KACC,IAAI,CAACC,gBAAgB,EAAE;KAEvB,4CAAI,gCAAgB,MAAMC,2BAAI,CAACC,SAAS,CAAC,IAAI,EAAE;OAC9CC,IAAI,0CAAE,IAAI,qCAAiB;OAC3BC,EAAE,EAAEL,IAAI;OACRM,UAAU,EAAE;6BAAEC;QAAoB;OAClCC,QAAQ,EAAE;MACV,CAAC;;GAGHP,gBAAgB,GAChB;KACC,IAAI,yCAAC,IAAI,6BAAa,EACtB;OACC;;KAGD,IAAI,CAACJ,SAAS,CAACY,OAAO,EAAE;KACxB,4CAAI,gCAAgB,IAAI;;CAe1B;CAAC,wBAXA;GACC,8CAAM,IAAI,yBAAY;GAEtB,OAAO,IAAI;CACZ;CAAC,4BAGD;GACCP,2BAAI,CAACQ,kBAAkB,yCAAC,IAAI,oBAAS;GACrC,MAAMR,2BAAI,CAACJ,KAAK,EAAE;CACnB;;;;;;;;"}