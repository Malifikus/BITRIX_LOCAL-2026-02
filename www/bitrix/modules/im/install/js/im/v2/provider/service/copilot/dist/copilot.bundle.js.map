{"version":3,"file":"copilot.bundle.js","sources":["../src/copilot.js"],"sourcesContent":["import { ChatType } from 'im.v2.const';\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { ChatService } from 'im.v2.provider.service.chat';\n\nexport class CopilotService\n{\n\tasync createChat({ roleCode }: { roleCode: string }): Promise<string>\n\t{\n\t\tconst chatService = new ChatService();\n\n\t\ttry\n\t\t{\n\t\t\tconst { newDialogId, newChatId } = await chatService.createChat({\n\t\t\t\ttype: ChatType.copilot,\n\t\t\t\tcopilotMainRole: roleCode,\n\t\t\t});\n\n\t\t\tthis.#sendAnalytics({ chatId: newChatId, dialogId: newDialogId });\n\n\t\t\tawait chatService.loadChatWithMessages(newDialogId);\n\n\t\t\treturn newDialogId;\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('CopilotService: create chat error', error);\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tcreateDefaultChat(): Promise<string>\n\t{\n\t\tconst COPILOT_UNIVERSAL_ROLE = 'copilot_assistant';\n\n\t\treturn this.createChat({ roleCode: COPILOT_UNIVERSAL_ROLE });\n\t}\n\n\t#sendAnalytics({ chatId, dialogId })\n\t{\n\t\tAnalytics.getInstance().copilot.onCreateChat(chatId);\n\t\tAnalytics.getInstance().ignoreNextChatOpen(dialogId);\n\t}\n}\n"],"names":["CopilotService","createChat","roleCode","chatService","ChatService","newDialogId","newChatId","type","ChatType","copilot","copilotMainRole","chatId","dialogId","loadChatWithMessages","error","console","createDefaultChat","COPILOT_UNIVERSAL_ROLE","Analytics","getInstance","onCreateChat","ignoreNextChatOpen"],"mappings":";;;;;;;CAE0D;AAE1D,CAAO,MAAMA,cAAc,CAC3B;GAAA;KAAA;OAAA;;;GACC,MAAMC,UAAU,CAAC;KAAEC;IAAgC,EACnD;KACC,MAAMC,WAAW,GAAG,IAAIC,uCAAW,EAAE;KAErC,IACA;OACC,MAAM;SAAEC,WAAW;SAAEC;QAAW,GAAG,MAAMH,WAAW,CAACF,UAAU,CAAC;SAC/DM,IAAI,EAAEC,oBAAQ,CAACC,OAAO;SACtBC,eAAe,EAAER;QACjB,CAAC;OAEF,4CAAI,kCAAgB;SAAES,MAAM,EAAEL,SAAS;SAAEM,QAAQ,EAAEP;QAAa;OAEhE,MAAMF,WAAW,CAACU,oBAAoB,CAACR,WAAW,CAAC;OAEnD,OAAOA,WAAW;MAClB,CACD,OAAOS,KAAK,EACZ;OACCC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;OACzD,MAAMA,KAAK;;;GAIbE,iBAAiB,GACjB;KACC,MAAMC,sBAAsB,GAAG,mBAAmB;KAElD,OAAO,IAAI,CAAChB,UAAU,CAAC;OAAEC,QAAQ,EAAEe;MAAwB,CAAC;;CAQ9D;CAAC,yBALe;GAAEN,MAAM;GAAEC;CAAS,CAAC,EACnC;GACCM,6BAAS,CAACC,WAAW,EAAE,CAACV,OAAO,CAACW,YAAY,CAACT,MAAM,CAAC;GACpDO,6BAAS,CAACC,WAAW,EAAE,CAACE,kBAAkB,CAACT,QAAQ,CAAC;CACrD;;;;;;;;"}