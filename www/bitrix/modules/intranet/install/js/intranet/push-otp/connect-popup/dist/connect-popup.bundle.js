this.BX=this.BX||{},this.BX.Intranet=this.BX.Intranet||{},function(e,s,a,t,l,i,r,o,n,c,p,b,d,v,P,h){"use strict";let u,L,H,F=e=>e;var B=babelHelpers.classPrivateFieldLooseKey("totalSteps"),y=babelHelpers.classPrivateFieldLooseKey("currentStep"),f=babelHelpers.classPrivateFieldLooseKey("enabled"),_=babelHelpers.classPrivateFieldLooseKey("getBoundedStep");class O{constructor(e={}){Object.defineProperty(this,_,{value:m}),Object.defineProperty(this,B,{writable:!0,value:4}),Object.defineProperty(this,y,{writable:!0,value:1}),Object.defineProperty(this,f,{writable:!0,value:!0}),h.Type.isNumber(e.totalSteps)&&(babelHelpers.classPrivateFieldLooseBase(this,B)[B]=Math.max(1,e.totalSteps)),h.Type.isNumber(e.currentStep)&&(babelHelpers.classPrivateFieldLooseBase(this,y)[y]=babelHelpers.classPrivateFieldLooseBase(this,_)[_](e.currentStep)),!1===e.enabled&&(babelHelpers.classPrivateFieldLooseBase(this,f)[f]=!1)}setEnabled(e){babelHelpers.classPrivateFieldLooseBase(this,f)[f]=!1!==e}setStepInfo(e,s){h.Type.isNumber(s)&&(babelHelpers.classPrivateFieldLooseBase(this,B)[B]=Math.max(1,s)),h.Type.isNumber(e)&&(babelHelpers.classPrivateFieldLooseBase(this,y)[y]=babelHelpers.classPrivateFieldLooseBase(this,_)[_](e))}getStepInfo(){return{current:babelHelpers.classPrivateFieldLooseBase(this,y)[y],total:babelHelpers.classPrivateFieldLooseBase(this,B)[B]}}render(){if(!babelHelpers.classPrivateFieldLooseBase(this,f)[f])return h.Tag.render(u||(u=F`<div></div>`));const e=[];for(let s=1;s<=babelHelpers.classPrivateFieldLooseBase(this,B)[B];s++){const a=s<=babelHelpers.classPrivateFieldLooseBase(this,y)[y]?"--active":"";e.push(h.Tag.render(L||(L=F`<div class="intranet-push-otp-connect-popup__popup-step-item ${0}"></div>`),a))}return h.Tag.render(H||(H=F`<div class="intranet-push-otp-connect-popup__popup-step">${0}</div>`),e)}}function m(e){const s=Math.max(1,e);return Math.min(s,babelHelpers.classPrivateFieldLooseBase(this,B)[B])}let g,T=e=>e;var N=babelHelpers.classPrivateFieldLooseKey("id"),w=babelHelpers.classPrivateFieldLooseKey("excludeFromSteps"),C=babelHelpers.classPrivateFieldLooseKey("stepper");class S extends a.EventEmitter{constructor(e={}){super(),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:!1}),Object.defineProperty(this,C,{writable:!0,value:void 0}),this.setEventNamespace("BX.Intranet.PushOtp.ConnectPopup.View"),babelHelpers.classPrivateFieldLooseBase(this,N)[N]=h.Type.isStringFilled(e.id)?e.id:"",babelHelpers.classPrivateFieldLooseBase(this,w)[w]=!0===e.excludeFromSteps,babelHelpers.classPrivateFieldLooseBase(this,C)[C]=new O({enabled:!babelHelpers.classPrivateFieldLooseBase(this,w)[w]})}getId(){return babelHelpers.classPrivateFieldLooseBase(this,N)[N]}isExcludedFromSteps(){return babelHelpers.classPrivateFieldLooseBase(this,w)[w]}setStepInfo(e,s){babelHelpers.classPrivateFieldLooseBase(this,C)[C].setStepInfo(e,s)}getStepInfo(){return babelHelpers.classPrivateFieldLooseBase(this,C)[C].getStepInfo()}renderStepIndicators(){return babelHelpers.classPrivateFieldLooseBase(this,C)[C].render()}render(){return h.Tag.render(g||(g=T``))}beforeDismiss(e){}afterShow(e){}afterDismiss(e){}beforeShow(e){}}let E,I=e=>e;var j=babelHelpers.classPrivateFieldLooseKey("cache"),K=babelHelpers.classPrivateFieldLooseKey("view"),U=babelHelpers.classPrivateFieldLooseKey("viewCollection"),D=babelHelpers.classPrivateFieldLooseKey("updateStepInfo"),A=babelHelpers.classPrivateFieldLooseKey("getPopup"),x=babelHelpers.classPrivateFieldLooseKey("getNextView"),R=babelHelpers.classPrivateFieldLooseKey("getPreviousView"),$=babelHelpers.classPrivateFieldLooseKey("getFirstView"),k=babelHelpers.classPrivateFieldLooseKey("createPopup"),M=babelHelpers.classPrivateFieldLooseKey("renderContent");class V extends a.EventEmitter{constructor(e){super(),Object.defineProperty(this,M,{value:J}),Object.defineProperty(this,k,{value:G}),Object.defineProperty(this,$,{value:Q}),Object.defineProperty(this,R,{value:z}),Object.defineProperty(this,x,{value:q}),Object.defineProperty(this,A,{value:W}),Object.defineProperty(this,D,{value:X}),Object.defineProperty(this,j,{writable:!0,value:new d.MemoryCache}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:[]}),(h.Type.isArray(e.viewList)?e.viewList:[]).forEach(e=>{e instanceof S&&babelHelpers.classPrivateFieldLooseBase(this,U)[U].push(e)}),babelHelpers.classPrivateFieldLooseBase(this,K)[K]=h.Type.isStringFilled(e.viewCode)?this.getViewByCode(e.viewCode):babelHelpers.classPrivateFieldLooseBase(this,$)[$](),babelHelpers.classPrivateFieldLooseBase(this,D)[D](),this.setEventNamespace("BX.Intranet.PushOtp.ConnectPopup"),babelHelpers.classPrivateFieldLooseBase(this,U)[U].forEach(e=>{e.subscribe("onNextView",e=>{var s,a;const t=null==(s=e.getData())?void 0:s.viewCode,l=null==(a=e.getData())?void 0:a.options;h.Type.isStringFilled(t,this.getViewByCode(t))?this.changeView(this.getViewByCode(t),l):this.nextView(l)}),e.subscribe("onPreviousView",e=>{var s,a;const t=null==(s=e.getData())?void 0:s.viewCode,l=null==(a=e.getData())?void 0:a.options;h.Type.isStringFilled(t,this.getViewByCode(t))?this.changeView(this.getViewByCode(t),l):this.previousView(l)})})}show(){babelHelpers.classPrivateFieldLooseBase(this,A)[A]().show()}close(){babelHelpers.classPrivateFieldLooseBase(this,A)[A]().close()}getView(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K]}getViewByCode(e){for(const s of babelHelpers.classPrivateFieldLooseBase(this,U)[U])if(s.getId()===e)return s;return null}changeView(e,s={}){if(!(e instanceof S))return;const a=babelHelpers.classPrivateFieldLooseBase(this,K)[K];babelHelpers.classPrivateFieldLooseBase(this,K)[K].beforeDismiss(s),babelHelpers.classPrivateFieldLooseBase(this,K)[K]=e,babelHelpers.classPrivateFieldLooseBase(this,K)[K].beforeShow(s),this.reload(),babelHelpers.classPrivateFieldLooseBase(this,K)[K].afterShow(s),a.afterDismiss(s)}nextView(e={}){const s=babelHelpers.classPrivateFieldLooseBase(this,x)[x]();s?this.changeView(s,e):e.closeIfLast&&this.close()}previousView(e={}){const s=babelHelpers.classPrivateFieldLooseBase(this,R)[R]();s&&this.changeView(s,e)}reload(){babelHelpers.classPrivateFieldLooseBase(this,A)[A]().setContent(babelHelpers.classPrivateFieldLooseBase(this,M)[M]())}}function X(){const e=babelHelpers.classPrivateFieldLooseBase(this,U)[U].filter(e=>!e.isExcludedFromSteps()).length;let s=0;babelHelpers.classPrivateFieldLooseBase(this,U)[U].forEach(a=>{a.isExcludedFromSteps()||(s++,a.setStepInfo(s,e))})}function W(){return babelHelpers.classPrivateFieldLooseBase(this,j)[j].remember("popup",()=>babelHelpers.classPrivateFieldLooseBase(this,k)[k]())}function q(){let e=null;return babelHelpers.classPrivateFieldLooseBase(this,U)[U].forEach((s,a)=>{if(s.getId()===babelHelpers.classPrivateFieldLooseBase(this,K)[K].getId()){const s=babelHelpers.classPrivateFieldLooseBase(this,U)[U][a+1];s&&(e=s)}}),e}function z(){let e=null;return babelHelpers.classPrivateFieldLooseBase(this,U)[U].forEach((s,a)=>{if(s.getId()===babelHelpers.classPrivateFieldLooseBase(this,K)[K].getId()){const s=babelHelpers.classPrivateFieldLooseBase(this,U)[U][a-1];s&&(e=s)}}),e}function Q(){return babelHelpers.classPrivateFieldLooseBase(this,U)[U][0]}function G(){return new s.Popup({content:babelHelpers.classPrivateFieldLooseBase(this,M)[M](),width:700,closeByEsc:!0,contentColor:"white",autoHide:!0,closeIcon:!0,events:{onPopupShow:()=>{this.emit("onShow",{context:this,parent:babelHelpers.classPrivateFieldLooseBase(this,A)[A]()}),babelHelpers.classPrivateFieldLooseBase(this,K)[K].afterShow()},onPopupClose:()=>{babelHelpers.classPrivateFieldLooseBase(this,K)[K].beforeDismiss(),this.emit("onClose",{context:this,parent:babelHelpers.classPrivateFieldLooseBase(this,A)[A]()})}}})}function J(){return h.Tag.render(E||(E=I`
			<div class="intranet-push-otp-connect-popup__popup-content">${0}</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,K)[K].render())}class Y{constructor(e){this.interval=e,this.timerId=null}start(e){null===this.timerId&&(e(),this.timerId=setInterval(()=>{e()},this.interval))}stop(){null!==this.timerId&&(clearInterval(this.timerId),this.timerId=null)}}class Z{static sendEvent(e){c.sendData({tool:"user_settings",category:"security",event:e})}}Z.ADD_PHONE_SUCCESS="add_phone_success",Z.SHOW_INPUT_PHONE="show_input_phone",Z.SHOW_INPUT_PHONE_CODE="show_input_phone_code",Z.SHOW_INSTALL_APP="show_install_app",Z.SHOW_INSTALL_APP_SUCCESS="show_install_app_success";let ee,se,ae,te=e=>e;var le=babelHelpers.classPrivateFieldLooseKey("signedUserId"),ie=babelHelpers.classPrivateFieldLooseKey("pullConfig"),re=babelHelpers.classPrivateFieldLooseKey("callback"),oe=babelHelpers.classPrivateFieldLooseKey("linkProvider"),ne=babelHelpers.classPrivateFieldLooseKey("repeatingRequest"),ce=babelHelpers.classPrivateFieldLooseKey("qrContainer"),pe=babelHelpers.classPrivateFieldLooseKey("loader"),be=babelHelpers.classPrivateFieldLooseKey("isAppSuccessConnected"),de=babelHelpers.classPrivateFieldLooseKey("onAppConnected"),ve=babelHelpers.classPrivateFieldLooseKey("renderTitle"),Pe=babelHelpers.classPrivateFieldLooseKey("makeQrCodeTo"),he=babelHelpers.classPrivateFieldLooseKey("showQrCode"),ue=babelHelpers.classPrivateFieldLooseKey("fetchQrCode"),Le=babelHelpers.classPrivateFieldLooseKey("subscribeToScanQr"),He=babelHelpers.classPrivateFieldLooseKey("showLoader"),Fe=babelHelpers.classPrivateFieldLooseKey("subscribeRefreshQr");class Be extends S{constructor(e){super(e),Object.defineProperty(this,Fe,{value:Te}),Object.defineProperty(this,He,{value:ge}),Object.defineProperty(this,Le,{value:me}),Object.defineProperty(this,ue,{value:Oe}),Object.defineProperty(this,he,{value:_e}),Object.defineProperty(this,Pe,{value:fe}),Object.defineProperty(this,ve,{value:ye}),Object.defineProperty(this,le,{writable:!0,value:void 0}),Object.defineProperty(this,ie,{writable:!0,value:void 0}),Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,oe,{writable:!0,value:void 0}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,pe,{writable:!0,value:void 0}),Object.defineProperty(this,be,{writable:!0,value:!1}),Object.defineProperty(this,de,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,le)[le]=e.signedUserId||null,babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=e.repeatingRequest,babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]=h.Type.isObject(e.pullConfig)?e.pullConfig:{},babelHelpers.classPrivateFieldLooseBase(this,re)[re]=h.Type.isFunction(e.callback)?e.callback:()=>{},babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]=h.Type.isFunction(e.linkProvider)?e.linkProvider:()=>new Promise,babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=h.Tag.render(ee||(ee=te`<div class="intranet-push-otp-connect-popup__qr-container"></div>`)),babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]=new t.Loader({target:babelHelpers.classPrivateFieldLooseBase(this,ce)[ce],mode:"inline",size:120}),babelHelpers.classPrivateFieldLooseBase(this,de)[de]=h.Type.isFunction(e.onAppConnected)?e.onAppConnected:()=>{}}render(){return babelHelpers.classPrivateFieldLooseBase(this,Le)[Le](),babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe](),h.Tag.render(se||(se=te`
			<div class="intranet-push-otp-connect-popup__view-container">
				<div>
					<div class="intranet-push-otp-connect-popup__popup-title">
						${0}
					</div>
					${0}
				</div>
				<div class="intranet-push-otp-connect-popup__view-description-text">
					${0}
				</div>
				<div class="intranet-push-otp-connect-popup__view-connect-container">
					<div>${0}</div>
					<div class="intranet-push-otp-connect-popup__view-guide-connect">
						<ol class="intranet-push-otp-connect-popup-ol-list">
							<li class="intranet-push-otp-connect-popup-ol-list-item --marker-1">
								${0}
							</li>
							<li class="intranet-push-otp-connect-popup-ol-list-item --marker-2">${0}</li>
							<li class="intranet-push-otp-connect-popup-ol-list-item --marker-3">${0}</li>
							<li class="intranet-push-otp-connect-popup-ol-list-item --marker-4">${0}</li>
						</ol>
						<div class="intranet-push-otp-connect-popup-alert">
							<div style="--ui-icon-set__icon-size: 20px; --ui-icon-set__icon-color: #FF5752;" class="ui-icon-set --o-alert"></div>
							<div class="intranet-push-otp-connect-popup-alert-text">${0}</div>
						</div>
					</div>
				</div>
				<div class="intranet-push-otp-connect-popup__view-button-container">
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](),this.renderStepIndicators(),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_CONNECT_QR_DESCRIPTION"),babelHelpers.classPrivateFieldLooseBase(this,ce)[ce],h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_LIST_1_MSGVER_1",{"[LINK]":'<a href="https://appgallery.huawei.com/app/C105947779" target="_blank" class="ui-link ui-link-primary">',"[/LINK]":"</a>"}),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_LIST_2"),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_LIST_3"),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_LIST_4"),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_DANGER"))}afterShow(e){Z.sendEvent(Z.SHOW_INSTALL_APP),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].start(babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].bind(this))}beforeDismiss(e){babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].stop()}isAppSuccessConnected(){return babelHelpers.classPrivateFieldLooseBase(this,be)[be]}}function ye(){return h.Tag.render(ae||(ae=te`<span>${0}</span>`),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_CONNECT_TITLE"))}function fe(e,s){new QRCode(e,{text:s,width:152,height:152,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}function _e(e){h.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]),babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](babelHelpers.classPrivateFieldLooseBase(this,ce)[ce],e)}function Oe(){return babelHelpers.classPrivateFieldLooseBase(this,He)[He](),babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]().then(e=>{var s;const a=null==(s=e.data)?void 0:s.link;a&&babelHelpers.classPrivateFieldLooseBase(this,he)[he](a),babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].hide()}).catch(()=>{})}function me(){const e=new o.PullClient;e.subscribe({moduleId:"security",command:"pushOtpCode",callback:e=>{e.signedUserId=babelHelpers.classPrivateFieldLooseBase(this,le)[le],babelHelpers.classPrivateFieldLooseBase(this,re)[re](e).then(s=>{babelHelpers.classPrivateFieldLooseBase(this,be)[be]=!0,console.log(babelHelpers.classPrivateFieldLooseBase(this,de)[de]),babelHelpers.classPrivateFieldLooseBase(this,de)[de](this),this.emit("onNextView",{viewCode:"",options:{device:e.device}})},e=>console.error(e)).catch(e=>{console.error("Error in QR scan callback:",e)})}}),e.start(babelHelpers.classPrivateFieldLooseBase(this,ie)[ie])}function ge(){h.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]),babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].show()}function Te(){o.PULL&&o.PULL.subscribe({type:"BX.PullClient.SubscriptionType.Server",moduleId:"mobile",command:"onDeeplinkShouldRefresh",callback:e=>{this.success()}})}let Ne,we,Ce,Se,Ee,Ie,je,Ke,Ue=e=>e;var De=babelHelpers.classPrivateFieldLooseKey("signedUserId"),Ae=babelHelpers.classPrivateFieldLooseKey("phoneNumber"),xe=babelHelpers.classPrivateFieldLooseKey("isPhoneNumberConfirmed"),Re=babelHelpers.classPrivateFieldLooseKey("changeClicked"),$e=babelHelpers.classPrivateFieldLooseKey("forceChangeMode"),ke=babelHelpers.classPrivateFieldLooseKey("container"),Me=babelHelpers.classPrivateFieldLooseKey("button"),Ve=babelHelpers.classPrivateFieldLooseKey("titleContainer"),Xe=babelHelpers.classPrivateFieldLooseKey("errorContainer"),We=babelHelpers.classPrivateFieldLooseKey("renderTitle"),qe=babelHelpers.classPrivateFieldLooseKey("renderCurrentPhoneNumber"),ze=babelHelpers.classPrivateFieldLooseKey("renderInputPhoneNumber"),Qe=babelHelpers.classPrivateFieldLooseKey("renderChangeNumberBtn"),Ge=babelHelpers.classPrivateFieldLooseKey("createSendBtn"),Je=babelHelpers.classPrivateFieldLooseKey("sendNumber"),Ye=babelHelpers.classPrivateFieldLooseKey("nextView"),Ze=babelHelpers.classPrivateFieldLooseKey("setError"),es=babelHelpers.classPrivateFieldLooseKey("cleanError");class ss extends S{constructor(e){super(e),Object.defineProperty(this,es,{value:ps}),Object.defineProperty(this,Ze,{value:cs}),Object.defineProperty(this,Ye,{value:ns}),Object.defineProperty(this,Je,{value:os}),Object.defineProperty(this,Ge,{value:rs}),Object.defineProperty(this,Qe,{value:is}),Object.defineProperty(this,ze,{value:ls}),Object.defineProperty(this,qe,{value:ts}),Object.defineProperty(this,We,{value:as}),Object.defineProperty(this,De,{writable:!0,value:void 0}),Object.defineProperty(this,Ae,{writable:!0,value:void 0}),Object.defineProperty(this,xe,{writable:!0,value:void 0}),Object.defineProperty(this,Re,{writable:!0,value:void 0}),Object.defineProperty(this,$e,{writable:!0,value:!1}),Object.defineProperty(this,ke,{writable:!0,value:new d.MemoryCache}),Object.defineProperty(this,Me,{writable:!0,value:void 0}),Object.defineProperty(this,Ve,{writable:!0,value:void 0}),Object.defineProperty(this,Xe,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,De)[De]=e.signedUserId||null,babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]=h.Type.isString(e.phoneNumber)?p.PhoneFormatter.formatValue(e.phoneNumber):"",babelHelpers.classPrivateFieldLooseBase(this,xe)[xe]=!0===e.isPhoneNumberConfirmed,babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]=!1,babelHelpers.classPrivateFieldLooseBase(this,Me)[Me]=babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge](),babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]=h.Tag.render(Ne||(Ne=Ue`
			<div class="intranet-push-otp-connect-popup__view-enter-code-subtitle">${0}</div>
		`),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_ENTER_CODE_SUBTITLE")),babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]=h.Tag.render(we||(we=Ue`
			<div class="intranet-push-otp-connect-popup__view-enter-code-errors" id="enter-code-error-container"></div>
		`))}render(){return babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].remember("view",()=>{const e=babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]||!h.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]);return h.Tag.render(Ce||(Ce=Ue`
				<div class="intranet-push-otp-connect-popup__view-container">
					<div>
						<div class="intranet-push-otp-connect-popup__popup-title">
							${0}
						</div>
						${0}
					</div>
					<div class="intranet-push-otp-connect-popup__view-description-text">${0}</div>
					<div class="intranet-push-otp-connect-popup__view-connect-container --space-between --code">
						${0}
						<div class="intranet-push-otp-connect-popup__view-phone-number-phone"></div>
					</div>
					<div class="intranet-push-otp-connect-popup__view-button-container">
						${0}
					</div>
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,We)[We](),this.renderStepIndicators(),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_NUMBER_DESC"),e?babelHelpers.classPrivateFieldLooseBase(this,ze)[ze]():babelHelpers.classPrivateFieldLooseBase(this,qe)[qe](),babelHelpers.classPrivateFieldLooseBase(this,Me)[Me].render())})}afterShow(e){var s;Z.sendEvent(Z.SHOW_INPUT_PHONE),null==(s=this.render().querySelector("input"))||s.focus()}setForceChangeMode(e){babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]=e,e&&(babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]="")}}function as(){return h.Tag.render(Se||(Se=Ue`<span>${0}</span>`),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_NUMBER_TITLE"))}function ts(){return h.Tag.render(Ee||(Ee=Ue`
			<div>
				<div class="intranet-push-otp-connect-popup__view-phone-number-value">${0}</div>
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae],babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe](),babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe])}function ls(){const e=h.Dom.create("input",{attrs:{className:"intranet-push-otp-connect-popup__view-phone-number-input",type:"text",name:"phone_number"},props:{value:p.PhoneFormatter.formatValue(babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae])},events:{input:e=>{h.Type.isElementNode(null==e?void 0:e.target)&&(e.target.value=p.PhoneFormatter.formatValue(e.target.value),babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]=e.target.value)}}});if(h.Reflection.getClass(BX.PhoneNumber)){const s=new BX.PhoneNumber.Input({node:e});s.waitForInitialization().then(()=>{const a=h.Text.encode(s.getCountryCode());a&&(e.placeholder="+"+a)})}return h.Tag.render(Ie||(Ie=Ue`
			<div class="intranet-push-otp-connect-popup__view-phone-number-input-box">
				${0}
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve],e,babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe])}function is(){return h.Dom.create("a",{props:{className:"intranet-push-otp-connect-popup__view-phone-number-link"},html:h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_CHANGE_NUMBER_BTN"),events:{click:()=>{var e;babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]="",babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]=!0;const s=this.render().querySelector(".intranet-push-otp-connect-popup__view-connect-container");h.Dom.clean(s);const a=babelHelpers.classPrivateFieldLooseBase(this,ze)[ze]();h.Dom.append(a,s),h.Dom.append(h.Tag.render(je||(je=Ue`<div class="intranet-push-otp-connect-popup__view-phone-number-phone"></div>`)),s),null==(e=a.querySelector("input"))||e.focus()}}})}function rs(){return new v.Button({text:h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_CONNECT_NEXT_BTN"),noCaps:!0,size:v.Button.Size.MD,useAirDesign:!0,disabled:!1,onclick:e=>{e.isWaiting()||e.isDisabled()||(babelHelpers.classPrivateFieldLooseBase(this,es)[es](),babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]||!babelHelpers.classPrivateFieldLooseBase(this,xe)[xe]||babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]?babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]():babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]("success"))}})}function os(){babelHelpers.classPrivateFieldLooseBase(this,Me)[Me].isWaiting()||(babelHelpers.classPrivateFieldLooseBase(this,Me)[Me].setWaiting(!0),BX.ajax.runAction("intranet.v2.Otp.changeAuthPhone",{method:"POST",data:{signedUserId:babelHelpers.classPrivateFieldLooseBase(this,De)[De],phoneNumber:babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]}}).then(e=>{babelHelpers.classPrivateFieldLooseBase(this,Me)[Me].setWaiting(!1),!0===e.data&&(babelHelpers.classPrivateFieldLooseBase(this,xe)[xe]=!1,babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]())},e=>{babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze](e.errors),babelHelpers.classPrivateFieldLooseBase(this,Me)[Me].setWaiting(!1)}).catch(e=>{babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze](e.errors),babelHelpers.classPrivateFieldLooseBase(this,Me)[Me].setWaiting(!1)}))}function ns(e=null){this.emit("onNextView",{viewCode:e,options:{phoneNumber:babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]}})}function cs(e){h.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]),e.forEach(e=>{h.Dom.append(h.Tag.render(Ke||(Ke=Ue`<span>${0}</span>`),e.message),babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe])})}function ps(){h.Dom.clean(BX("enter-code-error-container"))}let bs,ds,vs=e=>e;var Ps=babelHelpers.classPrivateFieldLooseKey("button"),hs=babelHelpers.classPrivateFieldLooseKey("phoneLabel"),us=babelHelpers.classPrivateFieldLooseKey("phoneOs"),Ls=babelHelpers.classPrivateFieldLooseKey("isProcessing"),Hs=babelHelpers.classPrivateFieldLooseKey("renderTitle"),Fs=babelHelpers.classPrivateFieldLooseKey("createContinueBtn");class Bs extends S{constructor(e){super(e),Object.defineProperty(this,Fs,{value:fs}),Object.defineProperty(this,Hs,{value:ys}),Object.defineProperty(this,Ps,{writable:!0,value:void 0}),Object.defineProperty(this,hs,{writable:!0,value:void 0}),Object.defineProperty(this,us,{writable:!0,value:void 0}),Object.defineProperty(this,Ls,{writable:!0,value:!1}),babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs](),babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]=h.Type.isStringFilled(e.phoneLabel)?e.phoneLabel:"",babelHelpers.classPrivateFieldLooseBase(this,us)[us]=h.Type.isStringFilled(e.phoneOs)?e.phoneOs:""}beforeShow(e){var s,a,t;babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]=null!=(s=null==e||null==(a=e.device)?void 0:a.displayModel)?s:"",babelHelpers.classPrivateFieldLooseBase(this,us)[us]="Apple"===(null==e||null==(t=e.device)?void 0:t.manufacturer)?"ios":"android",babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]=!1}afterShow(e){Z.sendEvent(Z.SHOW_INSTALL_APP_SUCCESS)}render(){return h.Tag.render(bs||(bs=vs`
			<div class="intranet-push-otp-connect-popup__view-container">
				<div>
					<div class="intranet-push-otp-connect-popup__popup-title">
						${0}
					</div>
					${0}
				</div>
				<div class="intranet-push-otp-connect-popup__view-description-text">${0}</div>
				<div class="intranet-push-otp-connect-popup__view-connect-container">
					<div>
						<div class="intranet-push-otp-connect-popup__view-connect-logo ${0}"></div>
						<div class="intranet-push-otp-connect-popup__view-connect-logo-text">${0}</div>
					</div>
				</div>
				<div class="intranet-push-otp-connect-popup__view-button-container">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs](),this.renderStepIndicators(),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_CONNECT_DESC"),"ios"===babelHelpers.classPrivateFieldLooseBase(this,us)[us]?"":"--android",babelHelpers.classPrivateFieldLooseBase(this,hs)[hs],babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].render())}}function ys(){return h.Tag.render(ds||(ds=vs`<span>${0}</span>`),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_CONNECTED_TITLE"))}function fs(){return new v.Button({text:h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_CONNECT_NEXT_BTN"),noCaps:!0,size:v.Button.Size.MD,useAirDesign:!0,disabled:!1,onclick:e=>{babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]||e.isWaiting()||(babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]=!0,this.emit("onNextView",{viewCode:null,options:{closeIfLast:!0}}))}})}var _s=babelHelpers.classPrivateFieldLooseKey("className"),Os=babelHelpers.classPrivateFieldLooseKey("containerClassName"),ms=babelHelpers.classPrivateFieldLooseKey("name"),gs=babelHelpers.classPrivateFieldLooseKey("mask"),Ts=babelHelpers.classPrivateFieldLooseKey("codeLength"),Ns=babelHelpers.classPrivateFieldLooseKey("autoFocus"),ws=babelHelpers.classPrivateFieldLooseKey("allowPaste"),Cs=babelHelpers.classPrivateFieldLooseKey("container"),Ss=babelHelpers.classPrivateFieldLooseKey("complete"),Es=babelHelpers.classPrivateFieldLooseKey("input"),Is=babelHelpers.classPrivateFieldLooseKey("createInput"),js=babelHelpers.classPrivateFieldLooseKey("inputHandler"),Ks=babelHelpers.classPrivateFieldLooseKey("keydownHandler"),Us=babelHelpers.classPrivateFieldLooseKey("focusHandler"),Ds=babelHelpers.classPrivateFieldLooseKey("pasteHandler"),As=babelHelpers.classPrivateFieldLooseKey("moveToNext"),xs=babelHelpers.classPrivateFieldLooseKey("moveToPrevious"),Rs=babelHelpers.classPrivateFieldLooseKey("checkComplete");class $s{constructor(e={}){Object.defineProperty(this,Rs,{value:Qs}),Object.defineProperty(this,xs,{value:zs}),Object.defineProperty(this,As,{value:qs}),Object.defineProperty(this,Ds,{value:Ws}),Object.defineProperty(this,Us,{value:Xs}),Object.defineProperty(this,Ks,{value:Vs}),Object.defineProperty(this,js,{value:Ms}),Object.defineProperty(this,Is,{value:ks}),Object.defineProperty(this,_s,{writable:!0,value:void 0}),Object.defineProperty(this,Os,{writable:!0,value:void 0}),Object.defineProperty(this,ms,{writable:!0,value:void 0}),Object.defineProperty(this,gs,{writable:!0,value:void 0}),Object.defineProperty(this,Ts,{writable:!0,value:void 0}),Object.defineProperty(this,Ns,{writable:!0,value:void 0}),Object.defineProperty(this,ws,{writable:!0,value:void 0}),Object.defineProperty(this,Cs,{writable:!0,value:void 0}),Object.defineProperty(this,Ss,{writable:!0,value:void 0}),Object.defineProperty(this,Es,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]=h.Type.isNumber(e.codeLength)?e.codeLength:6,babelHelpers.classPrivateFieldLooseBase(this,ms)[ms]=h.Type.isString(e.name)?e.name:"confirm_code",babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]=e.mask instanceof RegExp?e.mask:/\D/g,babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]=h.Type.isString(e.className)?e.className:"",babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]=h.Type.isString(e.containerClassName)?e.containerClassName:"",babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]=!h.Type.isBoolean(e.autoFocus)||e.autoFocus,babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]=!h.Type.isBoolean(e.allowPaste)||e.allowPaste,babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]=h.Type.isFunction(e.complete)?e.complete:()=>{},babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]=h.Type.isFunction(e.input)?e.input:()=>{}}getValue(){return[...babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].querySelectorAll("input")].map(e=>e.value).join("")}setInputClass(e){var s,a;return[...null!=(s=null==(a=babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs])?void 0:a.querySelectorAll("input"))?s:[]].forEach(s=>{s.className=e})}setValue(e){const s=babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].querySelectorAll("input"),a=[...e.replace(babelHelpers.classPrivateFieldLooseBase(this,gs)[gs],"")];s.forEach((e,s)=>{e.value=a[s]||""})}clear(){const e=babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].querySelectorAll("input");e.forEach(e=>{e.value=""}),babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]&&e[0]&&e[0].focus()}focus(){const e=babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].querySelector('input:not([value]), input[value=""]')||babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].querySelector("input");e&&e.focus()}render(){babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs]=h.Dom.create("div",{attrs:{className:babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]}});for(let e=0;e<babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts];e++)h.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,Is)[Is](),babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs]);if(babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]){const e=babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].querySelector("input");e&&h.Event.bind(e,"paste",babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].bind(this))}return babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]&&setTimeout(()=>this.focus(),0),babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs]}}function ks(){return h.Dom.create({tag:"input",attrs:{className:babelHelpers.classPrivateFieldLooseBase(this,_s)[_s],name:babelHelpers.classPrivateFieldLooseBase(this,ms)[ms]+"[]",type:"text",autocomplete:"one-time-code",maxlength:"1"},events:{input:babelHelpers.classPrivateFieldLooseBase(this,js)[js].bind(this),keydown:babelHelpers.classPrivateFieldLooseBase(this,Ks)[Ks].bind(this),focus:babelHelpers.classPrivateFieldLooseBase(this,Us)[Us].bind(this)}})}function Ms(e){const s=e.target;babelHelpers.classPrivateFieldLooseBase(this,Es)[Es](s),s.value=s.value.replace(babelHelpers.classPrivateFieldLooseBase(this,gs)[gs],"").slice(0,1),s.value.length>0&&babelHelpers.classPrivateFieldLooseBase(this,As)[As](s)}function Vs(e){const s=e.target;if(babelHelpers.classPrivateFieldLooseBase(this,Es)[Es](s),"Backspace"===e.key&&""===s.value||"ArrowLeft"===e.key){const a=s.previousElementSibling;a&&"INPUT"===a.tagName&&(a.focus(),"Backspace"===e.key&&(a.value="")),e.preventDefault()}else"ArrowRight"===e.key&&(babelHelpers.classPrivateFieldLooseBase(this,As)[As](s),e.preventDefault())}function Xs(e){e.target.select()}function Ws(e){if(!babelHelpers.classPrivateFieldLooseBase(this,ws)[ws])return;const s=[...(e.clipboardData||window.clipboardData).getData("text").replace(babelHelpers.classPrivateFieldLooseBase(this,gs)[gs],"")],a=babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].querySelectorAll("input");if(s.forEach((e,s)=>{a[s]&&(a[s].value=e)}),s.length>0){const e=Math.min(s.length-1,a.length-1),t=a[e+1];t?t.focus():(a[e].blur(),babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]())}e.preventDefault()}function qs(e){const s=e.nextElementSibling;s&&"INPUT"===s.tagName?s.focus():(e.blur(),babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]())}function zs(e){const s=e.previousElementSibling;s&&"INPUT"===s.tagName&&s.focus()}function Qs(){this.getValue().length===babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]&&babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]()}let Gs,Js,Ys,Zs,ea,sa,aa=e=>e;var ta=babelHelpers.classPrivateFieldLooseKey("signedUserId"),la=babelHelpers.classPrivateFieldLooseKey("cooldown"),ia=babelHelpers.classPrivateFieldLooseKey("input"),ra=babelHelpers.classPrivateFieldLooseKey("button"),oa=babelHelpers.classPrivateFieldLooseKey("errorContainer"),na=babelHelpers.classPrivateFieldLooseKey("timerContainer"),ca=babelHelpers.classPrivateFieldLooseKey("cooldownInterval"),pa=babelHelpers.classPrivateFieldLooseKey("isPhoneNumberConfirmed"),ba=babelHelpers.classPrivateFieldLooseKey("codeSent"),da=babelHelpers.classPrivateFieldLooseKey("container"),va=babelHelpers.classPrivateFieldLooseKey("phoneNumber"),Pa=babelHelpers.classPrivateFieldLooseKey("backButton"),ha=babelHelpers.classPrivateFieldLooseKey("isFirstView"),ua=babelHelpers.classPrivateFieldLooseKey("renderTitle"),La=babelHelpers.classPrivateFieldLooseKey("createConfirmCodeBtn"),Ha=babelHelpers.classPrivateFieldLooseKey("canSendCode"),Fa=babelHelpers.classPrivateFieldLooseKey("startCooldownTimer"),Ba=babelHelpers.classPrivateFieldLooseKey("renderResendBtn"),ya=babelHelpers.classPrivateFieldLooseKey("renderTimer"),fa=babelHelpers.classPrivateFieldLooseKey("confirmCode"),_a=babelHelpers.classPrivateFieldLooseKey("setError"),Oa=babelHelpers.classPrivateFieldLooseKey("cleanError"),ma=babelHelpers.classPrivateFieldLooseKey("createBackBtn");class ga extends S{constructor(e){super(e),Object.defineProperty(this,ma,{value:Ua}),Object.defineProperty(this,Oa,{value:Ka}),Object.defineProperty(this,_a,{value:ja}),Object.defineProperty(this,fa,{value:Ia}),Object.defineProperty(this,ya,{value:Ea}),Object.defineProperty(this,Ba,{value:Sa}),Object.defineProperty(this,Fa,{value:Ca}),Object.defineProperty(this,Ha,{value:wa}),Object.defineProperty(this,La,{value:Na}),Object.defineProperty(this,ua,{value:Ta}),Object.defineProperty(this,ta,{writable:!0,value:void 0}),Object.defineProperty(this,la,{writable:!0,value:0}),Object.defineProperty(this,ia,{writable:!0,value:void 0}),Object.defineProperty(this,ra,{writable:!0,value:void 0}),Object.defineProperty(this,oa,{writable:!0,value:void 0}),Object.defineProperty(this,na,{writable:!0,value:void 0}),Object.defineProperty(this,ca,{writable:!0,value:void 0}),Object.defineProperty(this,pa,{writable:!0,value:!1}),Object.defineProperty(this,ba,{writable:!0,value:!1}),Object.defineProperty(this,da,{writable:!0,value:new d.MemoryCache}),Object.defineProperty(this,va,{writable:!0,value:""}),Object.defineProperty(this,Pa,{writable:!0,value:void 0}),Object.defineProperty(this,ha,{writable:!0,value:!1}),babelHelpers.classPrivateFieldLooseBase(this,ta)[ta]=e.signedUserId||null,babelHelpers.classPrivateFieldLooseBase(this,va)[va]=e.phoneNumber||"",babelHelpers.classPrivateFieldLooseBase(this,Pa)[Pa]=babelHelpers.classPrivateFieldLooseBase(this,ma)[ma](),babelHelpers.classPrivateFieldLooseBase(this,ia)[ia]=new $s({codeLength:6,name:"confirm_code",className:"confirm-code-input --primary",containerClassName:"enter-confirm-code-container",complete:()=>{babelHelpers.classPrivateFieldLooseBase(this,ra)[ra].setDisabled(!1),babelHelpers.classPrivateFieldLooseBase(this,fa)[fa]()},input:()=>{babelHelpers.classPrivateFieldLooseBase(this,Oa)[Oa]()}}),babelHelpers.classPrivateFieldLooseBase(this,ra)[ra]=babelHelpers.classPrivateFieldLooseBase(this,La)[La](),babelHelpers.classPrivateFieldLooseBase(this,na)[na]=h.Tag.render(Gs||(Gs=aa`
			<div class="intranet-push-otp-connect-popup__view-enter-code-cooldown" id="enter-code-cooldown-timer">
			</div>
		`)),babelHelpers.classPrivateFieldLooseBase(this,oa)[oa]=h.Tag.render(Js||(Js=aa`
			<div class="intranet-push-otp-connect-popup__view-enter-code-errors" id="enter-code-error-container"></div>
		`))}render(){return babelHelpers.classPrivateFieldLooseBase(this,da)[da].remember("view",()=>{const e=this.getStepInfo();return babelHelpers.classPrivateFieldLooseBase(this,ha)[ha]=1===e.current,h.Tag.render(Ys||(Ys=aa`
				<div class="intranet-push-otp-connect-popup__view-container">
					<div>
						<div class="intranet-push-otp-connect-popup__popup-title">
							${0}
						</div>
						${0}
					</div>
					<div class="intranet-push-otp-connect-popup__view-description-text">
						${0}
					</div>
					<div class="intranet-push-otp-connect-popup__view-enter-code-container --content-center">
							${0}
							${0}
							${0}
					</div>
					<div class="intranet-push-otp-connect-popup__view-button-container">
						${0}
						${0}
					</div>
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,ua)[ua](),this.renderStepIndicators(),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_ENTER_CODE_DESCRIPTION",{"#PHONE_NUMBER#":`<strong>${babelHelpers.classPrivateFieldLooseBase(this,va)[va]}</strong>`}),babelHelpers.classPrivateFieldLooseBase(this,ia)[ia].render(),babelHelpers.classPrivateFieldLooseBase(this,oa)[oa],babelHelpers.classPrivateFieldLooseBase(this,na)[na],babelHelpers.classPrivateFieldLooseBase(this,ha)[ha]?"":babelHelpers.classPrivateFieldLooseBase(this,Pa)[Pa].render(),babelHelpers.classPrivateFieldLooseBase(this,ra)[ra].render())})}sendCode(){babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha]()&&(babelHelpers.classPrivateFieldLooseBase(this,Oa)[Oa](),babelHelpers.classPrivateFieldLooseBase(this,ra)[ra].setWaiting(!0),babelHelpers.classPrivateFieldLooseBase(this,ba)[ba]=!0,BX.ajax.runAction("intranet.v2.Otp.sendConfirmationCode",{method:"POST",data:{signedUserId:babelHelpers.classPrivateFieldLooseBase(this,ta)[ta]}}).then(e=>{var s,a;"success"===e.status&&(babelHelpers.classPrivateFieldLooseBase(this,la)[la]=h.Type.isNumber(null==(s=e.data)?void 0:s.DATE_SEND)?null==(a=e.data)?void 0:a.DATE_SEND:0,babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]());babelHelpers.classPrivateFieldLooseBase(this,ra)[ra].setWaiting(!1)},e=>{var s,a;babelHelpers.classPrivateFieldLooseBase(this,_a)[_a](e.errors),babelHelpers.classPrivateFieldLooseBase(this,la)[la]=h.Type.isNumber(null==(s=e.data)?void 0:s.DATE_SEND)?null==(a=e.data)?void 0:a.DATE_SEND:0,babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa](),babelHelpers.classPrivateFieldLooseBase(this,ra)[ra].setWaiting(!1)}).catch(e=>console.error(e)))}beforeDismiss(e){clearInterval(babelHelpers.classPrivateFieldLooseBase(this,ca)[ca])}isPhoneNumberConfirmed(){return babelHelpers.classPrivateFieldLooseBase(this,pa)[pa]}beforeShow(e){babelHelpers.classPrivateFieldLooseBase(this,ba)[ba]=!1,e.phoneNumber&&(babelHelpers.classPrivateFieldLooseBase(this,va)[va]=e.phoneNumber)}afterShow(e){Z.sendEvent(Z.SHOW_INPUT_PHONE_CODE),babelHelpers.classPrivateFieldLooseBase(this,ba)[ba]||this.sendCode()}afterDismiss(e){babelHelpers.classPrivateFieldLooseBase(this,da)[da].delete("view"),h.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,oa)[oa]),h.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,na)[na]),babelHelpers.classPrivateFieldLooseBase(this,la)[la]=0,clearInterval(babelHelpers.classPrivateFieldLooseBase(this,ca)[ca]),babelHelpers.classPrivateFieldLooseBase(this,ia)[ia].clear()}}function Ta(){return h.Tag.render(Zs||(Zs=aa`<span>${0}</span>`),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_ENTER_CODE_TITLE"))}function Na(){return new v.Button({text:h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_CONNECT_CONFIRM_BTN"),noCaps:!0,size:v.Button.Size.MD,useAirDesign:!0,disabled:!0,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,ba)[ba]||babelHelpers.classPrivateFieldLooseBase(this,fa)[fa]()}})}function wa(){return babelHelpers.classPrivateFieldLooseBase(this,la)[la]<=0&&!babelHelpers.classPrivateFieldLooseBase(this,ba)[ba]}function Ca(){if(clearInterval(babelHelpers.classPrivateFieldLooseBase(this,ca)[ca]),!babelHelpers.classPrivateFieldLooseBase(this,la)[la]||!babelHelpers.classPrivateFieldLooseBase(this,na)[na])return;const e=()=>{if(babelHelpers.classPrivateFieldLooseBase(this,la)[la]<=0)return h.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,na)[na]),void h.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba](),babelHelpers.classPrivateFieldLooseBase(this,na)[na]);h.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,na)[na]),h.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,ya)[ya](),babelHelpers.classPrivateFieldLooseBase(this,na)[na]),babelHelpers.classPrivateFieldLooseBase(this,la)[la]--};e(),babelHelpers.classPrivateFieldLooseBase(this,ca)[ca]=setInterval(()=>{e(),babelHelpers.classPrivateFieldLooseBase(this,la)[la]<0&&clearInterval(babelHelpers.classPrivateFieldLooseBase(this,ca)[ca])},1e3)}function Sa(){return h.Dom.create("a",{attrs:{href:"#"},props:{className:"intranet-push-otp-connect-popup__view-enter-code-new"},html:h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_RESEND_CODE"),events:{click:()=>{babelHelpers.classPrivateFieldLooseBase(this,ba)[ba]=!1,this.sendCode()}}})}function Ea(){return h.Tag.render(ea||(ea=aa`<span>${0}</span>`),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_COOLDOWN",{"#SEC#":babelHelpers.classPrivateFieldLooseBase(this,la)[la]}))}function Ia(){babelHelpers.classPrivateFieldLooseBase(this,ra)[ra].isWaiting()||(babelHelpers.classPrivateFieldLooseBase(this,Oa)[Oa](),babelHelpers.classPrivateFieldLooseBase(this,ra)[ra].setWaiting(!0),BX.ajax.runAction("intranet.v2.Otp.confirmationPhoneNumber",{method:"POST",data:{signedUserId:babelHelpers.classPrivateFieldLooseBase(this,ta)[ta],code:babelHelpers.classPrivateFieldLooseBase(this,ia)[ia].getValue()}}).then(e=>{babelHelpers.classPrivateFieldLooseBase(this,ra)[ra].setWaiting(!1),"success"===e.status&&(babelHelpers.classPrivateFieldLooseBase(this,pa)[pa]=!0,this.emit("onNextView",{viewCode:null,options:{closeIfLast:!0}}))},e=>{babelHelpers.classPrivateFieldLooseBase(this,_a)[_a](e.errors),babelHelpers.classPrivateFieldLooseBase(this,ra)[ra].setWaiting(!1)}).catch(e=>{babelHelpers.classPrivateFieldLooseBase(this,_a)[_a](e.errors),babelHelpers.classPrivateFieldLooseBase(this,ra)[ra].setWaiting(!1)}))}function ja(e){babelHelpers.classPrivateFieldLooseBase(this,ia)[ia].setInputClass("confirm-code-input --danger"),h.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,oa)[oa]),e.forEach(e=>{h.Dom.append(h.Tag.render(sa||(sa=aa`<span>${0}</span>`),e.message),babelHelpers.classPrivateFieldLooseBase(this,oa)[oa])})}function Ka(){babelHelpers.classPrivateFieldLooseBase(this,ia)[ia].setInputClass("confirm-code-input --primary"),h.Dom.clean(BX("enter-code-error-container"))}function Ua(){return new v.Button({text:h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_BUTTON_BACK"),noCaps:!0,size:v.Button.Size.MD,style:v.AirButtonStyle.PLAIN_NO_ACCENT,useAirDesign:!0,disabled:!1,onclick:()=>{this.emit("onPreviousView")}})}let Da,Aa,xa=e=>e;var Ra=babelHelpers.classPrivateFieldLooseKey("setConfetti");class $a extends S{constructor(...e){super(...e),Object.defineProperty(this,Ra,{value:ka})}render(){return h.Tag.render(Da||(Da=xa`
			<div class="intranet-push-otp-connect-popup-success-box">
				<div class="intranet-push-otp-connect-popup-success-logo"></div>
				<div class="intranet-push-otp-connect-popup-success-title">${0}</div>
				<div class="intranet-push-otp-connect-popup-success-subtitle">${0}</div>
			</div>
		`),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_SUCCESS_TITLE"),h.Loc.getMessage("INTRANET_PUSH_OTP_CONNECT_POPUP_SUCCESS_SUBTITLE"))}afterShow(e){Z.sendEvent(Z.ADD_PHONE_SUCCESS),setTimeout(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ra)[Ra]()},500)}}function ka(){if(h.Browser.isFirefox()){const e=h.Tag.render(Aa||(Aa=xa`
				<canvas></canvas>
			`));h.Dom.style(e,"position","fixed"),h.Dom.style(e,"top","0px"),h.Dom.style(e,"left","0px"),h.Dom.style(e,"pointer-events","none"),h.Dom.style(e,"z-index","11111"),h.Dom.style(e,"width","100%"),h.Dom.style(e,"height","100%"),h.Dom.append(e,document.body);P.Confetti.create(e,{resize:!0,useWorker:!0})({particleCount:250,origin:{y:.65},spread:100})}else P.Confetti.fire({particleCount:250,spread:100,origin:{y:.65},zIndex:111111})}var Ma=babelHelpers.classPrivateFieldLooseKey("options"),Va=babelHelpers.classPrivateFieldLooseKey("defaultTtl"),Xa=babelHelpers.classPrivateFieldLooseKey("createQrView"),Wa=babelHelpers.classPrivateFieldLooseKey("createConnectedView"),qa=babelHelpers.classPrivateFieldLooseKey("createSendNumberView"),za=babelHelpers.classPrivateFieldLooseKey("createEnterCodeView"),Qa=babelHelpers.classPrivateFieldLooseKey("createSuccessView"),Ga=babelHelpers.classPrivateFieldLooseKey("createConnectPopup");function Ja(){var e,s,a,t,l,i,r,o;return new Be({signedUserId:babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma].signedUserId,pullConfig:babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma].pullConfig,linkProvider:null!=(e=null==(s=babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma])?void 0:s.linkProvider)?e:()=>{return e=babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma].intent,s=babelHelpers.classPrivateFieldLooseBase(this,Va)[Va],h.ajax.runAction("mobile.deeplink.get",{data:{intent:e,ttl:s}});var e,s},repeatingRequest:null!=(a=null==(t=babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma])?void 0:t.repeatingRequest)?a:new Y(1e3*babelHelpers.classPrivateFieldLooseBase(this,Va)[Va]),callback:null!=(l=null==(i=babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma])?void 0:i.appConnectingProvider)?l:this.appConnectingHandler,onAppConnected:null==(r=babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma])||null==(o=r.events)?void 0:o.onAppConnected,id:"qr"})}function Ya(){return new Bs({id:"connected"})}function Za(){return new ss({signedUserId:babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma].signedUserId,phoneNumber:babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma].phoneNumber,isPhoneNumberConfirmed:babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma].isPhoneNumberConfirmed,id:"number"})}function et(){return new ga({id:"code",signedUserId:babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma].signedUserId,phoneNumber:babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma].phoneNumber})}function st(){return new $a({id:"success",excludeFromSteps:!0})}function at(e,s=null){const a=new V({viewList:e,viewCode:s});return a.subscribe("onClose",()=>{var e,s;null==(e=babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma])||null==(s=e.events)||null==s.onPopupClose||s.onPopupClose()}),a}e.ConnectPopup=V,e.QrView=Be,e.SendNumberView=ss,e.EnablePushOtpProvider=class{constructor(e){Object.defineProperty(this,Ga,{value:at}),Object.defineProperty(this,Qa,{value:st}),Object.defineProperty(this,za,{value:et}),Object.defineProperty(this,qa,{value:Za}),Object.defineProperty(this,Wa,{value:Ya}),Object.defineProperty(this,Xa,{value:Ja}),Object.defineProperty(this,Ma,{writable:!0,value:void 0}),Object.defineProperty(this,Va,{writable:!0,value:600}),babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma]=e||{}}appConnectingHandler(e){const s={};var a;(null!=e&&e.device&&(s.deviceInfo=e.device),null!=e&&e.startTimestamp)&&(s.startTimestamp=null!=(a=null==e?void 0:e.startTimestamp)?a:0);const t={secret:e.secret,type:"push",sync1:e.code,sync2:"",signedUserId:e.signedUserId,initParams:s};return h.ajax.runAction("intranet.v2.Otp.setupPushOtp",{mode:"ajax",method:"POST",data:t})}create(e){const s=[babelHelpers.classPrivateFieldLooseBase(this,Xa)[Xa](),babelHelpers.classPrivateFieldLooseBase(this,Wa)[Wa](),babelHelpers.classPrivateFieldLooseBase(this,qa)[qa](),babelHelpers.classPrivateFieldLooseBase(this,za)[za](),babelHelpers.classPrivateFieldLooseBase(this,Qa)[Qa]()];return babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga](s,e)}onlySmsOtpConfirm(){const e=[babelHelpers.classPrivateFieldLooseBase(this,za)[za]()];return babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga](e)}onlySmsOtpChange(){const e=babelHelpers.classPrivateFieldLooseBase(this,qa)[qa](),s=[e,babelHelpers.classPrivateFieldLooseBase(this,za)[za]()],a=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga](s);return e.setForceChangeMode(!0),a}onlyPushOtp(){const e=[babelHelpers.classPrivateFieldLooseBase(this,Xa)[Xa](),babelHelpers.classPrivateFieldLooseBase(this,Wa)[Wa]()];return babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga](e)}full(){const e=[babelHelpers.classPrivateFieldLooseBase(this,Xa)[Xa](),babelHelpers.classPrivateFieldLooseBase(this,Wa)[Wa](),babelHelpers.classPrivateFieldLooseBase(this,qa)[qa](),babelHelpers.classPrivateFieldLooseBase(this,za)[za](),babelHelpers.classPrivateFieldLooseBase(this,Qa)[Qa]()];return babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga](e)}resumeOtpRequest(){return BX.ajax.runAction("intranet.v2.Otp.resumeOtp",{mode:"ajax",method:"POST",data:{signedUserId:babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma].signedUserId}})}},e.RepeatingRequest=Y,e.pauseOtpRequest=(e,s)=>BX.ajax.runAction("intranet.v2.Otp.pauseOtp",{mode:"ajax",method:"POST",data:{signedUserId:s,days:e}}),e.resumeOtpRequest=e=>BX.ajax.runAction("intranet.v2.Otp.resumeOtp",{mode:"ajax",method:"POST",data:{signedUserId:e}})}(this.BX.Intranet.PushOtp=this.BX.Intranet.PushOtp||{},BX.Main,BX.Event,BX,BX,BX,BX,BX,BX,BX.UI.Analytics,BX.Ui,BX,BX.Cache,BX.UI,BX.UI,BX);
//# sourceMappingURL=connect-popup.bundle.js.map
