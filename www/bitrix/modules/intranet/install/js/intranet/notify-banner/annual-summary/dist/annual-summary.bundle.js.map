{"version":3,"file":"annual-summary.bundle.js","sources":["../src/analytic.js","../src/carousel.js","../src/views/view.js","../src/navigation.js","../src/message.js","../src/share-service.js","../src/views/with-button-view.js","../src/views/start-view.js","../src/feature-type.js","../src/views/summary-view.js","../src/views/progress-bar.js","../src/views/winner-view.js","../src/view-factory.js","../src/annual-summary.js"],"sourcesContent":["import { AnalyticsOptions, sendData } from 'ui.analytics';\n\nexport class Analytic\n{\n\t#section: string;\n\n\tconstructor(options: {})\n\t{\n\t\tthis.#section = options.section ?? '';\n\t}\n\n\tsend(options: AnalyticsOptions): void\n\t{\n\t\tsendData({\n\t\t\t...options,\n\t\t\tcategory: 'year_summary',\n\t\t\ttool: 'intranet',\n\t\t\tc_section: this.#section,\n\t\t});\n\t}\n\n\tnext(stepId: string, type: string): void\n\t{\n\t\tthis.send({\n\t\t\tevent: 'next_click',\n\t\t\tp1: stepId,\n\t\t\ttype,\n\t\t});\n\t}\n\n\tprev(stepId: string, type: string): void\n\t{\n\t\tthis.send({\n\t\t\tevent: 'prev_click',\n\t\t\tp1: stepId,\n\t\t\ttype,\n\t\t});\n\t}\n\n\tshare(stepId: string, type: string): void\n\t{\n\t\tthis.send({\n\t\t\tevent: 'share_click',\n\t\t\tp1: stepId,\n\t\t\ttype,\n\t\t});\n\t}\n\n\tsave(stepId: string, type: string): void\n\t{\n\t\tthis.send({\n\t\t\tevent: 'save_click',\n\t\t\tp1: stepId,\n\t\t\ttype,\n\t\t});\n\t}\n\n\tclose(stepId: string, type: string): void\n\t{\n\t\tthis.send({\n\t\t\tevent: 'close_click',\n\t\t\tp1: stepId,\n\t\t\ttype,\n\t\t});\n\t}\n\n\tshow(stepId: string, type: string): void\n\t{\n\t\tthis.send({\n\t\t\tevent: 'popup_show',\n\t\t\tp1: stepId,\n\t\t\ttype,\n\t\t});\n\t}\n}\n","import { Dom, Event, Tag, Type } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { AirButtonStyle, Button } from 'ui.buttons';\nimport { AvatarRound } from 'ui.avatar';\nimport type { Analytic } from './analytic';\n\nexport class Carousel\n{\n\t#position = {\n\t\tleft: 1,\n\t\tright: -1,\n\t};\n\n\t#popup: Popup;\n\t#container: HTMLElement;\n\t#leftControl: HTMLElement;\n\t#rightControl: HTMLElement;\n\t#navigation: Navigation;\n\t#canClose: boolean;\n\t#userpicPath: string;\n\t#showOverlay: boolean;\n\t#analytic: ?Analytic;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.#container = Tag.render`<div class=\"intranet-year-results-popup__slide-wrapper\"></div>`;\n\t\tthis.#canClose = options.canClose !== false;\n\t\tthis.#showOverlay = options.showOverlay ?? true;\n\t\tthis.#leftControl = Tag.render`<div class=\"intranet-year-results-popup__sidepanel-wrapper\"></div>`;\n\t\tthis.#rightControl = Tag.render`<div class=\"intranet-year-results-popup__sidepanel-wrapper\"></div>`;\n\t\tthis.#userpicPath = options.userpicPath;\n\t\tthis.#popup = this.#createPopup();\n\t\tthis.#navigation = options.navigation;\n\t\tthis.#analytic = options.analytic;\n\n\t\tif (options?.isUseArrowNavigation !== false)\n\t\t{\n\t\t\tEvent.bind(document, 'keydown', (event) => {\n\t\t\t\tif (this.#popup.isShown() && event.key === 'ArrowLeft')\n\t\t\t\t{\n\t\t\t\t\tthis.left();\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\telse if (this.#popup.isShown() && event.key === 'ArrowRight')\n\t\t\t\t{\n\t\t\t\t\tthis.right();\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.subscribe('onShow', () => {\n\t\t\tthis.#analytic?.show(this.#navigation.position().index(), this.#navigation.position().featureType());\n\t\t});\n\t\tthis.subscribe('onClose', () => {\n\t\t\tthis.#analytic?.close(this.#navigation.position().index(), this.#navigation.position().featureType());\n\t\t});\n\t}\n\n\thasLeft(): boolean\n\t{\n\t\treturn !Type.isNil(this.#navigation.position(-1));\n\t}\n\n\thasRight(): boolean\n\t{\n\t\treturn !Type.isNil(this.#navigation.position(1));\n\t}\n\n\tleft(): void\n\t{\n\t\tif (!this.hasLeft())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#middleCardTo(this.#position.left);\n\t\tthis.#showCard(this.#position.right);\n\t\tthis.#addCardToLeft();\n\t\tthis.#navigation.previous();\n\t\tthis.#updateControls();\n\t\tthis.#analytic?.prev(this.#navigation.position().index(), this.#navigation.position().featureType());\n\t}\n\n\tright(): void\n\t{\n\t\tif (!this.hasRight())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#middleCardTo(this.#position.right);\n\t\tthis.#showCard(this.#position.left);\n\t\tthis.#addCardToRight();\n\t\tthis.#navigation.next();\n\t\tthis.#updateControls();\n\t\tthis.#analytic?.next(this.#navigation.position().index(), this.#navigation.position().featureType());\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#popup.show();\n\t\tthis.#navigation.position(-1)?.addClassToContent('intranet-year-results-popup__slide--slide-out-left');\n\t\tDom.append(this.#navigation.position(-1)?.cachedContent(), this.#container);\n\n\t\tDom.append(this.#navigation.position()?.cachedContent(), this.#container);\n\n\t\tthis.#navigation.position(1)?.addClassToContent('intranet-year-results-popup__slide--slide-out-right');\n\t\tDom.append(this.#navigation.position(1)?.cachedContent(), this.#container);\n\t\tthis.#updateControls();\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.#popup.close();\n\t}\n\n\tsubscribe(eventName, callback): void\n\t{\n\t\tthis.#popup.subscribe(eventName, callback);\n\t}\n\n\t#showCard(position: number): void\n\t{\n\t\tthis.#navigation.position(position)?.removeClassFromContent([\n\t\t\t'intranet-year-results-popup__slide--slide-out-left',\n\t\t\t'intranet-year-results-popup__slide--slide-out-right',\n\t\t]);\n\t}\n\n\t#middleCardTo(side: number): void\n\t{\n\t\tthis.#navigation.position(side)?.destroy();\n\t\tif (side === this.#position.left)\n\t\t{\n\t\t\tthis.#navigation.position()?.addClassToContent('intranet-year-results-popup__slide--slide-out-right');\n\t\t}\n\t\telse if (side === this.#position.right)\n\t\t{\n\t\t\tthis.#navigation.position()?.addClassToContent('intranet-year-results-popup__slide--slide-out-left');\n\t\t}\n\t}\n\n\t#addCardToRight(): void\n\t{\n\t\tthis.#navigation.position(2)?.addClassToContent('intranet-year-results-popup__slide--slide-out-right');\n\t\tDom.append(this.#navigation.position(2)?.cachedContent(), this.#container);\n\t}\n\n\t#addCardToLeft(): void\n\t{\n\t\tthis.#navigation.position(-2)?.addClassToContent('intranet-year-results-popup__slide--slide-out-left');\n\t\tDom.prepend(this.#navigation.position(-2)?.cachedContent(), this.#container);\n\t}\n\n\t#createWrapper(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div id=\"popup-content-base\">\n\t\t\t\t<div class=\"intranet-year-results-popup__content\">\n\t\t\t\t\t<div class=\"intranet-year-results-popup__header\">\n\t\t\t\t\t\t<div class=\"intranet-year-results-popup__user\">\n\t\t\t\t\t\t\t${this.#createAvatar()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-year-results-popup__header-wrapper\">\n\t\t\t\t\t\t\t${this.#canClose ? this.closeButton() : ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#leftControl}\n\t\t\t\t\t${this.#container}\n\t\t\t\t\t${this.#rightControl}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#createPopup(): Popup\n\t{\n\t\tconst popup = new Popup({\n\t\t\tcloseByEsc: this.#canClose,\n\t\t\tcontent: this.#createWrapper(),\n\t\t\tpadding: 0,\n\t\t\tclassName: 'intranet-year-results-popup',\n\t\t\tfixed: true,\n\t\t\toverlay: this.#showOverlay\n\t\t\t\t? {\n\t\t\t\t\topacity: 100,\n\t\t\t\t\tbackgroundColor: 'rgba(0, 32, 78, 0.46)',\n\t\t\t\t}\n\t\t\t\t: false,\n\t\t\tanimation: {\n\t\t\t\tshowClassName: 'intranet-year-results-popup__show-animation',\n\t\t\t\tcloseAnimationType: 'transition',\n\t\t\t},\n\t\t});\n\n\t\tEvent.bindOnce(popup.getPopupContainer(), 'animationend', () => {\n\t\t\tDom.addClass(popup.getPopupContainer(), 'intranet-year-results-popup__show-animation-end');\n\t\t});\n\n\t\treturn popup;\n\t}\n\n\tcloseButton(): HTMLElement\n\t{\n\t\tconst button = new Button({\n\t\t\tsize: Button.Size.SMALL,\n\t\t\tstyle: AirButtonStyle.OUTLINE,\n\t\t\tuseAirDesign: true,\n\t\t\ticon: BX.UI.IconSet.Outline.CROSS_L,\n\t\t\tclassName: '--ui-context-edge-dark intranet-year-results-popup__navigation-button',\n\t\t\tonclick: () => this.close(),\n\t\t});\n\n\t\treturn button.render();\n\t}\n\n\t#createAvatar(): HTMLElement\n\t{\n\t\tif (Type.isStringFilled(this.#userpicPath))\n\t\t{\n\t\t\tconst avatar = new AvatarRound({\n\t\t\t\tsize: 84,\n\t\t\t\tuserpicPath: this.#userpicPath,\n\t\t\t});\n\n\t\t\treturn avatar.getContainer();\n\t\t}\n\n\t\treturn '';\n\t}\n\n\t#createRightControl(): HTMLElement\n\t{\n\t\tconst button = new Button({\n\t\t\tsize: Button.Size.LARGE,\n\t\t\tstyle: AirButtonStyle.OUTLINE,\n\t\t\tuseAirDesign: true,\n\t\t\ticon: BX.UI.IconSet.Outline.ARROW_RIGHT_M,\n\t\t\tclassName: '--ui-context-edge-dark intranet-year-results-popup__navigation-button',\n\t\t\tonclick: () => this.right(),\n\t\t});\n\n\t\treturn button.render();\n\t}\n\n\t#createLeftControl(): HTMLElement\n\t{\n\t\tconst button = new Button({\n\t\t\tsize: Button.Size.LARGE,\n\t\t\tstyle: AirButtonStyle.OUTLINE,\n\t\t\tuseAirDesign: true,\n\t\t\ticon: BX.UI.IconSet.Outline.ARROW_LEFT_M,\n\t\t\tclassName: '--ui-context-edge-dark intranet-year-results-popup__navigation-button',\n\t\t\tonclick: () => this.left(),\n\t\t});\n\n\t\treturn button.render();\n\t}\n\n\t#updateControls(): void\n\t{\n\t\tDom.clean(this.#leftControl);\n\t\tDom.clean(this.#rightControl);\n\t\tif (this.#navigation.position(-1))\n\t\t{\n\t\t\tDom.append(this.#createLeftControl(), this.#leftControl);\n\t\t}\n\n\t\tif (this.#navigation.position(1))\n\t\t{\n\t\t\tDom.append(this.#createRightControl(), this.#rightControl);\n\t\t}\n\t}\n}\n","import { Tag, Dom } from 'main.core';\n\nexport class View\n{\n\t#content: ?HTMLElement;\n\n\tcontent(): HTMLElement\n\t{\n\t\treturn Tag.render``;\n\t}\n\n\tcachedContent(): HTMLElement\n\t{\n\t\tif (!this.#content)\n\t\t{\n\t\t\tthis.#content = this.content();\n\t\t}\n\n\t\treturn this.#content;\n\t}\n\n\tdestroy(): void\n\t{\n\t\tDom.remove(this.#content);\n\t\tthis.#content = null;\n\t}\n\n\taddClassToContent(className: string): void\n\t{\n\t\tDom.addClass(this.cachedContent(), className);\n\t}\n\n\tremoveClassFromContent(className: string | []): void\n\t{\n\t\tDom.removeClass(this.cachedContent(), className);\n\t}\n\n\tfeatureType(): ?string\n\t{\n\t\treturn null;\n\t}\n\n\tindex(): ?number\n\t{\n\t\treturn null;\n\t}\n}\n","import { Event, Type } from 'main.core';\nimport { View } from './views/view';\n\nexport class Navigation\n{\n\t#views: [View] = [];\n\t#current: number = 0;\n\t#show: function;\n\n\tconstructor(options)\n\t{\n\t\tif (Type.isArray(options.views))\n\t\t{\n\t\t\tthis.#views = options.views.filter((view) => view instanceof View);\n\t\t}\n\t\tthis.#current = Type.isInteger(options.start) ? options.start : 0;\n\t}\n\n\tget(index: number): ?View\n\t{\n\t\treturn this.#views[index];\n\t}\n\n\tnext(): void\n\t{\n\t\tthis.move(this.#current + 1);\n\t}\n\n\tposition(offset: number = 0): View\n\t{\n\t\treturn this.get(this.#current + offset);\n\t}\n\n\tcurrent(): View\n\t{\n\t\treturn this.get(this.#current);\n\t}\n\n\tprevious(): ?View\n\t{\n\t\tthis.move(this.#current - 1);\n\t}\n\n\tmove(index: number): void\n\t{\n\t\tconst view = this.get(index);\n\t\tif (!view)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#current = index;\n\t}\n\n\toffset(i: number): void\n\t{\n\t\tthis.#current += i;\n\t}\n\n\tindex(): number\n\t{\n\t\treturn this.#current;\n\t}\n}\n","export type SummaryMessageOptions = {\n\ttitle: string,\n\tdescription: string,\n}\n\nexport class Message\n{\n\ttitle: string;\n\tdescription: string;\n\n\tconstructor(options: SummaryMessageOptions)\n\t{\n\t\tthis.title = options.title;\n\t\tthis.description = options.description;\n\t}\n}\n","import { ajax, Dom, Loc, Type } from 'main.core';\nimport { ImageCompressor } from 'landing.imagecompressor';\nimport { Screenshoter, PageObject } from 'landing.screenshoter';\n\nexport type ShareLinkOptions = {\n\tsignedUserId: number,\n\tsignedType: string,\n};\n\nexport class ShareService\n{\n\t#linkToShare;\n\t#screenshotToShare;\n\n\tconstructor(options: ShareLinkOptions)\n\t{\n\t\tthis.signedUserId = options?.signedUserId ?? null;\n\t\tthis.signedType = options?.signedType ?? null;\n\t}\n\n\tisShareApiAvailable(): boolean\n\t{\n\t\treturn window.isSecureContext\n\t\t\t&& navigator.share\n\t\t\t&& navigator.canShare;\n\t}\n\n\tgetLinkToShare(): Promise<string>\n\t{\n\t\tif (!this.#linkToShare)\n\t\t{\n\t\t\tthis.#linkToShare = ajax.runAction('intranet.v2.AnnualSummary.getLink', {\n\t\t\t\tdata: {\n\t\t\t\t\tsignedUserId: this.signedUserId,\n\t\t\t\t\tsignedType: this.signedType,\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then((response) => response.data.link)\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tthis.#linkToShare = null;\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t}\n\n\t\treturn this.#linkToShare;\n\t}\n\n\tgetScreenshot(container: HTMLElement): Promise<File>\n\t{\n\t\tif (!this.#screenshotToShare)\n\t\t{\n\t\t\tconst sharedContainer = container.cloneNode(true);\n\t\t\tDom.addClass(sharedContainer, 'intranet-year-results-popup__slide--screenshot');\n\t\t\t// We need to add container to DOM for html-to-image\n\t\t\tDom.append(sharedContainer, document.querySelector('.intranet-year-results-popup__slide-wrapper'));\n\t\t\tPageObject.getEditorWindow = () => window;\n\n\t\t\tthis.#screenshotToShare = Screenshoter\n\t\t\t\t.makeElementScreenshot(sharedContainer)\n\t\t\t\t.then((sourceFile) => {\n\t\t\t\t\treturn ImageCompressor.compress(sourceFile, {\n\t\t\t\t\t\tmaxWidth: 900,\n\t\t\t\t\t\tmaxHeight: 1600,\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.then((compressedFile) => {\n\t\t\t\t\treturn new File([compressedFile], 'bitrix24.png', { type: 'image/png' });\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tthis.#screenshotToShare = null;\n\t\t\t\t\tthrow error;\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tsharedContainer.remove();\n\t\t\t\t});\n\t\t}\n\n\t\treturn this.#screenshotToShare;\n\t}\n\n\tasync copyToClipboard(textToCopy: string): Promise<void>\n\t{\n\t\tif (!Type.isString(textToCopy))\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\tif (window.isSecureContext && navigator.clipboard)\n\t\t{\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tsetTimeout(() => (\n\t\t\t\t\tnavigator.clipboard\n\t\t\t\t\t\t.writeText(textToCopy)\n\t\t\t\t\t\t.then(() => resolve())\n\t\t\t\t\t\t.catch((e) => reject(e))\n\t\t\t\t), 0);\n\t\t\t});\n\t\t}\n\n\t\treturn BX.clipboard?.copy(textToCopy) ? Promise.resolve() : Promise.reject();\n\t}\n\n\tshareContent(shareData: Object): Promise<void>\n\t{\n\t\tshareData.title = Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_SHARE_TITLE');\n\n\t\tif (\n\t\t\twindow.isSecureContext\n\t\t\t&& navigator.share\n\t\t\t&& navigator.canShare\n\t\t\t&& navigator.canShare(shareData)\n\t\t)\n\t\t{\n\t\t\treturn navigator.share(shareData);\n\t\t}\n\n\t\treturn Promise.reject();\n\t}\n\n\tdownloadFile(file: File): void\n\t{\n\t\tconst url = URL.createObjectURL(file);\n\t\tconst a = document.createElement('a');\n\t\ta.href = url;\n\t\ta.download = file.name;\n\t\ta.click();\n\t\tURL.revokeObjectURL(url);\n\t}\n}\n","import { Type, Tag, Loc, Dom } from 'main.core';\nimport { Button } from 'ui.buttons';\nimport { Analytic } from '../analytic';\nimport { View } from './view';\nimport { Message } from '../message';\nimport { ShareService } from '../share-service';\nimport { Menu } from 'main.popup';\n\nexport class WithButtonView extends View\n{\n\t#click: ?function;\n\t#text: string;\n\tmessage: ?Message;\n\t#hideBtn: boolean;\n\t#analytic: ?Analytic;\n\t#shareService: ShareService;\n\t#menu: Menu;\n\n\tconstructor(options: {})\n\t{\n\t\tsuper(options);\n\t\tthis.#click = Type.isFunction(options?.btn?.click) ? options?.btn?.click : this.onShare;\n\t\tthis.#text = options?.btn?.text || '';\n\t\tthis.message = options.message ?? null;\n\t\tthis.#hideBtn = options.hideBtn === true;\n\t\tthis.#analytic = options.analytic instanceof Analytic ? options.analytic : null;\n\t\tthis.#shareService = options.shareService instanceof ShareService ? options.shareService : null;\n\t}\n\n\tshareButton(): HTMLElement\n\t{\n\t\tif (this.#hideBtn)\n\t\t{\n\t\t\treturn Tag.render``;\n\t\t}\n\n\t\tconst handler = (btn: Button) => {\n\t\t\tif (btn.isWaiting())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbtn.setWaiting();\n\t\t\tPromise.all([this.#click(btn)])\n\t\t\t\t.then(() => btn.setWaiting(false))\n\t\t\t\t.catch(() => btn.setWaiting(false));\n\t\t\tthis.#analytic?.share(this.index(), this.featureType());\n\t\t};\n\n\t\tconst button = new Button({\n\t\t\tuseAirDesign: true,\n\t\t\tclassName: 'intranet-year-results-popup__footer-button',\n\t\t\tonclick: handler,\n\t\t\ttext: this.#text,\n\t\t\twide: true,\n\t\t});\n\n\t\treturn button.render();\n\t}\n\n\tdownloadButton(): HTMLElement\n\t{\n\t\tif (this.#hideBtn)\n\t\t{\n\t\t\treturn Tag.render``;\n\t\t}\n\n\t\tconst handler = (btn: Button) => {\n\t\t\tif (btn.isWaiting())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbtn.setWaiting();\n\t\t\tthis.#analytic?.save(this.index(), this.featureType());\n\t\t\tthis.#shareService.getScreenshot(this.cachedContent())\n\t\t\t\t.then((file) => {\n\t\t\t\t\tthis.#shareService.downloadFile(file);\n\t\t\t\t})\n\t\t\t\t.catch((e) => console.error(e))\n\t\t\t\t.finally(() => {\n\t\t\t\t\tbtn.setWaiting(false);\n\t\t\t\t});\n\t\t};\n\n\t\tconst button = new Button({\n\t\t\tuseAirDesign: true,\n\t\t\tclassName: 'intranet-year-results-popup__footer-button intranet-year-results-popup__footer-button--white',\n\t\t\tonclick: handler,\n\t\t\ttext: Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_DOWNLOAD_BTN'),\n\t\t\twide: true,\n\t\t});\n\n\t\treturn button.render();\n\t}\n\n\tonShare(event): Promise\n\t{\n\t\treturn this.#shareService.isShareApiAvailable()\n\t\t\t? this.openShareOptionsPopup(event.button)\n\t\t\t: this.copyLink();\n\t}\n\n\topenShareOptionsPopup(target): Promise<void>\n\t{\n\t\tif (!this.#menu)\n\t\t{\n\t\t\tthis.#menu = new Menu({\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tfixed: true,\n\t\t\t\tangle: {\n\t\t\t\t\toffset: Dom.getPosition(target).height / 2,\n\t\t\t\t\tposition: 'left',\n\t\t\t\t},\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_COPY_LINK'),\n\t\t\t\t\t\tonclick: async () => this.copyLink(),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_SHARE_SCREENSHOT_TITLE'),\n\t\t\t\t\t\tonclick: async () => {\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst file = await this.#shareService.getScreenshot(this.cachedContent());\n\t\t\t\t\t\t\t\tawait this.#shareService.shareContent({ files: [file] });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcatch (error)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\n\t\t\tthis.#menu.getPopupWindow().setBindElement(target);\n\t\t\tthis.#menu.getPopupWindow().setOffset({\n\t\t\t\toffsetLeft: Dom.getPosition(target).width + 14,\n\t\t\t\toffsetTop: -(Dom.getPosition(target).height + 16),\n\t\t\t});\n\t\t}\n\n\t\tthis.#menu.toggle();\n\n\t\treturn Promise.resolve();\n\t}\n\n\tasync copyLink(): Promise<void>\n\t{\n\t\ttry\n\t\t{\n\t\t\tconst url = await this.#shareService.getLinkToShare();\n\t\t\tawait this.#shareService.copyToClipboard(url);\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_NOTIFY_COPY'),\n\t\t\t\tautoHideDelay: 2500,\n\t\t\t});\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error(error);\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n","import { Tag, Loc } from 'main.core';\nimport { WithButtonView } from './with-button-view';\n\nexport class StartView extends WithButtonView\n{\n\tcontent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"intranet-year-results-popup__slide intranet-year-results-popup__slide--start\">\n\t\t\t\t<div class=\"intranet-year-results-popup__slide-image\"></div>\n\t\t\t\t<div class=\"intranet-year-results-popup__slide-content\">\n\t\t\t\t\t<div class=\"intranet-year-results-popup__logo\"></div>\n\t\t\t\t\t<h2 class=\"intranet-year-results-popup__title intranet-year-results-popup__title--bold\">${Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_START_VIEW_TITLE')}</h2>\n\t\t\t\t\t<div class=\"intranet-year-results-popup__description-container\">\n\t\t\t\t\t\t<p class=\"intranet-year-results-popup__description\">${Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_START_VIEW_DESCRIPTION')}</p>\n\t\t\t\t\t\t<p class=\"intranet-year-results-popup__description\">${Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_START_VIEW_DESCRIPTION_2')}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"intranet-year-results-popup__postscript\">${Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_START_VIEW_EPILOGUE')}</p>\n\t\t\t\t</div>\n\t\t\t\t${this.shareButton()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tfeatureType(): ?string\n\t{\n\t\treturn 'intro';\n\t}\n\n\tindex(): ?number\n\t{\n\t\treturn 0;\n\t}\n}\n","const FeatureType = Object.freeze({\n\tREACTION: 'reaction',\n\tBOARD: 'board',\n\tCHANNEL: 'channel',\n\tCHECKIN: 'checkin',\n\tCOLLAB: 'collab',\n\tCOPILOT: 'copilot',\n\tDEAL: 'deal',\n\tSITE: 'site',\n\tMESSAGE: 'message',\n\tTASK: 'task',\n\tWORKFLOW: 'workflow',\n});\n\nexport default FeatureType;\n","import { Tag } from 'main.core';\nimport { WithButtonView } from './with-button-view';\nimport { Message } from '../message';\nimport FeatureType from '../feature-type';\n\nexport class SummaryView extends WithButtonView\n{\n\tmessage: Message;\n\tfeature: FeatureType;\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.message = options.message;\n\t\tthis.feature = options.feature;\n\t\tthis.progressBar = options.progressBar;\n\t}\n\n\tcontent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"intranet-year-results-popup__slide intranet-year-results-popup__slide--${this.feature}\">\n\t\t\t\t<div class=\"intranet-year-results-popup__slide-image\"></div>\n\t\t\t\t<div class=\"intranet-year-results-popup__slide-content\">\n\t\t\t\t\t${this.progressBar?.render()}\n\t\t\t\t\t<div class=\"intranet-year-results-popup__logo\"></div>\n\t\t\t\t\t<h2 class=\"intranet-year-results-popup__title\">${this.message?.title}</h2>\n\t\t\t\t\t<div class=\"intranet-year-results-popup__description-container\">\n\t\t\t\t\t\t<p class=\"intranet-year-results-popup__description\">${this.message?.description}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-year-results-popup__slide-footer\">\n\t\t\t\t\t${this.downloadButton()}\n\t\t\t\t\t${this.shareButton()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tfeatureType(): ?string\n\t{\n\t\treturn this.feature;\n\t}\n\n\tindex(): ?number\n\t{\n\t\treturn (this.progressBar?.currentStep ?? 0) + 1;\n\t}\n}\n","import { Tag, Dom } from 'main.core';\n\nexport class ProgressBar\n{\n\tcurrentStep: number;\n\ttotalStep: number;\n\n\tconstructor(options)\n\t{\n\t\tthis.currentStep = options.currentStep;\n\t\tthis.totalStep = options.totalStep;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst progressBar = Tag.render`\n\t\t\t<div class=\"intranet-year-results-popup__progress-bar\"></div>\n\t\t`;\n\n\t\tfor (let i = 0; i <= this.currentStep; i++)\n\t\t{\n\t\t\tDom.append(\n\t\t\t\tTag.render`<div class=\"intranet-year-results-popup__progress-bar-step intranet-year-results-popup__progress-bar-step--active\"></div>`,\n\t\t\t\tprogressBar,\n\t\t\t);\n\t\t}\n\n\t\tfor (let i = this.currentStep + 1; i < this.totalStep; i++)\n\t\t{\n\t\t\tDom.append(\n\t\t\t\tTag.render`<div class=\"intranet-year-results-popup__progress-bar-step\"></div>`,\n\t\t\t\tprogressBar,\n\t\t\t);\n\t\t}\n\n\t\treturn progressBar;\n\t}\n}\n","import { Tag } from 'main.core';\nimport FeatureType from '../feature-type';\nimport { WithButtonView } from './with-button-view';\n\nexport type WinnerMessageOptions = {\n\ttitle: string,\n\tname: string,\n\tdescription: string,\n}\n\nexport class WinnerView extends WithButtonView\n{\n\t#message: WinnerMessageOptions;\n\t#featureClass: ?string;\n\tfeature: FeatureType;\n\n\tconstructor(options: {})\n\t{\n\t\tsuper(options);\n\t\tthis.#message = options.message;\n\t\tthis.#featureClass = options.featureClass ?? '';\n\t\tthis.progressBar = options.progressBar;\n\t\tthis.feature = options.feature;\n\t}\n\n\tcontent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"intranet-year-results-popup__slide ${this.#featureClass} intranet-year-results-popup__slide--character\">\n\t\t\t\t<div class=\"intranet-year-results-popup__slide-image\"></div>\n\t\t\t\t<div class=\"intranet-year-results-popup__slide-content\">\n\t\t\t\t\t${this.progressBar?.render()}\n\t\t\t\t\t<div class=\"intranet-year-results-popup__logo\"></div>\n\t\t\t\t\t<h3 class=\"intranet-year-results-popup__subtitle\">${this.#message.title}</h3>\n\t\t\t\t\t<h2 class=\"intranet-year-results-popup__title intranet-year-results-popup__title--bold\">${this.#message.name}</h2>\n\t\t\t\t\t<p class=\"intranet-year-results-popup__description--character\">${this.#message.description}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-year-results-popup__slide-footer\">\n\t\t\t\t\t${this.downloadButton()}\n\t\t\t\t\t${this.shareButton()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tfeatureType(): ?string\n\t{\n\t\treturn this.feature;\n\t}\n\n\tindex(): ?number\n\t{\n\t\treturn (this.progressBar?.currentStep ?? 0) + 1;\n\t}\n}\n","import { Loc } from 'main.core';\nimport { Analytic } from './analytic';\nimport { Message } from './message';\nimport { StartView } from './views/start-view';\nimport { View } from './views/view';\nimport { SummaryView } from './views/summary-view';\nimport { ProgressBar } from './views/progress-bar';\nimport FeatureType from './feature-type';\nimport { WinnerView } from './views/winner-view';\nimport { ShareService } from './share-service';\n\nexport class ViewFactory\n{\n\t#signedUserId: string;\n\t#isShowStartView: boolean = true;\n\t#hideBtn: boolean = false;\n\t#showProgressBar: boolean;\n\t#analytic: ?Analytic;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.#signedUserId = options.signedUserId;\n\t\tthis.#isShowStartView = options.isShowStartView !== false;\n\t\tthis.#hideBtn = options.hideBtn === true;\n\t\tthis.#showProgressBar = options.showProgressBar ?? true;\n\t\tthis.#analytic = options.analytic instanceof Analytic ? options.analytic : null;\n\t}\n\n\tcreate(data, context, progressBar): ?View\n\t{\n\t\treturn new SummaryView({\n\t\t\thideBtn: this.#hideBtn,\n\t\t\tcount: data.count,\n\t\t\tbtn: {\n\t\t\t\ttext: Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_SHARE_BTN'),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tleft: () => context.previous(),\n\t\t\t\tright: () => context.next(),\n\t\t\t\tclose: () => context.close(),\n\t\t\t},\n\t\t\tmessage: new Message(data?.message),\n\t\t\tfeature: data.id,\n\t\t\tprogressBar,\n\t\t\tanalytic: this.#analytic,\n\t\t\tshareService: new ShareService({\n\t\t\t\tsignedType: data?.signedId,\n\t\t\t\tsignedUserId: this.#signedUserId,\n\t\t\t}),\n\t\t});\n\t}\n\n\tcreateTop(data: [], context): View[]\n\t{\n\t\tconst summary = [];\n\n\t\tif (this.#isShowStartView)\n\t\t{\n\t\t\tsummary.push(this.createStartView(context));\n\t\t}\n\n\t\tconst totalStep = data.length;\n\n\t\tdata.forEach((item, index) => {\n\t\t\tlet progressBar = null;\n\n\t\t\tif (this.#showProgressBar)\n\t\t\t{\n\t\t\t\tprogressBar = new ProgressBar({\n\t\t\t\t\tcurrentStep: index,\n\t\t\t\t\ttotalStep,\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet view = null;\n\t\t\tif (item?.id?.includes('winner_'))\n\t\t\t{\n\t\t\t\tview = this.createWinner(item, context, progressBar);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tview = this.create(item, context, progressBar);\n\t\t\t}\n\n\t\t\tif (view)\n\t\t\t{\n\t\t\t\tsummary.push(view);\n\t\t\t}\n\t\t});\n\n\t\treturn [\n\t\t\t...summary,\n\t\t];\n\t}\n\n\tcreateWinner(data, context, progressBar): View\n\t{\n\t\treturn new WinnerView({\n\t\t\tfeature: data.id,\n\t\t\thideBtn: this.#hideBtn,\n\t\t\tmessage: data?.message,\n\t\t\tfeatureClass: (data?.featureId ?? 'base') === 'base' ? '' : `intranet-year-results-popup__slide--${data?.featureId}`,\n\t\t\tbtn: {\n\t\t\t\ttext: Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_SHARE_BTN'),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tleft: () => context.previous(),\n\t\t\t\tclose: () => context.close(),\n\t\t\t},\n\t\t\tprogressBar,\n\t\t\tanalytic: this.#analytic,\n\t\t\tshareService: new ShareService({\n\t\t\t\tsignedType: data?.signedId,\n\t\t\t\tsignedUserId: this.#signedUserId,\n\t\t\t}),\n\t\t});\n\t}\n\n\tcreateList(data: [], context): View[]\n\t{\n\t\tconst commonEvents = {\n\t\t\tbtn: {\n\t\t\t\ttext: Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_SHARE_BTN'),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tleft: () => context.previous(),\n\t\t\t\tright: () => context.next(),\n\t\t\t\tclose: () => context.close(),\n\t\t\t},\n\t\t};\n\n\t\tconst result = [\n\t\t\tthis.createStartView(context),\n\t\t];\n\n\t\tObject.entries(FeatureType).forEach(([id, feature]) => {\n\t\t\tresult.push(new SummaryView({\n\t\t\t\t...commonEvents,\n\t\t\t\tmessage: new Message({\n\t\t\t\t\ttitle: `You often use ${feature}`,\n\t\t\t\t\tdescription: `You use \"${feature}\" more than others in your company. Total: ${Math.floor(Math.random() * (1000 - 1 + 1)) + 1}`,\n\t\t\t\t}),\n\t\t\t\tfeature,\n\t\t\t\tanalytic: this.#analytic,\n\t\t\t}));\n\t\t});\n\n\t\tresult.push(new WinnerView({\n\t\t\tmessage: {\n\t\t\t\ttitle: 'You are',\n\t\t\t\tname: 'Mr. Busy Bro',\n\t\t\t\tdescription: 'Use more Busy',\n\t\t\t},\n\t\t\tfeatureClass: '',\n\t\t\tbtn: {\n\t\t\t\ttext: Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_LOOK_BTN'),\n\t\t\t\tclick: () => context.next(),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tleft: () => context.previous(),\n\t\t\t\tright: () => context.next(),\n\t\t\t\tclose: () => context.close(),\n\t\t\t},\n\t\t\tanalytic: this.#analytic,\n\t\t}));\n\n\t\tObject.entries(FeatureType).forEach(([id, feature]) => {\n\t\t\tresult.push(new WinnerView({\n\t\t\t\tmessage: {\n\t\t\t\t\ttitle: 'You are',\n\t\t\t\t\tname: `Mr. ${feature}`,\n\t\t\t\t\tdescription: `Use more ${feature}`,\n\t\t\t\t},\n\t\t\t\tfeatureClass: (feature ?? 'base') === 'base' ? '' : `intranet-year-results-popup__slide--${feature}`,\n\t\t\t\tbtn: {\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_LOOK_BTN'),\n\t\t\t\t\tclick: () => context.next(),\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tleft: () => context.previous(),\n\t\t\t\t\tright: () => context.next(),\n\t\t\t\t\tclose: () => context.close(),\n\t\t\t\t},\n\t\t\t}));\n\t\t});\n\n\t\treturn [\n\t\t\t...result,\n\t\t];\n\t}\n\n\tcreateStartView(context): View\n\t{\n\t\treturn new StartView({\n\t\t\tbtn: {\n\t\t\t\ttext: Loc.getMessage('INTRANET_ANNUAL_SUMMARY_CARD_LOOK_BTN'),\n\t\t\t\tclick: () => context.next(),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tright: () => context.next(),\n\t\t\t\tclose: () => context.close(),\n\t\t\t},\n\t\t});\n\t}\n}\n","import { Analytic } from './analytic';\nimport { Carousel } from './carousel';\nimport { Navigation } from './navigation';\nimport { ViewFactory } from './view-factory';\n\nexport class AnnualSummary\n{\n\t#carousel: Carousel;\n\t#analytic: ?Analytic;\n\n\tconstructor(top: {}, options: {})\n\t{\n\t\tthis.#analytic = new Analytic({ section: options.section ?? 'auto' });\n\t\tconst factory = new ViewFactory({ ...options, analytic: this.#analytic });\n\t\tconst navigation = new Navigation({\n\t\t\tstart: 0,\n\t\t\tviews: top?.all ? factory.createList(top, this) : factory.createTop(top, this),\n\t\t});\n\n\t\tthis.#carousel = new Carousel({\n\t\t\tnavigation,\n\t\t\tisUseArrowNavigation: true,\n\t\t\tcanClose: options.canClose !== false,\n\t\t\tuserpicPath: options.userpicPath,\n\t\t\tshowOverlay: options.showOverlay,\n\t\t\tanalytic: this.#analytic,\n\t\t});\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.#carousel.close();\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#carousel.show();\n\t}\n\n\tsubscribe(eventName, callback): void\n\t{\n\t\tthis.#carousel.subscribe(eventName, callback);\n\t}\n\n\tnext(): void\n\t{\n\t\tthis.#carousel.right();\n\t}\n\n\tprevious(): void\n\t{\n\t\tthis.#carousel.left();\n\t}\n}\n"],"names":["Analytic","constructor","options","Object","writable","value","babelHelpers","section","send","sendData","category","tool","c_section","this","next","stepId","type","event","p1","prev","share","save","close","show","Carousel","left","right","Tag","render","canClose","showOverlay","userpicPath","navigation","analytic","isUseArrowNavigation","Event","bind","document","isShown","key","preventDefault","subscribe","_babelHelpers$classPr","position","index","featureType","_babelHelpers$classPr2","hasLeft","Type","isNil","hasRight","previous","_babelHelpers$classPr3","_babelHelpers$classPr4","_babelHelpers$classPr5","addClassToContent","Dom","append","_babelHelpers$classPr6","cachedContent","_babelHelpers$classPr7","_babelHelpers$classPr8","_babelHelpers$classPr9","eventName","callback","closeButton","Button","size","Size","SMALL","style","AirButtonStyle","OUTLINE","useAirDesign","icon","BX","UI","IconSet","Outline","CROSS_L","className","onclick","_babelHelpers$classPr10","removeClassFromContent","side","_babelHelpers$classPr11","destroy","_babelHelpers$classPr12","_babelHelpers$classPr13","_babelHelpers$classPr14","_babelHelpers$classPr15","_babelHelpers$classPr16","prepend","_babelHelpers$classPr17","popup","Popup","closeByEsc","content","padding","fixed","overlay","opacity","backgroundColor","animation","showClassName","closeAnimationType","bindOnce","getPopupContainer","addClass","isStringFilled","AvatarRound","getContainer","LARGE","ARROW_RIGHT_M","ARROW_LEFT_M","clean","View","[object Object]","remove","removeClass","Navigation","isArray","views","filter","view","isInteger","start","get","move","offset","current","i","Message","title","description","ShareService","signedUserId","signedType","isShareApiAvailable","window","isSecureContext","navigator","canShare","getLinkToShare","ajax","runAction","data","then","response","link","catch","error","getScreenshot","container","sharedContainer","cloneNode","querySelector","PageObject","getEditorWindow","Screenshoter","makeElementScreenshot","sourceFile","ImageCompressor","compress","maxWidth","maxHeight","compressedFile","File","finally","textToCopy","isString","clipboard","Promise","resolve","reject","setTimeout","writeText","e","_BX$clipboard","copy","shareContent","shareData","Loc","getMessage","downloadFile","file","url","URL","createObjectURL","a","createElement","href","download","name","click","revokeObjectURL","WithButtonView","super","isFunction","btn","_options$btn","_options$btn2","onShare","_options$btn3","text","message","hideBtn","shareService","shareButton","isWaiting","setWaiting","all","wide","downloadButton","console","openShareOptionsPopup","button","copyLink","target","Menu","autoHide","angle","getPosition","height","items","async","files","getPopupWindow","setBindElement","setOffset","offsetLeft","width","offsetTop","toggle","copyToClipboard","top","Notification","Center","notify","autoHideDelay","StartView","FeatureType","freeze","REACTION","BOARD","CHANNEL","CHECKIN","COLLAB","COPILOT","DEAL","SITE","MESSAGE","TASK","WORKFLOW","SummaryView","feature","progressBar","_this$progressBar","_this$message","_this$message2","_this$progressBar2","currentStep","ProgressBar","totalStep","WinnerView","featureClass","ViewFactory","isShowStartView","showProgressBar","create","context","count","events","id","signedId","createTop","summary","push","createStartView","length","forEach","item","_item$id","includes","createWinner","featureId","createList","commonEvents","result","entries","Math","floor","random","factory"],"mappings":"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"}