this.BX=this.BX||{};(function(e,t,s,i,a,l,r,o,n,c,d,b,p,v,h,u,_,g,T,E,P,L,S,I,N,w,F){"use strict";var m=babelHelpers.classPrivateFieldLooseKey("eventList");var f=babelHelpers.classPrivateFieldLooseKey("tool");var H=babelHelpers.classPrivateFieldLooseKey("context");class B{constructor(e=null){Object.defineProperty(this,m,{writable:true,value:[]});Object.defineProperty(this,f,{writable:true,value:"settings"});Object.defineProperty(this,H,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,H)[H]=e}addEvent(e,t){if(babelHelpers.classPrivateFieldLooseBase(this,H)[H].isBitrix24){babelHelpers.classPrivateFieldLooseBase(this,m)[m][e]=t}}send(){if(!babelHelpers.classPrivateFieldLooseBase(this,H)[H].isBitrix24){return}if(Object.keys(babelHelpers.classPrivateFieldLooseBase(this,m)[m]).length>0){F.ajax.runComponentAction("bitrix:intranet.settings","analytic",{mode:"class",data:{data:babelHelpers.classPrivateFieldLooseBase(this,m)[m]}}).then((()=>{}))}babelHelpers.classPrivateFieldLooseBase(this,m)[m]=[]}addEventOpenSettings(){var e,s,i,a;const l={event:y.OPEN,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"slider",p1:((e=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:e.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN,c_section:(s=(i=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:i.analyticContext)!=null?s:"",c_element:(a=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:a.locationName};t.sendData(l)}addEventOpenTariffSelector(e){var t;const s={event:"open_tariff",tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:e,p1:((t=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:t.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN};this.addEvent(e+"_open_tariff",s)}addEventOpenHint(e){var t;const s={event:"open_hint",tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:e,p1:((t=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:t.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN};this.addEvent(e+"_open_hint",s)}addEventStartPagePage(e){var s;const i={event:y.START_PAGE,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:e,p1:((s=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:s.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN};t.sendData(i)}addEventChangePage(e){var s;const i={event:y.VIEW,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:e,p1:((s=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:s.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN};t.sendData(i)}addEventToggleTools(e,t){var s,i;const a="onoff_tools";const l={event:a,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"tools",type:e,c_element:(s=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:s.locationName,p1:((i=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:i.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN,p2:t?M.ON:M.OFF};this.addEvent("tools"+e+"_"+a,l)}addEventToggle2fa(e){var t;const s="2fa_onoff";const i={event:s,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"security",p1:((t=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:t.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN,p2:e?M.ON:M.OFF};this.addEvent("security_"+s,i)}addEventEnablePushOtp(){const e={event:"click_setting_portal",tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"security",c_element:"banner_on"};t.sendData(e)}addEventConfigPortal(e){const t={event:e,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:A.PORTAL};this.addEvent("portal_"+e,t)}addEventChangeTheme(e){const t=/custom_\d+/;const s=t.test(e)?"themeName_custom":"themeName_"+e;const i={event:y.CHANGE_PORTAL_THEME,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:A.PORTAL,type:R.COMMON,c_section:O.SETTINGS,p1:s};this.addEvent("portal_"+y.CHANGE_PORTAL_THEME,i)}addEventConfigEmployee(e,t){var s;const i={event:e,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"employee",p1:((s=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:s.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN,p2:t?M.ON:M.OFF};this.addEvent("employee_"+e,i)}addEventConfigConfiguration(e,t){var s;const i={event:e,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"configuration",p1:((s=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:s.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN,p2:t?M.ON:M.OFF};this.addEvent("configuration_"+e,i)}addEventConfigRequisite(e){var s,i;const a={event:e,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"requisite",c_element:(s=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:s.locationName,p1:((i=babelHelpers.classPrivateFieldLooseBase(this,H)[H])==null?void 0:i.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN};t.sendData(a)}}class A{}A.TOOLS="tools";A.SECURITY="security";A.AI="ai";A.PORTAL="portal";A.EMPLOYEE="employee";A.COMMUNICATION="communication";A.REQUISITE="requisite";A.SCHEDULE="schedule";A.CONFIGURATION="configuration";class y{}y.OPEN="open_setting";y.START_PAGE="start_page";y.VIEW="view";y.TFA="2fa_onoff";y.CHANGE_PORTAL_NAME="change_portal_name";y.CHANGE_PORTAL_LOGO="change_portal_logo";y.CHANGE_PORTAL_SITE="change_portal_site";y.CHANGE_PORTAL_THEME="change_portal_theme";y.CHANGE_MARKET="change_market";y.CHANGE_PAY_TARIFF="change_pay_tariff";y.CREATE_CARD="create_vizitka";y.EDIT_CARD="edit_vizitka";y.COPY_LINK_CARD="copylink_vizitka";y.OPEN_ADD_COMPANY="open_add_company";y.CHANGE_QUICK_REG="change_quick_reg";y.CHANGE_REG_ALL="change_reg_all";y.CHANGE_COLLABERS_INVITATION="change_collabers_invitation";y.CHANGE_EXTRANET_INVITE="change_extranet_invite";class O{}O.SETTINGS="settings";class R{}R.COMMON="common";class C{}C.ADMIN="isAdmin_Y";C.NOT_ADMIN="isAdmin_N";class M{}M.ON="turn_on";M.OFF="turn_off";let D=e=>e,G;var V=babelHelpers.classPrivateFieldLooseKey("checker");var k=babelHelpers.classPrivateFieldLooseKey("content");class U extends S.BaseSettingsElement{constructor(e){var t;super();Object.defineProperty(this,V,{writable:true,value:void 0});Object.defineProperty(this,k,{writable:true,value:void 0});this.setEventNamespace("BX.Intranet.Settings");babelHelpers.classPrivateFieldLooseBase(this,V)[V]=new h.Checker({id:"siteLogo24",inputName:"logo24",title:(t=e.title)!=null?t:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_LOGO24"),size:"extra-small",isEnable:e.isEnable,checked:e.checked!=="",value:"Y",bannerCode:"limit_admin_logo24",hideSeparator:true})}getFieldView(){return babelHelpers.classPrivateFieldLooseBase(this,V)[V]}render(){if(babelHelpers.classPrivateFieldLooseBase(this,k)[k]){return babelHelpers.classPrivateFieldLooseBase(this,k)[k]}babelHelpers.classPrivateFieldLooseBase(this,k)[k]=F.Tag.render(G||(G=D`
			<div class="ui-section__field-selector --align-center">
				<div class="ui-section__hint">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,V)[V].render());return babelHelpers.classPrivateFieldLooseBase(this,k)[k]}}let K=e=>e,x;var j=babelHelpers.classPrivateFieldLooseKey("content");var X=babelHelpers.classPrivateFieldLooseKey("contentLogo24");var $=babelHelpers.classPrivateFieldLooseKey("title");var Y=babelHelpers.classPrivateFieldLooseKey("logo24");var W=babelHelpers.classPrivateFieldLooseKey("inputMonitoringIntervalId");var q=babelHelpers.classPrivateFieldLooseKey("inputMonitoringCountdown");var z=babelHelpers.classPrivateFieldLooseKey("inputMonitoringPrevState");var Q=babelHelpers.classPrivateFieldLooseKey("initTitle");var Z=babelHelpers.classPrivateFieldLooseKey("initLogo24");class J extends S.BaseSettingsElement{constructor(e){super(e);Object.defineProperty(this,Z,{value:te});Object.defineProperty(this,Q,{value:ee});Object.defineProperty(this,j,{writable:true,value:void 0});Object.defineProperty(this,X,{writable:true,value:void 0});Object.defineProperty(this,$,{writable:true,value:void 0});Object.defineProperty(this,Y,{writable:true,value:void 0});Object.defineProperty(this,W,{writable:true,value:void 0});Object.defineProperty(this,q,{writable:true,value:10});Object.defineProperty(this,z,{writable:true,value:void 0});this.setParentElement(e.parent);this.setEventNamespace("BX.Intranet.Settings");const t=e.siteTitleOptions;this.options={title:t.title,canUserEditTitle:t.canUserEditTitle,logo24:t.logo24,canUserEditLogo24:t.canUserEditLogo24};const s=e.siteTitleLabels;this.labels={title:s.title,logo24:s.logo24};babelHelpers.classPrivateFieldLooseBase(this,Q)[Q](t,s);babelHelpers.classPrivateFieldLooseBase(this,Z)[Z](t,s)}getFieldView(){return babelHelpers.classPrivateFieldLooseBase(this,$)[$]}cancel(){}startInputMonitoring(){if(babelHelpers.classPrivateFieldLooseBase(this,W)[W]>0){return}babelHelpers.classPrivateFieldLooseBase(this,W)[W]=setInterval(this.monitorInput.bind(this),500)}stopInputMonitoring(){if(babelHelpers.classPrivateFieldLooseBase(this,W)[W]>0){clearInterval(babelHelpers.classPrivateFieldLooseBase(this,W)[W]);babelHelpers.classPrivateFieldLooseBase(this,W)[W]=null}}monitorInput(){const e=babelHelpers.classPrivateFieldLooseBase(this,$)[$].getInputNode().value;if(babelHelpers.classPrivateFieldLooseBase(this,z)[z]!==e){babelHelpers.classPrivateFieldLooseBase(this,q)[q]=10;babelHelpers.classPrivateFieldLooseBase(this,z)[z]=e;I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new I.BaseEvent({data:{title:e}}))}else if(--babelHelpers.classPrivateFieldLooseBase(this,q)[q]<=0){this.stopInputMonitoring()}}render(){if(babelHelpers.classPrivateFieldLooseBase(this,j)[j]){return babelHelpers.classPrivateFieldLooseBase(this,j)[j]}F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,$)[$].getInputNode(),"focus",this.startInputMonitoring.bind(this));F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,$)[$].getInputNode(),"keydown",this.startInputMonitoring.bind(this));F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,$)[$].getInputNode(),"click",this.startInputMonitoring.bind(this));F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,$)[$].getInputNode(),"blur",this.stopInputMonitoring.bind(this));F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,$)[$].getInputNode(),"blur",this.stopInputMonitoring.bind(this));babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getFieldView().subscribe("change",(e=>{I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new I.BaseEvent({data:{logo24:e.getData()===true?"24":""}}))}));babelHelpers.classPrivateFieldLooseBase(this,j)[j]=F.Tag.render(x||(x=K`
		<div id="${0}" class="ui-section__field-selector --no-border --no-margin --align-center">
			<div class="ui-section__field-container">
				<div class="ui-section__field-label_box">
					<label class="ui-section__field-label" for="${0}">
						${0}
					</label> 
				</div>
				<div class="ui-section__field-inner">
					<div class="ui-ctl ui-ctl-textbox ui-ctl-block">
						${0}
					</div>
				</div>
			</div>
		</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,$)[$].getId(),babelHelpers.classPrivateFieldLooseBase(this,$)[$].getName(),babelHelpers.classPrivateFieldLooseBase(this,$)[$].getLabel(),babelHelpers.classPrivateFieldLooseBase(this,$)[$].getInputNode());return babelHelpers.classPrivateFieldLooseBase(this,j)[j]}getLogo24Field(){return babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]}}function ee(e,t){var s;babelHelpers.classPrivateFieldLooseBase(this,$)[$]=new h.TextInput({value:e.title,placeholder:e.title,label:(s=t.title)!=null?s:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_INPUT_LABEL"),id:"siteTitle",inputName:"title",isEnable:true});babelHelpers.classPrivateFieldLooseBase(this,$)[$].setEventNamespace(this.getEventNamespace())}function te(e,t){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=new U({title:t.logo24,isEnable:e.canUserEditLogo24,checked:e.logo24})}var se=babelHelpers.classPrivateFieldLooseKey("settings");var ie=babelHelpers.classPrivateFieldLooseKey("currentPage");var ae=babelHelpers.classPrivateFieldLooseKey("prevPage");class le{constructor(e){Object.defineProperty(this,se,{writable:true,value:void 0});Object.defineProperty(this,ie,{writable:true,value:void 0});Object.defineProperty(this,ae,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,se)[se]=e;I.EventEmitter.subscribe("BX.Intranet.SettingsNavigation:onMove",(e=>{var t;const{page:s,fieldName:i}=e.data;if(((t=this.getCurrentPage())==null?void 0:t.getType())===s){this.moveTo(this.getCurrentPage(),i);return}const a=this.getPageByType(s);if(!(a!=null&&a.hasData())){I.EventEmitter.subscribeOnce("BX.Intranet.Settings:onPageComplete",(e=>{if(e.data.page.hasContent()){this.moveTo(e.data.page,i)}}))}I.EventEmitter.subscribeOnce("BX.Intranet.Settings:onAfterShowPage",(e=>{if(e.data.page.hasContent()){this.moveTo(e.data.page,i)}}));babelHelpers.classPrivateFieldLooseBase(this,se)[se].show(s)}))}getPageByType(e){return this.getPages().find((t=>t.getType()===e))}getCurrentPage(){return babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]}getPrevPage(){return babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]}changePage(e){if(!(e instanceof S.BaseSettingsPage)){console.log('Not found "'+type+'" page');return}if(e===babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]){return}babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=babelHelpers.classPrivateFieldLooseBase(this,ie)[ie];babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]=e}getPages(){return babelHelpers.classPrivateFieldLooseBase(this,se)[se].getChildrenElements()}updateAddressBar(){var e;let t=new URL(window.location.href);t.searchParams.set("page",(e=this.getCurrentPage())==null?void 0:e.getType());t.searchParams.delete("IFRAME");t.searchParams.delete("IFRAME_TYPE");top.window.history.replaceState(null,"",t.toString())}findByFieldName(e,t){var s;const i=S.RecursiveFilteringVisitor.startFrom(e,(e=>{if(e instanceof S.SettingsSection&&e.getSectionView().getId()===t){return true}if(e instanceof S.TabField&&e.getFieldView().getId()===t){return true}return(e instanceof S.SettingsField||e instanceof J||e instanceof U)&&(e.getFieldView().getName()===t||e.getFieldView().getId()===t)}));return(s=i.shift())!=null?s:null}scrollToNode(e){const t=e.render();const s=45;const i=t.getBoundingClientRect().top;const a=i+window.pageYOffset-s;scrollTo({top:a,behavior:"smooth"})}moveTo(e,t){const s=this.findByFieldName(e,t);if(F.Type.isNil(s)){return}let i=false;S.AscendingOpeningVisitor.startFrom(s,(e=>{if(e instanceof S.SettingsRow){e.getRowView().show()}else if(e instanceof S.SettingsSection){e.getSectionView().toggle(true,false)}else if(e instanceof S.TabField){const t=e.getParentElement();if(t instanceof S.TabsField){t.activateTab(e,false)}}if(!i){i=e.highlight()}}));this.scrollToNode(s)}}let re=e=>e,oe;var ne=babelHelpers.classPrivateFieldLooseKey("inputForSaveSortTools");var ce=babelHelpers.classPrivateFieldLooseKey("toolsWrapperRow");var de=babelHelpers.classPrivateFieldLooseKey("draggable");var be=babelHelpers.classPrivateFieldLooseKey("mainSection");var pe=babelHelpers.classPrivateFieldLooseKey("settingsSection");var ve=babelHelpers.classPrivateFieldLooseKey("renderToolsSelectors");var he=babelHelpers.classPrivateFieldLooseKey("getSubToolHelpMessage");var ue=babelHelpers.classPrivateFieldLooseKey("getToolsSelectorsItems");var _e=babelHelpers.classPrivateFieldLooseKey("getMainSection");var ge=babelHelpers.classPrivateFieldLooseKey("getSettingsSection");var Te=babelHelpers.classPrivateFieldLooseKey("getInputForSaveSortTools");var Ee=babelHelpers.classPrivateFieldLooseKey("getDraggable");var Pe=babelHelpers.classPrivateFieldLooseKey("getToolsWrapperRow");var Le=babelHelpers.classPrivateFieldLooseKey("getWarningMessage");class Se extends S.BaseSettingsPage{constructor(){super();Object.defineProperty(this,Le,{value:Ae});Object.defineProperty(this,Pe,{value:Be});Object.defineProperty(this,Ee,{value:He});Object.defineProperty(this,Te,{value:fe});Object.defineProperty(this,ge,{value:me});Object.defineProperty(this,_e,{value:Fe});Object.defineProperty(this,ue,{value:we});Object.defineProperty(this,he,{value:Ne});Object.defineProperty(this,ve,{value:Ie});Object.defineProperty(this,ne,{writable:true,value:void 0});Object.defineProperty(this,ce,{writable:true,value:void 0});Object.defineProperty(this,de,{writable:true,value:void 0});Object.defineProperty(this,be,{writable:true,value:void 0});Object.defineProperty(this,pe,{writable:true,value:void 0});this.titlePage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_TOOLS");this.descriptionPage=F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_TOOLS")}getType(){return"tools"}appendSections(e){const t=new E.Row({content:this.getDescription().getContainer()});new S.SettingsRow({row:t,parent:babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]()});if(this.hasValue("tools")){babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]()}babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]().renderTo(e)}getDescription(){const e=`\n\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_DESCRIPTION")}\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=18213196')">\n\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t</a>\n\t\t`;return new BX.UI.Alert({text:e,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}}function Ie(){const e=this.getValue("tools");const t=[];Object.keys(e).forEach((s=>{var a;t.push(e[s].menuId);const l=e[s];const r=l.subgroups;let o=[];if(Object.keys(r).length>0){o=babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](r,l)}const n=new i.SwitcherNested({id:l.code,title:l.name,link:this.getPermission().canEdit()?l["settings-path"]:null,infoHelperCode:this.getPermission().canEdit()?l["infohelper-slider"]:null,linkTitle:(a=l["settings-title"])!=null?a:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS"),isChecked:l.enabled,mainInputName:l.code,isOpen:false,items:o,isDisabled:!this.getPermission().canEdit(),isDefault:l.default,helpMessage:!this.getPermission().canEdit()?F.Loc.getMessage("INTRANET_SETTINGS_ELEMENT_PERMISSION_MSG"):F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED",{"#TOOL#":l.name})});const c=new S.SettingsSection({section:n});F.Dom.style(c.getSectionView().render(),"margin-bottom","8px");F.Dom.attr(c.getSectionView().render(),"data-menu-id",l.menuId);babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]().append(c.getSectionView().render());new S.SettingsRow({row:babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](),parent:babelHelpers.classPrivateFieldLooseBase(this,ge)[ge](),child:c})}))}function Ne(e,t){if(!this.getPermission().canEdit()){return F.Loc.getMessage("INTRANET_SETTINGS_ELEMENT_PERMISSION_MSG")}if(e.disabled){return F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED",{"#TOOL#":e.name})}if(e.default){return F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_MAIN_TOOL",{"#TOOL#":t!=null?t:""})}return""}function we(e,t){const s=[];Object.keys(e).forEach((a=>{var l,r,o;const n=e[a];if(F.Type.isNull(n.name)||F.Type.isNull(n.code)||F.Type.isNull(n.enabled)){return}const c=new i.SwitcherNestedItem({title:n.name,id:n.code,inputName:n.code,isChecked:n.enabled,settingsPath:this.getPermission().canEdit()?n["settings_path"]:null,settingsTitle:(l=n["settings_title"])!=null?l:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS"),infoHelperCode:this.getPermission().canEdit()?n["infohelper-slider"]:null,isDisabled:!this.getPermission().canEdit(),isDefault:(r=(o=n.default)!=null?o:n.disabled)!=null?r:false,helpMessage:babelHelpers.classPrivateFieldLooseBase(this,he)[he](n,t.name)});if(n.disabled){F.Dom.style(c.getSwitcher().getNode(),{opacity:"0.4"})}else{I.EventEmitter.subscribe(c.getSwitcher(),"toggled",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventToggleTools(n.code,c.getSwitcher().isChecked())}))}if(n.code==="tool_subgroup_team_work_instant_messenger"){F.Event.bind(c.getSwitcher().getNode(),"click",(()=>{if(!c.getSwitcher().isChecked()){babelHelpers.classPrivateFieldLooseBase(this,Le)[Le](n.code,c.getSwitcher().getNode(),F.Loc.getMessage("INTRANET_SETTINGS_WARNING_TOOL_INSTANT_MESSENGER")).show()}}))}s.push(c)}));return s}function Fe(){if(babelHelpers.classPrivateFieldLooseBase(this,be)[be]){return babelHelpers.classPrivateFieldLooseBase(this,be)[be]}babelHelpers.classPrivateFieldLooseBase(this,be)[be]=new E.Section(this.getValue("sectionTools"));return babelHelpers.classPrivateFieldLooseBase(this,be)[be]}function me(){if(babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]){return babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]}babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]=new S.SettingsSection({section:babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](),parent:this});return babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]}function fe(){if(babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]){return babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]}babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=F.Tag.render(oe||(oe=re`
			<input type="hidden" name="tools-sort">
		`));return babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]}function He(){if(babelHelpers.classPrivateFieldLooseBase(this,de)[de]){return babelHelpers.classPrivateFieldLooseBase(this,de)[de]}babelHelpers.classPrivateFieldLooseBase(this,de)[de]=new s.Draggable({container:[babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]().render()],draggable:".--tool-selector",dragElement:".ui-section__dragdrop-icon-wrapper",type:s.Draggable.CLONE});return babelHelpers.classPrivateFieldLooseBase(this,de)[de]}function Be(){if(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]){return babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]}babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=new E.Row({});return babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]}function Ae(e,t,s){return BX.PopupWindowManager.create(e,t,{content:s,darkMode:true,autoHide:true,angle:true,offsetLeft:14,bindOptions:{position:"bottom"},closeByEsc:true})}var ye=babelHelpers.classPrivateFieldLooseKey("buildAdditionalSection");var Oe=babelHelpers.classPrivateFieldLooseKey("buildProfileSection");var Re=babelHelpers.classPrivateFieldLooseKey("buildInviteSection");class Ce extends S.BaseSettingsPage{constructor(){super();Object.defineProperty(this,Re,{value:Ge});Object.defineProperty(this,Oe,{value:De});Object.defineProperty(this,ye,{value:Me});this.titlePage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_EMPLOYEE");this.descriptionPage=F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE_BOX")}onSuccessDataFetched(e){super.onSuccessDataFetched(e);if(this.hasValue("IS_BITRIX_24")&&this.getValue("IS_BITRIX_24")){this.descriptionPage=F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE");this.render().querySelector(".intranet-settings__page-header_desc").innerText=this.descriptionPage}}getType(){return"employee"}appendSections(e){let t=babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]();t==null?void 0:t.renderTo(e);let s=babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]();s==null?void 0:s.renderTo(e);let i=babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]();i==null?void 0:i.renderTo(e)}}function Me(){if(!this.hasValue("SECTION_ADDITIONAL")){return}let e=new E.Section(this.getValue("SECTION_ADDITIONAL"));let t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("allow_company_pulse")){let e=new h.Checker(this.getValue("allow_company_pulse"));I.EventEmitter.subscribe(e.switcher,"toggled",(()=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigEmployee(y.CHANGE_QUICK_REG,e.isChecked())}));Ce.addToSectionHelper(e,t)}return t}function De(){if(!this.hasValue("SECTION_PROFILE")){return}let e=new E.Section(this.getValue("SECTION_PROFILE"));let t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("fieldFormatName")){var s;let e=false;let i=this.getValue("fieldFormatName").current;for(let t of this.getValue("fieldFormatName").values){if(t.selected===true){e=true}}this.getValue("fieldFormatName").values.push({value:"other",name:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_OPTION_OTHER"),selected:!e});let a=new h.Selector({label:(s=this.getValue("fieldFormatName").label)!=null?s:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_NAME_FORMAT"),name:this.getValue("fieldFormatName").name+"_selector",items:this.getValue("fieldFormatName").values,hints:this.getValue("fieldFormatName").hints,current:this.getValue("fieldFormatName").current});let l=new S.SettingsField({fieldView:a});new S.SettingsRow({child:l,parent:t});let r=new h.TextInput({inputName:this.getValue("fieldFormatName").name,label:"",value:i});l=new S.SettingsField({fieldView:r});let o=new E.Row({isHidden:true});new S.SettingsRow({row:o,parent:t,child:l});if(!e){o.show()}a.getInputNode().addEventListener("change",(e=>{if(e.target.value==="other"){o.show()}else{r.getInputNode().value=a.getInputNode().value;o.hide()}}))}if(this.hasValue("fieldFormatPhoneNumber")){let e=new h.Selector(this.getValue("fieldFormatPhoneNumber"));Ce.addToSectionHelper(e,t)}if(this.hasValue("fieldFormatAddress")){let e=new h.Selector(this.getValue("fieldFormatAddress"));let s=new E.Row({separator:this.hasValue("show_year_for_female")?"bottom":null,className:"--block"});Ce.addToSectionHelper(e,t,s)}if(this.hasValue("show_year_for_female")){let e=new h.InlineChecker(this.getValue("show_year_for_female"));Ce.addToSectionHelper(e,t)}return t}function Ge(){if(!this.hasValue("SECTION_INVITE")){return}let e=new E.Section(this.getValue("SECTION_INVITE"));let t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("allow_register")){let e=new h.Checker(this.getValue("allow_register"));I.EventEmitter.subscribe(e.switcher,"toggled",(()=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigEmployee(y.CHANGE_QUICK_REG,e.isChecked())}));Ce.addToSectionHelper(e,t)}if(this.hasValue("allow_invite_collabers")){let e=new h.Checker(this.getValue("allow_invite_collabers"));I.EventEmitter.subscribe(e.switcher,"toggled",(()=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigEmployee(y.CHANGE_COLLABERS_INVITATION,e.isChecked())}));Ce.addToSectionHelper(e,t)}if(this.hasValue("show_fired_employees")){let e=new h.Checker(this.getValue("show_fired_employees"));Ce.addToSectionHelper(e,t)}if(this.hasValue("general_chat_message_join")){let e=new h.Checker(this.getValue("general_chat_message_join"));Ce.addToSectionHelper(e,t)}if(this.hasValue("allow_new_user_lf")){let e=new h.Checker(this.getValue("allow_new_user_lf"));Ce.addToSectionHelper(e,t)}if(this.hasValue("feature_extranet")){let e=new h.Checker(this.getValue("feature_extranet"));I.EventEmitter.subscribe(e.switcher,"toggled",(()=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigEmployee(y.CHANGE_EXTRANET_INVITE,e.isChecked())}));Ce.addToSectionHelper(e,t)}return t}let Ve=e=>e,ke;var Ue=babelHelpers.classPrivateFieldLooseKey("buttonBarElement");var Ke=babelHelpers.classPrivateFieldLooseKey("buttons");class xe{constructor(e=[]){Object.defineProperty(this,Ue,{writable:true,value:void 0});Object.defineProperty(this,Ke,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke]=e}render(){if(babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]){return babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]}babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]=F.Tag.render(ke||(ke=Ve`<div class="intranet-settings__button_bar"></div>`));for(const e of babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke]){F.Dom.append(e.getContainer(),babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue])}return babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]}getButtons(){return babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke]}addButton(e){babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke].push(e);F.Dom.append(e.getContainer(),this.render())}}var je=babelHelpers.classPrivateFieldLooseKey("button");class Xe{constructor(){Object.defineProperty(this,je,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,je)[je]=new g.Button({className:"landing-button-trigger",round:true,noCaps:true,size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.LIGHT_BORDER})}setState(e){e.apply(babelHelpers.classPrivateFieldLooseBase(this,je)[je])}getButton(){return babelHelpers.classPrivateFieldLooseBase(this,je)[je]}}class $e{apply(e){}}var Ye=babelHelpers.classPrivateFieldLooseKey("landing");class We extends $e{constructor(e){super();Object.defineProperty(this,Ye,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]=e}apply(e){e.setText(F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_EDIT"));e.setDropdown(false);e.bindEvent("click",(()=>{this.openNewTab(babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye].edit_url)}))}openNewTab(e){window.open(e,"_blank").focus()}}var qe=babelHelpers.classPrivateFieldLooseKey("landing");var ze=babelHelpers.classPrivateFieldLooseKey("menuRenderer");class Qe extends $e{constructor(e,t){super();Object.defineProperty(this,qe,{writable:true,value:void 0});Object.defineProperty(this,ze,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,qe)[qe]=e;babelHelpers.classPrivateFieldLooseBase(this,ze)[ze]=t}apply(e){e.setText(F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_SITE"));e.setDropdown(true);e.unbindEvent("click");e.setColor(BX.UI.Button.Color.PRIMARY);e.setMenu(babelHelpers.classPrivateFieldLooseBase(this,ze)[ze](babelHelpers.classPrivateFieldLooseBase(this,qe)[qe]))}}var Ze=babelHelpers.classPrivateFieldLooseKey("requestBuilder");var Je=babelHelpers.classPrivateFieldLooseKey("menuRenderer");class et extends $e{constructor(e,t){super();Object.defineProperty(this,Ze,{writable:true,value:void 0});Object.defineProperty(this,Je,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]=e;babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]=t}apply(e){e.setText(F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_CREATE"));e.setDropdown(false);e.bindEvent("click",(t=>{if(e.getState()===g.ButtonState.WAITING){return}e.setState(g.ButtonState.WAITING);babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]().then((t=>{const s=t.data;e.setState(null);e.unbindEvent("click");if(s.is_public){new Qe(s,babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]).apply(e)}else{const t=new We(s);t.apply(e);t.openNewTab(s.edit_url)}}),(t=>{e.setState(null);S.ErrorCollection.showSystemError(t.errors[0].message)}))}))}}let tt=e=>e,st,it;var at=babelHelpers.classPrivateFieldLooseKey("landing");var lt=babelHelpers.classPrivateFieldLooseKey("copyBtn");var rt=babelHelpers.classPrivateFieldLooseKey("landingCardElement");class ot{constructor(e){Object.defineProperty(this,at,{writable:true,value:void 0});Object.defineProperty(this,lt,{writable:true,value:void 0});Object.defineProperty(this,rt,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,at)[at]=e}qrRender(){let e=F.Tag.render(st||(st=tt`<div class="intranet-settings__qr_image-container"></div>`));new QRCode(e,{text:babelHelpers.classPrivateFieldLooseBase(this,at)[at].public_url,width:106,height:106});return e}render(){if(babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]){return babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]}const e=()=>{window.open(babelHelpers.classPrivateFieldLooseBase(this,at)[at].edit_url,"_blank").focus()};babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]=F.Tag.render(it||(it=tt`
		<div class="intranet-settings__req-info-container">
			<div class="intranet-settings__req-info-inner">
				<div class="intranet-settings__qr_container">${0}</div>
				<div class="intranet-settings__qr_description-block">
					<div class="intranet-settings__qr_help-text">
						<h4 class="intranet-settings__qr_title">${0}</h4>
						<p class="intranet-settings__qr_text">
							${0}
						</p>
					</div>
					<div class="intranet-settings__qr_button">
						${0}
					</div>
				</div>
			</div>
			<div class="intranet-settings__qr_editor_box" onclick="${0}">
				<div class="intranet-settings__qr_editor_icon">
					<div class="ui-icon-set --paint-1"></div>
				</div>
				<div class="intranet-settings__qr_editor_name">${0}</div>
				<div class="ui-icon-set --expand intranet-settings__qr_editor_btn"></div>
			</div>
		</div>`),this.qrRender(),F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_SITE"),F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_HELP_TEXT",{"#SITE_URL#":babelHelpers.classPrivateFieldLooseBase(this,at)[at].public_url}),this.getCopyButton().getContainer(),e,F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_EDIT_LANDING"));return babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]}getCopyButton(){if(babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]){return babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]}babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]=new g.Button({text:F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_COPY_LINK"),round:true,noCaps:true,className:"landing-copy-button",size:BX.UI.Button.Size.EXTRA_SMALL,color:BX.UI.Button.Color.SUCCESS,events:{click:()=>{if(BX.clipboard.copy(babelHelpers.classPrivateFieldLooseBase(this,at)[at].public_url)){top.BX.UI.Notification.Center.notify({content:F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_LINK_WAS_COPIED"),autoHide:true})}}}});return babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]}}var nt=babelHelpers.classPrivateFieldLooseKey("options");var ct=babelHelpers.classPrivateFieldLooseKey("menuRenderer");var dt=babelHelpers.classPrivateFieldLooseKey("defaultMenuRenderer");var bt=babelHelpers.classPrivateFieldLooseKey("getRequestCreateLanding");class pt{constructor(e,t){Object.defineProperty(this,bt,{value:ht});Object.defineProperty(this,dt,{value:vt});Object.defineProperty(this,nt,{writable:true,value:void 0});Object.defineProperty(this,ct,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,nt)[nt]=e;this.landingData=t;babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]=babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]}setMenuRenderer(e){babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]=e}create(){const e=new Xe;let t;if(babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].is_connected&&!babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].is_public){t=new We(babelHelpers.classPrivateFieldLooseBase(this,nt)[nt])}else if(babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].is_connected&&babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].is_public){t=new Qe(babelHelpers.classPrivateFieldLooseBase(this,nt)[nt],babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].bind(this))}else{t=new et((()=>babelHelpers.classPrivateFieldLooseBase(this,bt)[bt]()),babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].bind(this))}e.setState(t);return e.getButton()}}function vt(e){return{angle:true,maxWidth:396,closeByEsc:true,className:"intranet-settings__qr_popup",items:[{html:new ot(e).render(),className:"intranet-settings__qr_popup_item"}]}}function ht(){return F.ajax.runComponentAction("bitrix:intranet.settings","getLanding",{mode:"class",data:{companyId:this.landingData.company_id,requisiteId:this.landingData.requisite_id,bankRequisiteId:this.landingData.bank_requisite_id}})}let ut=e=>e,_t,gt,Tt;var Et=babelHelpers.classPrivateFieldLooseKey("options");var Pt=babelHelpers.classPrivateFieldLooseKey("cardElement");var Lt=babelHelpers.classPrivateFieldLooseKey("requisiteFieldsElement");var St=babelHelpers.classPrivateFieldLooseKey("buttonBar");var It=babelHelpers.classPrivateFieldLooseKey("buildCompanyField");var Nt=babelHelpers.classPrivateFieldLooseKey("buildField");class wt{constructor(e){Object.defineProperty(this,Nt,{value:mt});Object.defineProperty(this,It,{value:Ft});Object.defineProperty(this,Et,{writable:true,value:void 0});Object.defineProperty(this,Pt,{writable:true,value:void 0});Object.defineProperty(this,Lt,{writable:true,value:void 0});Object.defineProperty(this,St,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]=e}render(){if(babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]}babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]=F.Tag.render(_t||(_t=ut`
		<div class="intranet-settings__req_background">
			<div class="intranet-settings__req-card_wrapper">
				<div class="intranet-settings__header">
					<div class="intranet-settings__title"> <span class="ui-section__title-icon ui-icon-set --city"></span> <span>${0}</span></div>
					<div class="intranet-settings__contact_bar"> 
						<span class="intranet-settings__contact_bar_item">
							${0}
						</span> 
						<span class="intranet-settings__contact_bar_item">
							${0}
						</span> 
						<span class="intranet-settings__contact_bar_item">
							${0}
						</span> 
					</div>
				</div>
				${0}
				${0}
			</div>
		</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].company.TITLE,babelHelpers.classPrivateFieldLooseBase(this,It)[It](F.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].phone)?babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].phone:F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_PHONE")),babelHelpers.classPrivateFieldLooseBase(this,It)[It](F.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].email)?babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].email:F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_EMAIL")),babelHelpers.classPrivateFieldLooseBase(this,It)[It](F.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].site)?babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].site:F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_SITE")),this.requisiteFieldsRender(),this.getButtonsBar().render());return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]}getRequisiteUrl(){const e=babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].landingData.requisite_id;if(e){return"/crm/company/requisite/"+e+"/"}else{return"/crm/company/requisite/0/?itemId="+babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].company.ID}}getCompanyUrl(){if(babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].company.ID===0){return"/crm/company/details/0/?mycompany=y&TITLE="+babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].company.TITLE}else{return"/crm/company/details/"+babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].company.ID+"/"}}requisiteFieldsRender(){if(babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]){return babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]}const e=babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].fields;babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]=F.Tag.render(gt||(gt=ut`<div class="intranet-settings__req-table_wrap"></div>`));for(let t of e){const e=F.Tag.render(Tt||(Tt=ut`
				<div class="intranet-settings__req-table_row">
					<div class="intranet-settings__table-cell">${0}</div>
					<div class="intranet-settings__table-cell">
						${0}
					</div>
				</div>
			`),t.TITLE,!babelHelpers.classPrivateFieldLooseBase(this,Et)[Et].company.ID?babelHelpers.classPrivateFieldLooseBase(this,It)[It](F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB")):F.Type.isStringFilled(t.VALUE)?babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt](t.VALUE):babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt](F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB")));F.Dom.append(e,babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt])}return babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]}getButtonsBar(){if(babelHelpers.classPrivateFieldLooseBase(this,St)[St]){return babelHelpers.classPrivateFieldLooseBase(this,St)[St]}babelHelpers.classPrivateFieldLooseBase(this,St)[St]=new xe;return babelHelpers.classPrivateFieldLooseBase(this,St)[St]}setButtonBar(e){babelHelpers.classPrivateFieldLooseBase(this,St)[St]=e}}function Ft(e){return F.Dom.create("a",{text:e,attrs:{href:this.getCompanyUrl()}})}function mt(e){return F.Dom.create("a",{text:e,attrs:{href:this.getRequisiteUrl()}})}let ft=e=>e,Ht,Bt;class At extends S.BaseSettingsPage{constructor(){super();this.titlePage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_REQUISITE");this.descriptionPage=F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_REQUISITE");top.BX.addCustomEvent("onLocalStorageSet",(e=>{var t;let s=(t=e==null?void 0:e.key)!=null?t:null;if(s==="onCrmEntityUpdate"||s==="onCrmEntityCreate"||s==="BX.Crm.RequisiteSliderDetails:onSave"){this.reload()}}))}getType(){return"requisite"}appendSections(e){if(!this.hasValue("sectionRequisite")){return}let t=new E.Section(this.getValue("sectionRequisite"));const s=new S.SettingsSection({parent:this,section:t});const i=new BX.UI.Alert({text:`\n\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_REQUISITE_DESCRIPTION")}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=18213326')">\n\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t`,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const a=new E.Row({content:i.getContainer()});t.append(a.render());if(this.hasValue("COMPANY")){let e=this.getValue("COMPANY");const s=this.getValue("REQUISITES");const i=this.getValue("PHONES");const a=this.getValue("SITES");const l=this.getValue("EMAILS");const r=this.getValue("LANDINGS");const o=this.getValue("LANDINGS_DATA");if(!F.Type.isArray(e)||e.length<=0){const e=new E.Row({content:this.cardRender({company:{ID:0,TITLE:this.getValue("BITRIX_TITLE")},fields:this.getValue("EMPTY_REQUISITE"),phone:[],email:[],site:[]})});t.append(e.render())}for(let n of e){const e=!F.Type.isNil(s[n.ID])?s[n.ID]:this.getValue("EMPTY_REQUISITE");const c=new E.Row({content:this.cardRender({company:n,fields:e,phone:!F.Type.isNil(i[n.ID])?i[n.ID]:[],email:!F.Type.isNil(l[n.ID])?l[n.ID]:[],site:!F.Type.isNil(a[n.ID])?a[n.ID]:[],landing:!F.Type.isNil(r[n.ID])?r[n.ID]:[],landingData:!F.Type.isNil(o[n.ID])?o[n.ID]:[]})});t.append(c.render())}}new S.SettingsRow({row:new E.Row({content:this.addCompanyLinkRender()}),parent:s});s.renderTo(e)}addCompanyLinkRender(){const e=F.Tag.render(Ht||(Ht=ft`
				<a class="ui-section__link" 
					href="/crm/company/details/0/?mycompany=y" target="_blank">
				${0}
				</a>
		`),F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_ADD_COMPANY"));F.Event.bind(e,"click",(e=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigRequisite(y.OPEN_ADD_COMPANY)}));return F.Tag.render(Bt||(Bt=ft`<div class="ui-section__link_box">${0}</div>`),e)}cardRender(e){const t=new wt(e);const s=new xe;if(e.company.ID>0){const t=new pt(e.landing,e.landingData);t.setMenuRenderer((e=>{const t=new ot(e);F.Event.bind(t.getCopyButton().getContainer(),"click",(e=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigRequisite(y.COPY_LINK_CARD)}));return{angle:true,maxWidth:396,closeByEsc:true,className:"intranet-settings__qr_popup",items:[{html:t.render(),className:"intranet-settings__qr_popup_item"}]}}));const i=t.create();if(F.Dom.hasClass(i.getContainer(),"landing-button-trigger")){F.Event.bind(i.getContainer(),"click",(t=>{if(e.landing.is_connected&&!e.landing.is_public){var s;(s=this.getAnalytic())==null?void 0:s.addEventConfigRequisite(y.EDIT_CARD)}else if(!e.landing.is_connected&&!e.landing.is_public){var i;(i=this.getAnalytic())==null?void 0:i.addEventConfigRequisite(y.CREATE_CARD)}}))}s.addButton(i)}t.setButtonBar(s);return t.render()}}let yt=e=>e,Ot,Rt,Ct,Mt;var Dt=babelHelpers.classPrivateFieldLooseKey("buildNewsFeedSection");var Gt=babelHelpers.classPrivateFieldLooseKey("buildChatSection");var Vt=babelHelpers.classPrivateFieldLooseKey("buildChannelSection");var kt=babelHelpers.classPrivateFieldLooseKey("buildDiskSection");class Ut extends S.BaseSettingsPage{constructor(){super();Object.defineProperty(this,kt,{value:Xt});Object.defineProperty(this,Vt,{value:jt});Object.defineProperty(this,Gt,{value:xt});Object.defineProperty(this,Dt,{value:Kt});this.titlePage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_COMMUNICATION");this.descriptionPage=F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_COMMUNICATION")}getType(){return"communication"}appendSections(e){let t=babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt]();t.renderTo(e);let s=babelHelpers.classPrivateFieldLooseBase(this,Gt)[Gt]();s.renderTo(e);if(this.hasValue("availableGeneralChannel")){let t=babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt]();t.renderTo(e)}let i=babelHelpers.classPrivateFieldLooseBase(this,kt)[kt]();i.renderTo(e)}}function Kt(){if(!this.hasValue("sectionFeed")){return}let e=new E.Section(this.getValue("sectionFeed"));let t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("allow_livefeed_toall")){const e=new h.Checker(this.getValue("allow_livefeed_toall"));const s=h.FieldFactory.createUserSelector({inputName:"livefeed_toall_rights[]",label:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS"),values:Object.values(this.getValue("arToAllRights")),enableDepartments:true});Ut.addToSectionCheckerHelper(e,[s],t)}if(this.hasValue("default_livefeed_toall")){let e=new h.Checker(this.getValue("default_livefeed_toall"));Ut.addToSectionHelper(e,t)}if(this.hasValue("ratingTextLikeY")){var s,i,a;const e=new h.TextInputInline({inputName:(s=this.getValue("ratingTextLikeY"))==null?void 0:s.name,label:(i=this.getValue("ratingTextLikeY").label)!=null?i:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_LIKE_INPUT"),hintTitle:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TITLE_LIKE"),value:(a=this.getValue("ratingTextLikeY"))==null?void 0:a.current,valueColor:this.hasValue("ratingTextLikeY"),hintDesc:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_DESC_LIKE")});Ut.addToSectionHelper(e,t)}return t}function xt(){if(!this.hasValue("sectionChats")){return}let e=new E.Section(this.getValue("sectionChats"));let t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("general_chat_can_post")){var s;let e=new h.Checker(this.getValue("allow_post_general_chat"));let i=new S.SettingsField({fieldView:e});let a=new S.SettingsRow({parent:t,child:i});let l=new h.Selector(this.getValue("general_chat_can_post"));i=new S.SettingsField({fieldView:l});let r=new E.Row({isHidden:!e.isChecked(),className:"ui-section__subrow --no-border"});Ut.addToSectionHelper(l,a,r);let o=h.FieldFactory.createUserSelector({inputName:"imchat_toall_rights[]",label:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS"),enableAll:false,values:Object.values((s=this.getValue("generalChatManagersList"))!=null?s:[])});let n=new E.Row({content:o.render(),isHidden:this.getValue("general_chat_can_post").current!=="MANAGER",className:"ui-section__subrow --no-border"});Ut.addToSectionHelper(o,a,n);const c=new E.SeparatorRow({isHidden:this.getValue("general_chat_can_post").current!=="MANAGER"});new S.SettingsRow({row:c,parent:a});I.EventEmitter.subscribe(e.switcher,"toggled",(()=>{if(e.isChecked()){r.show();if(l.getInputNode().value==="MANAGER"){n.show()}c.show()}else{r.hide();n.hide();c.hide()}}));l.getInputNode().addEventListener("change",(e=>{if(e.target.value==="MANAGER"){n.show()}else{n.hide()}}))}if(this.hasValue("general_chat_message_leave")){let e=new h.Checker(this.getValue("general_chat_message_leave"));Ut.addToSectionHelper(e,t)}if(this.hasValue("general_chat_message_admin_rights")){let e=new h.Checker(this.getValue("general_chat_message_admin_rights"));Ut.addToSectionHelper(e,t)}if(this.hasValue("url_preview_enable")){let e=new h.Checker(this.getValue("url_preview_enable"));Ut.addToSectionHelper(e,t)}if(this.hasValue("create_overdue_chats")){let e=new h.Checker(this.getValue("create_overdue_chats"));Ut.addToSectionHelper(e,t)}return t}function jt(){if(!this.hasValue("sectionChannels")){return}let e=new E.Section(this.getValue("sectionChannels"));let t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("general_channel_can_post")){var s,i;let e=new h.Checker(this.getValue("allow_post_general_channel"));let a=new S.SettingsField({fieldView:e});let l=new S.SettingsRow({parent:t,child:a});let r=new h.Selector(this.getValue("general_channel_can_post"));a=new S.SettingsField({fieldView:r});let o=new E.Row({isHidden:!e.isChecked(),className:"ui-section__subrow --no-border"});Ut.addToSectionHelper(r,l,o);let n=h.FieldFactory.createUserSelector({inputName:"imchannel_toall_rights[]",label:(s=F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS_CHANNEL"))!=null?s:"",enableAll:false,values:Object.values((i=this.getValue("generalChannelManagersList"))!=null?i:[])});let c=new E.Row({content:n.render(),isHidden:this.getValue("general_channel_can_post").current!=="MANAGER",className:"ui-section__subrow --no-border"});Ut.addToSectionHelper(n,l,c);const d=new E.SeparatorRow({isHidden:this.getValue("general_channel_can_post").current!=="MANAGER"});new S.SettingsRow({row:d,parent:l});I.EventEmitter.subscribe(e.switcher,"toggled",(()=>{if(e.isChecked()){o.show();if(r.getInputNode().value==="MANAGER"){c.show()}d.show()}else{o.hide();c.hide();d.hide()}}));r.getInputNode().addEventListener("change",(e=>{if(e.target.value==="MANAGER"){c.show()}else{c.hide()}}))}return t}function Xt(){if(!this.hasValue("sectionDisk")){return}let e=new E.Section(this.getValue("sectionDisk"));let t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("DISK_VIEWER_SERVICE")){let e=new h.Selector(this.getValue("DISK_VIEWER_SERVICE"));Ut.addToSectionHelper(e,t)}if(this.hasValue("DISK_UNIFIED_LINK_DEFAULT_ACCESS_LEVEL")){let e=new h.Selector(this.getValue("DISK_UNIFIED_LINK_DEFAULT_ACCESS_LEVEL"));Ut.addToSectionHelper(e,t)}if(this.hasValue("DISK_LIMIT_PER_FILE")){var s;const e=F.Tag.render(Ot||(Ot=yt`<span>${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));let i=new h.Selector({label:(s=this.getValue("DISK_LIMIT_PER_FILE").label)!=null?s:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAX_FILE_LIMIT"),hintTitle:this.getValue("DISK_LIMIT_PER_FILE").hintTitle,name:this.getValue("DISK_LIMIT_PER_FILE").name,items:this.getValue("DISK_LIMIT_PER_FILE").values,hints:this.getValue("DISK_LIMIT_PER_FILE").hints,current:this.getValue("DISK_LIMIT_PER_FILE").current,isEnable:this.getValue("DISK_LIMIT_PER_FILE").isEnable,bannerCode:"limit_max_entries_in_document_history",helpDesk:"redirect=detail&code=18869612",helpMessageProvider:this.helpMessageProviderFactory(e)});let a=new E.Row({separator:"bottom",className:"--block"});if(!this.getValue("DISK_LIMIT_PER_FILE").isEnable){F.Event.bind(i.getInputNode(),"click",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventOpenHint(this.getValue("DISK_LIMIT_PER_FILE").name)}));F.Event.bind(e.querySelector("a"),"click",(()=>{var e;return(e=this.getAnalytic())==null?void 0:e.addEventOpenTariffSelector(this.getValue("DISK_LIMIT_PER_FILE").name)}))}Ut.addToSectionHelper(i,t,a)}new S.SettingsRow({row:new E.SeparatorRow,parent:t});if(this.hasValue("disk_allow_edit_object_in_uf")){let e=new h.Checker(this.getValue("disk_allow_edit_object_in_uf"));let s=new E.Row({separator:"top",className:"--block"});Ut.addToSectionHelper(e,t,s)}if(this.hasValue("disk_allow_autoconnect_shared_objects")){let e=new h.Checker(this.getValue("disk_allow_autoconnect_shared_objects"));Ut.addToSectionHelper(e,t)}if(this.hasValue("disk_allow_use_external_link")){var i;const e=F.Tag.render(Rt||(Rt=yt`<span>${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));let s=new h.Checker({inputName:this.getValue("disk_allow_use_external_link").inputName,title:(i=this.getValue("disk_allow_use_external_link").label)!=null?i:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_PUBLIC_LINK"),hintOn:this.getValue("disk_allow_use_external_link").hintOn,checked:this.getValue("disk_allow_use_external_link").checked,isEnable:this.getValue("disk_allow_use_external_link").isEnable,bannerCode:"limit_admin_share_link",helpDesk:this.getValue("disk_allow_use_external_link").helpDesk,helpMessageProvider:this.helpMessageProviderFactory(e)});if(!this.getValue("disk_allow_use_external_link").isEnable){I.EventEmitter.subscribe(s.switcher,"toggled",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventOpenHint("disk_allow_use_external_link")}));F.Event.bind(e.querySelector("a"),"click",(()=>{var e;return(e=this.getAnalytic())==null?void 0:e.addEventOpenTariffSelector("enable_pub_link")}))}Ut.addToSectionHelper(s,t)}if(this.hasValue("disk_object_lock_enabled")){var a;const e=F.Tag.render(Ct||(Ct=yt`<span>${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));let s=new h.Checker({inputName:this.getValue("disk_object_lock_enabled").inputName,title:(a=this.getValue("disk_object_lock_enabled").label)!=null?a:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_BLOCK_DOC"),hintOn:this.getValue("disk_object_lock_enabled").hintOn,checked:this.getValue("disk_object_lock_enabled").checked,isEnable:this.getValue("disk_object_lock_enabled").isEnable,bannerCode:"limit_document_lock",helpMessageProvider:this.helpMessageProviderFactory(e),helpDesk:this.getValue("disk_object_lock_enabled").helpDesk});if(!this.getValue("disk_object_lock_enabled").isEnable){I.EventEmitter.subscribe(s.switcher,"toggled",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventOpenHint("disk_object_lock_enabled")}));F.Event.bind(e.querySelector("a"),"click",(()=>{var e;return(e=this.getAnalytic())==null?void 0:e.addEventOpenTariffSelector("disk_object_lock_enabled")}))}Ut.addToSectionHelper(s,t)}if(this.hasValue("disk_allow_use_extended_fulltext")){var l;const e=F.Tag.render(Mt||(Mt=yt`<span>${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT",{"#TARIFF#":"ent250"}));let s=new h.Checker({inputName:this.getValue("disk_allow_use_extended_fulltext").inputName,title:(l=this.getValue("disk_allow_use_extended_fulltext").label)!=null?l:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_SEARCH_DOC"),hintOn:this.getValue("disk_allow_use_extended_fulltext").hintOn,checked:this.getValue("disk_allow_use_extended_fulltext").checked,isEnable:this.getValue("disk_allow_use_extended_fulltext").isEnable,bannerCode:"limit_in_text_search",helpDesk:this.getValue("disk_allow_use_extended_fulltext").helpDesk,helpMessageProvider:this.helpMessageProviderFactory(e)});if(!this.getValue("disk_allow_use_extended_fulltext").isEnable){I.EventEmitter.subscribe(s.switcher,"toggled",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventOpenHint("disk_allow_use_extended_fulltext")}));F.Event.bind(e.querySelector("a"),"click",(()=>{var e;return(e=this.getAnalytic())==null?void 0:e.addEventOpenTariffSelector("disk_allow_use_extended_fulltext")}))}Ut.addToSectionHelper(s,t)}return t}let $t=e=>e,Yt,Wt,qt;var zt=babelHelpers.classPrivateFieldLooseKey("content");var Qt=babelHelpers.classPrivateFieldLooseKey("title");class Zt extends S.SettingsField{constructor(e){const t=e.siteDomainOptions;e.fieldView=new h.TextInput({value:t.subDomainName,placeholder:t.subDomainName,label:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME3"),id:"subDomainName",inputName:"subDomainName",isEnable:true});super(e);Object.defineProperty(this,zt,{writable:true,value:void 0});Object.defineProperty(this,Qt,{writable:true,value:void 0});this.setParentElement(e.parent);this.getFieldView().setEventNamespace(this.getEventNamespace());this.getFieldView().getInputNode().setAttribute("autocomplete","off");let s=null;F.Event.bind(this.getFieldView().getInputNode(),"input",(()=>{clearTimeout(s);s=setTimeout((()=>{this.validateInput()}),1e3)}));this.options={hostname:t.hostname,subDomainName:t.subDomainName,mainDomainName:t.mainDomainName,isRenameable:t.isRenameable,occupiedDomains:t.occupiedDomains};this.options.mainDomainName=[".",this.options.mainDomainName].join("").replace("..",".")}validateInput(){let e=this.getFieldView().getInputNode().value;e=e.trim();if(e.length<3||e.length>60){this.getFieldView().setErrors([F.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_LENGTH_ERROR")])}else if(!/^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,58})[a-zA-Z0-9])$/.test(e)){this.getFieldView().setErrors([F.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_FORMAT_ERROR")])}else if(this.options.occupiedDomains.includes(e)){this.getFieldView().setErrors([F.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_DOMAIN_EXISTS_ERROR")])}else{this.getFieldView().cleanError()}}cancel(){}render(){if(babelHelpers.classPrivateFieldLooseBase(this,zt)[zt]){return babelHelpers.classPrivateFieldLooseBase(this,zt)[zt]}if(this.options.isRenameable!==true){const e=F.Tag.render(Yt||(Yt=$t`<div class="settings-tools-description-link">${0}</div>`),F.Loc.getMessage("INTRANET_SETTINGS_COPY"));BX.clipboard.bindCopyClick(e,{text:()=>this.options.hostname});babelHelpers.classPrivateFieldLooseBase(this,zt)[zt]=F.Tag.render(Wt||(Wt=$t`
				<div>
					<div class="ui-section__field-label_box">
						<div class="ui-section__field-label">${0}</div>
					</div>
					<div class="intranet-settings__domain_box">
						<div class="intranet-settings__domain_name">${0}</div>
						${0}
					</div>
				</div>`),F.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME4"),F.Text.encode(this.options.hostname),e)}else{babelHelpers.classPrivateFieldLooseBase(this,zt)[zt]=F.Tag.render(qt||(qt=$t`<div id="${0}" class="ui-section__field-selector --no-border">
				<div class="ui-section__field-container">
					<div class="ui-section__field-label_box">
						<label class="ui-section__field-label" for="${0}">
							${0}
						</label> 
					</div>
					<div class="ui-section__field-inner">
						<div class="intarnet-settings__domain_inline-field">
							<div class="ui-ctl ui-ctl-textbox ui-ctl-block">
								${0}
							</div>
							<div class="intarnet-settings__domain_name">${0}</div>
						</div>
						${0}
					</div>
				</div>
			</div>`),this.getFieldView().getId(),this.getFieldView().getName(),this.getFieldView().getLabel(),this.getFieldView().getInputNode(),F.Text.encode(this.options.mainDomainName),this.getFieldView().renderErrors())}return babelHelpers.classPrivateFieldLooseBase(this,zt)[zt]}}function Jt(e,t){const s=e.querySelector('[data-role="logo"]');const i=e.querySelector('[data-role="title"]');const a=e.querySelector('[data-role="logo24"]');if(!s.hasAttribute("data-prev-display")){s.dataset.prevDisplay=s.style.display;i.dataset.prevDisplay=i.style.display;a.dataset.prevDisplay=a.style.display}if(F.Type.isUndefined(t.title)!==true){i.innerHTML=F.Text.encode(F.Type.isStringFilled(t.title)?t.title:"Bitrix")}if(F.Type.isUndefined(t.logo24)!==true){if(F.Type.isStringFilled(t.logo24)){delete a.dataset.visibility;if(s.style.display==="none"){a.style.removeProperty("display")}}else{a.dataset.visibility="hidden";a.style.display="none"}}if(F.Type.isUndefined(t.logo)!==true){if(F.Type.isPlainObject(t.logo)){s.style.backgroundImage='url("'+encodeURI(t.logo.src)+'")';s.style.removeProperty("display");i.style.display="none";a.style.display="none"}else{s.style.display="none";i.style.removeProperty("display");if(a.dataset.visibility!=="hidden"){a.style.removeProperty("display")}else{a.style.display="none"}}}}function es(e,t){const s=F.Type.isPlainObject(t)?t:{};const i=String(s.id).indexOf("dark:")===0?"dark":"light";F.Dom.removeClass(e,"--light --dark");F.Dom.addClass(e,"--"+i);if(F.Type.isStringFilled(s.previewImage)){e.style.backgroundImage='url("'+encodeURI(s.previewImage)+'")';e.style.backgroundSize="cover"}else{e.style.removeProperty("backgroundImage");e.style.removeProperty("backgroundSize");e.style.background="none"}if(F.Type.isStringFilled(s.previewColor)){e.style.backgroundColor=s.previewColor}}let ts=e=>e,ss,is,as;var ls=babelHelpers.classPrivateFieldLooseKey("themePicker");var rs=babelHelpers.classPrivateFieldLooseKey("themePickerDialog");var os=babelHelpers.classPrivateFieldLooseKey("initThemePicker");class ns extends h.BaseField{constructor(e){super({inputName:"themeId",isEnable:e.allowSetDefaultTheme,bannerCode:"limit_office_background_to_all"});Object.defineProperty(this,os,{value:cs});Object.defineProperty(this,ls,{writable:true,value:void 0});Object.defineProperty(this,rs,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,os)[os](e);this.applyTheme()}applyTheme(e){const t=e?babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].getItemNode(e):null;let s=t?babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].getTheme(t.dataset.themeId):babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].getAppliedTheme();this.applyPortalThemePreview(s);if(e){I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:ThemePicker:Change",s);this.showSaveButton()}}applyPortalThemePreview(e){const t=this.render().querySelector('[data-role="preview"]');es(t,e);this.getInputNode().value=F.Type.isPlainObject(e)?e["id"]:""}showSaveButton(){this.getInputNode().disabled=false;this.getInputNode().form.dispatchEvent(new window.Event("change"))}getValue(){return this.getInputNode().value}getInputNode(){return this.render().querySelector('input[name="themeId"]')}applyPortalSettings(){}renderContentField(){document.querySelector(".ui-side-panel-content").style.overflow="hidden";const e=F.Tag.render(ss||(ss=ts`
		<div class="intranet-theme-settings ui-section__row">
			<div class="ui-section__row theme-dialog-preview">
				
				<section class="intranet-settings__preview --preview" data-role="preview">
					<div class="preview__header">
						<div class="preview__header-box">
							<div class="preview__header-left-box">
								<div class="preview__menu-switcher">
									<span class="preview__menu-switcher__icon"></span>
								</div>
								<div class="preview__block-item"></div>
								<div class="preview__block-item"></div>
								<div class="preview__block-item"></div>
							</div>
							<div class="preview__header-right-box">
								<div class="intranet-settings__logo-box">
									<div class="intranet-settings__main-widget_logo" data-role="logo"></div>
									<div class="intranet-settings__main-widget_name" data-role="title">Bitrix</div>
									<div class="intranet-settings__logo24" data-role="logo24">
										24
									</div>
								</div>	
								<div class="preview__circle_container">	
									<div class="preview__circle_item"></div>
								</div>				
							</div>
						</div>
					</div>
					<div class="preview__main">
						<div class="preview__main-left">
							<div class="preview__circle_container">
								<div class="preview__circle_item-outline">
									<div class="preview__circle_item --active"></div>
								</div>
							</div>	
							<div class="preview__circle_container">	
								<div class="preview__circle_item"></div>
							</div>	
							<div class="preview__circle_container">	
								<div class="preview__circle_item"></div>
							</div>	
							<div class="preview__circle_container">	
								<div class="preview__circle_item"></div>
							</div>	
							<div class="preview__circle_container">	
								<div class="preview__circle_item"></div>
							</div>	
							<div class="preview__circle_container">	
								<div class="preview__circle_item"></div>
							</div>	
						</div>
						<div class="preview__main-center">
							<div class="preview__main-row">
								<div class="preview__main-row-left">
									<div class="preview__block-item --w145"></div>
									<div class="preview__block-item --opacity80 --w47"></div>
									<div class="preview__block-item --w90"></div>
								</div>
								<div class="preview__main-row-right">
									<div class="preview__block-item --w50"></div>
								</div>
							</div>
							<div class="preview__main-row">
								<div class="preview__main-row-left">
									<div class="preview__block-item --w80"></div>
									<div class="preview__block-item --w50"></div>
								</div>
								<div class="preview__main-row-right">
									<div class="preview__block-item --w90"></div>
								</div>
							</div>
							<div class="preview__main-column">
								<div class="preview__main-header"></div>
								<div class="preview__main-table"></div>
							</div>
						</div>
						<div class="preview__main-right">
							<div class="preview__circle_container">	
								<div class="preview__circle_item --light"></div>
							</div>	
							<div class="preview__circle_container">	
								<div class="preview__circle_item --light"></div>
							</div>	
							<div class="preview__circle_container">	
								<div class="preview__circle_item --light"></div>
							</div>	
							<div class="preview__circle_container">	
								<div class="preview__circle_item --light"></div>
							</div>	
						</div>
					</div>
				</section>
				
			</div>
			<div class="ui-section__row theme-dialog-content" data-role="theme-container"></div>
			<input type="hidden" name="themeId" value="" disabled>
		</div>
		`));const t=F.Tag.render(is||(is=ts`
			<div class="intranet-settings__theme-btn_box">
				<div class="intranet-settings__theme-btn" onclick="${0}">${0}</div>
			</div>
		`),this.handleNewThemeButtonClick.bind(this),F.Loc.getMessage("INTRANET_SETTINGS_THEME_UPLOAD_BTN"));const s=e.querySelector('div[data-role="theme-container"]');Array.from(babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].getThemes()).forEach((e=>{const t=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].createItem(e);if(babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].canSetDefaultTheme()!==true){F.Event.unbindAll(t,"click");if(e["default"]!==true){F.Dom.addClass(t,"--restricted");t.appendChild(F.Tag.render(as||(as=ts`<div class="intranet-settings__theme_lock_box">${0}</div>`),this.renderLockElement()));F.Event.bind(t,"click",this.showBanner.bind(this))}}if(e["default"]===true){t.setAttribute("data-role","ui-ears-active")}s.appendChild(t)}));new r.Ears({container:s,noScrollbar:false}).init();e.appendChild(t);return e}handleNewThemeButtonClick(e){if(babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].canSetDefaultTheme()!==true){return this.showBanner()}babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].getNewThemeDialog().show()}handleLockButtonClick(){if(BX.getClass("BX.UI.InfoHelper")){BX.UI.InfoHelper.show("limit_office_background_to_all")}}}function cs(e){babelHelpers.classPrivateFieldLooseBase(this,ls)[ls]=new top.BX.Intranet.Bitrix24.ThemePicker(e);babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].setThemes(e.themes);babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].setBaseThemes(e.baseThemes);babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]=new o.ThemePickerDialog(babelHelpers.classPrivateFieldLooseBase(this,ls)[ls]);babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].applyThemeAssets=()=>{};babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].getContentContainer=()=>this.render().querySelector('div[data-role="theme-container"]');const t=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].handleRemoveBtnClick.bind(babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]);babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].handleRemoveBtnClick=e=>{const s=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].getItemNode(e);if(!s){return}t(e);this.applyPortalThemePreview(babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].getTheme(babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].getThemeId()));this.showSaveButton()};const s=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].handleItemClick.bind(babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]);babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].handleItemClick=e=>{s(e);this.applyTheme(e)};const i=babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].addItem.bind(babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]);babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].addItem=e=>{i(e);this.applyPortalThemePreview(e);this.showSaveButton()}}var ds=babelHelpers.classPrivateFieldLooseKey("fieldView");class bs extends S.SettingsField{constructor(e){e.fieldView=new ns(e.themePickerSettings);super(e);Object.defineProperty(this,ds,{writable:true,value:void 0});if(e.portalSettings){this.setEventNamespace("BX.Intranet.Settings");Jt(this.getFieldView().render(),e.portalSettings);I.EventEmitter.subscribe(I.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",(e=>{Jt(this.getFieldView().render(),e.getData())}))}}}let ps=e=>e,vs,hs,us;class _s extends h.TextInput{constructor(e){super({inputName:"logo",isEnable:e.isEnable,defaultValue:"default",bannerCode:"limit_admin_logo",helpDeskCode:123,helpMessageProvider:()=>{}});this.getInputNode().type="hidden";this.getInputNode().disabled=true}renderContentField(){return this.getInputNode()}}var gs=babelHelpers.classPrivateFieldLooseKey("content");var Ts=babelHelpers.classPrivateFieldLooseKey("uploader");var Es=babelHelpers.classPrivateFieldLooseKey("siteLogo");var Ps=babelHelpers.classPrivateFieldLooseKey("hiddenContainer");var Ls=babelHelpers.classPrivateFieldLooseKey("hiddenRemoveInput");var Ss=babelHelpers.classPrivateFieldLooseKey("loader");var Is=babelHelpers.classPrivateFieldLooseKey("getFileContainer");var Ns=babelHelpers.classPrivateFieldLooseKey("renderAfterLoad");var ws=babelHelpers.classPrivateFieldLooseKey("showLoader");var Fs=babelHelpers.classPrivateFieldLooseKey("removeLoader");class ms extends S.SettingsField{constructor(e){e.fieldView=new _s({isEnable:e.canUserEditLogo});super(e);Object.defineProperty(this,Fs,{value:As});Object.defineProperty(this,ws,{value:Bs});Object.defineProperty(this,Ns,{value:Hs});Object.defineProperty(this,Is,{value:fs});Object.defineProperty(this,gs,{writable:true,value:void 0});Object.defineProperty(this,Ts,{writable:true,value:void 0});Object.defineProperty(this,Es,{writable:true,value:void 0});Object.defineProperty(this,Ps,{writable:true,value:void 0});Object.defineProperty(this,Ls,{writable:true,value:void 0});Object.defineProperty(this,Ss,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]=e.siteLogoOptions;this.siteLogoLabel=e.siteLogoLabel;this.setEventNamespace("BX.Intranet.Settings")}initUploader({TileWidget:e,StackWidget:t,StackWidgetSize:s}){const i={maxFileCount:1,acceptOnlyImages:true,multiple:false,acceptedFileTypes:["image/png"],events:{onError:function(e){console.error("File Uploader onError",e.getData().error)},"File:onError":this.onFileError.bind(this),"File:onAdd":this.onLogoAdd.bind(this),"File:onRemove":this.onLogoRemove.bind(this),onBeforeFilesAdd:this.getFieldView().isEnable()?()=>{}:e=>{this.getFieldView().showBanner();e.preventDefault()}},allowReplaceSingle:true,hiddenFieldName:"logo_file",hiddenFieldsContainer:babelHelpers.classPrivateFieldLooseBase(this,Is)[Is](),assignAsFile:true,imageResizeWidth:444,imageResizeHeight:110,imageResizeMode:"contain",imageResizeMimeType:"image/png",imagePreviewWidth:444,imagePreviewHeight:110,imagePreviewResizeMode:"contain",files:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]?[[1,{serverFileId:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es].id,serverId:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es].id,type:"image/png",width:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es].width,height:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es].height,treatImageAsFile:true,downloadUrl:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es].src,serverPreviewUrl:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es].src,serverPreviewWidth:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es].width,serverPreviewHeight:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es].height,src:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es].src,preload:true}]]:null};babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]=new t(i,{size:s.LARGE});return this}onFileError(e){console.error("File Error",e.getData().error);I.EventEmitter.subscribeOnce(I.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":onAfterShowPage",this.removeFailedLogo.bind(this));const t=this.getParentElement();if(t){I.EventEmitter.subscribeOnce(t.getFieldView(),"onActive",this.removeFailedLogo.bind(this))}}removeFailedLogo(){const e=babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts].getUploader().getFiles()[0];if(e&&e.isLoadFailed()){babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts].getUploader().removeFiles()}}onLogoAdd(e){I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new I.BaseEvent({data:{logo:{src:e.getData().file.getClientPreviewUrl()}}}));this.getFieldView().getInputNode().disabled=false;this.getFieldView().getInputNode().value="add";this.getFieldView().getInputNode().form.dispatchEvent(new window.Event("change"))}onLogoRemove(e){I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new I.BaseEvent({data:{logo:null}}));this.getFieldView().getInputNode().disabled=false;this.getFieldView().getInputNode().value="remove";this.getFieldView().getInputNode().form.dispatchEvent(new window.Event("change"))}getName(){return"logo"}cancel(){}render(){if(babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]){return babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]}babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]=F.Tag.render(vs||(vs=ps`<div></div>`));babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]();F.Runtime.loadExtension("ui.uploader.stack-widget").then((e=>{this.initUploader(e);babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]();babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]()}));return babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]}}function fs(){if(!babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]){babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=document.createElement("div")}return babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]}function Hs(){var e;const t=F.Tag.render(hs||(hs=ps`<div></div>`));const s=F.Tag.render(us||(us=ps`<div>
				<div class="ui-section__field-label">${0}</div>
				${0}
				<div class="ui-section__field-label">${0}</div>
				${0}
				${0}
				${0}
			</div>`),(e=this.siteLogoLabel)!=null?e:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE1"),t,F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE2"),this.getFieldView().getInputNode(),babelHelpers.classPrivateFieldLooseBase(this,Is)[Is](),this.getFieldView().renderErrors());babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts].renderTo(t);F.Dom.replace(babelHelpers.classPrivateFieldLooseBase(this,gs)[gs],s)}function Bs(){babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]=new w.Loader({target:babelHelpers.classPrivateFieldLooseBase(this,gs)[gs],color:"rgba(82, 92, 105, 0.9)",mode:"inline"});babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss].show().then((()=>{console.log("The loader is shown")}))}function As(){if(babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]){babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss].destroy();babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]=null}}let ys=e=>e,Os;var Rs=babelHelpers.classPrivateFieldLooseKey("container");class Cs extends I.EventEmitter{constructor(e,t){super();Object.defineProperty(this,Rs,{writable:true,value:void 0});this.setEventNamespace("BX.Intranet.Settings");Jt(this.render(),e);I.EventEmitter.subscribe(I.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",this.onChange.bind(this));if(t){es(this.render(),t==null?void 0:t.theme);I.EventEmitter.subscribe(I.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":ThemePicker:Change",this.onSetTheme.bind(this))}}onChange(e){Jt(this.render(),e.getData())}onSetTheme(e){es(this.render(),e.getData())}render(){if(!babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]){babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]=F.Tag.render(Os||(Os=ys`
			<section class="intranet-settings__preview --preview" data-role="preview">
				<div class="preview__header">
					<div class="preview__header-box">
						<div class="preview__header-left-box">
							<div class="preview__menu-switcher">
								<span class="preview__menu-switcher__icon"></span>
							</div>
							<div class="preview__block-item"></div>
							<div class="preview__block-item"></div>
							<div class="preview__block-item"></div>
						</div>
						<div class="preview__header-right-box">
							<div class="intranet-settings__logo-box">
								<div class="intranet-settings__main-widget_logo" data-role="logo"></div>
								<div class="intranet-settings__main-widget_name" data-role="title">Bitrix</div>
								<div class="intranet-settings__logo24" data-role="logo24">
									24
								</div>
							</div>	
							<div class="preview__circle_container">	
								<div class="preview__circle_item"></div>
							</div>				
						</div>
					</div>
				</div>
				<div class="preview__main">
					<div class="preview__main-left">
						<div class="preview__circle_container">
							<div class="preview__circle_item-outline">
								<div class="preview__circle_item --active"></div>
							</div>
						</div>	
						<div class="preview__circle_container">	
							<div class="preview__circle_item"></div>
						</div>	
						<div class="preview__circle_container">	
							<div class="preview__circle_item"></div>
						</div>	
						<div class="preview__circle_container">	
							<div class="preview__circle_item"></div>
						</div>	
						<div class="preview__circle_container">	
							<div class="preview__circle_item"></div>
						</div>	
						<div class="preview__circle_container">	
							<div class="preview__circle_item"></div>
						</div>	
					</div>
					<div class="preview__main-center">
						<div class="preview__main-row">
							<div class="preview__main-row-left">
								<div class="preview__block-item --w145"></div>
								<div class="preview__block-item --opacity80 --w47"></div>
								<div class="preview__block-item --w90"></div>
							</div>
							<div class="preview__main-row-right">
								<div class="preview__block-item --w50"></div>
							</div>
						</div>
						<div class="preview__main-row">
							<div class="preview__main-row-left">
								<div class="preview__block-item --w80"></div>
								<div class="preview__block-item --w50"></div>
							</div>
							<div class="preview__main-row-right">
								<div class="preview__block-item --w90"></div>
							</div>
						</div>
						<div class="preview__main-column">
							<div class="preview__main-header"></div>
							<div class="preview__main-table"></div>
						</div>
					</div>
					<div class="preview__main-right">
						<div class="preview__circle_container">	
							<div class="preview__circle_item --light"></div>
						</div>	
						<div class="preview__circle_container">	
							<div class="preview__circle_item --light"></div>
						</div>	
						<div class="preview__circle_container">	
							<div class="preview__circle_item --light"></div>
						</div>	
						<div class="preview__circle_container">	
							<div class="preview__circle_item --light"></div>
						</div>	
					</div>
				</div>
			</section>
			`))}return babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]}}let Ms=e=>e,Ds,Gs,Vs;var ks=babelHelpers.classPrivateFieldLooseKey("headerWidgetRenderAlternative");var Us=babelHelpers.classPrivateFieldLooseKey("getOwnDomainTabBody");class Ks extends S.BaseSettingsPage{constructor(){super();Object.defineProperty(this,Us,{value:js});Object.defineProperty(this,ks,{value:xs});this.titlePage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_PORTAL");this.descriptionPage=F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_PORTAL");I.EventEmitter.subscribe(I.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",(e=>{if(!F.Type.isNil(e.data.title)){var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigPortal(y.CHANGE_PORTAL_NAME)}else if(!F.Type.isNil(e.data.logo)){var s;(s=this.getAnalytic())==null?void 0:s.addEventConfigPortal(y.CHANGE_PORTAL_LOGO)}}));I.EventEmitter.subscribe(I.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":ThemePicker:Change",(e=>{var t,s;(t=this.getAnalytic())==null?void 0:t.addEventChangeTheme((s=e.data)==null?void 0:s.id)}))}getType(){return"portal"}headerWidgetRender(){return""}getSections(){return[this.buildSiteTitleSection(this.getValue("portalSettings"),this.getValue("portalThemeSettings"),this.getValue("portalSettingsLabels")),this.getValue("portalDomainSettings")?this.buildDomainSection(this.getValue("portalDomainSettings")):null,this.buildThemeSection(this.getValue("portalThemeSettings"),this.getValue("portalSettings"))].filter((e=>e instanceof S.SettingsSection))}buildSiteTitleSection(e,t,s){if(!this.hasValue("sectionCompanyTitle")){return}const i=new E.Section(this.getValue("sectionCompanyTitle"));const a=new S.SettingsSection({parent:this,section:i});i.append(new E.Row({content:new c.Alert({text:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_DESCRIPTION"),inline:true,size:c.AlertSize.SMALL,color:c.AlertColor.PRIMARY}).getContainer()}).render());const l=new Cs(e,t);new S.SettingsRow({row:new E.Row({content:l.render(),className:"intranet-settings__site-logo_subrow"}),parent:a});const r=new S.SettingsRow({row:new E.Row({className:"intranet-settings__grid_box"}),parent:a});const o=new S.SettingsRow({row:new E.Row({className:"intranet-settings__site-logo_subrow --bottom-separator --block"}),parent:a});const n=new S.TabsField({parent:o});const d=new S.TabField({parent:n,tabsOptions:this.getValue("tabCompanyTitle")});const b=new E.Row({});const p=new J({parent:b,siteTitleOptions:e,siteTitleLabels:s,helpMessages:{site:this.helpMessageProviderFactory()}});new S.SettingsRow({row:b,parent:d,child:p});new S.SettingsRow({parent:d,child:p.getLogo24Field()});const v=new S.TabField({parent:n,tabsOptions:this.getValue("tabCompanyLogo")});const u=new ms({siteLogoLabel:this.getValue("portalSettingsLabels").logo,siteLogoOptions:this.getValue("portalSettings").logo,canUserEditLogo:this.getValue("portalSettings").canUserEditLogo});new S.SettingsRow({parent:v,child:u});n.activateTab(d);new S.SettingsRow({row:new E.SeparatorRow,parent:a});new S.SettingsRow({parent:a,child:new S.SettingsField({fieldView:new h.TextInput({inputName:"name",label:this.getValue("portalSettingsLabels").name,value:this.getValue("portalSettings").name,placeholder:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE"),inputDefaultWidth:true})})});return a}buildDomainSection(e){if(!this.hasValue("sectionSiteDomain")){return}const t=new E.Section(this.getValue("sectionSiteDomain"));const s=new S.SettingsSection({parent:this,section:t});t.append(new E.Row({content:new c.Alert({text:`\n\t\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_DOMAIN_DESCRIPTION")}\n\t\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=18213298')">\n\t\t\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`,inline:true,size:c.AlertSize.SMALL,color:c.AlertColor.PRIMARY}).getContainer()}).render());const i=new S.SettingsRow({parent:s});const a=new S.TabsField({parent:i});const l=new S.TabField({parent:a,tabsOptions:this.getValue("tabDomainPrefix")});const r=new Zt({siteDomainOptions:e,helpMessages:{site:this.helpMessageProviderFactory()}});F.Event.bind(r.getFieldView().getInputNode(),"keydown",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventConfigPortal(y.CHANGE_PORTAL_SITE)}));const o=new E.Row({content:r.render()});new S.SettingsRow({row:o,parent:l,child:r});const n=new S.TabField({parent:a,tabsOptions:this.getValue("tabDomain")});const d=new E.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Us)[Us](e)});new S.SettingsRow({row:d,parent:n});a.activateTab(l);return s}buildThemeSection(e,t){if(!this.hasValue("sectionSiteTheme")){return}const s=new E.Section(this.getValue("sectionSiteTheme"));const i=new S.SettingsSection({section:s,parent:this});new S.SettingsRow({row:new E.Row({content:new c.Alert({text:`\n\t\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_PORTAL_THEME_DESCRIPTION")}\n\t\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=18325288')">\n\t\t\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`,inline:true,size:c.AlertSize.SMALL,color:c.AlertColor.PRIMARY}).getContainer()}),parent:i});new bs({parent:i,portalSettings:t,themePickerSettings:e});return i}}function xs(){if(!this.hasValue("portalSettings")){return""}const e=this.getValue("portalSettings");const t=this.getValue("portalThemeSettings");const s=this.getValue("portalDomainSettings");const i=F.Tag.render(Ds||(Ds=Ms`
		<div class="intranet-settings__header-widget_box">
			<div class="intranet-settings__header-widget_main">
				<div class="intranet-settings__header-widget_icon" data-role="logo"></div>
				<div class="intranet-settings__header-widget_name" data-role="title">Bitrix</div>
				<div class="intranet-settings__header-widget_logo24" data-role="logo24">24</div>
			</div>
			<div class="intranet-settings__header-widget__link_box">
				<div class="intranet-settings__header-widget__link_value">${0}</div>
				<div data-role="copy" class="ui-icon-set --link-3 intranet-settings__header-widget__link_btn"></div>
			</div>
		</div>`),F.Text.encode(s.hostname));Jt(i,e);es(i,t==null?void 0:t.theme);const a=i.querySelector('[data-role="copy"]');BX.clipboard.bindCopyClick(a,{text:()=>s.hostname});return i}function js(e){const t=F.Tag.render(Gs||(Gs=Ms`<div class="ui-icon-set --copy-plates intranet-settings__domain__list_btn"></div>`));const s=e.exampleDns.join("<br>");BX.clipboard.bindCopyClick(t,{text:()=>s.replaceAll("<br>","\n")});const i=F.Tag.render(Vs||(Vs=Ms`<div class="intranet-settings__domain__list_box">
						<ul class="intranet-settings__domain__list">
							<li class="intranet-settings__domain__list_item">
								${0}
								<div class="intranet-settings__domain_box">
									${0}
									${0}
								</div>
							</li>
							<li class="intranet-settings__domain__list_item">
								${0}
							</li>
							<li class="intranet-settings__domain__list_item">
								${0}
							</li>
						</ul>
						<a target="_blank" href="/settings/support.php" class="settings-tools-description-link">${0}</a>
					</div>`),F.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP1"),s,t,F.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP2"),F.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP3"),F.Loc.getMessage("INTRANET_SETTINGS_WRITE_TO_SUPPORT"));if(e.isCustomizable!==true){F.Event.bind(i.querySelector("a.settings-tools-description-link"),"click",(e=>{BX.UI.InfoHelper.show("limit_office_own_domain");e.preventDefault();return false}))}return i}let Xs=e=>e,$s,Ys,Ws;class qs{}qs.NOT_ADMIN="not_admin";qs.BOUND="bound";qs.MAIL="mail";qs.EMPLOYEE="employee";qs.NETWORK="network";qs.DEFAULT="default";var zs=babelHelpers.classPrivateFieldLooseKey("container");var Qs=babelHelpers.classPrivateFieldLooseKey("verificationOptions");class Zs extends I.EventEmitter{constructor(e){super();Object.defineProperty(this,zs,{writable:true,value:void 0});Object.defineProperty(this,Qs,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs]=e;this.setEventNamespace("BX.Intranet.Settings:PortalDeleteForm")}getDescription(){return F.Tag.render($s||($s=Xs`
			${0}
		`),F.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_MSGVER_1",{"#MORE_DETAILS#":this.getMoreDetails()}))}getMoreDetails(){return`\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=19566456')">\n\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t</a>\n\t\t`}getBodyClass(){return"--warning"}getConfirmButtonText(){return F.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL")}getInputContainer(){}getContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,zs)[zs]){babelHelpers.classPrivateFieldLooseBase(this,zs)[zs]=F.Tag.render(Ys||(Ys=Xs`
				<div class="intranet-settings__portal-delete-form_wrapper ${0}">
					<div class="intranet-settings__portal-delete-form_body">
						<div class="intranet-settings__portal-delete-icon-wrapper">
							<div class="ui-icon-set --warning"></div>
						</div>
						<div class="intranet-settings__portal-delete-form_description-wrapper">
							<span class="intranet-settings__portal-delete-form_description">
								${0}
							</span>
							${0}
						</div>
					</div>
					${0}
				</div>
			`),this.getBodyClass(),this.getDescription(),this.getInputContainer(),this.getButtonContainer())}return babelHelpers.classPrivateFieldLooseBase(this,zs)[zs]}onConfirmEventHandler(){this.getConfirmButton().setWaiting(true);top.BX.Runtime.loadExtension("bitrix24.portal-delete").then((e=>{const{PortalDelete:t}=e;const s=new t(babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs]);s.showCheckwordPopup();this.getConfirmButton().setWaiting(false)}))}getButtonContainer(){return F.Tag.render(Ws||(Ws=Xs`
			<span class="intranet-settings__portal-delete-form_buttons-wrapper">
				${0}
			</span>
		`),this.getConfirmButton().getContainer())}getConfirmButton(){if(!this.confirmButton){var e;this.confirmButton=new g.Button({text:(e=this.getConfirmButtonText())!=null?e:"",noCaps:true,round:true,className:"--confirm",events:{click:()=>{this.onConfirmEventHandler()}},props:{"data-bx-role":"delete-portal-confirm"}})}return this.confirmButton}sendChangeFormEvent(e){this.emit("updateForm",new I.BaseEvent({data:{type:e!=null?e:null}}))}}let Js=e=>e,ei;var ti=babelHelpers.classPrivateFieldLooseKey("isFreeLicense");class si extends Zs{constructor(e){super();Object.defineProperty(this,ti,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]=e}getDescription(){return F.Tag.render(ei||(ei=Js`
			${0}
		`),F.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_EMPLOYEE",{"#MORE_DETAILS#":this.getMoreDetails()}))}getConfirmButtonText(){return F.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_FIRE_EMPLOYEE")}onConfirmEventHandler(){this.getConfirmButton().setWaiting(true);BX.SidePanel.Instance.open("/company/?apply_filter=Y&FIRED=N",{events:{onCloseComplete:()=>{F.ajax.runAction("bitrix24.portal.getActiveUserCount").then((e=>{this.getConfirmButton().setWaiting(false);if(e.data<=1){this.sendChangeFormEvent(babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]?qs.DEFAULT:qs.MAIL)}})).catch((e=>{this.getConfirmButton().setWaiting(false);e.errors.forEach((e=>{console.log(e.message)}))}))}}})}}let ii=e=>e,ai;var li=babelHelpers.classPrivateFieldLooseKey("mailForRequest");var ri=babelHelpers.classPrivateFieldLooseKey("portalUrl");var oi=babelHelpers.classPrivateFieldLooseKey("mailLink");var ni=babelHelpers.classPrivateFieldLooseKey("getMailLink");class ci extends Zs{constructor(e,t){super();Object.defineProperty(this,ni,{value:di});Object.defineProperty(this,li,{writable:true,value:void 0});Object.defineProperty(this,ri,{writable:true,value:void 0});Object.defineProperty(this,oi,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,li)[li]=e;babelHelpers.classPrivateFieldLooseBase(this,ri)[ri]=t}getConfirmButtonText(){return F.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_MAIL",{"#MAIL#":babelHelpers.classPrivateFieldLooseBase(this,li)[li]})}onConfirmEventHandler(){top.window.location.href=babelHelpers.classPrivateFieldLooseBase(this,ni)[ni]()}getDescription(){return F.Tag.render(ai||(ai=ii`
			${0}
		`),F.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_MAIL",{"#MAIL#":babelHelpers.classPrivateFieldLooseBase(this,li)[li],"#MAIL_LINK#":babelHelpers.classPrivateFieldLooseBase(this,ni)[ni](),"#MORE_DETAILS#":this.getMoreDetails()}))}}function di(){if(!babelHelpers.classPrivateFieldLooseBase(this,oi)[oi]){const e=F.Loc.getMessage("INTRANET_SETTINGS_PORTAL_DELETE_MAIL_BODY",{"#PORTAL_URL#":babelHelpers.classPrivateFieldLooseBase(this,ri)[ri]});const t=F.Loc.getMessage("INTRANET_SETTINGS_PORTAL_DELETE_MAIL_SUBJECT",{"#PORTAL_URL#":babelHelpers.classPrivateFieldLooseBase(this,ri)[ri]});babelHelpers.classPrivateFieldLooseBase(this,oi)[oi]=`mailto:${babelHelpers.classPrivateFieldLooseBase(this,li)[li]}?body=${e}&subject=${t}`}return babelHelpers.classPrivateFieldLooseBase(this,oi)[oi]}let bi=e=>e,pi;class vi extends Zs{getButtonContainer(){}getDescription(){return F.Tag.render(pi||(pi=bi`
			${0}
			<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=19566456')">
				${0}
			</a>
		`),F.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_NOT_ADMIN"),F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"))}}let hi=e=>e,ui;class _i extends Zs{getButtonContainer(){}getDescription(){return F.Tag.render(ui||(ui=hi`
			${0}
		`),F.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_BOUND",{"#MORE_DETAILS#":this.getMoreDetails()}))}}let gi=e=>e,Ti;var Ei=babelHelpers.classPrivateFieldLooseKey("networkUrl");class Pi extends Zs{constructor(e){super();Object.defineProperty(this,Ei,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei]=e}getButtonContainer(){if(F.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei])){return super.getButtonContainer()}return null}getConfirmButton(){if(!this.confirmButton){this.confirmButton=new g.Button({tag:g.Button.Tag.LINK,link:babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei],text:F.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_NETWORK_LINK"),noCaps:true,round:true,className:"--confirm",props:{"data-bx-role":"delete-portal-confirm",target:"_top"}})}return this.confirmButton}getDescription(){return F.Tag.render(Ti||(Ti=gi`
			${0}
		`),F.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_NETWORK",{"#MORE_DETAILS#":this.getMoreDetails()}))}}var Li=babelHelpers.classPrivateFieldLooseKey("options");var Si=babelHelpers.classPrivateFieldLooseKey("settingsRow");var Ii=babelHelpers.classPrivateFieldLooseKey("form");var Ni=babelHelpers.classPrivateFieldLooseKey("defaultBodyClass");var wi=babelHelpers.classPrivateFieldLooseKey("bodyClass");var Fi=babelHelpers.classPrivateFieldLooseKey("renderFormRow");var mi=babelHelpers.classPrivateFieldLooseKey("bindFormEvents");var fi=babelHelpers.classPrivateFieldLooseKey("updateSectionBodyClass");class Hi extends S.SettingsSection{constructor(e){super(e);Object.defineProperty(this,fi,{value:yi});Object.defineProperty(this,mi,{value:Ai});Object.defineProperty(this,Fi,{value:Bi});Object.defineProperty(this,Li,{writable:true,value:void 0});Object.defineProperty(this,Si,{writable:true,value:void 0});Object.defineProperty(this,Ii,{writable:true,value:void 0});Object.defineProperty(this,Ni,{writable:true,value:void 0});Object.defineProperty(this,wi,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni]=this.getSectionView().className.bodyActive;babelHelpers.classPrivateFieldLooseBase(this,Li)[Li]=e.options;let t;if(!babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].isAdmin){t=qs.NOT_ADMIN}else if(!babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].isFreeLicense){t=qs.MAIL}else if(babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].isBound){t=qs.BOUND}else if(babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].isEmployeesLeft){t=qs.EMPLOYEE}else if(!babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].verificationOptions){t=qs.NETWORK}else{t=qs.DEFAULT}babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi](t)}}function Bi(e){if(babelHelpers.classPrivateFieldLooseBase(this,Si)[Si]){this.removeChild(babelHelpers.classPrivateFieldLooseBase(this,Si)[Si]);F.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,Si)[Si].render())}switch(e){case qs.MAIL:babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]=new ci(babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].mailForRequest,babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].portalUrl);break;case qs.EMPLOYEE:babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]=new si(babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].isFreeLicense);break;case qs.NOT_ADMIN:babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]=new vi;break;case qs.BOUND:babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]=new _i;break;case qs.NETWORK:babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]=new Pi(babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].networkUrl);break;default:babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]=new Zs(babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].verificationOptions);break}babelHelpers.classPrivateFieldLooseBase(this,fi)[fi]();babelHelpers.classPrivateFieldLooseBase(this,mi)[mi]();const t=new E.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii].getContainer()});babelHelpers.classPrivateFieldLooseBase(this,Si)[Si]=new S.SettingsRow({row:t});this.addChild(babelHelpers.classPrivateFieldLooseBase(this,Si)[Si]);this.render()}function Ai(){babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii].subscribe("closeForm",(()=>{this.getSectionView().toggle(false)}));babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii].subscribe("updateForm",(e=>{if(e.data.type){babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi](e.data.type)}}))}function yi(){F.Dom.removeClass(this.getSectionView().getContent(),babelHelpers.classPrivateFieldLooseBase(this,wi)[wi]);babelHelpers.classPrivateFieldLooseBase(this,wi)[wi]=babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii].getBodyClass();this.getSectionView().className.bodyActive=babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni]+" "+babelHelpers.classPrivateFieldLooseBase(this,wi)[wi];if(this.getSectionView().isOpen){F.Dom.addClass(this.getSectionView().getContent(),babelHelpers.classPrivateFieldLooseBase(this,wi)[wi])}}let Oi=e=>e,Ri,Ci;var Mi=babelHelpers.classPrivateFieldLooseKey("header");var Di=babelHelpers.classPrivateFieldLooseKey("buildDateTimeSection");var Gi=babelHelpers.classPrivateFieldLooseKey("buildMailsSection");var Vi=babelHelpers.classPrivateFieldLooseKey("buildCRMMapsSection");var ki=babelHelpers.classPrivateFieldLooseKey("buildCardsProductPropertiesSection");var Ui=babelHelpers.classPrivateFieldLooseKey("buildBIConnectorSettingsSection");var Ki=babelHelpers.classPrivateFieldLooseKey("buildAdditionalSettingsSection");var xi=babelHelpers.classPrivateFieldLooseKey("geoDataSwitch");class ji extends S.BaseSettingsPage{constructor(){super();Object.defineProperty(this,xi,{value:Qi});Object.defineProperty(this,Ki,{value:zi});Object.defineProperty(this,Ui,{value:qi});Object.defineProperty(this,ki,{value:Wi});Object.defineProperty(this,Vi,{value:Yi});Object.defineProperty(this,Gi,{value:$i});Object.defineProperty(this,Di,{value:Xi});Object.defineProperty(this,Mi,{writable:true,value:void 0});this.titlePage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_CONFIGURATION")}getType(){return"configuration"}headerWidgetRender(){var e;let t="";if(((e=this.getValue("isFormat24Hour"))==null?void 0:e.current)==="Y"){t=this.getValue("format24HourTime")}else{t=this.getValue("format12HourTime")}babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi]=F.Tag.render(Ri||(Ri=Oi`
		<div class="intranet-settings__date-widget_box">
			<span class="ui-icon-set --earth-language"></span>
			<div class="intranet-settings__date-widget_content">
				<div class="intranet-settings__date-widget_inner">
					<span data-role="time" class="intranet-settings__date-widget_title">${0}</span>
					<span class="intranet-settings__date-widget_subtitle">${0}</span>
				</div>
				<div data-role="date" class="intranet-settings__date-widget_subtitle">${0}</div>
			</div>
		</div>`),t,this.getValue("offsetUTC"),this.getValue("currentDate"));return babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi]}appendSections(e){let t=babelHelpers.classPrivateFieldLooseBase(this,Di)[Di]();t==null?void 0:t.renderTo(e);let s=babelHelpers.classPrivateFieldLooseBase(this,Gi)[Gi]();s==null?void 0:s.renderTo(e);if(this.hasValue("mapsProviderCRM")&&this.getValue("mapsProviderCRM")){let t=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi]();t==null?void 0:t.renderTo(e)}let i=babelHelpers.classPrivateFieldLooseBase(this,ki)[ki]();i==null?void 0:i.renderTo(e);const a=babelHelpers.classPrivateFieldLooseBase(this,Ui)[Ui]();a==null?void 0:a.renderTo(e);let l=babelHelpers.classPrivateFieldLooseBase(this,Ki)[Ki]();l==null?void 0:l.renderTo(e);if(this.hasValue("deletePortalOptions")&&this.hasValue("sectionDeletePortal")){const t=new E.Section(this.getValue("sectionDeletePortal"));const s=new Hi({section:t,parent:this,options:this.getValue("deletePortalOptions")});s.renderTo(e)}}}function Xi(){if(!this.hasValue("sectionDateFormat")){return}let e=new E.Section(this.getValue("sectionDateFormat"));const t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("culture")){let e=new h.Selector(this.getValue("culture"));ji.addToSectionHelper(e,t,new E.Row({className:"--intranet-settings__mb-20"}));F.Event.bind(e.getInputNode(),"change",(e=>{babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi].querySelector('[data-role="date"]').innerHTML=this.getValue("longDates")[e.target.value]}))}if(this.hasValue("isFormat24Hour")){let e=new h.InlineChecker(this.getValue("isFormat24Hour"));ji.addToSectionHelper(e,t);I.EventEmitter.subscribe(e,"change",(t=>{babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi].querySelector('[data-role="time"]').innerHTML=e.isChecked()?this.getValue("format24HourTime"):this.getValue("format12HourTime")}))}return t}function $i(){if(!this.hasValue("sectionLetters")){return}let e=new E.Section(this.getValue("sectionLetters"));const t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("trackOutMailsRead")){let e=new h.Checker(this.getValue("trackOutMailsRead"));let s=new E.Row({});ji.addToSectionHelper(e,t,s)}if(this.hasValue("trackOutMailsClick")){let e=new h.Checker(this.getValue("trackOutMailsClick"));let s=new E.Row({});ji.addToSectionHelper(e,t,s)}if(this.hasValue("defaultEmailFrom")){let e=new h.TextInput(this.getValue("defaultEmailFrom"));let s=new E.Row({});ji.addToSectionHelper(e,t,s)}return t}function Yi(){var e;if(!this.hasValue("sectionMapsInCrm")){return}let t=new E.Section(this.getValue("sectionMapsInCrm"));const s=new S.SettingsSection({section:t,parent:this});let i=new h.Selector({label:(e=this.getValue("mapsProviderCRM").label)!=null?e:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS"),name:this.getValue("mapsProviderCRM").name,items:this.getValue("mapsProviderCRM").values,current:this.getValue("mapsProviderCRM").current});let a=new E.Row({separator:"bottom",className:"--block"});ji.addToSectionHelper(i,s,a);const l=new E.SeparatorRow({isHidden:this.getValue("mapsProviderCRM").current==="OSM"});new S.SettingsRow({row:l,parent:s});const r=new BX.UI.Alert({text:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION",{"#GOOGLE_API_URL#":this.getValue("googleApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const o=new E.Row({separator:"top",content:r.getContainer(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});new S.SettingsRow({row:o,parent:s});const n=new h.TextInputInline({inputName:"API_KEY_FRONTEND",label:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC"),hintTitle:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC_HINT"),value:this.getValue("API_KEY_FRONTEND").value,placeholder:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});const c=new E.Row({isHidden:this.getValue("mapsProviderCRM").current==="OSM"});ji.addToSectionHelper(n,s,c);const d=new h.TextInputInline({inputName:"API_KEY_BACKEND",label:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER"),hintTitle:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER_HINT"),value:this.getValue("API_KEY_BACKEND").value,placeholder:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});const b=new E.Row({content:d.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM",separator:"bottom",className:"--block"});ji.addToSectionHelper(d,s,b);const p=new E.SeparatorRow({});new S.SettingsRow({row:p,parent:s});let v=new h.Checker({inputName:"SHOW_PHOTOS_ON_MAP",title:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_PHOTO_PLACES_MAPS"),hintOn:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),hintOff:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),checked:this.getValue("SHOW_PHOTOS_ON_MAP").value==="1"});let u=new E.Row({separator:"top",className:"--block",content:v.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});ji.addToSectionHelper(v,s,u);let _=new h.Checker({inputName:"USE_GEOCODING_SERVICE",title:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_GEOCODING_SERVICE"),hintOn:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),hintOff:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),checked:this.getValue("USE_GEOCODING_SERVICE").value==="1"});let g=new E.Row({content:_.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});ji.addToSectionHelper(_,s,g);i.getInputNode().addEventListener("change",(e=>{if(e.target.value==="OSM"){l.hide();o.hide();c.hide();b.hide();g.hide();u.hide()}else{l.show();o.show();c.show();b.show();g.show();u.show()}}));return s}function Wi(){if(!this.hasValue("sectionMapsInProduct")){return}let e=new E.Section(this.getValue("sectionMapsInProduct"));const t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("cardsProviderProductProperties")){var s;let e=new h.Selector({label:(s=this.getValue("cardsProviderProductProperties").label)!=null?s:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS"),name:this.getValue("cardsProviderProductProperties").name,items:this.getValue("cardsProviderProductProperties").values,current:this.getValue("cardsProviderProductProperties").current});let i=new E.Row({separator:"bottom"});ji.addToSectionHelper(e,t,i);new S.SettingsRow({row:new E.SeparatorRow,parent:t});const a=new BX.UI.Alert({text:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_YANDEX_DESCRIPTION",{"#YANDEX_API_URL#":this.getValue("yandexApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const l=new E.Row({content:a.getContainer(),isHidden:this.getValue("cardsProviderProductProperties").current!=="yandex"});new S.SettingsRow({row:l,parent:t});const r=new h.TextInput({inputName:"yandexKeyProductProperties",label:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_YANDEX_KEY"),value:this.getValue("yandexKeyProductProperties"),placeholder:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});const o=new E.Row({separator:"bottom",className:"--block",content:r.render(),isHidden:this.getValue("cardsProviderProductProperties").current!=="yandex"});ji.addToSectionHelper(r,t,o);const n=new BX.UI.Alert({text:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION",{"#GOOGLE_API_URL#":this.getValue("googleApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const c=new E.Row({content:n.getContainer(),isHidden:this.getValue("cardsProviderProductProperties").current!=="google"});new S.SettingsRow({row:c,parent:t});const d=new h.TextInput({inputName:"googleKeyProductProperties",label:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_GOOGLE_KEY"),value:this.getValue("googleKeyProductProperties"),placeholder:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});const b=new E.Row({content:d.render(),isHidden:this.getValue("cardsProviderProductProperties").current!=="google"});ji.addToSectionHelper(d,t,b);e.getInputNode().addEventListener("change",(e=>{if(e.target.value==="yandex"){l.show();o.show();c.hide();b.hide()}else{l.hide();o.hide();c.show();b.show()}}))}return t}function qi(){if(!this.hasValue("sectionBIConnector")){return}const e=new E.Section(this.getValue("sectionBIConnector"));const t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("biconnectorDashboardLanguage")){const e=new BX.UI.Alert({text:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BICONNECTOR_LANGUAGE_HINT"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const s=new E.Row({content:e.getContainer(),className:"--block"});const i=new h.Selector(this.getValue("biconnectorDashboardLanguage"));const a=new E.Row({separator:"bottom",className:"--block"});new S.SettingsRow({row:s,parent:t});ji.addToSectionHelper(i,t,a)}return t}function zi(){if(!this.hasValue("sectionOther")){return}let e=new E.Section(this.getValue("sectionOther"));const t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("allowUserInstallApplication")){let e=new h.Checker(this.getValue("allowUserInstallApplication"));let s=new E.Row({});I.EventEmitter.subscribe(e.switcher,"toggled",(()=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigConfiguration(y.CHANGE_MARKET,e.isChecked())}));ji.addToSectionHelper(e,t,s)}if(this.hasValue("allCanBuyTariff")){var s;const e=F.Tag.render(Ci||(Ci=Oi`<span>${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));let i=new h.Checker({inputName:this.getValue("allCanBuyTariff").inputName,title:(s=this.getValue("allCanBuyTariff").title)!=null?s:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALL_CAN_BUY_TARIFF"),hintOn:this.getValue("allCanBuyTariff").hintOn,checked:this.getValue("allCanBuyTariff").checked,isEnable:this.getValue("allCanBuyTariff").isEnable,bannerCode:"limit_why_pay_tariff_everyone",helpMessageProvider:this.helpMessageProviderFactory(e)});let a=new E.Row({});I.EventEmitter.subscribe(i.switcher,"toggled",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventConfigConfiguration(y.CHANGE_PAY_TARIFF,i.isChecked())}));ji.addToSectionHelper(i,t,a)}if(this.hasValue("allowMeasureStressLevel")){let e=new h.Checker(this.getValue("allowMeasureStressLevel"));let s=new E.Row({});ji.addToSectionHelper(e,t,s)}if(this.hasValue("collectGeoData")){let e=new h.Checker(this.getValue("collectGeoData"));I.EventEmitter.subscribe(e.switcher,"toggled",(()=>{babelHelpers.classPrivateFieldLooseBase(this,xi)[xi](e)}));ji.addToSectionHelper(e,t)}return t}function Qi(e){if(e.isChecked()){BX.UI.Dialogs.MessageBox.show({modal:true,minWidth:640,title:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA"),message:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_CONFIRM"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,okCaption:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_OK"),onCancel:function(){e.switcher.check(false);return true},onOk:function(){return true}})}}let Zi=e=>e,Ji,ea,ta;var sa=babelHelpers.classPrivateFieldLooseKey("buildScheduleTab");var ia=babelHelpers.classPrivateFieldLooseKey("buildScheduleSection");var aa=babelHelpers.classPrivateFieldLooseKey("buildHolidaysSection");var la=babelHelpers.classPrivateFieldLooseKey("forDepartmentsRender");class ra extends S.BaseSettingsPage{constructor(){super();Object.defineProperty(this,la,{value:da});Object.defineProperty(this,aa,{value:ca});Object.defineProperty(this,ia,{value:na});Object.defineProperty(this,sa,{value:oa});this.titlePage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_SCHEDULE");this.descriptionPage=F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_SCHEDULE")}getType(){return"schedule"}appendSections(e){const t=babelHelpers.classPrivateFieldLooseBase(this,ia)[ia]();t.renderTo(e);const s=babelHelpers.classPrivateFieldLooseBase(this,aa)[aa]();s.renderTo(e)}}function oa(e){let t=new E.Row({className:"intranet-settings__work-time_container --no-padding"});let s=new S.SettingsRow({row:t,parent:e});if(this.hasValue("WORK_TIME_START")){const e=new h.Selector(this.getValue("WORK_TIME_START"));new S.SettingsRow({child:new S.SettingsField({fieldView:e}),parent:s,row:new E.Row({className:"intranet-settings__work-time_row"})})}new S.SettingsRow({row:new E.Row({className:"ui-section__field-inline-separator"}),parent:s});if(this.hasValue("WORK_TIME_END")){const e=new h.Selector(this.getValue("WORK_TIME_END"));new S.SettingsRow({child:new S.SettingsField({fieldView:e}),parent:s,row:new E.Row({className:"intranet-settings__work-time_row"})})}let i=F.Tag.render(Ji||(Ji=Zi`<div><div>`));F.Dom.append(t.render(),i);if(this.hasValue("WEEK_DAYS")){var a;const t=new h.ItemPicker({inputName:this.getValue("WEEK_DAYS").inputName,isMulti:true,label:(a=this.getValue("WEEK_DAYS").label)!=null?a:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_WEEKEND"),items:this.getValue("WEEK_DAYS").values,current:this.getValue("WEEK_DAYS").multiValue});let s=new S.SettingsField({fieldView:t});const l=new E.Row({content:t.render()});new S.SettingsRow({row:l,child:s,parent:e});F.Dom.append(l.render(),i)}if(this.hasValue("WEEK_START")){const t=new h.ItemPicker(this.getValue("WEEK_START"));let s=new S.SettingsField({fieldView:t});F.Dom.addClass(t.render(),"--row-frame_gray");const a=new E.Row({content:t.render()});new S.SettingsRow({row:a,child:s,parent:e});F.Dom.append(a.render(),i)}return i}function na(){if(!this.hasValue("sectionSchedule")){return}let e=new E.Section(this.getValue("sectionSchedule"));const t=new S.SettingsSection({parent:this,section:e});const s=new S.SettingsRow({parent:t});const i=new S.TabsField({parent:s});const a=new S.TabField({parent:i,tabsOptions:this.getValue("tabForCompany")});babelHelpers.classPrivateFieldLooseBase(this,sa)[sa](a);if(this.getValue("TIMEMAN").enabled){const e=new S.TabField({parent:i,tabsOptions:this.getValue("tabForDepartment")});const t=new E.Row({content:babelHelpers.classPrivateFieldLooseBase(this,la)[la]()});new S.SettingsRow({row:t,parent:e})}i.activateTab(a);return t}function ca(){var e,t,s,i;if(!this.hasValue("sectionHoliday")){return}let a=new E.Section(this.getValue("sectionHoliday"));const l=new S.SettingsSection({parent:this,section:a});const r=(e=(t=this.getValue("year_holidays"))==null?void 0:(s=t.value)==null?void 0:(i=s.match(/\d{1,2}.\d{1,2}/gm))==null?void 0:i.length)!=null?e:0;let o=F.Tag.render(ea||(ea=Zi`<div class="ui-section__field-label">${0}</div>`),F.Loc.getMessage("INTRANET_SETTINGS_FIELD_INFO",{"#COUNT_DAYS#":r}));const n=new E.Row({content:o});a.append(n.render());if(this.hasValue("year_holidays")){const e=new h.TextInput(this.getValue("year_holidays"));ra.addToSectionHelper(e,l);F.Event.bind(e.getInputNode(),"keyup",(()=>{var t,s,i;const a=(t=e==null?void 0:(s=e.getInputNode().value)==null?void 0:(i=s.match(/\d{1,2}.\d{1,2}/gm))==null?void 0:i.length)!=null?t:0;o.innerHTML=F.Loc.getMessage("INTRANET_SETTINGS_FIELD_INFO",{"#COUNT_DAYS#":a})}))}return l}function da(){return F.Tag.render(ta||(ta=Zi`
			<div class="intranet-settings__tab-info_container">
				<div class="intranet-settings__tab-info_text">${0}</div>
				<a href="/timeman/schedules/" class="ui-section__link" target="_blank">${0}</a>
			</div>
		`),F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS"),F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS_CONFIG"))}let ba=e=>e,pa;var va=babelHelpers.classPrivateFieldLooseKey("buildGdprSection");class ha extends S.BaseSettingsPage{constructor(){super();Object.defineProperty(this,va,{value:ua});this.titlePage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_GDPR");this.descriptionPage=F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_GDPR")}getType(){return"gdpr"}appendSections(e){let t=babelHelpers.classPrivateFieldLooseBase(this,va)[va]();t==null?void 0:t.renderTo(e)}addApplicationsRender(){if(this.hasValue("marketDirectory")){const e=this.getValue("marketDirectory");return F.Tag.render(pa||(pa=ba`
				<div class="ui-text-right">
					<a class="ui-section__link" href="${0}detail/integrations24.gdprstaff/">
						${0}
					</a>
					<a class="ui-section__link" style="margin-left: 12px;" href="${0}detail/integrations24.gdpr/">
						${0}
					</a>
				</div>
			`),e,F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_EMPLOYEE"),e,F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_CRM"))}return null}}function ua(){if(!this.hasValue("sectionGdpr")){return}let e=new E.Section(this.getValue("sectionGdpr"));let t=new S.SettingsSection({section:e,parent:this});const s=new BX.UI.Alert({text:`\n\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_GDPR_DESCRIPTION")}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=7608199')">\n\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t\t</br>\n\t\t\t\t<a class="ui-section__link" href="${this.getValue("dpaLink")}" target="_blank">\n\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_AGREEMENT")}\n\t\t\t\t</a>\n\t\t\t`,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const i=new E.Row({content:s.getContainer()});new S.SettingsRow({row:i,parent:t});if(this.hasValue("companyTitle")){var a;const e=new h.TextInput({inputName:"companyTitle",label:(a=this.getValue("companyTitle").label)!=null?a:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE"),value:this.getValue("companyTitle").value,placeholder:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_COMPANY_TITLE")});let s=new S.SettingsField({fieldView:e});new S.SettingsRow({parent:t,child:s})}if(this.hasValue("contactName")){var l;const e=new h.TextInput({inputName:"contactName",label:(l=this.getValue("contactName").label)!=null?l:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CONTACT_NAME"),value:this.getValue("contactName").value,placeholder:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_CONTACT_NAME")});let s=new S.SettingsField({fieldView:e});new S.SettingsRow({parent:t,child:s})}if(this.hasValue("notificationEmail")){var r;const e=new h.TextInput({inputName:"notificationEmail",label:(r=this.getValue("notificationEmail").label)!=null?r:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_NOTIFICATION_EMAIL"),value:this.getValue("notificationEmail").value,placeholder:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_NOTIFICATION_EMAIL")});let s=new S.SettingsField({fieldView:e});new S.SettingsRow({parent:t,child:s})}if(this.hasValue("date")){var o;const e=new h.TextInput({inputName:"date",label:(o=this.getValue("date").label)!=null?o:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_DATE"),value:this.getValue("date").value});F.Dom.adjust(e.render(),{events:{click:e=>{BX.calendar({node:e.target,field:"date",form:"",bTime:false,bHideTime:true})}}});let s=new S.SettingsField({fieldView:e});new S.SettingsRow({parent:t,child:s})}new S.SettingsRow({row:new E.Row({content:this.addApplicationsRender()}),parent:t});return t}let _a=e=>e,ga,Ta,Ea,Pa,La,Sa,Ia,Na,wa;var Fa=babelHelpers.classPrivateFieldLooseKey("otpChecker");var ma=babelHelpers.classPrivateFieldLooseKey("otpSelector");var fa=babelHelpers.classPrivateFieldLooseKey("otpPopup");var Ha=babelHelpers.classPrivateFieldLooseKey("buildOTPSection");var Ba=babelHelpers.classPrivateFieldLooseKey("getOTPChecker");var Aa=babelHelpers.classPrivateFieldLooseKey("getOTPPopup");var ya=babelHelpers.classPrivateFieldLooseKey("getOTPPeriodSelector");var Oa=babelHelpers.classPrivateFieldLooseKey("getOTPDescription");var Ra=babelHelpers.classPrivateFieldLooseKey("getPushOTPDescriptionText");var Ca=babelHelpers.classPrivateFieldLooseKey("isPushOtpProvider");var Ma=babelHelpers.classPrivateFieldLooseKey("isHighPromoteModePushOtp");var Da=babelHelpers.classPrivateFieldLooseKey("getOldOTPDescriptionText");var Ga=babelHelpers.classPrivateFieldLooseKey("buildAccessIPSection");var Va=babelHelpers.classPrivateFieldLooseKey("getEmptyUserSelectorRow");var ka=babelHelpers.classPrivateFieldLooseKey("getEmptyAccessIpRow");var Ua=babelHelpers.classPrivateFieldLooseKey("getUserSelectorRow");var Ka=babelHelpers.classPrivateFieldLooseKey("getAccessIpRow");var xa=babelHelpers.classPrivateFieldLooseKey("getIpAccessDescription");var ja=babelHelpers.classPrivateFieldLooseKey("buildPasswordRecoverySection");var Xa=babelHelpers.classPrivateFieldLooseKey("buildDevicesHistorySection");var $a=babelHelpers.classPrivateFieldLooseKey("buildEventLogSection");var Ya=babelHelpers.classPrivateFieldLooseKey("buildBlackListSection");var Wa=babelHelpers.classPrivateFieldLooseKey("buildDataLeakProtectionSection");class qa extends S.BaseSettingsPage{constructor(){super();Object.defineProperty(this,Wa,{value:ul});Object.defineProperty(this,Ya,{value:hl});Object.defineProperty(this,$a,{value:vl});Object.defineProperty(this,Xa,{value:pl});Object.defineProperty(this,ja,{value:bl});Object.defineProperty(this,xa,{value:dl});Object.defineProperty(this,Ka,{value:cl});Object.defineProperty(this,Ua,{value:nl});Object.defineProperty(this,ka,{value:ol});Object.defineProperty(this,Va,{value:rl});Object.defineProperty(this,Ga,{value:ll});Object.defineProperty(this,Da,{value:al});Object.defineProperty(this,Ma,{value:il});Object.defineProperty(this,Ca,{value:sl});Object.defineProperty(this,Ra,{value:tl});Object.defineProperty(this,Oa,{value:el});Object.defineProperty(this,ya,{value:Ja});Object.defineProperty(this,Aa,{value:Za});Object.defineProperty(this,Ba,{value:Qa});Object.defineProperty(this,Ha,{value:za});Object.defineProperty(this,Fa,{writable:true,value:void 0});Object.defineProperty(this,ma,{writable:true,value:void 0});Object.defineProperty(this,fa,{writable:true,value:void 0});this.titlePage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_SECURITY");this.descriptionPage=F.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_SECURITY_MSGVER_2")}getType(){return"security"}appendSections(e){var t,s,i;const a=this.hasValue("IS_BITRIX_24")&&this.getValue("IS_BITRIX_24");if(this.hasValue("SECURITY_OTP_ENABLED")&&this.getValue("SECURITY_OTP_ENABLED")){var l;(l=babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha]())==null?void 0:l.renderTo(e)}(t=babelHelpers.classPrivateFieldLooseBase(this,Wa)[Wa]())==null?void 0:t.renderTo(e);(s=babelHelpers.classPrivateFieldLooseBase(this,Xa)[Xa]())==null?void 0:s.renderTo(e);(i=babelHelpers.classPrivateFieldLooseBase(this,$a)[$a]())==null?void 0:i.renderTo(e);if(a){var r,o;(r=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]())==null?void 0:r.renderTo(e);(o=babelHelpers.classPrivateFieldLooseBase(this,Ya)[Ya]())==null?void 0:o.renderTo(e)}}}function za(){if(!this.hasValue("sectionOtp")){return}const e=new E.Section(this.getValue("sectionOtp"));const t=new S.SettingsSection({section:e,parent:this});const s=new E.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Oa)[Oa]().getContainer()});new S.SettingsRow({row:s,parent:t});if(this.hasValue("SECURITY_OTP")){const e=new E.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().render(),separator:babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().isChecked()?"":"bottom",className:babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().isChecked()?"":"--block"});new S.SettingsRow({row:e,parent:t});const s=new E.Row({content:babelHelpers.classPrivateFieldLooseBase(this,ya)[ya]().render(),isHidden:!babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().isChecked()});new S.SettingsRow({row:s,parent:t});let i=null;if(this.hasValue("SEND_OTP_PUSH")){const e=F.Tag.render(ga||(ga=_a`
					<div class="settings-switcher-wrapper">
						<div class="settings-security-message-switcher"/>
					</div>
				`));new h.SingleChecker({switcher:new u.Switcher({node:e.querySelector(".settings-security-message-switcher"),inputName:"SEND_OTP_PUSH",checked:this.getValue("SEND_OTP_PUSH"),size:u.SwitcherSize.small})});i=new E.Row({content:e,isHidden:babelHelpers.classPrivateFieldLooseBase(this,Ca)[Ca]()||!babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().isChecked()});e.append(F.Tag.render(Ta||(Ta=_a`<span class="settings-switcher-title">${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_MESSAGE_CHAT")));new S.SettingsRow({row:i,parent:t})}if(this.hasValue("SECURITY_OTP_NEED_PUSH_OTP_BANNER")&&this.getValue("SECURITY_OTP_NEED_PUSH_OTP_BANNER")){const e=new _.PushOtp({title:F.Loc.getMessage("INTRANET_SETTINGS_SECURITY_PUSH_OTP_BANNER_TITLE"),text:F.Loc.getMessage("INTRANET_SETTINGS_SECURITY_PUSH_OTP_BANNER_TEXT"),clickEnableBtn:()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventEnablePushOtp();F.ajax.runAction("intranet.v2.Otp.activePushOtp").then((()=>{this.reload();babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]=null}),(e=>{if(e.status==="error"){S.ErrorCollection.showSystemError(e.errors[0].message)}}))}}).render();const s=new E.Row({content:e});new S.SettingsRow({row:s,parent:t})}I.EventEmitter.subscribe(babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().switcher,"toggled",(()=>{if(this.getValue("SECURITY_IS_USER_OTP_ACTIVE")!==true&&babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().isChecked()){babelHelpers.classPrivateFieldLooseBase(this,Aa)[Aa]().show();babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().cancel();babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().switcher.check(false);return}if(this.hasValue("SECURITY_OTP_ENABLED")&&this.getValue("SECURITY_OTP_ENABLED")){var t;(t=this.getAnalytic())==null?void 0:t.addEventToggle2fa(babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().isChecked())}if(babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().isChecked()){var a;F.Dom.removeClass(e.render(),"--bottom-separator --block");s.show();(a=i)==null?void 0:a.show()}else{var l;F.Dom.addClass(e.render(),"--bottom-separator --block");s.hide();(l=i)==null?void 0:l.hide()}}))}return t}function Qa(){if(babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]instanceof h.Checker){return babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]}if(this.hasValue("fieldSecurityOtp")){babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]=new h.Checker({inputName:this.getValue("fieldSecurityOtp").inputName,checked:this.getValue("fieldSecurityOtp").checked,title:this.getValue("fieldSecurityOtp").title,isEnable:this.getValue("fieldSecurityOtp").isEnable,hideSeparator:true,alignCenter:true,noMarginBottom:true})}babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa].renderLockElement=()=>null;return babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]}function Za(){if(babelHelpers.classPrivateFieldLooseBase(this,fa)[fa]instanceof N.Popup){return babelHelpers.classPrivateFieldLooseBase(this,fa)[fa]}const e=F.Tag.render(Ea||(Ea=_a`
			<div class="intranet-settings__security_popup_info">
				${0}
			</div>	
		`),F.Loc.getMessage("INTRANET_SETTINGS_POPUP_OTP_ENABLE"));const t=new BX.UI.Button({text:F.Loc.getMessage("INTRANET_SETTINGS_POPUP_OTP_ENABLE_BUTTON"),color:BX.UI.Button.Color.PRIMARY,events:{click:()=>{babelHelpers.classPrivateFieldLooseBase(this,Aa)[Aa]().close();BX.SidePanel.Instance.open(this.getValue("SECURITY_OTP_PATH"))}}});const s=F.Tag.render(Pa||(Pa=_a`
			<div class="intranet-settings__security_popup_container">
				${0}
				<div class="ui-btn-container ui-btn-container-center">
					${0}
				</div>			
			</div>
		`),e,t.getContainer());babelHelpers.classPrivateFieldLooseBase(this,fa)[fa]=new N.Popup({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa].getInputNode(),content:s,autoHide:true,width:337,angle:{offset:200-15},offsetLeft:babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa].getInputNode().offsetWidth-200+15,closeByEsc:true,borderRadius:18});return babelHelpers.classPrivateFieldLooseBase(this,fa)[fa]}function Ja(){if(babelHelpers.classPrivateFieldLooseBase(this,ma)[ma]instanceof h.Selector){return babelHelpers.classPrivateFieldLooseBase(this,ma)[ma]}babelHelpers.classPrivateFieldLooseBase(this,ma)[ma]=new h.Selector({label:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_PERIOD_MSGVER_1"),name:"SECURITY_OTP_DAYS",items:this.getValue("SECURITY_OTP_DAYS").ITEMS,current:this.getValue("SECURITY_OTP_DAYS").CURRENT});return babelHelpers.classPrivateFieldLooseBase(this,ma)[ma]}function el(){return new BX.UI.Alert({text:babelHelpers.classPrivateFieldLooseBase(this,Ca)[Ca]()?babelHelpers.classPrivateFieldLooseBase(this,Ra)[Ra]():babelHelpers.classPrivateFieldLooseBase(this,Da)[Da](),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}function tl(){if(babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma]()){return`\n\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_PUSH_OTP_HIGH_MODE",{"[HELP_LINK]":'<a class="ui-section__link" target="_blank" href="/settings/support.php">',"[/HELP_LINK]":"</a>","[BR]":"</br></br>"})}\n\t\t\t\t</br></br>\n\t\t\t\t<span class="settings-section-description-focus-text --security-info">\n\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=17728602')">\n\t\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t`}return`\n\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_PUSH_OTP",{"[BR]":"</br></br>"})}\n\t\t\t</br></br>\n\t\t\t<span class="settings-section-description-focus-text --security-info">\n\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_PUSH_OTP_WARNING",{"[SPAN]":"<span>","[/SPAN]":"</span>"})}\n\t\t\t\t</br></br>\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=17728602')">\n\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t`}function sl(){return this.hasValue("SECURITY_PUSH_OTP_PROVIDER_DEFAULT")&&this.getValue("SECURITY_PUSH_OTP_PROVIDER_DEFAULT")}function il(){return babelHelpers.classPrivateFieldLooseBase(this,Ca)[Ca]()&&this.hasValue("SECURITY_PUSH_OTP_PROVIDE_HIGH")&&this.getValue("SECURITY_PUSH_OTP_PROVIDE_HIGH")}function al(){return`\n\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_FIRST")}\n\t\t\t</br></br>\n\t\t\t<span class="settings-section-description-focus-text --security-info">\n\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_SECOND")}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=17728602')">\n\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t`}function ll(){if(!this.hasValue("sectionAccessIp")){return}const e=new E.Section(this.getValue("sectionAccessIp"));const t=new S.SettingsSection({section:e,parent:this});const s=new E.Row({content:babelHelpers.classPrivateFieldLooseBase(this,xa)[xa]().getContainer()});new S.SettingsRow({row:s,parent:t});let i=0;if(this.hasValue("IP_ACCESS_RIGHTS")){for(const e of this.getValue("IP_ACCESS_RIGHTS")){i++;new S.SettingsRow({parent:t,child:babelHelpers.classPrivateFieldLooseBase(this,Ua)[Ua](e)});new S.SettingsRow({parent:t,child:babelHelpers.classPrivateFieldLooseBase(this,Ka)[Ka](e)})}}if(i===0){i++;new S.SettingsRow({parent:t,child:babelHelpers.classPrivateFieldLooseBase(this,Va)[Va](i)});new S.SettingsRow({parent:t,child:babelHelpers.classPrivateFieldLooseBase(this,ka)[ka](i)})}const a=()=>{if(this.getValue("IP_ACCESS_RIGHTS_ENABLED")){i++;const e=new E.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Va)[Va](i).render()});F.Dom.insertBefore(e.render(),l.parentElement);const t=new E.Row({content:babelHelpers.classPrivateFieldLooseBase(this,ka)[ka](i).render()});F.Dom.insertBefore(t.render(),l.parentElement)}else{BX.UI.InfoHelper.show("limit_admin_ip")}};const l=F.Tag.render(La||(La=_a`
			<div class="ui-text-right">
				<a class="ui-section__link" href="javascript:void(0)" onclick="${0}">
					${0}
				</a>
			</div>
		`),a,F.Loc.getMessage("INTRANET_SETTINGS_ADDITIONAL_USER_ACCESS_IP"));new S.SettingsRow({row:new E.Row({content:l}),parent:t});return t}function rl(e){const t=new h.UserSelector({inputName:`SECURITY_IP_ACCESS_${e}_USERS[]`,label:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP"),enableDepartments:true,encodeValue:e=>{if(!F.Type.isNil(e.id)){return e.id==="all-users"?"AU":e.type+e.id.toString().split(":")[0]}return null},isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),helpMessageProvider:this.helpMessageProviderFactory(F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO"))});return new S.SettingsField({fieldView:t})}function ol(e){var t;const s=`SECURITY_IP_ACCESS_${e}_IP`;const i=new h.TextInput({inputName:s,label:(t=this.getValue("IP_ACCESS_RIGHTS_ENABLED_LABEL"))!=null?t:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP"),isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),helpMessageProvider:this.helpMessageProviderFactory(F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO"))});return new S.SettingsField({fieldView:i})}function nl(e){var t;const s=h.FieldFactory.createUserSelector({inputName:`SECURITY_IP_ACCESS_${e.fieldNumber}_USERS[]`,label:(t=this.getValue("IP_ACCESS_RIGHTS_ENABLED_LABEL"))!=null?t:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP"),values:Object.values(e.users),enableDepartments:true});return new S.SettingsField({fieldView:s})}function cl(e){const t=`SECURITY_IP_ACCESS_${e.fieldNumber}_IP`;const s=new h.TextInput({inputName:t,label:F.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP"),value:e.ip});return new S.SettingsField({fieldView:s})}function dl(){return new BX.UI.Alert({text:`\n\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_IP_ACCESS",{"#ARTICLE_CODE#":"redirect=detail&code=17300230"})}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=17300230')">\n\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t`,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}function bl(){return new E.Section({title:F.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_PASSWORD_RECOVERY"),titleIconClasses:"ui-icon-set",isOpen:false,canCollapse:false})}function pl(){if(!this.hasValue("sectionHistory")){return}const e=new E.Section(this.getValue("sectionHistory"));const t=new S.SettingsSection({section:e,parent:this});const s=new BX.UI.Alert({text:`\n\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_DEVICE_HISTORY")}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=16623484')">\n\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t`,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const i=new E.Row({content:s.getContainer()});new S.SettingsRow({row:i,parent:t});if(this.hasValue("DEVICE_HISTORY_SETTINGS")){const e=F.Tag.render(Sa||(Sa=_a`<span>${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT",{"#TARIFF#":"ent250"}));const s=new h.Selector({label:this.getValue("DEVICE_HISTORY_SETTINGS").label,name:this.getValue("DEVICE_HISTORY_SETTINGS").name,items:this.getValue("DEVICE_HISTORY_SETTINGS").values,current:this.getValue("DEVICE_HISTORY_SETTINGS").current,isEnable:this.getValue("DEVICE_HISTORY_SETTINGS").isEnable,bannerCode:"limit_office_login_history",helpMessageProvider:this.helpMessageProviderFactory(e)});if(!this.getValue("DEVICE_HISTORY_SETTINGS").isEnable){F.Event.bind(s.getInputNode(),"click",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventOpenHint(this.getValue("DEVICE_HISTORY_SETTINGS").name)}));F.Event.bind(e.querySelector("a"),"click",(()=>{var e;return(e=this.getAnalytic())==null?void 0:e.addEventOpenTariffSelector(this.getValue("DEVICE_HISTORY_SETTINGS").name)}))}qa.addToSectionHelper(s,t)}const a=F.Tag.render(Ia||(Ia=_a`
			<div class="ui-text-right">
				<a class="ui-section__link" href="/company/" target="_blank">
					${0}
				</a>
			</div>
		`),F.Loc.getMessage("INTRANET_SETTINGS_GO_TO_USER_LIST_LINK"));new S.SettingsRow({row:new E.Row({content:a}),parent:t});return t}function vl(){if(!this.hasValue("sectionEventLog")){return}const e=new E.Section(this.getValue("sectionEventLog"));const t=new S.SettingsSection({section:e,parent:this});const s=new BX.UI.Alert({text:`\n\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_EVENT_LOG")}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=17296266')">\n\t\t\t\t\t${F.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t`,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const i=new E.Row({content:s.getContainer()});new S.SettingsRow({row:i,parent:t});const a=this.hasValue("EVENT_LOG")?F.Tag.render(Na||(Na=_a`
				<div class="ui-text-right">
					<a class="ui-section__link" href="${0}" target="_blank">
						${0}
					</a>
				</div>
			`),this.getValue("EVENT_LOG"),F.Loc.getMessage("INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK")):F.Tag.render(wa||(wa=_a`
				<div class="ui-text-right">
					<a class="ui-section__link" href="javascript:void(0)" onclick="BX.UI.InfoHelper.show('limit_office_login_log')">
						${0}
					</a>
				</div>
			`),F.Loc.getMessage("INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK"));new S.SettingsRow({row:new E.Row({content:a}),parent:t});return t}function hl(){if(!this.hasValue("sectionBlackList")){return}let e=this.getValue("sectionBlackList");e["singleLink"]={href:"/settings/configs/mail_blacklist.php"};return new E.Section(e)}function ul(){if(!this.hasValue("sectionDataLeakProtection")){return}const e=new E.Section(this.getValue("sectionDataLeakProtection"));const t=new S.SettingsSection({section:e,parent:this});if(this.hasValue("switcherDisableScreenshot")){const e=new h.Checker(this.getValue("switcherDisableScreenshot"));const s=h.FieldFactory.createUserSelector({...this.getValue("selectorDisableScreenshot"),enableDepartments:true});qa.addToSectionCheckerHelper(e,[s],t)}if(this.hasValue("switcherDisableCopy")){const e=new h.Checker(this.getValue("switcherDisableCopy"));const s=h.FieldFactory.createUserSelector({...this.getValue("selectorDisableCopy"),enableDepartments:true});qa.addToSectionCheckerHelper(e,[s],t)}if(this.hasValue("isAutoDeleteMessagesEnabled")){const e=new h.Checker(this.getValue("isAutoDeleteMessagesEnabled"));qa.addToSectionHelper(e,t)}if(this.hasValue("isWaterMarksEnabled")){const e=new h.Checker(this.getValue("isWaterMarksEnabled"));qa.addToSectionHelper(e,t)}return t}let _l=e=>e,gl,Tl,El,Pl,Ll,Sl,Il,Nl,wl,Fl,ml,fl,Hl,Bl,Al,yl,Ol,Rl,Cl,Ml,Dl,Gl;var Vl=babelHelpers.classPrivateFieldLooseKey("urlCreate");var kl=babelHelpers.classPrivateFieldLooseKey("urlEdit");var Ul=babelHelpers.classPrivateFieldLooseKey("urlPublic");var Kl=babelHelpers.classPrivateFieldLooseKey("urlPartners");var xl=babelHelpers.classPrivateFieldLooseKey("urlImport");var jl=babelHelpers.classPrivateFieldLooseKey("urlExport");var Xl=babelHelpers.classPrivateFieldLooseKey("previewImg");var $l=babelHelpers.classPrivateFieldLooseKey("title");var Yl=babelHelpers.classPrivateFieldLooseKey("feedbackParams");var Wl=babelHelpers.classPrivateFieldLooseKey("buttonEdit");var ql=babelHelpers.classPrivateFieldLooseKey("buttonPartners");var zl=babelHelpers.classPrivateFieldLooseKey("buttonMarket");var Ql=babelHelpers.classPrivateFieldLooseKey("buttonWithdraw");var Zl=babelHelpers.classPrivateFieldLooseKey("buttonPublish");var Jl=babelHelpers.classPrivateFieldLooseKey("mainTemplate");var er=babelHelpers.classPrivateFieldLooseKey("secondaryTemplate");var tr=babelHelpers.classPrivateFieldLooseKey("buttonMainSettings");var sr=babelHelpers.classPrivateFieldLooseKey("buttonSecondarySettings");var ir=babelHelpers.classPrivateFieldLooseKey("importPopup");var ar=babelHelpers.classPrivateFieldLooseKey("exportPopup");var lr=babelHelpers.classPrivateFieldLooseKey("popupShare");var rr=babelHelpers.classPrivateFieldLooseKey("popupWithdraw");var or=babelHelpers.classPrivateFieldLooseKey("isPageExists");var nr=babelHelpers.classPrivateFieldLooseKey("isPublished");var cr=babelHelpers.classPrivateFieldLooseKey("canEdit");var dr=babelHelpers.classPrivateFieldLooseKey("getMainTemplate");var br=babelHelpers.classPrivateFieldLooseKey("getSecondaryTemplate");var pr=babelHelpers.classPrivateFieldLooseKey("getButtonMainSettings");var vr=babelHelpers.classPrivateFieldLooseKey("getButtonSecondarySettings");var hr=babelHelpers.classPrivateFieldLooseKey("showImportPopup");var ur=babelHelpers.classPrivateFieldLooseKey("showExportPopup");var _r=babelHelpers.classPrivateFieldLooseKey("showImportSlider");var gr=babelHelpers.classPrivateFieldLooseKey("showExportSlider");var Tr=babelHelpers.classPrivateFieldLooseKey("showSharePopup");var Er=babelHelpers.classPrivateFieldLooseKey("showWithdrawPopup");var Pr=babelHelpers.classPrivateFieldLooseKey("getButtonEdit");var Lr=babelHelpers.classPrivateFieldLooseKey("getButtonPublish");var Sr=babelHelpers.classPrivateFieldLooseKey("getButtonWithdraw");var Ir=babelHelpers.classPrivateFieldLooseKey("getButtonPartners");var Nr=babelHelpers.classPrivateFieldLooseKey("getButtonCreate");var wr=babelHelpers.classPrivateFieldLooseKey("bindButtonEvents");var Fr=babelHelpers.classPrivateFieldLooseKey("bindSliderCloseEvent");class mr extends S.BaseSettingsPage{constructor(){super();Object.defineProperty(this,Fr,{value:jr});Object.defineProperty(this,wr,{value:xr});Object.defineProperty(this,Nr,{value:Kr});Object.defineProperty(this,Ir,{value:Ur});Object.defineProperty(this,Sr,{value:kr});Object.defineProperty(this,Lr,{value:Vr});Object.defineProperty(this,Pr,{value:Gr});Object.defineProperty(this,Er,{value:Dr});Object.defineProperty(this,Tr,{value:Mr});Object.defineProperty(this,gr,{value:Cr});Object.defineProperty(this,_r,{value:Rr});Object.defineProperty(this,ur,{value:Or});Object.defineProperty(this,hr,{value:yr});Object.defineProperty(this,vr,{value:Ar});Object.defineProperty(this,pr,{value:Br});Object.defineProperty(this,br,{value:Hr});Object.defineProperty(this,dr,{value:fr});this.titlePage="";this.descriptionPage="";Object.defineProperty(this,Vl,{writable:true,value:null});Object.defineProperty(this,kl,{writable:true,value:null});Object.defineProperty(this,Ul,{writable:true,value:null});Object.defineProperty(this,Kl,{writable:true,value:null});Object.defineProperty(this,xl,{writable:true,value:null});Object.defineProperty(this,jl,{writable:true,value:null});Object.defineProperty(this,Xl,{writable:true,value:null});Object.defineProperty(this,$l,{writable:true,value:null});Object.defineProperty(this,Yl,{writable:true,value:null});Object.defineProperty(this,Wl,{writable:true,value:null});Object.defineProperty(this,ql,{writable:true,value:null});Object.defineProperty(this,zl,{writable:true,value:null});Object.defineProperty(this,Ql,{writable:true,value:null});Object.defineProperty(this,Zl,{writable:true,value:null});Object.defineProperty(this,Jl,{writable:true,value:null});Object.defineProperty(this,er,{writable:true,value:null});Object.defineProperty(this,tr,{writable:true,value:null});Object.defineProperty(this,sr,{writable:true,value:null});Object.defineProperty(this,ir,{writable:true,value:null});Object.defineProperty(this,ar,{writable:true,value:null});Object.defineProperty(this,lr,{writable:true,value:null});Object.defineProperty(this,rr,{writable:true,value:null});Object.defineProperty(this,or,{writable:true,value:false});Object.defineProperty(this,nr,{writable:true,value:false});Object.defineProperty(this,cr,{writable:true,value:true});this.titlePage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_MAINPAGE");this.descriptionPage=F.Loc.getMessage("INTRANET_SETTINGS_TITLE_DESCRIPTION_PAGE_MAINPAGE")}getType(){return"mainpage"}appendSections(e){var t,s,i,a;const l=this.getValue("main-page");babelHelpers.classPrivateFieldLooseBase(this,Vl)[Vl]=l.urlCreate||null;babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]=l.urlEdit||null;babelHelpers.classPrivateFieldLooseBase(this,Ul)[Ul]=l.urlPublic||null;babelHelpers.classPrivateFieldLooseBase(this,Kl)[Kl]=l.urlPartners||null;babelHelpers.classPrivateFieldLooseBase(this,xl)[xl]=l.urlImport||null;babelHelpers.classPrivateFieldLooseBase(this,jl)[jl]=l.urlExport||null;babelHelpers.classPrivateFieldLooseBase(this,Xl)[Xl]=l.previewImg||null;babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl]=l.feedbackParams||null;babelHelpers.classPrivateFieldLooseBase(this,or)[or]=(t=l.isPageExists)!=null?t:false;babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]=(s=l.isPublished)!=null?s:false;babelHelpers.classPrivateFieldLooseBase(this,$l)[$l]=(i=l.title)!=null?i:null;babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]=(a=l.canEdit)!=null?a:false;const r=new S.SettingsSection({parent:this,section:{canCollapse:false,isOpen:true}});const o=new S.SettingsSection({parent:this,section:{canCollapse:false,isOpen:true}});const n=F.Tag.render(gl||(gl=_l`<div>		
			${0}		
		</div>`),babelHelpers.classPrivateFieldLooseBase(this,dr)[dr]());r.getSectionView().append(new E.Row({content:n}).render());if(babelHelpers.classPrivateFieldLooseBase(this,or)[or]){const e=F.Tag.render(Tl||(Tl=_l`<div>
				${0}			
			</div>`),babelHelpers.classPrivateFieldLooseBase(this,br)[br]());o.getSectionView().append(new E.Row({content:e}).render())}babelHelpers.classPrivateFieldLooseBase(this,wr)[wr]();babelHelpers.classPrivateFieldLooseBase(this,Fr)[Fr]();o.renderTo(e);r.renderTo(e)}getInfoTemplate(){this.infoTemplate=F.Tag.render(El||(El=_l`
			<div class="intranet-settings__main-page-info">
				<div class="intranet-settings__main-page-info-title">
					${0}
				</div>
				<div class="intranet-settings__main-page-info-subtitle">
					${0}
					<div class="ui-icon-set --help intranet-settings__main-page-info-help"></div>
				</div>
			</div>
		`),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_TITLE"),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_SUBTITLE"));F.Event.bind(this.infoTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseenter",(e=>{const t=this.infoTemplate.querySelector(".intranet-settings__main-page-info-help").offsetWidth;this.warningHintPopup=new N.Popup({angle:true,autoHide:true,content:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_HINT_WARNING"),cacheable:false,animation:"fading-slide",bindElement:e.target,offsetTop:0,offsetLeft:parseInt(t/2),bindOptions:{position:"top"},darkMode:true});this.warningHintPopup.show()}));F.Event.bind(this.infoTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseleave",(()=>{if(this.warningHintPopup){setTimeout((()=>{this.warningHintPopup.destroy();this.warningHintPopup=null}),300)}}));return this.infoTemplate}getInfoSuccessTemplate(){this.infoSuccessTemplate=F.Tag.render(Pl||(Pl=_l`
			<div class="intranet-settings__main-page-info --success">
				<div class="intranet-settings__main-page-info-title">
					${0}				
				</div>
				<div class="intranet-settings__main-page-info-subtitle">
					${0}
					<div class="ui-icon-set --help intranet-settings__main-page-info-help"></div>
				</div>
			</div>
		`),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_SUCCESS_TITLE"),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_SUCCESS_SUBTITLE"));F.Event.bind(this.infoSuccessTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseenter",(e=>{const t=this.infoSuccessTemplate.querySelector(".intranet-settings__main-page-info-help").offsetWidth;this.successHintPopup=new N.Popup({angle:true,autoHide:true,content:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_HINT_SUCCESS"),cacheable:false,animation:"fading-slide",bindElement:e.target,offsetTop:0,offsetLeft:parseInt(t/2),bindOptions:{position:"top"},darkMode:true});this.successHintPopup.show()}));F.Event.bind(this.infoSuccessTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseleave",(()=>{if(this.successHintPopup){setTimeout((()=>{this.successHintPopup.destroy();this.successHintPopup=null}),300)}}));return this.infoSuccessTemplate}renderLockElement(){return F.Tag.render(Ll||(Ll=_l`<span class="intranet-settings-mp-icon ui-icon-set --lock"></span>`))}}function fr(){if(!babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]){babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]=F.Tag.render(Sl||(Sl=_l`
				<div class="intranet-settings__main-page-template">
					<div class="intranet-settings__main-page-icon-box">
						<div class="intranet-settings__main-page-icon"></div>
					</div>
					<div class="intranet-settings__main-page-content">
						<ul class="intranet-settings__main-page-list">
							<li class="intranet-settings__main-page-list-item">
								<div class="ui-icon-set --check intranet-settings__main-page-list-icon"></div>
								<div class="intranet-settings__main-page-list-name">
									${0}
								</div>																																
							</li>
							<li class="intranet-settings__main-page-list-item">
								<div class="ui-icon-set --check intranet-settings__main-page-list-icon"></div>
								<div class="intranet-settings__main-page-list-name">
									${0}
								</div>								
							</li>
							<li class="intranet-settings__main-page-list-item">
								<div class="ui-icon-set --check intranet-settings__main-page-list-icon"></div>
								<div class="intranet-settings__main-page-list-name">
									${0}
								</div>
							</li>
						</ul>
						<div class="intranet-settings__main-page-button-box">
							${0}
							<div class="intranet-settings__main-page-button-box-right">
								${0}
								${0}
							</div>
						</div>
					</div>
				</div>
			`),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_1"),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_2"),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_3"),babelHelpers.classPrivateFieldLooseBase(this,Nr)[Nr](),babelHelpers.classPrivateFieldLooseBase(this,Ir)[Ir](),babelHelpers.classPrivateFieldLooseBase(this,pr)[pr]())}return babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]}function Hr(){if(!babelHelpers.classPrivateFieldLooseBase(this,er)[er]){var e;const t=babelHelpers.classPrivateFieldLooseBase(this,Xl)[Xl]?F.Tag.render(Il||(Il=_l`<img 
						src="${0}"
						class="intranet-settings__main-page-preview" 
					/>`),babelHelpers.classPrivateFieldLooseBase(this,Xl)[Xl]):"";babelHelpers.classPrivateFieldLooseBase(this,er)[er]=F.Tag.render(Nl||(Nl=_l`
				<div class="intranet-settings__main-page-template --secondary-template">
					<div class="intranet-settings__main-page-preview-box">
						${0}
					</div>
					<div class="intranet-settings__main-page-content">
						<div class="intranet-settings__main-page-title">
							${0}
						</div>
						<div class="intranet-settings__main-page-info-template">
							${0}
						</div>					
						<div class="intranet-settings__main-page-button-box">
							${0}
							<div class="intranet-settings__main-page-button-box-right">
								${0}
								${0}
							</div>
						</div>
					</div>
				</div>			
			`),t,(e=babelHelpers.classPrivateFieldLooseBase(this,$l)[$l])!=null?e:"",babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]?this.getInfoSuccessTemplate():this.getInfoTemplate(),babelHelpers.classPrivateFieldLooseBase(this,Pr)[Pr](),babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]?babelHelpers.classPrivateFieldLooseBase(this,Sr)[Sr]():babelHelpers.classPrivateFieldLooseBase(this,Lr)[Lr](),babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]())}return babelHelpers.classPrivateFieldLooseBase(this,er)[er]}function Br(){if(!babelHelpers.classPrivateFieldLooseBase(this,tr)[tr]){babelHelpers.classPrivateFieldLooseBase(this,tr)[tr]=F.Tag.render(wl||(wl=_l`
				<button class="intranet-settings-btn-settings">
					<div class="ui-icon-set --more"></div>
				</button>
			`))}return babelHelpers.classPrivateFieldLooseBase(this,tr)[tr]}function Ar(){if(!babelHelpers.classPrivateFieldLooseBase(this,sr)[sr]){babelHelpers.classPrivateFieldLooseBase(this,sr)[sr]=F.Tag.render(Fl||(Fl=_l`
			<button class="intranet-settings-btn-settings">
				<div class="ui-icon-set --more"></div>
			</button>`))}return babelHelpers.classPrivateFieldLooseBase(this,sr)[sr]}function yr(){var e;if(!babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]){const e=babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?F.Tag.render(ml||(ml=_l`<span>${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP")):F.Tag.render(fl||(fl=_l`<span class="intranet-settings-mp-popup-item">${0} ${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP"),this.renderLockElement());babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]=new N.Menu({angle:true,animation:"fading-slide",bindElement:babelHelpers.classPrivateFieldLooseBase(this,tr)[tr],className:babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?"":"--disabled",items:[{id:"importPopup",html:e,onclick:babelHelpers.classPrivateFieldLooseBase(this,_r)[_r].bind(this)}],offsetLeft:20,events:{onPopupClose:()=>{},onPopupShow:()=>{}}})}(e=babelHelpers.classPrivateFieldLooseBase(this,ir)[ir])==null?void 0:e.show()}function Or(){var e;if(!babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]){const e=babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?F.Tag.render(Hl||(Hl=_l`<span>${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_EXPORT_POPUP")):F.Tag.render(Bl||(Bl=_l`<span class="intranet-settings-mp-popup-item --disabled">${0} ${0}</span>`),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_EXPORT_POPUP"),this.renderLockElement());babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]=new N.Menu({angle:true,animation:"fading-slide",bindElement:babelHelpers.classPrivateFieldLooseBase(this,sr)[sr],className:babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?"":"--disabled",items:[{id:"exportPopup",html:e,onclick:babelHelpers.classPrivateFieldLooseBase(this,gr)[gr].bind(this)}],offsetLeft:20,events:{onPopupClose:()=>{},onPopupShow:()=>{}}})}(e=babelHelpers.classPrivateFieldLooseBase(this,ar)[ar])==null?void 0:e.show()}function Rr(){if(!babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]){BX.UI.InfoHelper.show("limit_office_vibe");return}if(typeof BX.SidePanel==="undefined"){return}if(typeof BX.SidePanel!=="undefined"&&babelHelpers.classPrivateFieldLooseBase(this,xl)[xl]){const e=()=>{BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldLooseBase(this,xl)[xl],{width:491,allowChangeHistory:false,cacheable:false,data:{rightBoundary:0}})};if(!babelHelpers.classPrivateFieldLooseBase(this,or)[or]){e();return}BX.Runtime.loadExtension("ui.dialogs.messagebox").then((()=>{const t=new BX.UI.Dialogs.MessageBox({message:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_MESSAGE"),title:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_TITLE"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,okCaption:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_OK_BUTTON"),cancelCaption:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_CANCEL_BUTTON"),onOk:()=>{e();return true},onCancel:()=>true});t.show();if(t.popupWindow&&t.popupWindow.popupContainer){t.popupWindow.popupContainer.classList.add("intranet-settings__main-page-popup")}}))}}function Cr(){if(!babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]){BX.UI.InfoHelper.show("limit_office_vibe");return}if(typeof BX.SidePanel==="undefined"){return}if(typeof BX.SidePanel!=="undefined"&&babelHelpers.classPrivateFieldLooseBase(this,jl)[jl]){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldLooseBase(this,jl)[jl],{width:491,allowChangeHistory:false,cacheable:false,data:{rightBoundary:0}})}}function Mr(){if(!babelHelpers.classPrivateFieldLooseBase(this,lr)[lr]){var e;babelHelpers.classPrivateFieldLooseBase(this,lr)[lr]=new N.Popup({titleBar:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_TITLE_MSGVER_1"),content:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_CONTENT"),width:350,closeIcon:true,closeByEsc:true,animation:"fading-slide",buttons:[new g.Button({text:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_BTN_CONFIRM"),color:g.Button.Color.PRIMARY,onclick:()=>{const e=this.getInfoSuccessTemplate();const t=babelHelpers.classPrivateFieldLooseBase(this,er)[er].querySelector(".intranet-settings__main-page-info-template");const s=t.querySelector(".intranet-settings__main-page-info:not(.--success)");F.Dom.replace(s,e);F.ajax.runAction("intranet.mainpage.publish").then((()=>{this.emit("publish");if(babelHelpers.classPrivateFieldLooseBase(this,Ul)[Ul]){babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]=true}}));babelHelpers.classPrivateFieldLooseBase(this,lr)[lr].close();BX.UI.Analytics.sendData({tool:"vibe",category:"vibe",event:"publish_page",c_sub_section:"from_settings",status:"success"})}}),new g.Button({text:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_POPUP_BTN_CANCEL"),color:g.Button.Color.LIGHT_BORDER,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,lr)[lr].close()}})],events:{onClose:()=>{}}});(e=babelHelpers.classPrivateFieldLooseBase(this,lr)[lr])==null?void 0:e.show()}else{var t;(t=babelHelpers.classPrivateFieldLooseBase(this,lr)[lr])==null?void 0:t.show()}}function Dr(){if(!babelHelpers.classPrivateFieldLooseBase(this,rr)[rr]){var e;const t=babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_TITLE"):F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_TITLE_FREE");const s=babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_CONTENT"):F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_CONTENT_FREE");const i=babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_BTN_CONFIRM"):F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_BTN_CONFIRM_FREE");babelHelpers.classPrivateFieldLooseBase(this,rr)[rr]=new N.Popup({titleBar:t,content:s,width:350,closeIcon:true,closeByEsc:true,animation:"fading-slide",buttons:[new g.Button({text:i,color:g.Button.Color.DANGER_DARK,onclick:()=>{const e=this.getInfoTemplate();const t=babelHelpers.classPrivateFieldLooseBase(this,er)[er].querySelector(".intranet-settings__main-page-info-template");const s=t.querySelector(".intranet-settings__main-page-info");F.Dom.replace(s,e);F.ajax.runAction("intranet.mainpage.withdraw").then((()=>{this.emit("withdraw");babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]=false}));babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].close();BX.UI.Analytics.sendData({tool:"vibe",category:"vibe",event:"unpublish_page",c_sub_section:"from_settings"})}}),new g.Button({text:F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_POPUP_BTN_CANCEL"),color:g.Button.Color.LIGHT_BORDER,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].close()}})],events:{onClose:()=>{}}});(e=babelHelpers.classPrivateFieldLooseBase(this,rr)[rr])==null?void 0:e.show()}else{var t;(t=babelHelpers.classPrivateFieldLooseBase(this,rr)[rr])==null?void 0:t.show()}}function Gr(){if(!babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]){return null}if(!babelHelpers.classPrivateFieldLooseBase(this,Wl)[Wl]){const e=F.Tag.render(Al||(Al=_l`			
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-blue">
					${0}
				</button>
			`),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_EDIT"));const t=F.Tag.render(yl||(yl=_l`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-blue --disabled">
					${0}
					${0}
				</button>
			`),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_EDIT"),this.renderLockElement());babelHelpers.classPrivateFieldLooseBase(this,Wl)[Wl]=babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?e:t}return babelHelpers.classPrivateFieldLooseBase(this,Wl)[Wl]}function Vr(){if(!babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]){const e=F.Tag.render(Ol||(Ol=_l`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps
						${0}">
					${0}
				</button>
			`),babelHelpers.classPrivateFieldLooseBase(this,or)[or]?"ui-btn-primary":"--light-blue",F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PUBLIC"));const t=F.Tag.render(Rl||(Rl=_l`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --disabled
						${0}">
					${0}
					${0}
				</button>
			`),babelHelpers.classPrivateFieldLooseBase(this,or)[or]?"ui-btn-primary":"--light-blue",F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PUBLIC"),this.renderLockElement());babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]=babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?e:t}return babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]}function kr(){if(!babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]){babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]=F.Tag.render(Cl||(Cl=_l`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps
						${0}">
					${0}
				</button>
			`),babelHelpers.classPrivateFieldLooseBase(this,or)[or]?"ui-btn-primary":"--light-blue",F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_UNPUBLIC"))}return babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]}function Ur(){if(!babelHelpers.classPrivateFieldLooseBase(this,Kl)[Kl]){return null}if(!babelHelpers.classPrivateFieldLooseBase(this,ql)[ql]){babelHelpers.classPrivateFieldLooseBase(this,ql)[ql]=F.Tag.render(Ml||(Ml=_l`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-gray">
					${0}
				</button>
			`),F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PARTNERS"))}return babelHelpers.classPrivateFieldLooseBase(this,ql)[ql]}function Kr(){if(!babelHelpers.classPrivateFieldLooseBase(this,Vl)[Vl]){return null}if(!babelHelpers.classPrivateFieldLooseBase(this,zl)[zl]){const e=!babelHelpers.classPrivateFieldLooseBase(this,or)[or]?"ui-btn-primary":"--light-blue";const t=F.Tag.render(Dl||(Dl=_l`			
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps ${0}">
					${0}
				</button>
			`),e,F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_MARKET"));const s=F.Tag.render(Gl||(Gl=_l`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps ${0} --disabled">
					${0}
					${0}
				</button>
			`),e,F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_MARKET"),this.renderLockElement());babelHelpers.classPrivateFieldLooseBase(this,zl)[zl]=babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?t:s}return babelHelpers.classPrivateFieldLooseBase(this,zl)[zl]}function xr(){if(typeof BX.SidePanel==="undefined"){return}F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,pr)[pr](),"click",babelHelpers.classPrivateFieldLooseBase(this,hr)[hr].bind(this));F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,vr)[vr](),"click",babelHelpers.classPrivateFieldLooseBase(this,ur)[ur].bind(this));if(babelHelpers.classPrivateFieldLooseBase(this,Nr)[Nr]()){F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Nr)[Nr](),"click",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldLooseBase(this,Vl)[Vl])}else{BX.UI.InfoHelper.show("limit_office_vibe")}BX.UI.Analytics.sendData({tool:"vibe",category:"vibe",event:"open_market",status:babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]?"success":"error_limit"})}))}if(babelHelpers.classPrivateFieldLooseBase(this,Pr)[Pr]()){F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Pr)[Pr](),"click",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldLooseBase(this,kl)[kl],{customLeftBoundary:66,events:{onCloseComplete:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Ul)[Ul]){window.top.location=babelHelpers.classPrivateFieldLooseBase(this,Ul)[Ul]}}}})}else{BX.UI.InfoHelper.show("limit_office_vibe")}}))}if(babelHelpers.classPrivateFieldLooseBase(this,Ir)[Ir]()){F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ir)[Ir](),"click",(()=>{if(!babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl]){return}F.Runtime.loadExtension("ui.feedback.form").then((()=>{babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].title=F.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PARTNERS");BX.UI.Feedback.Form.open(babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl])}))}))}this.subscribe("publish",(()=>{F.Dom.replace(babelHelpers.classPrivateFieldLooseBase(this,Lr)[Lr](),babelHelpers.classPrivateFieldLooseBase(this,Sr)[Sr]())}));this.subscribe("withdraw",(()=>{F.Dom.replace(babelHelpers.classPrivateFieldLooseBase(this,Sr)[Sr](),babelHelpers.classPrivateFieldLooseBase(this,Lr)[Lr]())}));F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Lr)[Lr](),"click",(()=>{if(!babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]){BX.UI.InfoHelper.show("limit_office_vibe");BX.UI.Analytics.sendData({tool:"vibe",category:"vibe",event:"publish_page",c_sub_section:"from_settings",status:"error_limit"});return}babelHelpers.classPrivateFieldLooseBase(this,Tr)[Tr]()}));F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Sr)[Sr](),"click",babelHelpers.classPrivateFieldLooseBase(this,Er)[Er].bind(this))}function jr(){const e=babelHelpers.classPrivateFieldLooseBase(this,nr)[nr];I.EventEmitter.subscribe(I.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onClose",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]!==e){const e=babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]?babelHelpers.classPrivateFieldLooseBase(this,Ul)[Ul]:"/";window.top.location=e}}))}var Xr=babelHelpers.classPrivateFieldLooseKey("type");var $r=babelHelpers.classPrivateFieldLooseKey("extensions");class Yr extends S.BaseSettingsPage{constructor(e,t){super();Object.defineProperty(this,Xr,{writable:true,value:void 0});Object.defineProperty(this,$r,{writable:true,value:[]});babelHelpers.classPrivateFieldLooseBase(this,Xr)[Xr]=e;babelHelpers.classPrivateFieldLooseBase(this,$r)[$r]=t}getType(){return babelHelpers.classPrivateFieldLooseBase(this,Xr)[Xr]}onSuccessDataFetched(e){F.Runtime.loadExtension(babelHelpers.classPrivateFieldLooseBase(this,$r)[$r]).then((t=>{let s;let i=Object.values(t).some((e=>{if(F.Type.isObjectLike(e)){let t=null;if(e.prototype instanceof S.BaseSettingsPage){t=new e}else if(e instanceof S.BaseSettingsPage){t=e}if(t instanceof S.BaseSettingsPage){s=t;return true}}return false}));if(i===false){const e=new I.BaseEvent;i=I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onExternalPageLoaded:"+this.getType(),e).some((e=>{if(e instanceof S.BaseSettingsPage){s=e;return true}return false}))}if(s instanceof S.BaseSettingsPage){this.getParentElement().registerPage(s);s.setData(e.data);this.getParentElement().removeChild(this);if(F.Dom.isShown(this.getPage())){s.getParentElement().show(s.getType())}}else{this.onFailDataFetched("The external page was not found.")}}),this.onFailDataFetched.bind(this))}}var Wr=babelHelpers.classPrivateFieldLooseKey("pages");class qr{constructor(e){Object.defineProperty(this,Wr,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Wr)[Wr]=e}fetchPage(e){return new Promise(((t,s)=>{const i=babelHelpers.classPrivateFieldLooseBase(this,Wr)[Wr].some((i=>{if(e.getType()===i.getType()){F.ajax.runComponentAction("bitrix:intranet.settings","get",{mode:"class",data:{type:e.getType()}}).then(t,s);return true}return false}));if(i!==true){return s({error:"The page was not found in pageManager"})}}))}collectData(){const e={};babelHelpers.classPrivateFieldLooseBase(this,Wr)[Wr].forEach((t=>{if(t.hasData()){e[t.getType()]=this.constructor.getFormData(t.getFormNode())}}));return e}static getFormData(e){return BX.ajax.prepareForm(e).data}}class zr{fetch(e){return new Promise}}var Qr=babelHelpers.classPrivateFieldLooseKey("query");var Zr=babelHelpers.classPrivateFieldLooseKey("minSymbol");var Jr=babelHelpers.classPrivateFieldLooseKey("dataSource");var eo=babelHelpers.classPrivateFieldLooseKey("result");var to=babelHelpers.classPrivateFieldLooseKey("state");class so{constructor(e,t=3){Object.defineProperty(this,Qr,{writable:true,value:void 0});Object.defineProperty(this,Zr,{writable:true,value:void 0});Object.defineProperty(this,Jr,{writable:true,value:void 0});Object.defineProperty(this,eo,{writable:true,value:void 0});Object.defineProperty(this,to,{writable:true,value:void 0});if(!(e instanceof zr)){throw new Error("Unexpected type, expect: DataSource")}babelHelpers.classPrivateFieldLooseBase(this,Jr)[Jr]=e;babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr]=t;babelHelpers.classPrivateFieldLooseBase(this,eo)[eo]=[];babelHelpers.classPrivateFieldLooseBase(this,to)[to]="ready"}find(e){if(e.length<babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr]){return}babelHelpers.classPrivateFieldLooseBase(this,Qr)[Qr]=e;this.changeState(so.STATE_WAIT);babelHelpers.classPrivateFieldLooseBase(this,Jr)[Jr].fetch(babelHelpers.classPrivateFieldLooseBase(this,Qr)[Qr]).then(this.resolve.bind(this),this.reject.bind(this))}changeState(e){if(babelHelpers.classPrivateFieldLooseBase(this,to)[to]===e){return}babelHelpers.classPrivateFieldLooseBase(this,to)[to]=e;I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:searchChangeState",{state:babelHelpers.classPrivateFieldLooseBase(this,to)[to]})}getMinSymbol(){return babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr]}resolve(e){babelHelpers.classPrivateFieldLooseBase(this,eo)[eo]=e.data;this.changeState(babelHelpers.classPrivateFieldLooseBase(this,eo)[eo].length>0?so.STATE_READY:so.STATE_NOT_FOUND)}reject(e){babelHelpers.classPrivateFieldLooseBase(this,eo)[eo]=[];this.changeState(so.STATE_READY)}getResult(){return babelHelpers.classPrivateFieldLooseBase(this,eo)[eo]}getOthers(){return[{link:"/stream/",title:F.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_TEAMWORK")},{link:"/tasks/config/permissions/",title:F.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_TASKS")},{link:"/crm/configs/",title:F.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_CRM")},{link:"/shop/documents/?inventoryManagementSource=inventory",title:F.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_WAREHOUSE")},{link:"/sites/",title:F.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_SITES")},{link:"/company/vis_structure.php",title:F.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_COMPANY")}]}}so.STATE_READY="ready";so.STATE_WAIT="wait";so.STATE_NOT_FOUND="not_found";let io=e=>e,ao,lo,ro,oo,no,co,bo,po,vo,ho,uo,_o,go,To,Eo;var Po=babelHelpers.classPrivateFieldLooseKey("searcher");var Lo=babelHelpers.classPrivateFieldLooseKey("inputNode");var So=babelHelpers.classPrivateFieldLooseKey("iconContainer");var Io=babelHelpers.classPrivateFieldLooseKey("popup");var No=babelHelpers.classPrivateFieldLooseKey("timeoutId");var wo=babelHelpers.classPrivateFieldLooseKey("timeout");var Fo=babelHelpers.classPrivateFieldLooseKey("nav");class mo{constructor(e){Object.defineProperty(this,Po,{writable:true,value:void 0});Object.defineProperty(this,Lo,{writable:true,value:void 0});Object.defineProperty(this,So,{writable:true,value:void 0});Object.defineProperty(this,Io,{writable:true,value:void 0});Object.defineProperty(this,No,{writable:true,value:void 0});Object.defineProperty(this,wo,{writable:true,value:void 0});Object.defineProperty(this,Fo,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Po)[Po]=e.searcher;babelHelpers.classPrivateFieldLooseBase(this,Lo)[Lo]=e.inputNode;babelHelpers.classPrivateFieldLooseBase(this,So)[So]=e.iconContainer;babelHelpers.classPrivateFieldLooseBase(this,wo)[wo]=e.timeout;babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo]=new Bo;babelHelpers.classPrivateFieldLooseBase(this,Io)[Io]=new N.Popup("settings-search-popup",babelHelpers.classPrivateFieldLooseBase(this,Lo)[Lo],{closeByEsc:true,angle:false,overlay:false,width:332,offsetTop:4,background:"#fff",contentBackground:"#fff",contentPadding:0,autoHide:true,borderRadius:6,autoHideHandler:e=>e.target!==babelHelpers.classPrivateFieldLooseBase(this,Lo)[Lo]});babelHelpers.classPrivateFieldLooseBase(this,Io)[Io].setContent(this.renderContent());F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Lo)[Lo],"focus",(()=>{if(!babelHelpers.classPrivateFieldLooseBase(this,Io)[Io].isShown()){babelHelpers.classPrivateFieldLooseBase(this,Io)[Io].show()}}));I.EventEmitter.subscribe("BX.Intranet.Settings:searchChangeState",(e=>{const{state:t}=e.data;babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].clean();babelHelpers.classPrivateFieldLooseBase(this,Io)[Io].setContent(this.renderContent(t))}));F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,So)[So].querySelector("#intranet-settings-icon-delete"),"click",(()=>{F.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,So)[So],"main-ui-show");babelHelpers.classPrivateFieldLooseBase(this,Lo)[Lo].value=""}));F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Lo)[Lo],"keyup",(e=>{if(e.keyCode===37||e.keyCode===39){return}if(e.keyCode===13){babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].current().dispatchEvent(new MouseEvent("click"));babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].unHighlightAll();return}if(e.keyCode===38){babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].prev().highlight();if(!F.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].current())){this.updateScroll(babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].current())}return}if(e.keyCode===40){babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].next().highlight();if(!F.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].current())){this.updateScroll(babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].current())}return}if(this.getQuery().length>0){F.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,So)[So],"main-ui-show")}else{F.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,So)[So],"main-ui-show")}if(!babelHelpers.classPrivateFieldLooseBase(this,Io)[Io].isShown()&&this.getQuery().length>0){babelHelpers.classPrivateFieldLooseBase(this,Io)[Io].show()}this.find()}))}updateScroll(e){const t=e.getBoundingClientRect();const s=babelHelpers.classPrivateFieldLooseBase(this,Io)[Io].getContentContainer().firstElementChild;const i=t.top-s.getBoundingClientRect().top;const a=t.bottom-s.getBoundingClientRect().bottom;const l=10;if(i<0&&a<=0){s.scrollTo(0,i+s.scrollTop-l)}else if(i>=0&&a>0){s.scrollTo(0,a+s.scrollTop+l)}}renderWait(){const e=F.Tag.render(ao||(ao=io`<span class="title-search-waiter-img"></span>`));const t=new w.Loader({target:e,size:20,mode:"inline"});t.show();return F.Tag.render(lo||(lo=io`
			<div class="title-search-waiter">
				${0}
				<span class="title-search-waiter-text">${0}</span>
			</div>
		`),e,F.Loc.getMessage("INTRANET_SETTINGS_TITLE_SEARCHING"))}find(){clearTimeout(babelHelpers.classPrivateFieldLooseBase(this,No)[No]);babelHelpers.classPrivateFieldLooseBase(this,No)[No]=setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,Po)[Po].find(this.getQuery())}),babelHelpers.classPrivateFieldLooseBase(this,wo)[wo])}getQuery(){return BX.util.trim(babelHelpers.classPrivateFieldLooseBase(this,Lo)[Lo].value)}createLinkOption(e){const t=F.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{mouseenter:e=>{babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].unHighlightAll();babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].cursorTo(e.target);Bo.highlight(e.target)},mouseleave:e=>{Bo.unHighlight(e.target)}},attrs:{title:e.title,href:F.Type.isStringFilled(e.url)?e.url:"#",target:"_blank"},children:[F.Tag.render(ro||(ro=io`<span class="search-title-top-item-text"><span>${0}</span></span>`),e.title)]});babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].add(t);return t}createBtnOption(e,t){const s=F.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{click:s=>{I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,"BX.Intranet.SettingsNavigation:onMove",{page:e,fieldName:t.code});babelHelpers.classPrivateFieldLooseBase(this,Lo)[Lo].blur();babelHelpers.classPrivateFieldLooseBase(this,Io)[Io].close();s.preventDefault()},mouseenter:e=>{babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].unHighlightAll();babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].cursorTo(e.target);Bo.highlight(e.target)},mouseleave:e=>{Bo.unHighlight(e.target)}},attrs:{title:t.title,href:"#"},children:[F.Tag.render(oo||(oo=io`<span class="search-title-top-item-text"><span>${0}</span></span>`),t.title)]});babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].add(s);return F.Tag.render(no||(no=io`<div class="search-title-top-item search-title-top-item-js">${0}</div>`),s)}renderOption(e,t){let s;if(e===mo.EXTERNAL_LINK){s=this.createLinkOption(t)}else{s=this.createBtnOption(e,t)}return F.Tag.render(co||(co=io`<div class="search-title-top-item search-title-top-item-js">${0}</div>`),s)}renderGroup(e){const t=F.Tag.render(bo||(bo=io`<div class="search-title-top-list search-title-top-list-js"></div>`));e.options.forEach((s=>{F.Dom.append(this.renderOption(e.page,s),t)}));return F.Tag.render(po||(po=io`
			<div class="search-title-top-block search-title-top-block-sonetgroups">
				<div class="search-title-top-subtitle">
					<div class="search-title-top-subtitle-text">${0}</div>
				</div>
				<div class="search-title-top-list-wrap">
					${0}
				</div>
			</div>
		`),e.title,t)}renderContent(e="ready"){const t=F.Tag.render(vo||(vo=io`<div class="search-title-top-result"></div>`));switch(e){case"ready":F.Dom.append(this.renderSearchResult(babelHelpers.classPrivateFieldLooseBase(this,Po)[Po].getResult()),t);break;case"wait":F.Dom.append(this.renderWait(),t);break;case"not_found":F.Dom.append(this.renderNotFound(),t);break}F.Dom.append(this.renderOthers(babelHelpers.classPrivateFieldLooseBase(this,Po)[Po].getOthers()),t);return t}renderNotFound(){return F.Tag.render(ho||(ho=io`
			<div class="title-search-waiter">
				<span class="title-search-waiter-text">${0}</span>
			</div>
		`),F.Loc.getMessage("INTRANET_SETTINGS_SEARCH_NOT_FOUND"))}renderSearchResult(e){const t=F.Tag.render(uo||(uo=io`<div class="search-title-content-result"></div>`));e.forEach((e=>{F.Dom.append(this.renderGroup(e),t)}));return t}renderOthers(e){const t=F.Tag.render(_o||(_o=io`<div class="search-title-top-list search-title-top-list-js"></div>`));const s=F.Tag.render(go||(go=io`
		<div class="search-title-top-block search-title-top-block-tools">
			<div class="search-title-top-subtitle">
				<div class="search-title-top-subtitle-text">${0}</div>
			</div>
			<div class="search-title-top-list-height-wrap">
					<div class="search-title-top-list-wrap">${0}</div>
				</div>
		</div>
		`),F.Loc.getMessage("INTRANET_SETTINGS_TITLE_SEARCH_IN"),t);e.forEach((e=>{F.Dom.append(this.renderOtherLink(e),t)}));return s}renderOtherLink(e){const t=F.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{mouseenter:e=>{babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].unHighlightAll();babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].cursorTo(e.target);Bo.highlight(e.target)},mouseleave:e=>{Bo.unHighlight(e.target)}},attrs:{title:e.title,href:e.link,target:"blank_"},children:[F.Tag.render(To||(To=io`<span class="search-title-top-item-text"><span>${0}</span></span>`),e.title)]});babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].add(t);return F.Tag.render(Eo||(Eo=io`
		<div class="search-title-top-item search-title-top-item-js">
			${0}
		</div>`),t)}}mo.EXTERNAL_LINK="EXTERNAL_LINKS";var fo=babelHelpers.classPrivateFieldLooseKey("index");var Ho=babelHelpers.classPrivateFieldLooseKey("elementList");class Bo{constructor(e=[]){Object.defineProperty(this,fo,{writable:true,value:null});Object.defineProperty(this,Ho,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho]=e}add(e){babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho].push(e)}clean(){babelHelpers.classPrivateFieldLooseBase(this,fo)[fo]=null;babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho]=[]}next(){if(F.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,fo)[fo])){babelHelpers.classPrivateFieldLooseBase(this,fo)[fo]=0;return this}if(babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho].length-1>babelHelpers.classPrivateFieldLooseBase(this,fo)[fo]){babelHelpers.classPrivateFieldLooseBase(this,fo)[fo]++}return this}current(){if(F.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,fo)[fo])){return null}return babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho][babelHelpers.classPrivateFieldLooseBase(this,fo)[fo]]}prev(){if(F.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,fo)[fo])){babelHelpers.classPrivateFieldLooseBase(this,fo)[fo]=babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho].length-1;return this}if(babelHelpers.classPrivateFieldLooseBase(this,fo)[fo]>0){babelHelpers.classPrivateFieldLooseBase(this,fo)[fo]-=1}return this}highlight(){this.unHighlightAll();if(!F.Dom.hasClass(this.current(),"active")){F.Dom.addClass(this.current(),"active")}return this}unHighlight(){if(F.Dom.hasClass(this.current(),"active")){F.Dom.removeClass(this.current(),"active")}return this}static highlight(e){e.classList.add("active")}static unHighlight(e){e.classList.remove("active")}cursorTo(e){babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho].forEach(((t,s)=>{if(t===e){babelHelpers.classPrivateFieldLooseBase(this,fo)[fo]=s;return}}))}unHighlightAll(){babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho].forEach((e=>{Bo.unHighlight(e)}))}}class Ao extends zr{constructor(){super()}fetch(e){return F.ajax.runComponentAction("bitrix:intranet.settings","search",{mode:"class",data:{query:e}})}}var yo=babelHelpers.classPrivateFieldLooseKey("permission");class Oo{constructor(e=0){Object.defineProperty(this,yo,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,yo)[yo]=e}canRead(){return!!(babelHelpers.classPrivateFieldLooseBase(this,yo)[yo]&Oo.READ)}canEdit(){return!!(babelHelpers.classPrivateFieldLooseBase(this,yo)[yo]&Oo.EDIT)}getPermission(){return babelHelpers.classPrivateFieldLooseBase(this,yo)[yo]}}Oo.READ=1<<0;Oo.EDIT=1<<2;var Ro=babelHelpers.classPrivateFieldLooseKey("basePage");var Co=babelHelpers.classPrivateFieldLooseKey("menuNode");var Mo=babelHelpers.classPrivateFieldLooseKey("settingsNode");var Do=babelHelpers.classPrivateFieldLooseKey("contentNode");var Go=babelHelpers.classPrivateFieldLooseKey("pageManager");var Vo=babelHelpers.classPrivateFieldLooseKey("cancelMessageBox");var ko=babelHelpers.classPrivateFieldLooseKey("analytic");var Uo=babelHelpers.classPrivateFieldLooseKey("navigator");var Ko=babelHelpers.classPrivateFieldLooseKey("permission");var xo=babelHelpers.classPrivateFieldLooseKey("pagesPermission");var jo=babelHelpers.classPrivateFieldLooseKey("extraSettings");var Xo=babelHelpers.classPrivateFieldLooseKey("getPageManager");var $o=babelHelpers.classPrivateFieldLooseKey("onEventFetchPage");var Yo=babelHelpers.classPrivateFieldLooseKey("onSliderCloseHandler");var Wo=babelHelpers.classPrivateFieldLooseKey("reload");var qo=babelHelpers.classPrivateFieldLooseKey("onEventChangeData");var zo=babelHelpers.classPrivateFieldLooseKey("onClickSaveBtn");var Qo=babelHelpers.classPrivateFieldLooseKey("successSaveHandler");var Zo=babelHelpers.classPrivateFieldLooseKey("failSaveHandler");var Jo=babelHelpers.classPrivateFieldLooseKey("prepareErrorCollection");var en=babelHelpers.classPrivateFieldLooseKey("onClickCancelBtn");var tn=babelHelpers.classPrivateFieldLooseKey("hideWaitIcon");var sn=babelHelpers.classPrivateFieldLooseKey("selectPageForError");class an extends S.BaseSettingsElement{constructor(e){super(e);Object.defineProperty(this,sn,{value:_n});Object.defineProperty(this,tn,{value:un});Object.defineProperty(this,en,{value:hn});Object.defineProperty(this,Jo,{value:vn});Object.defineProperty(this,Zo,{value:pn});Object.defineProperty(this,Qo,{value:bn});Object.defineProperty(this,zo,{value:dn});Object.defineProperty(this,qo,{value:cn});Object.defineProperty(this,Wo,{value:nn});Object.defineProperty(this,Yo,{value:on});Object.defineProperty(this,$o,{value:rn});Object.defineProperty(this,Xo,{value:ln});Object.defineProperty(this,Ro,{writable:true,value:void 0});this.isChanged=false;Object.defineProperty(this,Co,{writable:true,value:void 0});Object.defineProperty(this,Mo,{writable:true,value:void 0});Object.defineProperty(this,Do,{writable:true,value:void 0});Object.defineProperty(this,Go,{writable:true,value:void 0});Object.defineProperty(this,Vo,{writable:true,value:void 0});Object.defineProperty(this,ko,{writable:true,value:void 0});Object.defineProperty(this,Uo,{writable:true,value:void 0});Object.defineProperty(this,Ko,{writable:true,value:void 0});Object.defineProperty(this,xo,{writable:true,value:void 0});Object.defineProperty(this,jo,{writable:true,value:{reloadAfterClose:false}});babelHelpers.classPrivateFieldLooseBase(this,ko)[ko]=new B({isAdmin:true,locationName:"settings",isBitrix24:e.isBitrix24===true,analyticContext:F.Type.isStringFilled(e.analyticContext)?e.analyticContext:null});babelHelpers.classPrivateFieldLooseBase(this,ko)[ko].addEventOpenSettings();babelHelpers.classPrivateFieldLooseBase(this,ko)[ko].addEventStartPagePage(e.startPage);this.setEventNamespace("BX.Intranet.Settings");I.EventEmitter.subscribe(I.EventEmitter.GLOBAL_TARGET,"button-click",(e=>{const[t]=e.data;if(t.TYPE==="save"){babelHelpers.classPrivateFieldLooseBase(this,zo)[zo](e)}}));I.EventEmitter.subscribe(I.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onClose",babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo].bind(this));babelHelpers.classPrivateFieldLooseBase(this,Co)[Co]=F.Type.isDomNode(e.menuNode)?e.menuNode:null;babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo]=F.Type.isDomNode(e.settingsNode)?e.settingsNode:null;babelHelpers.classPrivateFieldLooseBase(this,Do)[Do]=F.Type.isDomNode(e.contentNode)?e.contentNode:null;babelHelpers.classPrivateFieldLooseBase(this,Ro)[Ro]=F.Type.isString(e.basePage)?e.basePage:"";babelHelpers.classPrivateFieldLooseBase(this,Ko)[Ko]=e.permission instanceof Oo?e.permission:new Oo;babelHelpers.classPrivateFieldLooseBase(this,xo)[xo]=e.pagesPermission;if(babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo]){babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo].querySelector('.ui-button-panel input[name="cancel"]').addEventListener("click",babelHelpers.classPrivateFieldLooseBase(this,en)[en])}e.pages.concat(Object.values(e.externalPages).map((({type:e,extensions:t})=>new Yr(e,t)))).forEach((t=>this.registerPage(t).expandPage(e.subPages[t.getType()])));const t=BX.UI.DropdownMenuItem.getItemByNode(babelHelpers.classPrivateFieldLooseBase(this,Co)[Co].querySelector('[data-type="tools"]'));if(t.subItems&&t.subItems.length>0){t.hideSubmenu();t.setDefaultToggleButtonName()}babelHelpers.classPrivateFieldLooseBase(this,Uo)[Uo]=new le(this);if(babelHelpers.classPrivateFieldLooseBase(this,Co)[Co]){babelHelpers.classPrivateFieldLooseBase(this,Co)[Co].querySelectorAll("li.ui-sidepanel-menu-item a.ui-sidepanel-menu-link").forEach((e=>{const t=new E.HelpMessage(e.dataset.type+"_help-msg",e,F.Loc.getMessage("INTRANET_SETTINGS_PERMISSION_MSG"));t.getPopup().setWidth(275);const s=this.getNavigator().getPageByType(e.dataset.type);e.addEventListener("click",(i=>{var a;if(s!=null&&(a=s.getPermission())!=null&&a.canRead()){this.show(e.dataset.type)}else{t.show()}}))}))}}registerPage(e){var t;e.setParentElement(this);e.setPermission(new Oo((t=babelHelpers.classPrivateFieldLooseBase(this,xo)[xo][e.getType()])!=null?t:null));e.subscribe("change",babelHelpers.classPrivateFieldLooseBase(this,qo)[qo].bind(this)).subscribe("fetch",babelHelpers.classPrivateFieldLooseBase(this,$o)[$o].bind(this));e.setAnalytic(babelHelpers.classPrivateFieldLooseBase(this,ko)[ko]);return e}getCurrentPage(){return this.getNavigator().getCurrentPage()}getNavigator(){return babelHelpers.classPrivateFieldLooseBase(this,Uo)[Uo]}show(e,t){var s;if(!F.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,Do)[Do])){console.log("Not found settings container");return}if(!babelHelpers.classPrivateFieldLooseBase(this,Ko)[Ko].canRead()){return}const i=this.getNavigator().getPageByType(e);if(this.getCurrentPage()===i){return}this.getNavigator().changePage(i);F.Dom.hide((s=this.getNavigator().getPrevPage())==null?void 0:s.getPage());if(F.Type.isNil(this.getNavigator().getCurrentPage().getPage().parentNode)){F.Dom.append(this.getNavigator().getCurrentPage().getPage(),babelHelpers.classPrivateFieldLooseBase(this,Do)[Do])}else{F.Dom.show(this.getNavigator().getCurrentPage().getPage())}this.activateMenuItem(e);babelHelpers.classPrivateFieldLooseBase(this,ko)[ko].addEventChangePage(e);this.getNavigator().updateAddressBar();I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onAfterShowPage",{source:this,page:i});if(F.Type.isString(t)&&t!==""){I.EventEmitter.subscribeOnce(I.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onPageComplete",(()=>{console.log(t);this.getNavigator().moveTo(i,t)}))}}activateMenuItem(e){const t=BX.UI.DropdownMenuItem.getItemByNode(babelHelpers.classPrivateFieldLooseBase(this,Co)[Co].querySelector(`a.ui-sidepanel-menu-link[data-type="${e}"]`));t&&t.setActiveHandler()}}function ln(){if(!babelHelpers.classPrivateFieldLooseBase(this,Go)[Go]){babelHelpers.classPrivateFieldLooseBase(this,Go)[Go]=new qr(this.getChildrenElements())}return babelHelpers.classPrivateFieldLooseBase(this,Go)[Go]}function rn(e){return babelHelpers.classPrivateFieldLooseBase(this,Xo)[Xo]().fetchPage(e.getTarget())}function on(e){var t;const[s]=e.getCompatData();if(babelHelpers.classPrivateFieldLooseBase(this,Vo)[Vo]instanceof L.MessageBox){s.denyAction();return false}if(this.isChanged&&((t=s.slider.getData())==null?void 0:t.get("ignoreChanges"))!==true){s.denyAction();babelHelpers.classPrivateFieldLooseBase(this,Vo)[Vo]=L.MessageBox.create({message:F.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DESC"),modal:true,buttons:[new BX.UI.Button({text:F.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_OK"),color:BX.UI.Button.Color.SUCCESS,events:{click:()=>{I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onCancel",{});s.slider.getData().set("ignoreChanges",true);this.isChanged=false;BX.UI.ButtonPanel.hide();babelHelpers.classPrivateFieldLooseBase(this,Vo)[Vo].close();babelHelpers.classPrivateFieldLooseBase(this,Vo)[Vo]=null;s.slider.close(false,(()=>{s.slider.destroy()}));if(babelHelpers.classPrivateFieldLooseBase(this,Ro)[Ro].includes("/configs/")){babelHelpers.classPrivateFieldLooseBase(this,Wo)[Wo]("/index.php")}}}}),new BX.UI.CancelButton({text:F.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_CANCEL"),events:{click:()=>{babelHelpers.classPrivateFieldLooseBase(this,Vo)[Vo].close();babelHelpers.classPrivateFieldLooseBase(this,Vo)[Vo]=null}}})]});return babelHelpers.classPrivateFieldLooseBase(this,Vo)[Vo].show()}if(babelHelpers.classPrivateFieldLooseBase(this,Ro)[Ro].includes("/configs/")||babelHelpers.classPrivateFieldLooseBase(this,jo)[jo].reloadAfterClose===true){babelHelpers.classPrivateFieldLooseBase(this,Wo)[Wo]("/index.php")}}function nn(e=null){const t=document.querySelector("#ui-sidepanel-wrapper-loader");if(t){t.style.display=""}if(F.Type.isString(e)){top.window.location.href=e}else{top.window.location.href=babelHelpers.classPrivateFieldLooseBase(this,Ro)[Ro]}}function cn(e){if(!babelHelpers.classPrivateFieldLooseBase(this,Ko)[Ko].canEdit()){return}this.isChanged=true;BX.UI.ButtonPanel.show()}function dn(e){let t=babelHelpers.classPrivateFieldLooseBase(this,Xo)[Xo]().collectData();I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onBeforeSave",{data:t});babelHelpers.classPrivateFieldLooseBase(this,ko)[ko].send();F.ajax.runComponentAction("bitrix:intranet.settings","set",{mode:"class",data:F.Http.Data.convertObjectToFormData(t)}).then(babelHelpers.classPrivateFieldLooseBase(this,Qo)[Qo].bind(this),babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo].bind(this))}function bn(e){babelHelpers.classPrivateFieldLooseBase(this,jo)[jo].reloadAfterClose=true;this.isChanged=false;babelHelpers.classPrivateFieldLooseBase(this,tn)[tn]();BX.UI.ButtonPanel.hide();I.EventEmitter.emit(I.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onSuccessSave",babelHelpers.classPrivateFieldLooseBase(this,jo)[jo])}function pn(e){let t=babelHelpers.classPrivateFieldLooseBase(this,Jo)[Jo](e.errors);babelHelpers.classPrivateFieldLooseBase(this,tn)[tn]();I.EventEmitter.emit("BX.UI.FormElement.Field:onFailedSave",{errors:t});let s=babelHelpers.classPrivateFieldLooseBase(this,sn)[sn](t);this.show(s)}function vn(e){let t={};for(let a of e){var s,i;let e=(s=a.customData)==null?void 0:s.page;let l=(i=a.customData)==null?void 0:i.field;if(F.Type.isNil(e)||F.Type.isNil(l)){S.ErrorCollection.showSystemError(F.Loc.getMessage("INTRANET_SETTINGS_ERROR_FETCH_DATA"));break}if(F.Type.isNil(t[e])){t[e]={}}if(F.Type.isNil(t[e][l])){t[e][l]=[]}t[e][l].push(a.message)}return t}function hn(e){top.BX.SidePanel.Instance.close()}function un(){let e=document.querySelector("#intranet-settings-page #ui-button-panel-save");F.Dom.removeClass(e,"ui-btn-wait")}function _n(e){for(let t in e){return t}}e.Settings=an;e.ToolsPage=Se;e.EmployeePage=Ce;e.PortalPage=Ks;e.MainpagePage=mr;e.CommunicationPage=Ut;e.RequisitePage=At;e.ConfigurationPage=ji;e.SchedulePage=ra;e.GdprPage=ha;e.SecurityPage=qa;e.Renderer=mo;e.Searcher=so;e.ServerDataSource=Ao;e.Permission=Oo})(this.BX.Intranet=this.BX.Intranet||{},BX.UI.Analytics,BX.UI.DragAndDrop,BX.UI,BX,BX.UI.Uploader,BX.UI,BX.Intranet.Bitrix24.ThemePicker,BX,BX.UI,BX,BX,BX,BX,BX.UI.FormElements,BX.UI,BX.Intranet.NotifyBanner,BX.UI,BX,BX.UI,BX,BX.UI.Dialogs,BX.UI.FormElements,BX.Event,BX.Main,BX,BX);
//# sourceMappingURL=script.map.js