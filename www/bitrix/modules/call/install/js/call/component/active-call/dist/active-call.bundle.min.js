this.BX=this.BX||{};this.BX.Call=this.BX.Call||{};(function(t,e,i,a,n,l,c,s,o,r,C){"use strict";const d={name:"ActiveCall",components:{ChatAvatar:C.ChatAvatar,ChatTitle:o.ChatTitle,ChatButton:r.ChatButton},props:{item:{type:Object,required:true}},emits:["click"],computed:{AvatarSize:()=>C.AvatarSize,ButtonSize:()=>r.ButtonSize,ButtonColor:()=>r.ButtonColor,ButtonIcon:()=>r.ButtonIcon,activeCall(){return this.item},dialog(){return this.$store.getters["chats/get"](this.activeCall.dialogId,true)},isConference(){return this.dialog.type===s.ChatType.videoconf},preparedName(){return e.Text.decode(this.activeCall.name)},anotherDeviceColorScheme(){return{backgroundColor:"transparent",borderColor:"#bbde4d",iconColor:"#525c69",textColor:"#525c69",hoverColor:"transparent"}},isTabWithActiveCall(){return this.$store.getters["recent/calls/hasActiveCall"]()&&Boolean(this.getCallManager().hasCurrentCall())},hasJoined(){return this.activeCall.state===s.RecentCallStatus.joined}},methods:{async onJoinClick(){i.EventEmitter.emit(s.EventType.call.onJoinFromRecentItem);if(this.isConference){l.Analytics.getInstance().onJoinConferenceClick({callId:this.activeCall.call.id});const t=await a.ConferenceChannel.getInstance().sendRequest(this.dialog.public.code);if(t.some((t=>t))){return}c.Messenger.openConference({code:this.dialog.public.code});return}const t=await this.getCallManager().sendBroadcastRequest(this.activeCall.call.uuid);if(t.some((t=>t))){return}this.getCallManager().joinCall(this.activeCall.call.id,this.activeCall.call.uuid,this.activeCall.dialogId)},onBackToCallClick(){if(this.isConference){a.ConferenceChannel.getInstance().sendRequest(this.dialog.public.code);return}this.getCallManager().sendBroadcastRequest(this.activeCall.call.uuid)},onLeaveCallClick(){this.getCallManager().leaveCurrentCall()},onClick(t){const e=this.$store.getters["recent/get"](this.activeCall.dialogId);if(!e){return}this.$emit("click",{item:e,$event:t})},returnToCall(){if(this.activeCall.state!==s.RecentCallStatus.joined){return}this.getCallManager().unfoldCurrentCall()},getCallManager(){return n.CallManager.getInstance()},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div :data-id="activeCall.dialogId" class="bx-im-list-recent-item__wrap bx-im-list-recent-active-call-item__wrap">\n\t\t\t<div @click="onClick" class="bx-im-list-recent-item__container bx-im-list-recent-active-call__container">\n\t\t\t\t<div class="bx-im-list-recent-item__avatar_container">\n\t\t\t\t\t<ChatAvatar \n\t\t\t\t\t\t:avatarDialogId="activeCall.dialogId" \n\t\t\t\t\t\t:contextDialogId="activeCall.dialogId" \n\t\t\t\t\t\t:size="AvatarSize.XL" \n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-list-recent-item__content_container">\n\t\t\t\t\t<div class="bx-im-list-recent-active-call__title_container">\n\t\t\t\t\t\t<ChatTitle :text="preparedName" />\n\t\t\t\t\t\t<div class="bx-im-list-recent-active-call__title_icon"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="!hasJoined" class="bx-im-list-recent-active-call__actions_container">\n\t\t\t\t\t\t<div class="bx-im-list-recent-active-call__actions_item --join">\n\t\t\t\t\t\t\t<ChatButton @click.stop="onJoinClick" :size="ButtonSize.M" :color="ButtonColor.Success" :isRounded="true" :text="loc('CALL_LIST_RECENT_ACTIVE_CALL_JOIN')" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else-if="hasJoined && isTabWithActiveCall" class="bx-im-list-recent-active-call__actions_container">\n\t\t\t\t\t\t<div class="bx-im-list-recent-active-call__actions_item --return">\n\t\t\t\t\t\t\t<ChatButton @click.stop="returnToCall" :size="ButtonSize.M" :color="ButtonColor.Success" :isRounded="true" :text="loc('CALL_LIST_RECENT_ACTIVE_CALL_RETURN')" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else-if="hasJoined && !isTabWithActiveCall" class="bx-im-list-recent-active-call__actions_container">\n\t\t\t\t\t\t<div class="bx-im-list-recent-active-call__actions_item --another-device">\n\t\t\t\t\t\t\t<ChatButton :size="ButtonSize.M" @click.stop="onBackToCallClick" :customColorScheme="anotherDeviceColorScheme" :isRounded="true" :text="loc('CALL_LIST_RECENT_ACTIVE_CALL_ANOTHER_DEVICE')" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};t.ActiveCall=d})(this.BX.Call.Component=this.BX.Call.Component||{},BX,BX.Event,BX.Messenger.Application,BX.Call.Lib,BX.Call.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Const,BX.Messenger.v2.Component.Elements,BX.Messenger.v2.Component.Elements,BX.Messenger.v2.Component.Elements);
//# sourceMappingURL=active-call.bundle.map.js