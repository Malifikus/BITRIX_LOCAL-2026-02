this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};this.BX.Crm.Grid=this.BX.Crm.Grid||{};(function(e,t){"use strict";var r,i,n;function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function t(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function e(t,r,i){return t[r]=i}}function u(e,t,r,n){var a=t&&t.prototype instanceof p?t:p,l=Object.create(a.prototype),s=new x(n||[]);return i(l,"_invoke",{value:H(e,r,s)}),l}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function p(){}function f(){}function v(){}var b={};c(b,l,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(L([])));g&&g!==t&&r.call(g,l)&&(b=g);var m=v.prototype=p.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function F(e,t){function n(i,a,l,s){var o=h(e[i],e,a);if("throw"!==o.type){var c=o.arg,u=c.value;return u&&"object"==babelHelpers["typeof"](u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):t.resolve(u).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,s)}))}s(o.arg)}var a;i(this,"_invoke",{value:function e(r,i){function l(){return new t((function(e,t){n(r,i,e,t)}))}return a=a?a.then(l,l):l()}})}function H(e,t,r){var i="suspendedStart";return function(n,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===n)throw a;return k()}for(r.method=n,r.arg=a;;){var l=r.delegate;if(l){var s=P(l,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var o=h(e,t,r);if("normal"===o.type){if(i=r.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:r.done}}"throw"===o.type&&(i="completed",r.method="throw",r.arg=o.arg)}}}function P(e,t){var r=t.method,i=e.iterator[r];if(undefined===i)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=undefined,P(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var n=h(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function G(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(G,this),this.reset(!0)}function L(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:undefined,done:!0}}return f.prototype=v,i(m,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:f,configurable:!0}),f.displayName=c(v,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(F.prototype),c(F.prototype,s,(function(){return this})),e.AsyncIterator=F,e.async=function(t,r,i,n,a){void 0===a&&(a=Promise);var l=new F(u(t,r,i,n),a);return e.isGeneratorFunction(r)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(m),c(m,o,"Generator"),c(m,l,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=L,x.prototype={constructor:x,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var i=this;function n(e,r){return s.type="throw",s.arg=t,i.next=e,r&&(i.method="next",i.arg=undefined),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],s=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var o=r.call(l,"catchLoc"),c=r.call(l,"finallyLoc");if(o&&c){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(o){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function e(t,i){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===t||"continue"===t)&&l.tryLoc<=i&&i<=l.finallyLoc&&(l=null);var s=l?l.completion:{};return s.type=t,s.arg=i,l?(this.method="next",this.next=l.finallyLoc,d):this.complete(s)},complete:function e(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),d}},catch:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var a=n.arg;E(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,r,i){return this.delegate={iterator:L(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=undefined),d}},e}function l(e,t){o(e,t);t.add(e)}function s(e,t,r){o(e,t);t.set(e,r)}function o(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function c(e,t,r){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return r}var u=new WeakMap;var h=new WeakMap;var d=new WeakMap;var p=new WeakMap;var f=new WeakMap;var v=new WeakMap;var b=new WeakMap;var y=new WeakMap;var g=new WeakMap;var m=new WeakMap;var w=new WeakSet;var F=new WeakSet;var H=new WeakSet;var P=new WeakSet;var G=new WeakSet;var E=new WeakSet;var x=new WeakSet;var L=function(){function e(r){var i,n,a,o;babelHelpers.classCallCheck(this,e);l(this,x);l(this,E);l(this,G);l(this,P);l(this,H);l(this,F);l(this,w);s(this,u,{writable:true,value:void 0});s(this,h,{writable:true,value:void 0});s(this,d,{writable:true,value:void 0});s(this,p,{writable:true,value:void 0});s(this,f,{writable:true,value:void 0});s(this,v,{writable:true,value:void 0});s(this,b,{writable:true,value:void 0});s(this,y,{writable:true,value:void 0});s(this,g,{writable:true,value:void 0});s(this,m,{writable:true,value:void 0});var c=document.getElementById(r.rootNodeId);if(!c){throw new Error('Root node with id "'.concat(r.rootNodeId,'" not found.'))}babelHelpers.classPrivateFieldSet(this,m,c);babelHelpers.classPrivateFieldSet(this,u,r.id);babelHelpers.classPrivateFieldSet(this,h,r.name);babelHelpers.classPrivateFieldSet(this,d,r.photoUrl);babelHelpers.classPrivateFieldSet(this,p,r.isSelected);babelHelpers.classPrivateFieldSet(this,f,r.filterFieldId);babelHelpers.classPrivateFieldSet(this,v,r.isSingleUserColumn);babelHelpers.classPrivateFieldSet(this,y,(i={},babelHelpers.defineProperty(i,r.filterFieldId,[r.id]),babelHelpers.defineProperty(i,"".concat(r.filterFieldId,"_label"),[r.name]),i));babelHelpers.classPrivateFieldSet(this,g,(n=(a=BX.Main)===null||a===void 0?void 0:(o=a.filterManager)===null||o===void 0?void 0:o.getById(r.gridId))!==null&&n!==void 0?n:null);babelHelpers.classPrivateFieldSet(this,b,!babelHelpers.classPrivateFieldGet(this,v)||t.Type.isNull(babelHelpers.classPrivateFieldGet(this,g)))}babelHelpers.createClass(e,[{key:"render",value:function e(){var n=babelHelpers.classPrivateFieldGet(this,d)===""?"":"background-image: url(".concat(babelHelpers.classPrivateFieldGet(this,d),");");var a=t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<span class="crm-grid-user-avatar ui-icon ui-icon-common-user">\n\t\t\t\t<i style="','"></i>\n\t\t\t</span>\n\t\t\t<span class="crm-grid-username-inner">','</span>\n\t\t\t<span class="crm-grid-filter-remove"></span>\n\t\t'])),n,babelHelpers.classPrivateFieldGet(this,h));var l=babelHelpers.classPrivateFieldGet(this,p)?"crm-grid-username crm-grid-filter-active":"crm-grid-username";if(babelHelpers.classPrivateFieldGet(this,b)){l="crm-grid-username--disabled"}var s=t.Tag.render(i||(i=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<a\n\t\t\t\tclass="','"\n\t\t\t\thref=""\n\t\t\t\tbx-tooltip-user-id="','"\n\t\t\t\tbx-tooltip-context="b24"\n\t\t\t>\n\t\t\t\t',"\n\t\t\t</a>\n\t\t"])),l,babelHelpers.classPrivateFieldGet(this,u),a);t.Event.bind(s,"click",c(this,w,k).bind(this));t.Dom.append(s,babelHelpers.classPrivateFieldGet(this,m))}}]);return e}();function k(e){e.preventDefault();e.stopPropagation();if(babelHelpers.classPrivateFieldGet(this,b)){return}c(this,F,S).call(this)}function S(){if(!babelHelpers.classPrivateFieldGet(this,g)){console.log("BX.Main.filterManager not initialized");return}if(babelHelpers.classPrivateFieldGet(this,p)){c(this,H,T).call(this)}else{c(this,G,O).call(this)}}function T(){var e=c(this,P,M).call(this);babelHelpers.classPrivateFieldGet(this,g).getApi().setFields(e);babelHelpers.classPrivateFieldGet(this,g).getSearch().apply()}function M(){var e=this;var r=babelHelpers.classPrivateFieldGet(this,y);var i=babelHelpers.classPrivateFieldGet(this,g).getFilterFieldsValues();Object.entries(i).forEach((function(n){var a=babelHelpers.slicedToArray(n,2),l=a[0],s=a[1];if(t.Type.isArray(s)&&l in r){if(babelHelpers.classPrivateFieldGet(e,v)){i[l]=[]}else{var o=s.indexOf(r[l][0].toString());i[l].splice(o,1)}}}));return i}function O(){return W.apply(this,arguments)}function W(){W=babelHelpers.asyncToGenerator(a().mark((function e(){var t;return a().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:t=c(this,E,j).call(this);babelHelpers.classPrivateFieldGet(this,g).showGridAnimation();r.next=4;return c(this,x,_).call(this);case 4:babelHelpers.classPrivateFieldGet(this,g).getApi().extendFilter(t);case 5:case"end":return r.stop()}}),e,this)})));return W.apply(this,arguments)}function j(){var e=this;var r=babelHelpers.classPrivateFieldGet(this,y);var i=babelHelpers.classPrivateFieldGet(this,g).getFilterFieldsValues();Object.entries(babelHelpers.classPrivateFieldGet(this,y)).forEach((function(n){var a=babelHelpers.slicedToArray(n,2),l=a[0],s=a[1];var o=i[l];if(t.Type.isArray(o)&&t.Type.isArray(s)){if(babelHelpers.classPrivateFieldGet(e,v)){r[l]=s}else{s.forEach((function(e){if(!o.includes(e)){o.push(e);r[l]=o}}))}}}));return r}function _(){return B.apply(this,arguments)}function B(){B=babelHelpers.asyncToGenerator(a().mark((function e(){var r=this;var i,l,s,o,c,u;return a().wrap((function e(a){while(1)switch(a.prev=a.next){case 0:i=babelHelpers.classPrivateFieldGet(this,g).getPreset().getFields();l=[];i.forEach((function(e){l.push(e.dataset.name)}));s=l.slice(babelHelpers.classPrivateFieldGet(this,g).params.FIELDS);s.push(babelHelpers.classPrivateFieldGet(this,f));a.next=7;return babelHelpers.classPrivateFieldGet(this,g).fetchFields([babelHelpers.classPrivateFieldGet(this,f)],l);case 7:o=a.sent;o.forEach((function(e){return babelHelpers.classPrivateFieldGet(r,g).params.FIELDS.push(e)}));c=s.filter((function(e){return!l.includes(e)}));u=true;c.forEach((function(e){var i=o.find((function(t){return t.NAME===e}));if(i){babelHelpers.classPrivateFieldGet(r,g).getPreset().addField(i,u);if(t.Type.isString(i.HTML)){var a=t.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(["<div></div>"])));t.Dom.append(babelHelpers.classPrivateFieldGet(r,g).getHiddenElement(),a);t.html(a,i.HTML)}}}));babelHelpers.classPrivateFieldGet(this,g).saveFieldsSort();case 13:case"end":return a.stop()}}),e,this)})));return B.apply(this,arguments)}e.ClickableUser=L})(this.BX.Crm.Grid.Field=this.BX.Crm.Grid.Field||{},BX);
//# sourceMappingURL=clickable-user.bundle.map.js