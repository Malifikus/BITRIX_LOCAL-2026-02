this.BX=this.BX||{};(function(e,s,t,a,i,l,r,o,n,p,d,c){"use strict";let b=e=>e,h,u,v,m,P;var y=babelHelpers.classPrivateFieldLooseKey("pausePlayerWidth");var L=babelHelpers.classPrivateFieldLooseKey("scale");var B=babelHelpers.classPrivateFieldLooseKey("videos");var g=babelHelpers.classPrivateFieldLooseKey("loop");var H=babelHelpers.classPrivateFieldLooseKey("autoplay");var f=babelHelpers.classPrivateFieldLooseKey("muted");var F=babelHelpers.classPrivateFieldLooseKey("content");var k=babelHelpers.classPrivateFieldLooseKey("videoNode");var _=babelHelpers.classPrivateFieldLooseKey("playerNode");var T=babelHelpers.classPrivateFieldLooseKey("progressBar");var w=babelHelpers.classPrivateFieldLooseKey("barPadding");var C=babelHelpers.classPrivateFieldLooseKey("posterUrl");var x=babelHelpers.classPrivateFieldLooseKey("loader");var D=babelHelpers.classPrivateFieldLooseKey("currentPlayState");var O=babelHelpers.classPrivateFieldLooseKey("playButton");var $=babelHelpers.classPrivateFieldLooseKey("stopButton");var K=babelHelpers.classPrivateFieldLooseKey("wrapper");var j=babelHelpers.classPrivateFieldLooseKey("hasAutoPlayed");var I=babelHelpers.classPrivateFieldLooseKey("analyticsCallback");var S=babelHelpers.classPrivateFieldLooseKey("onInitVideoMetadata");var N=babelHelpers.classPrivateFieldLooseKey("onTick");var A=babelHelpers.classPrivateFieldLooseKey("onClickPlayer");var E=babelHelpers.classPrivateFieldLooseKey("onClickStopButton");var W=babelHelpers.classPrivateFieldLooseKey("onVideoEnded");var X=babelHelpers.classPrivateFieldLooseKey("scaleTo");var U=babelHelpers.classPrivateFieldLooseKey("onPause");var M=babelHelpers.classPrivateFieldLooseKey("onPlay");class R{constructor(e){var s;Object.defineProperty(this,M,{value:Z});Object.defineProperty(this,U,{value:Q});Object.defineProperty(this,X,{value:J});Object.defineProperty(this,W,{value:V});Object.defineProperty(this,E,{value:q});Object.defineProperty(this,A,{value:G});Object.defineProperty(this,N,{value:Y});Object.defineProperty(this,S,{value:z});Object.defineProperty(this,y,{writable:true,value:void 0});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,B,{writable:true,value:void 0});Object.defineProperty(this,g,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,f,{writable:true,value:void 0});Object.defineProperty(this,F,{writable:true,value:void 0});Object.defineProperty(this,k,{writable:true,value:void 0});Object.defineProperty(this,_,{writable:true,value:void 0});Object.defineProperty(this,T,{writable:true,value:void 0});Object.defineProperty(this,w,{writable:true,value:3});Object.defineProperty(this,C,{writable:true,value:void 0});Object.defineProperty(this,x,{writable:true,value:void 0});Object.defineProperty(this,D,{writable:true,value:R.PLAY_STATE_BACKGROUND});Object.defineProperty(this,O,{writable:true,value:void 0});Object.defineProperty(this,$,{writable:true,value:void 0});Object.defineProperty(this,K,{writable:true,value:void 0});Object.defineProperty(this,j,{writable:true,value:false});Object.defineProperty(this,I,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,K)[K]=e.wrapper;babelHelpers.classPrivateFieldLooseBase(this,y)[y]=(s=e.width)!=null?s:86;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=p.Type.isNumber(e.scale)?e.scale:1;babelHelpers.classPrivateFieldLooseBase(this,B)[B]=p.Type.isArrayFilled(e.videos)?e.videos:[];babelHelpers.classPrivateFieldLooseBase(this,g)[g]=p.Type.isBoolean(e.loop)?e.loop:true;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=p.Type.isBoolean(e.autoplay)?e.autoplay:true;babelHelpers.classPrivateFieldLooseBase(this,f)[f]=p.Type.isBoolean(e.muted)?e.muted:true;babelHelpers.classPrivateFieldLooseBase(this,C)[C]=e.posterUrl;babelHelpers.classPrivateFieldLooseBase(this,I)[I]=p.Type.isFunction(e.analyticsCallback)?e.analyticsCallback:null;babelHelpers.classPrivateFieldLooseBase(this,_)[_]=p.Tag.render(h||(h=b`<div class="ui-popupcomponentmaker__round-player"></div>`));babelHelpers.classPrivateFieldLooseBase(this,O)[O]=p.Tag.render(u||(u=b`<div class="ui-popupcomponentmaker__round-player-btn"></div>`));babelHelpers.classPrivateFieldLooseBase(this,$)[$]=p.Tag.render(v||(v=b`<div class="ui-popupcomponentmaker__round-player-btn --stop-btn"></div>`));let a="";if(p.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,C)[C])){babelHelpers.classPrivateFieldLooseBase(this,_)[_].style.backgroundImage='url("'+p.Text.encode(babelHelpers.classPrivateFieldLooseBase(this,C)[C])+'")';a='poster="'+p.Text.encode(babelHelpers.classPrivateFieldLooseBase(this,C)[C])+'"'}const i=babelHelpers.classPrivateFieldLooseBase(this,H)[H]?"autoplay":"";const l=babelHelpers.classPrivateFieldLooseBase(this,f)[f]?"muted":"";babelHelpers.classPrivateFieldLooseBase(this,k)[k]=p.Tag.render(m||(m=b`<video ${0} ${0} ${0}></video>`),a,i,l);babelHelpers.classPrivateFieldLooseBase(this,k)[k].muted=babelHelpers.classPrivateFieldLooseBase(this,f)[f];babelHelpers.classPrivateFieldLooseBase(this,k)[k].autoplay=babelHelpers.classPrivateFieldLooseBase(this,H)[H];babelHelpers.classPrivateFieldLooseBase(this,x)[x]=new t.Loader({size:40});babelHelpers.classPrivateFieldLooseBase(this,_)[_].style.width=babelHelpers.classPrivateFieldLooseBase(this,y)[y]+"px";babelHelpers.classPrivateFieldLooseBase(this,k)[k].addEventListener("timeupdate",babelHelpers.classPrivateFieldLooseBase(this,N)[N].bind(this));babelHelpers.classPrivateFieldLooseBase(this,k)[k].addEventListener("loadedmetadata",babelHelpers.classPrivateFieldLooseBase(this,S)[S].bind(this));babelHelpers.classPrivateFieldLooseBase(this,_)[_].addEventListener("click",babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this));babelHelpers.classPrivateFieldLooseBase(this,k)[k].addEventListener("ended",babelHelpers.classPrivateFieldLooseBase(this,W)[W].bind(this));babelHelpers.classPrivateFieldLooseBase(this,k)[k].addEventListener("play",babelHelpers.classPrivateFieldLooseBase(this,M)[M].bind(this));babelHelpers.classPrivateFieldLooseBase(this,k)[k].addEventListener("pause",babelHelpers.classPrivateFieldLooseBase(this,U)[U].bind(this));babelHelpers.classPrivateFieldLooseBase(this,O)[O].addEventListener("click",babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this));babelHelpers.classPrivateFieldLooseBase(this,$)[$].addEventListener("click",babelHelpers.classPrivateFieldLooseBase(this,E)[E].bind(this));babelHelpers.classPrivateFieldLooseBase(this,k)[k].addEventListener("canplay",(()=>{babelHelpers.classPrivateFieldLooseBase(this,x)[x].hide()}));babelHelpers.classPrivateFieldLooseBase(this,k)[k].addEventListener("waiting",(()=>{babelHelpers.classPrivateFieldLooseBase(this,x)[x].show(babelHelpers.classPrivateFieldLooseBase(this,_)[_])}))}render(){if(babelHelpers.classPrivateFieldLooseBase(this,F)[F]){return babelHelpers.classPrivateFieldLooseBase(this,F)[F]}babelHelpers.classPrivateFieldLooseBase(this,B)[B].forEach((e=>{p.Dom.append(p.Tag.render(P||(P=b`<source src="${0}" type="${0}">`),e.url,e.type),babelHelpers.classPrivateFieldLooseBase(this,k)[k])}));p.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,k)[k],babelHelpers.classPrivateFieldLooseBase(this,_)[_]);p.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,O)[O],babelHelpers.classPrivateFieldLooseBase(this,K)[K]);p.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,$)[$],babelHelpers.classPrivateFieldLooseBase(this,K)[K]);p.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,_)[_],babelHelpers.classPrivateFieldLooseBase(this,K)[K]);babelHelpers.classPrivateFieldLooseBase(this,F)[F]=babelHelpers.classPrivateFieldLooseBase(this,K)[K];return babelHelpers.classPrivateFieldLooseBase(this,F)[F]}renderTo(e){p.Dom.append(e,this.render());return e}play(){babelHelpers.classPrivateFieldLooseBase(this,k)[k].play();p.Dom.removeClass(this.render(),"--stop")}setMute(e){babelHelpers.classPrivateFieldLooseBase(this,k)[k].muted=e}getPlayState(){return babelHelpers.classPrivateFieldLooseBase(this,D)[D]}pause(){babelHelpers.classPrivateFieldLooseBase(this,k)[k].pause()}stop(){this.pause();babelHelpers.classPrivateFieldLooseBase(this,D)[D]=R.PLAY_STATE_BACKGROUND;babelHelpers.classPrivateFieldLooseBase(this,k)[k].currentTime=0;p.Dom.addClass(this.render(),"--stop")}userPlay(){this.stop();babelHelpers.classPrivateFieldLooseBase(this,D)[D]=R.PLAY_STATE_USER;babelHelpers.classPrivateFieldLooseBase(this,T)[T].setValue(0);p.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,T)[T].getContainer());babelHelpers.classPrivateFieldLooseBase(this,T)[T].renderTo(babelHelpers.classPrivateFieldLooseBase(this,_)[_]);this.setMute(false);this.play()}}function z(e){babelHelpers.classPrivateFieldLooseBase(this,T)[T]=new a.ProgressRound({width:babelHelpers.classPrivateFieldLooseBase(this,y)[y]-2*babelHelpers.classPrivateFieldLooseBase(this,w)[w],lineSize:2,maxValue:babelHelpers.classPrivateFieldLooseBase(this,k)[k].duration,value:babelHelpers.classPrivateFieldLooseBase(this,k)[k].currentTime,colorBar:"#fff",colorTrack:"rgba(0, 0, 0, 0)"});if(babelHelpers.classPrivateFieldLooseBase(this,H)[H]){this.play()}}function Y(){babelHelpers.classPrivateFieldLooseBase(this,T)[T].update(babelHelpers.classPrivateFieldLooseBase(this,k)[k].currentTime)}function G(){if(babelHelpers.classPrivateFieldLooseBase(this,D)[D]===R.PLAY_STATE_BACKGROUND){this.userPlay();p.Dom.removeClass(this.render(),"--stop")}else{babelHelpers.classPrivateFieldLooseBase(this,k)[k].paused?this.play():this.pause()}if(babelHelpers.classPrivateFieldLooseBase(this,I)[I]){babelHelpers.classPrivateFieldLooseBase(this,I)[I]("click-player")}}function q(){if(babelHelpers.classPrivateFieldLooseBase(this,I)[I]){babelHelpers.classPrivateFieldLooseBase(this,I)[I]("click-player")}this.stop()}function V(){if(babelHelpers.classPrivateFieldLooseBase(this,I)[I]&&(!babelHelpers.classPrivateFieldLooseBase(this,k)[k].muted||!babelHelpers.classPrivateFieldLooseBase(this,j)[j])){babelHelpers.classPrivateFieldLooseBase(this,I)[I]("video_finished",`isMuted_${babelHelpers.classPrivateFieldLooseBase(this,k)[k].muted?"Y":"N"}`)}if(!babelHelpers.classPrivateFieldLooseBase(this,j)[j]){babelHelpers.classPrivateFieldLooseBase(this,j)[j]=babelHelpers.classPrivateFieldLooseBase(this,k)[k].muted}this.stop();p.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,T)[T].getContainer());this.setMute(true);if(babelHelpers.classPrivateFieldLooseBase(this,g)[g]){this.play()}}function J(e){babelHelpers.classPrivateFieldLooseBase(this,_)[_].style.transform=`scale(${e})`}function Q(){babelHelpers.classPrivateFieldLooseBase(this,X)[X](1);if(babelHelpers.classPrivateFieldLooseBase(this,I)[I]&&(!babelHelpers.classPrivateFieldLooseBase(this,k)[k].muted||!babelHelpers.classPrivateFieldLooseBase(this,j)[j])){babelHelpers.classPrivateFieldLooseBase(this,I)[I]("on-pause")}}function Z(){babelHelpers.classPrivateFieldLooseBase(this,X)[X](babelHelpers.classPrivateFieldLooseBase(this,L)[L]);if(babelHelpers.classPrivateFieldLooseBase(this,I)[I]&&(!babelHelpers.classPrivateFieldLooseBase(this,k)[k].muted||!babelHelpers.classPrivateFieldLooseBase(this,j)[j])){babelHelpers.classPrivateFieldLooseBase(this,I)[I]("on-play")}}R.PLAY_STATE_BACKGROUND="background";R.PLAY_STATE_USER="user";let ee=e=>e,se,te,ae,ie,le,re,oe,ne,pe,de,ce,be,he,ue,ve,me,Pe,ye,Le,Be,ge;var He=babelHelpers.classPrivateFieldLooseKey("options");var fe=babelHelpers.classPrivateFieldLooseKey("content");var Fe=babelHelpers.classPrivateFieldLooseKey("player");class ke{constructor(e){Object.defineProperty(this,He,{writable:true,value:null});Object.defineProperty(this,fe,{writable:true,value:void 0});Object.defineProperty(this,Fe,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,He)[He]=e}buildPlayer(e){return new R({wrapper:e.wrapper,pausePlayerWidth:e.width,scale:e.scale,posterUrl:e.posterUrl,videos:e.videos,loop:e.loop,autoplay:e.autoplay,muted:e.muted,analyticsCallback:babelHelpers.classPrivateFieldLooseBase(this,He)[He].analyticsCallback})}renderPlayer(e){if(babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]){return babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]}const s=p.Tag.render(se||(se=ee`<div class="ui-popupcomponentsmaker__round-player-box"/>`));babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]=this.buildPlayer({...e,wrapper:s});if(babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]){return babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe].render()}return p.Tag.render(te||(te=ee``))}getPlayer(){return babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]}renderTitle(e){const s=p.Tag.render(ae||(ae=ee`
			<div class="ui-popupcomponentsmaker-header-tariff__header-content"></div>
		`));if(!p.Type.isNil(e.title)){p.Dom.append(p.Tag.render(ie||(ie=ee`<div class="ui-popupcomponentsmaker-header-tariff__title">${0}</div>`),e.title),s)}if(!p.Type.isNil(e.subtitle)){p.Dom.append(p.Tag.render(le||(le=ee`<div class="ui-popupcomponentsmaker-header-tariff__subtitle">${0}</div>`),e.subtitle),s)}if(!p.Type.isNil(e.headTitle)){const t=r.Text.render(e.headTitle,{size:"4xs",transform:"uppercase",accent:true,className:"ui-popupcomponentsmaker-header-tariff__uppertitle"});p.Dom.append(t,s)}return s}renderDescription(e){const s=p.Tag.render(re||(re=ee`
			<div class="ui-popupcomponentsmaker-header-tariff__box"></div>
		`));if(!p.Type.isNil(e.headTitle)){const t=r.Headline.render(e.headTitle,{size:"sm",accent:true,className:"ui-popupcomponentsmaker-header-tariff__headtitle"});p.Dom.append(t,s)}let t=p.Tag.render(oe||(oe=ee``));if(!p.Type.isNil(e.code)){const s=s=>{s.stopPropagation();c.FeaturePromotersRegistry.getPromoter({code:e.code}).show()};t=p.Tag.render(ne||(ne=ee`<a onclick="${0}" target="_blank" class="ui-popupcomponentsmaker-header-tariff__more">${0}</a>`),s,e.moreLabel)}if(!p.Type.isNil(e.title)){const a=p.Tag.render(pe||(pe=ee`<div class="ui-popupcomponentsmaker-header-tariff__title">
				${0}
				${0}
			</div>`),`${e.title} `,t);p.Dom.append(a,s)}if(!p.Type.isNil(e.subtitle)){p.Dom.append(p.Tag.render(de||(de=ee`<div class="ui-popupcomponentsmaker-header-tariff__subtitle">${0}</div>`),e.subtitle),s)}if(!p.Type.isNil(e.subtitleDescription)){p.Dom.append(p.Tag.render(ce||(ce=ee`<div class="ui-popupcomponentsmaker-header-tariff__text">${0}</div>`),e.subtitleDescription),s)}let a="";if(p.Type.isPlainObject(e.roundContent)){a=this.renderPlayer(e.roundContent)}else if(p.Type.isStringFilled(e.roundContent)){a=this.renderIcon(e.roundContent,"--with-bg")}else if(p.Type.isDomNode(e.roundContent)){a=this.embedIcon(e.roundContent,"--with-bg")}else if(e!=null&&e.avatarUrl){a=this.renderAvatar(e.avatarUrl)}const l=p.Tag.render(be||(be=ee`
			<div class="ui-popupcomponentsmaker-header-tariff__message-wrapper">
				${0}
				${0}
			</div>
		`),a,s);const o=new i.PopupComponentsMakerItem({html:l,withoutBackground:false});p.Dom.addClass(o.getContainer(),"ui-popupcomponentsmaker-header-tariff__section-message-wrapper");if(!p.Type.isNil(e.subtitleDescription)){o.getContainer().style.marginTop="14px"}o.getContainer().classList.add("--transparent");return o.getContainer()}renderBtn(e){const s=e instanceof d.Button?e:new d.Button({text:e.label,color:d.ButtonColor.LIGHT_BORDER,size:d.ButtonSize.SMALL,link:e.url,onclick:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,He)[He].analyticsCallback){babelHelpers.classPrivateFieldLooseBase(this,He)[He].analyticsCallback("click-button-header",e.url)}},round:true,noCaps:true});s.addClass("ui-popupcomponentsmaker-header-tariff__button ui-btn-themes");return s.render()}renderIcon(e,s=""){if(p.Type.isStringFilled(e)){return p.Tag.render(he||(he=ee`
				<div class="ui-popupcomponentsmaker-header-tariff__icon ${0}">
					<div class="ui-icon-set ${0}"></div>
				</div>
			`),s,e)}return p.Tag.render(ue||(ue=ee``))}embedIcon(e,s=""){if(p.Type.isDomNode(e)){return p.Tag.render(ve||(ve=ee`
				<div class="ui-popupcomponentsmaker-header-tariff__icon ${0}">
					${0}
				</div>
			`),s,e)}return p.Tag.render(me||(me=ee``))}renderAvatar(e){if(p.Type.isStringFilled(e)){const s=p.Tag.render(Pe||(Pe=ee`<div class="ui-popupcomponentsmaker-header-tariff__avatar"</div>`));p.Dom.style(s,"background-image",`url("${e}")`);return p.Tag.render(ye||(ye=ee`
				<div style="align-self: flex-start;">
					${0}
				</div>
			`),s)}return p.Tag.render(Le||(Le=ee``))}render(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]){return babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]}let s="";if(babelHelpers.classPrivateFieldLooseBase(this,He)[He].button){s=p.Tag.render(Be||(Be=ee`
				<div class="ui-popupcomponentsmaker-header-tariff__button-bar">
					${0}
				</div>
			`),this.renderBtn(babelHelpers.classPrivateFieldLooseBase(this,He)[He].button))}babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]=p.Tag.render(ge||(ge=ee`
			<div class="ui-popupcomponentsmaker-header-tariff__wrapper">
				<div class="ui-popupcomponentsmaker-header-tariff__title-section">
					${0}
					${0}
				</div>
	
				${0}
				${0}
	
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,He)[He].icon instanceof HTMLElement?this.embedIcon(babelHelpers.classPrivateFieldLooseBase(this,He)[He].icon):this.renderIcon(babelHelpers.classPrivateFieldLooseBase(this,He)[He].iconClass,(e=babelHelpers.classPrivateFieldLooseBase(this,He)[He].top)!=null&&e.headTitle?"--icon-small":""),this.renderTitle(babelHelpers.classPrivateFieldLooseBase(this,He)[He].top),this.renderDescription(babelHelpers.classPrivateFieldLooseBase(this,He)[He].info),s);return babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]}}let _e=e=>e,Te,we;var Ce=babelHelpers.classPrivateFieldLooseKey("getThemePicker");var xe=babelHelpers.classPrivateFieldLooseKey("applyTheme");class De extends i.PopupComponentsMakerItem{constructor(e={}){e.withoutBackground=true;e.backgroundColor=null;e.backgroundImage=null;super(e);Object.defineProperty(this,xe,{value:$e});Object.defineProperty(this,Ce,{value:Oe})}getContainer(){if(!this.layout.container){var e;const t=(e=babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]())==null?void 0:e.getAppliedTheme();this.layout.container=p.Tag.render(Te||(Te=_e`<div class="ui-popupcomponentsmaker__header">${0}</div>`),this.getContent());this.bacgroundNode=p.Tag.render(we||(we=_e`<div class="ui-popupcomponentsmaker__header-background"></div>`));p.Dom.append(this.bacgroundNode,this.layout.container);if(t){babelHelpers.classPrivateFieldLooseBase(this,xe)[xe](this.bacgroundNode,t)}s.EventEmitter.subscribe("BX.Intranet.Bitrix24:ThemePicker:onThemeApply",(e=>{babelHelpers.classPrivateFieldLooseBase(this,xe)[xe](this.bacgroundNode,e.data.theme)}))}return super.getContainer()}static createByJson(e,t){const a=new ke(t);const i=new De({html:a.render()});s.EventEmitter.subscribe("BX.Main.Popup:onClose",(s=>{if(e===s.target.uniquePopupId){var t;(t=a.getPlayer())==null?void 0:t.stop()}}));return i}}function Oe(){var e,s,t,a,i;return(e=(s=BX.Intranet)==null?void 0:(t=s.Bitrix24)==null?void 0:t.ThemePicker.Singleton)!=null?e:(a=top.BX.Intranet)==null?void 0:(i=a.Bitrix24)==null?void 0:i.ThemePicker.Singleton}function $e(e,s){const t=`url('${p.Text.encode(s.previewImage)}')`;p.Dom.style(e,"backgroundImage",t);if(s.previewColor){p.Dom.style(e,"backgroundColor",s.previewColor)}p.Dom.removeClass(this.layout.container,"bitrix24-dark-theme bitrix24-light-theme bitrix24-default-theme");let a="bitrix24-default-theme";if(s.id!=="default"){a=String(s.id).indexOf("dark:")===0?"bitrix24-dark-theme":"bitrix24-light-theme"}p.Dom.addClass(this.layout.container,a)}let Ke=e=>e,je,Ie;var Se=babelHelpers.classPrivateFieldLooseKey("height");var Ne=babelHelpers.classPrivateFieldLooseKey("width");var Ae=babelHelpers.classPrivateFieldLooseKey("getInnerBlock");class Ee{constructor(e=447,s=344){Object.defineProperty(this,Ae,{value:We});Object.defineProperty(this,Se,{writable:true,value:void 0});Object.defineProperty(this,Ne,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Se)[Se]=e;babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne]=s}get(){return p.Tag.render(je||(je=Ke`
			<div style="height: ${0}px; width: ${0}px;" class="popup-with-header-skeleton__wrap">
				<div class="popup-with-header-skeleton__header">
					<div class="popup-with-header-skeleton__header-top">
						<div class="popup-with-header-skeleton__header-circle">
							<div class="popup-with-header-skeleton__header-circle-inner"></div>
						</div>
						<div style="width: 100%;">
							<div style="margin-bottom: 12px; max-width: 219px; height: 6px; background: rgba(255,255,255,.8);" class="popup-with-header-skeleton__line"></div>
							<div style="max-width: 119px; height: 4px;" class="popup-with-header-skeleton__line"></div>
						</div>
					</div>
					<div class="popup-with-header-skeleton__header-bottom">
						<div class="popup-with-header-skeleton__header-bottom-circle-box">
							<div class="popup-with-header-skeleton__header-bottom-circle"></div>
						</div>
						<div style="width: 100%;">
							<div style="margin-bottom: 9px; max-width: 193px; height: 5px;" class="popup-with-header-skeleton__line"></div>
							<div style="margin-bottom: 15px; max-width: 163px; height: 5px;" class="popup-with-header-skeleton__line"></div>
							<div style="margin-bottom: 9px; max-width: 156px; height: 2px;" class="popup-with-header-skeleton__line"></div>
							<div style="margin-bottom: 9px; max-width: 93px; height: 2px;" class="popup-with-header-skeleton__line"></div>
						</div>
					</div>
				</div>
				<div class="popup-with-header-skeleton__bottom">
					${0}
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Se)[Se],babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne],babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae](),babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]("--green"))}}function We(e=""){return p.Tag.render(Ie||(Ie=Ke`
			<div class="popup-with-header-skeleton__bottom-inner">
				<div class="popup-with-header-skeleton__bottom-title">
					<div class="popup-with-header-skeleton__bottom-left">
						<div style="margin-top: 9px; max-width: 183px; height: 5px;" class="popup-with-header-skeleton__line"></div>
					</div>
					<div class="popup-with-header-skeleton__bottom-right">
						<div class="popup-with-header-skeleton-btn ${0}"></div>
					</div>
				</div>
				<div class="popup-with-header-skeleton__bottom-desc">
					<div style="margin-bottom: 9px; max-width: 238px; height: 3px; background: rgba(149,156,164,.23);" class="popup-with-header-skeleton__line --dark-animation"></div>
					<div style="margin-bottom: 9px; max-width: 201px; height: 3px; background: rgba(149,156,164,.23);" class="popup-with-header-skeleton__line --dark-animation"></div>
					<div style="margin-bottom: 9px; max-width: 220px; height: 3px; background: rgba(149,156,164,.23);" class="popup-with-header-skeleton__line --dark-animation"></div>
				</div>
			</div>
		`),e)}let Xe=e=>e,Ue,Me,Re,ze,Ye;var Ge=babelHelpers.classPrivateFieldLooseKey("popupOptions");var qe=babelHelpers.classPrivateFieldLooseKey("prepareItemsContent");var Ve=babelHelpers.classPrivateFieldLooseKey("getThemePicker");var Je=babelHelpers.classPrivateFieldLooseKey("applyTheme");class Qe extends i.PopupComponentsMaker{constructor(e){var s,t,a;super(e);Object.defineProperty(this,Je,{value:ss});Object.defineProperty(this,Ve,{value:es});Object.defineProperty(this,qe,{value:Ze});Object.defineProperty(this,Ge,{writable:true,value:void 0});this.header=e.header instanceof De?e.header:null;this.template=e.template instanceof n.BaseTemplate?e.template:null;this.asyncData=e.asyncData instanceof BX.Promise||e.asyncData instanceof Promise?e.asyncData:null;this.animationTemplate=(s=e.animationTemplate)!=null?s:true;this.skeletonHeight=(t=e.skeletonHeight)!=null?t:447;this.skeletonWidth=(a=e.skeletonWidth)!=null?a:344;this.analyticsCallback=p.Type.isFunction(e.analyticsCallback)?e.analyticsCallback:null;babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]=p.Type.isPlainObject(e.popupOptions)?e.popupOptions:{}}getPopup(){if(!this.popup){const e=this.width?this.width:344;const s=this.id?`${this.id}-popup`:null;let t=[];if(!this.asyncData){t=p.Tag.render(Ue||(Ue=Xe`
					<div>
						${0}
					<div>
				`),this.getHeaderWrapper());if(this.content.length>0){t.append(p.Tag.render(Me||(Me=Xe`<div style="padding: 0 ${0}px ${0}px ${0}px">${0}</div>`),this.padding,this.padding,this.padding,this.getContentWrapper()))}}this.popup=new o.Popup(s,this.target,{className:"ui-popupcomponentmaker",contentBackground:"transparent",contentPadding:this.contentPadding,angle:this.useAngle?{offset:e/2-16}:false,offsetTop:this.offsetTop,width:e,offsetLeft:-(e/2)+(this.target?this.target.offsetWidth/2:0)+40,autoHide:true,closeByEsc:true,padding:0,animation:"fading-slide",content:t,cacheable:this.cacheable,...babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]});if(this.asyncData){const e=this.popup.getContentContainer();p.Dom.clean(e);p.Dom.append(this.getSkeleton(),e);this.preparePopupAngly(e);if(p.Type.isDomNode(e.parentNode)){p.Dom.addClass(e.parentNode,"--with-header")}this.asyncData.then((a=>{p.Dom.clean(e);a.data.header.analyticsCallback=this.analyticsCallback;this.header=De.createByJson(s,a.data.header);let i=a.data.items&&this.template;t=p.Tag.render(Re||(Re=Xe`
						<div ${0}>
							${0}
						<div>
					`),i?'class="ui-popupcomponentmaker-wrap --with-border-radius-content"':"",this.getHeaderWrapper());if(i){this.template.setOptions({items:a.data.items,analyticsCallback:this.analyticsCallback});this.content=this.template.getContent();this.contentWrapper=null;if(p.Dom.hasClass(this.getHeaderWrapper(),"--empty-content")){p.Dom.removeClass(this.getHeaderWrapper(),"--empty-content")}if(!this.getHeaderWrapper().querySelector(".ui-popupcomponentsmaker__round-player-box")&&!p.Dom.hasClass(this.getHeaderWrapper(),"--without-video")){p.Dom.addClass(this.getHeaderWrapper(),"--without-video")}p.Dom.addClass(this.getHeaderWrapper(),"--with-border-radius-wrap");if(this.content.length>0){t.append(p.Tag.render(ze||(ze=Xe`<div class="ui-popupcomponentmaker__content-wrap-round"><div class="ui-popupcomponentmaker__content-wrap">${0}</div></div>`),this.getContentWrapper()))}else{i=false}}p.Dom.append(t,e);if(i){if(this.popup.isShown()){babelHelpers.classPrivateFieldLooseBase(this,qe)[qe](t)}else{this.popup.subscribeOnce("onShow",(()=>{babelHelpers.classPrivateFieldLooseBase(this,qe)[qe](t)}))}}this.popup.adjustPosition({forceBindPosition:true,position:this.popup.isBottomAngle()?"top":"bottom"})}))}this.popup.getContentContainer().style.overflowX=null}return this.popup}getSkeleton(){if(!this.skeleton){var e;this.skeleton=new Ee(this.skeletonHeight,this.skeletonWidth).get();const t=(e=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]())==null?void 0:e.getAppliedTheme();if(!t){return this.skeleton}const a=this.skeleton.querySelector(".popup-with-header-skeleton__header");babelHelpers.classPrivateFieldLooseBase(this,Je)[Je](a,t);s.EventEmitter.subscribe("BX.Intranet.Bitrix24:ThemePicker:onThemeApply",(e=>{babelHelpers.classPrivateFieldLooseBase(this,Je)[Je](a,e.data.theme)}))}return this.skeleton}preparePopupAngly(e){var t;const a=e==null?void 0:(t=e.parentNode)==null?void 0:t.querySelector(".popup-window-angly--arrow");if(p.Type.isDomNode(a)){var i;const t=(i=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]())==null?void 0:i.getAppliedTheme();if(t){babelHelpers.classPrivateFieldLooseBase(this,Je)[Je](a,t);s.EventEmitter.subscribe("BX.Intranet.Bitrix24:ThemePicker:onThemeApply",(e=>{babelHelpers.classPrivateFieldLooseBase(this,Je)[Je](a,e.data.theme)}))}p.Dom.style(a,"background-position","center top");p.Dom.addClass(e==null?void 0:e.parentNode,"--with-header")}}getHeaderWrapper(){if(!this.header){return null}if(!this.headerWrapper){var e,s,t,a,i;this.headerWrapper=p.Tag.render(Ye||(Ye=Xe`
				<div class="ui-popupcomponentmaker__header-content"></div>
			`));if(this.content.length<=0){this.headerWrapper.classList.add("--empty-content")}const l=this.getSection();if((e=this.header)!=null&&e.marginBottom){p.Type.isNumber(this.header.marginBottom)?l.style.marginBottom=`${this.header.marginBottom}px`:null}if((s=this.header)!=null&&s.className){p.Dom.addClass(l,this.header.className)}if(p.Type.isDomNode((t=this.header)==null?void 0:t.html)){l.appendChild(this.getItem(this.header).getContainer());this.headerWrapper.appendChild(l)}if(p.Type.isFunction((a=this.header)==null?void 0:(i=a.html)==null?void 0:i.then)){this.adjustPromise(this.header,l);this.headerWrapper.appendChild(l)}}return this.headerWrapper}}function Ze(e){p.Dom.addClass(this.getContentWrapper(),"ui-popup-with-header__content");if(this.popup.isBottomAngle()||!this.animationTemplate){p.Dom.style(this.getContentWrapper(),"transition","none")}if(this.getContentWrapper().scrollHeight>287&&!p.Dom.hasClass(this.getContentWrapper(),"--active-scroll")){p.Dom.style(this.getContentWrapper(),"height","287px");p.Dom.style(this.getContentWrapper(),"overflow-y","scroll");p.Dom.addClass(e,"active-scroll")}else{p.Dom.style(this.getContentWrapper(),"height",`${this.getContentWrapper().scrollHeight}px`)}}function es(){var e,s,t,a,i;return(e=(s=BX.Intranet)==null?void 0:(t=s.Bitrix24)==null?void 0:t.ThemePicker.Singleton)!=null?e:(a=top.BX.Intranet)==null?void 0:(i=a.Bitrix24)==null?void 0:i.ThemePicker.Singleton}function ss(e,s){const t=`url('${p.Text.encode(s.previewImage)}')`;p.Dom.style(e,"backgroundImage",t);if(s.previewColor){p.Dom.style(e,"backgroundColor",s.previewColor)}p.Dom.removeClass(e,"bitrix24-dark-theme bitrix24-light-theme bitrix24-default-theme");let a="bitrix24-default-theme";if(s.id!=="default"){a=String(s.id).indexOf("dark:")===0?"bitrix24-dark-theme":"bitrix24-light-theme"}p.Dom.addClass(e,a)}class ts{getContent(){throw new Error("Must be implemented in a child class")}setOptions(e){this.options=e}}let as=e=>e,is,ls,rs,os,ns,ps;var ds=babelHelpers.classPrivateFieldLooseKey("cache");var cs=babelHelpers.classPrivateFieldLooseKey("analyticsCallback");var bs=babelHelpers.classPrivateFieldLooseKey("getItemContent");var hs=babelHelpers.classPrivateFieldLooseKey("getTitle");var us=babelHelpers.classPrivateFieldLooseKey("getIcon");var vs=babelHelpers.classPrivateFieldLooseKey("getDescription");var ms=babelHelpers.classPrivateFieldLooseKey("getMoreLink");var Ps=babelHelpers.classPrivateFieldLooseKey("getButton");var ys=babelHelpers.classPrivateFieldLooseKey("getButtonDescription");var Ls=babelHelpers.classPrivateFieldLooseKey("setTextStyles");class Bs extends ts{constructor(e={}){super();Object.defineProperty(this,Ls,{value:ws});Object.defineProperty(this,ys,{value:Ts});Object.defineProperty(this,Ps,{value:_s});Object.defineProperty(this,ms,{value:ks});Object.defineProperty(this,vs,{value:Fs});Object.defineProperty(this,us,{value:fs});Object.defineProperty(this,hs,{value:Hs});Object.defineProperty(this,bs,{value:gs});Object.defineProperty(this,ds,{writable:true,value:new p.Cache.MemoryCache});Object.defineProperty(this,cs,{writable:true,value:void 0});this.options=e;babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]=p.Type.isFunction(e.analyticsCallback)?e.analyticsCallback:null}getContent(){return babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].remember("popup-content",(()=>{const e=[];this.options.items.forEach(((s,t)=>{var a,i,l;const r=babelHelpers.classPrivateFieldLooseBase(this,bs)[bs](s);if((a=s.styles)!=null&&a.color){p.Dom.style(r,"color",s.styles.color)}e.push({html:r,background:(i=s.styles)==null?void 0:i.background,margin:t===0?"12px 0 0 0":null,borderColor:(l=s.styles)==null?void 0:l.borderColor})}));return e}))}}function gs(e){return p.Tag.render(is||(is=as`
			<div class="ui-popupconstructor-content-item-wrapper --noflex">
				<div class="ui-popupconstructor-content-item-wrapper__header">
					<div class="ui-popupconstructor-content-item-wrapper-title">
						${0}
						${0}
					</div>
					<div class="ui-popupconstructor-content-item__header-button">
						${0}
					</div>
				</div>
				<div>
					${0}
					${0}
				</div>
			</div>
		`),e.icon?babelHelpers.classPrivateFieldLooseBase(this,us)[us](e.icon):null,e.title?babelHelpers.classPrivateFieldLooseBase(this,hs)[hs](e.title):null,e.button?babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps](e.button):null,e.description?babelHelpers.classPrivateFieldLooseBase(this,vs)[vs](e.description):null,e.more?babelHelpers.classPrivateFieldLooseBase(this,ms)[ms](e.more,e.button):null)}function Hs(e){const s=p.Tag.render(ls||(ls=as`
			<div class="ui-popupconstructor-content-item__title">${0}</div>
		`),e.text);babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls](s,e);return s}function fs(e){const s=p.Tag.render(rs||(rs=as`
			<div class="ui-popupconstructor-content-item__icon ui-icon-set --${0}"></div>
		`),e.name);if(e.color){p.Dom.style(s,"background-color",e.color)}return s}function Fs(e){const s=p.Tag.render(os||(os=as`
			<div class="ui-popupconstructor-content-item__description">
				${0}
			</div>
		`),e.text);babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls](s,e);return s}function ks(e,s){const t=()=>{if(e.code){c.FeaturePromotersRegistry.getPromoter({code:e.code}).show()}else if(e.articleId){top.BX.Helper.show(`redirect=detail&code=${e.articleId}`)}if(babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]){babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]("click-more",s.url)}};const a=p.Tag.render(ns||(ns=as`
			<div class="ui-popupconstructor-content-item__more-link" onclick="${0}">${0}</div>
		`),t,e.text.text);babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls](a,e.text);return a}function _s(e){var s;const t=e.target?d.ButtonTag.BUTTON:d.ButtonTag.LINK;const a=new d.Button({text:e.text,size:d.Button.Size.EXTRA_SMALL,useAirDesign:true,style:(s=e==null?void 0:e.airStyle)!=null?s:d.AirButtonStyle.FILLED,color:d.ButtonColor.PRIMARY,noCaps:true,tag:t,link:e.target?null:e.url,wide:true,events:{mousedown:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]){var s;babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]((s=e==null?void 0:e.analyticsEvent)!=null?s:"click-button",e.url)}}},onclick:()=>{if(e.target){window.open(e.url,e.target)}}});if(e.backgroundColor){p.Dom.style(a.render(),"background-color",e.backgroundColor);a.setColor(d.Button.Color.LIGHT)}return a.render()}function Ts(e){const s=p.Tag.render(ps||(ps=as`
			<div class="ui-popupconstructor-content-item__button-description">
				${0}
			</div>
		`),e.text);babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls](s,e);return s}function ws(e,s){if(s.color){p.Dom.style(e,"color",s.color)}if(s.fontSize){p.Dom.style(e,"font-size",s.fontSize)}if(s.weight){p.Dom.style(e,"font-weight",s.weight)}}e.PopupWithHeader=Qe;e.PopupHeader=De;e.SaleTemplate=Bs;e.BaseTemplate=ts})(this.BX.UI=this.BX.UI||{},BX.Event,BX,BX.UI,BX.UI,BX.UI.IconSet,BX.UI.System.Typography,BX.Main,BX.UI,BX,BX.UI,BX.UI);
//# sourceMappingURL=popup-with-header.bundle.map.js