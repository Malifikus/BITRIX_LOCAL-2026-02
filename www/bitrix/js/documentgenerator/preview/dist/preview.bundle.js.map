{"version":3,"file":"preview.bundle.js","sources":["../src/button.js","../src/helpers.js","../src/document.js","../src/document-preview.js"],"sourcesContent":["import { ajax as Ajax, Dom, Event, Text, Type } from 'main.core';\nimport { type BaseEvent, EventEmitter } from 'main.core.events';\nimport { Loader } from 'main.loader';\nimport { MenuManager } from 'main.popup';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\n/**\n * @memberOf BX.Crm.DocumentGenerator\n */\nexport class Button\n{\n\tprogress = false;\n\tlinks = {};\n\tlinksLoaded = false;\n\tintranetExtensions = null;\n\tid = null;\n\ttext = 'Document';\n\tclassName = '';\n\tmenuClassName = null;\n\tprovider = null;\n\tvalue = null;\n\tloaderPath = null;\n\tdocumentUrl = null;\n\ttemplateListUrl = null;\n\tmoduleId = null;\n\ttemplatesText = 'Templates';\n\tdocumentsText = 'Documents';\n\tsliderWidth = null;\n\tloader = null;\n\n\tconstructor(id, params)\n\t{\n\t\tthis.id = id;\n\t\tthis.fillParameters(params);\n\t}\n\n\tfillParameters(params): void\n\t{\n\t\tif (params.links && Type.isObjectLike(params.links) && Object.keys(params.links).length > 0)\n\t\t{\n\t\t\tthis.links = params.links;\n\t\t\tif (this.links.length > 0)\n\t\t\t{\n\t\t\t\tthis.linksLoaded = true;\n\t\t\t}\n\t\t}\n\n\t\tif (params.menuClassName && Type.isString(params.menuClassName))\n\t\t{\n\t\t\tthis.menuClassName = params.menuClassName;\n\t\t}\n\n\t\tif (params.className && Type.isString(params.className))\n\t\t{\n\t\t\tthis.className = params.className;\n\t\t}\n\n\t\tif (params.moduleId && Type.isString(params.moduleId))\n\t\t{\n\t\t\tthis.moduleId = params.moduleId;\n\t\t}\n\n\t\tif (params.text && Type.isString(params.text))\n\t\t{\n\t\t\tthis.text = params.text;\n\t\t}\n\n\t\tif (params.templatesText && Type.isString(params.templatesText))\n\t\t{\n\t\t\tthis.templatesText = params.templatesText;\n\t\t}\n\n\t\tif (params.documentsText && Type.isString(params.documentsText))\n\t\t{\n\t\t\tthis.documentsText = params.documentsText;\n\t\t}\n\t\tthis.value = params.value || null;\n\t\tthis.provider = params.provider || null;\n\t\tthis.loaderPath = params.loaderPath || null;\n\t\tthis.templateListUrl = params.templateListUrl || null;\n\t\tthis.documentUrl = params.documentUrl || null;\n\t\tthis.sliderWidth = Object.hasOwn(params, 'sliderWidth') ? parseInt(params.sliderWidth, 10) : null;\n\t}\n\n\tgetElement(): ?HTMLElement\n\t{\n\t\treturn document.getElementById(this.id);\n\t}\n\n\tcreateElement(): ?HTMLElement\n\t{\n\t\tconst node = this.getElement();\n\t\tif (node)\n\t\t{\n\t\t\treturn node;\n\t\t}\n\n\t\tif (!this.id)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tconst tagName = 'button';\n\t\tlet className = 'ui-btn ui-btn-md ui-btn-light-border ui-btn-dropdown ui-btn-themes';\n\t\tif (this.className)\n\t\t{\n\t\t\tclassName += ` ${this.className}`;\n\t\t}\n\t\tconst attrs = {\n\t\t\tid: this.id,\n\t\t\tclassName,\n\t\t};\n\n\t\treturn Dom.create(tagName, {\n\t\t\tattrs,\n\t\t\ttext: this.text,\n\t\t});\n\t}\n\n\tinit(): void\n\t{\n\t\tEvent.bind(this.getElement(), 'click', () => {\n\t\t\tif (this.linksLoaded)\n\t\t\t{\n\t\t\t\tthis.showPopup();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.progress)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.progress = true;\n\t\t\t\tthis.showLoader();\n\t\t\t\tAjax.runAction('documentgenerator.api.document.getButtonTemplates', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmoduleId: this.moduleId,\n\t\t\t\t\t\tprovider: this.provider,\n\t\t\t\t\t\tvalue: this.value,\n\t\t\t\t\t},\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tthis.fillLinksFromResponse(response);\n\t\t\t\t\tthis.hideLoader();\n\t\t\t\t\tthis.progress = false;\n\t\t\t\t\tsetTimeout(() => this.showPopup(), 10);\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tthis.hideLoader();\n\t\t\t\t\tthis.progress = false;\n\t\t\t\t\tMessageBox.alert(response.errors.pop().message);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('onPullEvent-documentgenerator', (event: BaseEvent) => {\n\t\t\tconst [command] = event.getData();\n\n\t\t\tif (command === 'updateTemplate')\n\t\t\t{\n\t\t\t\tthis.linksLoaded = false;\n\t\t\t\tthis.links = {};\n\t\t\t\tMenuManager.destroy(this.getPopupMenuId());\n\t\t\t}\n\t\t});\n\t}\n\n\tfillLinksFromResponse(response): void\n\t{\n\t\tthis.linksLoaded = true;\n\t\tthis.links = {};\n\t\tif (this.documentUrl && response.data.templates && Type.isArray(response.data.templates))\n\t\t{\n\t\t\tthis.links.templates = [];\n\t\t\tconst length = response.data.templates.length;\n\t\t\tfor (let i = 0; i < length; i++)\n\t\t\t{\n\t\t\t\tconst url = BX.util.add_url_param(this.documentUrl, {\n\t\t\t\t\ttemplateId: parseInt(response.data.templates[i].id, 10),\n\t\t\t\t\tproviderClassName: this.provider.replaceAll('\\\\', '\\\\\\\\'),\n\t\t\t\t\tvalue: this.value,\n\t\t\t\t\tanalyticsLabel: 'generateDocument',\n\t\t\t\t\ttemplateCode: response.data.templates[i].code,\n\t\t\t\t});\n\t\t\t\tconst docParams = {};\n\t\t\t\tif (this.sliderWidth)\n\t\t\t\t{\n\t\t\t\t\tdocParams.sliderWidth = this.sliderWidth;\n\t\t\t\t}\n\t\t\t\tthis.links.templates[i] = {\n\t\t\t\t\ttext: Text.encode(response.data.templates[i].name),\n\t\t\t\t\ttitle: Text.encode(response.data.templates[i].name),\n\t\t\t\t\tonclick: `BX.DocumentGenerator.Document.onBeforeCreate('${url}',${JSON.stringify(docParams)},'${this.loaderPath}','${this.moduleId}')`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (response.data.documentList && this.documentUrl)\n\t\t{\n\t\t\tthis.links.documentList = BX.util.add_url_param(response.data.documentList, {\n\t\t\t\tprovider: this.provider.replaceAll('\\\\', '\\\\\\\\'),\n\t\t\t\tmodule: this.moduleId,\n\t\t\t\tvalue: this.value,\n\t\t\t\tviewUrl: this.documentUrl,\n\t\t\t\tloaderPath: this.loaderPath,\n\t\t\t});\n\t\t}\n\n\t\tif (response.data.canEditTemplate && this.templateListUrl)\n\t\t{\n\t\t\tthis.links.templateList = this.templateListUrl;\n\t\t}\n\n\t\tif (response.data.intranetExtensions)\n\t\t{\n\t\t\tthis.intranetExtensions = response.data.intranetExtensions;\n\t\t}\n\t}\n\n\tprepareLinksForPopup(): Array<Object>\n\t{\n\t\tlet result = [];\n\t\tlet addDelimiter = false;\n\t\tif (!this.linksLoaded)\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tif (this.links.templates && Type.isArray(this.links.templates))\n\t\t{\n\t\t\tresult = this.links.templates;\n\t\t\taddDelimiter = true;\n\t\t}\n\n\t\tif (this.links.documentList)\n\t\t{\n\t\t\tif (addDelimiter)\n\t\t\t{\n\t\t\t\tresult[result.length] = {\n\t\t\t\t\tdelimiter: true,\n\t\t\t\t};\n\t\t\t\taddDelimiter = false;\n\t\t\t}\n\t\t\tresult[result.length] = {\n\t\t\t\ttext: this.documentsText,\n\t\t\t\tonclick: `BX.DocumentGenerator.openUrl('${this.links.documentList}', null, 1060)`,\n\t\t\t};\n\t\t}\n\n\t\tif (this.links.templateList)\n\t\t{\n\t\t\tif (addDelimiter)\n\t\t\t{\n\t\t\t\tresult[result.length] = {\n\t\t\t\t\tdelimiter: true,\n\t\t\t\t};\n\t\t\t}\n\t\t\tresult[result.length] = {\n\t\t\t\ttext: this.templatesText,\n\t\t\t\tonclick: `BX.DocumentGenerator.openUrl('${this.links.templateList}', null, 1060)`,\n\t\t\t};\n\t\t}\n\n\t\tif (this.intranetExtensions)\n\t\t{\n\t\t\tresult.push({\n\t\t\t\tdelimiter: true,\n\t\t\t}, this.intranetExtensions);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tshowPopup(): void\n\t{\n\t\tMenuManager.show(this.getPopupMenuId(), this.getElement(), this.prepareLinksForPopup(), {\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tcloseByEsc: true,\n\t\t\tclassName: 'document-toolbar-menu',\n\t\t\tmaxWidth: 600,\n\t\t});\n\t}\n\n\tgetPopupMenuId(): string\n\t{\n\t\treturn `${this.id}_menu`;\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\tif (!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({ size: 50 });\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tif (this.getElement() && !this.getLoader().isShown())\n\t\t{\n\t\t\tthis.getLoader().show(this.getElement());\n\t\t}\n\t}\n\n\thideLoader(): void\n\t{\n\t\tif (this.getLoader().isShown())\n\t\t{\n\t\t\tthis.getLoader().hide();\n\t\t}\n\t}\n}\n","import { Dom, Loc, Type } from 'main.core';\nimport { MenuManager, Popup, PopupWindowButton } from 'main.popup';\n\nexport function parseUrl(url, key): JsonObject\n{\n\tconst parser = document.createElement('a');\n\tconst params = {};\n\tlet split = null;\n\tlet i = null;\n\tparser.href = url;\n\tconst queries = parser.search.replace(/^\\?/, '').split('&');\n\tfor (i = 0; i < queries.length; i++)\n\t{\n\t\tsplit = queries[i].split('=');\n\t\tparams[split[0]] = split[1];\n\t}\n\tconst result = {\n\t\tprotocol: parser.protocol,\n\t\thost: parser.host,\n\t\thostname: parser.hostname,\n\t\tport: parser.port,\n\t\tpathname: parser.pathname,\n\t\tsearch: parser.search,\n\t\tparams,\n\t\thash: parser.hash,\n\t};\n\n\tif (key && Object.hasOwn(result, key))\n\t{\n\t\treturn result[key];\n\t}\n\n\treturn result;\n}\n\nexport function openUrl(viewUrl, loaderPath, width): void\n{\n\tif (BX.SidePanel)\n\t{\n\t\tif (!Type.isNumber(width))\n\t\t{\n\t\t\twidth = 810;\n\t\t}\n\t\tBX.SidePanel.Instance.open(viewUrl, { width, cacheable: false, loader: loaderPath });\n\t\tconst menu = MenuManager.getCurrentMenu();\n\t\tif (menu && menu.popupWindow)\n\t\t{\n\t\t\tmenu.popupWindow.close();\n\t\t}\n\t}\n\telse\n\t{\n\t\tlocation.href = viewUrl;\n\t}\n}\n\nlet popupConfirm = null;\n\nexport function showMessage(content, buttons, title, onclose): void\n{\n\ttitle = title || '';\n\tif (Type.isNil(buttons) || (Type.isObjectLike(buttons) && Object.keys(buttons).length <= 0))\n\t{\n\t\tbuttons = [new PopupWindowButton({\n\t\t\ttext: Loc.getMessage('DOCGEN_PREVIEW_CLOSE_BUTTON'),\n\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-default',\n\t\t\tevents: {\n\t\t\t\tclick(e) {\n\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\tBX.PreventDefault(e);\n\t\t\t\t},\n\t\t\t},\n\t\t})];\n\t}\n\n\tpopupConfirm?.destroy();\n\n\tif (!Type.isDomNode(content))\n\t{\n\t\tconst node = document.createElement('div');\n\t\tnode.innerHTML = content;\n\t\tcontent = node;\n\t}\n\n\tif (!Type.isArray(content))\n\t{\n\t\tcontent = [content];\n\t}\n\n\tpopupConfirm = new Popup('bx-popup-documentgenerator-popup', null, {\n\t\tzIndex: 200,\n\t\tautoHide: true,\n\t\tcloseByEsc: true,\n\t\tbuttons,\n\t\tcloseIcon: true,\n\t\toverlay: true,\n\t\tevents: {\n\t\t\tonPopupClose()\n\t\t\t{\n\t\t\t\tif (Type.isFunction(onclose))\n\t\t\t\t{\n\t\t\t\t\tonclose();\n\t\t\t\t}\n\t\t\t\tthis.destroy();\n\t\t\t},\n\t\t\tonPopupDestroy: () => {\n\t\t\t\tpopupConfirm = null;\n\t\t\t},\n\t\t},\n\t\tcontent: Dom.create('span', {\n\t\t\tattrs: { className: 'bx-popup-documentgenerator-popup-content-text' },\n\t\t\tchildren: content,\n\t\t}),\n\t\ttitleBar: title,\n\t\tcontentColor: 'white',\n\t\tclassName: 'bx-popup-documentgenerator-popup',\n\t\tmaxWidth: 470,\n\t});\n\n\tpopupConfirm.show();\n}\n","import { ajax as Ajax, Loc, Type } from 'main.core';\nimport { PopupWindowButton } from 'main.popup';\nimport { openUrl, parseUrl, showMessage } from './helpers';\n\n/**\n * @memberOf BX.Crm.DocumentGenerator\n */\nexport class Document\n{\n\tstatic isProcessing = false;\n\n\tstatic askAboutUsingPreviousDocumentNumber(provider, templateId, value, onsuccess, ondecline): void\n\t{\n\t\tif (Type.isString(provider) && (parseInt(templateId, 10) > 0) && Type.isFunction(onsuccess))\n\t\t{\n\t\t\tif (Document.isProcessing === true)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tDocument.isProcessing = true;\n\t\t\t\tAjax.runAction('documentgenerator.api.document.list', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tselect: ['id', 'number'],\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t'=provider': provider.toLowerCase(),\n\t\t\t\t\t\t\t'=templateId': templateId,\n\t\t\t\t\t\t\t'=value': value,\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: { id: 'desc' },\n\t\t\t\t\t},\n\t\t\t\t\tnavigation: {\n\t\t\t\t\t\tsize: 1,\n\t\t\t\t\t},\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tDocument.isProcessing = false;\n\t\t\t\t\tif (response.data.documents.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst previousNumber = response.data.documents[0].number;\n\t\t\t\t\t\tshowMessage(Loc.getMessage('DOCGEN_PREVIEW_DO_USE_OLD_NUMBER'), [\n\t\t\t\t\t\t\tnew PopupWindowButton({\n\t\t\t\t\t\t\t\ttext: Loc.getMessage('DOCGEN_PREVIEW_NEW_BUTTON'),\n\t\t\t\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-primary',\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t\t\t\tonsuccess();\n\t\t\t\t\t\t\t\t\t\tthis.popupWindow.destroy();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tnew PopupWindowButton({\n\t\t\t\t\t\t\t\ttext: Loc.getMessage('DOCGEN_PREVIEW_OLD_BUTTON'),\n\t\t\t\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-primary',\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t\t\t\tonsuccess(previousNumber);\n\t\t\t\t\t\t\t\t\t\tthis.popupWindow.destroy();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t], Loc.getMessage('DOCGEN_PREVIEW_NUMBER_TITLE'), ondecline);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tonsuccess();\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tDocument.isProcessing = false;\n\t\t\t\t\tif (Type.isFunction(ondecline))\n\t\t\t\t\t{\n\t\t\t\t\t\tondecline();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tDocument.isProcessing = false;\n\t\t\t\tif (Type.isFunction(ondecline))\n\t\t\t\t{\n\t\t\t\t\tondecline();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic onBeforeCreate(viewUrl, params, loaderPath, moduleId): void\n\t{\n\t\tconst urlParams = parseUrl(viewUrl, 'params');\n\t\tconst provider = decodeURIComponent(urlParams.providerClassName).toLowerCase();\n\t\tconst templateId = urlParams.templateId;\n\t\tconst value = urlParams.value;\n\t\tconst sliderWidth = Object.hasOwn(params, 'sliderWidth') ? params.sliderWidth : null;\n\n\t\tif (Object.hasOwn(urlParams, 'documentId'))\n\t\t{\n\t\t\topenUrl(viewUrl, loaderPath, sliderWidth);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tAjax.runAction('documentgenerator.api.dataprovider.isPrintable', {\n\t\t\t\tdata: {\n\t\t\t\t\tprovider,\n\t\t\t\t\tvalue,\n\t\t\t\t\toptions: {},\n\t\t\t\t\tmodule: moduleId,\n\t\t\t\t},\n\t\t\t}).then(() => {\n\t\t\t\tif (Object.hasOwn(urlParams, 'documentId'))\n\t\t\t\t{\n\t\t\t\t\topenUrl(viewUrl, loaderPath, sliderWidth);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDocument.askAboutUsingPreviousDocumentNumber(provider, templateId, value, (previousNumber) => {\n\t\t\t\t\t\tif (previousNumber)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tviewUrl = BX.util.add_url_param(viewUrl, { number: previousNumber });\n\t\t\t\t\t\t}\n\t\t\t\t\t\topenUrl(viewUrl, loaderPath, sliderWidth);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch((reason) => {\n\t\t\t\tshowMessage(\n\t\t\t\t\treason.errors.map((error) => error.message).join('<br>'),\n\t\t\t\t\t[new PopupWindowButton({\n\t\t\t\t\t\ttext: Loc.getMessage('DOCGEN_PREVIEW_CONTINUE_BUTTON'),\n\t\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-success',\n\t\t\t\t\t\tevents: { click(e) { this.popupWindow.close(); BX.PreventDefault(e); } },\n\t\t\t\t\t})],\n\t\t\t\t\tLoc.getMessage('DOCGEN_PREVIEW_PRINT_TITLE'),\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n}\n","import { ajax as Ajax, Dom, Type } from 'main.core';\nimport { Loader } from 'main.loader';\n\nlet isPushEventInited = false;\n\n/**\n * @memberOf BX.Crm.DocumentGenerator\n */\nexport class DocumentPreview\n{\n\tloader = null;\n\tdocumentId = null;\n\tpullTag = null;\n\tstartImageUrl = null;\n\timageUrl = null;\n\timageContainer = null;\n\timageNode = null;\n\tprintUrl = null;\n\tpdfUrl = null;\n\thash = '';\n\tisPublicMode = false;\n\tisTransformationError = false;\n\ttransformationErrorNode = null;\n\ttransformationErrorMessage = '';\n\ttransformationErrorCode = 0;\n\tpreviewNode = null;\n\tonReady = () => {};\n\n\tconstructor(options)\n\t{\n\t\tthis.hash = options.hash || '';\n\t\tthis.isPublicMode = options.isPublicMode || false;\n\t\tthis.isTransformationError = false;\n\t\tthis.transformationErrorNode = null;\n\t\tthis.transformationErrorMessage = '';\n\t\tthis.transformationErrorCode = 0;\n\t\tthis.previewNode = null;\n\t\tthis.onReady = () => {};\n\t\tthis.applyOptions(options);\n\t\tthis.initPushEvent();\n\t\tthis.start();\n\t}\n\n\tisPullConnected(): boolean\n\t{\n\t\tif (top.BX.PULL)\n\t\t{\n\t\t\tif (Type.isFunction(top.BX.PULL.isConnected))\n\t\t\t{\n\t\t\t\treturn top.BX.PULL.isConnected();\n\t\t\t}\n\t\t\tconst debugInfo = top.BX.PULL.getDebugInfoArray();\n\n\t\t\treturn debugInfo.connected;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tinitPushEvent(): void\n\t{\n\t\tif (!isPushEventInited)\n\t\t{\n\t\t\tif (this.isPullConnected())\n\t\t\t{\n\t\t\t\tisPushEventInited = true;\n\t\t\t\ttop.BX.addCustomEvent('onPullEvent-documentgenerator', this.showImage.bind(this));\n\t\t\t}\n\t\t\telse if (this.documentId > 0 && !this.imageUrl)\n\t\t\t{\n\t\t\t\tlet action = 'documentgenerator.api.document.get';\n\t\t\t\tconst data = { id: this.documentId };\n\t\t\t\tif (this.isPublicMode && Type.isString(this.hash) && this.hash.length > 10)\n\t\t\t\t{\n\t\t\t\t\taction = 'documentgenerator.api.publicdocument.get';\n\t\t\t\t\tdata.hash = this.hash;\n\t\t\t\t}\n\t\t\t\tisPushEventInited = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tvoid Ajax.runAction(action, { data })\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tisPushEventInited = false;\n\t\t\t\t\t\t\tif (response.data.document.imageUrl)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.showImage('showImage', response.data.document);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.initPushEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tisPushEventInited = false;\n\t\t\t\t\t\t});\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t}\n\t}\n\n\tapplyOptions(options): void\n\t{\n\t\tif (options.id)\n\t\t{\n\t\t\tthis.documentId = options.id;\n\t\t}\n\n\t\tif (options.pullTag)\n\t\t{\n\t\t\tthis.pullTag = options.pullTag;\n\t\t}\n\n\t\tif (options.imageUrl)\n\t\t{\n\t\t\tthis.imageUrl = options.imageUrl;\n\t\t}\n\n\t\tif (options.startImageUrl)\n\t\t{\n\t\t\tthis.startImageUrl = options.startImageUrl;\n\t\t}\n\n\t\tif (options.printUrl)\n\t\t{\n\t\t\tthis.printUrl = options.printUrl;\n\t\t}\n\n\t\tif (options.pdfUrl)\n\t\t{\n\t\t\tthis.pdfUrl = options.pdfUrl;\n\t\t}\n\n\t\tif (options.emailDiskFile)\n\t\t{\n\t\t\tthis.emailDiskFile = options.emailDiskFile;\n\t\t}\n\n\t\tif (Type.isDomNode(options.imageContainer))\n\t\t{\n\t\t\tthis.imageContainer = options.imageContainer;\n\t\t}\n\n\t\tif (Type.isDomNode(options.previewNode))\n\t\t{\n\t\t\tthis.previewNode = options.previewNode;\n\t\t}\n\n\t\tif (Type.isDomNode(options.transformationErrorNode))\n\t\t{\n\t\t\tthis.transformationErrorNode = options.transformationErrorNode;\n\t\t}\n\n\t\tif (Type.isBoolean(options.isTransformationError))\n\t\t{\n\t\t\tthis.isTransformationError = options.isTransformationError;\n\t\t}\n\n\t\tif (Type.isString(options.transformationErrorMessage))\n\t\t{\n\t\t\tthis.transformationErrorMessage = options.transformationErrorMessage;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.transformationErrorMessage = '';\n\t\t}\n\n\t\tif (Type.isNumber(options.transformationErrorCode))\n\t\t{\n\t\t\tthis.transformationErrorCode = options.transformationErrorCode;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.transformationErrorCode = 0;\n\t\t}\n\n\t\tif (Type.isFunction(options.onReady))\n\t\t{\n\t\t\tthis.onReady = options.onReady;\n\t\t}\n\n\t\tthis.initPushEvent();\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\tif (!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({ size: 100, offset: { left: '-8%', top: '6%' } });\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tif (this.imageContainer && !this.getLoader().isShown())\n\t\t{\n\t\t\tthis.getLoader().show(this.imageContainer);\n\t\t}\n\n\t\tif (Type.isDomNode(this.imageNode))\n\t\t{\n\t\t\tDom.style(this.imageNode, { opacity: 0.5 });\n\t\t}\n\t}\n\n\thideLoader(): void\n\t{\n\t\tif (this.getLoader().isShown())\n\t\t{\n\t\t\tthis.getLoader().hide();\n\t\t}\n\n\t\tif (Type.isDomNode(this.imageNode))\n\t\t{\n\t\t\tDom.style(this.imageNode, { opacity: 1 });\n\t\t}\n\t}\n\n\tisValidPullTag(command, params): boolean\n\t{\n\t\treturn command === 'showImage' && params.pullTag === this.pullTag;\n\t}\n\n\tshowImage(command, params): void\n\t{\n\t\tif (this.isValidPullTag(command, params))\n\t\t{\n\t\t\tthis.applyOptions(params);\n\t\t\tif (Type.isDomNode(this.previewNode))\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\t\t\tBX.hide(this.previewNode);\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(this.transformationErrorNode))\n\t\t\t{\n\t\t\t\tif (this.isTransformationError)\n\t\t\t\t{\n\t\t\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\t\t\t\tBX.show(this.transformationErrorNode);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\t\t\t\tBX.hide(this.transformationErrorNode);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.showImageNode();\n\t\t\tthis.onReady(params);\n\t\t\tif (this.loader && this.loader.isShown())\n\t\t\t{\n\t\t\t\tthis.loader.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tstart(): void\n\t{\n\t\tif (this.imageUrl)\n\t\t{\n\t\t\tthis.showImageNode();\n\t\t}\n\t\telse if (this.startImageUrl)\n\t\t{\n\t\t\tthis.imageUrl = this.startImageUrl;\n\t\t\tthis.startImageUrl = null;\n\t\t\tthis.showImageNode();\n\t\t\tif (Type.isDomNode(this.imageNode))\n\t\t\t{\n\t\t\t\tDom.style(this.imageNode, { opacity: 0.2 });\n\t\t\t}\n\n\t\t\tif (this.pullTag)\n\t\t\t{\n\t\t\t\tthis.showLoader();\n\t\t\t}\n\t\t}\n\t\telse if (!this.isTransformationError && !this.previewNode)\n\t\t{\n\t\t\tthis.showLoader();\n\t\t}\n\t}\n\n\tshowImageNode(): void\n\t{\n\t\tif (!Type.isDomNode(this.imageContainer))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isDomNode(this.imageNode))\n\t\t{\n\t\t\tthis.imageNode = Dom.create('img', {\n\t\t\t\tstyle: {\n\t\t\t\t\topacity: 0.1,\n\t\t\t\t\tdisplay: 'none',\n\t\t\t\t},\n\t\t\t});\n\t\t\tDom.append(this.imageNode, this.imageContainer);\n\t\t}\n\n\t\tif (this.imageUrl)\n\t\t{\n\t\t\tthis.imageNode.src = this.imageUrl;\n\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\t\tBX.show(this.imageNode);\n\t\t\tDom.style(this.imageNode, { opacity: 1 });\n\t\t}\n\t}\n}\n"],"names":["Button","constructor","id","params","progress","links","linksLoaded","intranetExtensions","text","className","menuClassName","provider","value","loaderPath","documentUrl","templateListUrl","moduleId","templatesText","documentsText","sliderWidth","loader","fillParameters","Type","isObjectLike","Object","keys","length","isString","hasOwn","parseInt","getElement","document","getElementById","createElement","node","tagName","attrs","Dom","create","init","Event","bind","showPopup","showLoader","Ajax","runAction","data","then","response","fillLinksFromResponse","hideLoader","setTimeout","catch","MessageBox","alert","errors","pop","message","EventEmitter","subscribe","event","command","getData","MenuManager","destroy","getPopupMenuId","templates","isArray","i","url","BX","util","add_url_param","templateId","providerClassName","replaceAll","analyticsLabel","templateCode","code","docParams","Text","encode","name","title","onclick","JSON","stringify","documentList","module","viewUrl","canEditTemplate","templateList","prepareLinksForPopup","result","addDelimiter","delimiter","push","show","offsetLeft","offsetTop","closeByEsc","maxWidth","getLoader","Loader","size","isShown","hide","parseUrl","key","parser","split","href","queries","search","replace","protocol","host","hostname","port","pathname","hash","openUrl","width","SidePanel","isNumber","Instance","open","cacheable","menu","getCurrentMenu","popupWindow","close","location","popupConfirm","showMessage","content","buttons","onclose","isNil","PopupWindowButton","Loc","getMessage","events","click","e","PreventDefault","isDomNode","innerHTML","Popup","zIndex","autoHide","closeIcon","overlay","onPopupClose","isFunction","onPopupDestroy","children","titleBar","contentColor","Document","askAboutUsingPreviousDocumentNumber","onsuccess","ondecline","isProcessing","select","filter","toLowerCase","order","navigation","documents","previousNumber","number","onBeforeCreate","urlParams","decodeURIComponent","options","reason","map","error","join","isPushEventInited","DocumentPreview","documentId","pullTag","startImageUrl","imageUrl","imageContainer","imageNode","printUrl","pdfUrl","isPublicMode","isTransformationError","transformationErrorNode","transformationErrorMessage","transformationErrorCode","previewNode","onReady","applyOptions","initPushEvent","start","isPullConnected","top","PULL","isConnected","debugInfo","getDebugInfoArray","connected","addCustomEvent","showImage","action","emailDiskFile","isBoolean","offset","left","style","opacity","isValidPullTag","showImageNode","display","append","src"],"mappings":"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"}