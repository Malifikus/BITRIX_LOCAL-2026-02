this.BX=this.BX||{};this.BX.Socialnetwork=this.BX.Socialnetwork||{};(function(e,t,o,s,i,n,a){"use strict";var r=function(){babelHelpers.createClass(e,null,[{key:"getInstance",value:function t(){if(a.Type.isNull(e.instance)){e.instance=new e}return e.instance}}]);function e(){babelHelpers.classCallCheck(this,e);this.waitTimeout=null;this.waitPopup=null}babelHelpers.createClass(e,[{key:"show",value:function e(t){var o=this;if(t!==0){return this.waitTimeout=setTimeout((function(){o.show(0)}),50)}if(!this.waitPopup){this.waitPopup=new BX.PopupWindow("sonet_common_wait_popup",window,{autoHide:true,lightShadow:true,zIndex:2,content:BX.create("DIV",{props:{className:"sonet-wait-cont"},children:[BX.create("DIV",{props:{className:"sonet-wait-icon"}}),BX.create("DIV",{props:{className:"sonet-wait-text"},html:BX.message("SONET_EXT_COMMON_WAIT")})]})})}else{this.waitPopup.setBindElement(window)}this.waitPopup.show()}},{key:"hide",value:function e(){if(this.waitTimeout){clearTimeout(this.waitTimeout);this.waitTimeout=null}if(this.waitPopup){this.waitPopup.close()}}}]);return e}();babelHelpers.defineProperty(r,"instance",null);var c=function(){function e(){babelHelpers.classCallCheck(this,e);this.menuPopup=null;this.menuItem=null;this.favoritesValue=null}babelHelpers.createClass(e,[{key:"setItemTitle",value:function e(t){if(!a.Type.isDomNode(this.menuItem)){return}this.menuItem.innerHTML=t?a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE"):a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD")}}],[{key:"getInstance",value:function t(){var o=this;if(a.Type.isNull(this.instance)){this.instance=new e;BX.addCustomEvent("SidePanel.Slider:onClose",(function(){if(o.instance.menuPopup){o.instance.menuPopup.close()}}));BX.addCustomEvent("BX.Socialnetwork.WorkgroupMenuIcon:onSetFavorites",(function(e){o.getInstance().setItemTitle(e.value)}))}return this.instance}}]);return e}();babelHelpers.defineProperty(c,"instance",null);var l=function(){function e(t){babelHelpers.classCallCheck(this,e);this.successPopup=null;this.groupId=!a.Type.isUndefined(t.GROUP_ID)?Number(t.GROUP_ID):0;this.relationId=!a.Type.isUndefined(t.RELATION_ID)?Number(t.RELATION_ID):0;this.urls={rejectOutgoingRequest:a.Type.isStringFilled(t.URL_REJECT_OUTGOING_REQUEST)?t.URL_REJECT_OUTGOING_REQUEST:"",groupsList:a.Type.isStringFilled(t.URL_GROUPS_LIST)?t.URL_GROUPS_LIST:""};this.project=a.Type.isBoolean(t.PROJECT)?t.PROJECT:false;this.scrum=a.Type.isBoolean(t.SCRUM)?t.SCRUM:false}babelHelpers.createClass(e,[{key:"showPopup",value:function e(){var t=this;if(this.relationId<=0||!a.Type.isStringFilled(this.urls.rejectOutgoingRequest)){return}var o=a.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TITLE2");var n=a.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT2");if(this.scrum){o=a.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TITLE2_SCRUM");n=a.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT2_SCRUM")}else if(this.project){o=a.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TITLE2_PROJECT");n=a.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT2_PROJECT")}this.successPopup=new s.Popup("bx-group-join-successfull-request-popup",window,{width:420,autoHide:false,lightShadow:false,zIndex:1e3,overlay:true,cachable:false,content:a.Dom.create("DIV",{children:[a.Dom.create("DIV",{text:o,props:{className:"sonet-group-join-successfull-request-popup-title"}}),a.Dom.create("DIV",{text:n,props:{className:"sonet-group-join-successfull-request-popup-text"}})]}),buttons:[new i.Button({size:i.Button.Size.MEDIUM,text:a.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_CLOSE_BUTTON"),events:{click:function e(o){t.onClose(o.getContainer())}}}),new i.Button({size:i.Button.Size.MEDIUM,color:i.Button.Color.LINK,text:a.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_CANCEL_BUTTON"),events:{click:function e(o){t.onCancelRequest(o.getContainer())}}})],closeByEsc:false,closeIcon:false});this.successPopup.show()}},{key:"onClose",value:function t(o){var s=this;if(this.groupId<=0||!a.Type.isDomNode(o)){return}e.showButtonWait(o);a.ajax.runAction("socialnetwork.api.usertogroup.setHideRequestPopup",{data:{groupId:this.groupId}}).then((function(t){e.hideButtonWait(o);s.successPopup.close()}),(function(){e.hideButtonWait(o)}))}},{key:"onCancelRequest",value:function t(o){var s=this;if(this.groupId<=0||!a.Type.isDomNode(o)){return}var i=document.getElementById("bx-group-delete-request-error");e.hideError(i);e.showButtonWait(o);a.ajax.runAction("socialnetwork.api.usertogroup.cancelIncomingRequest",{data:{groupId:this.groupId,userId:parseInt(a.Loc.getMessage("USER_ID"))}}).then((function(t){e.hideButtonWait(o);s.successPopup.destroy();if(a.Type.isStringFilled(s.urls.groupsList)){top.location.href=s.urls.groupsList}s.reload()}))["catch"]((function(t){e.showError(a.Loc.getMessage("SONET_EXT_COMMON_AJAX_ERROR"),i);e.hideButtonWait(o)}))}}],[{key:"showButtonWait",value:function e(t){if(a.Type.isStringFilled(t)){t=document.getElementById(t)}if(!a.Type.isDomNode(t)){return}t.classList.add("ui-btn-clock");t.disabled=true;t.style.cursor="auto"}},{key:"hideButtonWait",value:function e(t){if(a.Type.isStringFilled(t)){t=document.getElementById(t)}if(!a.Type.isDomNode(t)){return}t.classList.remove("ui-btn-clock");t.disabled=false;t.style.cursor="cursor"}},{key:"showError",value:function e(t,o){if(a.Type.isStringFilled(o)){o=document.getElementById(o)}if(!a.Type.isDomNode(o)){return}o.innerHTML=t;o.classList.remove("sonet-ui-form-error-block-invisible")}},{key:"hideError",value:function e(t){if(a.Type.isStringFilled(t)){t=document.getElementById(t)}if(!a.Type.isDomNode(t)){return}t.classList.add("sonet-ui-form-error-block-invisible")}}]);return e}();var u=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"showGroupMenuPopup",value:function e(t){var o=this;var i=t.bindElement;if(a.Type.isStringFilled(i)){i=document.getElementById(i)}var n=parseInt(a.Loc.getMessage("USER_ID"));var r=c.getInstance();if(i.tagName==="BUTTON"){i.classList.add("ui-btn-active")}var l=[];var u="";if(n>0){l.push({text:!!r.favoritesValue?a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE"):a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD"),title:!!r.favoritesValue?a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE"):a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD"),id:"set-group-favorite",onclick:function e(){var s=r.favoritesValue;r.setItemTitle(!s);r.favoritesValue=!s;o.setFavoritesAjax({groupId:t.groupId,favoritesValue:s,callback:{success:function e(o){BX.onCustomEvent(window,"BX.Socialnetwork.WorkgroupFavorites:onSet",[{id:t.groupId,name:o.NAME,url:o.URL,extranet:!a.Type.isUndefined(o.EXTRANET)?o.EXTRANET:"N"},!s]);BX.onCustomEvent(window,"BX.Socialnetwork.WorkgroupMenu:onSetFavorites",[{groupId:t.groupId,value:!s}]);window.top.BX.SidePanel.Instance.postMessageAll(window,"sonetGroupEvent",{code:"afterSetFavorites",data:{groupId:o.ID,value:o.RESULT==="Y"}})},failure:function e(){r.favoritesValue=s;r.setItemTitle(s)}}})}});if(t.perms.canInitiate){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQU");if(!!t.isScrumProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQU_SCRUM")}else if(!!t.isProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQU_PROJECT")}l.push({text:u,title:u,href:t.urls.requestUser,onclick:function e(t,o){return o.getMenuWindow().close()}})}if(t.perms.canModify){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EDIT");if(!!t.isScrumProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EDIT_SCRUM")}else if(!!t.isProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EDIT_PROJECT")}l.push({text:u,title:u,href:t.urls.edit,onclick:function e(t,o){return o.getMenuWindow().close()}});if(!t.hideArchiveLinks){var _={text:a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FEAT"),title:a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FEAT"),onclick:function e(t,o){return o.getMenuWindow().close()}};if(t.editFeaturesAllowed){_.href=t.urls.features}else{_.className="menu-popup-item menu-popup-no-icon sonet-common-tariff-lock";_.onclick=function(){a.Runtime.loadExtension("socialnetwork.limit").then((function(e){var t=e.Limit;t.showInstance({featureId:"socialnetwork_projects_access_permissions"})}))}}l.push(_)}var d=a.Extension.getSettings("socialnetwork.common").isCollabConverterEnabled;if(d&&t.userRole===a.Loc.getMessage("USER_TO_GROUP_ROLE_OWNER")&&!t.isProject&&!t.isScrumProject){l.push({text:a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_CONVERT_TO_COLLAB"),title:a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_CONVERT_TO_COLLAB"),onclick:function e(o,s){s.getMenuWindow().close();a.Runtime.loadExtension("socialnetwork.collab.converter").then((function(e){var o=e.Converter;var s=parseInt(a.Type.isUndefined(t.groupId)?0:t.groupId,10);new o({redirectAfterSuccess:true}).convertToCollab(s)}))["catch"]((function(e){console.error(e)}))}})}u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_DELETE");if(!!t.isScrumProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_DELETE_SCRUM")}else if(!!t.isProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_DELETE_PROJECT")}l.push({text:u,title:u,href:t.urls["delete"]})}l.push({text:t.perms.canModerate?a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_MEMBERS_EDIT"):a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_MEMBERS_VIEW"),title:t.perms.canModerate?a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_MEMBERS_EDIT"):a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_MEMBERS_VIEW"),href:t.urls.members,onclick:function e(t,o){return o.getMenuWindow().close()}});if(t.perms.canInitiate){if(t.perms.canProcessRequestsIn){l.push({text:a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQ_IN"),title:a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQ_IN"),href:t.urls.requests,onclick:function e(t,o){return o.getMenuWindow().close()}})}u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQ_OUT");if(!!t.isScrumProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQ_OUT_SCRUM")}else if(!!t.isProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQ_OUT_PROJECT")}l.push({text:u,title:u,href:t.urls.requestsOut})}if(t.perms.canCreate){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_COPY");if(!!t.isScrumProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_COPY_SCRUM")}else if(!!t.isProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_COPY_PROJECT")}var O={text:u,title:u,onclick:function e(t,o){return o.getMenuWindow().close()}};if(t.copyFeatureAllowed){O.href=t.urls.copy}else{O.className="menu-popup-item menu-popup-no-icon sonet-common-tariff-lock";O.onclick=function(){a.Runtime.loadExtension("socialnetwork.limit").then((function(e){var t=e.Limit;t.showInstance({featureId:"socialnetwork_copy_project",limitAnalyticsLabels:{module:"socialnetwork",source:"projectCardActions"}})}))}}if(!t.isScrumProject){l.push(O)}}if((!a.Type.isStringFilled(t.userRole)||t.userRole===a.Loc.getMessage("USER_TO_GROUP_ROLE_REQUEST")&&t.initiatedByType===a.Loc.getMessage("USER_TO_GROUP_INITIATED_BY_GROUP"))&&!t.hideArchiveLinks){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_JOIN");if(!!t.isScrumProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_JOIN_SCRUM")}else if(!!t.isProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_JOIN_PROJECT")}var p={text:u,title:u};if(!!t.isOpened){p.onclick=function(){o.sendJoinRequest(t)}}else{p.href=t.urls.userRequestGroup}l.push(p)}if(a.Type.isStringFilled(t.userRole)&&t.userRole===a.Loc.getMessage("USER_TO_GROUP_ROLE_REQUEST")&&t.initiatedByType===a.Loc.getMessage("USER_TO_GROUP_INITIATED_BY_USER")&&parseInt(t.initiatedByUserId)===n){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_DELETE_REQUEST");l.push({text:u,title:u,onclick:function e(){o.cancelIncomingRequest(t)}})}if(a.Type.isBoolean(t.perms.canLeave)&&t.perms.canLeave||!a.Type.isBoolean(t.perms.canLeave)&&t.userIsMember&&!t.userIsAutoMember&&t.userRole!==a.Loc.getMessage("USER_TO_GROUP_ROLE_OWNER")){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EXIT");if(!!t.isScrumProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EXIT_SCRUM")}else if(!!t.isProject){u=a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EXIT_PROJECT")}l.push({text:u,title:u,href:t.urls.userLeaveGroup})}if(t.canPickTheme){l.push({text:a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_THEME_DIALOG"),title:a.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_THEME_DIALOG"),onclick:function e(){BX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false)}})}}var E=s.MenuManager.create("group-profile-menu",i,l,{offsetTop:5,offsetLeft:i.offsetWidth-18,angle:true,events:{onPopupClose:function e(){if(i.tagName==="BUTTON"){i.classList.remove("ui-btn-active")}}}});var g=E.getMenuItem("set-group-favorite");if(g){r.menuItem=g.layout.text}E.popupWindow.show();r.menuPopup=E}},{key:"sendJoinRequest",value:function e(t){r.getInstance().show();if(c.getInstance()&&c.getInstance().menuPopup){c.getInstance().menuPopup.close()}a.ajax({url:t.urls.userRequestGroup,method:"POST",dataType:"json",data:{groupID:t.groupId,MESSAGE:"",ajax_request:"Y",save:"Y",sessid:a.Loc.getMessage("bitrix_sessid")},onsuccess:function e(o){r.getInstance().hide();if(a.Type.isStringFilled(o.MESSAGE)&&o.MESSAGE==="SUCCESS"&&a.Type.isStringFilled(o.URL)){BX.onCustomEvent(window.top,"sonetGroupEvent",[{code:"afterJoinRequestSend",data:{groupId:t.groupId}}]);top.location.href=o.URL}},onfailure:function e(){r.getInstance().hide()}})}},{key:"cancelIncomingRequest",value:function e(t){var o=this;r.getInstance().show();if(c.getInstance()&&c.getInstance().menuPopup){c.getInstance().menuPopup.close()}a.ajax.runAction("socialnetwork.api.usertogroup.cancelIncomingRequest",{data:{groupId:t.groupId,userId:parseInt(a.Loc.getMessage("USER_ID"))}}).then((function(e){r.getInstance().hide();window.top.BX.SidePanel.Instance.postMessageAll(window,"sonetGroupEvent",{code:"afterIncomingRequestCancel",data:{groupId:t.groupId}});o.reload()}))["catch"]((function(e){r.getInstance().hide()}))}},{key:"setFavoritesAjax",value:function e(t){a.ajax.runAction("socialnetwork.api.workgroup.setFavorites",{data:{params:{groupId:t.groupId,value:t.favoritesValue===false?"Y":"N",getAdditionalResultData:true}},analyticsLabel:{b24statAction:t.favoritesValue?"removeFavSonetGroup":"addFavSonetGroup"}}).then((function(e){t.callback.success(e.data)}))["catch"]((function(e){t.callback.failure({ERROR:e.errors[0].message})}))}},{key:"reload",value:function e(){if(top!==window){if(!a.Type.isUndefined(top.BX.SidePanel)){top.BX.SidePanel.Instance.getSliderByWindow(window).showLoader()}window.location.reload()}else if(!a.Type.isUndefined(top.BX.SidePanel)&&top.BX.SidePanel.Instance.isOpen()){top.location.href=top.BX.SidePanel.Instance.getPageUrl()}else{top.location.reload()}}},{key:"reloadBlock",value:function e(t){if(!a.Type.isPlainObject(t)||!a.Type.isStringFilled(t.blockId)||!document.getElementById(t.blockId)){return}var o="";if(!a.Type.isUndefined(top.BX.SidePanel)&&top.BX.SidePanel.Instance.isOpen()){o=top.BX.SidePanel.Instance.getPageUrl()}else{o=window.location.href}a.ajax.promise({url:o,method:"POST",dataType:"json",data:{BLOCK_RELOAD:"Y",BLOCK_ID:t.blockId}}).then((function(e){if(!a.Type.isUndefined(e.CONTENT)){document.getElementById(t.blockId).innerHTML=e.CONTENT;setTimeout((function(){a.ajax.processRequestData(e.CONTENT,{dataType:"HTML"})}),0)}}))}},{key:"openMessenger",value:function e(t){return a.ajax.runAction("socialnetwork.api.workgroup.getChatId",{data:{groupId:parseInt(t,10)}}).then((function(e){if(e.data){o.Messenger.openChat("chat".concat(parseInt(e.data,10)))}}))["catch"]((function(){}))}}]);return e}();babelHelpers.defineProperty(u,"showError",l.showError);babelHelpers.defineProperty(u,"hideError",l.hideError);babelHelpers.defineProperty(u,"showButtonWait",l.showButtonWait);babelHelpers.defineProperty(u,"hideButtonWait",l.hideButtonWait);var _=function(){function e(){babelHelpers.classCallCheck(this,e);this.widget=null}babelHelpers.createClass(e,[{key:"show",value:function e(t){if(this.widget){if(this.widget.isShown()){this.widget.close();return}}var o=this.getData({targetNode:t});if(a.Type.isNull(o)){return}this.widget=this.getWidget({targetNode:t,data:o});if(this.widget){this.widget.show()}}},{key:"hide",value:function e(){if(this.widget&&this.widget.isShown()){this.widget.close()}}},{key:"getData",value:function e(t){return{}}},{key:"getWidget",value:function e(t){return null}}]);return e}();var d,O,p;var E=function(e){babelHelpers.inherits(t,e);function t(e){var o;babelHelpers.classCallCheck(this,t);o=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));o.groupId=!a.Type.isUndefined(e.groupId)?parseInt(e.groupId):0;o.avatarPath=a.Type.isStringFilled(e.avatarPath)?e.avatarPath:"";o.avatarType=a.Type.isStringFilled(e.avatarType)?e.avatarType:"";o.projectTypeCode=a.Type.isStringFilled(e.projectTypeCode)?e.projectTypeCode:"";o.urls=a.Type.isPlainObject(e.urls)?e.urls:{};o.perms=a.Type.isPlainObject(e.perms)?e.perms:{};o.editRolesAllowed=a.Type.isBoolean(e.editRolesAllowed)?e.editRolesAllowed:false;return o}babelHelpers.createClass(t,[{key:"getData",value:function e(t){var o=null;var s=t.targetNode;if(!a.Type.isDomNode(s)){return o}o=s.getAttribute("data-workgroup");try{o=JSON.parse(o)}catch(e){o=null}return o}},{key:"getWidget",value:function e(t){var o=a.Type.isDomNode(t.targetNode)?t.targetNode:null;if(!o){return null}var s=a.Type.isPlainObject(t.data)?t.data:{};return new n.PopupComponentsMaker({target:o,content:[{html:[{html:this.renderAbout(s)}]},{html:[{html:this.renderMembers(s)},{html:this.renderRoles(s)}]}]})}},{key:"renderAbout",value:function e(){var t=this;var o="<i></i>";if(a.Type.isStringFilled(this.avatarPath)){o="<i style=\"background: #fff url('".concat(encodeURI(this.avatarPath),"') no-repeat; background-size: cover;\"></i>")}var s="";var i="";switch(this.projectTypeCode.toLowerCase()){case"project":s=a.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_PROJECT");i=a.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_PROJECT");break;case"scrum":s=a.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_SCRUM");i=a.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_SCRUM");break;default:s=a.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_GROUP");i=a.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_GROUP")}var n=["sonet-common-widget-avatar"];if(!a.Type.isStringFilled(this.avatarPath)&&a.Type.isStringFilled(this.avatarType)){n.push("sonet-common-workgroup-avatar");n.push("--".concat(this.avatarType))}else{n.push("ui-icon");n.push("ui-icon-common-user-group")}var r=a.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sonet-common-widget-item">\n\t\t\t\t<div class="sonet-common-widget-item-container">\n\t\t\t\t\t<div class="','">','</div>\n\t\t\t\t\t<div class="sonet-common-widget-item-content">\n\t\t\t\t\t\t<div class="sonet-common-widget-item-title">','</div>\n\t\t\t\t\t\t<div class="sonet-common-widget-item-description">',"</div>\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),n.join(" "),o,s,i);a.Event.bind(r,"click",(function(){if(!a.Type.isStringFilled(t.urls.card)){return}BX.SidePanel.Instance.open(t.urls.card,{width:900,loader:"socialnetwork:group-card"});t.hide()}));return r}},{key:"renderMembers",value:function e(){var t=this;var o=a.Tag.render(O||(O=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sonet-common-widget-item">\n\t\t\t\t<div class="sonet-common-widget-item-container">\n\t\t\t\t\t<div class="sonet-common-widget-icon ui-icon ui-icon-common-light-company"><i></i></div>\n\t\t\t\t\t<div class="sonet-common-widget-item-content">\n\t\t\t\t\t\t<div class="sonet-common-widget-item-title">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),a.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_MEMBERS_TITLE"));a.Event.bind(o,"click",(function(){if(!a.Type.isStringFilled(t.urls.members)){return}BX.SidePanel.Instance.open(t.urls.members,{width:1200,loader:"group-users-loader"});t.hide()}));return o}},{key:"renderRoles",value:function e(){var t=this;var o=a.Type.isBoolean(this.perms.canModify)&&this.perms.canModify;var s=!o?'data-hint="'.concat(a.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ROLES_TITLE_NO_PERMISSIONS"),'" data-hint-no-icon'):"";var i=this.editRolesAllowed?"sonet-common-widget-item-content":"sonet-common-widget-item-content-lock";var n=this.editRolesAllowed?"--hidden":"";var r=a.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sonet-common-widget-item" ','>\n\t\t\t\t<div class="sonet-common-widget-item-container">\n\t\t\t\t\t<div class="sonet-common-widget-icon ui-icon ui-icon-service-light-roles-rights"><i></i></div>\n\t\t\t\t\t<div class="','">\n\t\t\t\t\t\t<div class="sonet-common-widget-item-title">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sonet-common-widget-item-tariff-lock ','"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),s,i,a.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ROLES_TITLE"),n);a.Event.bind(r,"click",(function(){if(!o||!a.Type.isStringFilled(t.urls.features)){return}if(t.editRolesAllowed){BX.SidePanel.Instance.open(t.urls.features,{width:800,loader:"group-features-loader"})}else{a.Runtime.loadExtension("socialnetwork.limit").then((function(e){var t=e.Limit;t.showInstance({featureId:"socialnetwork_projects_access_permissions",limitAnalyticsLabels:{module:"socialnetwork",source:"projectWidget"}})}))}t.hide()}));return r}}]);return t}(_);BX.SocialnetworkUICommon=u;BX.SocialnetworkUICommon.Waiter=r;BX.SocialnetworkUICommon.SonetGroupMenu=c;BX.Socialnetwork.UIWorkgroupWidget=E;e.Common=u;e.Waiter=r;e.SonetGroupMenu=c;e.WorkgroupWidget=E;e.RecallJoinRequest=l})(this.BX.Socialnetwork.UI=this.BX.Socialnetwork.UI||{},BX.Event,BX.Messenger.v2.Lib,BX.Main,BX.UI,BX.UI,BX);
//# sourceMappingURL=common.bundle.map.js