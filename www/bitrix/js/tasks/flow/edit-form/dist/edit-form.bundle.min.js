this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};(function(e,s,a,t,l,i,r,o,n,c,d,b,p,v){"use strict";class h{getId(){}getTitle(){}setFlow(e){}getFlowId(){}render(){}getFields(e){}getRequiredData(){return[]}update(){this.cleanErrors()}cleanErrors(){}showErrors(e){}onContinueClick(e={}){return Promise.resolve(true)}onDialogLoad(e){const s=e.getTarget();const a=s.getTagSelector();const t=a.getTags();t.forEach((e=>{if(!e.deselectable){e.setDeselectable(true);e.render()}}))}}let u=e=>e,F,L,P,f,H;var B=babelHelpers.classPrivateFieldLooseKey("params");var y=babelHelpers.classPrivateFieldLooseKey("layout");var _=babelHelpers.classPrivateFieldLooseKey("renderChecker");var m=babelHelpers.classPrivateFieldLooseKey("setHint");var k=babelHelpers.classPrivateFieldLooseKey("renderValue");var T=babelHelpers.classPrivateFieldLooseKey("renderInput");var g=babelHelpers.classPrivateFieldLooseKey("renderEntitySelectorValue");var O=babelHelpers.classPrivateFieldLooseKey("sendAnalytics");var S=babelHelpers.classPrivateFieldLooseKey("onEntitySelectorItemSelectedHandler");var E=babelHelpers.classPrivateFieldLooseKey("getSelectedItem");class w extends c.EventEmitter{constructor(e){super(e);Object.defineProperty(this,E,{value:x});Object.defineProperty(this,S,{value:M});Object.defineProperty(this,O,{value:K});Object.defineProperty(this,g,{value:R});Object.defineProperty(this,T,{value:A});Object.defineProperty(this,k,{value:C});Object.defineProperty(this,m,{value:D});Object.defineProperty(this,_,{value:I});Object.defineProperty(this,B,{writable:true,value:void 0});Object.defineProperty(this,y,{writable:true,value:void 0});this.setEventNamespace("BX.Tasks.Flow.EditForm.ValueChecker");babelHelpers.classPrivateFieldLooseBase(this,B)[B]=e;babelHelpers.classPrivateFieldLooseBase(this,y)[y]={};if(babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector){var s;babelHelpers.classPrivateFieldLooseBase(this,B)[B].value=(s=babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector.getPreselectedItems()[0])==null?void 0:s[1]}}isChecked(){return babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker.isChecked()}getValue(){var e,s;const a=(e=babelHelpers.classPrivateFieldLooseBase(this,E)[E]())==null?void 0:e.id;return((s=babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue)==null?void 0:s.value)||a||babelHelpers.classPrivateFieldLooseBase(this,B)[B].placeholder}setValue(e){babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker.switcher.check(e)}setErrors(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker)==null?void 0:s.setErrors(e)}cleanError(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker)==null?void 0:e.cleanError()}getInputNode(){return babelHelpers.classPrivateFieldLooseBase(this,T)[T]()}getChecker(){return babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker}disable(e){if(e){babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker.switcher.check(true)}babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker.switcher.disable(e)}render(){babelHelpers.classPrivateFieldLooseBase(this,y)[y].wrap=d.Tag.render(F||(F=u`
			<div
				class="tasks-flow__create-value-checker ${0}"
				data-id="tasks-flow-value-checker-${0}"
			>
				${0}
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,B)[B].value?"":"--off",babelHelpers.classPrivateFieldLooseBase(this,B)[B].id,babelHelpers.classPrivateFieldLooseBase(this,_)[_](),babelHelpers.classPrivateFieldLooseBase(this,k)[k](),babelHelpers.classPrivateFieldLooseBase(this,g)[g]());this.update();const e=new IntersectionObserver((()=>{if(babelHelpers.classPrivateFieldLooseBase(this,y)[y].wrap.offsetWidth>0){this.update();e.disconnect()}}));e.observe(babelHelpers.classPrivateFieldLooseBase(this,y)[y].wrap);return babelHelpers.classPrivateFieldLooseBase(this,y)[y].wrap}update(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,y)[y].wrap.closest("form"))==null?void 0:e.dispatchEvent(new window.Event("change"));d.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,y)[y].wrap,"--off");if(this.isChecked()){d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,y)[y].wrap,"--off")}if(babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector){var s,a;babelHelpers.classPrivateFieldLooseBase(this,y)[y].entitySelector.innerText=(s=(a=babelHelpers.classPrivateFieldLooseBase(this,E)[E]())==null?void 0:a.title.text)!=null?s:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_SELECT")}if(!babelHelpers.classPrivateFieldLooseBase(this,B)[B].placeholder){return}babelHelpers.classPrivateFieldLooseBase(this,y)[y].disabledValue.innerText=this.getValue();d.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,y)[y].disabledValue,"display","");babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue.style.width=`${babelHelpers.classPrivateFieldLooseBase(this,y)[y].disabledValue.offsetWidth+7}px`;const t=babelHelpers.classPrivateFieldLooseBase(this,y)[y].wrap.querySelector(".ui-section__field");babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue.style.height=`${t.offsetHeight}px`}}function I(){var e,s,a;babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker=new b.Checker({checked:Boolean(babelHelpers.classPrivateFieldLooseBase(this,B)[B].value),title:babelHelpers.classPrivateFieldLooseBase(this,B)[B].title,hideSeparator:true,size:(e=babelHelpers.classPrivateFieldLooseBase(this,B)[B].size)!=null?e:"small",isFieldDisabled:(s=babelHelpers.classPrivateFieldLooseBase(this,B)[B].isFieldDisabled)!=null?s:false});babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker.subscribe("change",(e=>{const s=e.getData();this.update();if(s&&babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue){const e=babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue.value.length;babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue.focus();babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue.setSelectionRange(e,e)}}));c.EventEmitter.subscribe(babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker.switcher,"lock",(()=>{babelHelpers.classPrivateFieldLooseBase(this,m)[m](true);this.emit("lock",babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerContentField)}));c.EventEmitter.subscribe(babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker.switcher,"unlock",(()=>{babelHelpers.classPrivateFieldLooseBase(this,m)[m](false);this.emit("unlock",babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerContentField)}));babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerContentField=babelHelpers.classPrivateFieldLooseBase(this,y)[y].checker.render();babelHelpers.classPrivateFieldLooseBase(this,m)[m]((a=babelHelpers.classPrivateFieldLooseBase(this,B)[B].isFieldDisabled)!=null?a:false);return babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerContentField}function D(e){if(!babelHelpers.classPrivateFieldLooseBase(this,B)[B].hintText){return}if(babelHelpers.classPrivateFieldLooseBase(this,B)[B].hintOnDisabled===true&&e===false){d.Dom.attr(babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerContentField,"data-hint",null);d.Dom.attr(babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerContentField,"data-hint-no-icon",null)}else{d.Dom.attr(babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerContentField,"data-hint",babelHelpers.classPrivateFieldLooseBase(this,B)[B].hintText);d.Dom.attr(babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerContentField,"data-hint-no-icon",true)}}function C(){var e;if(!babelHelpers.classPrivateFieldLooseBase(this,B)[B].placeholder){return""}babelHelpers.classPrivateFieldLooseBase(this,y)[y].disabledValue=d.Tag.render(L||(L=u`
			<span class="tasks-flow__create-value-checker_text">${0}</span>
		`),this.getValue());return d.Tag.render(P||(P=u`
			<div class="tasks-flow__create-value-checker_input">
				${0}
				<span>${0}</span>
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,T)[T](),(e=babelHelpers.classPrivateFieldLooseBase(this,B)[B].unit)!=null?e:"",babelHelpers.classPrivateFieldLooseBase(this,y)[y].disabledValue)}function A(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue){return babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue}babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue=d.Tag.render(f||(f=u`
			<input class="ui-ctl-element" placeholder="${0}" value="${0}">
		`),babelHelpers.classPrivateFieldLooseBase(this,B)[B].placeholder,(e=babelHelpers.classPrivateFieldLooseBase(this,B)[B].value)!=null?e:babelHelpers.classPrivateFieldLooseBase(this,B)[B].placeholder);d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue,"input",(()=>this.update()));return babelHelpers.classPrivateFieldLooseBase(this,y)[y].checkerValue}function R(){if(!babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector){return""}babelHelpers.classPrivateFieldLooseBase(this,y)[y].entitySelector=d.Tag.render(H||(H=u`
			<div class="tasks-flow-template-selector">
				${0}
			</div>
		`),d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_SELECT"));babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector.subscribe("Item:onSelect",babelHelpers.classPrivateFieldLooseBase(this,S)[S].bind(this));babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector.subscribe("Item:onDeselect",(()=>this.update()));babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector.subscribe("onLoad",(()=>this.update()));babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector.setTargetNode(babelHelpers.classPrivateFieldLooseBase(this,y)[y].entitySelector);d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,y)[y].entitySelector,"click",(()=>{if(this.isChecked()){babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector.show();if(babelHelpers.classPrivateFieldLooseBase(this,B)[B].id==="task-template"){void babelHelpers.classPrivateFieldLooseBase(this,O)[O]()}}}));return babelHelpers.classPrivateFieldLooseBase(this,y)[y].entitySelector}async function K(){const{sendData:e}=await d.Runtime.loadExtension("ui.analytics");e({tool:"tasks",category:"flows",event:"flow_template_select",c_section:"tasks",c_sub_section:"flows_grid",c_element:"template_selection_button"})}function M(){this.update();babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector.hide()}function x(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,B)[B].entitySelector)==null?void 0:e.getSelectedItems()[0]}var N=babelHelpers.classPrivateFieldLooseKey("params");var W=babelHelpers.classPrivateFieldLooseKey("bind");var j=babelHelpers.classPrivateFieldLooseKey("getTextBeforeCursor");var $=babelHelpers.classPrivateFieldLooseKey("normalizeNumber");var U=babelHelpers.classPrivateFieldLooseKey("setCursorToFormattedPosition");class V{constructor(e){Object.defineProperty(this,U,{value:Y});Object.defineProperty(this,$,{value:Q});Object.defineProperty(this,j,{value:q});Object.defineProperty(this,W,{value:X});Object.defineProperty(this,N,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,N)[N]=e;babelHelpers.classPrivateFieldLooseBase(this,W)[W](e.input)}}function X(e){let s=false;e.addEventListener("input",(()=>{if(s){s=false;return}const a=babelHelpers.classPrivateFieldLooseBase(this,j)[j](e);e.value=babelHelpers.classPrivateFieldLooseBase(this,$)[$](e.value)||"";babelHelpers.classPrivateFieldLooseBase(this,U)[U](e,a);s=true;e.dispatchEvent(new Event("input"))}))}function q(e){const s=e.selectionStart;const a=e.value.slice(0,s);return babelHelpers.classPrivateFieldLooseBase(this,$)[$](a)}function Q(e){var s,a;let t=e.replace(/\D/g,"");t=parseInt(t,10);t=Math.max((s=babelHelpers.classPrivateFieldLooseBase(this,N)[N].min)!=null?s:1,t);t=Math.min((a=babelHelpers.classPrivateFieldLooseBase(this,N)[N].max)!=null?a:9999,t);return`${t||""}`}function Y(e,s){const a=s.slice(0,-1);const t=s.slice(-1);const l=e.value.match(`${a}.*?${t}`);if(!l){return}const i=l[0];const r=e.value.indexOf(i)+i.length;e.setSelectionRange(r,r)}const z=e=>new V(e);let G=e=>e,J,Z;var ee=babelHelpers.classPrivateFieldLooseKey("params");var se=babelHelpers.classPrivateFieldLooseKey("layout");var ae=babelHelpers.classPrivateFieldLooseKey("flow");var te=babelHelpers.classPrivateFieldLooseKey("getTasksCreatorsFromSelector");var le=babelHelpers.classPrivateFieldLooseKey("isShortInterval");var ie=babelHelpers.classPrivateFieldLooseKey("renderPlannedCompletionTime");class re extends h{constructor(e){super();Object.defineProperty(this,ie,{value:ce});Object.defineProperty(this,le,{value:ne});Object.defineProperty(this,te,{value:oe});Object.defineProperty(this,ee,{writable:true,value:void 0});Object.defineProperty(this,se,{writable:true,value:void 0});Object.defineProperty(this,ae,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=e;babelHelpers.classPrivateFieldLooseBase(this,se)[se]={};babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]={}}setFlow(e){babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=e}getFlowId(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].id)!=null?e:null}getId(){return"about-flow"}getTitle(){return d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_ABOUT_FLOW")}getRequiredData(){return["name","plannedCompletionTime","taskCreators"]}showErrors(e){if(e.includes("name")){babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowName.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_FLOW_NAME_ERROR")])}if(e.includes("plannedCompletionTime")){babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTime.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_PLANNED_COMPLETION_TIME_ERROR")]);babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTime.emit("onSetErrors")}if(e.includes("taskCreators")){babelHelpers.classPrivateFieldLooseBase(this,se)[se].taskCreatorsSelector.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_TASKS_CREATORS_ERROR")])}}cleanErrors(){babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowName.cleanError();babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTime.cleanError();babelHelpers.classPrivateFieldLooseBase(this,se)[se].taskCreatorsSelector.cleanError();babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTime.emit("onCleanErrors")}getFields(e={}){var s,a,t,l,i,r,o,n,c,d,b,p,v,h,u;const F=parseInt((s=babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTime)==null?void 0:s.getValue(),10);const L=(a=babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTimeIntervalSelector)==null?void 0:a.getDuration();const P=(t=babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTimeIntervalSelector)==null?void 0:t.getInterval();return{name:(l=(i=e.name)!=null?i:(r=babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowName)==null?void 0:r.getValue().trim())!=null?l:"",description:(o=(n=e.description)!=null?n:(c=babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowDescription)==null?void 0:c.getValue())!=null?o:"",taskCreators:(d=e.taskCreators)!=null?d:babelHelpers.classPrivateFieldLooseBase(this,te)[te](),plannedCompletionTime:(b=e.plannedCompletionTime)!=null?b:F*L||0,matchSchedule:(p=e.matchSchedule)!=null?p:babelHelpers.classPrivateFieldLooseBase(this,le)[le](P),matchWorkTime:(v=e.matchWorkTime)!=null?v:(h=(u=babelHelpers.classPrivateFieldLooseBase(this,se)[se].skipWeekends)==null?void 0:u.isChecked())!=null?h:true}}render(){babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowName=new b.TextInput({id:"tasks-flow-edit-form-field-name",label:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_FLOW_NAME"),placeholder:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_FLOW_NAME_PLACEHOLDER"),value:babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].name});babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowDescription=new b.TextArea({id:"tasks-flow-edit-form-field-description",label:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_DESCRIPTION"),placeholder:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_DESCRIPTION_PLACEHOLDER"),value:babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].description,resizeOnlyY:true});babelHelpers.classPrivateFieldLooseBase(this,se)[se].taskCreatorsSelector=new b.UserSelector({id:"tasks-flow-edit-form-field-creators",label:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_WHO_CAN_ADD_TASKS"),enableDepartments:true,values:babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].taskCreators,dialogEvents:{onLoad:this.onDialogLoad}});babelHelpers.classPrivateFieldLooseBase(this,se)[se].aboutPageForm=d.Tag.render(J||(J=G`
			<form class="tasks-flow__create-about">
				${0}
				${0}
				<div class="tasks-flow__create-separator --empty"></div>
				${0}
				<div class="tasks-flow__create-separator --empty"></div>
				${0}
			</form>
		`),babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowName.render(),babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowDescription.render(),babelHelpers.classPrivateFieldLooseBase(this,se)[se].taskCreatorsSelector.render(),babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]());d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,se)[se].aboutPageForm,"change",babelHelpers.classPrivateFieldLooseBase(this,ee)[ee].onChangeHandler);return babelHelpers.classPrivateFieldLooseBase(this,se)[se].aboutPageForm}focusToEmptyName(){const e=babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowName.getValue().trim().length===0;if(e){babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowName.getInputNode().focus()}}async onContinueClick(e={}){const{data:s}=await d.ajax.runAction("tasks.flow.Flow.isExists",{data:{flowData:e}});if(s.exists){babelHelpers.classPrivateFieldLooseBase(this,se)[se].flowName.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_FLOW_DUPLICATE_ERROR")]);return false}return true}}function oe(){var e;let s=(e=babelHelpers.classPrivateFieldLooseBase(this,se)[se].taskCreatorsSelector)==null?void 0:e.getSelector().getTags().map((e=>[e.entityId,e.id]));if(d.Type.isUndefined(s)||s.length===0){var a,t;s=(a=babelHelpers.classPrivateFieldLooseBase(this,se)[se].taskCreatorsSelector)==null?void 0:(t=a.getSelector())==null?void 0:t.getDialog().getPreselectedItems()}return s}function ne(e){const s=["minutes","hours"];return s.includes(e)}function ce(){const e=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].plannedCompletionTime;babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTimeIntervalSelector=new i.IntervalSelector({value:e});babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTimeIntervalSelector.subscribe("intervalChanged",(e=>{const s=e.getData().interval;const a=babelHelpers.classPrivateFieldLooseBase(this,le)[le](s);babelHelpers.classPrivateFieldLooseBase(this,se)[se].skipWeekends.disable(a)}));const s=babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTimeIntervalSelector.getDuration();const a=`\n\t\t\t<div class="tasks-flow__create-title-with-hint">\n\t\t\t\t${d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_PLANNED_COMPLETION_TIME")}\n\t\t\t\t<span\n\t\t\t\t\tdata-id="plannedCompletionTimeHint"\n\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\tdata-hint="${d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_PLANNED_COMPLETION_TIME_HINT")}" \n\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t>\n\t\t\t\t\t<span class="ui-hint-icon"></span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTime=new b.TextInput({label:a,placeholder:"5",inputDefaultWidth:true,value:String(e/s||"")});const t=2**32/2-1;const l=60*60*24*31;z({input:babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTime.getInputNode(),max:Math.floor(t/l)});const r=babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTimeIntervalSelector.getInterval();const o=babelHelpers.classPrivateFieldLooseBase(this,le)[le](r);babelHelpers.classPrivateFieldLooseBase(this,se)[se].skipWeekends=new w({id:"planned-completion-time-skip-weekends",title:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_SKIP_WEEKENDS"),value:o?true:babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].id===0||babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].matchWorkTime,size:"extra-small",isFieldDisabled:o,hintText:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_DISABLED_SKIP_WEEKENDS_HINT"),hintOnDisabled:true});babelHelpers.classPrivateFieldLooseBase(this,se)[se].skipWeekends.subscribe("lock",(e=>{requestAnimationFrame((()=>{const s=top.BX.UI.Hint.createInstance({id:`tasks-flow-edit-form-about-page-${d.Text.getRandom()}`,className:"skipInitByClassName",popupParameters:{targetContainer:babelHelpers.classPrivateFieldLooseBase(this,se)[se].aboutPageForm.closest(".tasks-wizard__step")}});s.initNode(e.getData())}))}));const n=d.Tag.render(Z||(Z=G`
			<div data-id="tasks-flow-edit-form-field-planned-time">
				<div class="tasks-flow__create-planned_completion-time">
					${0}
					<div class="tasks-flow__create-planned_completion-time-interval">
						${0}
					</div>
				</div>
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTime.render(),babelHelpers.classPrivateFieldLooseBase(this,se)[se].plannedCompletionTimeIntervalSelector.render(),babelHelpers.classPrivateFieldLooseBase(this,se)[se].skipWeekends.render());return n}var de=babelHelpers.classPrivateFieldLooseKey("userId");var be=babelHelpers.classPrivateFieldLooseKey("onTemplateAdded");var pe=babelHelpers.classPrivateFieldLooseKey("onTemplateUpdated");class ve extends c.EventEmitter{constructor(e){super();Object.defineProperty(this,pe,{value:ue});Object.defineProperty(this,be,{value:he});Object.defineProperty(this,de,{writable:true,value:void 0});this.setEventNamespace("BX.Tasks.Flow.EditForm.PullRequests");babelHelpers.classPrivateFieldLooseBase(this,de)[de]=parseInt(e,10)}getModuleId(){return"tasks"}getMap(){return{template_add:babelHelpers.classPrivateFieldLooseBase(this,be)[be].bind(this),template_update:babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].bind(this)}}}function he(e){this.emit("templateAdded",{template:{id:e.TEMPLATE_ID,title:e.TEMPLATE_TITLE}})}function ue(e){this.emit("templateUpdated",{template:{id:e.TEMPLATE_ID,title:e.TEMPLATE_TITLE}})}let Fe=e=>e,Le,Pe,fe,He;const Be=30;const ye=[{condition:e=>e===0,message:"TASKS_FLOW_EDIT_FORM_THIS_IS_EMPTY_DEPARTMENT_HINT"},{condition:e=>e>Be,message:"TASKS_FLOW_EDIT_FORM_THIS_IS_BIG_DEPARTMENT_HINT"}];var _e=babelHelpers.classPrivateFieldLooseKey("params");var me=babelHelpers.classPrivateFieldLooseKey("layout");var ke=babelHelpers.classPrivateFieldLooseKey("flow");var Te=babelHelpers.classPrivateFieldLooseKey("currentUser");var ge=babelHelpers.classPrivateFieldLooseKey("init");var Oe=babelHelpers.classPrivateFieldLooseKey("subscribeToPull");var Se=babelHelpers.classPrivateFieldLooseKey("onTemplateAddedHandler");var Ee=babelHelpers.classPrivateFieldLooseKey("onTemplateUpdatedHandler");var we=babelHelpers.classPrivateFieldLooseKey("showResponsibleListError");var Ie=babelHelpers.classPrivateFieldLooseKey("getResponsiblesByDistributionType");var De=babelHelpers.classPrivateFieldLooseKey("getResponsiblesFromSelectorByDistributionType");var Ce=babelHelpers.classPrivateFieldLooseKey("getResponsiblesFromSelector");var Ae=babelHelpers.classPrivateFieldLooseKey("addFlowTeamTooltip");var Re=babelHelpers.classPrivateFieldLooseKey("renderDistribution");var Ke=babelHelpers.classPrivateFieldLooseKey("onDistributionChange");var Me=babelHelpers.classPrivateFieldLooseKey("getResponsiblesSelector");var xe=babelHelpers.classPrivateFieldLooseKey("renderDistributionType");var Ne=babelHelpers.classPrivateFieldLooseKey("renderImmutableFlowTeamTooltip");var We=babelHelpers.classPrivateFieldLooseKey("getTaskTemplateDialog");var je=babelHelpers.classPrivateFieldLooseKey("getProjectLabel");var $e=babelHelpers.classPrivateFieldLooseKey("getHintMessageCodeByCount");var Ue=babelHelpers.classPrivateFieldLooseKey("showDepartmentHint");var Ve=babelHelpers.classPrivateFieldLooseKey("getDepartmentsUsersCount");class Xe extends h{constructor(e){super();Object.defineProperty(this,Ve,{value:ps});Object.defineProperty(this,Ue,{value:bs});Object.defineProperty(this,$e,{value:ds});Object.defineProperty(this,je,{value:cs});Object.defineProperty(this,We,{value:ns});Object.defineProperty(this,Ne,{value:os});Object.defineProperty(this,xe,{value:rs});Object.defineProperty(this,Me,{value:is});Object.defineProperty(this,Ke,{value:ls});Object.defineProperty(this,Re,{value:ts});Object.defineProperty(this,Ae,{value:as});Object.defineProperty(this,Ce,{value:ss});Object.defineProperty(this,De,{value:es});Object.defineProperty(this,Ie,{value:Ze});Object.defineProperty(this,we,{value:Je});Object.defineProperty(this,Ee,{value:Ge});Object.defineProperty(this,Se,{value:ze});Object.defineProperty(this,Oe,{value:Ye});Object.defineProperty(this,ge,{value:Qe});Object.defineProperty(this,Te,{get:qe,set:void 0});Object.defineProperty(this,_e,{writable:true,value:void 0});Object.defineProperty(this,me,{writable:true,value:void 0});Object.defineProperty(this,ke,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]=e;babelHelpers.classPrivateFieldLooseBase(this,me)[me]={};babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]={};babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]()}setFlow(e){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]=e}getFlowId(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].id)!=null?e:null}getId(){return"settings"}getTitle(){return d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_SETTINGS")}getRequiredData(){const e=["groupId","responsibleList"];if(babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate.isChecked()){e.push("templateId")}return e}update(){super.update();d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,me)[me].queueDistribution,"--active");d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,me)[me].manuallyDistribution,"--active");d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,me)[me].himselfDistribution,"--active");d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,me)[me].immutableDistribution,"--active");if(babelHelpers.classPrivateFieldLooseBase(this,me)[me].queueRadio.checked){d.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,me)[me].queueDistribution,"--active")}if(babelHelpers.classPrivateFieldLooseBase(this,me)[me].manuallyRadio.checked){d.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,me)[me].manuallyDistribution,"--active")}if(babelHelpers.classPrivateFieldLooseBase(this,me)[me].himselfRadio.checked){d.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,me)[me].himselfDistribution,"--active")}if(babelHelpers.classPrivateFieldLooseBase(this,me)[me].immutableRadio.checked){d.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,me)[me].immutableDistribution,"--active")}}showErrors(e){if(e.includes("responsibleList")){babelHelpers.classPrivateFieldLooseBase(this,we)[we]()}if(e.includes("groupId")){babelHelpers.classPrivateFieldLooseBase(this,me)[me].projectSelector.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_PROJECT_FOR_TASKS_ERROR")])}if(e.includes("templateId")){babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_TEMPLATE_FOR_TASKS_ERROR")])}}cleanErrors(){babelHelpers.classPrivateFieldLooseBase(this,me)[me].projectSelector.cleanError();babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesQueueSelector.cleanError();babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesHimselfSelector.cleanError();babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesImmutableSelector.cleanError();babelHelpers.classPrivateFieldLooseBase(this,me)[me].moderatorSelector.cleanError();babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate.cleanError()}getFields(e={}){var s,a,t,l,i,r,o,n,c,d,b,p,v,h;const u=new FormData(babelHelpers.classPrivateFieldLooseBase(this,me)[me].settingsPageForm).get("distribution");const F=(s=e.distributionType)!=null?s:u||"queue";const L=babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie](F,e);let P=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].groupId;if((a=babelHelpers.classPrivateFieldLooseBase(this,me)[me].projectSelector)!=null&&a.getSelector().getDialog().isLoaded()){var f;P=(f=babelHelpers.classPrivateFieldLooseBase(this,me)[me].projectSelector.getSelector().getTags()[0])==null?void 0:f.id}return{distributionType:F,responsibleList:L,responsibleCanChangeDeadline:(t=e.responsibleCanChangeDeadline)!=null?t:(l=(i=babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsibleCanChangeDeadline)==null?void 0:i.isChecked())!=null?l:false,notifyAtHalfTime:(r=e.notifyAtHalfTime)!=null?r:(o=(n=babelHelpers.classPrivateFieldLooseBase(this,me)[me].notifyAtHalfTime)==null?void 0:n.isChecked())!=null?o:false,taskControl:(c=e.taskControl)!=null?c:(d=(b=babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskControl)==null?void 0:b.isChecked())!=null?d:false,groupId:(p=e.groupId)!=null?p:P||0,templateId:(v=e.templateId)!=null?v:(h=babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate)!=null&&h.isChecked()?babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate.getValue():0}}render(){babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsibleCanChangeDeadline=new w({id:"responsible-can-change-deadline",title:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_RESPONSIBLE_CAN_CHANGE_DEADLINE"),value:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].responsibleCanChangeDeadline});const e=`\n\t\t\t<div class="tasks-flow__create-title-with-hint">\n\t\t\t\t<span>${d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_NOTIFY_AT_HALF_TIME")}</span>\n\t\t\t\t<span\n\t\t\t\t\tdata-id="notifyAtHalfTimeHint"\n\t\t\t\t\tclass="ui-hint ui-hint-flow-value-checker"\n\t\t\t\t\tdata-hint="${d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_NOTIFY_AT_HALF_TIME_HINT")}" \n\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t>\n\t\t\t\t\t<span class="ui-hint-icon ui-hint-icon-flow-value-checker"></span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;babelHelpers.classPrivateFieldLooseBase(this,me)[me].notifyAtHalfTime=new w({id:"notify-at-half-time",title:e,value:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].notifyAtHalfTime});babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskControl=new w({id:"task-control",title:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_TASK_CONTROL"),value:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].taskControl});babelHelpers.classPrivateFieldLooseBase(this,me)[me].projectSelector=new b.UserSelector({label:babelHelpers.classPrivateFieldLooseBase(this,je)[je](),enableUsers:false,enableDepartments:false,multiple:false,entities:[{id:"project",options:{features:{tasks:[]},flow:true,checkFeatureForCreate:true,"!type":["collab"]}}],values:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].groupId?[["project",babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].groupId]]:[],dialogEvents:{onLoad:this.onDialogLoad}});babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate=new w({id:"task-template",title:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_ACCEPT_TASKS_BY_TEMPLATE_TITLE"),entitySelector:babelHelpers.classPrivateFieldLooseBase(this,We)[We](),isFieldDisabled:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].distributionType==="immutable"});babelHelpers.classPrivateFieldLooseBase(this,me)[me].settingsPageForm=d.Tag.render(Le||(Le=Fe`
			<form class="tasks-flow__create-settings">
				${0}
				<div class="tasks-flow__create-separator --empty"></div>
				${0}
				${0}
				${0}
				<div class="tasks-flow__create-separator"></div>
				${0}
				<div class="tasks-flow__create-separator --empty"></div>
				${0}
			</form>
		`),babelHelpers.classPrivateFieldLooseBase(this,Re)[Re](),babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsibleCanChangeDeadline.render(),babelHelpers.classPrivateFieldLooseBase(this,me)[me].notifyAtHalfTime.render(),babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskControl.render(),babelHelpers.classPrivateFieldLooseBase(this,me)[me].projectSelector.render(),babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate.render());d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,me)[me].settingsPageForm,"change",babelHelpers.classPrivateFieldLooseBase(this,_e)[_e].onChangeHandler);return babelHelpers.classPrivateFieldLooseBase(this,me)[me].settingsPageForm}checkDepartmentUsersCount(e){const s=e.getTags();const a=s.filter((e=>e.getEntityId()==="department"));let t=[];if(d.Type.isUndefined(this.selectedDepartments)||this.selectedDepartments.length===0){t=a}else{t=a.filter((e=>!this.selectedDepartments.includes(e)))}this.selectedDepartments=a;if(t.length===0){return}babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve](t).then((e=>{const s=e.find((e=>e.count>Be||e.count===0));if(s){const e=t.find((e=>e.getId().toString()===s.departmentId));if(e){babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue](e,babelHelpers.classPrivateFieldLooseBase(this,$e)[$e](s.count))}}})).catch((e=>{console.error(e)}))}}function qe(){const e=d.Extension.getSettings("tasks.flow.edit-form");return e.currentUser}function Qe(){babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]()}function Ye(){const e=new ve(babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]);e.subscribe("templateAdded",babelHelpers.classPrivateFieldLooseBase(this,Se)[Se].bind(this));e.subscribe("templateUpdated",babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee].bind(this));o.PULL.subscribe(e)}function ze({data:e}){const s=e.template;const a={id:s.id,entityId:"task-template",title:s.title,tabs:"recents"};babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplateDialog.addItem(a);babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplateDialog.getItems().find((e=>e.id===a.id)).select()}function Ge({data:e}){const s=e.template;const a=babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplateDialog.getItem({id:s.id,entityId:"task-template"});if(d.Type.isStringFilled(s.title)){var t;a==null?void 0:a.setTitle(s.title);(t=babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate)==null?void 0:t.update()}if(!d.Type.isArrayFilled(babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplateDialog.getSelectedItems())){a==null?void 0:a.select()}}function Je(){const e=new FormData(babelHelpers.classPrivateFieldLooseBase(this,me)[me].settingsPageForm).get("distribution");switch(e){case"manually":babelHelpers.classPrivateFieldLooseBase(this,me)[me].moderatorSelector.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_TASKS_MODERATOR_ERROR")]);break;case"queue":babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesQueueSelector.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_TASKS_RESPONSIBLES_ERROR")]);break;case"himself":babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesHimselfSelector.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_TASKS_RESPONSIBLES_ERROR")]);break;case"immutable":babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesImmutableSelector.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_TASKS_RESPONSIBLES_ERROR")]);break}}function Ze(e,s={}){let a=[];const t=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].distributionType===e;if(t){a=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].responsibleList}const l=babelHelpers.classPrivateFieldLooseBase(this,De)[De](e);if(!d.Type.isNull(l)){a=l}const i=s.distributionType===e;if(i){var r;return(r=s.responsibleList)!=null?r:a}return a}function es(e){switch(e){case"manually":return babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce](babelHelpers.classPrivateFieldLooseBase(this,me)[me].moderatorSelector);case"queue":return babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce](babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesQueueSelector);case"himself":return babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce](babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesHimselfSelector);case"immutable":return babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce](babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesImmutableSelector);default:return null}}function ss(e){if(e!=null&&e.getSelector().getDialog().isLoaded()){return e==null?void 0:e.getSelector().getTags().map((e=>[e.entityId,String(e.id)]))}return null}function as(){const e=babelHelpers.classPrivateFieldLooseBase(this,me)[me].immutableDistribution.querySelector(".ui-section__field-label");if(d.Type.isDomNode(e)){const s=babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne]();d.Dom.append(s,e)}}function ts(){babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesQueueSelector=babelHelpers.classPrivateFieldLooseBase(this,Me)[Me](babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].distributionType==="queue"?babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].responsibleList:[],false);babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesHimselfSelector=babelHelpers.classPrivateFieldLooseBase(this,Me)[Me](babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].distributionType==="himself"?babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].responsibleList:[]);babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesImmutableSelector=babelHelpers.classPrivateFieldLooseBase(this,Me)[Me](babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].distributionType==="immutable"&&d.Type.isArrayFilled(babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].responsibleList)?babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].responsibleList:[["user",babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]]]);babelHelpers.classPrivateFieldLooseBase(this,me)[me].moderatorSelector=new b.UserSelector({enableAll:false,enableDepartments:false,multiple:false,values:[["user",babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].distributionType==="manually"&&d.Type.isArrayFilled(babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].responsibleList)?babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].responsibleList[0][1]:babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]]],dialogEvents:{onLoad:this.onDialogLoad}});const{root:e,radio:s}=babelHelpers.classPrivateFieldLooseBase(this,xe)[xe]({type:"queue",selector:babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesQueueSelector});babelHelpers.classPrivateFieldLooseBase(this,me)[me].queueDistribution=e;babelHelpers.classPrivateFieldLooseBase(this,me)[me].queueRadio=s;const{root:a,radio:t}=babelHelpers.classPrivateFieldLooseBase(this,xe)[xe]({type:"manually",selector:babelHelpers.classPrivateFieldLooseBase(this,me)[me].moderatorSelector});babelHelpers.classPrivateFieldLooseBase(this,me)[me].manuallyDistribution=a;babelHelpers.classPrivateFieldLooseBase(this,me)[me].manuallyRadio=t;const{root:l,radio:i}=babelHelpers.classPrivateFieldLooseBase(this,xe)[xe]({type:"himself",selector:babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesHimselfSelector});babelHelpers.classPrivateFieldLooseBase(this,me)[me].himselfDistribution=l;babelHelpers.classPrivateFieldLooseBase(this,me)[me].himselfRadio=i;const{root:r,radio:o}=babelHelpers.classPrivateFieldLooseBase(this,xe)[xe]({type:"immutable",selector:babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesImmutableSelector});babelHelpers.classPrivateFieldLooseBase(this,me)[me].immutableDistribution=r;babelHelpers.classPrivateFieldLooseBase(this,me)[me].immutableRadio=o;babelHelpers.classPrivateFieldLooseBase(this,me)[me].queueRadio.checked=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].distributionType==="queue";babelHelpers.classPrivateFieldLooseBase(this,me)[me].manuallyRadio.checked=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].distributionType==="manually";babelHelpers.classPrivateFieldLooseBase(this,me)[me].himselfRadio.checked=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].distributionType==="himself";babelHelpers.classPrivateFieldLooseBase(this,me)[me].immutableRadio.checked=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].distributionType==="immutable";this.update();d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,me)[me].queueRadio,"change",babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke].bind(this));d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,me)[me].manuallyRadio,"change",babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke].bind(this));d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,me)[me].himselfRadio,"change",babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke].bind(this));d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,me)[me].immutableRadio,"change",babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke].bind(this));const n=babelHelpers.classPrivateFieldLooseBase(this,me)[me].responsiblesHimselfSelector.getSelector();n.getDialog().subscribe("onHide",this.checkDepartmentUsersCount.bind(this,n));babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]();return d.Tag.render(Pe||(Pe=Fe`
			<div class="ui-section__field-container">
				<div class="ui-section__field-label_box">
					<label class="ui-section__field-label">
						${0}
					</label>
				</div>
				${0}
				${0}
				${0}
				${0}
			</div>
		`),d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_DISTRIBUTION_TYPE"),babelHelpers.classPrivateFieldLooseBase(this,me)[me].queueDistribution,babelHelpers.classPrivateFieldLooseBase(this,me)[me].manuallyDistribution,babelHelpers.classPrivateFieldLooseBase(this,me)[me].himselfDistribution,babelHelpers.classPrivateFieldLooseBase(this,me)[me].immutableDistribution)}function ls(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,me)[me].immutableRadio.checked){var s,a;(s=babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate)==null?void 0:s.disable(true);(a=babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate)==null?void 0:a.setValue(false)}else{var t;(t=babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate)==null?void 0:t.disable(false)}(e=babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplate)==null?void 0:e.update()}function is(e,s=true,a=true){return new b.UserSelector({enableAll:false,multiple:a,enableDepartments:s,values:e,label:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_DISTRIBUTION_QUEUE_SELECTOR_LABEL"),className:"tasks-flow__responsible-selector",dialogEvents:{onLoad:this.onDialogLoad}})}function rs({type:e,selector:s}){return d.Tag.render(fe||(fe=Fe`
			<div class="tasks-flow__create-distribution-type --${0}" data-id="tasks-flow-distribution-${0}">
				<label class="ui-ctl ui-ctl-radio ui-ctl-wa">
					<input type="radio" name="distribution" value="${0}" class="ui-ctl-element" ref="radio">
					<div class="tasks-flow__create-distribution-type_title-container">
						<div class="tasks-flow__create-distribution-type_content">
						<div class="tasks-flow__create-distribution-type_title">
								<div class="tasks-flow__create-distribution-type_title-text">
									${0}
								</div>
								<span class="tasks-flow__create-distribution-type_label ui-label ui-label-primary ui-label-fill">
									<span class="ui-label-inner">
										${0}
									</span>
								</span>
							</div>
							<div class="tasks-flow__create-distribution-type_hint">
								${0}
							</div>
						</div>
						<div class="tasks-flow__create-distribution-type_icon --${0}"></div>
					</div>
				</label>
				<div class="tasks-flow__create-distribution-type_selector">
					${0}
				</div>
			</div>
		`),e,e,e,d.Loc.getMessage(`TASKS_FLOW_EDIT_FORM_DISTRIBUTION_${e.toUpperCase()}`),d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_ANALYTICS_STUB_BUTTON"),d.Loc.getMessage(`TASKS_FLOW_EDIT_FORM_DISTRIBUTION_${e.toUpperCase()}_HINT`),e,s==null?void 0:s.render())}function os(){return d.Tag.render(He||(He=Fe`
			<span
				data-id="immutableDistributionTooltip"
				class="ui-hint ui-hint-flow-value-checker"
				data-hint="${0}" 
				data-hint-no-icon
			>
				<span class="ui-hint-icon ui-hint-icon-flow-value-checker"></span>
			</span>
		`),d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_DISTRIBUTION_IMMUTABLE_TOOLTIP"))}function ns(){babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplateDialog=new n.Dialog({width:500,context:"flow",preselectedItems:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].templateId?[["task-template",babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].templateId]]:"",enableSearch:true,multiple:false,entities:[{id:"task-template"}]});return babelHelpers.classPrivateFieldLooseBase(this,me)[me].taskTemplateDialog}function cs(){const e=`\n\t\t\t<span\n\t\t\t\tdata-id="notifyEmptyProjectHint"\n\t\t\t\tclass="ui-hint ui-hint-flow-value-checker"\n\t\t\t\tdata-hint="${d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_NOTIFY_EMPTY_PROJECT_HINT")}" \n\t\t\t\tdata-hint-no-icon\n\t\t\t>\n\t\t\t\t<span class="ui-hint-icon ui-hint-icon-flow-value-checker"></span>\n\t\t\t</span>\n\t\t`;return`\n\t\t\t<div class="tasks-flow-field-label-container">\n\t\t\t\t<span>${d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_PROJECT_FOR_TASKS")}</span>\n\t\t\t\t${babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].id?"":e}\n\t\t\t</div>\n\t\t`}function ds(e){const s=ye.find((s=>s.condition(e)));return s?s.message:""}function bs(e,s){const a=new BX.PopupWindow({content:BX.Loc.getMessage(s),darkMode:true,bindElement:e.getContainer(),angle:true,contentPadding:5,maxWidth:400,offsetLeft:e.getContainer().offsetWidth/2,autoHide:true,closeByEsc:true});a.show()}function ps(e){const s=e.map((e=>[e.getEntityId(),e.getId()]));return d.ajax.runAction("tasks.flow.Flow.getDepartmentsMemberCount",{data:{departments:s}}).then((e=>d.Type.isArrayFilled(e.errors)?null:e.data)).catch((e=>{console.error(e)}))}let vs=e=>e,hs,us;var Fs=babelHelpers.classPrivateFieldLooseKey("params");var Ls=babelHelpers.classPrivateFieldLooseKey("layout");var Ps=babelHelpers.classPrivateFieldLooseKey("flow");var fs=babelHelpers.classPrivateFieldLooseKey("currentUser");var Hs=babelHelpers.classPrivateFieldLooseKey("getCheckerValues");var Bs=babelHelpers.classPrivateFieldLooseKey("getCheckerNumericValue");var ys=babelHelpers.classPrivateFieldLooseKey("getInteger");var _s=babelHelpers.classPrivateFieldLooseKey("renderAnalyticsStub");class ms extends h{constructor(e){super();Object.defineProperty(this,_s,{value:Ss});Object.defineProperty(this,ys,{value:Os});Object.defineProperty(this,Bs,{value:gs});Object.defineProperty(this,Hs,{value:Ts});Object.defineProperty(this,fs,{get:ks,set:void 0});Object.defineProperty(this,Fs,{writable:true,value:void 0});Object.defineProperty(this,Ls,{writable:true,value:void 0});Object.defineProperty(this,Ps,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]=e;babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]={};babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]={}}setFlow(e){babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=e}getFlowId(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].id)!=null?e:null}getId(){return"control"}getTitle(){return d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_CONTROL")}getRequiredData(){return babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]().filter((e=>babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls][e].isChecked()))}showErrors(e){if(e.includes("ownerId")){babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].flowOwnerSelector.setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_FLOW_OWNER_ERROR")])}babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]().forEach((s=>{if(e.includes(s)){babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls][s].setErrors([d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_VALUE_ERROR")])}}))}cleanErrors(){babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].flowOwnerSelector.cleanError();babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]().forEach((e=>babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls][e].cleanError()))}getFields(e={}){var s,a,t,l;let i=babelHelpers.classPrivateFieldLooseBase(this,fs)[fs];if((s=babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].flowOwnerSelector)!=null&&s.getSelector().getDialog().isLoaded()){var r;i=(r=babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].flowOwnerSelector.getSelector().getTags()[0])==null?void 0:r.id}return{ownerId:Number(e.ownerId||i||0),notifyOnQueueOverflow:(a=e.notifyOnQueueOverflow)!=null?a:babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs](babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyOnQueueOverflow),notifyOnTasksInProgressOverflow:(t=e.notifyOnTasksInProgressOverflow)!=null?t:babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs](babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyOnTasksInProgressOverflow),notifyWhenEfficiencyDecreases:(l=e.notifyWhenEfficiencyDecreases)!=null?l:babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs](babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyWhenEfficiencyDecreases)}}render(){const e=`\n\t\t\t<div class="tasks-flow__create-title-with-hint">\n\t\t\t\t${d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_FLOW_OWNER")}\n\t\t\t\t<span\n\t\t\t\t\tdata-id="flowOwnerHint"\n\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\tdata-hint="${d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_FLOW_OWNER_HINT")}" \n\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t><span class="ui-hint-icon"></span></span>\n\t\t\t</div>\n\t\t`;babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].flowOwnerSelector=new b.UserSelector({id:"tasks-flow-edit-form-field-owner",label:e,enableAll:false,enableDepartments:false,multiple:false,values:[["user",babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].ownerId]],dialogEvents:{onLoad:this.onDialogLoad}});babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyOnQueueOverflow=new w({id:"notify-on-queue-overflow",title:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_NOTIFY_ON_QUEUE_OVERFLOW"),placeholder:50,value:babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].notifyOnQueueOverflow,size:"extra-small"});z({input:babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyOnQueueOverflow.getInputNode(),max:99999});babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyOnTasksInProgressOverflow=new w({id:"notify-on-tasks-in-progress-overflow",title:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_NOTIFY_ON_TASKS_IN_PROGRESS_OVERFLOW"),placeholder:50,value:babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].notifyOnTasksInProgressOverflow,size:"extra-small"});z({input:babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyOnTasksInProgressOverflow.getInputNode(),max:99999});babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyWhenEfficiencyDecreases=new w({id:"notify-when-efficiency-decreases",title:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_NOTIFY_WHEN_EFFICIENCY_DECREASES"),placeholder:70,unit:"%",value:babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].notifyWhenEfficiencyDecreases,size:"extra-small"});z({input:babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyWhenEfficiencyDecreases.getInputNode(),max:100});babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].analyticsPermissionsSelector=new b.UserSelector({id:"tasks-flow-edit-form-field-analytics",label:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_ANALYTICS_PERMISSIONS"),enableAll:true,enableDepartments:true,className:"",dialogEvents:{onLoad:this.onDialogLoad}});babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].controlPageForm=d.Tag.render(hs||(hs=vs`
			<form class="tasks-flow__create-control">
				${0}
				${0}
				${0}
				${0}
				<div class="tasks-flow__create-separator"></div>
				${0}
			</form>
		`),babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].flowOwnerSelector.render(),babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyOnQueueOverflow.render(),babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyOnTasksInProgressOverflow.render(),babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].notifyWhenEfficiencyDecreases.render(),babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]());d.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].controlPageForm,"change",babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs].onChangeHandler);return babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].controlPageForm}}function ks(){const e=d.Extension.getSettings("tasks.flow.edit-form");return e.currentUser}function Ts(){return["notifyOnQueueOverflow","notifyOnTasksInProgressOverflow","notifyWhenEfficiencyDecreases"]}function gs(e){return e!=null&&e.isChecked()?babelHelpers.classPrivateFieldLooseBase(this,ys)[ys](e.getValue()):null}function Os(e){return/^\d+$/.test(e)?parseInt(e,10):0}function Ss(){return d.Tag.render(us||(us=vs`
			<div class="tasks-flow__create_analytics-stub">
				<span>${0}</span>
				<span class="tasks-flow__create_analytics-stub-label ui-label ui-label-primary ui-label-fill">
					<span class="ui-label-inner">
						${0}
					</span>
				</span>
			</div>
		`),d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_ANALYTICS_STUB_LABEL"),d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_ANALYTICS_STUB_BUTTON"))}var Es="Atom/Torrent animation 6";var ws="5.9.6";var Is=60;var Ds=0;var Cs=239;var As=220;var Rs=220;var Ks=0;var Ms=[];var xs=[{nm:"[FRAME] Atom/Torrent animation 6 - Null / Vector - Null / Vector / Vector - Null / Vector / body - Null / body / Star 4 - Null / Star 4 / Star 2 - Null / Star 2 / Star 1 - Null / Star 1 / Star 3 - Null / Star 3",fr:60,id:"lvc7ui4o20a2e3j8",layers:[{ty:3,ddd:0,ind:4,hd:false,nm:"Atom/Torrent animation 6 - Null",ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:240,bm:0,sr:1},{ty:3,ddd:0,ind:5,hd:false,nm:"Vector - Null",parent:4,ks:{a:{a:0,k:[51.5,51.5]},o:{a:1,k:[{t:51.00000000000006,s:[1],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:80.00000000000001,s:[0],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:88.99999999999997,s:[0],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:104.32713754646757,s:[0],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:202.1338289962817,s:[100]}]},p:{a:1,k:[{t:104.32713754646757,s:[-18.499899999999997,109.5],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]},ti:[0,0],to:[0,0]},{t:202.1338289962817,s:[101.5001,109.5]}]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:60,op:240,bm:0,sr:1},{ty:4,ddd:0,ind:6,hd:false,nm:"Vector",parent:5,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:1,k:[{t:51.00000000000006,s:[1],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:80.00000000000001,s:[0],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:88.99999999999997,s:[0],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:104.32713754646757,s:[0],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:202.1338289962817,s:[100]}]}},st:0,ip:60,op:240,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:5,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[23.8604,92.5209],[23.8604,101.2021],[32.4925,101.2021],[49.1681,84.4316],[49.2122,84.3877],[51,80.0469],[49.2122,75.7061],[49.1681,75.6622],[32.3992,58.7981],[23.7671,58.7981],[23.7671,67.4793],[30.6598,74.4112],[6.1038,74.4112],[-1e-4,80.5497],[6.1038,86.6882],[29.66,86.6882],[23.8604,92.5209]],i:[[2.3836900000000014,-2.397260000000003],[-2.3837,-2.3972],[-2.3837,2.3973],[0,0],[0,0],[1e-4,1.5711],[1.1919,1.1987],[0,0],[0,0],[2.3837,-2.3972],[-2.3837,-2.3972],[0,0],[0,0],[0,-3.3902],[-3.3711,0],[0,0],[0,0]],o:[[-2.3836900000000014,2.397260000000003],[2.3837200000000003,2.3972299999999933],[0,0],[0,0],[1.19191,-1.198679999999996],[5000000000165983e-20,-1.571070000000006],[0,0],[0,0],[-2.383700000000001,-2.3972499999999997],[-2.3837100000000007,2.3972499999999997],[0,0],[0,0],[-3.37107,0],[0,3.3902300000000025],[0,0],[0,0],[0,0]]}}},{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[23.8604,35.5209],[23.8604,44.2021],[32.4925,44.2021],[49.1681,27.4316],[49.2122,27.3877],[51,23.0469],[49.2122,18.7061],[49.1681,18.6622],[32.3992,1.7981],[23.7671,1.7981],[23.7671,10.4793],[30.6598,17.4112],[6.1038,17.4112],[-1e-4,23.5497],[6.1038,29.6882],[29.66,29.6882],[23.8604,35.5209]],i:[[2.3836900000000014,-2.397260000000003],[-2.3837,-2.3972],[-2.3837,2.3973],[0,0],[0,0],[1e-4,1.5711],[1.1919,1.1987],[0,0],[0,0],[2.3837,-2.3972],[-2.3837,-2.3972],[0,0],[0,0],[0,-3.3902],[-3.3711,0],[0,0],[0,0]],o:[[-2.3836900000000014,2.397260000000003],[2.3837100000000007,2.3972399999999965],[0,0],[0,0],[1.19191,-1.1986799999999995],[5000000000165983e-20,-1.5710699999999989],[0,0],[0,0],[-2.383700000000001,-2.39725],[-2.3837100000000007,2.3972500000000005],[0,0],[0,0],[-3.37107,0],[0,3.390229999999999],[0,0],[0,0],[0,0]]}}},{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[75.8604,62.5209],[75.8604,71.2021],[84.4926,71.2021],[101.1682,54.4316],[101.2123,54.3877],[103.0001,50.0469],[101.2123,45.7061],[101.1682,45.6622],[84.3993,28.7981],[75.7671,28.7981],[75.7671,37.4793],[82.6598,44.4112],[58.1038,44.4112],[51.9999,50.5498],[58.1038,56.6883],[81.66,56.6883],[75.8604,62.5209]],i:[[2.3836900000000014,-2.397260000000003],[-2.3837,-2.3972],[-2.3837,2.3973],[0,0],[0,0],[1e-4,1.5711],[1.1919,1.1987],[0,0],[0,0],[2.3837,-2.3972],[-2.3837,-2.3972],[0,0],[0,0],[0,-3.3902],[-3.3711,0],[0,0],[0,0]],o:[[-2.3836900000000014,2.397260000000003],[2.3837199999999967,2.3972299999999933],[0,0],[0,0],[1.1919100000000071,-1.198680000000003],[5000000000165983e-20,-1.5710699999999989],[0,0],[0,0],[-2.3837000000000046,-2.3972499999999997],[-2.3837099999999936,2.3972499999999997],[0,0],[0,0],[-3.371070000000003,0],[0,3.3902300000000025],[0,0],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[1,1,1,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:7,hd:false,nm:"Vector - Null",parent:4,ks:{a:{a:0,k:[51.5,51.5]},o:{a:1,k:[{t:104.57357324157103,s:[100],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:202.3802646913852,s:[0]}]},p:{a:1,k:[{t:104.57357324157103,s:[101.5,109.5],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]},ti:[0,0],to:[0,0]},{t:202.3802646913852,s:[204.5,109.5]}]},r:{a:1,k:[{t:7.29014597838927,s:[0],o:{x:[.42],y:[0]},i:{x:[1],y:[1]}},{t:21.050521638831196,s:[-10],o:{x:[0],y:[0]},i:{x:[.58],y:[1]}},{t:44.731168124242885,s:[0]}]},s:{a:1,k:[{t:2.8996427101595734,s:[-.1,-.1],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:41.90876574164156,s:[100,100],o:{x:[0],y:[0]},i:{x:[.15],y:[1]}},{t:53.96477032050418,s:[100,100],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:61.36616958252654,s:[110.00000000000001,110.00000000000001],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:76.16907992324106,s:[100,100]}]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:240,bm:0,sr:1},{ty:4,ddd:0,ind:8,hd:false,nm:"Vector",parent:7,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:1,k:[{t:104.57357324157103,s:[100],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:202.3802646913852,s:[0]}]}},st:0,ip:0,op:240,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:5,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[23.8604,92.5209],[23.8604,101.2021],[32.4925,101.2021],[49.1681,84.4316],[49.2122,84.3877],[51,80.0469],[49.2122,75.7061],[49.1681,75.6622],[32.3992,58.7981],[23.7671,58.7981],[23.7671,67.4793],[30.6598,74.4112],[6.1038,74.4112],[-1e-4,80.5497],[6.1038,86.6882],[29.66,86.6882],[23.8604,92.5209]],i:[[2.3836900000000014,-2.397260000000003],[-2.3837,-2.3972],[-2.3837,2.3973],[0,0],[0,0],[1e-4,1.5711],[1.1919,1.1987],[0,0],[0,0],[2.3837,-2.3972],[-2.3837,-2.3972],[0,0],[0,0],[0,-3.3902],[-3.3711,0],[0,0],[0,0]],o:[[-2.3836900000000014,2.397260000000003],[2.3837200000000003,2.3972299999999933],[0,0],[0,0],[1.19191,-1.198679999999996],[5000000000165983e-20,-1.571070000000006],[0,0],[0,0],[-2.383700000000001,-2.3972499999999997],[-2.3837100000000007,2.3972499999999997],[0,0],[0,0],[-3.37107,0],[0,3.3902300000000025],[0,0],[0,0],[0,0]]}}},{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[23.8604,35.5209],[23.8604,44.2021],[32.4925,44.2021],[49.1681,27.4316],[49.2122,27.3877],[51,23.0469],[49.2122,18.7061],[49.1681,18.6622],[32.3992,1.7981],[23.7671,1.7981],[23.7671,10.4793],[30.6598,17.4112],[6.1038,17.4112],[-1e-4,23.5497],[6.1038,29.6882],[29.66,29.6882],[23.8604,35.5209]],i:[[2.3836900000000014,-2.397260000000003],[-2.3837,-2.3972],[-2.3837,2.3973],[0,0],[0,0],[1e-4,1.5711],[1.1919,1.1987],[0,0],[0,0],[2.3837,-2.3972],[-2.3837,-2.3972],[0,0],[0,0],[0,-3.3902],[-3.3711,0],[0,0],[0,0]],o:[[-2.3836900000000014,2.397260000000003],[2.3837100000000007,2.3972399999999965],[0,0],[0,0],[1.19191,-1.1986799999999995],[5000000000165983e-20,-1.5710699999999989],[0,0],[0,0],[-2.383700000000001,-2.39725],[-2.3837100000000007,2.3972500000000005],[0,0],[0,0],[-3.37107,0],[0,3.390229999999999],[0,0],[0,0],[0,0]]}}},{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[75.8604,62.5209],[75.8604,71.2021],[84.4926,71.2021],[101.1682,54.4316],[101.2123,54.3877],[103.0001,50.0469],[101.2123,45.7061],[101.1682,45.6622],[84.3993,28.7981],[75.7671,28.7981],[75.7671,37.4793],[82.6598,44.4112],[58.1038,44.4112],[51.9999,50.5498],[58.1038,56.6883],[81.66,56.6883],[75.8604,62.5209]],i:[[2.3836900000000014,-2.397260000000003],[-2.3837,-2.3972],[-2.3837,2.3973],[0,0],[0,0],[1e-4,1.5711],[1.1919,1.1987],[0,0],[0,0],[2.3837,-2.3972],[-2.3837,-2.3972],[0,0],[0,0],[0,-3.3902],[-3.3711,0],[0,0],[0,0]],o:[[-2.3836900000000014,2.397260000000003],[2.3837199999999967,2.3972299999999933],[0,0],[0,0],[1.1919100000000071,-1.198680000000003],[5000000000165983e-20,-1.5710699999999989],[0,0],[0,0],[-2.3837000000000046,-2.3972499999999997],[-2.3837099999999936,2.3972499999999997],[0,0],[0,0],[-3.371070000000003,0],[0,3.3902300000000025],[0,0],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[1,1,1,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:9,hd:false,nm:"body - Null",parent:4,ks:{a:{a:0,k:[69.5,88]},o:{a:0,k:100},p:{a:0,k:[109.5,110]},r:{a:1,k:[{t:5.6945823033230925,s:[0],o:{x:[.42],y:[0]},i:{x:[1],y:[1]}},{t:29.809357570137365,s:[-10],o:{x:[0],y:[0]},i:{x:[.58],y:[1]}},{t:50.37784235653768,s:[0]}]},s:{a:1,k:[{t:5.297397769516729,s:[-.1,-.1],o:{x:[0],y:[0]},i:{x:[.58],y:[1]}},{t:29.981583898275588,s:[120,120],o:{x:[.42],y:[0]},i:{x:[1],y:[1]}},{t:45.48678969930097,s:[98.3,98.3],o:{x:[0],y:[0]},i:{x:[.15],y:[1]}},{t:53.23169097805378,s:[100,100],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:61.11602962079405,s:[110.00000000000001,110.00000000000001],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:76.64631529194739,s:[100,100]}]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:240,bm:0,sr:1},{ty:4,ddd:0,ind:10,hd:false,nm:"body",parent:9,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:240,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[10.8665,175.8877],[11.4452,175.8977],[36.6261,174.0583],[52.7435,161.0347],[98.8385,125.9712],[129.1684,122.522],[138.9999,112.1049],[138.9999,59.0294],[129.3847,48.6865],[96.7109,45.6381],[44.5985,7.1959],[39.1445,2.4422],[10.3445,.217],[0,10.8502],[0,165.5001],[10.8665,175.8878],[10.8665,175.8877]],i:[[0,0],[0,0],[-3.7034,2.2119],[-8.0917,6.7356],[-5.9864,1.6766],[-9.9496,.6611],[0,5.5087],[0,0],[5.4197,.4171],[7.8681,1.0572],[12.6448,11.1886],[.8537,.6831],[11.0574,-.3576],[-.0128,-5.7145],[0,0],[-5.7736,-.0997],[0,0]],o:[[0,0],[10.528860000000002,.1826199999999858],[1.6698200000000014,-.9973099999999988],[16.462159999999997,-13.703329999999994],[5.679019999999994,-1.5904699999999963],[5.508029999999991,-.36597000000000435],[0,0],[0,-5.424399999999999],[-9.851460000000003,-.7580999999999989],[-10.218859999999992,-1.3730899999999977],[-2.6704599999999985,-2.3629300000000004],[-3.5646599999999964,-2.85253],[-5.72348,.18510000000000001],[0,0],[.01287,5.762349999999998],[0,0],[0,0]]}}},{ty:"fl",o:{a:1,k:[{t:18.645635137794528,s:[100],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:25.028958002539536,s:[100],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:33.894684203574144,s:[100],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:57.65483042234692,s:[100],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:77.86868616070589,s:[100],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:83.54275092936804,s:[100]}]},c:{a:1,k:[{t:18.645635137794528,s:[.1450980392156863,.6862745098039216,.9607843137254902,1],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:25.028958002539536,s:[.13333333333333333,.7411764705882353,.9607843137254902,1],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:33.894684203574144,s:[.1450980392156863,.6862745098039216,.9607843137254902,1],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:57.65483042234692,s:[.1450980392156863,.6862745098039216,.9607843137254902,1],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:77.86868616070589,s:[.13333333333333333,.7411764705882353,.9607843137254902,1],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:83.54275092936804,s:[.1450980392156863,.6862745098039216,.9607843137254902,1]}]},nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:11,hd:false,nm:"Star 4 - Null",parent:4,ks:{a:{a:0,k:[20,20]},o:{a:0,k:100},p:{a:1,k:[{t:63.00000000000006,s:[109,135],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]},ti:[0,0],to:[0,0]},{t:86.87219933688343,s:[164,186]}]},r:{a:1,k:[{t:104.54275092936804,s:[0],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:151.13943138384246,s:[-45],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:201.84758364312282,s:[0]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:60,op:240,bm:0,sr:1},{ty:4,ddd:0,ind:12,hd:false,nm:"Star 4",parent:11,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:60,op:240,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[20,0],[16.606,16.606],[0,20],[16.606,23.394],[20,40],[23.394,23.394],[40,20],[23.394,16.606],[20,0]],i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[.18823529411764706,.7843137254901961,.9725490196078431,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:13,hd:false,nm:"Star 2 - Null",parent:4,ks:{a:{a:0,k:[11,11]},o:{a:0,k:100},p:{a:1,k:[{t:63.00000000000006,s:[94,65],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]},ti:[0,0],to:[0,0]},{t:87.00000000000006,s:[133,22]}]},r:{a:1,k:[{t:104.54275092936804,s:[0],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:151.13943138384246,s:[-45],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:201.84758364312282,s:[0]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:60,op:240,bm:0,sr:1},{ty:4,ddd:0,ind:14,hd:false,nm:"Star 2",parent:13,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:60,op:240,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[11,0],[9.1333,9.1333],[0,11],[9.1333,12.8667],[11,22],[12.8667,12.8667],[22,11],[12.8667,9.1333],[11,0]],i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[.1568627450980392,.6549019607843137,.9882352941176471,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:15,hd:false,nm:"Star 1 - Null",parent:4,ks:{a:{a:0,k:[10,10]},o:{a:0,k:100},p:{a:1,k:[{t:63.00000000000006,s:[58,183],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]},ti:[0,0],to:[0,0]},{t:87.00000000000006,s:[19,147]}]},r:{a:1,k:[{t:104.54275092936804,s:[0],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:149.76894078224015,s:[45],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:201.84758364312282,s:[0]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:60,op:240,bm:0,sr:1},{ty:4,ddd:0,ind:16,hd:false,nm:"Star 1",parent:15,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:60,op:240,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[10,0],[8.303,8.303],[0,10],[8.303,11.697],[10,20],[11.697,11.697],[20,10],[11.697,8.303],[10,0]],i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[.16862745098039217,.7098039215686275,.9803921568627451,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:17,hd:false,nm:"Star 3 - Null",parent:4,ks:{a:{a:0,k:[16,16]},o:{a:0,k:100},p:{a:1,k:[{t:63.00000000000006,s:[130,87],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]},ti:[0,0],to:[0,0]},{t:87.74540339596109,s:[188,42]}]},r:{a:1,k:[{t:104.54275092936804,s:[0],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:149.76894078224015,s:[45],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:201.84758364312282,s:[0]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:60,op:240,bm:0,sr:1},{ty:4,ddd:0,ind:18,hd:false,nm:"Star 3",parent:17,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:60,op:240,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[16,0],[13.2848,13.2848],[0,16],[13.2848,18.7152],[16,32],[18.7152,18.7152],[32,16],[18.7152,13.2848],[16,0]],i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[.18823529411764706,.7843137254901961,.9725490196078431,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]}]}];var Ns=[{ddd:0,ind:1,ty:0,nm:"Atom/Torrent animation 6",refId:"lvc7ui4o20a2e3j8",sr:1,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,w:220,h:220,ip:0,op:240,st:0,hd:false,bm:0}];var Ws={a:"",d:"",tc:"",g:"Aninix"};var js={nm:Es,v:ws,fr:Is,ip:Ds,op:Cs,w:As,h:Rs,ddd:Ks,markers:Ms,assets:xs,layers:Ns,meta:Ws};let $s=e=>e,Us,Vs,Xs,qs,Qs;const Ys=692;const zs=21272066;var Gs=babelHelpers.classPrivateFieldLooseKey("params");var Js=babelHelpers.classPrivateFieldLooseKey("layout");var Zs=babelHelpers.classPrivateFieldLooseKey("wizard");var ea=babelHelpers.classPrivateFieldLooseKey("pages");var sa=babelHelpers.classPrivateFieldLooseKey("finishButton");var aa=babelHelpers.classPrivateFieldLooseKey("saveChangesButton");var ta=babelHelpers.classPrivateFieldLooseKey("flow");var la=babelHelpers.classPrivateFieldLooseKey("flowInitial");var ia=babelHelpers.classPrivateFieldLooseKey("flowLottieAnimation");var ra=babelHelpers.classPrivateFieldLooseKey("lottieIconContainer");var oa=babelHelpers.classPrivateFieldLooseKey("pageChanging");var na=babelHelpers.classPrivateFieldLooseKey("isCloseConfirmed");var ca=babelHelpers.classPrivateFieldLooseKey("render");var da=babelHelpers.classPrivateFieldLooseKey("renderHeader");var ba=babelHelpers.classPrivateFieldLooseKey("renderWizard");var pa=babelHelpers.classPrivateFieldLooseKey("saveChangesAction");var va=babelHelpers.classPrivateFieldLooseKey("getFinishButton");var ha=babelHelpers.classPrivateFieldLooseKey("getSaveChangesButton");var ua=babelHelpers.classPrivateFieldLooseKey("onChangeHandler");var Fa=babelHelpers.classPrivateFieldLooseKey("onCloseHandler");var La=babelHelpers.classPrivateFieldLooseKey("isDataChanged");var Pa=babelHelpers.classPrivateFieldLooseKey("saveFlowAction");var fa=babelHelpers.classPrivateFieldLooseKey("showErrors");var Ha=babelHelpers.classPrivateFieldLooseKey("showDemoInfo");var Ba=babelHelpers.classPrivateFieldLooseKey("renderDemoInfoContent");var ya=babelHelpers.classPrivateFieldLooseKey("getLottieIconContainer");var _a=babelHelpers.classPrivateFieldLooseKey("bindStartWorkBtn");var ma=babelHelpers.classPrivateFieldLooseKey("hasIncorrectData");var ka=babelHelpers.classPrivateFieldLooseKey("getIncorrectData");var Ta=babelHelpers.classPrivateFieldLooseKey("getFlow");var ga=babelHelpers.classPrivateFieldLooseKey("onContinueHandler");var Oa=babelHelpers.classPrivateFieldLooseKey("sendStepAnalytics");var Sa=babelHelpers.classPrivateFieldLooseKey("isFeatureTrialable");class Ea extends c.EventEmitter{constructor(e={}){super(e);Object.defineProperty(this,Sa,{value:Ga});Object.defineProperty(this,Oa,{value:za});Object.defineProperty(this,ga,{value:Ya});Object.defineProperty(this,Ta,{value:Qa});Object.defineProperty(this,ka,{value:qa});Object.defineProperty(this,ma,{value:Xa});Object.defineProperty(this,_a,{value:Va});Object.defineProperty(this,ya,{value:Ua});Object.defineProperty(this,Ba,{value:$a});Object.defineProperty(this,Ha,{value:ja});Object.defineProperty(this,fa,{value:Wa});Object.defineProperty(this,Pa,{value:Na});Object.defineProperty(this,La,{value:xa});Object.defineProperty(this,Fa,{value:Ma});Object.defineProperty(this,ua,{value:Ka});Object.defineProperty(this,ha,{value:Ra});Object.defineProperty(this,va,{value:Aa});Object.defineProperty(this,pa,{value:Ca});Object.defineProperty(this,ba,{value:Da});Object.defineProperty(this,da,{value:Ia});Object.defineProperty(this,ca,{value:wa});Object.defineProperty(this,Gs,{writable:true,value:void 0});Object.defineProperty(this,Js,{writable:true,value:void 0});Object.defineProperty(this,Zs,{writable:true,value:void 0});Object.defineProperty(this,ea,{writable:true,value:void 0});Object.defineProperty(this,sa,{writable:true,value:void 0});Object.defineProperty(this,aa,{writable:true,value:void 0});Object.defineProperty(this,ta,{writable:true,value:void 0});Object.defineProperty(this,la,{writable:true,value:void 0});Object.defineProperty(this,ia,{writable:true,value:null});Object.defineProperty(this,ra,{writable:true,value:void 0});Object.defineProperty(this,oa,{writable:true,value:false});Object.defineProperty(this,na,{writable:true,value:false});this.setEventNamespace("BX.Tasks.Flow.EditForm");babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs]=e;babelHelpers.classPrivateFieldLooseBase(this,Js)[Js]={};babelHelpers.classPrivateFieldLooseBase(this,ia)[ia]=null;babelHelpers.classPrivateFieldLooseBase(this,ra)[ra]=null;const s=babelHelpers.classPrivateFieldLooseBase(this,ua)[ua].bind(this);babelHelpers.classPrivateFieldLooseBase(this,ea)[ea]=[new re({onChangeHandler:s}),new Xe({onChangeHandler:s}),new ms({onChangeHandler:s})];const a={notifyAtHalfTime:true,responsibleCanChangeDeadline:false,taskControl:true,notifyOnQueueOverflow:50,notifyOnTasksInProgressOverflow:50,notifyWhenEfficiencyDecreases:70,taskCreators:[["meta-user","all-users"]]};if(babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].flowName){a.name=babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].flowName}babelHelpers.classPrivateFieldLooseBase(this,ta)[ta]=babelHelpers.classPrivateFieldLooseBase(this,Ta)[Ta](a)}static async createInstance(e={}){const{EditForm:s}=await top.BX.Runtime.loadExtension("tasks.flow.edit-form");const a=new s(e);a.openInSlider();return a}openInSlider(){const e=`tasks-flow-create-slider-${d.Text.getRandom()}`;BX.SidePanel.Instance.open(e,{cacheable:true,contentCallback:async e=>{var s;this.slider=e;const{data:a}=await d.ajax.runAction("tasks.flow.View.Access.check",{data:{flowId:babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].id>0?babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].id:0,context:(s=babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].context)!=null?s:"flows_grid",demoFlow:babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].demoFlow,guideFlow:babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].guideFlow}});if(a!==null){return d.Tag.render(Us||(Us=$s`${0}`),a.html)}if(babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].id>0){const{data:e}=await d.ajax.runAction("tasks.flow.Flow.get",{data:{flowId:babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].id}});babelHelpers.classPrivateFieldLooseBase(this,ta)[ta]=babelHelpers.classPrivateFieldLooseBase(this,Ta)[Ta](e)}babelHelpers.classPrivateFieldLooseBase(this,ea)[ea].forEach((e=>e.setFlow(babelHelpers.classPrivateFieldLooseBase(this,ta)[ta])));babelHelpers.classPrivateFieldLooseBase(this,la)[la]=structuredClone(babelHelpers.classPrivateFieldLooseBase(this,ta)[ta]);return babelHelpers.classPrivateFieldLooseBase(this,ca)[ca]()},width:Ys,events:{onLoad:e=>{const s=babelHelpers.classPrivateFieldLooseBase(this,ea)[ea].find((e=>e.getId()==="about-flow"));s.focusToEmptyName();requestAnimationFrame((()=>{babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].initHints()}))},onClose:e=>babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa](e)}})}}function wa(){return d.Tag.render(Vs||(Vs=$s`
			<div class="tasks-flow__create">
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,da)[da](),babelHelpers.classPrivateFieldLooseBase(this,ba)[ba]())}function Ia(){const e=d.Loc.getMessage(babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].id?"TASKS_FLOW_EDIT_FORM_HEADER_TITLE_EDIT":"TASKS_FLOW_EDIT_FORM_HEADER_TITLE");const s=d.Loc.getMessage(babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].id?"TASKS_FLOW_EDIT_FORM_HEADER_SUBTITLE":"TASKS_FLOW_EDIT_FORM_HEADER_SUBTITLE_CREATE");return d.Tag.render(Xs||(Xs=$s`
			<div class="ui-slider-section ui-slider-section-icon-center --rounding --icon-sm">
				<span class="tasks-flow__create-header_icon ui-icon ui-slider-icon"></span>
				<div class="ui-slider-content-box">
					<div class="ui-slider-heading-2">${0}</div>
					<div class="ui-slider-inner-box">
						<p class="ui-slider-paragraph-2">
							${0}
						</p>
					</div>
				</div>
			</div>
		`),e,s)}function Da(){babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs]=new l.Wizard({steps:babelHelpers.classPrivateFieldLooseBase(this,ea)[ea].map((e=>({id:e.getId(),title:e.getTitle(),content:e.render(),isFilled:()=>!babelHelpers.classPrivateFieldLooseBase(this,ma)[ma](e.getRequiredData())}))),onCancel:()=>this.slider.close(false,(()=>this.slider.destroy())),onDisabledContinueButtonClick:babelHelpers.classPrivateFieldLooseBase(this,fa)[fa].bind(this),onContinueHandler:babelHelpers.classPrivateFieldLooseBase(this,ga)[ga].bind(this),finishButton:babelHelpers.classPrivateFieldLooseBase(this,va)[va](),saveChangesButton:babelHelpers.classPrivateFieldLooseBase(this,ha)[ha](),article:zs});return babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].render()}function Ca(){const e=babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].id>0;if(!e||babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].demo){return null}return babelHelpers.classPrivateFieldLooseBase(this,Pa)[Pa]()}function Aa(){var e,s;(s=(e=babelHelpers.classPrivateFieldLooseBase(this,sa))[sa])!=null?s:e[sa]=new t.Button({text:d.Loc.getMessage(babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].id?"TASKS_FLOW_EDIT_FORM_SAVE_FLOW":"TASKS_FLOW_EDIT_FORM_CREATE_FLOW"),color:t.Button.Color.PRIMARY,round:true,size:t.Button.Size.LARGE,onclick:()=>babelHelpers.classPrivateFieldLooseBase(this,Pa)[Pa]()});return babelHelpers.classPrivateFieldLooseBase(this,sa)[sa]}function Ra(){var e,s;if(!babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].id||babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].demo){return null}(s=(e=babelHelpers.classPrivateFieldLooseBase(this,aa))[aa])!=null?s:e[aa]=new t.Button({text:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_SAVE_CHANGES"),color:t.Button.Color.SUCCESS,round:true,size:BX.UI.Button.Size.LARGE,onclick:()=>babelHelpers.classPrivateFieldLooseBase(this,pa)[pa]()});return babelHelpers.classPrivateFieldLooseBase(this,aa)[aa]}function Ka(){babelHelpers.classPrivateFieldLooseBase(this,ta)[ta]=babelHelpers.classPrivateFieldLooseBase(this,Ta)[Ta]();babelHelpers.classPrivateFieldLooseBase(this,ea)[ea].forEach((e=>e.update()));babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].update()}function Ma(e){if(babelHelpers.classPrivateFieldLooseBase(this,na)[na]||!babelHelpers.classPrivateFieldLooseBase(this,La)[La]()){return}e.denyAction();v.MessageBox.show({useAirDesign:true,title:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_ONCLOSE_POPUP_TITLE"),message:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_ONCLOSE_POPUP_MESSAGE"),buttons:v.MessageBoxButtons.OK_CANCEL,okCaption:d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_ONCLOSE_POPUP_OK_CAPTION"),onOk:e=>{e.close();babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].hideHints();this.emit("afterClose");babelHelpers.classPrivateFieldLooseBase(this,na)[na]=true;this.slider.close()}})}function xa(){return JSON.stringify(babelHelpers.classPrivateFieldLooseBase(this,Ta)[Ta]())!==JSON.stringify(babelHelpers.classPrivateFieldLooseBase(this,la)[la])}function Na(){var e,s,a,l,i,r;if(babelHelpers.classPrivateFieldLooseBase(this,ma)[ma]()){babelHelpers.classPrivateFieldLooseBase(this,fa)[fa]();return}if((e=babelHelpers.classPrivateFieldLooseBase(this,aa)[aa])!=null&&e.isDisabled()||(s=babelHelpers.classPrivateFieldLooseBase(this,sa)[sa])!=null&&s.isDisabled()){return}(a=babelHelpers.classPrivateFieldLooseBase(this,aa)[aa])==null?void 0:a.setState(t.ButtonState.DISABLED);(l=babelHelpers.classPrivateFieldLooseBase(this,sa)[sa])==null?void 0:l.setState(t.ButtonState.DISABLED);const o=Object.fromEntries(Object.entries(babelHelpers.classPrivateFieldLooseBase(this,Ta)[Ta]()).map((([e,s])=>[e,d.Type.isBoolean(s)?s?1:0:s])));const n=o.id?"update":"create";const c=o.id?"TASKS_FLOW_EDIT_FORM_FLOW_UPDATE":"TASKS_FLOW_EDIT_FORM_FLOW_CREATE";d.ajax.runAction(`tasks.flow.Flow.${o.demo?"activateDemo":n}`,{data:{flowData:o,analyticsParams:{guideFlow:(i=babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].guideFlow)!=null?i:"N",context:(r=babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].context)!=null?r:"flows_grid"}}}).then((e=>{if(e.status==="success"){const s=e.data;this.emit("afterSave",s);babelHelpers.classPrivateFieldLooseBase(this,na)[na]=true;this.slider.close(false,(()=>{if(s.trialFeatureEnabled){babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha]()}this.slider.destroy()}));BX.UI.Notification.Center.notify({content:d.Loc.getMessage(c),width:"auto"})}}),(e=>{var s,a;(s=babelHelpers.classPrivateFieldLooseBase(this,aa)[aa])==null?void 0:s.setState(null);(a=babelHelpers.classPrivateFieldLooseBase(this,sa)[sa])==null?void 0:a.setState(null);alert(e.errors.map((e=>e.message)).join("\n"))}))}function Wa(){const e=babelHelpers.classPrivateFieldLooseBase(this,ka)[ka]();babelHelpers.classPrivateFieldLooseBase(this,ea)[ea].forEach((s=>s.showErrors(e)))}function ja(){const e=new a.Popup({id:"tasks-flow-task-demo-info",className:"tasks-flow__task-demo-info",width:620,overlay:true,padding:48,closeIcon:true,content:babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba](),events:{onFirstShow:e=>{babelHelpers.classPrivateFieldLooseBase(this,_a)[_a](e.getTarget())}}});e.show()}function $a(){return d.Tag.render(qs||(qs=$s`
			<div class="tasks-flow__task-demo-info_wrapper">
				<div class="tasks-flow__task-demo-info_content">
					<div class="tasks-flow__task-demo-info_title">
						${0}
					</div>
					<div class="tasks-flow__task-demo-info_text">
						${0}
					</div>
					<div class="tasks-flow__task-demo-info_text-trial">
						${0}
					</div>
					<div class="ui-btn ui-btn-sm ui-btn-primary ui-btn-round ui-btn-no-caps">
						${0}
					</div>
				</div>
				${0}
			</div>
		`),d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_DEMO_INFO_TITLE_1"),d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_DEMO_INFO_TEXT_1"),d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_DEMO_INFO_TEXT_TRIAL_1"),d.Loc.getMessage("TASKS_FLOW_EDIT_FORM_DEMO_INFO_BTN_1"),babelHelpers.classPrivateFieldLooseBase(this,ya)[ya]())}function Ua(){if(!babelHelpers.classPrivateFieldLooseBase(this,ra)[ra]){babelHelpers.classPrivateFieldLooseBase(this,ra)[ra]=d.Tag.render(Qs||(Qs=$s`
				<div class="tasks-flow__task-demo-info_image"></div>
			`));babelHelpers.classPrivateFieldLooseBase(this,ia)[ia]=p.Lottie.loadAnimation({container:babelHelpers.classPrivateFieldLooseBase(this,ra)[ra],renderer:"svg",loop:false,animationData:js})}return babelHelpers.classPrivateFieldLooseBase(this,ra)[ra]}function Va(e){const s=e.getContentContainer();if(d.Type.isDomNode(s)){const a=e.getContentContainer().querySelector(".ui-btn");if(d.Type.isDomNode(s)){d.Event.bind(a,"click",(()=>e.close()))}}}function Xa(e=[]){const s=babelHelpers.classPrivateFieldLooseBase(this,ka)[ka]();for(const a of e){if(s.includes(a)){return true}}return!d.Type.isArrayFilled(e)&&d.Type.isArrayFilled(s)}function qa(){const e=babelHelpers.classPrivateFieldLooseBase(this,ta)[ta];const s=[];if(!d.Type.isStringFilled(e.name)){s.push("name")}if(e.plannedCompletionTime<=0){s.push("plannedCompletionTime")}if(!d.Type.isArrayFilled(e.taskCreators)){s.push("taskCreators")}if(!d.Type.isArrayFilled(e.responsibleList)||e.distributionType==="manually"&&e.responsibleList[0]<=0){s.push("responsibleList")}if(e.id>0&&e.groupId<=0&&e.demo===false){s.push("groupId")}if(!d.Type.isNumber(e.templateId)){s.push("templateId")}if(e.id>0&&e.ownerId<=0&&e.demo===false){s.push("ownerId")}if(d.Type.isNumber(e.notifyOnQueueOverflow)&&e.notifyOnQueueOverflow<=0){s.push("notifyOnQueueOverflow")}if(d.Type.isNumber(e.notifyOnTasksInProgressOverflow)&&e.notifyOnTasksInProgressOverflow<=0){s.push("notifyOnTasksInProgressOverflow")}if(d.Type.isNumber(e.notifyWhenEfficiencyDecreases)&&(e.notifyWhenEfficiencyDecreases<=0||e.notifyWhenEfficiencyDecreases>100)){s.push("notifyWhenEfficiencyDecreases")}return s}function Qa(e={}){var s;return{id:babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].flowId,demo:"demo"in e?e.demo===true:((s=babelHelpers.classPrivateFieldLooseBase(this,ta)[ta])==null?void 0:s.demo)===true,...babelHelpers.classPrivateFieldLooseBase(this,ea)[ea].reduce(((s,a)=>({...s,...a.getFields(e)})),{})}}async function Ya(){if(babelHelpers.classPrivateFieldLooseBase(this,oa)[oa]===true){return Promise.resolve(false)}babelHelpers.classPrivateFieldLooseBase(this,oa)[oa]=true;const e=babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].getCurrentStep().id;const s=babelHelpers.classPrivateFieldLooseBase(this,ea)[ea].find((s=>s.getId()===e));const a=await(s==null?void 0:s.onContinueClick(babelHelpers.classPrivateFieldLooseBase(this,ta)[ta]).then((e=>{babelHelpers.classPrivateFieldLooseBase(this,oa)[oa]=false;return e})));const t=d.Type.isNil(s.getFlowId());const l=t&&a;if(l){await babelHelpers.classPrivateFieldLooseBase(this,Oa)[Oa]()}return a}async function za(){var e;const{sendData:s}=await d.Runtime.loadExtension("ui.analytics");const a=babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].getCurrentStepIndex()+1;const t=await babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa]()?"Y":"N";s({tool:"tasks",category:"flows",event:`flow_create_step${a}`,c_section:"tasks",c_sub_section:(e=babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].context)!=null?e:"flows_grid",c_element:"continue_button",p1:`isDemo_${t}`})}async function Ga(){if(d.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].isFeatureTrialable)){const{data:e}=await d.ajax.runAction("tasks.flow.Flow.getFeatureParams");babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].isFeatureTrialable=e.isFeatureTrialable}return babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs].isFeatureTrialable}e.EditForm=Ea})(this.BX.Tasks.Flow=this.BX.Tasks.Flow||{},BX.SidePanel,BX.Main,BX.UI,BX.Tasks,BX.Tasks,BX,BX,BX.UI.EntitySelector,BX.Event,BX,BX.UI.FormElements,BX.UI,BX.UI.Dialogs);
//# sourceMappingURL=edit-form.bundle.map.js