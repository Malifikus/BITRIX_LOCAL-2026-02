{"version":3,"file":"template-history-grid.bundle.js","sources":["../src/component/fields/type-fields/type-localization-map.js","../src/component/fields/type-fields/type-fields.js","../src/component/fields/time-fields/time-fields.js","../src/component/fields/message-fields/message-field.js","../src/component/fields/message-fields/message-fields.js","../src/component/fields/errors-fields/errors-list.js","../src/component/fields/errors-fields/errors-fields.js","../src/component/grid-loader/grid-loader.js","../src/component/app.js","../src/template-history-grid.js"],"sourcesContent":["export const typeLocalizationMap = {\n\t1: 'TASKS_V2_TEMPLATE_HISTORY_GRID_TYPE_NOTICE',\n\t2: 'TASKS_V2_TEMPLATE_HISTORY_GRID_TYPE_WARNING',\n\t3: 'TASKS_V2_TEMPLATE_HISTORY_GRID_TYPE_ERROR',\n};\n","import { typeLocalizationMap } from './type-localization-map';\n\n// @vue/component\nexport const TypeFields = {\n\tprops: {\n\t\tgetGrid: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\ttypeLocalizationMap,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsystemLogTypeRef: [],\n\t\t\tsystemLogType: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tasync update(): Promise<void>\n\t\t{\n\t\t\tconst type = this.getGrid().querySelectorAll('[data-system-log-type]');\n\n\t\t\tthis.systemLogType = [...type].map((systemLogTypeNode: HTMLElement) => this.getSystemLogType(systemLogTypeNode));\n\n\t\t\tawait this.$nextTick();\n\n\t\t\ttype.forEach((systemLogTypeNode: HTMLElement) => {\n\t\t\t\tconst systemLogType = this.getSystemLogType(systemLogTypeNode);\n\t\t\t\tsystemLogTypeNode.append(this.systemLogTypeRef[systemLogType.rowId]);\n\t\t\t});\n\t\t},\n\t\tgetSystemLogType(systemLogTypeNode: HTMLElement): Object\n\t\t{\n\t\t\tconst rowId = Number(systemLogTypeNode.closest('[data-id]').dataset.id);\n\t\t\tconst type = systemLogTypeNode.dataset.systemLogType;\n\n\t\t\treturn {\n\t\t\t\trowId,\n\t\t\t\ttype,\n\t\t\t};\n\t\t},\n\t\tsetRef(element: HTMLElement, rowId: number): void\n\t\t{\n\t\t\tthis.systemLogTypeRef ??= {};\n\t\t\tthis.systemLogTypeRef[rowId] = element;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<template v-for=\"(type, id) in systemLogType\" :key=\"id\">\n\t\t\t<div :ref=\"(el) => setRef(el, type.rowId)\">\n\t\t\t\t{{ loc(typeLocalizationMap[type.type] ?? Object.values(typeLocalizationMap)[0]) }}\n\t\t\t</div>\n\t\t</template>\n\t`,\n};\n","import { DateTimeFormat } from 'main.date';\n\nimport { timezone } from 'tasks.v2.lib.timezone';\n\n// @vue/component\nexport const TimeFields = {\n\tprops: {\n\t\tgetGrid: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsystemLogTimeRef: [],\n\t\t\tsystemLogTime: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tasync update(): Promise<void>\n\t\t{\n\t\t\tconst time = this.getGrid().querySelectorAll('[data-system-log-time]');\n\n\t\t\tthis.systemLogTime = [...time].map((systemLogTimeNode: HTMLElement) => this.getSystemLogTime(systemLogTimeNode));\n\n\t\t\tawait this.$nextTick();\n\n\t\t\ttime.forEach((systemLogTimeNode: HTMLElement) => {\n\t\t\t\tconst systemLogTime = this.getSystemLogTime(systemLogTimeNode);\n\t\t\t\tsystemLogTimeNode.append(this.systemLogTimeRef[systemLogTime.rowId]);\n\t\t\t});\n\t\t},\n\t\tgetSystemLogTime(systemLogTimeNode: HTMLElement): Object\n\t\t{\n\t\t\tconst rowId = Number(systemLogTimeNode.closest('[data-id]').dataset.id);\n\t\t\tconst offsetTimestamp = this.getOffsetTimestamp(systemLogTimeNode.dataset.systemLogTime);\n\n\t\t\treturn {\n\t\t\t\trowId,\n\t\t\t\toffsetTimestamp,\n\t\t\t};\n\t\t},\n\t\tgetOffsetTimestamp(timestampString: string): number\n\t\t{\n\t\t\tconst timestamp = Number(timestampString) * 1000;\n\t\t\tconst offset = timezone.getOffset(timestamp);\n\t\t\tconst offsetTimestamp = (timestamp + offset) / 1000;\n\n\t\t\treturn DateTimeFormat.format(DateTimeFormat.getFormat('FORMAT_DATETIME'), offsetTimestamp);\n\t\t},\n\t\tsetRef(element: HTMLElement, rowId: number): void\n\t\t{\n\t\t\tthis.systemLogTimeRef ??= {};\n\t\t\tthis.systemLogTimeRef[rowId] = element;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<template v-for=\"(time, id) in systemLogTime\" :key=\"id\">\n\t\t\t<div :ref=\"(el) => setRef(el, time.rowId)\">{{ time.offsetTimestamp }}</div>\n\t\t</template>\n\t`,\n};","import type { PopupOptions } from 'main.popup';\n\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\n\nimport { Hint } from 'tasks.v2.component.elements.hint';\n\nexport type Message = {\n\tmessage: ?string,\n\tlink: ?string,\n\trowId: ?number,\n\terrors: ?Array<Object>,\n};\n\nconst pattern = /\\(#(\\d+)\\)(?![\\S\\s]*\\(#\\d+\\))/;\n\n// @vue/component\nexport const MessageField = {\n\tcomponents: {\n\t\tBIcon,\n\t\tHint,\n\t},\n\tprops: {\n\t\t/** @type Message */\n\t\tmessage: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tactiveHintRowId: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['hintOpen', 'hintClose'],\n\tsetup(): { Outline: typeof Outline }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tshowHint: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tformattedMessage(): ?string\n\t\t{\n\t\t\treturn this.message.message?.replace(pattern, '').trim();\n\t\t},\n\t\tlinkText(): ?string\n\t\t{\n\t\t\treturn this.message.message?.match(pattern)[0] ?? null;\n\t\t},\n\t\terrorMessage(): ?string\n\t\t{\n\t\t\treturn this.message.errors[0].MESSAGE;\n\t\t},\n\t\terrorLink(): ?string\n\t\t{\n\t\t\treturn this.message.errors[0].LINK;\n\t\t},\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\toffsetLeft: this.$refs.errorIcon.$el.offsetWidth / 2,\n\t\t\t\tmaxWidth: 494,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\topenHint(): void\n\t\t{\n\t\t\tif (this.activeHintRowId !== null && this.activeHintRowId !== this.message.rowId)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.showHint)\n\t\t\t{\n\t\t\t\tthis.showHint = true;\n\t\t\t\tthis.$emit('hintOpen', this.message.rowId);\n\t\t\t}\n\t\t},\n\t\tcloseHint(): void\n\t\t{\n\t\t\tif (this.showHint)\n\t\t\t{\n\t\t\t\tthis.showHint = false;\n\t\t\t\tthis.$emit('hintClose', this.message.rowId);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-message\">\n\t\t\t<div v-if=\"message.link\">{{ formattedMessage }}<a :href=\"message.link\">{{ linkText }}</a></div>\n\t\t\t<span v-else>{{ message.message }}</span>\n\t\t\t\t<BIcon\n\t\t\t\t\tv-if=\"message.errors?.length > 0\"\n\t\t\t\t\tref=\"errorIcon\"\n\t\t\t\t\tclass=\"tasks-field-replication-error-icon\"\n\t\t\t\t\t@mouseenter=\"openHint\"\n\t\t\t\t\t:name=\"Outline.ALERT\"\n\t\t\t\t/>\n\t\t\t\t<Hint\n\t\t\t\t\tv-if=\"showHint\"\n\t\t\t\t\t:bindElement=\"$refs.errorIcon.$el\"\n\t\t\t\t\t:options=\"popupOptions\"\n\t\t\t\t\t@close=\"closeHint\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"tasks-field-replication-sheet__error-hint-container\">\n\t\t\t\t\t\t<div class=\"tasks-field-replication-sheet__error-hint__error-message\">\n\t\t\t\t\t\t\t{{ errorMessage.replace('#LINK#', '') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"errorLink\"\n\t\t\t\t\t\t\tclass=\"tasks-field-replication-sheet__error-hint__error-link-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t:href=\"errorLink\"\n\t\t\t\t\t\t\t\tclass=\"tasks-field-replication-sheet__error-hint__error-link\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ loc('TASKS_V2_TEMPLATE_HISTORY_GRID_ACCESS_RIGHTS_MORE_LINK') }}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Hint>\n\t\t</div>\n\t`,\n};\n","import { MessageField } from './message-field';\nimport type { Message } from './message-field';\n\n// @vue/component\nexport const MessageFields = {\n\tcomponents: {\n\t\tMessageField,\n\t},\n\tprops: {\n\t\tgetGrid: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsystemLogMessageRef: [],\n\t\t\tsystemLogMessage: [],\n\t\t\tactiveHintRowId: null,\n\t\t};\n\t},\n\tmethods: {\n\t\tasync update(): Promise<void>\n\t\t{\n\t\t\tconst message = this.getGrid().querySelectorAll('[data-system-log-message]');\n\n\t\t\tthis.systemLogMessage = [...message].map((systemLogMessageNode: HTMLElement) => this.getSystemLogMessage(systemLogMessageNode));\n\n\t\t\tawait this.$nextTick();\n\n\t\t\tmessage.forEach((systemLogMessageNode: HTMLElement) => {\n\t\t\t\tconst systemLogMessage = this.getSystemLogMessage(systemLogMessageNode);\n\t\t\t\tsystemLogMessageNode.append(this.systemLogMessageRef[systemLogMessage.rowId]);\n\t\t\t});\n\t\t},\n\t\tgetSystemLogMessage(systemLogMessageNode: HTMLElement): Message\n\t\t{\n\t\t\tconst rowId = Number(systemLogMessageNode.closest('[data-id]').dataset.id);\n\n\t\t\t/** @type {{ message: ?string, link: ?string, errors: ?array }} */\n\t\t\tconst message = JSON.parse(systemLogMessageNode.dataset.systemLogMessage);\n\n\t\t\treturn {\n\t\t\t\trowId,\n\t\t\t\tmessage: message.message,\n\t\t\t\tlink: message.link,\n\t\t\t\terrors: message.errors,\n\t\t\t};\n\t\t},\n\t\tsetRef(element: HTMLElement, rowId: number): void\n\t\t{\n\t\t\tthis.systemLogMessageRef ??= {};\n\t\t\tthis.systemLogMessageRef[rowId] = element;\n\t\t},\n\t\tonHintOpen(rowId: number): void\n\t\t{\n\t\t\tthis.activeHintRowId = rowId;\n\t\t},\n\t\tonHintClose(rowId: number): void\n\t\t{\n\t\t\tif (this.activeHintRowId === rowId)\n\t\t\t{\n\t\t\t\tthis.activeHintRowId = null;\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<template v-for=\"(message, id) in systemLogMessage\" :key=\"id\">\n\t\t\t<MessageField\n\t\t\t\t:ref=\"(el) => setRef(el?.$el, message.rowId)\"\n\t\t\t\t:message=\"message\"\n\t\t\t\t:activeHintRowId\n\t\t\t\t@hintOpen=\"onHintOpen\"\n\t\t\t\t@hintClose=\"onHintClose\"\n\t\t\t/>\n\t\t</template>\n\t`,\n};\n","import { Type } from 'main.core';\n\nexport type Error = {\n\tMESSAGE: ?string,\n\tTYPE: ?string,\n\tCODE: ?number | string,\n\tLINK: ?string,\n};\n\n// @vue/component\nexport const ErrorsList = {\n\tprops: {\n\t\terrors: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tparsedErrors(): ?Error[]\n\t\t{\n\t\t\treturn JSON.parse(this.errors);\n\t\t},\n\t\tisEmpty(): boolean\n\t\t{\n\t\t\treturn Type.isNil(this.parsedErrors) || this.parsedErrors.length === 0;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ul v-if=\"!isEmpty\">\n\t\t\t<li v-for=\"(error, errorIndex) in parsedErrors\" :key=\"errorIndex\">\n\t\t\t\t{{ (error.MESSAGE ?? '').replace('#LINK#', '') }}\n\t\t\t\t<a\n\t\t\t\t\tv-if=\"error.LINK\"\n\t\t\t\t\t:href=\"error.LINK\"\n\t\t\t\t>\n\t\t\t\t\t{{ loc('TASKS_V2_TEMPLATE_HISTORY_GRID_ACCESS_RIGHTS_MORE_LINK') }}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t\t<span v-else>{{ loc('TASKS_V2_TEMPLATE_HISTORY_GRID_NO_ERRORS_PLACEHOLDER') }}</span>\n\t`,\n};\n","import { ErrorsList } from './errors-list';\n\n// @vue/component\nexport const ErrorsFields = {\n\tcomponents: {\n\t\tErrorsList,\n\t},\n\tprops: {\n\t\tgetGrid: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsystemLogErrorsRef: [],\n\t\t\tsystemLogErrors: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tasync update(): Promise<void>\n\t\t{\n\t\t\tconst errors = this.getGrid().querySelectorAll('[data-system-log-errors]');\n\n\t\t\tthis.systemLogErrors = [...errors].map((systemLogErrorsNode: HTMLElement) => this.getSystemLogErrors(systemLogErrorsNode));\n\n\t\t\tawait this.$nextTick();\n\n\t\t\terrors.forEach((systemLogErrorsNode: HTMLElement) => {\n\t\t\t\tconst systemLogErrors = this.getSystemLogErrors(systemLogErrorsNode);\n\t\t\t\tsystemLogErrorsNode.append(this.systemLogErrorsRef[systemLogErrors.rowId]);\n\t\t\t});\n\t\t},\n\t\tgetSystemLogErrors(systemLogErrorsNode: HTMLElement): Object\n\t\t{\n\t\t\tconst rowId = Number(systemLogErrorsNode.closest('[data-id]').dataset.id);\n\t\t\tconst errors = systemLogErrorsNode.dataset.systemLogErrors;\n\n\t\t\treturn {\n\t\t\t\trowId,\n\t\t\t\terrors,\n\t\t\t};\n\t\t},\n\t\tsetRef(element: HTMLElement, rowId: number): void\n\t\t{\n\t\t\tthis.systemLogErrorsRef ??= {};\n\t\t\tthis.systemLogErrorsRef[rowId] = element;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<template v-for=\"(systemErrors, id) in systemLogErrors\" :key=\"id\">\n\t\t\t<ErrorsList\n\t\t\t\t:ref=\"(el) => setRef(el?.$el, systemErrors.rowId)\"\n\t\t\t\t:errors=\"systemErrors.errors\"\n\t\t\t/>\n\t\t</template>\n\t`,\n};\n","import './grid-loader.css';\n\n// @vue/component\nexport const GridLoader = {\n\ttemplate: `\n\t\t<div class=\"tasks-template-history-grid-loader-spinner\"/>\n\t`,\n};\n","import { Runtime, Uri } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { PopupManager } from 'main.popup';\n\nimport { HeadlineXl } from 'ui.system.typography.vue';\n\nimport { apiClient } from 'tasks.v2.lib.api-client';\nimport { Endpoint } from 'tasks.v2.const';\n\nimport { TypeFields } from './fields/type-fields/type-fields';\nimport { TimeFields } from './fields/time-fields/time-fields';\nimport { MessageFields } from './fields/message-fields/message-fields';\nimport { ErrorsFields } from './fields/errors-fields/errors-fields';\nimport { GridLoader } from './grid-loader/grid-loader';\n\nimport './app.css';\n\nconst gridId = 'tasks-template-history-grid';\n\n// @vue/component\nexport const App = {\n\tname: 'TemplateHistoryGrid',\n\tcomponents: {\n\t\tHeadlineXl,\n\t\tTimeFields,\n\t\tTypeFields,\n\t\tMessageFields,\n\t\tErrorsFields,\n\t\tGridLoader,\n\t},\n\tprops: {\n\t\ttemplateId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tEventEmitter.subscribe('Grid::beforeRequest', this.handleBeforeGridRequest);\n\t\tEventEmitter.subscribe('Grid::updated', this.update);\n\n\t\tvoid this.getData();\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tEventEmitter.unsubscribe('Grid::beforeRequest', this.handleBeforeGridRequest);\n\t\tEventEmitter.unsubscribe('Grid::updated', this.update);\n\n\t\tBX.Main?.gridManager?.destroy(gridId);\n\t\tPopupManager.getPopupById(`${gridId}-grid-settings-window`)?.destroy();\n\t},\n\tmethods: {\n\t\tasync getData(): Promise<void>\n\t\t{\n\t\t\tconst { html } = await apiClient.post(Endpoint.TemplateHistoryGetGrid, { templateId: this.templateId });\n\n\t\t\tawait Runtime.html(this.$refs.grid, html);\n\n\t\t\tthis.update();\n\t\t},\n\t\thandleBeforeGridRequest(event: BaseEvent): void\n\t\t{\n\t\t\tconst [, eventArgs] = event.getData();\n\n\t\t\tif (eventArgs.url)\n\t\t\t{\n\t\t\t\tthis.nav = new Uri(eventArgs.url ?? '').getQueryParams().nav;\n\t\t\t}\n\n\t\t\teventArgs.url = `/bitrix/services/main/ajax.php?action=tasks.V2.Template.History.getGridData&nav=${this.nav}`;\n\t\t\teventArgs.method = 'POST';\n\t\t\teventArgs.data = {\n\t\t\t\ttemplateId: this.templateId,\n\t\t\t};\n\t\t},\n\t\tupdate(): void\n\t\t{\n\t\t\tvoid this.$refs.timeFields.update();\n\t\t\tvoid this.$refs.typeFields.update();\n\t\t\tvoid this.$refs.messageFields.update();\n\t\t\tvoid this.$refs.errorsFields.update();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-template-history-grid-container\">\n\t\t\t<div class=\"tasks-template-history-grid-header\">\n\t\t\t\t<HeadlineXl>{{ loc('TASKS_V2_TEMPLATE_HISTORY_GRID_LOG_HEADER') }}</HeadlineXl>\n\t\t\t</div>\n\t\t\t<div ref=\"grid\" class=\"tasks-template-history-grid-main-content\"><GridLoader/></div>\n\t\t\t<TimeFields ref=\"timeFields\" :getGrid=\"() => this.$refs.grid\"/>\n\t\t\t<TypeFields ref=\"typeFields\" :getGrid=\"() => this.$refs.grid\"/>\n\t\t\t<MessageFields ref=\"messageFields\" :getGrid=\"() => this.$refs.grid\"/>\n\t\t\t<ErrorsFields ref=\"errorsFields\" :getGrid=\"() => this.$refs.grid\"/>\n\t\t</div>\n\t`,\n};\n","import type { Slider } from 'main.sidepanel';\n\nimport { BitrixVue, type VueCreateAppResult } from 'ui.vue3';\nimport { locMixin } from 'ui.vue3.mixins.loc-mixin';\n\nimport { App } from './component/app';\n\nexport type Params = {\n\ttemplateId: number | string,\n};\n\nexport class TemplateHistoryGrid\n{\n\t#application: ?VueCreateAppResult;\n\t#params: Params;\n\n\tconstructor(params: Params = {})\n\t{\n\t\tthis.#params = params;\n\t}\n\n\tasync mount(slider: Slider): Promise<void>\n\t{\n\t\tthis.#application = await this.#mountApplication(slider.getContentContainer());\n\t}\n\n\tunmount(): void\n\t{\n\t\tthis.#unmountApplication();\n\t}\n\n\tasync #mountApplication(container: HTMLElement): Promise<VueCreateAppResult>\n\t{\n\t\tconst application = BitrixVue.createApp(App, this.#params);\n\n\t\tapplication.mixin(locMixin);\n\t\tapplication.mount(container);\n\n\t\treturn application;\n\t}\n\n\t#unmountApplication(): void\n\t{\n\t\tthis.#application?.unmount();\n\t}\n}\n"],"names":["typeLocalizationMap","TypeFields","props","getGrid","type","Function","required","setup","data","systemLogTypeRef","systemLogType","methods","update","querySelectorAll","map","systemLogTypeNode","getSystemLogType","$nextTick","forEach","append","rowId","Number","closest","dataset","id","setRef","element","template","TimeFields","systemLogTimeRef","systemLogTime","time","systemLogTimeNode","getSystemLogTime","offsetTimestamp","getOffsetTimestamp","timestampString","timestamp","offset","timezone","getOffset","DateTimeFormat","format","getFormat","pattern","MessageField","components","BIcon","Hint","message","Object","activeHintRowId","default","emits","Outline","showHint","computed","formattedMessage","replace","trim","linkText","match","errorMessage","errors","MESSAGE","errorLink","LINK","popupOptions","offsetLeft","$refs","errorIcon","$el","offsetWidth","maxWidth","openHint","$emit","closeHint","MessageFields","systemLogMessageRef","systemLogMessage","systemLogMessageNode","getSystemLogMessage","JSON","parse","link","onHintOpen","onHintClose","ErrorsList","String","parsedErrors","isEmpty","Type","isNil","length","ErrorsFields","systemLogErrorsRef","systemLogErrors","systemLogErrorsNode","getSystemLogErrors","GridLoader","gridId","App","name","HeadlineXl","templateId","mounted","EventEmitter","subscribe","handleBeforeGridRequest","getData","beforeUnmount","unsubscribe","BX","Main","gridManager","destroy","PopupManager","getPopupById","html","apiClient","post","Endpoint","TemplateHistoryGetGrid","Runtime","grid","event","eventArgs","url","nav","Uri","getQueryParams","method","timeFields","typeFields","messageFields","errorsFields","TemplateHistoryGrid","constructor","params","mount","slider","getContentContainer","unmount","container","application","BitrixVue","createApp","mixin","locMixin"],"mappings":"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"}