{"version":3,"file":"relation-error.bundle.js","sources":["../src/relation-error.js"],"sourcesContent":["import type { Store } from 'ui.vue3.vuex';\n\nimport { Core } from 'tasks.v2.core';\nimport { Model } from 'tasks.v2.const';\nimport { Hint } from 'tasks.v2.lib.hint';\n\nclass RelationError extends Hint\n{\n\t#popupId: string = 'tasks-relation-error';\n\t#taskId: number | string;\n\n\tsetTaskId(taskId: number | string): RelationError\n\t{\n\t\tthis.#taskId = taskId;\n\n\t\treturn this;\n\t}\n\n\tasync showError(errorText: string, fieldId: string): Promise<void>\n\t{\n\t\tvoid this.$store.dispatch(`${Model.Tasks}/setFieldFilled`, {\n\t\t\tid: this.#taskId,\n\t\t\tfieldName: fieldId,\n\t\t});\n\n\t\tawait new Promise((resolve) => {\n\t\t\tsetTimeout(() => resolve(), 0);\n\t\t});\n\n\t\tconst scrollContainer = document.querySelector(`[data-task-card-scroll=\"${this.#taskId}\"]`);\n\t\tconst addButton = scrollContainer.querySelector(`[data-task-relation-add=\"${fieldId}\"]`);\n\n\t\tconst options = {\n\t\t\tid: this.#popupId,\n\t\t\tbindElement: addButton,\n\t\t\tcontent: errorText,\n\t\t\tmaxWidth: 470,\n\t\t\toffsetLeft: addButton.offsetWidth / 2,\n\t\t\ttargetContainer: scrollContainer,\n\t\t};\n\n\t\tawait super.showHint(options);\n\t}\n\n\tget $store(): Store\n\t{\n\t\treturn Core.getStore();\n\t}\n}\n\nexport const relationError = new RelationError();\n"],"names":["RelationError","Hint","setTaskId","taskId","showError","errorText","fieldId","$store","dispatch","Model","Tasks","id","fieldName","Promise","resolve","setTimeout","scrollContainer","document","querySelector","addButton","options","bindElement","content","maxWidth","offsetLeft","offsetWidth","targetContainer","showHint","Core","getStore","relationError"],"mappings":";;;;;;;CAIyC;CAAA;CAEzC,MAAMA,aAAa,SAASC,sBAAI,CAChC;GAAA;KAAA;KAAA;OAAA;OAAA,OACoB;;KAAsB;OAAA;OAAA;;;GAGzCC,SAAS,CAACC,MAAuB,EACjC;KACC,4CAAI,sBAAWA,MAAM;KAErB,OAAO,IAAI;;GAGZ,MAAMC,SAAS,CAACC,SAAiB,EAAEC,OAAe,EAClD;KACC,KAAK,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAE,GAAEC,oBAAK,CAACC,KAAM,iBAAgB,EAAE;OAC1DC,EAAE,0CAAE,IAAI,mBAAQ;OAChBC,SAAS,EAAEN;MACX,CAAC;KAEF,MAAM,IAAIO,OAAO,CAAEC,OAAO,IAAK;OAC9BC,UAAU,CAAC,MAAMD,OAAO,EAAE,EAAE,CAAC,CAAC;MAC9B,CAAC;KAEF,MAAME,eAAe,GAAGC,QAAQ,CAACC,aAAa,CAAE,2BAAwB,wCAAE,IAAI,mBAAS,IAAG,CAAC;KAC3F,MAAMC,SAAS,GAAGH,eAAe,CAACE,aAAa,CAAE,4BAA2BZ,OAAQ,IAAG,CAAC;KAExF,MAAMc,OAAO,GAAG;OACfT,EAAE,0CAAE,IAAI,qBAAS;OACjBU,WAAW,EAAEF,SAAS;OACtBG,OAAO,EAAEjB,SAAS;OAClBkB,QAAQ,EAAE,GAAG;OACbC,UAAU,EAAEL,SAAS,CAACM,WAAW,GAAG,CAAC;OACrCC,eAAe,EAAEV;MACjB;KAED,MAAM,KAAK,CAACW,QAAQ,CAACP,OAAO,CAAC;;GAG9B,IAAIb,MAAM,GACV;KACC,OAAOqB,kBAAI,CAACC,QAAQ,EAAE;;CAExB;AAEA,OAAaC,aAAa,GAAG,IAAI9B,aAAa,EAAE;;;;;;;;"}