this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{};(function(t,n,e,i,u,s){"use strict";const a=n.DurationFormat.getUnitDurations();const o={components:{BInput:e.BInput,BMenu:i.BMenu},props:{modelValue:{type:[Number,null],required:true},matchesWorkTime:{type:Boolean,default:false},label:{type:String,default:null},design:{type:String,default:null},error:{type:String,default:null},maxValue:{type:Number,default:2e4}},emits:["update:modelValue","focus","blur","menuShown","menuHidden"],data(){return{isMenuShown:false,durationValue:"",unitId:u.DurationUnit.Days}},computed:{menuOptions(){return()=>({bindElement:this.$refs.unit.$el,items:Object.entries(this.units).map((([t,{title:n}])=>({title:n,isSelected:t===this.unitId,onClick:()=>{this.unitId=t;this.update()}}))),targetContainer:document.body})},units(){return{[u.DurationUnit.Days]:{duration:this.matchesWorkTime?s.calendar.workdayDuration:a.d,title:this.formatUnit("d")},[u.DurationUnit.Hours]:{duration:a.H,title:this.formatUnit("H")},[u.DurationUnit.Minutes]:{duration:a.i,title:this.formatUnit("i")}}}},watch:{modelValue(){this.setDuration(this.modelValue)}},created(){this.setDuration(this.modelValue)},methods:{setDuration(t){if(!t){this.durationValue="";return}const n=t/this.units[u.DurationUnit.Minutes].duration;const e=t/this.units[u.DurationUnit.Hours].duration;const i=t/this.units[u.DurationUnit.Days].duration;const[s,a]={[true]:[Math.floor(n),u.DurationUnit.Minutes],[Number.isInteger(e)]:[e,u.DurationUnit.Hours],[Number.isInteger(i)]:[i,u.DurationUnit.Days]}.true;this.unitId=a;this.durationValue=String(s)},showMenu(){this.$emit("menuShown");this.isMenuShown=true},hideMenu(){this.$emit("menuHidden");this.isMenuShown=false},handleInput(){const t=this.durationValue.replaceAll(/\D/g,"");if(Number(t)<0||Number(t)>this.maxValue){var n;this.durationValue=(n=this.previousValue)!=null?n:"";return}this.durationValue=t;this.previousValue=t;this.update()},update(){this.$emit("update:modelValue",this.durationValue*this.units[this.unitId].duration)},formatUnit(t){const e=Number(this.durationValue)%1e3;return new n.DurationFormat(e*a[t]).format({format:t}).replace(e,"").trim()}},template:`\n\t\t<div class="b24-duration">\n\t\t\t<BInput\n\t\t\t\tv-model="durationValue"\n\t\t\t\t:label\n\t\t\t\t:design\n\t\t\t\t:error\n\t\t\t\tstretched\n\t\t\t\t@input="handleInput"\n\t\t\t\t@focus="$emit('focus')"\n\t\t\t\t@blur="$emit('blur')"\n\t\t\t/>\n\t\t\t<BInput\n\t\t\t\t:modelValue="units[unitId].title"\n\t\t\t\t:design\n\t\t\t\tdropdown\n\t\t\t\tclickable\n\t\t\t\tstretched\n\t\t\t\t:active="isMenuShown"\n\t\t\t\tref="unit"\n\t\t\t\t@click="showMenu"\n\t\t\t/>\n\t\t</div>\n\t\t<BMenu v-if="isMenuShown" :options="menuOptions()" @close="hideMenu"/>\n\t`};t.Duration=o})(this.BX.Tasks.V2.Component.Elements=this.BX.Tasks.V2.Component.Elements||{},BX.Main,BX.UI.System.Input.Vue,BX.UI.System.Menu,BX.Tasks.V2.Const,BX.Tasks.V2.Lib);
//# sourceMappingURL=duration.bundle.map.js