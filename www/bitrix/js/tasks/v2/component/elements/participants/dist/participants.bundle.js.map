{"version":3,"file":"participants.bundle.js","sources":["../src/user/user.js","../src/users/users.js","../src/more/more.js","../src/participants.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { BMenu, MenuItemDesign, type MenuOptions } from 'ui.system.menu.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { EventName, Model } from 'tasks.v2.const';\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { UserLabel } from 'tasks.v2.component.elements.user-label';\nimport { userService } from 'tasks.v2.provider.service.user-service';\nimport type { UserModel } from 'tasks.v2.model.users';\n\n// @vue/component\nexport const User = {\n\tcomponents: {\n\t\tHoverPill,\n\t\tUserLabel,\n\t\tBMenu,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tuserId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tcanAdd: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tinline: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\twithClear: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\twithMenu: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['edit', 'remove'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tuser(): UserModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Users}/getById`](this.userId);\n\t\t},\n\t\tmenuOptions(): MenuOptions\n\t\t{\n\t\t\tconst testId = `${this.taskId}-${this.userId}`;\n\n\t\t\treturn {\n\t\t\t\tid: 'tasks-field-users-menu',\n\t\t\t\tbindElement: this.$refs.user.$el,\n\t\t\t\toffsetTop: 8,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: this.loc('TASKS_V2_USERS_VIEW'),\n\t\t\t\t\t\ticon: Outline.PERSON,\n\t\t\t\t\t\tdataset: {\n\t\t\t\t\t\t\tid: `UserMenuProfile-${testId}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonClick: this.openProfile,\n\t\t\t\t\t},\n\t\t\t\t\t...EventEmitter.emit(EventName.UserMenuExternalItems, {\n\t\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t}).flat(),\n\t\t\t\t\tthis.inline && {\n\t\t\t\t\t\ttitle: this.loc('TASKS_V2_USERS_EDIT'),\n\t\t\t\t\t\ticon: Outline.EDIT_L,\n\t\t\t\t\t\tonClick: this.edit,\n\t\t\t\t\t},\n\t\t\t\t\t!this.inline && {\n\t\t\t\t\t\tdesign: MenuItemDesign.Alert,\n\t\t\t\t\t\ttitle: this.loc('TASKS_V2_USERS_REMOVE'),\n\t\t\t\t\t\ticon: Outline.TRASHCAN,\n\t\t\t\t\t\tdataset: {\n\t\t\t\t\t\t\tid: `UserMenuRemove-${testId}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonClick: this.remove,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.withMenu)\n\t\t\t{\n\t\t\t\tthis.isMenuShown = true;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.canAdd)\n\t\t\t{\n\t\t\t\tthis.edit();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.openProfile();\n\t\t},\n\t\tedit(): void\n\t\t{\n\t\t\tthis.$emit('edit');\n\t\t},\n\t\tremove(): void\n\t\t{\n\t\t\tthis.$emit('remove');\n\t\t},\n\t\topenProfile(): void\n\t\t{\n\t\t\tBX.SidePanel.Instance.emulateAnchorClick(userService.getUrl(this.userId));\n\t\t},\n\t},\n\ttemplate: `\n\t\t<HoverPill ref=\"user\" :withClear @clear=\"remove\" @click=\"handleClick\">\n\t\t\t<UserLabel :user/>\n\t\t</HoverPill>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptions\" @close=\"isMenuShown = false\"/>\n\t`,\n};\n","import { User } from '../user/user';\n\n// @vue/component\nexport const Users = {\n\tcomponents: {\n\t\tUser,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisEdit: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tuserIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tcanAdd: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tcanRemove: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tremovableUserId: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\tsingle: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tinline: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tshowMenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\temits: ['edit', 'remove'],\n\tcomputed: {\n\t\tisSafari(): boolean\n\t\t{\n\t\t\treturn BX.browser.IsSafari();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-users\" :class=\"{ '--safari': isSafari }\">\n\t\t\t<template v-for=\"userId in userIds\">\n\t\t\t\t<User\n\t\t\t\t\t:taskId\n\t\t\t\t\t:userId\n\t\t\t\t\t:canAdd\n\t\t\t\t\t:inline\n\t\t\t\t\t:withClear=\"!single && !inline && (canRemove || userId === removableUserId)\"\n\t\t\t\t\t:withMenu=\"showMenu && isEdit && (canRemove || removableUserId === userId)\"\n\t\t\t\t\t@edit=\"$emit('edit')\"\n\t\t\t\t\t@remove=\"$emit('remove', userId)\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n","import './more.css';\n\n// @vue/component\nexport const More = {\n\tprops: {\n\t\tcount: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\twithRemove: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tinline: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['showMore', 'removeAll'],\n\tcomputed: {\n\t\tmoreFormatted(): string\n\t\t{\n\t\t\treturn this.loc('TASKS_V2_USERS_MORE_COUNT', {\n\t\t\t\t'#COUNT#': this.count,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"count || withRemove\" :class=\"['tasks-field-users-footer', { '--inline': inline }]\">\n\t\t\t<div v-if=\"count\" class=\"tasks-field-users-more\" @click=\"$emit('showMore')\">\n\t\t\t\t{{ moreFormatted }}\n\t\t\t</div>\n\t\t\t<div v-if=\"withRemove\" class=\"tasks-field-users-more --remove\" @click=\"$emit('removeAll')\">\n\t\t\t\t{{ loc('TASKS_V2_USERS_REMOVE_ALL') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import type { PopupOptions } from 'main.popup';\nimport { showLimit } from 'tasks.v2.lib.show-limit';\nimport { Popup } from 'ui.vue3.components.popup';\nimport { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Core } from 'tasks.v2.core';\nimport { Model } from 'tasks.v2.const';\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { FieldAdd } from 'tasks.v2.component.elements.field-add';\nimport { AddButton } from 'tasks.v2.component.elements.add-button';\nimport { Hint } from 'tasks.v2.component.elements.hint';\nimport { UserLabel } from 'tasks.v2.component.elements.user-label';\nimport { idUtils } from 'tasks.v2.lib.id-utils';\nimport { usersDialog } from 'tasks.v2.lib.user-selector-dialog';\nimport { userService } from 'tasks.v2.provider.service.user-service';\nimport type { UserModel } from 'tasks.v2.model.users';\n\nimport { Users } from './users/users';\nimport { More } from './more/more';\nimport './participants.css';\n\nconst maxUsers = 4;\n\n// @vue/component\nexport const Participants = {\n\tcomponents: {\n\t\tRichLoc,\n\t\tPopup,\n\t\tHoverPill,\n\t\tFieldAdd,\n\t\tAddButton,\n\t\tHint,\n\t\tUserLabel,\n\t\tUsers,\n\t\tMore,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tcontext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tuserIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tcanAdd: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tcanRemove: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithHint: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\thintText: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tuseRemoveAll: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tsingle: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tmultipleOnPlus: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tinline: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tavatarOnly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdataset: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tisLocked: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tfeatureId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tshowMenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\temits: ['update', 'hintClick'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisDialogShown: false,\n\t\t\tisMoreShown: false,\n\t\t\tisHintShown: false,\n\t\t\tisHovered: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisEdit(): boolean\n\t\t{\n\t\t\treturn idUtils.isReal(this.taskId);\n\t\t},\n\t\tremovableUserId(): number\n\t\t{\n\t\t\tif (this.multipleOnPlus)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn this.canAdd ? Core.getParams().currentUser.id : 0;\n\t\t},\n\t\tuserCount(): number\n\t\t{\n\t\t\treturn this.userIds.length;\n\t\t},\n\t\tpopupOptions(): Function\n\t\t{\n\t\t\treturn (): PopupOptions => ({\n\t\t\t\tid: 'tasks-field-users-more-popup',\n\t\t\t\tbindElement: this.$refs.anchor,\n\t\t\t\tpadding: 18,\n\t\t\t\tmaxWidth: 300,\n\t\t\t\tmaxHeight: 300,\n\t\t\t\toffsetTop: 8,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t});\n\t\t},\n\t\tbodyUserIds(): number[]\n\t\t{\n\t\t\treturn this.userIds.slice(0, maxUsers);\n\t\t},\n\t\tmoreUserIds(): number[]\n\t\t{\n\t\t\treturn this.userIds.slice(maxUsers);\n\t\t},\n\t\tpopupUserIds(): number[]\n\t\t{\n\t\t\treturn this.inline && !this.canAdd ? this.userIds : this.moreUserIds;\n\t\t},\n\t\twithRemove(): boolean\n\t\t{\n\t\t\tif (!this.canRemove)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.useRemoveAll || this.userCount <= maxUsers)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.isDialogShown || this.isHovered;\n\t\t},\n\t},\n\twatch: {\n\t\tuserCount(): void\n\t\t{\n\t\t\tif (this.popupUserIds.length === 0)\n\t\t\t{\n\t\t\t\tthis.isMoreShown = false;\n\t\t\t}\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tvoid userService.list(this.userIds);\n\t},\n\tmethods: {\n\t\tgetUser(userId: number): UserModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Users}/getById`](userId);\n\t\t},\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.canAdd)\n\t\t\t{\n\t\t\t\tvoid this.showDialog();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.userIds.length === 1)\n\t\t\t{\n\t\t\t\tBX.SidePanel.Instance.emulateAnchorClick(userService.getUrl(this.userIds[0]));\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isMoreShown = true;\n\t\t},\n\t\thandleMore(): void\n\t\t{\n\t\t\tif ((!this.isEdit || this.inline) && this.canAdd)\n\t\t\t{\n\t\t\t\tvoid this.showDialog();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isMoreShown = true;\n\t\t},\n\t\tasync showDialog(plus: boolean = false): Promise<void>\n\t\t{\n\t\t\tif (this.isLocked)\n\t\t\t{\n\t\t\t\tvoid showLimit({\n\t\t\t\t\tfeatureId: this.featureId,\n\t\t\t\t\tbindElement: this.$refs.anchor,\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.withHint)\n\t\t\t{\n\t\t\t\tthis.isHintShown = true;\n\t\t\t\tthis.hintPromise = new Resolvable();\n\n\t\t\t\tif (await this.hintPromise === false)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.isDialogShown = true;\n\t\t\tvoid usersDialog.show({\n\t\t\t\ttargetNode: this.$refs.anchor,\n\t\t\t\tids: this.userIds,\n\t\t\t\tselectableIds: this.canRemove ? null : new Set([this.removableUserId]),\n\t\t\t\tonClose: this.handleDialogClose,\n\t\t\t\tisMultiple: !this.single && (!this.multipleOnPlus || plus),\n\t\t\t});\n\t\t},\n\t\thandleDialogClose(userIds: number[]): void\n\t\t{\n\t\t\tthis.isDialogShown = false;\n\t\t\tif (usersDialog.getDialog().isLoaded())\n\t\t\t{\n\t\t\t\tthis.updateUsers(userIds);\n\t\t\t}\n\t\t},\n\t\tremoveUser(userId: number): void\n\t\t{\n\t\t\tthis.updateUsers(this.userIds.filter((id) => id !== userId));\n\t\t},\n\t\tupdateUsers(userIds: number[]): void\n\t\t{\n\t\t\tthis.$emit('update', userIds);\n\t\t},\n\t\thandleHintClick(): void\n\t\t{\n\t\t\tthis.$emit('hintClick');\n\n\t\t\tthis.hintPromise.resolve(true);\n\n\t\t\tthis.isHintShown = false;\n\t\t},\n\t\tcloseHint(): void\n\t\t{\n\t\t\tthis.hintPromise.resolve(false);\n\n\t\t\tthis.isHintShown = false;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-bind=\"dataset\" @mouseenter=\"isHovered = true\" @mouseleave=\"isHovered = false\">\n\t\t\t<FieldAdd \n\t\t\t\tv-if=\"userCount === 0\"\n\t\t\t\t:icon=\"Outline.PERSON\"\n\t\t\t\t:isLocked\n\t\t\t\t@click=\"showDialog\"\n\t\t\t/>\n\t\t\t<div v-else-if=\"inline && userCount > 1 || avatarOnly\" class=\"tasks-field-users-inline\">\n\t\t\t\t<HoverPill compact @click=\"handleClick\">\n\t\t\t\t\t<template v-for=\"userId in bodyUserIds\">\n\t\t\t\t\t\t<UserLabel class=\"tasks-field-user --inline\" :user=\"getUser(userId)\" avatarOnly/>\n\t\t\t\t\t</template>\n\t\t\t\t</HoverPill>\n\t\t\t\t<More\n\t\t\t\t\t:count=\"moreUserIds.length\"\n\t\t\t\t\t:withRemove\n\t\t\t\t\tinline\n\t\t\t\t\t@showMore=\"handleMore\"\n\t\t\t\t\t@removeAll=\"updateUsers([])\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<AddButton \n\t\t\t\t\tv-if=\"canAdd && !inline\" \n\t\t\t\t\t:isVisible=\"isDialogShown || isHovered\" \n\t\t\t\t\t:isLocked\n\t\t\t\t\t@click=\"showDialog(true)\"\n\t\t\t\t/>\n\t\t\t\t<Users\n\t\t\t\t\t:taskId\n\t\t\t\t\t:isEdit\n\t\t\t\t\t:userIds=\"bodyUserIds\"\n\t\t\t\t\t:canAdd\n\t\t\t\t\t:canRemove=\"canRemove && !multipleOnPlus\"\n\t\t\t\t\t:removableUserId\n\t\t\t\t\t:single\n\t\t\t\t\t:inline\n\t\t\t\t\t:showMenu\n\t\t\t\t\t@edit=\"showDialog\"\n\t\t\t\t\t@remove=\"removeUser\"\n\t\t\t\t/>\n\t\t\t\t<More\n\t\t\t\t\t:count=\"moreUserIds.length\"\n\t\t\t\t\t:withRemove\n\t\t\t\t\t@showMore=\"handleMore\"\n\t\t\t\t\t@removeAll=\"updateUsers([])\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div ref=\"anchor\"/>\n\t\t</div>\n\t\t<Popup v-if=\"isMoreShown\" :options=\"popupOptions()\" @close=\"isMoreShown = false\">\n\t\t\t<Users\n\t\t\t\t:taskId\n\t\t\t\t:isEdit\n\t\t\t\t:userIds=\"popupUserIds\"\n\t\t\t\t:canAdd\n\t\t\t\t:canRemove\n\t\t\t\t:removableUserId\n\t\t\t\t:single\n\t\t\t\t:showMenu\n\t\t\t\t@edit=\"showDialog\"\n\t\t\t\t@remove=\"removeUser\"\n\t\t\t/>\n\t\t</Popup>\n\t\t<Hint v-if=\"isHintShown\" :bindElement=\"$refs.anchor\" @close=\"closeHint\">\n\t\t\t<RichLoc class=\"tasks-field-users-hint\" :text=\"hintText\" placeholder=\"[action]\">\n\t\t\t\t<template #action=\"{ text }\">\n\t\t\t\t\t<span @click=\"handleHintClick\">{{ text }}</span>\n\t\t\t\t</template>\n\t\t\t</RichLoc>\n\t\t</Hint>\n\t`,\n};\n\nfunction Resolvable(): Promise\n{\n\tconst promise = new Promise((resolve) => {\n\t\tthis.resolve = resolve;\n\t});\n\n\tpromise.resolve = this.resolve;\n\n\treturn promise;\n}\n"],"names":["User","components","HoverPill","UserLabel","BMenu","props","taskId","type","Number","String","required","userId","canAdd","Boolean","inline","withClear","withMenu","emits","data","isMenuShown","computed","user","$store","getters","Model","Users","menuOptions","testId","id","bindElement","$refs","$el","offsetTop","targetContainer","document","body","items","title","loc","icon","Outline","PERSON","dataset","onClick","openProfile","EventEmitter","emit","EventName","UserMenuExternalItems","flat","EDIT_L","edit","design","MenuItemDesign","Alert","TRASHCAN","remove","methods","handleClick","$emit","BX","SidePanel","Instance","emulateAnchorClick","userService","getUrl","template","isEdit","default","userIds","Array","canRemove","removableUserId","single","showMenu","isSafari","browser","IsSafari","More","count","withRemove","moreFormatted","maxUsers","Participants","RichLoc","Popup","FieldAdd","AddButton","Hint","context","withHint","hintText","useRemoveAll","multipleOnPlus","avatarOnly","Object","isLocked","featureId","setup","isDialogShown","isMoreShown","isHintShown","isHovered","idUtils","isReal","Core","getParams","currentUser","userCount","length","popupOptions","anchor","padding","maxWidth","maxHeight","bodyUserIds","slice","moreUserIds","popupUserIds","watch","mounted","list","getUser","showDialog","handleMore","plus","showLimit","hintPromise","Resolvable","usersDialog","show","targetNode","ids","selectableIds","Set","onClose","handleDialogClose","isMultiple","getDialog","isLoaded","updateUsers","removeUser","filter","handleHintClick","resolve","closeHint","promise","Promise"],"mappings":"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"}