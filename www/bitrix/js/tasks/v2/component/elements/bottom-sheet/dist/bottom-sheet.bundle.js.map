{"version":3,"file":"bottom-sheet.bundle.js","sources":["../src/bottom-sheet.js"],"sourcesContent":["import { Dom, Text, Event, Runtime } from 'main.core';\nimport type { PopupOptions } from 'main.popup';\n\nimport { Popup } from 'ui.vue3.components.popup';\n\nimport './bottom-sheet.css';\n\nexport type SheetBindProps = {\n\tgetBindElement: Function,\n\tgetTargetContainer: Function,\n};\n\n// @vue/component\nexport const BottomSheet = {\n\tcomponents: {\n\t\tPopup,\n\t},\n\tprops: {\n\t\tsheetBindProps: {\n\t\t\t/** @type SheetBindProps */\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tisExpanded: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tpadding: {\n\t\t\ttype: Number,\n\t\t\tdefault: 24,\n\t\t},\n\t\tpopupPadding: {\n\t\t\ttype: Number,\n\t\t\tdefault: 24,\n\t\t},\n\t\tuniqueKey: {\n\t\t\ttype: String,\n\t\t\tdefault: () => Text.getRandom(),\n\t\t},\n\t\tcustomClass: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\temits: ['close'],\n\tcomputed: {\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\tconst baseClass = 'b24-bottom-sheet';\n\t\t\tconst expandedClass = this.isExpanded ? '--expanded' : '';\n\t\t\tconst customClass = this.customClass || '';\n\n\t\t\tconst className = [baseClass, expandedClass, customClass]\n\t\t\t\t.filter((name: string) => name !== '')\n\t\t\t\t.join(' ');\n\n\t\t\treturn {\n\t\t\t\tid: `b24-bottom-sheet-${this.uniqueKey || 'default'}`,\n\t\t\t\tbindElement: this.sheetBindProps.getBindElement(),\n\t\t\t\ttargetContainer: this.sheetBindProps.getTargetContainer(),\n\t\t\t\tclassName,\n\t\t\t\tborderRadius: '18px 18px 0 0',\n\t\t\t\tpadding: this.popupPadding,\n\t\t\t\tanimation: {\n\t\t\t\t\tshowClassName: '--show',\n\t\t\t\t\tcloseClassName: '--close',\n\t\t\t\t\tcloseAnimationType: 'animation',\n\t\t\t\t},\n\t\t\t\tautoHide: false,\n\t\t\t};\n\t\t},\n\t},\n\twatch: {\n\t\tisExpanded(isExpanded: boolean): void\n\t\t{\n\t\t\tconst popup = this.$refs.popup?.getPopupInstance();\n\t\t\tDom.toggleClass(popup?.getPopupContainer(), '--expanded', isExpanded);\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.unfreezeDebounced = Runtime.debounce(this.unfreeze, 500, this);\n\t},\n\tmounted(): void\n\t{\n\t\tEvent.EventEmitter.subscribe('BX.UI.Viewer.Controller:onBeforeShow', this.freeze);\n\t\tEvent.EventEmitter.subscribe('BX.UI.Viewer.Controller:onClose', this.unfreezeDebounced);\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tEvent.EventEmitter.unsubscribe('BX.UI.Viewer.Controller:onBeforeShow', this.freeze);\n\t\tEvent.EventEmitter.unsubscribe('BX.UI.Viewer.Controller:onClose', this.unfreezeDebounced);\n\t},\n\tmethods: {\n\t\tfreeze(): void\n\t\t{\n\t\t\tthis.$refs.popup?.freeze();\n\t\t},\n\t\tunfreeze(): void\n\t\t{\n\t\t\tthis.$refs.popup?.unfreeze();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup ref=\"popup\" :options=\"popupOptions\" @close=\"$emit('close')\">\n\t\t\t<div class=\"b24-bottom-sheet-content\" :style=\"{ '--padding': padding + 'px' }\">\n\t\t\t\t<slot/>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n"],"names":["BottomSheet","components","Popup","props","sheetBindProps","type","Object","required","isExpanded","Boolean","default","padding","Number","popupPadding","uniqueKey","String","Text","getRandom","customClass","emits","computed","popupOptions","baseClass","expandedClass","className","filter","name","join","id","bindElement","getBindElement","targetContainer","getTargetContainer","borderRadius","animation","showClassName","closeClassName","closeAnimationType","autoHide","watch","popup","$refs","getPopupInstance","Dom","toggleClass","getPopupContainer","created","unfreezeDebounced","Runtime","debounce","unfreeze","mounted","Event","EventEmitter","subscribe","freeze","beforeUnmount","unsubscribe","methods","template"],"mappings":"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"}