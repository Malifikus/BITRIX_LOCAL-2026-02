{"version":3,"file":"user-avatar-list.bundle.js","sources":["../src/user-avatar-list-users.js","../src/user-avatar-list.js"],"sourcesContent":["import 'ui.tooltip';\n\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { UserLabel } from 'tasks.v2.component.elements.user-label';\n\nimport './user-avatar-list-users.css';\n\n// @vue/component\nexport const UserAvatarListUsers = {\n\tcomponents: {\n\t\tHoverPill,\n\t\tUserLabel,\n\t},\n\tprops: {\n\t\tusers: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tremovableUserId: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\tactiveUserId: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\tcompact: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twithoutClear: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: [\n\t\t'onUserClick',\n\t\t'onUserCrossClick',\n\t],\n\tmethods: {\n\t\tgetNode(userId: number): ?HTMLElement\n\t\t{\n\t\t\treturn this.$refs[`user_${userId}`]?.[0].$el;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<template v-for=\"user in users\" :key=\"user.id\">\n\t\t\t<HoverPill\n\t\t\t\tclass=\"b24-user-avatar-list-user\"\n\t\t\t\t:compact\n\t\t\t\t:withClear=\"!withoutClear && (!readonly || user.id === removableUserId) && !compact\"\n\t\t\t\t:active=\"activeUserId === user.id\"\n\t\t\t\t@click.stop=\"$emit('onUserClick', user.id)\"\n\t\t\t\t@clear=\"$emit('onUserCrossClick', user.id)\"\n\t\t\t>\n\t\t\t\t<UserLabel :user :ref=\"'user_' + user.id\" :avatarOnly=\"compact\"/>\n\t\t\t</HoverPill>\n\t\t</template>\n\t`,\n};\n","import type { PopupOptions } from 'main.popup';\n\nimport { Popup } from 'ui.vue3.components.popup';\nimport 'ui.tooltip';\n\nimport { userService } from 'tasks.v2.provider.service.user-service';\nimport { UserAvatar } from 'tasks.v2.component.elements.user-avatar';\nimport type { UserModel } from 'tasks.v2.model.users';\n\nimport { UserAvatarListUsers } from './user-avatar-list-users';\nimport './user-avatar-list.css';\n\n// @vue/component\nexport const UserAvatarList = {\n\tname: 'UiUserAvatarList',\n\tcomponents: {\n\t\tPopup,\n\t\tUserAvatar,\n\t\tUserAvatarListUsers,\n\t},\n\tprops: {\n\t\tusers: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tvisibleAmount: {\n\t\t\ttype: Number,\n\t\t\tdefault: 3,\n\t\t},\n\t\twithPopup: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisPopupShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tvisibleUsers(): UserModel[]\n\t\t{\n\t\t\treturn this.users.slice(0, this.visibleAmount);\n\t\t},\n\t\tpopupUsers(): UserModel[]\n\t\t{\n\t\t\treturn this.users.slice(this.visibleAmount);\n\t\t},\n\t\tcount(): number\n\t\t{\n\t\t\treturn this.users.length;\n\t\t},\n\t\tinvisibleCount(): number\n\t\t{\n\t\t\treturn this.count - this.visibleAmount;\n\t\t},\n\t\tpopupOptions(): Function\n\t\t{\n\t\t\treturn (): PopupOptions => ({\n\t\t\t\tid: 'ui-user-avatar-list-more-popup',\n\t\t\t\tbindElement: this.$refs.more,\n\t\t\t\tpadding: 18,\n\t\t\t\tmaxWidth: 300,\n\t\t\t\tmaxHeight: window.innerHeight / 2 - 40,\n\t\t\t\toffsetTop: 8,\n\t\t\t\toffsetLeft: -18,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tshowListUsers(): void\n\t\t{\n\t\t\tif (!this.withPopup)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isPopupShown = true;\n\t\t},\n\t\thandleClickFromListUsers(userId: number): void\n\t\t{\n\t\t\tBX.SidePanel.Instance.emulateAnchorClick(userService.getUrl(userId));\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tref=\"container\"\n\t\t\tclass=\"b24-user-avatar-list\"\n\t\t>\n\t\t\t<UserAvatar\n\t\t\t\tv-for=\"user in visibleUsers\"\n\t\t\t\t:key=\"user.id\"\n\t\t\t\t:id=\"user.id\"\n\t\t\t\t:src=\"user.image\"\n\t\t\t\t:type=\"user.type\"\n\t\t\t\t:bx-tooltip-user-id=\"user.id\"\n\t\t\t\tbx-tooltip-context=\"b24\"\n\t\t\t\tclass=\"b24-user-avatar-list-item\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-if=\"count > visibleAmount\"\n\t\t\t\tref=\"more\"\n\t\t\t\tclass=\"b24-user-avatar-list-more\"\n\t\t\t\t@click=\"showListUsers\"\n\t\t\t>\n\t\t\t\t+{{ invisibleCount }}\n\t\t\t</div>\n\t\t\t<Popup\n\t\t\t\tv-if=\"isPopupShown\"\n\t\t\t\t:options=\"popupOptions()\"\n\t\t\t\t@close=\"isPopupShown = false\"\n\t\t\t>\n\t\t\t\t<div class=\"b24-user-avatar-list-users --popup\">\n\t\t\t\t\t<UserAvatarListUsers\n\t\t\t\t\t\t:users=\"popupUsers\"\n\t\t\t\t\t\tref=\"popupUserList\"\n\t\t\t\t\t\t@onUserClick=\"(userId) => handleClickFromListUsers(userId)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Popup>\n\t\t</div>\n\t`,\n};\n"],"names":["UserAvatarListUsers","components","HoverPill","UserLabel","props","users","type","Array","required","readonly","Boolean","default","removableUserId","Number","activeUserId","compact","withoutClear","emits","methods","getNode","userId","$refs","$el","template","UserAvatarList","name","Popup","UserAvatar","visibleAmount","withPopup","data","isPopupShown","computed","visibleUsers","slice","popupUsers","count","length","invisibleCount","popupOptions","id","bindElement","more","padding","maxWidth","maxHeight","window","innerHeight","offsetTop","offsetLeft","targetContainer","document","body","showListUsers","handleClickFromListUsers","BX","SidePanel","Instance","emulateAnchorClick","userService","getUrl"],"mappings":";;;;;;;;CAOA;AACA,OAAaA,mBAAmB,GAAG;GAClCC,UAAU,EAAE;gBACXC,+CAAS;gBACTC;IACA;GACDC,KAAK,EAAE;KACNC,KAAK,EAAE;OACNC,IAAI,EAAEC,KAAK;OACXC,QAAQ,EAAE;MACV;KACDC,QAAQ,EAAE;OACTH,IAAI,EAAEI,OAAO;OACbC,OAAO,EAAE;MACT;KACDC,eAAe,EAAE;OAChBN,IAAI,EAAEO,MAAM;OACZF,OAAO,EAAE;MACT;KACDG,YAAY,EAAE;OACbR,IAAI,EAAEO,MAAM;OACZF,OAAO,EAAE;MACT;KACDI,OAAO,EAAE;OACRT,IAAI,EAAEI,OAAO;OACbC,OAAO,EAAE;MACT;KACDK,YAAY,EAAE;OACbV,IAAI,EAAEI,OAAO;OACbC,OAAO,EAAE;;IAEV;GACDM,KAAK,EAAE,CACN,aAAa,EACb,kBAAkB,CAClB;GACDC,OAAO,EAAE;KACRC,OAAO,CAACC,MAAc,EACtB;OAAA;OACC,sBAAO,IAAI,CAACC,KAAK,CAAE,QAAOD,MAAO,EAAC,CAAC,qBAA5B,YAA+B,CAAC,CAAC,CAACE,GAAG;;IAE7C;GACDC,QAAQ,EAAG;;;;;;;;;;;;;;CAcZ,CAAC;;CCnDD;AACA,OAAaC,cAAc,GAAG;GAC7BC,IAAI,EAAE,kBAAkB;GACxBxB,UAAU,EAAE;YACXyB,8BAAK;iBACLC,iDAAU;KACV3B;IACA;GACDI,KAAK,EAAE;KACNC,KAAK,EAAE;OACNC,IAAI,EAAEC,KAAK;OACXC,QAAQ,EAAE;MACV;KACDoB,aAAa,EAAE;OACdtB,IAAI,EAAEO,MAAM;OACZF,OAAO,EAAE;MACT;KACDkB,SAAS,EAAE;OACVvB,IAAI,EAAEI,OAAO;OACbC,OAAO,EAAE;;IAEV;GACDmB,IAAI,GACJ;KACC,OAAO;OACNC,YAAY,EAAE;MACd;IACD;GACDC,QAAQ,EAAE;KACTC,YAAY,GACZ;OACC,OAAO,IAAI,CAAC5B,KAAK,CAAC6B,KAAK,CAAC,CAAC,EAAE,IAAI,CAACN,aAAa,CAAC;MAC9C;KACDO,UAAU,GACV;OACC,OAAO,IAAI,CAAC9B,KAAK,CAAC6B,KAAK,CAAC,IAAI,CAACN,aAAa,CAAC;MAC3C;KACDQ,KAAK,GACL;OACC,OAAO,IAAI,CAAC/B,KAAK,CAACgC,MAAM;MACxB;KACDC,cAAc,GACd;OACC,OAAO,IAAI,CAACF,KAAK,GAAG,IAAI,CAACR,aAAa;MACtC;KACDW,YAAY,GACZ;OACC,OAAO,OAAqB;SAC3BC,EAAE,EAAE,gCAAgC;SACpCC,WAAW,EAAE,IAAI,CAACpB,KAAK,CAACqB,IAAI;SAC5BC,OAAO,EAAE,EAAE;SACXC,QAAQ,EAAE,GAAG;SACbC,SAAS,EAAEC,MAAM,CAACC,WAAW,GAAG,CAAC,GAAG,EAAE;SACtCC,SAAS,EAAE,CAAC;SACZC,UAAU,EAAE,CAAC,EAAE;SACfC,eAAe,EAAEC,QAAQ,CAACC;QAC1B,CAAC;;IAEH;GACDlC,OAAO,EAAE;KACRmC,aAAa,GACb;OACC,IAAI,CAAC,IAAI,CAACxB,SAAS,EACnB;SACC;;OAGD,IAAI,CAACE,YAAY,GAAG,IAAI;MACxB;KACDuB,wBAAwB,CAAClC,MAAc,EACvC;OACCmC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,kBAAkB,CAACC,iDAAW,CAACC,MAAM,CAACxC,MAAM,CAAC,CAAC;;IAErE;GACDG,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAsCZ,CAAC;;;;;;;;;"}