this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};(function(t,e,i,s,n,a,r,o,u){"use strict";const c="sectionMark";const k={name:"MarkTaskButton",components:{BMenu:s.BMenu,BIcon:i.BIcon,HoverPill:o.HoverPill},inject:{task:{}},setup(){},data(){return{isMenuShown:false,activeMenuItemId:this.task.mark}},computed:{isAllowed(){return this.task.rights.mark},menuOptions(){return()=>({id:"tasks-full-card-mark-task-menu",bindElement:this.$refs.container,sections:this.menuSections,items:this.menuItems})},menuSections(){return[{code:c,title:this.loc("TASKS_V2_MARK_TASK_MARK_SECTION_TITLE")}]},menuItems(){return[this.getNoMarkItem(),this.getPositiveMarkItem(),this.getNegativeMarkItem()]},formattedText(){if(this.activeMenuItemId===r.Mark.None||this.isLocked){return this.loc("TASKS_V2_MARK_TASK_BUTTON_NONE")}return this.loc("TASKS_V2_MARK_TASK_BUTTON_SET")},formattedIcon(){if(this.isLocked){return i.Outline.LOCK_M}if(this.activeMenuItemId===r.Mark.Positive){return i.Outline.LIKE}if(this.activeMenuItemId===r.Mark.Negative){return i.Outline.DISLIKE}return null},isLocked(){return!n.Core.getParams().restrictions.mark.available}},watch:{"task.mark":{handler:"updateMark"}},methods:{getNoMarkItem(){return{id:r.Mark.None,title:this.loc("TASKS_V2_MARK_TASK_MARK_NONE"),icon:i.Outline.TEXT_FORMAT_CANCEL,...this.getMenuItemOptions(r.Mark.None)}},getPositiveMarkItem(){return{id:r.Mark.Positive,title:this.loc("TASKS_V2_MARK_TASK_MARK_POSITIVE"),icon:i.Outline.LIKE,...this.getMenuItemOptions(r.Mark.Positive)}},getNegativeMarkItem(){return{id:r.Mark.Negative,title:this.loc("TASKS_V2_MARK_TASK_MARK_NEGATIVE"),icon:i.Outline.DISLIKE,...this.getMenuItemOptions(r.Mark.Negative)}},isSelected(t){return t===this.activeMenuItemId},getMenuItemOptions(t){const i={onClick:async()=>{if(this.activeMenuItemId===t){return}this.activeMenuItemId=t;void a.taskService.setMark(this.task.id,t)},sectionCode:c};if(t===this.activeMenuItemId){return{...i,isSelected:true,design:e.MenuItemDesign.Accent1}}return{...i,isSelected:false,design:e.MenuItemDesign.Default}},handleClick(){if(this.isLocked){void u.showLimit({featureId:n.Core.getParams().restrictions.mark.featureId});return}if(!this.isAllowed){return}this.isMenuShown=true},updateMark(){this.activeMenuItemId=this.task.mark}},template:`\n\t\t<div\n\t\t\tclass="tasks-full-card-mark-task-button-container"\n\t\t\tref="container"\n\t\t>\n\t\t\t<HoverPill\n\t\t\t\t:readonly="!isAllowed"\n\t\t\t\t@click="handleClick"\n\t\t\t>\n\t\t\t\t<div class="tasks-full-card-mark-task-mark-container">\n\t\t\t\t\t<div class="tasks-full-card-mark-task-mark-text">{{ formattedText }}</div>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\tv-if="formattedIcon"\n\t\t\t\t\t\tclass="tasks-full-card-mark-task-mark-icon"\n\t\t\t\t\t\t:name="formattedIcon"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</HoverPill>\n\t\t</div>\n\t\t<BMenu\n\t\t\tv-if="isMenuShown"\n\t\t\t@close="isMenuShown = false"\n\t\t\t:options="menuOptions()"\n\t\t/>\n\t`};t.MarkTaskButton=k})(this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{},BX.UI.System,BX.UI.IconSet,BX.UI.System.Menu,BX.Tasks.V2,BX.Tasks.V2.Provider.Service,BX.Tasks.V2.Const,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Lib);
//# sourceMappingURL=mark-task-button.bundle.map.js