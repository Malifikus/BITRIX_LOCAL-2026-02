{"version":3,"file":"relation-tasks.bundle.js","sources":["../src/relation-tasks.js","../src/relation-tasks-chip.js"],"sourcesContent":["import { hint, type HintParams } from 'ui.vue3.directives.hint';\nimport { TextMd } from 'ui.system.typography.vue';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.actions';\n\nimport { Core } from 'tasks.v2.core';\nimport { TaskField } from 'tasks.v2.const';\nimport { TaskList } from 'tasks.v2.component.task-list';\nimport { tooltip } from 'tasks.v2.component.elements.hint';\nimport { showLimit } from 'tasks.v2.lib.show-limit';\nimport { idUtils } from 'tasks.v2.lib.id-utils';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { RelationFieldMeta } from './types';\nimport './relation-tasks.css';\n\n// @vue/component\nexport const RelationTasks = {\n\tname: 'TaskRelationTasks',\n\tcomponents: {\n\t\tBIcon,\n\t\tTaskList,\n\t\tTextMd,\n\t},\n\tdirectives: { hint },\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisEdit: {},\n\t\tisTemplate: {},\n\t},\n\tprops: {\n\t\t/** @type RelationFieldMeta */\n\t\tmeta: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tfields: {\n\t\t\ttype: Set,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tisLocked: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tfeatureId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\temits: ['add'],\n\tsetup(): { task: TaskModel, meta: RelationFieldMeta }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tidsLoaded: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tids(): number[]\n\t\t{\n\t\t\treturn this.meta.service.getSortedIds(this.task[this.meta.idsField]);\n\t\t},\n\t\tloadingIds(): number[]\n\t\t{\n\t\t\treturn this.ids.filter((id: number | string) => !this.meta.service.hasStoreTask(id));\n\t\t},\n\t\ttext(): string\n\t\t{\n\t\t\tif (this.ids.length > 0)\n\t\t\t{\n\t\t\t\treturn this.loc(this.meta.getCountLoc(this.isTemplate), {\n\t\t\t\t\t'#COUNT#': this.ids.length,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.meta.getTitle(this.isTemplate);\n\t\t},\n\t\tcanOpenMore(): boolean\n\t\t{\n\t\t\treturn this.isEdit && (this.readonly || this.task[this.meta.containsField]);\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights[this.meta.right];\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\treturn (): HintParams => tooltip({\n\t\t\t\ttext: this.meta.getHint(this.isTemplate),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: this.$refs.add.offsetWidth / 2,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t},\n\twatch: {\n\t\tids(newIds: number[], oldIds: number[]): void\n\t\t{\n\t\t\tif ([...newIds || []].sort().join(',') === [...oldIds || []].sort().join(','))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.meta.service.hasUnloadedIds(this.taskId))\n\t\t\t{\n\t\t\t\tvoid this.meta.service.list(this.taskId);\n\t\t\t}\n\t\t},\n\t},\n\tasync created(): Promise<void>\n\t{\n\t\tthis.idsLoaded = this.meta.service.areIdsLoaded(this.taskId);\n\n\t\tif (!this.idsLoaded || this.meta.service.hasUnloadedIds(this.taskId))\n\t\t{\n\t\t\tawait this.meta.service.list(this.taskId, true);\n\t\t}\n\n\t\tthis.idsLoaded = true;\n\t},\n\tmethods: {\n\t\topenMore(): void\n\t\t{\n\t\t\tif (!this.canOpenMore)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isLocked)\n\t\t\t{\n\t\t\t\tthis.showLimit();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst userId = Core.getParams().currentUser.id;\n\t\t\tconst isTemplate = idUtils.isTemplate(this.taskId);\n\n\t\t\tconst tasksGridType = {\n\t\t\t\t[this.meta.id === TaskField.SubTasks]: 'subTasks',\n\t\t\t\t[this.meta.id === TaskField.RelatedTasks]: 'relatedTasks',\n\t\t\t\t[this.meta.id === TaskField.RelatedTasks && isTemplate]: 'relatedTemplateTasks',\n\t\t\t\t[this.meta.id === TaskField.Gantt]: 'gantt',\n\t\t\t}.true;\n\n\t\t\tconst templateGridType = {\n\t\t\t\t[this.meta.id === TaskField.SubTasks && isTemplate]: 'subTemplates',\n\t\t\t}.true;\n\n\t\t\tconst gridPath = {\n\t\t\t\t[Boolean(tasksGridType)]: `/company/personal/user/${userId}/tasks/`,\n\t\t\t\t[Boolean(templateGridType)]: `/company/personal/user/${userId}/tasks/templates/`,\n\t\t\t}.true;\n\n\t\t\tconst relationType = tasksGridType ?? templateGridType;\n\t\t\tconst relationToId = idUtils.unbox(this.taskId);\n\t\t\tconst urlParams = new URLSearchParams({ relationToId, relationType });\n\n\t\t\tBX.SidePanel.Instance.open(`${gridPath}?${urlParams}`, {\n\t\t\t\tnewWindowLabel: false,\n\t\t\t\tcopyLinkLabel: false,\n\t\t\t});\n\t\t},\n\t\tshowLimit(): void\n\t\t{\n\t\t\tvoid showLimit({ featureId: this.featureId });\n\t\t},\n\t\tasync handleRemove(id: number): void\n\t\t{\n\t\t\tawait this.meta.service.delete(this.taskId, [id]);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-field-relation-tasks\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"meta.id\"\n\t\t>\n\t\t\t<div class=\"tasks-field-relation-tasks-title\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"tasks-field-relation-tasks-main\"\n\t\t\t\t\t:class=\"{ '--readonly': !canOpenMore }\"\n\t\t\t\t\tdata-task-relation-open\n\t\t\t\t\t@click=\"openMore\"\n\t\t\t\t>\n\t\t\t\t\t<BIcon :name=\"meta.icon\"/>\n\t\t\t\t\t<TextMd accent>{{ text }}</TextMd>\n\t\t\t\t</div>\n\t\t\t\t<div \n\t\t\t\t\tv-if=\"!readonly && idsLoaded && !isLocked\" \n\t\t\t\t\tv-hint=\"tooltip\" \n\t\t\t\t\tclass=\"tasks-field-relation-tasks-icon --add\" \n\t\t\t\t\tref=\"add\"\n\t\t\t\t>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\t:name=\"Outline.PLUS_L\"\n\t\t\t\t\t\thoverable\n\t\t\t\t\t\t:data-task-relation-add=\"meta.id\"\n\t\t\t\t\t\t@click=\"$emit('add', $refs.add)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div \n\t\t\t\t\tv-else-if=\"isLocked\"\n\t\t\t\t\tclass=\"tasks-field-relation-tasks-icon --lock\"\n\t\t\t\t>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\t:name=\"Outline.LOCK_L\"\n\t\t\t\t\t\thoverable\n\t\t\t\t\t\t:data-task-relation-locked=\"meta.id\"\n\t\t\t\t\t\t@click=\"showLimit\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<TaskList\n\t\t\t\tv-if=\"task[meta.containsField]\"\n\t\t\t\t:ids\n\t\t\t\t:loadingIds\n\t\t\t\t:fields\n\t\t\t\t:canOpenMore\n\t\t\t\t@openMore=\"openMore\"\n\t\t\t\t@removeTask=\"handleRemove\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Chip, ChipDesign } from 'ui.system.chip.vue';\n\nimport { showLimit } from 'tasks.v2.lib.show-limit';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\n// @vue/component\nexport const RelationTasksChip = {\n\tcomponents: {\n\t\tChip,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisTemplate: {},\n\t},\n\tprops: {\n\t\t/** @type RelationFieldMeta */\n\t\tmeta: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisLocked: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tfeatureId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\temits: ['add'],\n\tsetup(): { task: TaskModel } {},\n\tcomputed: {\n\t\tcount(): number\n\t\t{\n\t\t\treturn this.task[this.meta.idsField].length;\n\t\t},\n\t\tdesign(): string\n\t\t{\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\treturn ChipDesign.ShadowDisabled;\n\t\t\t}\n\n\t\t\treturn this.isSelected ? ChipDesign.ShadowAccent : ChipDesign.ShadowNoAccent;\n\t\t},\n\t\tisSelected(): boolean\n\t\t{\n\t\t\treturn this.task.filledFields[this.meta.id];\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isSelected)\n\t\t\t{\n\t\t\t\tthis.highlightField();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isLocked)\n\t\t\t{\n\t\t\t\tvoid showLimit({ featureId: this.featureId });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('add', this.$el);\n\t\t},\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(this.meta.id);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\t:design\n\t\t\t:text=\"meta.getChipTitle(isTemplate)\"\n\t\t\t:icon=\"meta.icon\"\n\t\t\t:lock=\"isLocked\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"meta.id\"\n\t\t\t@click=\"handleClick\"\n\t\t/>\n\t`,\n};\n"],"names":["RelationTasks","name","components","BIcon","TaskList","TextMd","directives","hint","inject","task","taskId","isEdit","isTemplate","props","meta","type","Object","required","fields","Set","default","undefined","isLocked","Boolean","featureId","String","emits","setup","Outline","data","idsLoaded","computed","ids","service","getSortedIds","idsField","loadingIds","filter","id","hasStoreTask","text","length","loc","getCountLoc","getTitle","canOpenMore","readonly","containsField","rights","right","tooltip","getHint","popupOptions","offsetLeft","$refs","add","offsetWidth","watch","newIds","oldIds","sort","join","hasUnloadedIds","list","created","areIdsLoaded","methods","openMore","showLimit","userId","Core","getParams","currentUser","idUtils","tasksGridType","TaskField","SubTasks","RelatedTasks","Gantt","true","templateGridType","gridPath","relationType","relationToId","unbox","urlParams","URLSearchParams","BX","SidePanel","Instance","open","newWindowLabel","copyLinkLabel","handleRemove","delete","template","RelationTasksChip","Chip","disabled","count","design","ChipDesign","ShadowDisabled","isSelected","ShadowAccent","ShadowNoAccent","filledFields","handleClick","highlightField","$emit","$el","fieldHighlighter","setContainer","$root","highlight"],"mappings":"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"}