{"version":3,"file":"user-fields.bundle.js","sources":["../src/fields/string.js","../src/fields/double.js","../src/fields/boolean.js","../src/user-fields-manager.js","../src/fields/date.js","../src/user-fields-meta.js","../src/user-fields.js","../src/user-fields-chip.js"],"sourcesContent":["import { Type } from 'main.core';\nimport { TextMd, TextXs } from 'ui.system.typography.vue';\nimport './fields.css';\n\n// @vue/component\nexport const UserFieldString = {\n\tcomponents: {\n\t\tTextMd,\n\t\tTextXs,\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: [String, Array],\n\t\t\tdefault: '',\n\t\t},\n\t\tmandatory: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisLast: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tvalues(): string[]\n\t\t{\n\t\t\tif (Type.isArrayFilled(this.value))\n\t\t\t{\n\t\t\t\treturn this.value.map((v) => String(v));\n\t\t\t}\n\n\t\t\treturn [String(this.value)];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-user-field --string\"\n\t\t\t:class=\"{ '--last': isLast }\"\n\t\t>\n\t\t\t<TextXs\n\t\t\t\tclass=\"tasks-user-field-title\"\n\t\t\t\t:class=\"{ '--mandatory': mandatory }\"\n\t\t\t>\n\t\t\t\t{{ title }}\n\t\t\t</TextXs>\n\t\t\t<div v-for=\"(item, index) in values\" :key=\"index\" class=\"tasks-user-field-value\">\n\t\t\t\t<TextMd>{{ item }}</TextMd>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { TextMd, TextXs } from 'ui.system.typography.vue';\nimport './fields.css';\n\n// @vue/component\nexport const UserFieldDouble = {\n\tcomponents: { TextMd, TextXs },\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: [Number, String, Array],\n\t\t\tdefault: 0,\n\t\t},\n\t\tmandatory: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisLast: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tvalues(): string[]\n\t\t{\n\t\t\tif (Type.isArrayFilled(this.value))\n\t\t\t{\n\t\t\t\treturn this.value.map((v) => this.prepareValue(v));\n\t\t\t}\n\n\t\t\treturn [this.prepareValue(this.value)];\n\t\t},\n\t},\n\tmethods: {\n\t\tprepareValue(value: string | number): string\n\t\t{\n\t\t\tconst numberValue = parseInt(String(value), 10);\n\n\t\t\tif (Number.isNaN(numberValue))\n\t\t\t{\n\t\t\t\treturn '0';\n\t\t\t}\n\n\t\t\treturn String(numberValue);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-user-field --double\"\n\t\t\t:class=\"{ '--last': isLast }\"\n\t\t>\n\t\t\t<TextXs\n\t\t\t\tclass=\"tasks-user-field-title\"\n\t\t\t\t:class=\"{ '--mandatory': mandatory }\"\n\t\t\t>\n\t\t\t\t{{ title }}\n\t\t\t</TextXs>\n\t\t\t<div v-for=\"(item, index) in values\" :key=\"index\" class=\"tasks-user-field-value\">\n\t\t\t\t<TextMd>{{ item }}</TextMd>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\n\nimport { TextMd, TextXs } from 'ui.system.typography.vue';\n\nimport { Checkbox } from 'tasks.v2.component.elements.checkbox';\n\nimport './fields.css';\n\n// @vue/component\nexport const UserFieldBoolean = {\n\tcomponents: {\n\t\tTextMd,\n\t\tTextXs,\n\t\tCheckbox,\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: [Boolean, String],\n\t\t\tdefault: false,\n\t\t},\n\t\tmandatory: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisLast: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tpreparedValue(): boolean\n\t\t{\n\t\t\tif (Type.isString(this.value))\n\t\t\t{\n\t\t\t\treturn this.value === '1';\n\t\t\t}\n\n\t\t\treturn this.value === true;\n\t\t},\n\t\tmandatoryClass(): string\n\t\t{\n\t\t\treturn this.mandatory ? 'tasks-user-field-value-mandatory' : '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-user-field --boolean\"\n\t\t\t:class=\"{ '--last': isLast }\"\n\t\t>\n\t\t\t<div class=\"tasks-user-field-boolean-row\">\n\t\t\t\t<Checkbox :checked=\"preparedValue\" disabled/>\n\t\t\t\t<TextMd :className=\"mandatoryClass\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</TextMd>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { UserFieldType } from 'tasks.v2.const';\nimport type { UserFieldScheme } from 'tasks.v2.model.interface';\n\nexport type PreparedUserField = {\n\ttitle: string,\n\ttype: string,\n\tvalue: any,\n\tmandatory: boolean\n};\n\nexport type UserField = {\n\tkey: string,\n\tvalue: any,\n};\n\nclass UserFieldsManager\n{\n\tgetPreparedUserFields(userFields: UserField[], userFieldScheme: UserFieldScheme[]): Array<PreparedUserField>\n\t{\n\t\tconst result = [];\n\n\t\tfor (const userField of userFields)\n\t\t{\n\t\t\tif (userField.value === null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst scheme: UserFieldScheme = userFieldScheme.find((item) => {\n\t\t\t\treturn item.fieldName === userField.key;\n\t\t\t});\n\n\t\t\tif (scheme)\n\t\t\t{\n\t\t\t\tif (!this.validateField(userField.value, scheme.userTypeId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult.push({\n\t\t\t\t\tvalue: userField.value,\n\t\t\t\t\ttitle: scheme.editFormLabel,\n\t\t\t\t\ttype: scheme.userTypeId,\n\t\t\t\t\tmandatory: scheme.mandatory,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateField(value: any, type: string): boolean\n\t{\n\t\tif (value === null || value === '')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (Type.isArray(value) && value.length === 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (Type.isArray(value) && value.every((item) => item === ''))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !(type !== UserFieldType.Boolean && value === false);\n\t}\n\n\thasFilledUserFields(userFields: UserField[], userFieldScheme: UserFieldScheme[]): boolean\n\t{\n\t\treturn this.getPreparedUserFields(userFields, userFieldScheme).length > 0;\n\t}\n\n\thasUnfilledFields(userFields: UserField[], userFieldScheme: UserFieldScheme[]): boolean\n\t{\n\t\tfor (const scheme of userFieldScheme)\n\t\t{\n\t\t\tconst field = userFields.find((item) => item.key === scheme.fieldName);\n\n\t\t\tif (!field || field.value === null)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thasUnfilledMandatoryFields(userFields: UserField[], userFieldScheme: UserFieldScheme[]): boolean\n\t{\n\t\tfor (const scheme of userFieldScheme)\n\t\t{\n\t\t\tif (!scheme.mandatory)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst field = userFields.find((item) => item.key === scheme.fieldName);\n\n\t\t\tif (!field || field.value === null)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thasMandatoryUserFields(userFieldScheme: UserFieldScheme[]): boolean\n\t{\n\t\tfor (const scheme of userFieldScheme)\n\t\t{\n\t\t\tif (scheme.mandatory)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprepareUserFieldsForTaskFromTemplate(userFields: UserField[], userFieldScheme: UserFieldScheme[]): UserField[]\n\t{\n\t\tconst result = [];\n\n\t\tfor (const userField of userFields)\n\t\t{\n\t\t\tconst scheme: UserFieldScheme = userFieldScheme.find((item) => {\n\t\t\t\treturn item.fieldName === userField.key;\n\t\t\t});\n\n\t\t\tif (!scheme)\n\t\t\t{\n\t\t\t\tresult.push(userField);\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (scheme.userTypeId === UserFieldType.Datetime)\n\t\t\t{\n\t\t\t\tconst preparedField = {\n\t\t\t\t\tkey: userField.key,\n\t\t\t\t\tvalue: this.#convertDatetimeValue(userField.value),\n\t\t\t\t};\n\n\t\t\t\tresult.push(preparedField);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.push(userField);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tcorrectDatetimeStringWithT(dateString: string, date: Date): Date\n\t{\n\t\tconst offsetMatch = dateString.match(/([+-]\\d{2}):(\\d{2})$/);\n\t\tconst originalOffsetMinutes = offsetMatch\n\t\t\t? parseInt(offsetMatch[1], 10) * 60\n\t\t\t\t+ (parseInt(offsetMatch[1], 10) < 0 ? -1 : 1) * parseInt(offsetMatch[2], 10)\n\t\t\t: 0\n\t\t;\n\t\tconst timezoneOffset = originalOffsetMinutes + date.getTimezoneOffset();\n\n\t\tdate.setTime(date.getTime() + timezoneOffset * 60000);\n\n\t\treturn date;\n\t}\n\n\t#convertDatetimeValue(value: any): any\n\t{\n\t\tif (value === null || value === '')\n\t\t{\n\t\t\treturn value;\n\t\t}\n\n\t\tif (Type.isArray(value))\n\t\t{\n\t\t\treturn value.map((item) => this.#formatDatetime(item));\n\t\t}\n\n\t\treturn this.#formatDatetime(value);\n\t}\n\n\t#formatDatetime(dateString: string): string\n\t{\n\t\tif (!Type.isStringFilled(dateString))\n\t\t{\n\t\t\treturn dateString;\n\t\t}\n\n\t\tif (!dateString.includes('T'))\n\t\t{\n\t\t\treturn dateString;\n\t\t}\n\n\t\tconst date = new Date(dateString);\n\n\t\tif (!this.#isValidDate(date))\n\t\t{\n\t\t\treturn dateString;\n\t\t}\n\n\t\tconst newDate = this.correctDatetimeStringWithT(dateString, date);\n\n\t\tconst format = DateTimeFormat.getFormat('FORMAT_DATETIME');\n\t\tconst timestamp = newDate.getTime() / 1000;\n\n\t\treturn DateTimeFormat.format(format, timestamp);\n\t}\n\n\t#isValidDate(date: any): boolean\n\t{\n\t\treturn Type.isDate(date) && !Number.isNaN(date.getTime());\n\t}\n}\n\nexport const userFieldsManager = new UserFieldsManager();\n","import { Type } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\n\nimport { TextMd, TextXs } from 'ui.system.typography.vue';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { calendar } from 'tasks.v2.lib.calendar';\nimport { userFieldsManager } from '../user-fields-manager';\n\nimport './fields.css';\n\n// @vue/component\nexport const UserFieldDate = {\n\tcomponents: {\n\t\tTextMd,\n\t\tTextXs,\n\t\tBIcon,\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: [String, Array],\n\t\t\tdefault: '',\n\t\t},\n\t\tmandatory: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisLast: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tsession: undefined,\n\tsetup(): void\n\t{\n\t\treturn { Outline };\n\t},\n\tcomputed: {\n\t\tvalues(): string[]\n\t\t{\n\t\t\tif (Type.isArrayFilled(this.value))\n\t\t\t{\n\t\t\t\treturn this.value.map((v) => this.formatDate(v));\n\t\t\t}\n\n\t\t\treturn [this.formatDate(this.value)];\n\t\t},\n\t},\n\tmethods: {\n\t\tformatDate(dateString: string): string\n\t\t{\n\t\t\tconst date = this.tryParseDate(dateString);\n\n\t\t\tif (!date)\n\t\t\t{\n\t\t\t\treturn dateString;\n\t\t\t}\n\n\t\t\treturn calendar.formatDateTime(date.getTime(), { removeOffset: true });\n\t\t},\n\t\ttryParseDate(dateString: string): Date | null\n\t\t{\n\t\t\tif (dateString.includes('T'))\n\t\t\t{\n\t\t\t\tconst date = new Date(dateString);\n\n\t\t\t\tif (!this.isDate(date))\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn userFieldsManager.correctDatetimeStringWithT(dateString, date);\n\t\t\t}\n\n\t\t\tconst parsedDate = DateTimeFormat.parse(dateString);\n\n\t\t\tif (this.isDate(parsedDate))\n\t\t\t{\n\t\t\t\treturn parsedDate;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tisDate(value: any): boolean\n\t\t{\n\t\t\treturn Type.isDate(value) && !Number.isNaN(value.getTime());\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-user-field --date\"\n\t\t\t:class=\"{ '--last': isLast }\"\n\t\t>\n\t\t\t<TextXs\n\t\t\t\tclass=\"tasks-user-field-title\"\n\t\t\t\t:class=\"{ '--mandatory': mandatory }\"\n\t\t\t>\n\t\t\t\t{{ title }}\n\t\t\t</TextXs>\n\t\t\t<template v-for=\"(item, index) in values\" :key=\"index\">\n\t\t\t\t<div class=\"tasks-user-field-date-row\">\n\t\t\t\t\t<BIcon :name=\"Outline.CALENDAR_WITH_SLOTS\"/>\n\t\t\t\t\t<TextMd>{{ item }}</TextMd>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { TaskField } from 'tasks.v2.const';\n\nexport const userFieldsMeta = Object.freeze({\n\tid: TaskField.UserFields,\n\ttitle: Loc.getMessage('TASKS_V2_USER_FIELDS_TITLE'),\n});\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport { TextMd, TextXs } from 'ui.system.typography.vue';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\nimport 'ui.icon-set.outline';\n\nimport { Model, UserFieldType } from 'tasks.v2.const';\nimport type { UserFieldScheme } from 'tasks.v2.model.interface';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { UserFieldString } from './fields/string';\nimport { UserFieldDouble } from './fields/double';\nimport { UserFieldBoolean } from './fields/boolean';\nimport { UserFieldDate } from './fields/date';\nimport { userFieldsMeta } from './user-fields-meta';\nimport { userFieldsManager, type PreparedUserField, type UserField } from './user-fields-manager';\n\nimport './user-fields.css';\n\n// @vue/component\nexport const UserFields = {\n\tcomponents: {\n\t\tBIcon,\n\t\tTextMd,\n\t\tTextXs,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisTemplate: {},\n\t},\n\temits: ['open'],\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tuserFieldsMeta,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMouseDown: false,\n\t\t\tselectionMade: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttaskUserFieldScheme: `${Model.Interface}/taskUserFieldScheme`,\n\t\t\ttemplateUserFieldScheme: `${Model.Interface}/templateUserFieldScheme`,\n\t\t}),\n\t\tuserFields(): UserField[]\n\t\t{\n\t\t\treturn this.task.userFields || [];\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t\tuserFieldScheme(): UserFieldScheme[]\n\t\t{\n\t\t\treturn this.isTemplate\n\t\t\t\t? this.templateUserFieldScheme\n\t\t\t\t: this.taskUserFieldScheme\n\t\t\t;\n\t\t},\n\t\tpreparedUserFields(): Array<PreparedUserField>\n\t\t{\n\t\t\treturn userFieldsManager.getPreparedUserFields(this.userFields, this.userFieldScheme);\n\t\t},\n\t\tpreparedUserFieldsLength(): number\n\t\t{\n\t\t\treturn this.preparedUserFields.length;\n\t\t},\n\t\thasUnfilledFields(): boolean\n\t\t{\n\t\t\treturn userFieldsManager.hasUnfilledFields(this.userFields, this.userFieldScheme);\n\t\t},\n\t\thasUnfilledMandatoryFields(): boolean\n\t\t{\n\t\t\treturn userFieldsManager.hasUnfilledMandatoryFields(this.userFields, this.userFieldScheme);\n\t\t},\n\t\tfooterText(): string\n\t\t{\n\t\t\treturn this.hasUnfilledMandatoryFields\n\t\t\t\t? this.loc('TASKS_V2_USER_FIELDS_NOT_FILLED_MANDATORY_FIELDS')\n\t\t\t\t: this.loc('TASKS_V2_USER_FIELDS_NOT_FILLED_FIELDS')\n\t\t\t;\n\t\t},\n\t},\n\tmethods: {\n\t\thandleOpenSlider(): void\n\t\t{\n\t\t\tif (this.readonly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('open');\n\t\t},\n\t\tgetComponentName(type: string): BitrixVueComponentProps\n\t\t{\n\t\t\treturn {\n\t\t\t\t[UserFieldType.String]: UserFieldString,\n\t\t\t\t[UserFieldType.Double]: UserFieldDouble,\n\t\t\t\t[UserFieldType.Boolean]: UserFieldBoolean,\n\t\t\t\t[UserFieldType.Datetime]: UserFieldDate,\n\t\t\t}[type];\n\t\t},\n\t\tonMouseDown(event): void\n\t\t{\n\t\t\tif (event.button === 0)\n\t\t\t{\n\t\t\t\tthis.isMouseDown = true;\n\t\t\t\tthis.selectionMade = false;\n\t\t\t}\n\t\t},\n\t\tonMouseMove(): void\n\t\t{\n\t\t\tif (this.selectionMade || this.opened)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isMouseDown)\n\t\t\t{\n\t\t\t\tconst selection = window.getSelection();\n\t\t\t\tif (selection.toString().length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.selectionMade = true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonMouseUp(event): void\n\t\t{\n\t\t\tthis.isMouseDown = false;\n\t\t\tif (!this.selectionMade)\n\t\t\t{\n\t\t\t\tconst target = event.target;\n\t\t\t\tconst isLinkClick = target.tagName === 'A' || target.closest('a');\n\n\t\t\t\tif (!isLinkClick)\n\t\t\t\t{\n\t\t\t\t\tthis.handleOpenSlider();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-field-user-fields\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"userFieldsMeta.id\"\n\t\t\t@mousedown=\"onMouseDown\"\n\t\t\t@mousemove=\"onMouseMove\"\n\t\t\t@mouseup=\"onMouseUp\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"tasks-field-user-fields-title\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'--readonly': readonly,\n\t\t\t\t\t'--border-radius': preparedUserFieldsLength === 0,\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<BIcon\n\t\t\t\t\tclass=\"tasks-field-user-fields-title-icon\"\n\t\t\t\t\t:name=\"Outline.TOPIC\"\n\t\t\t\t/>\n\t\t\t\t<TextMd accent>{{ userFieldsMeta.title }}</TextMd>\n\t\t\t</div>\n\t\t\t<template\n\t\t\t\tv-for=\"(field, index) in preparedUserFields\"\n\t\t\t\t:key=\"index\"\n\t\t\t>\n\t\t\t\t<component\n\t\t\t\t\t:is=\"getComponentName(field.type)\"\n\t\t\t\t\t:title=\"field.title\"\n\t\t\t\t\t:value=\"field.value\"\n\t\t\t\t\t:mandatory=\"field.mandatory\"\n\t\t\t\t\t:isLast=\"index === preparedUserFieldsLength - 1\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t\t<div\n\t\t\t\tv-if=\"!readonly && hasUnfilledFields\"\n\t\t\t\tclass=\"tasks-field-user-fields-footer\"\n\t\t\t>\n\t\t\t\t<TextXs className=\"tasks-field-user-fields-footer-text\">\n\t\t\t\t\t{{ footerText }}\n\t\t\t\t</TextXs>\n\t\t\t\t<div class=\"tasks-field-user-fields-footer-fill\">\n\t\t\t\t\t<TextXs className=\"tasks-field-user-fields-footer-fill-text\">\n\t\t\t\t\t\t{{ loc('TASKS_V2_USER_FIELDS_FILL') }}\n\t\t\t\t\t</TextXs>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\tclass=\"tasks-field-user-fields-footer-fill-icon\"\n\t\t\t\t\t\t:name=\"Outline.CHEVRON_RIGHT_L\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { Chip, ChipDesign } from 'ui.system.chip.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Model } from 'tasks.v2.const';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport type { UserFieldScheme } from 'tasks.v2.model.interface';\nimport type { UserField } from './user-fields-manager';\n\nimport { userFieldsMeta } from './user-fields-meta';\nimport { userFieldsManager } from './user-fields-manager';\n\nexport const UserFieldsChip = {\n\tcomponents: {\n\t\tChip,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisEdit: {},\n\t\tisTemplate: {},\n\t},\n\temits: ['open'],\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tuserFieldsMeta,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tcurrentUserId: `${Model.Interface}/currentUserId`,\n\t\t\ttaskUserFieldScheme: `${Model.Interface}/taskUserFieldScheme`,\n\t\t\ttemplateUserFieldScheme: `${Model.Interface}/templateUserFieldScheme`,\n\t\t}),\n\t\tdesign(): string\n\t\t{\n\t\t\treturn this.isSelected ? ChipDesign.ShadowAccent : ChipDesign.ShadowNoAccent;\n\t\t},\n\t\tuserFieldScheme(): UserFieldScheme[]\n\t\t{\n\t\t\treturn this.isTemplate\n\t\t\t\t? this.templateUserFieldScheme\n\t\t\t\t: this.taskUserFieldScheme\n\t\t\t;\n\t\t},\n\t\tuserFields(): UserField[]\n\t\t{\n\t\t\treturn this.task.userFields || [];\n\t\t},\n\t\thasFilledUserFields(): boolean\n\t\t{\n\t\t\treturn userFieldsManager.hasFilledUserFields(this.task?.userFields || [], this.userFieldScheme);\n\t\t},\n\t\thasRequiredUserFields(): boolean\n\t\t{\n\t\t\treturn userFieldsManager.hasMandatoryUserFields(this.userFieldScheme);\n\t\t},\n\t\tisSelected(): boolean\n\t\t{\n\t\t\treturn this.isEdit\n\t\t\t\t? this.hasFilledUserFields\n\t\t\t\t: this.hasRequiredUserFields || this.hasFilledUserFields\n\t\t\t;\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.isSelected)\n\t\t\t{\n\t\t\t\tthis.highlightField();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$emit('open');\n\t\t\t}\n\t\t},\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(userFieldsMeta.id);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\t:design\n\t\t\t:text=\"userFieldsMeta.title\"\n\t\t\t:icon=\"Outline.TOPIC\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"userFieldsMeta.id\"\n\t\t\t@click=\"handleClick\"\n\t\t/>\n\t`,\n};\n"],"names":["UserFieldString","components","TextMd","TextXs","props","title","type","String","required","value","Array","default","mandatory","Boolean","isLast","computed","values","Type","isArrayFilled","map","v","template","UserFieldDouble","Number","prepareValue","methods","numberValue","parseInt","isNaN","UserFieldBoolean","Checkbox","preparedValue","isString","mandatoryClass","UserFieldsManager","getPreparedUserFields","userFields","userFieldScheme","result","userField","scheme","find","item","fieldName","key","validateField","userTypeId","push","editFormLabel","isArray","length","every","UserFieldType","hasFilledUserFields","hasUnfilledFields","field","hasUnfilledMandatoryFields","hasMandatoryUserFields","prepareUserFieldsForTaskFromTemplate","Datetime","preparedField","correctDatetimeStringWithT","dateString","date","offsetMatch","match","originalOffsetMinutes","timezoneOffset","getTimezoneOffset","setTime","getTime","isStringFilled","includes","Date","newDate","format","DateTimeFormat","getFormat","timestamp","isDate","userFieldsManager","UserFieldDate","BIcon","session","undefined","setup","Outline","formatDate","tryParseDate","calendar","formatDateTime","removeOffset","parsedDate","parse","userFieldsMeta","Object","freeze","id","TaskField","UserFields","Loc","getMessage","inject","task","taskId","isTemplate","emits","data","isMouseDown","selectionMade","mapGetters","taskUserFieldScheme","Model","Interface","templateUserFieldScheme","readonly","rights","edit","preparedUserFields","preparedUserFieldsLength","footerText","loc","handleOpenSlider","$emit","getComponentName","Double","onMouseDown","event","button","onMouseMove","opened","selection","window","getSelection","toString","onMouseUp","target","isLinkClick","tagName","closest","UserFieldsChip","Chip","isEdit","currentUserId","design","isSelected","ChipDesign","ShadowAccent","ShadowNoAccent","hasRequiredUserFields","handleClick","highlightField","fieldHighlighter","setContainer","$root","$el","highlight"],"mappings":"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"}