{"version":3,"file":"importance.bundle.js","sources":["../src/importance.js"],"sourcesContent":["import { hint, type HintParams } from 'ui.vue3.directives.hint';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Core } from 'tasks.v2.core';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport { tooltip } from 'tasks.v2.component.elements.hint';\n\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './importance.css';\n\n// @vue/component\nexport const Importance = {\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tdirectives: { hint },\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\tconst phraseCode = this.task.isImportant\n\t\t\t\t? 'TASKS_V2_IMPORTANCE_ACTIVE_HINT'\n\t\t\t\t: 'TASKS_V2_IMPORTANCE_INACTIVE_HINT'\n\t\t\t;\n\n\t\t\treturn (): HintParams => tooltip({\n\t\t\t\thtml: this.loc(phraseCode, { '[br/]': '<br/>' }),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: this.$el.offsetWidth / 2,\n\t\t\t\t},\n\t\t\t\ttimeout: 500,\n\t\t\t});\n\t\t},\n\t\tisResponsible(): boolean\n\t\t{\n\t\t\tconst userId = Core.getParams().currentUser.id;\n\n\t\t\treturn this.task.responsibleIds.includes(userId) || this.task.accomplicesIds.includes(userId);\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.readonly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isImportant = !this.task.isImportant;\n\n\t\t\tvoid taskService.update(this.taskId, { isImportant });\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-if=\"!readonly || (isResponsible && task.isImportant)\"\n\t\t\tv-hint=\"tooltip\"\n\t\t\tclass=\"tasks-field-importance\"\n\t\t\t:class=\"{ '--active': task.isImportant, '--readonly': readonly }\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"'isImportant'\"\n\t\t\t:data-task-field-value=\"task.isImportant\"\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t<BIcon :name=\"task.isImportant ? Outline.FIRE_SOLID : Outline.FIRE\"/>\n\t\t</div>\n\t`,\n};\n"],"names":["Importance","components","BIcon","directives","hint","inject","task","taskId","setup","Outline","computed","readonly","rights","edit","tooltip","phraseCode","isImportant","html","loc","popupOptions","offsetLeft","$el","offsetWidth","timeout","isResponsible","userId","Core","getParams","currentUser","id","responsibleIds","includes","accomplicesIds","methods","handleClick","taskService","update","template"],"mappings":";;;;;;;;CAYA;AACA,OAAaA,UAAU,GAAG;GACzBC,UAAU,EAAE;YACXC;IACA;GACDC,UAAU,EAAE;WAAEC;IAAM;GACpBC,MAAM,EAAE;KACPC,IAAI,EAAE,EAAE;KACRC,MAAM,EAAE;IACR;GACDC,KAAK,GACL;KACC,OAAO;gBACNC;MACA;IACD;GACDC,QAAQ,EAAE;KACTC,QAAQ,GACR;OACC,OAAO,CAAC,IAAI,CAACL,IAAI,CAACM,MAAM,CAACC,IAAI;MAC7B;KACDC,OAAO,GACP;OACC,MAAMC,UAAU,GAAG,IAAI,CAACT,IAAI,CAACU,WAAW,GACrC,iCAAiC,GACjC,mCAAmC;OAGtC,OAAO,MAAkBF,wCAAO,CAAC;SAChCG,IAAI,EAAE,IAAI,CAACC,GAAG,CAACH,UAAU,EAAE;WAAE,OAAO,EAAE;UAAS,CAAC;SAChDI,YAAY,EAAE;WACbC,UAAU,EAAE,IAAI,CAACC,GAAG,CAACC,WAAW,GAAG;UACnC;SACDC,OAAO,EAAE;QACT,CAAC;MACF;KACDC,aAAa,GACb;OACC,MAAMC,MAAM,GAAGC,kBAAI,CAACC,SAAS,EAAE,CAACC,WAAW,CAACC,EAAE;OAE9C,OAAO,IAAI,CAACvB,IAAI,CAACwB,cAAc,CAACC,QAAQ,CAACN,MAAM,CAAC,IAAI,IAAI,CAACnB,IAAI,CAAC0B,cAAc,CAACD,QAAQ,CAACN,MAAM,CAAC;;IAE9F;GACDQ,OAAO,EAAE;KACRC,WAAW,GACX;OACC,IAAI,IAAI,CAACvB,QAAQ,EACjB;SACC;;OAGD,MAAMK,WAAW,GAAG,CAAC,IAAI,CAACV,IAAI,CAACU,WAAW;OAE1C,KAAKmB,iDAAW,CAACC,MAAM,CAAC,IAAI,CAAC7B,MAAM,EAAE;SAAES;QAAa,CAAC;;IAEtD;GACDqB,QAAQ,EAAG;;;;;;;;;;;;;;CAcZ,CAAC;;;;;;;;"}