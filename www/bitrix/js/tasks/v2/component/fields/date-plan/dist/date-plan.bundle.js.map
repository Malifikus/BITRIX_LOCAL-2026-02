{"version":3,"file":"date-plan.bundle.js","sources":["../src/date-plan-meta.js","../src/components/date-plan-date.js","../src/components/date-plan-duration.js","../src/components/date-plan-content.js","../src/components/date-plan-switcher.js","../src/date-plan-sheet.js","../src/date-plan.js","../src/date-plan-chip.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { TaskField } from 'tasks.v2.const';\n\nexport const datePlanMeta = Object.freeze({\n\tid: TaskField.DatePlan,\n\ttitle: Loc.getMessage('TASKS_V2_DATE_PLAN_TITLE'),\n});\n","import { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { calendar } from 'tasks.v2.lib.calendar';\n\nexport const DatePlanDate = {\n\tcomponents: {\n\t\tHoverPill,\n\t},\n\tprops: {\n\t\tdateTs: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tcalendar,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<HoverPill textOnly :readonly>\n\t\t\t\t<div>{{ calendar.formatDateTime(dateTs, { forceYear: true }) }}</div>\n\t\t\t</HoverPill>\n\t\t</div>\n\t`,\n};\n","import { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { calendar } from 'tasks.v2.lib.calendar';\n\nexport const DatePlanDuration = {\n\tcomponents: {\n\t\tHoverPill,\n\t},\n\tprops: {\n\t\tdateTs: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmatchWorkTime: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tcalendar,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<HoverPill textOnly :readonly>\n\t\t\t\t<div>{{ calendar.formatDuration(dateTs, matchWorkTime) }}</div>\n\t\t\t</HoverPill>\n\t\t</div>\n\t`,\n};\n","import { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { FieldAdd } from 'tasks.v2.component.elements.field-add';\nimport { QuestionMark } from 'tasks.v2.component.elements.question-mark';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nexport const DatePlanContent = {\n\tcomponents: {\n\t\tHoverPill,\n\t\tFieldAdd,\n\t\tQuestionMark,\n\t},\n\tinject: {\n\t\ttask: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<HoverPill v-if=\"task.matchesSubTasksTime\" textOnly readonly>\n\t\t\t<div class=\"tasks-field-date-plan-content\">\n\t\t\t\t<div>{{ loc('TASKS_V2_DATE_PLAN_MATCH_SUBTASKS_TIME_STATE') }}</div>\n\t\t\t\t<QuestionMark :hintText=\"loc('TASKS_V2_DATE_PLAN_NO_SUBTASKS_HINT')\"/>\n\t\t\t</div>\n\t\t</HoverPill>\n\t\t<FieldAdd v-else :icon=\"Outline.PLANNING\"/>\n\t`,\n};\n","import { TextSm } from 'ui.system.typography.vue';\nimport { SwitcherSize, type SwitcherOptions } from 'ui.switcher';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport { Switcher } from 'ui.vue3.components.switcher';\n\nimport { QuestionMark } from 'tasks.v2.component.elements.question-mark';\n\n// @vue/component\nexport const DatePlanSwitcher = {\n\tcomponents: {\n\t\tTextSm,\n\t\tSwitcher,\n\t\tQuestionMark,\n\t\tBIcon,\n\t},\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tlock: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\toptions(): SwitcherOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tsize: SwitcherSize.extraSmall,\n\t\t\t\tuseAirDesign: true,\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-date-plan-switcher\" @click=\"$emit('update:modelValue', !modelValue)\">\n\t\t\t<Switcher :isChecked=\"modelValue\" :options/>\n\t\t\t<TextSm>{{ text }}</TextSm>\n\t\t\t<QuestionMark v-if=\"hint\" :hintText=\"hint\" @click.stop/>\n\t\t\t<BIcon v-if=\"lock\" :name=\"Outline.LOCK_M\" class=\"tasks-field-date-plan-switcher-lock\"/>\n\t\t</div>\n\t`,\n};\n","import { Runtime, Type } from 'main.core';\n\nimport { DatePicker, DatePickerEvent } from 'ui.date-picker';\nimport { Notifier } from 'ui.notification-manager';\nimport { Button as UiButton, ButtonColor, ButtonSize } from 'ui.vue3.components.button';\nimport { HeadlineMd, TextSm } from 'ui.system.typography.vue';\nimport { BInput, InputDesign } from 'ui.system.input.vue';\nimport { BMenu } from 'ui.system.menu.vue';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Core } from 'tasks.v2.core';\nimport { Endpoint } from 'tasks.v2.const';\nimport { BottomSheet } from 'tasks.v2.component.elements.bottom-sheet';\nimport { Duration } from 'tasks.v2.component.elements.duration';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport { calendar } from 'tasks.v2.lib.calendar';\nimport { timezone } from 'tasks.v2.lib.timezone';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport { showLimit } from 'tasks.v2.lib.show-limit';\n\nimport { datePlanMeta } from './date-plan-meta';\nimport { DatePlanSwitcher } from './components/date-plan-switcher';\nimport './date-plan.css';\n\nconst MAX_INT = 2 ** 31;\n\n// @vue/component\nexport const DatePlanSheet = {\n\tcomponents: {\n\t\tBottomSheet,\n\t\tBIcon,\n\t\tUiButton,\n\t\tHeadlineMd,\n\t\tTextSm,\n\t\tBInput,\n\t\tBMenu,\n\t\tDatePlanSwitcher,\n\t\tDuration,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisTemplate: {},\n\t},\n\tprops: {\n\t\tsheetBindProps: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tInputDesign,\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\twasEmpty: false,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisEndPicker: false,\n\t\t\tisEndDuration: false,\n\t\t\tisPickerShown: false,\n\t\t\tdurationTs: 0,\n\t\t\tstartTs: null,\n\t\t\tendTs: null,\n\t\t\tstartDatePlanAfter: null,\n\t\t\ttemplateDuration: null,\n\t\t\tmatchesWorkTimeTemp: null,\n\t\t\tmatchesSubTasksTimeTemp: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\twasFilled(): boolean\n\t\t{\n\t\t\treturn this.task.filledFields[datePlanMeta.id];\n\t\t},\n\t\tduration: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.durationTs;\n\t\t\t},\n\t\t\tset(durationTs: number): void\n\t\t\t{\n\t\t\t\tif (durationTs === this.durationTs)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.durationTs = durationTs;\n\n\t\t\t\tthis.updateRangeFromDuration();\n\t\t\t},\n\t\t},\n\t\tmatchesWorkTime: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isMatchesWorkTimeLocked\n\t\t\t\t\t? false\n\t\t\t\t\t: this.matchesWorkTimeTemp ?? this.task.matchesWorkTime ?? false;\n\t\t\t},\n\t\t\tset(matchesWorkTime: boolean): void\n\t\t\t{\n\t\t\t\tif (this.isMatchesWorkTimeLocked)\n\t\t\t\t{\n\t\t\t\t\tvoid showLimit({\n\t\t\t\t\t\tfeatureId: Core.getParams().restrictions.skipWeekends.featureId,\n\t\t\t\t\t});\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (matchesWorkTime === this.matchesWorkTimeTemp)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.matchesWorkTimeTemp = matchesWorkTime;\n\n\t\t\t\tthis.update();\n\t\t\t},\n\t\t},\n\t\tmatchesSubTasksTime: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isMatchesSubTasksTimeLocked\n\t\t\t\t\t? false\n\t\t\t\t\t: this.matchesSubTasksTimeTemp ?? this.task.matchesSubTasksTime ?? false;\n\t\t\t},\n\t\t\tset(matchesSubTasksTime: boolean): void\n\t\t\t{\n\t\t\t\tif (this.isMatchesSubTasksTimeLocked)\n\t\t\t\t{\n\t\t\t\t\tvoid showLimit({\n\t\t\t\t\t\tfeatureId: Core.getParams().restrictions.relatedSubtaskDeadlines.featureId,\n\t\t\t\t\t});\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.matchesSubTasksTimeTemp = matchesSubTasksTime;\n\t\t\t},\n\t\t},\n\t\tallowsChangeDatePlan: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\tif (this.isTemplate)\n\t\t\t\t{\n\t\t\t\t\treturn this.task.allowsChangeDeadline ?? false;\n\t\t\t\t}\n\n\t\t\t\treturn this.task.allowsChangeDatePlan ?? false;\n\t\t\t},\n\t\t\tset(allowsChangeDatePlan: boolean): void\n\t\t\t{\n\t\t\t\tif (this.isTemplate)\n\t\t\t\t{\n\t\t\t\t\tvoid taskService.update(this.taskId, { allowsChangeDeadline: allowsChangeDatePlan });\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvoid taskService.update(this.taskId, { allowsChangeDatePlan });\n\t\t\t},\n\t\t},\n\t\tmaxDurationReached(): boolean\n\t\t{\n\t\t\treturn this.endTs && this.startTs && Math.floor((this.endTs - this.startTs) / 1000) >= MAX_INT;\n\t\t},\n\t\tinputDesign(): string\n\t\t{\n\t\t\treturn this.matchesSubTasksTime ? InputDesign.Disabled : InputDesign.Grey;\n\t\t},\n\t\tisMatchesWorkTimeLocked(): boolean\n\t\t{\n\t\t\treturn !Core.getParams().restrictions.skipWeekends.available;\n\t\t},\n\t\tisMatchesSubTasksTimeLocked(): boolean\n\t\t{\n\t\t\treturn !Core.getParams().restrictions.relatedSubtaskDeadlines.available;\n\t\t},\n\t\tdescription(): string\n\t\t{\n\t\t\tif (this.isTemplate)\n\t\t\t{\n\t\t\t\treturn this.loc('TASKS_V2_DATE_PLAN_DESCRIPTION_TEMPLATE');\n\t\t\t}\n\n\t\t\treturn this.loc('TASKS_V2_DATE_PLAN_DESCRIPTION');\n\t\t},\n\t\tallowChangeText(): string\n\t\t{\n\t\t\tif (this.isTemplate)\n\t\t\t{\n\t\t\t\treturn this.loc('TASKS_V2_DATE_PLAN_ALLOW_CHANGE_TEMPLATE');\n\t\t\t}\n\n\t\t\treturn this.loc('TASKS_V2_DATE_PLAN_ALLOW_CHANGE');\n\t\t},\n\t\tmatchWorkTimeHint(): string\n\t\t{\n\t\t\tif (this.isTemplate)\n\t\t\t{\n\t\t\t\treturn this.loc('TASKS_V2_DATE_PLAN_MATCH_WORK_TIME_HINT_TEMPLATE');\n\t\t\t}\n\n\t\t\treturn this.loc('TASKS_V2_DATE_PLAN_MATCH_WORK_TIME_HINT');\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.wasEmpty = !this.wasFilled;\n\t\tthis.updateDuration(this.task.startPlanTs, this.task.endPlanTs);\n\t\tthis.startDatePlanAfter = this.task.startDatePlanAfter;\n\t\tthis.templateDuration = this.task.endDatePlanAfter - this.task.startDatePlanAfter;\n\t\tthis.showErrorDebounced = Runtime.debounce(this.showError, 300, this);\n\t},\n\tmethods: {\n\t\tclearStart(): void\n\t\t{\n\t\t\tthis.duration = 0;\n\t\t\tthis.updatePlan(null, this.endTs);\n\t\t},\n\t\tclearEnd(): void\n\t\t{\n\t\t\tthis.duration = 0;\n\t\t\tthis.updatePlan(this.startTs, null);\n\t\t},\n\t\thandleDateClick({ currentTarget }: { currentTarget: HTMLElement }, { isEnd }: { isEnd: boolean }): void\n\t\t{\n\t\t\tthis.updateDuration(this.startTs, this.endTs);\n\t\t\tthis.isEndPicker = isEnd;\n\n\t\t\tconst datePicker = this.getDatePicker();\n\t\t\tdatePicker.setTargetNode(currentTarget);\n\t\t\tdatePicker.show();\n\t\t\tif (this.isEndPicker && this.endTs)\n\t\t\t{\n\t\t\t\tdatePicker.setFocusDate(this.endTs + timezone.getOffset(this.endTs));\n\t\t\t}\n\t\t},\n\t\tgetDatePicker(): DatePicker\n\t\t{\n\t\t\tthis.handlePickerChangedDebounced ??= Runtime.debounce(this.handlePickerChanged, 10, this);\n\t\t\tthis.datePicker ??= new DatePicker({\n\t\t\t\tenableTime: true,\n\t\t\t\tselectionMode: 'range',\n\t\t\t\tdefaultTime: calendar.dayEndTime,\n\t\t\t\tevents: {\n\t\t\t\t\t[DatePickerEvent.SELECT]: this.handlePickerChangedDebounced,\n\t\t\t\t\t[DatePickerEvent.DESELECT]: this.handlePickerChangedDebounced,\n\t\t\t\t\tonShow: (): void => {\n\t\t\t\t\t\tthis.isPickerShown = true;\n\t\t\t\t\t},\n\t\t\t\t\tonHide: (): void => {\n\t\t\t\t\t\tthis.isPickerShown = false;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tanimation: 'fading',\n\t\t\t\t\ttargetContainer: this.sheetBindProps.getTargetContainer(),\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn this.datePicker;\n\t\t},\n\t\thandlePickerChanged(): void\n\t\t{\n\t\t\tlet startPlanTs = this.preparePickerTimestamp(this.datePicker.getRangeStart());\n\t\t\tlet endPlanTs = this.preparePickerTimestamp(this.datePicker.getRangeEnd());\n\t\t\tif (this.isEndPicker && !endPlanTs && !this.startTs)\n\t\t\t{\n\t\t\t\t[startPlanTs, endPlanTs] = [null, startPlanTs];\n\t\t\t}\n\n\t\t\tif (startPlanTs && !this.startTs)\n\t\t\t{\n\t\t\t\tstartPlanTs = calendar.setHours(startPlanTs, calendar.workdayStart.H, calendar.workdayStart.M);\n\t\t\t}\n\n\t\t\tthis.updateDuration(startPlanTs, endPlanTs);\n\t\t},\n\t\tupdateDuration(startTs: number, endTs: number): void\n\t\t{\n\t\t\tconst [start, end] = this.prepareRange(startTs, endTs);\n\t\t\tif (!start || !end)\n\t\t\t{\n\t\t\t\tthis.duration = 0;\n\n\t\t\t\tthis.updatePlan(start, end);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.duration = this.matchesWorkTime ? calendar.calculateDuration(start, end) : end - start;\n\n\t\t\tthis.updatePlan(start, end);\n\t\t},\n\t\tupdate(): void\n\t\t{\n\t\t\tconst [startPlanTs, endPlanTs] = this.prepareRange(this.startTs, this.endTs);\n\t\t\tif (startPlanTs && endPlanTs)\n\t\t\t{\n\t\t\t\tthis.updateRangeFromDuration();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.updatePlan(startPlanTs, endPlanTs);\n\t\t\t}\n\t\t},\n\t\tupdateRangeFromDuration(): void\n\t\t{\n\t\t\tlet [startPlanTs, endPlanTs] = this.prepareRange(this.startTs, this.endTs);\n\t\t\tif (!startPlanTs && !endPlanTs)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isEndDuration)\n\t\t\t{\n\t\t\t\tstartPlanTs = null;\n\t\t\t}\n\n\t\t\tif (this.matchesWorkTime)\n\t\t\t{\n\t\t\t\tstartPlanTs = calendar.calculateStartTs(startPlanTs, endPlanTs, this.duration);\n\t\t\t\tendPlanTs = calendar.calculateEndTs(startPlanTs, endPlanTs, this.duration);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstartPlanTs ??= endPlanTs - this.duration;\n\t\t\t\tendPlanTs = startPlanTs + this.duration;\n\t\t\t}\n\n\t\t\tthis.updatePlan(startPlanTs, endPlanTs);\n\t\t},\n\t\tupdatePlan(startPlanTs: ?number, endPlanTs: ?number): void\n\t\t{\n\t\t\tthis.startTs = startPlanTs;\n\t\t\tthis.endTs = endPlanTs;\n\t\t\tif (this.maxDurationReached)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst datePicker = this.getDatePicker();\n\t\t\tconst options = { emitEvents: false };\n\t\t\tif (startPlanTs || endPlanTs)\n\t\t\t{\n\t\t\t\tconst rangeStart = startPlanTs + timezone.getOffset(startPlanTs);\n\t\t\t\tconst rangeEnd = endPlanTs ? endPlanTs + timezone.getOffset(endPlanTs) : null;\n\t\t\t\tif (startPlanTs)\n\t\t\t\t{\n\t\t\t\t\tdatePicker.selectRange(rangeStart, rangeEnd, options);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdatePicker.selectRange(rangeEnd, null, options);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdatePicker.deselectAll(options);\n\t\t\t}\n\t\t},\n\t\tprepareRange(startTs: number, endTs: number): [?number, ?number]\n\t\t{\n\t\t\tif (this.matchesWorkTime)\n\t\t\t{\n\t\t\t\treturn [calendar.clampWorkDateTime(startTs), calendar.clampWorkDateTime(endTs)];\n\t\t\t}\n\n\t\t\treturn [startTs, endTs];\n\t\t},\n\t\tpreparePickerTimestamp(date: ?Date): ?number\n\t\t{\n\t\t\tif (!date)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst dateTs = calendar.createDateFromUtc(date).getTime();\n\n\t\t\treturn dateTs - timezone.getOffset(dateTs);\n\t\t},\n\t\tformatDate(timestamp: number): string\n\t\t{\n\t\t\treturn calendar.formatDateTime(timestamp, { forceYear: true });\n\t\t},\n\t\tclose(): void\n\t\t{\n\t\t\tif (this.isTemplate)\n\t\t\t{\n\t\t\t\tthis.handleTemplateUpdate();\n\t\t\t}\n\t\t\telse if (!this.maxDurationReached)\n\t\t\t{\n\t\t\t\tvoid this.handleTaskUpdate();\n\t\t\t}\n\n\t\t\tif (this.wasEmpty && this.wasFilled)\n\t\t\t{\n\t\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(datePlanMeta.id);\n\t\t\t}\n\n\t\t\tthis.$emit('close');\n\t\t},\n\t\thandleTemplateUpdate(): void\n\t\t{\n\t\t\tvoid taskService.update(this.taskId, {\n\t\t\t\tstartDatePlanAfter: Number(this.startDatePlanAfter),\n\t\t\t\tendDatePlanAfter: Number(this.startDatePlanAfter + this.templateDuration),\n\t\t\t\tmatchesWorkTime: this.matchesWorkTime,\n\t\t\t});\n\t\t},\n\t\tasync handleTaskUpdate(): void\n\t\t{\n\t\t\tconst result = await taskService.update(this.taskId, Object.fromEntries(Object.entries({\n\t\t\t\tstartPlanTs: this.matchesSubTasksTime ? undefined : Number(this.startTs),\n\t\t\t\tendPlanTs: this.matchesSubTasksTime ? undefined : Number(this.endTs),\n\t\t\t\tmatchesWorkTime: this.matchesWorkTime,\n\t\t\t\tmatchesSubTasksTime: this.matchesSubTasksTime,\n\t\t\t}).filter(([, value]) => !Type.isUndefined(value))));\n\n\t\t\tif (result[Endpoint.TaskPlanUpdate]?.length)\n\t\t\t{\n\t\t\t\tconst error = result[Endpoint.TaskPlanUpdate][0];\n\n\t\t\t\tthis.showErrorDebounced(error);\n\t\t\t}\n\t\t},\n\t\tshowError(error): void\n\t\t{\n\t\t\tNotifier.notifyViaBrowserProvider({\n\t\t\t\tid: 'tasks-date-plan-update-error',\n\t\t\t\ttext: error?.message,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BottomSheet :sheetBindProps @close=\"close\">\n\t\t\t<div class=\"tasks-field-date-plan-sheet\">\n\t\t\t\t<div class=\"tasks-field-date-plan-header\">\n\t\t\t\t\t<HeadlineMd>{{ loc('TASKS_V2_DATE_PLAN_TITLE_SHEET') }}</HeadlineMd>\n\t\t\t\t\t<BIcon class=\"tasks-field-date-plan-close\" :name=\"Outline.CROSS_L\" hoverable @click=\"close\"/>\n\t\t\t\t</div>\n\t\t\t\t<TextSm class=\"tasks-field-date-plan-description\">{{ description }}</TextSm>\n\t\t\t\t<div class=\"tasks-field-date-plan-fields\">\n\t\t\t\t\t<template v-if=\"isTemplate\">\n\t\t\t\t\t\t<Duration\n\t\t\t\t\t\t\tv-model=\"startDatePlanAfter\"\n\t\t\t\t\t\t\t:matchesWorkTime\n\t\t\t\t\t\t\t:label=\"loc('TASKS_V2_DATE_PLAN_START_AFTER')\"\n\t\t\t\t\t\t\t:design=\"inputDesign\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Duration\n\t\t\t\t\t\t\tv-model=\"templateDuration\"\n\t\t\t\t\t\t\t:matchesWorkTime\n\t\t\t\t\t\t\t:label=\"loc('TASKS_V2_DATE_PLAN_DURATION')\"\n\t\t\t\t\t\t\t:design=\"inputDesign\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<BInput\n\t\t\t\t\t\t\t:modelValue=\"formatDate(startTs)\"\n\t\t\t\t\t\t\t:label=\"loc('TASKS_V2_DATE_PLAN_START')\"\n\t\t\t\t\t\t\t:design=\"inputDesign\"\n\t\t\t\t\t\t\t:icon=\"Outline.CALENDAR_WITH_SLOTS\"\n\t\t\t\t\t\t\t:withClear=\"Boolean(startTs)\"\n\t\t\t\t\t\t\tclickable\n\t\t\t\t\t\t\t:active=\"isPickerShown && !isEndPicker\"\n\t\t\t\t\t\t\t:data-task-plan-start=\"startTs\"\n\t\t\t\t\t\t\t@clear=\"clearStart\"\n\t\t\t\t\t\t\t@click=\"handleDateClick($event, { isEnd: false })\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BInput\n\t\t\t\t\t\t\t:modelValue=\"formatDate(endTs)\"\n\t\t\t\t\t\t\t:label=\"loc('TASKS_V2_DATE_PLAN_END')\"\n\t\t\t\t\t\t\t:design=\"inputDesign\"\n\t\t\t\t\t\t\t:icon=\"Outline.CALENDAR_WITH_SLOTS\"\n\t\t\t\t\t\t\t:withClear=\"Boolean(endTs)\"\n\t\t\t\t\t\t\tclickable\n\t\t\t\t\t\t\t:active=\"isPickerShown && isEndPicker\"\n\t\t\t\t\t\t\t:data-task-plan-end=\"endTs\"\n\t\t\t\t\t\t\t@clear=\"clearEnd\"\n\t\t\t\t\t\t\t@click=\"handleDateClick($event, { isEnd: true })\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Duration\n\t\t\t\t\t\t\tv-model=\"duration\"\n\t\t\t\t\t\t\t:matchesWorkTime\n\t\t\t\t\t\t\t:label=\"loc('TASKS_V2_DATE_PLAN_DURATION')\"\n\t\t\t\t\t\t\t:design=\"inputDesign\"\n\t\t\t\t\t\t\t:error=\"maxDurationReached ? ' ' : null\"\n\t\t\t\t\t\t\t:maxValue=\"Infinity\"\n\t\t\t\t\t\t\t@focus=\"isEndDuration = !startTs\"\n\t\t\t\t\t\t\t@blur=\"isEndDuration = false\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-field-date-plan-switchers\">\n\t\t\t\t\t<DatePlanSwitcher\n\t\t\t\t\t\tv-if=\"task.rights.edit\"\n\t\t\t\t\t\tv-model=\"allowsChangeDatePlan\"\n\t\t\t\t\t\t:text=\"allowChangeText\"\n\t\t\t\t\t/>\n\t\t\t\t\t<DatePlanSwitcher\n\t\t\t\t\t\tv-model=\"matchesWorkTime\"\n\t\t\t\t\t\t:text=\"loc('TASKS_V2_DATE_PLAN_MATCH_WORK_TIME')\"\n\t\t\t\t\t\t:hint=\"matchWorkTimeHint\"\n\t\t\t\t\t\t:lock=\"isMatchesWorkTimeLocked\"\n\t\t\t\t\t/>\n\t\t\t\t\t<DatePlanSwitcher\n\t\t\t\t\t\tv-if=\"!isTemplate\"\n\t\t\t\t\t\tv-model=\"matchesSubTasksTime\"\n\t\t\t\t\t\t:text=\"loc('TASKS_V2_DATE_PLAN_MATCH_SUBTASKS_TIME')\"\n\t\t\t\t\t\t:hint=\"loc('TASKS_V2_DATE_PLAN_MATCH_SUBTASKS_TIME_HINT')\"\n\t\t\t\t\t\t:lock=\"isMatchesSubTasksTimeLocked\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-field-date-plan-footer\">\n\t\t\t\t\t<UiButton\n\t\t\t\t\t\t:text=\"loc('TASKS_V2_DATE_PLAN_BUTTON_SAVE')\"\n\t\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t\t:color=\"ButtonColor.PRIMARY\"\n\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</BottomSheet>\n\t`,\n};\n","import { FieldList } from 'tasks.v2.component.elements.field-list';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { datePlanMeta } from './date-plan-meta';\nimport { DatePlanDate } from './components/date-plan-date';\nimport { DatePlanDuration } from './components/date-plan-duration';\nimport { DatePlanContent } from './components/date-plan-content';\nimport { DatePlanSheet } from './date-plan-sheet';\nimport './date-plan.css';\n\n// @vue/component\nexport const DatePlan = {\n\tcomponents: {\n\t\tFieldList,\n\t\tDatePlanSheet,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisTemplate: {},\n\t},\n\tprops: {\n\t\tisSheetShown: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tsheetBindProps: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:isSheetShown'],\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tdatePlanMeta,\n\t\t};\n\t},\n\tcomputed: {\n\t\tfields(): string[]\n\t\t{\n\t\t\tif (this.isTemplate)\n\t\t\t{\n\t\t\t\tconst isEmpty = !this.task.startDatePlanAfter && !this.task.endDatePlanAfter;\n\t\t\t\tif (isEmpty)\n\t\t\t\t{\n\t\t\t\t\treturn [{\n\t\t\t\t\t\ttitle: datePlanMeta.title,\n\t\t\t\t\t\tcomponent: DatePlanContent,\n\t\t\t\t\t}];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: this.loc('TASKS_V2_DATE_PLAN_START_AFTER'),\n\t\t\t\t\t\tcomponent: DatePlanDuration,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tdateTs: this.task.startDatePlanAfter,\n\t\t\t\t\t\t\tmatchWorkTime: this.task.matchesWorkTime,\n\t\t\t\t\t\t\treadonly: this.readonly,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: this.loc('TASKS_V2_DATE_PLAN_DURATION'),\n\t\t\t\t\t\tcomponent: DatePlanDuration,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tdateTs: this.task.endDatePlanAfter - this.task.startDatePlanAfter,\n\t\t\t\t\t\t\tmatchWorkTime: this.task.matchesWorkTime,\n\t\t\t\t\t\t\treadonly: this.readonly,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t].filter(({ props: { dateTs } }) => dateTs);\n\t\t\t}\n\n\t\t\tconst isEmpty = !this.task.startPlanTs && !this.task.endPlanTs;\n\t\t\tif (isEmpty && (this.task.filledFields[datePlanMeta.id] || this.task.matchesSubTasksTime))\n\t\t\t{\n\t\t\t\treturn [{\n\t\t\t\t\ttitle: datePlanMeta.title,\n\t\t\t\t\tcomponent: DatePlanContent,\n\t\t\t\t}];\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('TASKS_V2_DATE_PLAN_FIELD_START'),\n\t\t\t\t\tcomponent: DatePlanDate,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tdateTs: this.task.startPlanTs,\n\t\t\t\t\t\treadonly: this.readonly,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('TASKS_V2_DATE_PLAN_FIELD_END'),\n\t\t\t\t\tcomponent: DatePlanDate,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tdateTs: this.task.endPlanTs,\n\t\t\t\t\t\treadonly: this.readonly,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t].filter(({ props: { dateTs } }) => dateTs);\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.datePlan;\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (!this.readonly)\n\t\t\t{\n\t\t\t\tthis.setSheetShown(true);\n\t\t\t}\n\t\t},\n\t\tsetSheetShown(isShown: boolean): void\n\t\t{\n\t\t\tthis.$emit('update:isSheetShown', isShown);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-field-date-plan\"\n\t\t\t:class=\"{ '--readonly': readonly }\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"datePlanMeta.id\"\n\t\t\t:data-task-plan-start=\"task.startPlanTs\"\n\t\t\t:data-task-plan-end=\"task.endPlanTs\"\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t<FieldList :fields/>\n\t\t</div>\n\t\t<DatePlanSheet v-if=\"isSheetShown\" :sheetBindProps @close=\"setSheetShown(false)\"/>\n\t`,\n};\n","import { Chip, ChipDesign } from 'ui.system.chip.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { datePlanMeta } from './date-plan-meta';\nimport { DatePlanSheet } from './date-plan-sheet';\n\n// @vue/component\nexport const DatePlanChip = {\n\tcomponents: {\n\t\tChip,\n\t\tDatePlanSheet,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t},\n\tprops: {\n\t\tisSheetShown: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tsheetBindProps: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:isSheetShown'],\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tdatePlanMeta,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdesign(): string\n\t\t{\n\t\t\treturn this.isSelected ? ChipDesign.ShadowAccent : ChipDesign.ShadowNoAccent;\n\t\t},\n\t\tisSelected(): boolean\n\t\t{\n\t\t\treturn this.task.filledFields[datePlanMeta.id];\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.isSelected)\n\t\t\t{\n\t\t\t\tthis.highlightField();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setSheetShown(true);\n\t\t},\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(datePlanMeta.id);\n\t\t},\n\t\tsetSheetShown(isShown: boolean): void\n\t\t{\n\t\t\tthis.$emit('update:isSheetShown', isShown);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\tv-if=\"task.rights.edit || isSelected\"\n\t\t\t:design\n\t\t\t:icon=\"Outline.PLANNING\"\n\t\t\t:text=\"loc('TASKS_V2_DATE_PLAN_TITLE_CHIP')\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"datePlanMeta.id\"\n\t\t\t:data-task-plan-start=\"task.startPlanTs\"\n\t\t\t:data-task-plan-end=\"task.endPlanTs\"\n\t\t\t@click=\"handleClick\"\n\t\t/>\n\t\t<DatePlanSheet v-if=\"isSheetShown\" :sheetBindProps @close=\"setSheetShown(false)\"/>\n\t`,\n};\n"],"names":["datePlanMeta","Object","freeze","id","TaskField","DatePlan","title","Loc","getMessage","DatePlanDate","components","HoverPill","props","dateTs","type","Number","required","readonly","Boolean","default","setup","calendar","template","DatePlanDuration","matchWorkTime","DatePlanContent","FieldAdd","QuestionMark","inject","task","Outline","DatePlanSwitcher","TextSm","Switcher","BIcon","modelValue","text","String","hint","lock","computed","options","size","SwitcherSize","extraSmall","useAirDesign","MAX_INT","DatePlanSheet","BottomSheet","UiButton","HeadlineMd","BInput","BMenu","Duration","taskId","isTemplate","sheetBindProps","emits","InputDesign","ButtonSize","ButtonColor","wasEmpty","data","isEndPicker","isEndDuration","isPickerShown","durationTs","startTs","endTs","startDatePlanAfter","templateDuration","matchesWorkTimeTemp","matchesSubTasksTimeTemp","wasFilled","filledFields","duration","get","set","updateRangeFromDuration","matchesWorkTime","isMatchesWorkTimeLocked","showLimit","featureId","Core","getParams","restrictions","skipWeekends","update","matchesSubTasksTime","isMatchesSubTasksTimeLocked","relatedSubtaskDeadlines","allowsChangeDatePlan","allowsChangeDeadline","taskService","maxDurationReached","Math","floor","inputDesign","Disabled","Grey","available","description","loc","allowChangeText","matchWorkTimeHint","created","updateDuration","startPlanTs","endPlanTs","endDatePlanAfter","showErrorDebounced","Runtime","debounce","showError","methods","clearStart","updatePlan","clearEnd","handleDateClick","currentTarget","isEnd","datePicker","getDatePicker","setTargetNode","show","setFocusDate","timezone","getOffset","handlePickerChangedDebounced","handlePickerChanged","DatePicker","enableTime","selectionMode","defaultTime","dayEndTime","events","DatePickerEvent","SELECT","DESELECT","onShow","onHide","popupOptions","animation","targetContainer","getTargetContainer","preparePickerTimestamp","getRangeStart","getRangeEnd","setHours","workdayStart","H","M","start","end","prepareRange","calculateDuration","calculateStartTs","calculateEndTs","emitEvents","rangeStart","rangeEnd","selectRange","deselectAll","clampWorkDateTime","date","createDateFromUtc","getTime","formatDate","timestamp","formatDateTime","forceYear","close","handleTemplateUpdate","handleTaskUpdate","fieldHighlighter","setContainer","$root","$el","highlight","$emit","result","fromEntries","entries","undefined","filter","value","Type","isUndefined","Endpoint","TaskPlanUpdate","length","error","Notifier","notifyViaBrowserProvider","message","FieldList","isSheetShown","fields","isEmpty","component","rights","datePlan","handleClick","setSheetShown","isShown","DatePlanChip","Chip","design","isSelected","ChipDesign","ShadowAccent","ShadowNoAccent","highlightField"],"mappings":"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"}