this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{};(function(t,e,n,i,s,a,d,o,l,r,h,u,c,p,m,D,T,f,k,E,g,S,C,v,_,A,I,P,y,w,B){"use strict";const N={components:{Hint:D.Hint},inject:{analytics:{},cardType:{}},props:{taskId:{type:[Number,String],required:true}},emits:["update","close"],setup(){return{today:new Date,datePicker:null,dateTs:null,hour:null}},data(){return{isLimitHintShown:false,hintBindElement:null}},computed:{...r.mapGetters({currentUserId:`${B.Model.Interface}/currentUserId`}),task(){return y.taskService.getStoreTask(this.taskId)},isEdit(){return c.idUtils.isReal(this.taskId)},isCreator(){return this.currentUserId===this.task.creatorId},isAdmin(){return u.Core.getParams().rights.user.admin},canChangeDeadlineWithoutLimitation(){return!this.isEdit||this.isCreator||this.task.rights.edit||this.isAdmin},maxDeadlineDate(){if(this.canChangeDeadlineWithoutLimitation||!this.task.maxDeadlineChangeDate){return null}const t=C.DateTimeFormat.getFormat("FORMAT_DATETIME");return h.createDate(this.task.maxDeadlineChangeDate,t)},presets(){const[t,e,n]=[this.today.getFullYear(),this.today.getMonth(),this.today.getDate()];const i=C.DateTimeFormat.getFormat("DAY_OF_WEEK_MONTH_FORMAT");const s=[{id:`today-${this.taskId}`,title:this.loc("TASKS_V2_DEADLINE_TODAY"),date:new Date(t,e,n)},{id:`tomorrow-${this.taskId}`,title:this.loc("TASKS_V2_DEADLINE_TOMORROW"),date:new Date(t,e,n+1)},{id:`end-week-${this.taskId}`,title:this.loc("TASKS_V2_DEADLINE_IN_THE_END_OF_THE_WEEK"),date:new Date(t,e,n-this.today.getDay()+5)},{id:`in-week-${this.taskId}`,title:this.loc("TASKS_V2_DEADLINE_IN_A_WEEK"),date:new Date(t,e,n+7)},{id:`month-${this.taskId}`,title:this.loc("TASKS_V2_DEADLINE_IN_THE_END_OF_THE_MONTH"),date:new Date(t,e+1,0)}];return s.map((t=>{let e=false;if(this.maxDeadlineDate){const n=h.createUtcDate(t.date.getFullYear(),t.date.getMonth(),t.date.getDate());const i=h.createUtcDate(this.maxDeadlineDate.getUTCFullYear(),this.maxDeadlineDate.getUTCMonth(),this.maxDeadlineDate.getUTCDate());e=n>i}return{id:t.id,title:t.title,timestamp:t.date.getTime(),formatted:C.DateTimeFormat.format(i,t.date),disabled:e}}))},limitHintText(){if(!this.maxDeadlineDate){return""}const t=C.DateTimeFormat.getFormat("DAY_MONTH_FORMAT");const e=C.DateTimeFormat.format(t,this.maxDeadlineDate.getTime()/1e3);return this.loc("TASKS_V2_DEADLINE_CAN_MAX_CHANGE_DATE_HINT",{"#DATE#":e})}},created(){this.datePicker=this.createDatePicker();const t=new Date(this.task.deadlineTs+p.timezone.getOffset(this.task.deadlineTs));this.dateTs=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();this.hour=t.getHours()},mounted(){this.datePicker.setTargetNode(this.$refs.picker);this.datePicker.show()},beforeUnmount(){this.datePicker.destroy()},methods:{createDatePicker(){const t=p.timezone.getOffset(this.task.deadlineTs);const e=[];if(this.maxDeadlineDate){e.push({matcher:t=>{const e=h.createUtcDate(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return e>this.maxDeadlineDate},textColor:"#DFE0E3"})}const n=new h.DatePicker({selectedDates:this.task.deadlineTs?[this.task.deadlineTs+t]:null,defaultTime:P.calendar.dayEndTime,inline:true,enableTime:true,dayColors:e,events:{[h.DatePickerEvent.SELECT]:t=>{const{date:e}=t.getData();const n=P.calendar.createDateFromUtc(e).getTime();this.$emit("update",n-p.timezone.getOffset(n))},[h.DatePickerEvent.BEFORE_SELECT]:t=>{if(!this.maxDeadlineDate){return}const{date:e}=t.getData();const n=h.createUtcDate(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());if(n>this.maxDeadlineDate){t.preventDefault()}}}});n.getPicker("day").subscribe("onSelect",(t=>{const{year:e,month:n,day:i}=t.getData();const s=new Date(e,n,i).getTime();this.close();this.sendAnalytics(B.Analytics.Element.Calendar);this.dateTs=s}));n.getPicker("day").subscribe("onFocus",this.handleDayFocus);n.getPicker("time").subscribe("onSelect",(t=>{const{hour:e,minute:n}=t.getData();if(Number.isInteger(n)||e===this.hour){this.close()}this.hour=e}));return n},async focusDate(t,e=false,n=null){if(this.maxDeadlineDate){this.isLimitHintShown=false;this.hintBindElement=null;await this.$nextTick();if(e&&n){const e=n.currentTarget;if(e&&t){this.hintBindElement=e;this.isLimitHintShown=true}return}}this.datePicker.setFocusDate(t)},selectPresetDate(t,e=false){if(e){return}const n=new Date(t);const[i,s,a]=[n.getFullYear(),n.getMonth(),n.getDate()];this.datePicker.selectDate(new Date(`${s+1}/${a}/${i} ${P.calendar.dayEndTime}`));this.sendAnalytics(B.Analytics.Element.DeadlinePreset);this.close()},close(){this.$emit("close")},sendAnalytics(t){var e,n,i,s;m.analytics.sendDeadlineSet(this.analytics,{element:t,cardType:this.cardType,taskId:w.Type.isNumber(this.taskId)?this.taskId:0,viewersCount:(e=(n=this.task.auditorsIds)==null?void 0:n.length)!=null?e:0,coexecutorsCount:(i=(s=this.task.accomplicesIds)==null?void 0:s.length)!=null?i:0})},async handleDayFocus(t){const{year:e,month:n,day:i}=t.getData();const s=t.getTarget();if(!this.maxDeadlineDate){return}const a=s.getMonthContainer().querySelector(`.ui-day-picker-day[data-year="${e}"][data-month="${n}"][data-day="${i}"]`);if(!a){return}w.Dom.style(a,"cursor","pointer");this.isLimitHintShown=false;this.hintBindElement=null;await this.$nextTick();const d=h.createUtcDate(e,n,i);const o=h.createUtcDate(this.maxDeadlineDate.getUTCFullYear(),this.maxDeadlineDate.getUTCMonth(),this.maxDeadlineDate.getUTCDate());if(d>o){this.datePicker.setFocusDate(null);w.Dom.style(a,"cursor","default");this.hintBindElement=a;this.isLimitHintShown=true}}},template:`\n\t\t<div class="tasks-field-deadline-popup">\n\t\t\t<div class="tasks-field-deadline-picker-container">\n\t\t\t\t<div class="tasks-field-deadline-picker" ref="picker"/>\n\t\t\t</div>\n\t\t\t<div class="tasks-field-deadline-presets">\n\t\t\t\t<template v-for="(preset, key) of presets" :key>\n\t\t\t\t\t<div\n\t\t\t\t\t\t:data-task-preset-id="preset.id"\n\t\t\t\t\t\t:class="['tasks-field-deadline-preset', { '--disabled': preset.disabled }]"\n\t\t\t\t\t\t@click="selectPresetDate(preset.timestamp, preset.disabled)"\n\t\t\t\t\t\t@mouseenter="focusDate(preset.timestamp, preset.disabled, $event)"\n\t\t\t\t\t\t@mouseleave="focusDate(null, preset.disabled, $event)"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="tasks-field-deadline-preset-title">{{ preset.title }}</div>\n\t\t\t\t\t\t<div class="tasks-field-deadline-preset-date">{{ preset.formatted }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<div v-if="false" class="tasks-field-deadline-settings">\n\t\t\t</div>\n\t\t\t<Hint\n\t\t\t\tv-if="isLimitHintShown"\n\t\t\t\t:bindElement="hintBindElement"\n\t\t\t\t:options="{\n\t\t\t\t\tmaxWidth: 300,\n\t\t\t\t\tpadding: 12,\n\t\t\t\t\tcloseIcon: false,\n\t\t\t\t\toffsetLeft: hintBindElement.offsetWidth / 2,\n\t\t\t\t}"\n\t\t\t\t@close="isLimitHintShown = false"\n\t\t\t>\n\t\t\t\t<div class="tasks-field-deadline-date-picker-hint">{{ limitHintText }}</div>\n\t\t\t</Hint>\n\t\t</div>\n\t`};const x={components:{Popup:S.Popup,DeadlinePopupContent:N},props:{taskId:{type:[Number,String],required:true},deadlineTs:{type:[Number,null],required:true},bindElement:{type:HTMLElement,required:true},coordinates:{type:Object,default:null}},emits:["update:deadlineTs","close"],computed:{options(){var t;const e={id:`tasks-field-deadline-popup-${this.taskId}`,bindElement:this.bindElement,padding:24,offsetTop:5,offsetLeft:-100,targetContainer:document.body};if((t=this.coordinates)!=null&&t.x){const t=this.bindElement.getBoundingClientRect();e.offsetLeft+=this.coordinates.x-t.left}return e}},methods:{handleUpdate(t){this.$emit("update:deadlineTs",t)}},template:`\n\t\t<Popup :options @close="$emit('close')">\n\t\t\t<DeadlinePopupContent :taskId @update="handleUpdate" @close="$emit('close')"/>\n\t\t</Popup>\n\t`};const b={name:"DeadlineChangeReasonPopup",components:{BIcon:T.BIcon,BInput:f.BInput,UiButton:E.Button,Popup:S.Popup},props:{taskId:{type:[Number,String],required:true},bindElement:{type:HTMLElement,required:true},modelValue:{type:String,required:true}},emits:["update:modelValue","close"],setup(){return{AirButtonStyle:E.AirButtonStyle,ButtonSize:E.ButtonSize,Outline:T.Outline}},data(){return{resolve:null,reject:null}},computed:{options(){return{id:`tasks-deadline-change-reason-popup-${this.taskId}`,className:"tasks-deadline-change-reason-popup",bindElement:this.bindElement,padding:24,width:472,height:324,offsetLeft:-24,targetContainer:document.body}},reason:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{handleClose(){this.reason="";this.$emit("close")},handleSave(){if(this.reason===""){return}this.$emit("close")}},template:`\n\t\t<Popup :options @close="handleClose">\n\t\t\t<div class="tasks-deadline-change-reason-popup-header">\n\t\t\t\t<div class="tasks-deadline-change-reason-popup-title">\n\t\t\t\t\t{{ loc('TASKS_V2_DEADLINE_CHANGE_REASON_POPUP_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<BIcon\n\t\t\t\t\t:name="Outline.CROSS_L"\n\t\t\t\t\thoverable\n\t\t\t\t\tclass="tasks-deadline-change-reason-popup-close-icon"\n\t\t\t\t\t@click="handleClose"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class="tasks-deadline-change-reason-popup-content">\n\t\t\t\t<div class="tasks-deadline-change-reason-popup-message">\n\t\t\t\t\t{{ loc('TASKS_V2_DEADLINE_CHANGE_REASON_POPUP_MESSAGE') }}\n\t\t\t\t</div>\n\t\t\t\t<BInput\n\t\t\t\t\tv-model="reason"\n\t\t\t\t\t:rowsQuantity="6"\n\t\t\t\t\tactive\n\t\t\t\t\tresize="none"\n\t\t\t\t\tdata-id="tasks-deadline-change-reason-popup-reason"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class="tasks-deadline-change-reason-popup-footer">\n\t\t\t\t<UiButton\n\t\t\t\t\t:text="loc('TASKS_V2_DEADLINE_CHANGE_REASON_POPUP_BTN_CANCEL')"\n\t\t\t\t\t:size="ButtonSize.MEDIUM"\n\t\t\t\t\t:style="AirButtonStyle.PLAIN"\n\t\t\t\t\t:dataset="{\n\t\t\t\t\t\tdeadlineChangeReasonButtonId: 'cancel',\n\t\t\t\t\t}"\n\t\t\t\t\t@click="handleClose"\n\t\t\t\t/>\n\t\t\t\t<UiButton\n\t\t\t\t\t:text="loc('TASKS_V2_DEADLINE_CHANGE_REASON_POPUP_BTN_SAVE')"\n\t\t\t\t\t:size="ButtonSize.MEDIUM"\n\t\t\t\t\t:disabled="reason === ''"\n\t\t\t\t\t:style="AirButtonStyle.FILLED"\n\t\t\t\t\t:dataset="{\n\t\t\t\t\t\tdeadlineChangeReasonButtonId: 'save',\n\t\t\t\t\t}"\n\t\t\t\t\t@click="handleSave"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Popup>\n\t`};const L=C.DurationFormat.getUnitDurations();const F={components:{TextSm:v.TextSm,Chip:_.Chip,QuestionMark:A.QuestionMark,Duration:I.Duration},props:{taskId:{type:[Number,String],required:true},freeze:{type:Function,required:true},unfreeze:{type:Function,required:true}},emits:["update","close"],setup(){return{ChipDesign:_.ChipDesign}},data(){return{deadlineAfter:0}},computed:{duration:{get(){return this.deadlineAfter},set(t){this.$emit("update",t)}},task(){return y.taskService.getStoreTask(this.taskId)},presets(){var t;const e=(t=this.task)!=null&&t.matchesWorkTime?P.calendar.workdayDuration:L.d;return[{duration:e,title:new C.DurationFormat(L.d).format()},{duration:e*3,title:new C.DurationFormat(L.d*3).format()},{duration:e*7,title:this.loc("TASKS_V2_DEADLINE_A_WEEK")},{duration:e*14,title:this.loc("TASKS_V2_DEADLINE_TWO_WEEKS")}]}},created(){var t;this.deadlineAfter=(t=this.task)==null?void 0:t.deadlineAfter},methods:{applyPreset(t){this.duration=t;this.$emit("close")}},template:`\n\t\t<div class="tasks-field-deadline-after-header">\n\t\t\t<TextSm>{{ loc('TASKS_V2_DEADLINE_AFTER_TEXT') }}</TextSm>\n\t\t\t<QuestionMark :hintText="loc('TASKS_V2_DEADLINE_AFTER_HINT')"/>\n\t\t</div>\n\t\t<div class="tasks-field-deadline-after-chips">\n\t\t\t<template v-for="preset in presets" :key="preset.title">\n\t\t\t\t<Chip\n\t\t\t\t\t:text="preset.title"\n\t\t\t\t\t:design="ChipDesign.Outline"\n\t\t\t\t\t:compact="false"\n\t\t\t\t\t@click="applyPreset(preset.duration)"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</div>\n\t\t<Duration\n\t\t\tv-model="duration"\n\t\t\t:label="loc('TASKS_V2_DEADLINE_AFTER_CUSTOM')"\n\t\t\t:matchesWorkTime="task?.matchesWorkTime"\n\t\t\t@menuShown="freeze"\n\t\t\t@menuHidden="unfreeze"\n\t\t/>\n\t`};const V={components:{Popup:S.Popup,DeadlineAfterPopupContent:F},props:{taskId:{type:[Number,String],required:true},deadlineAfter:{type:[Number,null],required:true},bindElement:{type:HTMLElement,required:true}},emits:["update:deadlineAfter","close"],computed:{options(){return{id:`tasks-field-deadline-after-popup-${this.taskId}`,bindElement:this.bindElement,width:300,padding:24,offsetTop:5,targetContainer:document.body}}},methods:{handleUpdate(t){this.$emit("update:deadlineAfter",t)}},template:`\n\t\t<Popup\n\t\t\tv-slot="{ freeze, unfreeze }"\n\t\t\t:options\n\t\t\t@close="$emit('close')"\n\t\t>\n\t\t\t<DeadlineAfterPopupContent :taskId :freeze :unfreeze @update="handleUpdate" @close="$emit('close')"/>\n\t\t</Popup>\n\t`};const O=Object.freeze({id:B.TaskField.Deadline,title:w.Loc.getMessage("TASKS_V2_DEADLINE_TITLE")});const H={components:{TextMd:v.TextMd,Text2Xs:v.Text2Xs,Hint:D.Hint,HoverPill:d.HoverPill,BIcon:T.BIcon,DeadlinePopup:x,DeadlineAfterPopup:V,DeadlineChangeReasonPopup:b,SettingsLabel:a.SettingsLabel,TaskSettingsPopup:s.TaskSettingsPopup},directives:{hint:i.hint},props:{taskId:{type:[Number,String],required:true},isTemplate:{type:Boolean,default:false},isAutonomous:{type:Boolean,default:false},isHovered:{type:Boolean,default:false},compact:{type:Boolean,default:false}},emits:["isSettingsPopupShown"],setup(){return{deadlineMeta:O}},data(){return{nowTs:Date.now(),isPopupShown:false,isSettingsPopupShown:false,isExceededHintShown:false,isChangeReasonPopupShown:false,dateTs:null,externalBindElement:null,coordinates:null,saveCallback:null,changeReason:""}},computed:{...r.mapGetters({deadlineChangeCount:`${B.Model.Interface}/deadlineChangeCount`}),task(){return y.taskService.getStoreTask(this.taskId)},isEdit(){return c.idUtils.isReal(this.taskId)},deadlineTs(){var t;return(t=this.dateTs)!=null?t:this.isTemplate?this.task.deadlineAfter:this.task.deadlineTs},expiredDuration(){const t=this.task.status===B.TaskStatus.Completed;const e=this.isTemplate||!this.deadlineTs||this.isFlowFilledOnAdd||t;return e?0:this.nowTs-this.deadlineTs},isExpired(){return this.expiredDuration>0},expiredFormatted(){return this.loc("TASKS_V2_DEADLINE_EXPIRED",{"#EXPIRED_DURATION#":new C.DurationFormat(this.expiredDuration).formatClosest()})},deadlineFormatted(){if(this.isFlowFilledOnAdd){return this.loc("TASKS_V2_DEADLINE_AUTO")}if(!this.deadlineTs){return this.loc("TASKS_V2_DEADLINE_EMPTY")}if(this.isTemplate){return P.calendar.formatDuration(this.deadlineTs,this.task.matchesWorkTime)}if(this.isExpired&&this.compact){return this.loc("TASKS_V2_TASK_LIST_DEADLINE_EXPIRED",{"#DURATION#":new C.DurationFormat(this.expiredDuration).formatClosest()})}return P.calendar.formatDateTime(this.deadlineTs)},iconName(){return this.isFlowFilledOnAdd?T.Outline.BOTTLENECK:T.Outline.CALENDAR_WITH_SLOTS},bindElement(){var t;return(t=this.externalBindElement)!=null?t:this.$refs.deadline.$el},isFlowFilledOnAdd(){return!this.isEdit&&this.task.flowId>0},canChangeSettings(){const t=u.Core.getParams().features;if(!t.isV2Enabled){return false}return this.task.rights.edit},readonly(){return!this.task.rights.deadline||this.exceededChangeCount||this.isFlowFilledOnAdd},canChangeDeadlineWithoutLimitation(){const t=u.Core.getParams().currentUser.id===this.task.creatorId;return!this.isEdit||t||this.task.rights.edit||u.Core.getParams().rights.user.admin},requireChangeReason(){return this.task.requireDeadlineChangeReason&&!this.canChangeDeadlineWithoutLimitation},exceededChangeCount(){if(this.isTemplate||this.canChangeDeadlineWithoutLimitation||!this.task.maxDeadlineChanges){return false}return this.deadlineChangeCount>=this.task.maxDeadlineChanges},canChangeTooltip(){if(!this.isEdit||!this.readonly||this.exceededChangeCount){return null}return()=>D.tooltip({text:this.loc("TASKS_V2_DEADLINE_CAN_CHANGE_HINT"),popupOptions:{width:280,offsetLeft:this.hintAngleOffset+3}})},hintBindElement(){var t,e,n;return(t=(e=this.$refs.deadlineIcon)==null?void 0:e.$el)!=null?t:(n=this.$refs.deadline)==null?void 0:n.$el},hintAngleOffset(){return this.hintBindElement.offsetWidth/2}},watch:{isSettingsPopupShown(t){this.$emit("isSettingsPopupShown",t)}},mounted(){o.heightTransition.animate(this.$refs.container);this.nowTsInterval=setInterval((()=>{this.nowTs=Date.now()}),1e3);e.EventEmitter.subscribe(B.EventName.OpenDeadlinePicker,this.handleOpenDeadlinePickerEvent)},created(){this.showErrorDebounce=w.Runtime.debounce(this.showError,300)},updated(){o.heightTransition.animate(this.$refs.container)},beforeUnmount(){clearInterval(this.nowTsInterval);e.EventEmitter.unsubscribe(B.EventName.OpenDeadlinePicker,this.handleOpenDeadlinePickerEvent)},methods:{handleOpenDeadlinePickerEvent(t){const{taskId:e,bindElement:n,coordinates:i}=t.getData();if(Number(e)===Number(this.taskId)){this.showPopup(n,i)}},handleClick(){if(!this.readonly){this.showPopup()}},showPopup(t,e){this.dateTs=this.deadlineTs;this.externalBindElement=t;this.coordinates=e;this.isPopupShown=true},handleCrossClick(){if(this.requireChangeReason){this.isChangeReasonPopupShown=true;this.saveCallback=this.clearDeadline}else{void this.clearDeadline()}},handleClose(){var t,e;if(this.requireChangeReason&&this.dateTs){this.isChangeReasonPopupShown=true;this.saveCallback=this.saveDeadline}else{void this.saveDeadline()}this.isPopupShown=false;(t=this.$refs.deadline)==null?void 0:(e=t.$el)==null?void 0:e.focus()},async handleChangeReasonPopupClose(){this.isChangeReasonPopupShown=false;await this.saveCallback();this.saveCallback=null},handleKeydown(t){if(t.key==="Enter"&&!(t.ctrlKey||t.metaKey)){void this.handleClick()}},async saveDeadline(){if(this.requireChangeReason&&this.changeReason===""){return}if(this.dateTs){await this.setDeadline(this.dateTs)}if(!this.isTemplate&&!this.canChangeDeadlineWithoutLimitation&&this.task.maxDeadlineChanges){void l.deadlineService.updateDeadlineChangeCount(this.task.id)}},async clearDeadline(){if(this.requireChangeReason&&this.changeReason===""){return}await this.setDeadline(0)},async setDeadline(t){this.dateTs=t;if(this.isTemplate){await y.taskService.update(this.taskId,{deadlineAfter:t})}else{var e;const n=await y.taskService.update(this.taskId,{deadlineTs:t,deadlineChangeReason:this.changeReason});if((e=n[B.Endpoint.TaskDeadlineUpdate])!=null&&e.length){const t=n[B.Endpoint.TaskDeadlineUpdate][0];this.showErrorDebounce(t);this.dateTs=this.task.deadlineTs}}},showError(t){n.Notifier.notifyViaBrowserProvider({id:"task-notify-deadline-update-error",text:t==null?void 0:t.message})}},template:`\n\t\t<div\n\t\t\tv-hint="canChangeTooltip"\n\t\t\tclass="tasks-field-deadline"\n\t\t\t:class="{ '--expired': isExpired }"\n\t\t\t:data-task-id="taskId"\n\t\t\t:data-task-field-id="deadlineMeta.id"\n\t\t\t:data-task-field-value="task.deadlineTs"\n\t\t\tref="container"\n\t\t>\n\t\t\t<div class="tasks-field-deadline-inner">\n\t\t\t\t<HoverPill\n\t\t\t\t\t:withClear="Boolean(deadlineTs)"\n\t\t\t\t\t:readonly\n\t\t\t\t\t:textOnly="compact"\n\t\t\t\t\t:noOffset="compact"\n\t\t\t\t\t:active="isPopupShown"\n\t\t\t\t\tref="deadline"\n\t\t\t\t\t@click="handleClick"\n\t\t\t\t\t@clear="handleCrossClick"\n\t\t\t\t\t@keydown="handleKeydown"\n\t\t\t\t\t@mouseover="isExceededHintShown = true"\n\t\t\t\t\t@mouseleave="isExceededHintShown = false"\n\t\t\t\t>\n\t\t\t\t\t<BIcon v-if="!compact" class="tasks-field-deadline-icon" :name="iconName" ref="deadlineIcon"/>\n\t\t\t\t\t<TextMd class="tasks-field-deadline-text" :accent="isExpired">{{ deadlineFormatted }}</TextMd>\n\t\t\t\t</HoverPill>\n\t\t\t\t<div v-if="!isFlowFilledOnAdd && !isTemplate && !compact" ref="settings" class="tasks-field-deadline-settings-label">\n\t\t\t\t\t<SettingsLabel\n\t\t\t\t\t\tv-if="canChangeSettings && (isHovered || isSettingsPopupShown)"\n\t\t\t\t\t\tdata-settings-label\n\t\t\t\t\t\t@click="isSettingsPopupShown = true"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Text2Xs v-if="isExpired && !compact" class="tasks-field-deadline-expired">{{ expiredFormatted }}</Text2Xs>\n\t\t</div>\n\t\t<DeadlinePopup\n\t\t\tv-if="!isTemplate && isPopupShown"\n\t\t\tv-model:deadlineTs="dateTs"\n\t\t\t:taskId\n\t\t\t:bindElement\n\t\t\t:coordinates\n\t\t\t@close="handleClose"\n\t\t/>\n\t\t<DeadlineAfterPopup\n\t\t\tv-if="isTemplate && isPopupShown"\n\t\t\tv-model:deadlineAfter="dateTs"\n\t\t\t:taskId\n\t\t\t:bindElement\n\t\t\t@close="handleClose"\n\t\t/>\n\t\t<DeadlineChangeReasonPopup\n\t\t\tv-if="isChangeReasonPopupShown"\n\t\t\tv-model="changeReason"\n\t\t\t:taskId\n\t\t\t:bindElement="$refs.container"\n\t\t\t@close="handleChangeReasonPopupClose"\n\t\t/>\n\t\t<TaskSettingsPopup v-if="isSettingsPopupShown" @close="isSettingsPopupShown = false"/>\n\t\t<Hint\n\t\t\tv-if="exceededChangeCount && isExceededHintShown"\n\t\t\t:bindElement="hintBindElement"\n\t\t\t:options="{\n\t\t\t\tmaxWidth: 330,\n\t\t\t\tpadding: 12,\n\t\t\t\tcloseIcon: false,\n\t\t\t\toffsetLeft: hintAngleOffset,\n\t\t\t}"\n\t\t\t@close="isExceededHintShown = false"\n\t\t>\n\t\t\t<div class="tasks-field-deadline-exceeded-hint">\n\t\t\t\t<span>{{ loc('TASKS_V2_DEADLINE_CAN_MAX_CHANGE_HINT_1') }}</span>\n\t\t\t\t<span>{{ loc('TASKS_V2_DEADLINE_CAN_MAX_CHANGE_HINT_2') }}</span>\n\t\t\t</div>\n\t\t</Hint>\n\t`};t.Deadline=H;t.DeadlinePopup=x;t.DeadlineAfterPopup=V;t.deadlineMeta=O})(this.BX.Tasks.V2.Component.Fields=this.BX.Tasks.V2.Component.Fields||{},BX.Event,BX.UI.NotificationManager,BX.Vue3.Directives,BX.Tasks.V2.Component,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Lib,BX.Tasks.V2.Provider.Service,BX.Vue3.Vuex,BX.UI.DatePicker,BX.Tasks.V2,BX.Tasks.V2.Lib,BX.Tasks.V2.Lib,BX.Tasks.V2.Lib,BX.Tasks.V2.Component.Elements,BX.UI.IconSet,BX.UI.System.Input.Vue,BX,BX.Vue3.Components,BX,BX.UI.Vue3.Components,BX.Main,BX.UI.System.Typography.Vue,BX.UI.System.Chip.Vue,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Component.Elements,BX.Tasks.V2.Lib,BX.Tasks.V2.Provider.Service,BX,BX.Tasks.V2.Const);
//# sourceMappingURL=deadline.bundle.map.js