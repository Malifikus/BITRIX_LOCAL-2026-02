{"version":3,"file":"replication.bundle.js","sources":["../src/replication-meta.js","../src/lib/get-locale-postfix.js","../src/lib/period-rule-daily-generator.js","../src/lib/period-rule-weekly-generator.js","../src/lib/period-rule-monthly-generator.js","../src/lib/period-rule-yearly-generator.js","../src/lib/time-string-converter.js","../src/lib/replicate-rule-generator.js","../src/components/replication/replication-content-state.js","../src/components/replication/replication-content.js","../src/components/replication-sheet/replication-settings/interval/interval.js","../src/components/replication-sheet/replication-settings/replication-settings-day/replication-settings-day.js","../src/components/replication-sheet/replication-settings/replication-settings-week/days-list/replication-settings-week-days-list.js","../src/components/replication-sheet/replication-settings/replication-settings-week/replication-settings-week.js","../src/components/replication-sheet/replication-settings/replication-settings-month/monthly-by-day-of-month/repllication-settings-monthly-by-day-of-month.js","../src/components/replication-sheet/replication-settings/components/serial-number-select.js","../src/components/replication-sheet/replication-settings/components/week-day-select.js","../src/components/replication-sheet/replication-settings/replication-settings-month/monthly-by-day-of-week/replication-settings-monthly-by-day-of-week.js","../src/components/replication-sheet/replication-settings/replication-settings-month/replication-settings-month.js","../src/components/replication-sheet/replication-settings/components/month-select.js","../src/components/replication-sheet/replication-settings/replication-settings-year/absolute-date/absolute-date.js","../src/components/replication-sheet/replication-settings/replication-settings-year/relative-date/relative-date.js","../src/components/replication-sheet/replication-settings/replication-settings-year/replication-settings-year.js","../src/components/replication-sheet/replication-settings/replication-settings.js","../src/lib/date-string-converter.js","../src/components/replication-sheet/replication-datepicker/replication-datepicker.js","../src/components/replication-sheet/replication-start/replication-start.js","../src/components/replication-sheet/replication-finish/replication-finish.js","../src/components/replication-sheet/replication-start-time/replication-start-time.js","../src/components/replication-sheet/replication-deadline/replication-deadline.js","../src/components/replication-sheet/replication-weekend/replication-weekend.js","../src/components/replication-sheet/footer/replication-sheet-footer.js","../src/components/replication-sheet/replication-sheet-content.js","../src/replication-sheet.js","../src/components/replication-sheet/header/replication-sheet-header.js","../src/components/replication-history-sheet/time-fields/time-fields.js","../src/components/replication-history-sheet/error-hint/error-hint.js","../src/components/replication-history-sheet/message-fields/message-field.js","../src/components/replication-history-sheet/message-fields/message-fields.js","../src/components/replication-history-sheet/grid-loader/grid-loader.js","../src/components/replication-history-sheet/replication-history-sheet-content.js","../src/replication-history-sheet.js","../src/replication.js","../src/replication-chip.js"],"sourcesContent":["import { TaskField } from 'tasks.v2.const';\n\nexport const replicationMeta = Object.freeze({\n\tid: TaskField.Replication,\n});\n","import { ReplicationWeekDayIndex } from 'tasks.v2.const';\n\nexport function getWeekDayGender(weekDay: $Values<typeof ReplicationWeekDayIndex>): '_M' | '_F' | ''\n{\n\tif (weekDay === ReplicationWeekDayIndex.Sunday)\n\t{\n\t\treturn '';\n\t}\n\n\tif (\n\t\tweekDay === ReplicationWeekDayIndex.Monday\n\t\t|| weekDay === ReplicationWeekDayIndex.Tuesday\n\t\t|| weekDay === ReplicationWeekDayIndex.Thursday\n\t)\n\t{\n\t\treturn '_M';\n\t}\n\n\treturn '_F';\n}\n","import { Loc } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\n\nimport type { TaskReplicateParams } from 'tasks.v2.model.tasks';\n\nimport type { PeriodRuleGenerator } from '../types';\n\nexport class PeriodRuleDailyGenerator implements PeriodRuleGenerator\n{\n\t#replicateParams: TaskReplicateParams;\n\n\tconstructor(replicateParams: TaskReplicateParams)\n\t{\n\t\tthis.#replicateParams = replicateParams;\n\t}\n\n\tgenerate(): string\n\t{\n\t\tconst dailyMonthInterval = this.#replicateParams.dailyMonthInterval;\n\t\tconst everyDay = this.#replicateParams.everyDay || 1;\n\n\t\tif (dailyMonthInterval > 0)\n\t\t{\n\t\t\treturn Loc.getMessage('TASKS_V2_REPLICATION_MONTHLY_2', {\n\t\t\t\t'#DAY_NUMBER#': DateTimeFormat.format('ddiff', 0, everyDay * 60 * 60 * 24, true),\n\t\t\t\t'#WEEKDAY_NAME#': '',\n\t\t\t\t'#NUMBER#': ` ${dailyMonthInterval + 1}`,\n\t\t\t});\n\t\t}\n\n\t\treturn Loc.getMessagePlural(\n\t\t\t'TASKS_V2_REPLICATION_DAILY',\n\t\t\teveryDay,\n\t\t\t{\n\t\t\t\t'#NUMBER#': everyDay > 1 ? ` ${everyDay}` : '',\n\t\t\t},\n\t\t);\n\t}\n}\n","import { Loc } from 'main.core';\n\nimport type { TaskReplicateParams } from 'tasks.v2.model.tasks';\n\nimport type { PeriodRuleGenerator } from '../types';\n\nexport class PeriodRuleWeeklyGenerator implements PeriodRuleGenerator\n{\n\t#replicateParams: TaskReplicateParams;\n\n\tconstructor(replicateParams: TaskReplicateParams)\n\t{\n\t\tthis.#replicateParams = replicateParams;\n\t}\n\n\tgenerate(): string\n\t{\n\t\tconst everyWeek = this.#replicateParams.everyWeek || 1;\n\n\t\tconst weekDaysLabel = this.#weekDays.length === 7\n\t\t\t? Loc.getMessage('TASKS_V2_REPLICATION_WEEKLY_EVERYDAY')\n\t\t\t: this.#weekDays.map((wd) => Loc.getMessage(`TASKS_V2_REPLICATION_WD_${wd}`)).join(', ');\n\n\t\treturn Loc.getMessagePlural(\n\t\t\t'TASKS_V2_REPLICATION_WEEKLY',\n\t\t\teveryWeek,\n\t\t\t{\n\t\t\t\t'#NUMBER#': everyWeek > 1 ? ` ${everyWeek}` : '',\n\t\t\t\t'#WEEKDAYS#': ` (${weekDaysLabel})`,\n\t\t\t},\n\t\t);\n\t}\n\n\tget #weekDays(): number[]\n\t{\n\t\tconst weekDays = this.#replicateParams.weekDays;\n\n\t\treturn [...(weekDays?.length > 0 ? weekDays : [1])].sort();\n\t}\n}\n","import { Loc } from 'main.core';\nimport { ReplicationMonthlyType, ReplicationWeekDayIndex } from 'tasks.v2.const';\nimport type { TaskReplicateParams } from 'tasks.v2.model.tasks';\n\nimport type { PeriodRuleGenerator } from '../types';\nimport { getWeekDayGender } from './get-locale-postfix';\n\nexport class PeriodRuleMonthlyGenerator implements PeriodRuleGenerator\n{\n\t#replicateParams: TaskReplicateParams;\n\n\tconstructor(replicateParams: TaskReplicateParams)\n\t{\n\t\tthis.#replicateParams = replicateParams;\n\t}\n\n\tgenerate(): string\n\t{\n\t\treturn this.#replicateParams.monthlyType === ReplicationMonthlyType.Absolute\n\t\t\t? this.#generateAbsolute()\n\t\t\t: this.#generateRelative();\n\t}\n\n\t#generateAbsolute(): string\n\t{\n\t\tconst monthlyMonthNum = this.#replicateParams.monthlyMonthNum1 || 1;\n\n\t\treturn Loc.getMessagePlural(\n\t\t\t'TASKS_V2_REPLICATION_MONTHLY_1',\n\t\t\tmonthlyMonthNum,\n\t\t\t{\n\t\t\t\t'#NUMBER#': monthlyMonthNum > 1 ? ` ${monthlyMonthNum}` : '',\n\t\t\t\t'#DAY_NUMBER#': this.#replicateParams.monthlyDayNum,\n\t\t\t},\n\t\t);\n\t}\n\n\t#generateRelative(): string\n\t{\n\t\tconst monthlyWeekDay = this.#replicateParams.monthlyWeekDay;\n\t\tconst weekDayNum = this.#replicateParams.monthlyWeekDayNum;\n\t\tconst localePostfix = getWeekDayGender(monthlyWeekDay);\n\n\t\tconst dayNumber = Loc.getMessage(`TASKS_V2_REPLICATION_NUMBER_${weekDayNum}${localePostfix}`);\n\t\tconst weekDay = Loc.getMessage(`TASKS_V2_REPLICATION_WD_ALT_${monthlyWeekDay + 1}`);\n\t\tconst monthlyMonthNum = this.#replicateParams.monthlyMonthNum2 || 1;\n\n\t\treturn Loc.getMessage(\n\t\t\t`TASKS_V2_REPLICATION_MONTHLY_2${this.#getLocaleMonthlyOfDayType2Alt()}`,\n\t\t\t{\n\t\t\t\t'#DAY_NUMBER#': dayNumber,\n\t\t\t\t'#WEEKDAY_NAME#': weekDay,\n\t\t\t\t'#NUMBER#': monthlyMonthNum > 1 ? ` ${monthlyMonthNum}` : '',\n\t\t\t},\n\t\t);\n\t}\n\n\t#getLocaleMonthlyOfDayType2Alt(): '_ALT_0' | '_ALT_1' | ''\n\t{\n\t\tconst weekDay = this.#replicateParams.monthlyWeekDay;\n\n\t\tif (weekDay === ReplicationWeekDayIndex.Sunday)\n\t\t{\n\t\t\treturn '_ALT_1';\n\t\t}\n\n\t\tif (weekDay === ReplicationWeekDayIndex.Wednesday\n\t\t\t|| weekDay === ReplicationWeekDayIndex.Friday\n\t\t\t|| weekDay === ReplicationWeekDayIndex.Saturday)\n\t\t{\n\t\t\treturn '_ALT_0';\n\t\t}\n\n\t\treturn '';\n\t}\n}\n","import { Loc } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\n\nimport { ReplicationYearlyWeekDayIndex, ReplicationYearlyType } from 'tasks.v2.const';\nimport type { TaskReplicateParams } from 'tasks.v2.model.tasks';\n\nimport { getWeekDayGender } from './get-locale-postfix';\nimport type { PeriodRuleGenerator } from '../types';\n\nexport class PeriodRuleYearlyGenerator implements PeriodRuleGenerator\n{\n\t#replicateParams: TaskReplicateParams;\n\n\tconstructor(replicateParams: TaskReplicateParams)\n\t{\n\t\tthis.#replicateParams = replicateParams;\n\t}\n\n\tgenerate(): string\n\t{\n\t\treturn this.#replicateParams.yearlyType === ReplicationYearlyType.Absolute\n\t\t\t? this.#generateAbsolute()\n\t\t\t: this.#generateRelative();\n\t}\n\n\t#generateAbsolute(): string\n\t{\n\t\tconst yearlyDayNum = this.#replicateParams.yearlyDayNum || 1;\n\t\tconst yearlyMonth = this.#replicateParams.yearlyMonth1 || 1;\n\n\t\treturn Loc.getMessage(\n\t\t\t'TASKS_V2_REPLICATION_YEARLY_1',\n\t\t\t{\n\t\t\t\t'#NUMBER#': ` ${yearlyDayNum}`,\n\t\t\t\t'#MONTH#': DateTimeFormat.format('F', new Date().setMonth(yearlyMonth - 1) / 1000),\n\t\t\t},\n\t\t);\n\t}\n\n\t#generateRelative(): string\n\t{\n\t\tconst yearlyWeekDayNum = this.#replicateParams.yearlyWeekDayNum || 0;\n\t\tconst yearlyWeekDay = this.#replicateParams.yearlyWeekDay || 0;\n\t\tconst yearlyMonth = this.#replicateParams.yearlyMonth2 || 1;\n\n\t\tconst dayNumberLabel = Loc.getMessage(`TASKS_V2_REPLICATION_NUMBER_${yearlyWeekDayNum}${getWeekDayGender(\n\t\t\tyearlyWeekDay - 1,\n\t\t)}`);\n\n\t\treturn Loc.getMessage(\n\t\t\t`TASKS_V2_REPLICATION_YEARLY_2${this.#getLocaleType2Alt()}`,\n\t\t\t{\n\t\t\t\t'#DAY_NUMBER#': dayNumberLabel,\n\t\t\t\t'#WEEK_DAY#': Loc.getMessage(`TASKS_V2_REPLICATION_WD_ALT_${yearlyWeekDay}`),\n\t\t\t\t'#MONTH#': DateTimeFormat.format('F', new Date().setMonth(yearlyMonth - 1) / 1000),\n\t\t\t},\n\t\t);\n\t}\n\n\t#getLocaleType2Alt(): '_ALT_0' | '_ALT_1' | ''\n\t{\n\t\tconst weekDay = this.#replicateParams.yearlyWeekDay;\n\n\t\tif (weekDay === ReplicationYearlyWeekDayIndex.Sunday)\n\t\t{\n\t\t\treturn '_ALT_1';\n\t\t}\n\n\t\tif (weekDay === ReplicationYearlyWeekDayIndex.Wednesday\n\t\t\t|| weekDay === ReplicationYearlyWeekDayIndex.Saturday\n\t\t\t|| weekDay === ReplicationYearlyWeekDayIndex.Friday)\n\t\t{\n\t\t\treturn '_ALT_0';\n\t\t}\n\n\t\treturn '';\n\t}\n}\n","import { Type } from 'main.core';\nimport { DateTimeFormat, Timezone } from 'main.date';\nimport { timezone } from 'tasks.v2.lib.timezone';\nimport { calendar } from 'tasks.v2.lib.calendar';\n\nexport class TimeStringConverter\n{\n\tstatic format(timestamp: number): string\n\t{\n\t\treturn DateTimeFormat.format(\n\t\t\tDateTimeFormat.getFormat('SHORT_TIME_FORMAT'),\n\t\t\t(timestamp + timezone.getOffset(timestamp)) / 1000,\n\t\t);\n\t}\n\n\tstatic parseServerTime(serverTimeString: string): string\n\t{\n\t\treturn Type.isStringFilled(serverTimeString)\n\t\t\t? serverTimeString\n\t\t\t: calendar.dayStartTime\n\t\t;\n\t}\n\n\tstatic applyTimeToDate(date: Date, timeString: string): Date\n\t{\n\t\tconst [hours, minutes] = timeString.split(':');\n\t\tdate.setHours(parseInt(hours, 10), parseInt(minutes, 10), 0, 0);\n\n\t\treturn date;\n\t}\n\n\tstatic convertTsToServerTimeString(browserTs: number): string\n\t{\n\t\tconst serverTs = Timezone.BrowserTime.toServer(browserTs / 1000);\n\n\t\treturn DateTimeFormat.format('H:i', serverTs);\n\t}\n}\n","import { Loc } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\n\nimport { ReplicationPeriod, ReplicationRepeatTill } from 'tasks.v2.const';\nimport type { TaskReplicateParams } from 'tasks.v2.model.tasks';\n\nimport { PeriodRuleDailyGenerator } from './period-rule-daily-generator';\nimport { PeriodRuleWeeklyGenerator } from './period-rule-weekly-generator';\nimport { PeriodRuleMonthlyGenerator } from './period-rule-monthly-generator';\nimport { PeriodRuleYearlyGenerator } from './period-rule-yearly-generator';\nimport { TimeStringConverter } from './time-string-converter';\nimport type { PeriodRuleGenerator } from '../types';\n\nexport class ReplicateRuleGenerator\n{\n\t#replicateParams: TaskReplicateParams;\n\t#periodRuleGenerator: PeriodRuleGenerator;\n\n\tconstructor(replicateParams: TaskReplicateParams)\n\t{\n\t\tthis.#replicateParams = replicateParams;\n\t\tthis.#setPeriodRuleGenerator(replicateParams.period);\n\t}\n\n\t#setPeriodRuleGenerator(period: $Values<typeof ReplicationPeriod>): void\n\t{\n\t\tswitch (period)\n\t\t{\n\t\t\tcase ReplicationPeriod.Weekly:\n\t\t\t{\n\t\t\t\tthis.#periodRuleGenerator = new PeriodRuleWeeklyGenerator(this.#replicateParams);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase ReplicationPeriod.Monthly:\n\t\t\t{\n\t\t\t\tthis.#periodRuleGenerator = new PeriodRuleMonthlyGenerator(this.#replicateParams);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase ReplicationPeriod.Yearly:\n\t\t\t{\n\t\t\t\tthis.#periodRuleGenerator = new PeriodRuleYearlyGenerator(this.#replicateParams);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t{\n\t\t\t\tthis.#periodRuleGenerator = new PeriodRuleDailyGenerator(this.#replicateParams);\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerate(): string\n\t{\n\t\treturn [\n\t\t\tthis.#periodRuleGenerator.generate(),\n\t\t\tthis.#getStartTimeRule(),\n\t\t\tthis.#getEndRule(),\n\t\t].join(' ');\n\t}\n\n\t#getStartTimeRule(): string\n\t{\n\t\tconst timeTs = this.#replicateParams.startTs;\n\n\t\treturn Loc.getMessage('TASKS_V2_REPLICATION_START_TIME', {\n\t\t\t'#TIME#': TimeStringConverter.format(timeTs),\n\t\t});\n\t}\n\n\t#getEndRule(): string\n\t{\n\t\tconst repeatTill = this.#replicateParams.repeatTill;\n\n\t\tif (repeatTill === ReplicationRepeatTill.Times)\n\t\t{\n\t\t\tconst times = this.#replicateParams.times;\n\n\t\t\treturn Loc.getMessagePlural(\n\t\t\t\t'TASKS_V2_REPLICATION_END_AFTER_REPETITIONS',\n\t\t\t\ttimes,\n\t\t\t\t{\n\t\t\t\t\t'#COUNT#': times,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tif (repeatTill === ReplicationRepeatTill.Date && this.#replicateParams.endTs)\n\t\t{\n\t\t\treturn Loc.getMessage(\n\t\t\t\t'TASKS_V2_REPLICATION_END_DATE',\n\t\t\t\t{\n\t\t\t\t\t'#DATE#': DateTimeFormat.format('d.m.Y', new Date(this.#replicateParams.endTs)),\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn '';\n\t}\n}\n","import { TextMd } from 'ui.system.typography.vue';\n\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { ReplicateRuleGenerator } from '../../lib';\n\n// @vue/component\nexport const ReplicationContentState = {\n\tname: 'ReplicationContentState',\n\tcomponents: {\n\t\tHoverPill,\n\t\tTextMd,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisTemplate: {},\n\t},\n\tsetup(): { task: TaskModel } {},\n\tcomputed: {\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.isTemplate || !this.task.rights.edit;\n\t\t},\n\t\truleFormatted(): string\n\t\t{\n\t\t\treturn new ReplicateRuleGenerator(this.task.replicateParams).generate();\n\t\t},\n\t},\n\tmethods: {\n\t\tdontReplicate(): void\n\t\t{\n\t\t\tvoid taskService.update(this.taskId, {\n\t\t\t\treplicate: false,\n\t\t\t\treplicateParams: this.task.replicateParams,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<HoverPill :readonly withClear textOnly noOffset style=\"width: auto\" @clear=\"dontReplicate\">\n\t\t\t<TextMd>{{ ruleFormatted }}</TextMd>\n\t\t</HoverPill>\n\t`,\n};\n","import { TextSm } from 'ui.system.typography.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { FieldAdd } from 'tasks.v2.component.elements.field-add';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { ReplicationContentState } from './replication-content-state';\nimport './replication-content.css';\n\n// @vue/component\nexport const ReplicationContent = {\n\tname: 'ReplicationContent',\n\tcomponents: {\n\t\tReplicationContentState,\n\t\tTextSm,\n\t\tFieldAdd,\n\t},\n\tinject: {\n\t\ttask: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-wrapper\">\n\t\t\t<div class=\"tasks-field-replication-title\">\n\t\t\t\t<TextSm style=\"color: var(--ui-color-base-3)\">{{ loc('TASKS_V2_REPLICATION_TITLE') }}</TextSm>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-field-replication-content\">\n\t\t\t\t<ReplicationContentState v-if=\"task.replicate\"/>\n\t\t\t\t<FieldAdd v-else :icon=\"Outline.REPEAT\"/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc, Type } from 'main.core';\n\nimport { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { BInput, InputDesign, InputSize } from 'ui.system.input.vue';\nimport { TextXs } from 'ui.system.typography.vue';\n\nimport { ReplicationPeriod } from 'tasks.v2.const';\nimport { Checkbox as UiCheckbox } from 'tasks.v2.component.elements.checkbox';\n\nimport './interval.css';\n\n// @vue/component\nexport const ReplicationInterval = {\n\tname: 'ReplicationInterval',\n\tcomponents: {\n\t\tRichLoc,\n\t\tBInput,\n\t\tTextXs,\n\t\tUiCheckbox,\n\t},\n\tprops: {\n\t\tinterval: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tuseInterval: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tperiod: {\n\t\t\ttype: String,\n\t\t\tdefault: ReplicationPeriod.Daily,\n\t\t\tvalidator: (value: string) => {\n\t\t\t\treturn [ReplicationPeriod.Daily, ReplicationPeriod.Weekly, ReplicationPeriod.Monthly].includes(value);\n\t\t\t},\n\t\t},\n\t},\n\temits: ['update:interval', 'update:useInterval'],\n\tsetup(): { InputDesign: typeof InputDesign, InputSize: typeof InputSize }\n\t{\n\t\treturn {\n\t\t\tInputDesign,\n\t\t\tInputSize,\n\t\t};\n\t},\n\tdata(): { prevInterval: number }\n\t{\n\t\treturn {\n\t\t\tprevInterval: this.interval,\n\t\t};\n\t},\n\tcomputed: {\n\t\tuseIntervalValue: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.useInterval;\n\t\t\t},\n\t\t\tset(value: boolean): void\n\t\t\t{\n\t\t\t\tthis.$emit('update:useInterval', value);\n\t\t\t},\n\t\t},\n\t\tintervalValue: {\n\t\t\tget(): string\n\t\t\t{\n\t\t\t\treturn this.interval?.toString() || '';\n\t\t\t},\n\t\t\tset(value: ?string = ''): void\n\t\t\t{\n\t\t\t\tlet interval = parseInt(value.replaceAll(/\\D/g, ''), 10) ?? 0;\n\t\t\t\tif (!Type.isInteger(interval) || interval < 1)\n\t\t\t\t{\n\t\t\t\t\tinterval = this.prevInterval;\n\t\t\t\t}\n\n\t\t\t\tthis.prevInterval = interval;\n\t\t\t\tthis.$emit('update:interval', interval);\n\t\t\t},\n\t\t},\n\t\tintervalPeriod(): string\n\t\t{\n\t\t\tconst getMess = (period: $Values<typeof ReplicationPeriod>) => {\n\t\t\t\tswitch (period)\n\t\t\t\t{\n\t\t\t\t\tcase ReplicationPeriod.Weekly:\n\t\t\t\t\t\treturn 'TASKS_V2_REPLICATION_SETTINGS_WEEK';\n\t\t\t\t\tcase ReplicationPeriod.Monthly:\n\t\t\t\t\t\treturn 'TASKS_V2_REPLICATION_SETTINGS_MONTH';\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn 'TASKS_V2_REPLICATION_SETTINGS_DAY';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn Loc.getMessagePlural(getMess(this.period), this.interval);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-replication-sheet-action-row\" :class=\"{'--active': useInterval}\">\n\t\t\t<UiCheckbox :checked=\"useIntervalValue\" @click=\"useIntervalValue = !useInterval\"/>\n\t\t\t<RichLoc\n\t\t\t\tclass=\"tasks-field-replication-row --text\"\n\t\t\t\t:text=\"loc('TASKS_V2_REPLICATION_SETTINGS_INTERVAL')\"\n\t\t\t\tplaceholder=\"[interval/]\"\n\t\t\t>\n\t\t\t\t<template #interval>\n\t\t\t\t\t<RichLoc class=\"tasks-field-replication-row\" :text=\"intervalPeriod\" placeholder=\"[value/]\">\n\t\t\t\t\t\t<template #value>\n\t\t\t\t\t\t\t<BInput\n\t\t\t\t\t\t\t\tv-model=\"intervalValue\"\n\t\t\t\t\t\t\t\t:size=\"InputSize.Sm\"\n\t\t\t\t\t\t\t\t:design=\"useInterval ? InputDesign.Grey : InputDesign.Disabled\"\n\t\t\t\t\t\t\t\t:disabled=\"!useInterval\"\n\t\t\t\t\t\t\t\tstyle=\"width: 5em; padding-bottom: 0;\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</RichLoc>\n\t\t\t\t</template>\n\t\t\t</RichLoc>\n\t\t\t<div class=\"tasks-field-replication-row-grow\"></div>\n\t\t\t<slot name=\"hint\"/>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { markRaw } from 'ui.vue3';\n\nimport { ReplicationPeriod } from 'tasks.v2.const';\nimport { QuestionMark } from 'tasks.v2.component.elements.question-mark';\n\nimport { ReplicationInterval } from '../interval/interval';\n\n// @vue/component\nexport const ReplicationSettingsDay = {\n\tname: 'ReplicationSettingsDay',\n\tcomponents: {\n\t\tQuestionMark,\n\t\tReplicationInterval,\n\t},\n\tinject: {\n\t\treplicateParams: {},\n\t},\n\temits: ['update'],\n\tcomputed: {\n\t\tperiod(): string\n\t\t{\n\t\t\treturn markRaw(ReplicationPeriod.Daily);\n\t\t},\n\t\tuseInterval: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.replicateParams.everyDay > 0;\n\t\t\t},\n\t\t\tset(useInterval: boolean): void\n\t\t\t{\n\t\t\t\tthis.$emit('update', { everyDay: useInterval ? 1 : null });\n\t\t\t},\n\t\t},\n\t\tinterval: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.replicateParams.everyDay || 1;\n\t\t\t},\n\t\t\tset(value: number): void\n\t\t\t{\n\t\t\t\tthis.$emit('update', { everyDay: value });\n\t\t\t},\n\t\t},\n\t\thintText(): string\n\t\t{\n\t\t\treturn Loc.getMessagePlural(\n\t\t\t\t'TASKS_V2_REPLICATION_SETTINGS_DAY_HINT',\n\t\t\t\tthis.interval,\n\t\t\t\t{\n\t\t\t\t\t'#COUNT#': this.interval,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tmonthPeriod(): string\n\t\t{\n\t\t\treturn markRaw(ReplicationPeriod.Monthly);\n\t\t},\n\t\tuseMonthInterval: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.replicateParams.dailyMonthInterval > 0;\n\t\t\t},\n\t\t\tset(useInterval: boolean): void\n\t\t\t{\n\t\t\t\tthis.$emit('update', { dailyMonthInterval: useInterval ? 1 : null });\n\t\t\t},\n\t\t},\n\t\tmonthInterval: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.replicateParams.dailyMonthInterval || 1;\n\t\t\t},\n\t\t\tset(value: number): void\n\t\t\t{\n\t\t\t\tthis.$emit('update', { dailyMonthInterval: value });\n\t\t\t},\n\t\t},\n\t\tmonthHintText(): string\n\t\t{\n\t\t\treturn Loc.getMessagePlural(\n\t\t\t\t'TASKS_V2_REPLICATION_SETTINGS_MONTH_HINT',\n\t\t\t\tthis.monthInterval,\n\t\t\t\t{\n\t\t\t\t\t'#COUNT#': this.monthInterval,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-replication-sheet-replication-settings-day tasks-field-replication-sheet__stack\">\n\t\t\t<ReplicationInterval\n\t\t\t\tv-model:useInterval=\"useInterval\"\n\t\t\t\tv-model:interval=\"interval\"\n\t\t\t\t:period\n\t\t\t>\n\t\t\t\t<template #hint>\n\t\t\t\t\t<QuestionMark\n\t\t\t\t\t\tclass=\"tasks-replication-sheet-action-row__hint\"\n\t\t\t\t\t\t:hintText\n\t\t\t\t\t\t:hintMaxWidth=\"260\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</ReplicationInterval>\n\t\t\t<ReplicationInterval\n\t\t\t\tv-model:useInterval=\"useMonthInterval\"\n\t\t\t\tv-model:interval=\"monthInterval\"\n\t\t\t\t:period=\"monthPeriod\"\n\t\t\t>\n\t\t\t\t<template #hint>\n\t\t\t\t\t<QuestionMark\n\t\t\t\t\t\tclass=\"tasks-replication-sheet-action-row__hint\"\n\t\t\t\t\t\t:hintText=\"monthHintText\"\n\t\t\t\t\t\t:hintMaxWidth=\"260\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</ReplicationInterval>\n\t\t</div>\n\t`,\n};\n","import { DateTimeFormat } from 'main.date';\nimport { TextXs } from 'ui.system.typography.vue';\n\nimport { Checkbox as UiCheckbox } from 'tasks.v2.component.elements.checkbox';\nimport { calendar } from 'tasks.v2.lib.calendar';\n\nimport './replication-settings-week-days-list.css';\n\nconst week = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nconst weekValues = {\n\tMon: 1,\n\tTue: 2,\n\tWed: 3,\n\tThu: 4,\n\tFri: 5,\n\tSat: 6,\n\tSun: 7,\n};\n\n// @vue/component\nexport const ReplicationSettingsWeekDaysList = {\n\tname: 'ReplicationSettingsWeekDaysList',\n\tcomponents: {\n\t\tUiCheckbox,\n\t\tTextXs,\n\t},\n\tprops: {\n\t\tselectedDays: {\n\t\t\t/** @type{number[]} */\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:selectedDays'],\n\tcomputed: {\n\t\tweekDays(): string[]\n\t\t{\n\t\t\tconst weekIndices = { SU: 0, MO: 1, TU: 2, WE: 3, TH: 4, FR: 5, SA: 6 };\n\t\t\tconst weekStartIndex = weekIndices[calendar.weekStart];\n\n\t\t\treturn [week.slice(weekStartIndex), week.slice(0, weekStartIndex)].flat(1);\n\t\t},\n\t\tdayLabelMap(): { label: string, value: number }[]\n\t\t{\n\t\t\tconst format = 'D';\n\t\t\tconst todayDayIndex = new Date().getDay();\n\n\t\t\treturn this.weekDays.map((day) => {\n\t\t\t\tconst dayDate = new Date();\n\t\t\t\tconst dayDifference = (week.indexOf(day) - todayDayIndex) % 7;\n\n\t\t\t\tdayDate.setDate(dayDate.getDate() + dayDifference);\n\n\t\t\t\treturn {\n\t\t\t\t\tlabel: DateTimeFormat.format(format, dayDate),\n\t\t\t\t\tvalue: weekValues[day],\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tchangeDay(day: number): void\n\t\t{\n\t\t\tif (this.selectedDays.includes(day))\n\t\t\t{\n\t\t\t\tthis.$emit('update:selectedDays', this.selectedDays.filter((d) => d !== day));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$emit('update:selectedDays', [...this.selectedDays, day]);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-replication-sheet-action-row --weekdays\">\n\t\t\t<label\n\t\t\t\tv-for=\"day in dayLabelMap\"\n\t\t\t\t:key=\"day.value\"\n\t\t\t\tclass=\"tasks-field-replication-weekday\"\n\t\t\t\t:data-id=\"'tasks-replication-week-day-' + day.value\"\n\t\t\t>\n\t\t\t\t<UiCheckbox tag=\"span\" :checked=\"selectedDays.includes(day.value)\" @click=\"changeDay(day.value)\"/>\n\t\t\t\t<TextXs :className=\"['tasks-field-replication-weekday-text', {\n\t\t\t\t\t'--checked': selectedDays.includes(day.value),\n\t\t\t\t}]\">\n\t\t\t\t\t{{ day.label }}\n\t\t\t\t</TextXs>\n\t\t\t</label>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { markRaw } from 'ui.vue3';\n\nimport { ReplicationPeriod } from 'tasks.v2.const';\nimport { QuestionMark } from 'tasks.v2.component.elements.question-mark';\n\nimport { ReplicationInterval } from '../interval/interval';\nimport { ReplicationSettingsWeekDaysList } from './days-list/replication-settings-week-days-list';\n\nimport './replication-settings-week.css';\n\n// @vue/component\nexport const ReplicationSettingsWeek = {\n\tname: 'ReplicationSettingsWeek',\n\tcomponents: {\n\t\tQuestionMark,\n\t\tReplicationInterval,\n\t\tReplicationSettingsWeekDaysList,\n\t},\n\tinject: {\n\t\treplicateParams: {},\n\t},\n\temits: ['update'],\n\tcomputed: {\n\t\tperiod(): string\n\t\t{\n\t\t\treturn markRaw(ReplicationPeriod.Weekly);\n\t\t},\n\t\tuseInterval: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.replicateParams.everyWeek > 0;\n\t\t\t},\n\t\t\tset(useInterval: boolean): void\n\t\t\t{\n\t\t\t\tthis.$emit('update', { everyWeek: useInterval ? 1 : null });\n\t\t\t},\n\t\t},\n\t\tinterval: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.replicateParams.everyWeek || 1;\n\t\t\t},\n\t\t\tset(value: number): void\n\t\t\t{\n\t\t\t\tthis.$emit('update', { everyWeek: value });\n\t\t\t},\n\t\t},\n\t\tweekDays: {\n\t\t\tget(): number[]\n\t\t\t{\n\t\t\t\treturn this.replicateParams.weekDays;\n\t\t\t},\n\t\t\tset(weekDays: number[]): void\n\t\t\t{\n\t\t\t\tthis.$emit('update', { weekDays });\n\t\t\t},\n\t\t},\n\t\thintText(): string\n\t\t{\n\t\t\treturn Loc.getMessagePlural(\n\t\t\t\t'TASKS_V2_REPLICATION_SETTINGS_WEEK_HINT',\n\t\t\t\tthis.interval,\n\t\t\t\t{\n\t\t\t\t\t'#COUNT#': this.interval,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-replication-sheet-replication-settings-week tasks-field-replication-sheet__stack\">\n\t\t\t<ReplicationSettingsWeekDaysList v-model:selectedDays=\"weekDays\"/>\n\t\t\t<ReplicationInterval\n\t\t\t\tv-model:useInterval=\"useInterval\"\n\t\t\t\tv-model:interval=\"interval\"\n\t\t\t\t:period\n\t\t\t>\n\t\t\t\t<template #hint>\n\t\t\t\t\t<QuestionMark\n\t\t\t\t\t\t:hintText\n\t\t\t\t\t\t:hintMaxWidth=\"260\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</ReplicationInterval>\n\t\t</div>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { BInput, InputDesign, InputSize } from 'ui.system.input.vue';\nimport { TextXs } from 'ui.system.typography.vue';\n\nimport { ReplicationMonthlyType } from 'tasks.v2.const';\nimport { UiRadio } from 'tasks.v2.component.elements.radio';\n\n// @vue/component\nexport const ReplicationSettingsMonthlyByDayOfMonth = {\n\tname: 'ReplicationSettingsMonthlyByDayOfMonth',\n\tcomponents: {\n\t\tRichLoc,\n\t\tBInput,\n\t\tTextXs,\n\t\tUiRadio,\n\t},\n\tprops: {\n\t\tmonthlyType: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdayNumber: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:monthlyType', 'update:dayNumber'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tInputDesign,\n\t\t\tInputSize,\n\t\t\tReplicationMonthlyType,\n\t\t};\n\t},\n\tdata(): { prevDayNumber: number }\n\t{\n\t\treturn {\n\t\t\tprevDayNumber: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdisabled(): boolean\n\t\t{\n\t\t\treturn this.monthlyType !== ReplicationMonthlyType.Absolute;\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.prevDayNumber = this.dayNumber;\n\t},\n\tmethods: {\n\t\tupdateDayNumber(dayNumber: string = ''): void\n\t\t{\n\t\t\tlet days = parseInt(dayNumber.replaceAll(/\\D/g, ''), 10) ?? 0;\n\n\t\t\tif (!Number.isInteger(days) || days < 1 || days > 31)\n\t\t\t{\n\t\t\t\tdays = this.prevDayNumber;\n\t\t\t}\n\n\t\t\tthis.prevDayNumber = days;\n\t\t\tthis.$emit('update:dayNumber', days);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-replication-sheet-action-row --selectable\"\n\t\t\t@click.self=\"$emit('update:monthlyType', ReplicationMonthlyType.Absolute)\"\n\t\t>\n\t\t\t<UiRadio\n\t\t\t\t:modelValue=\"monthlyType\"\n\t\t\t\t:value=\"ReplicationMonthlyType.Absolute\"\n\t\t\t\tinputName=\"tasks-replication-sheet-monthly-type\"\n\t\t\t\t@update:modelValue=\"$emit('update:monthlyType', $event)\"\n\t\t\t/>\n\t\t\t<RichLoc class=\"tasks-field-replication-row\" :text=\"loc('TASKS_V2_REPLICATION_NTH_DAY')\" placeholder=\"[day/]\">\n\t\t\t\t<template #day>\n\t\t\t\t\t<BInput\n\t\t\t\t\t\t:modelValue=\"String(dayNumber)\"\n\t\t\t\t\t\t:size=\"InputSize.Sm\"\n\t\t\t\t\t\t:design=\"!disabled ? InputDesign.Grey : InputDesign.Disabled\"\n\t\t\t\t\t\t:disabled\n\t\t\t\t\t\tstretched\n\t\t\t\t\t\tstyle=\"max-width: 4em; padding-bottom: 0;\"\n\t\t\t\t\t\t@update:modelValue=\"updateDayNumber\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</RichLoc>\n\t\t</div>\n\t`,\n};\n","import { UiSelect } from 'tasks.v2.component.elements.select';\nimport { ReplicationWeekDayIndex } from 'tasks.v2.const';\nimport type { Item as SelectItem } from 'tasks.v2.component.elements.select';\n\n// @vue/component\nexport const SerialNumberSelect = {\n\tname: 'SerialNumberSelect',\n\tcomponents: {\n\t\tUiSelect,\n\t},\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tweekDay: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['update:modelValue'],\n\tcomputed: {\n\t\titemLocaleAlt(): string\n\t\t{\n\t\t\tif (this.weekDay === ReplicationWeekDayIndex.Sunday)\n\t\t\t{\n\t\t\t\treturn '_ALT_1';\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.weekDay === ReplicationWeekDayIndex.Wednesday\n\t\t\t\t|| this.weekDay === ReplicationWeekDayIndex.Friday\n\t\t\t\t|| this.weekDay === ReplicationWeekDayIndex.Saturday\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn '_ALT_0';\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\titems(): SelectItem[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{ id: 0, title: this.loc(`TASKS_V2_REPLICATION_SETTINGS_WEEK_DAY_NUMBER_FIRST${this.itemLocaleAlt}`) },\n\t\t\t\t{ id: 1, title: this.loc(`TASKS_V2_REPLICATION_SETTINGS_WEEK_DAY_NUMBER_SECOND${this.itemLocaleAlt}`) },\n\t\t\t\t{ id: 2, title: this.loc(`TASKS_V2_REPLICATION_SETTINGS_WEEK_DAY_NUMBER_THIRD${this.itemLocaleAlt}`) },\n\t\t\t\t{ id: 3, title: this.loc(`TASKS_V2_REPLICATION_SETTINGS_WEEK_DAY_NUMBER_FOURTH${this.itemLocaleAlt}`) },\n\t\t\t\t{ id: 4, title: this.loc(`TASKS_V2_REPLICATION_SETTINGS_WEEK_DAY_NUMBER_LAST${this.itemLocaleAlt}`) },\n\t\t\t];\n\t\t},\n\t\titem(): SelectItem\n\t\t{\n\t\t\treturn this.items.find(({ id }) => id === this.modelValue);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<UiSelect\n\t\t\t:item\n\t\t\t:items\n\t\t\t:disabled\n\t\t\t@update:item=\"$emit('update:modelValue', $event.id)\"\n\t\t/>\n\t`,\n};\n","import { DateTimeFormat } from 'main.date';\n\nimport { UiSelect, Item as SelectItem } from 'tasks.v2.component.elements.select';\nimport { ReplicationWeekDayIndex } from 'tasks.v2.const';\nimport { calendar } from 'tasks.v2.lib.calendar';\n\nconst week = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nconst weekValues = {\n\tMon: 0,\n\tTue: 1,\n\tWed: 2,\n\tThu: 3,\n\tFri: 4,\n\tSat: 5,\n\tSun: 6,\n};\n\n// @vue/component\nexport const WeekDaySelect = {\n\tname: 'WeekDaySelect',\n\tcomponents: {\n\t\tUiSelect,\n\t},\n\tprops: {\n\t\t/** @description day of the week number */\n\t\tmodelValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: ReplicationWeekDayIndex.Monday,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['update:modelValue'],\n\tcomputed: {\n\t\titems(): SelectItem[]\n\t\t{\n\t\t\tconst weekIndices = { SU: 0, MO: 1, TU: 2, WE: 3, TH: 4, FR: 5, SA: 6 };\n\t\t\tconst weekStartIndex = weekIndices[calendar.weekStart];\n\n\t\t\tconst format = 'l';\n\t\t\tconst todayDayIndex = new Date().getDay();\n\n\t\t\treturn [week.slice(weekStartIndex), week.slice(0, weekStartIndex)]\n\t\t\t\t.flat(1)\n\t\t\t\t.map((day) => {\n\t\t\t\t\tconst dayDate = new Date();\n\t\t\t\t\tconst dayDifference = (week.indexOf(day) - todayDayIndex) % 7;\n\n\t\t\t\t\tdayDate.setDate(dayDate.getDate() + dayDifference);\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: weekValues[day],\n\t\t\t\t\t\ttitle: DateTimeFormat.format(format, dayDate),\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t},\n\t\titem(): SelectItem\n\t\t{\n\t\t\treturn this.items.find(({ id }) => id === this.modelValue);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<UiSelect\n\t\t\t:item\n\t\t\t:items\n\t\t\t:disabled\n\t\t\t@update:item=\"$emit('update:modelValue', $event.id)\"\n\t\t/>\n\t`,\n};\n","import { ReplicationMonthlyType } from 'tasks.v2.const';\nimport { UiRadio } from 'tasks.v2.component.elements.radio';\nimport { UiSelect } from 'tasks.v2.component.elements.select';\n\nimport { SerialNumberSelect } from '../../components/serial-number-select';\nimport { WeekDaySelect } from '../../components/week-day-select';\n\n// @vue/component\nexport const ReplicationSettingsMonthlyByDayOfWeek = {\n\tname: 'ReplicationSettingsMonthlyByDayOfWeek',\n\tcomponents: {\n\t\tSerialNumberSelect,\n\t\tUiRadio,\n\t\tUiSelect,\n\t\tWeekDaySelect,\n\t},\n\tprops: {\n\t\tmonthlyType: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tweekDay: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tweekDayNumber: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:monthlyType', 'update:weekDayNumber', 'update:weekDay'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tReplicationMonthlyType,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdisabled(): boolean\n\t\t{\n\t\t\treturn this.monthlyType !== ReplicationMonthlyType.Relative;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-replication-sheet-action-row --selectable\"\n\t\t\t@click.self=\"$emit('update:monthlyType', ReplicationMonthlyType.Relative)\"\n\t\t>\n\t\t\t<UiRadio\n\t\t\t\t:modelValue=\"monthlyType\"\n\t\t\t\t:value=\"ReplicationMonthlyType.Relative\"\n\t\t\t\tinputName=\"tasks-replication-sheet-monthly-type\"\n\t\t\t\t@update:modelValue=\"$emit('update:monthlyType', $event)\"\n\t\t\t/>\n\t\t\t<SerialNumberSelect\n\t\t\t\t:modelValue=\"weekDayNumber\"\n\t\t\t\t:weekDay\n\t\t\t\t:disabled\n\t\t\t\t@update:modelValue=\"$emit('update:weekDayNumber', $event)\"\n\t\t\t/>\n\t\t\t<WeekDaySelect\n\t\t\t\t:modelValue=\"weekDay\"\n\t\t\t\t:disabled\n\t\t\t\t@update:modelValue=\"$emit('update:weekDay', $event)\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { BInput, InputDesign, InputSize } from 'ui.system.input.vue';\nimport { markRaw } from 'ui.vue3';\n\nimport {\n\tReplicationMonthlyType,\n\tReplicationPeriod,\n\tReplicationWeekDayNum,\n\tReplicationWeekDayIndex,\n} from 'tasks.v2.const';\nimport { QuestionMark } from 'tasks.v2.component.elements.question-mark';\nimport { UiRadio } from 'tasks.v2.component.elements.radio';\nimport type { TaskReplicateParams } from 'tasks.v2.model.tasks';\n\nimport { ReplicationSettingsMonthlyByDayOfMonth } from './monthly-by-day-of-month/repllication-settings-monthly-by-day-of-month';\nimport { ReplicationSettingsMonthlyByDayOfWeek } from './monthly-by-day-of-week/replication-settings-monthly-by-day-of-week';\nimport { ReplicationInterval } from '../interval/interval';\nimport './replication-settings-month.css';\n\n// @vue/component\nexport const ReplicationSettingsMonth = {\n\tname: 'ReplicationSettingsMonth',\n\tcomponents: {\n\t\tBInput,\n\t\tReplicationInterval,\n\t\tReplicationSettingsMonthlyByDayOfMonth,\n\t\tReplicationSettingsMonthlyByDayOfWeek,\n\t\tQuestionMark,\n\t\tUiRadio,\n\t},\n\tinject: {\n\t\treplicateParams: {},\n\t},\n\temits: ['update'],\n\tsetup(): { InputDesign: typeof InputDesign, InputSize: typeof InputSize, replicateParams: TaskReplicateParams }\n\t{\n\t\treturn {\n\t\t\tInputDesign,\n\t\t\tInputSize,\n\t\t};\n\t},\n\tdata(): { dayNumber: number, day: string }\n\t{\n\t\treturn {\n\t\t\tdayNumber: 1,\n\t\t\tday: 'mon',\n\t\t};\n\t},\n\tcomputed: {\n\t\tperiod(): string\n\t\t{\n\t\t\treturn markRaw(ReplicationPeriod.Monthly);\n\t\t},\n\t\tmonthlyMonthNum(): number | null\n\t\t{\n\t\t\treturn this.monthlyType === ReplicationMonthlyType.Absolute\n\t\t\t\t? this.replicateParams.monthlyMonthNum1\n\t\t\t\t: this.replicateParams.monthlyMonthNum2;\n\t\t},\n\t\tuseInterval: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.monthlyMonthNum > 0;\n\t\t\t},\n\t\t\tset(useInterval: boolean): void\n\t\t\t{\n\t\t\t\tthis.updateMonthlyMonthNum(useInterval ? 1 : null);\n\t\t\t},\n\t\t},\n\t\tinterval: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.monthlyMonthNum || 1;\n\t\t\t},\n\t\t\tset(value: number): void\n\t\t\t{\n\t\t\t\tthis.updateMonthlyMonthNum(value);\n\t\t\t},\n\t\t},\n\t\tmonthlyType: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.replicateParams.monthlyType;\n\t\t\t},\n\t\t\tset(type: number): void\n\t\t\t{\n\t\t\t\tconst prevValue = this.monthlyType;\n\n\t\t\t\tthis.update({ monthlyType: type });\n\n\t\t\t\tif (prevValue !== type)\n\t\t\t\t{\n\t\t\t\t\tthis.updateFieldsByMonthlyType(type);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tmonthlyDayNum: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.replicateParams.monthlyDayNum || 1;\n\t\t\t},\n\t\t\tset(value: number): void\n\t\t\t{\n\t\t\t\tthis.update({ monthlyDayNum: value });\n\t\t\t},\n\t\t},\n\t\tmonthlyWeekDay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.replicateParams.monthlyWeekDay ?? ReplicationWeekDayIndex.Monday;\n\t\t\t},\n\t\t\tset(value: number | null): void\n\t\t\t{\n\t\t\t\tthis.update({ monthlyWeekDay: value });\n\t\t\t},\n\t\t},\n\t\tmonthlyWeekDayNum: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.replicateParams.monthlyWeekDayNum ?? 0;\n\t\t\t},\n\t\t\tset(value: number | null): void\n\t\t\t{\n\t\t\t\tthis.update({ monthlyWeekDayNum: value });\n\t\t\t},\n\t\t},\n\t\thintText(): string\n\t\t{\n\t\t\treturn Loc.getMessagePlural(\n\t\t\t\t'TASKS_V2_REPLICATION_SETTINGS_MONTH_HINT',\n\t\t\t\tthis.interval,\n\t\t\t\t{\n\t\t\t\t\t'#COUNT#': this.interval,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\tmethods: {\n\t\tupdate(params: Partial<TaskReplicateParams>): void\n\t\t{\n\t\t\tthis.$emit('update', params);\n\t\t},\n\t\tupdateMonthlyMonthNum(monthlyMonthNum: number | null): void\n\t\t{\n\t\t\tif (this.monthlyType === ReplicationMonthlyType.Absolute)\n\t\t\t{\n\t\t\t\tthis.update({ monthlyMonthNum1: monthlyMonthNum });\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.update({ monthlyMonthNum2: monthlyMonthNum });\n\t\t\t}\n\t\t},\n\t\tupdateFieldsByMonthlyType(monthlyType: number): void\n\t\t{\n\t\t\tconst patch: Partial<TaskReplicateParams> = {};\n\n\t\t\tif (monthlyType === ReplicationMonthlyType.Absolute)\n\t\t\t{\n\t\t\t\tpatch.monthlyWeekDay = null;\n\t\t\t\tpatch.monthlyWeekDayNum = null;\n\t\t\t\tpatch.monthlyMonthNum1 = this.replicateParams.monthlyMonthNum2;\n\t\t\t\tpatch.monthlyMonthNum2 = null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpatch.monthlyDayNum = null;\n\t\t\t\tpatch.monthlyMonthNum2 = this.replicateParams.monthlyMonthNum1;\n\t\t\t\tpatch.monthlyMonthNum1 = null;\n\t\t\t\tpatch.monthlyWeekDay = ReplicationWeekDayIndex.Monday;\n\t\t\t\tpatch.monthlyWeekDayNum = ReplicationWeekDayNum.First;\n\t\t\t}\n\n\t\t\tthis.update(patch);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-sheet__stack\">\n\t\t\t<ReplicationSettingsMonthlyByDayOfMonth\n\t\t\t\tv-model:monthlyType=\"monthlyType\"\n\t\t\t\tv-model:dayNumber=\"monthlyDayNum\"\n\t\t\t/>\n\t\t\t<ReplicationSettingsMonthlyByDayOfWeek\n\t\t\t\tv-model:monthlyType=\"monthlyType\"\n\t\t\t\tv-model:weekDay=\"monthlyWeekDay\"\n\t\t\t\tv-model:weekDayNumber=\"monthlyWeekDayNum\"\n\t\t\t/>\n\t\t\t<ReplicationInterval\n\t\t\t\tv-model:useInterval=\"useInterval\"\n\t\t\t\tv-model:interval=\"interval\"\n\t\t\t\t:period\n\t\t\t>\n\t\t\t\t<template #hint>\n\t\t\t\t\t<QuestionMark\n\t\t\t\t\t\tclass=\"tasks-replication-sheet-action-row__hint\"\n\t\t\t\t\t\t:hintText\n\t\t\t\t\t\t:hintMaxWidth=\"260\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</ReplicationInterval>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\n\nimport { UiSelect } from 'tasks.v2.component.elements.select';\nimport type { Item as SelectItem, MenuOptions } from 'tasks.v2.component.elements.select';\n\n// @vue/component\nexport const MonthSelect = {\n\tname: 'MonthSelect',\n\tcomponents: {\n\t\tUiSelect,\n\t},\n\tprops: {\n\t\t/** @description Month index */\n\t\tmodelValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['update:modelValue'],\n\tcomputed: {\n\t\titems(): SelectItem[]\n\t\t{\n\t\t\treturn Array.from({ length: 12 }, (_, i) => ({\n\t\t\t\tid: i + 1,\n\t\t\t\ttitle: Text.capitalize(DateTimeFormat.format('F', new Date().setMonth(i) / 1000)),\n\t\t\t}));\n\t\t},\n\t\titem(): SelectItem\n\t\t{\n\t\t\treturn this.items.find(({ id }) => id === this.modelValue);\n\t\t},\n\t\tmenuOptions(): MenuOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\theight: 254,\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<UiSelect\n\t\t\t:item\n\t\t\t:items\n\t\t\t:disabled\n\t\t\t:menuOptions\n\t\t\t@update:item=\"$emit('update:modelValue', $event.id)\"\n\t\t/>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { BInput, InputDesign, InputSize } from 'ui.system.input.vue';\n\nimport { ReplicationYearlyType } from 'tasks.v2.const';\nimport { UiRadio } from 'tasks.v2.component.elements.radio';\n\nimport { MonthSelect } from '../../components/month-select';\n\n// @vue/component\nexport const ReplicationSettingsYearAbsoluteDate = {\n\tname: 'ReplicationSettingsYearAbsoluteDate',\n\tcomponents: {\n\t\tBInput,\n\t\tUiRadio,\n\t\tMonthSelect,\n\t},\n\tprops: {\n\t\tyearlyType: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tyearlyDayNumber: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tyearlyMonth: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:yearlyType', 'update:yearlyDayNumber', 'update:yearlyMonth'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tInputDesign,\n\t\t\tInputSize,\n\t\t\tReplicationYearlyType,\n\t\t};\n\t},\n\tdata(): { prevDayNumber: number }\n\t{\n\t\treturn {\n\t\t\tprevDayNumber: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdisabled(): boolean\n\t\t{\n\t\t\treturn this.yearlyType !== ReplicationYearlyType.Absolute;\n\t\t},\n\t\tdayNumber: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.yearlyDayNumber;\n\t\t\t},\n\t\t\tset(value: number): void\n\t\t\t{\n\t\t\t\tthis.$emit('update:yearlyDayNumber', value);\n\t\t\t},\n\t\t},\n\t\tmonth: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.yearlyMonth;\n\t\t\t},\n\t\t\tset(value: number): void\n\t\t\t{\n\t\t\t\tthis.$emit('update:yearlyMonth', value);\n\t\t\t},\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.prevDayNumber = this.dayNumber;\n\t},\n\tmethods: {\n\t\tupdateDayNumber(value: string = ''): void\n\t\t{\n\t\t\tlet day = parseInt(value.replaceAll(/\\D/g, ''), 10) ?? 0;\n\n\t\t\tif (!Type.isInteger(day) || day < 1 || day > 31)\n\t\t\t{\n\t\t\t\tday = this.prevDayNumber;\n\t\t\t}\n\n\t\t\tthis.dayNumber = day;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-replication-sheet-action-row --selectable\"\n\t\t\t@click.self=\"$emit('update:yearlyType', ReplicationYearlyType.Absolute)\"\n\t\t>\n\t\t\t<UiRadio\n\t\t\t\ttag=\"label\"\n\t\t\t\t:modelValue=\"yearlyType\"\n\t\t\t\t:value=\"ReplicationYearlyType.Absolute\"\n\t\t\t\tinputName=\"tasks-replication-sheet-yearly-type\"\n\t\t\t\t@update:modelValue=\"$emit('update:yearlyType', $event)\"\n\t\t\t/>\n\t\t\t<BInput\n\t\t\t\t:modelValue=\"dayNumber.toString()\"\n\t\t\t\t:size=\"InputSize.Sm\"\n\t\t\t\t:design=\"disabled ? InputDesign.Disabled : InputDesign.Grey\"\n\t\t\t\t:disabled\n\t\t\t\tstretched\n\t\t\t\tstyle=\"max-width: 4em;\"\n\t\t\t\t@update:modelValue=\"updateDayNumber\"\n\t\t\t/>\n\t\t\t<MonthSelect v-model=\"month\" :disabled/>\n\t\t</div>\n\t`,\n};\n","import { ReplicationYearlyType } from 'tasks.v2.const';\nimport { UiRadio } from 'tasks.v2.component.elements.radio';\n\nimport { SerialNumberSelect } from '../../components/serial-number-select';\nimport { MonthSelect } from '../../components/month-select';\nimport { WeekDaySelect } from '../../components/week-day-select';\n\n// @vue/component\nexport const ReplicationSettingsYearRelativeDate = {\n\tname: 'ReplicationSettingsYearRelativeDate',\n\tcomponents: {\n\t\tMonthSelect,\n\t\tSerialNumberSelect,\n\t\tUiRadio,\n\t\tWeekDaySelect,\n\t},\n\tprops: {\n\t\tyearlyType: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tyearlyWeekDay: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tyearlyWeekDayNum: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tyearlyMonth: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:yearlyType', 'update:yearlyWeekDay', 'update:yearlyWeekDayNum', 'update:yearlyMonth'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tReplicationYearlyType,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdisabled(): boolean\n\t\t{\n\t\t\treturn this.yearlyType !== ReplicationYearlyType.Relative;\n\t\t},\n\t\tweekDay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.yearlyWeekDay;\n\t\t\t},\n\t\t\tset(weekDay: number): void\n\t\t\t{\n\t\t\t\tthis.$emit('update:yearlyWeekDay', weekDay);\n\t\t\t},\n\t\t},\n\t\tweekDayNum: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.yearlyWeekDayNum;\n\t\t\t},\n\t\t\tset(weekDayNum: number): void\n\t\t\t{\n\t\t\t\tthis.$emit('update:yearlyWeekDayNum', weekDayNum);\n\t\t\t},\n\t\t},\n\t\tmonth: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.yearlyMonth;\n\t\t\t},\n\t\t\tset(yearlyMonth: number): void\n\t\t\t{\n\t\t\t\tthis.$emit('update:yearlyMonth', yearlyMonth);\n\t\t\t},\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-replication-sheet-action-row --selectable\"\n\t\t\t@click.self=\"$emit('update:yearlyType', ReplicationYearlyType.Relative)\"\n\t\t>\n\t\t\t<UiRadio\n\t\t\t\ttag=\"label\"\n\t\t\t\t:modelValue=\"yearlyType\"\n\t\t\t\t:value=\"ReplicationYearlyType.Relative\"\n\t\t\t\tinputName=\"tasks-replication-sheet-yearly-type\"\n\t\t\t\t@update:modelValue=\"$emit('update:yearlyType', $event)\"\n\t\t\t/>\n\t\t\t<SerialNumberSelect\n\t\t\t\tv-model=\"weekDayNum\"\n\t\t\t\t:weekDay\n\t\t\t\t:disabled\n\t\t\t\tstyle=\"max-width: 9em\"\n\t\t\t/>\n\t\t\t<WeekDaySelect v-model=\"weekDay\" :disabled style=\"max-width: 11em\"/>\n\t\t\t<MonthSelect v-model=\"month\" :disabled style=\"max-width: 11em\"/>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\n\nimport {\n\tReplicationWeekDayNum,\n\tReplicationYearlyType,\n\tReplicationYearlyWeekDayIndex,\n} from 'tasks.v2.const';\nimport type { TaskReplicateParams } from 'tasks.v2.model.tasks';\n\nimport { ReplicationSettingsYearAbsoluteDate } from './absolute-date/absolute-date';\nimport { ReplicationSettingsYearRelativeDate } from './relative-date/relative-date';\n\n// @vue/component\nexport const ReplicationSettingsYear = {\n\tname: 'ReplicationSettingsYear',\n\tcomponents: {\n\t\tReplicationSettingsYearAbsoluteDate,\n\t\tReplicationSettingsYearRelativeDate,\n\t},\n\tinject: {\n\t\treplicateParams: {},\n\t},\n\temits: ['update'],\n\tcomputed: {\n\t\tyearlyType: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.replicateParams.yearlyType;\n\t\t\t},\n\t\t\tset(yearlyType: number): void\n\t\t\t{\n\t\t\t\tconst prevValue = this.yearlyType;\n\n\t\t\t\tthis.update({ yearlyType });\n\n\t\t\t\tif (prevValue !== this.yearlyType)\n\t\t\t\t{\n\t\t\t\t\tthis.updateByYearlyType(yearlyType);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tyearlyWeekDay: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn (this.replicateParams.yearlyWeekDay || ReplicationYearlyWeekDayIndex.Monday) - 1;\n\t\t\t},\n\t\t\tset(value: number | null): void\n\t\t\t{\n\t\t\t\tthis.update({ yearlyWeekDay: Type.isInteger(value) ? value + 1 : value });\n\t\t\t},\n\t\t},\n\t},\n\tmethods: {\n\t\tupdate(params: Partial<TaskReplicateParams>): void\n\t\t{\n\t\t\tthis.$emit('update', params);\n\t\t},\n\t\tupdateByYearlyType(yearlyType: number): void\n\t\t{\n\t\t\tif (yearlyType === ReplicationYearlyType.Absolute)\n\t\t\t{\n\t\t\t\tthis.update({\n\t\t\t\t\tyearlyWeekDay: null,\n\t\t\t\t\tyearlyWeekDayNum: null,\n\t\t\t\t\tyearlyMonth2: null,\n\t\t\t\t\tyearlyDayNum: 1,\n\t\t\t\t\tyearlyMonth1: 1,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.update({\n\t\t\t\t\tyearlyWeekDay: ReplicationYearlyWeekDayIndex.Monday,\n\t\t\t\t\tyearlyWeekDayNum: ReplicationWeekDayNum.First,\n\t\t\t\t\tyearlyMonth2: 1,\n\t\t\t\t\tyearlyDayNum: null,\n\t\t\t\t\tyearlyMonth1: null,\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-sheet__stack\">\n\t\t\t<ReplicationSettingsYearAbsoluteDate\n\t\t\t\tv-model:yearlyType=\"yearlyType\"\n\t\t\t\t:yearlyDayNumber=\"replicateParams.yearlyDayNum || 1\"\n\t\t\t\t:yearlyMonth=\"replicateParams.yearlyMonth1 || 1\"\n\t\t\t\t@update:yearlyDayNumber=\"update({ yearlyDayNum: $event })\"\n\t\t\t\t@update:yearlyMonth=\"update({ yearlyMonth1: $event })\"\n\t\t\t/>\n\t\t\t<ReplicationSettingsYearRelativeDate\n\t\t\t\tv-model:yearlyType=\"yearlyType\"\n\t\t\t\tv-model:yearlyWeekDay=\"yearlyWeekDay\"\n\t\t\t\t:yearlyWeekDayNum=\"replicateParams.yearlyWeekDayNum || 0\"\n\t\t\t\t:yearlyMonth=\"replicateParams.yearlyMonth2 || 1\"\n\t\t\t\t@update:yearlyWeekDayNum=\"update({ yearlyWeekDayNum: $event })\"\n\t\t\t\t@update:yearlyMonth=\"update({ yearlyMonth2: $event })\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { TextMd } from 'ui.system.typography.vue';\n\nimport { ReplicationPeriod } from 'tasks.v2.const';\nimport { UiTabs } from 'tasks.v2.component.elements.ui-tabs';\nimport { ReplicateCreator } from 'tasks.v2.provider.service.task-service';\nimport type { Tab } from 'tasks.v2.component.elements.ui-tabs';\nimport type { TaskReplicateParams } from 'tasks.v2.model.tasks';\n\nimport { ReplicationSettingsDay } from './replication-settings-day/replication-settings-day';\nimport { ReplicationSettingsWeek } from './replication-settings-week/replication-settings-week';\nimport { ReplicationSettingsMonth } from './replication-settings-month/replication-settings-month';\nimport { ReplicationSettingsYear } from './replication-settings-year/replication-settings-year';\nimport './replication-settings.css';\n\ntype Period = $Values<typeof ReplicationPeriod>;\n\n// @vue/component\nexport const ReplicationSettings = {\n\tname: 'ReplicationSettings',\n\tcomponents: {\n\t\tTextMd,\n\t\tUiTabs,\n\t\tReplicationSettingsDay,\n\t\tReplicationSettingsWeek,\n\t\tReplicationSettingsMonth,\n\t\tReplicationSettingsYear,\n\t},\n\tinject: {\n\t\treplicateParams: {},\n\t},\n\temits: ['update'],\n\tcomputed: {\n\t\tperiod: {\n\t\t\tget(): Period\n\t\t\t{\n\t\t\t\treturn this.replicateParams.period;\n\t\t\t},\n\t\t\tset(period: Period): void\n\t\t\t{\n\t\t\t\tthis.$emit('update', {\n\t\t\t\t\tperiod,\n\t\t\t\t\t...this.getEmptyPrevTabData(this.replicateParams.period),\n\t\t\t\t\t...this.getDefaultTabData(period),\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.period === ReplicationPeriod.Weekly\n\t\t\t\t? this.loc('TASKS_V2_REPLICATION_SETTINGS_TITLE_ALT')\n\t\t\t\t: this.loc('TASKS_V2_REPLICATION_SETTINGS_TITLE');\n\t\t},\n\t\ttabs(): Tab<Period>[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: ReplicationPeriod.Daily,\n\t\t\t\t\ttitle: this.loc('TASKS_V2_REPLICATION_SETTINGS_TAB_DAY'),\n\t\t\t\t\tcomponent: ReplicationSettingsDay,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: ReplicationPeriod.Weekly,\n\t\t\t\t\ttitle: this.loc('TASKS_V2_REPLICATION_SETTINGS_TAB_WEEK'),\n\t\t\t\t\tcomponent: ReplicationSettingsWeek,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: ReplicationPeriod.Monthly,\n\t\t\t\t\ttitle: this.loc('TASKS_V2_REPLICATION_SETTINGS_TAB_MONTH'),\n\t\t\t\t\tcomponent: ReplicationSettingsMonth,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: ReplicationPeriod.Yearly,\n\t\t\t\t\ttitle: this.loc('TASKS_V2_REPLICATION_SETTINGS_TAB_YEAR'),\n\t\t\t\t\tcomponent: ReplicationSettingsYear,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmethods: {\n\t\tgetEmptyPrevTabData(prevPeriod: Period): Partial<TaskReplicateParams>\n\t\t{\n\t\t\tswitch (prevPeriod)\n\t\t\t{\n\t\t\t\tcase ReplicationPeriod.Daily:\n\t\t\t\t\treturn ReplicateCreator.createReplicateParamsDaily();\n\t\t\t\tcase ReplicationPeriod.Weekly:\n\t\t\t\t\treturn ReplicateCreator.createReplicateParamsWeekly();\n\t\t\t\tcase ReplicationPeriod.Monthly:\n\t\t\t\t\treturn ReplicateCreator.createReplicateParamsMonthly();\n\t\t\t\tcase ReplicationPeriod.Yearly:\n\t\t\t\t\treturn ReplicateCreator.createReplicateParamsYearly();\n\t\t\t\tdefault:\n\t\t\t\t\treturn {};\n\t\t\t}\n\t\t},\n\t\tgetDefaultTabData(period: Period): Partial<TaskReplicateParams>\n\t\t{\n\t\t\tswitch (period)\n\t\t\t{\n\t\t\t\tcase ReplicationPeriod.Daily:\n\t\t\t\t\treturn ReplicateCreator.createDefaultReplicationParamsDaily();\n\t\t\t\tcase ReplicationPeriod.Weekly:\n\t\t\t\t\treturn ReplicateCreator.createDefaultReplicationParamsWeekly();\n\t\t\t\tcase ReplicationPeriod.Monthly:\n\t\t\t\t\treturn ReplicateCreator.createDefaultReplicationParamsMonthly();\n\t\t\t\tcase ReplicationPeriod.Yearly:\n\t\t\t\t\treturn ReplicateCreator.createDefaultReplicationParamsYearly();\n\t\t\t\tdefault:\n\t\t\t\t\treturn {};\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-section\">\n\t\t\t<TextMd tag=\"div\" className=\"tasks-field-replication-row\">\n\t\t\t\t<span class=\"tasks-field-replication-secondary\">{{ title }}</span>\n\t\t\t</TextMd>\n\t\t\t<div class=\"tasks-field-replication-sheet-replication-settings-content\">\n\t\t\t\t<UiTabs\n\t\t\t\t\tv-model=\"period\"\n\t\t\t\t\t:tabs\n\t\t\t\t>\n\t\t\t\t\t<template v-slot=\"{ activeTab }\">\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"activeTab.component\"\n\t\t\t\t\t\t\t@update=\"$emit('update', $event)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</UiTabs>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text, Type } from 'main.core';\nimport { DateTimeFormat, Timezone } from 'main.date';\nimport { TimeStringConverter } from 'tasks.v2.component.fields.replication';\nimport { calendar } from 'tasks.v2.lib.calendar';\nimport { timezone } from 'tasks.v2.lib.timezone';\n\nexport class DateStringConverter\n{\n\tstatic format(timestamp: number): string\n\t{\n\t\tconst offset = timezone.getOffset(timestamp);\n\n\t\tconst today = new Date(Date.now() + offset);\n\t\tconst day = new Date(timestamp + offset);\n\n\t\tconst isToday = today.getFullYear() === day.getFullYear()\n\t\t\t&& today.getMonth() === day.getMonth()\n\t\t\t&& today.getDate() === day.getDate()\n\t\t;\n\n\t\tif (isToday)\n\t\t{\n\t\t\treturn Text.capitalize(DateTimeFormat.format('today'));\n\t\t}\n\n\t\treturn calendar.formatDate(timestamp);\n\t}\n\n\tstatic parseServerDate(serverDateString: string): Date\n\t{\n\t\tif (Type.isStringFilled(serverDateString))\n\t\t{\n\t\t\treturn DateTimeFormat.parse(serverDateString);\n\t\t}\n\n\t\tconst date = new Date();\n\t\tdate.setHours(0, 0, 0, 0);\n\n\t\treturn date;\n\t}\n\n\tstatic convertServerDateToTs(serverDate: Date, serverTime: ?string = null): number\n\t{\n\t\tif (Type.isStringFilled(serverTime))\n\t\t{\n\t\t\tTimeStringConverter.applyTimeToDate(serverDate, serverTime);\n\t\t}\n\n\t\treturn Timezone.ServerTime.toBrowser(serverDate) * 1000;\n\t}\n\n\tstatic convertTsToServerDateString(browserTs: number): string\n\t{\n\t\tconst browserDate = new Date(browserTs);\n\t\tconst serverDate = Timezone.BrowserTime.toServerDate(browserDate);\n\t\tconst serverTsAsMidnight = serverDate.setHours(0, 0, 0, 0) / 1000;\n\n\t\treturn DateTimeFormat.format(\n\t\t\tDateTimeFormat.getFormat('FORMAT_DATETIME'),\n\t\t\tserverTsAsMidnight,\n\t\t);\n\t}\n}\n","import { Text } from 'main.core';\nimport type { BaseEvent } from 'main.core.events';\n\nimport { Popup } from 'ui.vue3.components.popup';\nimport { DatePicker, DatePickerEvent } from 'ui.date-picker';\n\nimport { calendar } from 'tasks.v2.lib.calendar';\nimport { timezone } from 'tasks.v2.lib.timezone';\n\n// @vue/component\nexport const ReplicationDatepicker = {\n\tname: 'ReplicationDatepicker',\n\tcomponents: {\n\t\tPopup,\n\t},\n\tinject: {\n\t\t/** @type{number|string} */\n\t\ttaskId: {},\n\t},\n\tprops: {\n\t\tdateTs: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:dateTs', 'close'],\n\tdata(): { dateTsModel: ?number }\n\t{\n\t\treturn {\n\t\t\tdateTsModel: null,\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.datePicker = this.createDatePicker();\n\n\t\tconst date = new Date(this.dateTs + timezone.getOffset(this.dateTs));\n\t\tthis.dateTsModel = new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime();\n\t},\n\tmounted(): void\n\t{\n\t\tthis.datePicker.show();\n\t},\n\tunmounted(): void\n\t{\n\t\tthis.datePicker?.destroy();\n\t},\n\tmethods: {\n\t\tcreateDatePicker(): DatePicker\n\t\t{\n\t\t\tconst offset = timezone.getOffset(this.dateTs);\n\n\t\t\tconst picker = new DatePicker({\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tid: `tasks-replication-date-picker-${this.taskId}-${Text.getRandom()}`,\n\t\t\t\t\tbindElement: this.bindElement,\n\t\t\t\t\toffsetTop: 5,\n\t\t\t\t\toffsetLeft: -40,\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => this.$emit('close'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tselectedDates: [this.dateTs + offset],\n\t\t\t\tevents: {\n\t\t\t\t\t[DatePickerEvent.SELECT]: (event: BaseEvent) => {\n\t\t\t\t\t\tconst { date } = event.getData();\n\t\t\t\t\t\tconst dateTsModel = calendar.createDateFromUtc(date).getTime();\n\t\t\t\t\t\tthis.$emit('update:dateTs', dateTsModel - timezone.getOffset(dateTsModel));\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tpicker.getPicker('day').subscribe('onSelect', (event: BaseEvent) => {\n\t\t\t\tconst { year, month, day } = event.getData();\n\t\t\t\tconst dateTsModel = new Date(year, month, day).getTime();\n\n\t\t\t\tthis.$emit('close');\n\n\t\t\t\tthis.dateTsModel = dateTsModel;\n\t\t\t});\n\n\t\t\treturn picker;\n\t\t},\n\t},\n\ttemplate: '<div ref=\"picker\"/>',\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { TextMd } from 'ui.system.typography.vue';\nimport { Button as UiButton, AirButtonStyle, ButtonSize } from 'ui.vue3.components.button';\n\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { calendar } from 'tasks.v2.lib.calendar';\nimport { timezone } from 'tasks.v2.lib.timezone';\n\nimport { DateStringConverter } from '../../../lib/date-string-converter';\nimport { ReplicationDatepicker } from '../replication-datepicker/replication-datepicker';\nimport './replication-start.css';\n\n// @vue/component\nexport const ReplicationStart = {\n\tname: 'ReplicationStart',\n\tcomponents: {\n\t\tRichLoc,\n\t\tTextMd,\n\t\tHoverPill,\n\t\tReplicationDatepicker,\n\t\tUiButton,\n\t},\n\tinject: {\n\t\treplicateParams: {},\n\t},\n\temits: ['update'],\n\tsetup(): { AirButtonStyle: typeof AirButtonStyle, ButtonSize: typeof ButtonSize }\n\t{\n\t\treturn {\n\t\t\tAirButtonStyle,\n\t\t\tButtonSize,\n\t\t};\n\t},\n\tdata(): { isDatepickerOpened: false }\n\t{\n\t\treturn {\n\t\t\tisDatepickerOpened: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tstartTs: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.replicateParams.startTs;\n\t\t\t},\n\t\t\tset(startTs: number): void\n\t\t\t{\n\t\t\t\tthis.$emit('update', { startTs });\n\t\t\t},\n\t\t},\n\t\tstartLabel(): string\n\t\t{\n\t\t\treturn DateStringConverter.format(this.startTs);\n\t\t},\n\t},\n\tbeforeMount(): void\n\t{\n\t\tif (!this.replicateParams.startTs)\n\t\t{\n\t\t\tconst workdayStart = calendar.workdayStart;\n\t\t\tconst serverTs = new Date().setHours(workdayStart.H, workdayStart.M, 0, 0);\n\n\t\t\tthis.startTs = serverTs - timezone.getOffset(serverTs);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<TextMd tag=\"div\" className=\"tasks-field-replication-section\">\n\t\t\t<RichLoc\n\t\t\t\tclass=\"tasks-field-replication-row tasks-field-replication-secondary\"\n\t\t\t\t:text=\"loc('TASKS_V2_REPLICATION_START')\"\n\t\t\t\tplaceholder=\"[date/]\"\n\t\t\t>\n\t\t\t\t<template #date>\n\t\t\t\t\t<HoverPill textOnly noOffset ref=\"datepickerStartOpener\">\n\t\t\t\t\t\t<span class=\"tasks-field-replication-link\" @click=\"isDatepickerOpened = true\">\n\t\t\t\t\t\t\t{{ startLabel }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</HoverPill>\n\t\t\t\t\t<ReplicationDatepicker\n\t\t\t\t\t\tv-if=\"isDatepickerOpened\"\n\t\t\t\t\t\tv-model:dateTs=\"startTs\"\n\t\t\t\t\t\t:bindElement=\"$refs.datepickerStartOpener.$el\"\n\t\t\t\t\t\t@close=\"isDatepickerOpened = false\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</RichLoc>\n\t\t</TextMd>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\n\nimport { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { Button as UiButton, AirButtonStyle, ButtonSize } from 'ui.vue3.components.button';\nimport { BInput, InputDesign, InputSize } from 'ui.system.input.vue';\nimport { TextMd, TextSm, TextXs } from 'ui.system.typography.vue';\n\nimport { ReplicationRepeatTill } from 'tasks.v2.const';\nimport { calendar } from 'tasks.v2.lib.calendar';\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { UiRadio } from 'tasks.v2.component.elements.radio';\nimport type { TaskReplicateParams } from 'tasks.v2.model.tasks';\n\nimport { ReplicationDatepicker } from '../replication-datepicker/replication-datepicker';\nimport './replication-finish.css';\n\ntype RepeatTill = $Values<typeof ReplicationRepeatTill>;\n\n// @vue/component\nexport const ReplicationFinish = {\n\tname: 'ReplicationFinish',\n\tcomponents: {\n\t\tHoverPill,\n\t\tReplicationDatepicker,\n\t\tTextMd,\n\t\tTextSm,\n\t\tTextXs,\n\t\tUiButton,\n\t\tBInput,\n\t\tUiRadio,\n\t\tRichLoc,\n\t},\n\tinject: {\n\t\treplicateParams: {},\n\t},\n\temits: ['update'],\n\tsetup(): {\n\t\tAirButtonStyle: typeof AirButtonStyle,\n\t\tButtonSize: typeof ButtonSize,\n\t\tInputDesign: typeof InputDesign,\n\t\tInputSize: typeof InputSize,\n\t\tReplicationRepeatTill: typeof ReplicationRepeatTill,\n\t}\n\t{\n\t\treturn {\n\t\t\tAirButtonStyle,\n\t\t\tButtonSize,\n\t\t\tInputDesign,\n\t\t\tInputSize,\n\t\t\tReplicationRepeatTill,\n\t\t};\n\t},\n\tdata(): { prevTimes: number, isDatepickerOpened: boolean }\n\t{\n\t\treturn {\n\t\t\tisDatepickerOpened: false,\n\t\t\tprevTimes: this.replicateParams.times || 1,\n\t\t};\n\t},\n\tcomputed: {\n\t\trepeatTill: {\n\t\t\tget(): RepeatTill\n\t\t\t{\n\t\t\t\treturn this.replicateParams.repeatTill;\n\t\t\t},\n\t\t\tset(value: RepeatTill): void\n\t\t\t{\n\t\t\t\tconst prevValue = this.repeatTill;\n\n\t\t\t\tthis.update({ repeatTill: value });\n\n\t\t\t\tif (prevValue !== value)\n\t\t\t\t{\n\t\t\t\t\tthis.updateFieldsByRepeatTill(value);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tendDateTs(): number\n\t\t{\n\t\t\treturn Type.isNil(this.replicateParams.endTs)\n\t\t\t\t? (Date.now() + 5 * 24 * 60 * 60 * 1000)\n\t\t\t\t: this.replicateParams.endTs;\n\t\t},\n\t\tendDateLabel(): string\n\t\t{\n\t\t\treturn this.endDateTs\n\t\t\t\t? calendar.formatDate(this.endDateTs)\n\t\t\t\t: this.loc('TASKS_V2_REPLICATION_FINISH_DATE_UNSET');\n\t\t},\n\t},\n\tmethods: {\n\t\tupdate(params: Partial<TaskReplicateParams>): void\n\t\t{\n\t\t\tthis.$emit('update', params);\n\t\t},\n\t\tupdateTimes(value: string): void\n\t\t{\n\t\t\tlet times = parseInt(value.replaceAll(/\\D/g, ''), 10) ?? 0;\n\n\t\t\tif (!Type.isInteger(times) || times < 1)\n\t\t\t{\n\t\t\t\ttimes = this.prevTimes;\n\t\t\t}\n\n\t\t\tthis.prevTimes = times;\n\t\t\tthis.update({ times });\n\t\t},\n\t\tupdateEndDate(endTs: number): void\n\t\t{\n\t\t\tthis.update({ endTs });\n\t\t},\n\t\tupdateFieldsByRepeatTill(repeatTill: RepeatTill): void\n\t\t{\n\t\t\tif (repeatTill === ReplicationRepeatTill.Endless)\n\t\t\t{\n\t\t\t\tthis.update({\n\t\t\t\t\ttimes: null,\n\t\t\t\t\tendless: null,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (repeatTill === ReplicationRepeatTill.Times)\n\t\t\t{\n\t\t\t\tthis.prevTimes = 1;\n\t\t\t\tthis.update({\n\t\t\t\t\ttimes: 1,\n\t\t\t\t\tendDate: null,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (repeatTill === ReplicationRepeatTill.Date)\n\t\t\t{\n\t\t\t\tthis.update({\n\t\t\t\t\ttimes: null,\n\t\t\t\t\tendDate: DateTimeFormat.format('m-d-Y', (Date.now() + 5 * 24 * 60 * 60 * 1000) / 1000),\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\ttogglePopup(): void\n\t\t{\n\t\t\tthis.isDatepickerOpened = !this.isDatepickerOpened;\n\t\t},\n\t\tisRowActive(repeatTill: RepeatTill): boolean\n\t\t{\n\t\t\treturn repeatTill === this.repeatTill;\n\t\t},\n\t\thandleClickDatepickerFinishOpener(event): void\n\t\t{\n\t\t\tif (!this.isRowActive(ReplicationRepeatTill.Date))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst target = event.currentTarget;\n\t\t\tconst disabled = target.getAttribute('disabled');\n\t\t\tif (!(disabled === 'true'))\n\t\t\t{\n\t\t\t\tthis.togglePopup();\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-section\">\n\t\t\t<TextMd tag=\"div\" className=\"tasks-field-replication-row\">\n\t\t\t\t<span class=\"tasks-field-replication-secondary\">\n\t\t\t\t\t{{ loc('TASKS_V2_REPLICATION_FINISH') }}\n\t\t\t\t</span>\n\t\t\t</TextMd>\n\t\t\t<div>\n\t\t\t\t<div class=\"tasks-field-replication-sheet__stack\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"tasks-replication-sheet-action-row --selectable\"\n\t\t\t\t\t\t:class=\"{'--active': isRowActive(ReplicationRepeatTill.Endless)}\"\n\t\t\t\t\t\t@click.self=\"repeatTill = ReplicationRepeatTill.Endless\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<UiRadio\n\t\t\t\t\t\t\ttag=\"label\"\n\t\t\t\t\t\t\tv-model=\"repeatTill\"\n\t\t\t\t\t\t\t:value=\"ReplicationRepeatTill.Endless\"\n\t\t\t\t\t\t\tinputName=\"tasks-replication-sheet-finish-type\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextXs className=\"tasks-replication-sheet-action-row__text\">\n\t\t\t\t\t\t\t{{ loc('TASKS_V2_REPLICATION_FINISH_HAND') }}\n\t\t\t\t\t\t</TextXs>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"tasks-replication-sheet-action-row --selectable\"\n\t\t\t\t\t\t:class=\"{'--active': isRowActive(ReplicationRepeatTill.Times)}\"\n\t\t\t\t\t\t@click.self=\"repeatTill = ReplicationRepeatTill.Times\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<UiRadio\n\t\t\t\t\t\t\ttag=\"label\"\n\t\t\t\t\t\t\tv-model=\"repeatTill\"\n\t\t\t\t\t\t\t:value=\"ReplicationRepeatTill.Times\"\n\t\t\t\t\t\t\tinputName=\"tasks-replication-sheet-finish-type\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RichLoc\n\t\t\t\t\t\t\tclass=\"tasks-field-replication-row\"\n\t\t\t\t\t\t\t:text=\"loc('TASKS_V2_REPLICATION_AFTER_COUNT_REPETITIONS')\"\n\t\t\t\t\t\t\tplaceholder=\"[count/]\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template #count>\n\t\t\t\t\t\t\t\t<BInput\n\t\t\t\t\t\t\t\t\t:modelValue=\"String(replicateParams.times ?? '')\"\n\t\t\t\t\t\t\t\t\t:size=\"InputSize.Sm\"\n\t\t\t\t\t\t\t\t\t:design=\"isRowActive(ReplicationRepeatTill.Times) ? InputDesign.Grey : InputDesign.Disabled\"\n\t\t\t\t\t\t\t\t\t:disabled=\"!isRowActive(ReplicationRepeatTill.Times)\"\n\t\t\t\t\t\t\t\t\tstyle=\"max-width: 4em; padding-bottom: 0;\"\n\t\t\t\t\t\t\t\t\t@blur=\"updateTimes($event.target.value)\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</RichLoc>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"tasks-replication-sheet-action-row --selectable\"\n\t\t\t\t\t\t:class=\"{'--active': isRowActive(ReplicationRepeatTill.Date)}\"\n\t\t\t\t\t\t@click.self=\"repeatTill = ReplicationRepeatTill.Date\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<UiRadio\n\t\t\t\t\t\t\ttag=\"label\"\n\t\t\t\t\t\t\tv-model=\"repeatTill\"\n\t\t\t\t\t\t\t:value=\"ReplicationRepeatTill.Date\"\n\t\t\t\t\t\t\tinputName=\"tasks-replication-sheet-finish-type\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextXs className=\"tasks-replication-sheet-action-row__text\">\n\t\t\t\t\t\t\t{{ loc('TASKS_V2_REPLICATION_FINISH_DATE') }}\n\t\t\t\t\t\t</TextXs>\n\t\t\t\t\t\t<HoverPill\n\t\t\t\t\t\t\t:readonly=\"!isRowActive(ReplicationRepeatTill.Date)\"\n\t\t\t\t\t\t\ttextOnly\n\t\t\t\t\t\t\tnoOffset\n\t\t\t\t\t\t\tref=\"datepickerFinishOpener\"\n\t\t\t\t\t\t\t@click=\"handleClickDatepickerFinishOpener\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"tasks-field-replication-link\">{{ endDateLabel }}</span>\n\t\t\t\t\t\t</HoverPill>\n\t\t\t\t\t\t<ReplicationDatepicker\n\t\t\t\t\t\t\tv-if=\"isDatepickerOpened\"\n\t\t\t\t\t\t\t:dateTs=\"endDateTs\"\n\t\t\t\t\t\t\t:bindElement=\"$refs.datepickerFinishOpener.$el\"\n\t\t\t\t\t\t\t@update:dateTs=\"updateEndDate\"\n\t\t\t\t\t\t\t@close=\"isDatepickerOpened = false\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import type { BaseEvent } from 'main.core.events';\n\nimport { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { DatePicker, DatePickerEvent } from 'ui.date-picker';\nimport { TextMd } from 'ui.system.typography.vue';\n\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { calendar } from 'tasks.v2.lib.calendar';\nimport { timezone } from 'tasks.v2.lib.timezone';\n\nimport { TimeStringConverter } from '../../../lib';\n\n// @vue/component\nexport const ReplicationStartTime = {\n\tname: 'ReplicationStartTime',\n\tcomponents: {\n\t\tRichLoc,\n\t\tTextMd,\n\t\tHoverPill,\n\t},\n\tinject: {\n\t\treplicateParams: {},\n\t},\n\temits: ['update'],\n\tcomputed: {\n\t\tstartTs: {\n\t\t\tget(): number\n\t\t\t{\n\t\t\t\treturn this.replicateParams.startTs;\n\t\t\t},\n\t\t\tset(startTs: number): void\n\t\t\t{\n\t\t\t\tthis.$emit('update', { startTs });\n\t\t\t},\n\t\t},\n\t\tstartTimeFormatted(): string\n\t\t{\n\t\t\treturn TimeStringConverter.format(this.startTs);\n\t\t},\n\t},\n\tmethods: {\n\t\tshowPicker(): void\n\t\t{\n\t\t\tthis.datePicker ??= new DatePicker({\n\t\t\t\tselectedDates: [this.startTs + timezone.getOffset(this.startTs)],\n\t\t\t\ttype: 'time',\n\t\t\t\tevents: {\n\t\t\t\t\t[DatePickerEvent.SELECT]: (event: BaseEvent) => {\n\t\t\t\t\t\tconst { date } = event.getData();\n\t\t\t\t\t\tconst dateTs = calendar.createDateFromUtc(date).getTime();\n\n\t\t\t\t\t\tthis.startTs = dateTs - timezone.getOffset(dateTs);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.datePicker.setTargetNode(this.$refs.time.$el);\n\t\t\tthis.datePicker.show();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<TextMd tag=\"div\" className=\"tasks-field-replication-section\">\n\t\t\t<RichLoc\n\t\t\t\tclass=\"tasks-field-replication-row tasks-field-replication-secondary\"\n\t\t\t\t:text=\"loc('TASKS_V2_REPLICATION_CREATE_AT')\"\n\t\t\t\tplaceholder=\"[time/]\"\n\t\t\t>\n\t\t\t\t<template #time>\n\t\t\t\t\t<HoverPill textOnly noOffset ref=\"time\" @click=\"showPicker\">\n\t\t\t\t\t\t<span class=\"tasks-field-replication-link\">{{ startTimeFormatted }}</span>\n\t\t\t\t\t</HoverPill>\n\t\t\t\t</template>\n\t\t\t</RichLoc>\n\t\t</TextMd>\n\t`,\n};\n","import { Loc, Type } from 'main.core';\nimport { TextMd } from 'ui.system.typography.vue';\n\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { DeadlineAfterPopup } from 'tasks.v2.component.fields.deadline';\n\n// @vue/component\nexport const ReplicationDeadline = {\n\tname: 'ReplicationDeadline',\n\tcomponents: {\n\t\tTextMd,\n\t\tDeadlineAfterPopup,\n\t\tHoverPill,\n\t},\n\tinject: {\n\t\treplicateParams: {},\n\t\ttaskId: {},\n\t},\n\temits: ['update'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisDeadlinePopupShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdeadlineLabel(): string\n\t\t{\n\t\t\tlet deadlineAfter = this.replicateParams.deadlineOffset || null;\n\n\t\t\tif (!deadlineAfter)\n\t\t\t{\n\t\t\t\treturn this.loc('TASKS_V2_REPLICATION_DEADLINE_NOT_SET');\n\t\t\t}\n\n\t\t\tdeadlineAfter *= 1000;\n\n\t\t\tif (this.isMinutes(deadlineAfter))\n\t\t\t{\n\t\t\t\tconst minutes = deadlineAfter / (60 * 1000);\n\n\t\t\t\treturn Loc.getMessagePlural(\n\t\t\t\t\t'TASKS_V2_REPLICATION_DEADLINE_IN_MINUTES',\n\t\t\t\t\tminutes,\n\t\t\t\t\t{ '#TASK_DEADLINE#': minutes },\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.isHours(deadlineAfter))\n\t\t\t{\n\t\t\t\tconst hours = deadlineAfter / (60 * 60 * 1000);\n\n\t\t\t\treturn Loc.getMessagePlural(\n\t\t\t\t\t'TASKS_V2_REPLICATION_DEADLINE_IN_HOURS',\n\t\t\t\t\thours,\n\t\t\t\t\t{ '#TASK_DEADLINE#': hours },\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.isWeeks(deadlineAfter))\n\t\t\t{\n\t\t\t\tconst weeks = deadlineAfter / (7 * 24 * 60 * 60 * 1000);\n\n\t\t\t\treturn Loc.getMessagePlural(\n\t\t\t\t\t'TASKS_V2_REPLICATION_DEADLINE_IN_WEEKS',\n\t\t\t\t\tweeks,\n\t\t\t\t\t{ '#TASK_DEADLINE#': weeks },\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst days = deadlineAfter / (24 * 60 * 60 * 1000);\n\n\t\t\treturn Loc.getMessagePlural(\n\t\t\t\t'TASKS_V2_REPLICATION_DEADLINE_IN_DAYS',\n\t\t\t\tdays,\n\t\t\t\t{ '#TASK_DEADLINE#': days },\n\t\t\t);\n\t\t},\n\t\ttoday(): Date\n\t\t{\n\t\t\tconst today = new Date();\n\n\t\t\treturn new Date(today.getFullYear(), today.getMonth(), today.getDate());\n\t\t},\n\t},\n\tmethods: {\n\t\tupdate(deadlineOffset: number | null): void\n\t\t{\n\t\t\tthis.$emit('update', { deadlineOffset });\n\t\t},\n\t\tupdateDeadlineAfter(deadlineTs: number | null): void\n\t\t{\n\t\t\tthis.update(Type.isNumber(deadlineTs) ? deadlineTs / 1000 : deadlineTs);\n\t\t},\n\t\tisMinutes(durationTs: number): boolean\n\t\t{\n\t\t\tconst hourTs = 60 * 60 * 1000;\n\n\t\t\treturn durationTs < hourTs || durationTs % hourTs !== 0;\n\t\t},\n\t\tisHours(durationTs: number): boolean\n\t\t{\n\t\t\tconst dayTs = 24 * 60 * 60 * 1000;\n\n\t\t\treturn durationTs < dayTs || durationTs % dayTs !== 0;\n\t\t},\n\t\tisWeeks(durationTs: number): boolean\n\t\t{\n\t\t\tconst weekTs = 7 * 24 * 60 * 60 * 1000;\n\n\t\t\treturn durationTs % weekTs === 0;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-section\">\n\t\t\t<TextMd tag=\"div\" className=\"tasks-field-replication-row\">\n\t\t\t\t<span class=\"tasks-field-replication-secondary\">\n\t\t\t\t\t{{ loc('TASKS_V2_REPLICATION_DEADLINE') }}\n\t\t\t\t</span>\n\t\t\t\t<HoverPill textOnly noOffset ref=\"deadline\">\n\t\t\t\t\t<span class=\"tasks-field-replication-link\" @click=\"isDeadlinePopupShown = true\">\n\t\t\t\t\t\t{{ deadlineLabel }}\n\t\t\t\t\t</span>\n\t\t\t\t</HoverPill>\n\t\t\t\t<DeadlineAfterPopup\n\t\t\t\t\tv-if=\"isDeadlinePopupShown\"\n\t\t\t\t\t:deadlineAfter=\"replicateParams.deadlineAfter\"\n\t\t\t\t\t:taskId\n\t\t\t\t\t:bindElement=\"$refs.deadline.$el\"\n\t\t\t\t\t@update:deadlineAfter=\"updateDeadlineAfter\"\n\t\t\t\t\t@close=\"isDeadlinePopupShown = false\"\n\t\t\t\t/>\n\t\t\t</TextMd>\n\t\t</div>\n\t`,\n};\n","import { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { TextMd } from 'ui.system.typography.vue';\nimport { BMenu, type MenuOptions, type MenuItemOptions } from 'ui.system.menu.vue';\n\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport type { TaskReplicateParams } from 'tasks.v2.model.tasks';\n\n// @vue/component\nexport const ReplicationWeekend = {\n\tname: 'ReplicationWeekend',\n\tcomponents: {\n\t\tRichLoc,\n\t\tTextMd,\n\t\tBMenu,\n\t\tHoverPill,\n\t},\n\tinject: {\n\t\treplicateParams: {},\n\t},\n\temits: ['update'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tworkdayOnly: {\n\t\t\tget(): string\n\t\t\t{\n\t\t\t\treturn this.replicateParams.workdayOnly;\n\t\t\t},\n\t\t\tset(value: string): void\n\t\t\t{\n\t\t\t\tthis.update({ workdayOnly: value });\n\t\t\t},\n\t\t},\n\t\titem(): Object\n\t\t{\n\t\t\treturn this.weekendAttitudeItems.find((item) => item.id === this.workdayOnly);\n\t\t},\n\t\tweekendAttitudeItems(): MenuItemOptions[]\n\t\t{\n\t\t\tconst items = [\n\t\t\t\t{\n\t\t\t\t\tid: 'N',\n\t\t\t\t\tvalue: this.loc('TASKS_V2_REPLICATION_WEEKEND_CREATE'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'Y',\n\t\t\t\t\tvalue: this.loc('TASKS_V2_REPLICATION_WEEKEND_NOT_CREATE'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\treturn items.map((option) => ({\n\t\t\t\tid: option.id,\n\t\t\t\ttitle: option.value,\n\t\t\t\tisSelected: option.id === this.workdayOnly,\n\t\t\t\tonClick: (): void => {\n\t\t\t\t\tthis.workdayOnly = option.id;\n\t\t\t\t},\n\t\t\t}));\n\t\t},\n\t\toptions(): MenuOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: 'weekend-attitude-replicant-popup',\n\t\t\t\tbindElement: this.$refs.skipWeekends.$el,\n\t\t\t\titems: this.weekendAttitudeItems,\n\t\t\t\toffsetTop: 5,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t};\n\t\t},\n\t},\n\tbeforeMount(): void\n\t{\n\t\tif (!this.replicateParams.workdayOnly)\n\t\t{\n\t\t\tthis.workdayOnly = 'N';\n\t\t}\n\t},\n\tmethods: {\n\t\tupdate({ workdayOnly }: Pick<TaskReplicateParams, 'workdayOnly'>): void\n\t\t{\n\t\t\tthis.$emit('update', { workdayOnly });\n\t\t},\n\t},\n\ttemplate: `\n\t\t<TextMd tag=\"div\" className=\"tasks-field-replication-section\">\n\t\t\t<RichLoc\n\t\t\t\tclass=\"tasks-field-replication-row tasks-field-replication-secondary\"\n\t\t\t\t:text=\"loc('TASKS_V2_REPLICATION_ON_WEEKEND_DO')\"\n\t\t\t\tplaceholder=\"[do/]\"\n\t\t\t>\n\t\t\t\t<template #do>\n\t\t\t\t\t<HoverPill textOnly noOffset ref=\"skipWeekends\" @click=\"isMenuShown = true\">\n\t\t\t\t\t\t<span class=\"tasks-field-replication-link\">{{ item?.title || '' }}</span>\n\t\t\t\t\t</HoverPill>\n\t\t\t\t\t<BMenu v-if=\"isMenuShown\" :options @close=\"isMenuShown = false\"/>\n\t\t\t\t</template>\n\t\t\t</RichLoc>\n\t\t</TextMd>\n\t`,\n};\n","import { Event } from 'main.core';\n\nimport { Button as UiButton, ButtonColor, ButtonSize, AirButtonStyle } from 'ui.vue3.components.button';\nimport 'ui.icon-set.outline';\n\nimport { EventName } from 'tasks.v2.const';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { replicationMeta } from '../../../replication-meta';\nimport './replication-sheet-footer.css';\n\n// @vue/component\nexport const ReplicationSheetFooter = {\n\tname: 'ReplicationSheetFooter',\n\tcomponents: {\n\t\tUiButton,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisTemplate: {},\n\t},\n\tprops: {\n\t\treplicateParams: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tAirButtonStyle,\n\t\t\tButtonColor,\n\t\t\tButtonSize,\n\t\t};\n\t},\n\tcomputed: {\n\t\twasFilled(): boolean\n\t\t{\n\t\t\treturn this.task.filledFields[replicationMeta.id];\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.wasEmpty = !this.wasFilled || !this.task.replicateParams;\n\t},\n\tmethods: {\n\t\tasync save(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\n\t\t\tif (this.wasEmpty)\n\t\t\t{\n\t\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(replicationMeta.id);\n\t\t\t}\n\n\t\t\tawait taskService.update(this.taskId, {\n\t\t\t\treplicate: true,\n\t\t\t\treplicateParams: this.replicateParams,\n\t\t\t});\n\n\t\t\tEvent.EventEmitter.emit(EventName.UpdateReplicateParams);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-sheet-footer\">\n\t\t\t<UiButton\n\t\t\t\t:text=\"loc('TASKS_V2_REPLICATION_CANCEL')\"\n\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t:color=\"ButtonColor.LIGHT\"\n\t\t\t\t:style=\"AirButtonStyle.PLAIN\"\n\t\t\t\t@click=\"$emit('close')\"\n\t\t\t/>\n\t\t\t<UiButton\n\t\t\t\t:text=\"loc('TASKS_V2_REPLICATION_SAVE')\"\n\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t:color=\"ButtonColor.PRIMARY\"\n\t\t\t\t@click=\"save\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\n\nimport { computed } from 'ui.vue3';\nimport { HeadlineMd, TextMd } from 'ui.system.typography.vue';\nimport { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport type { TaskModel, TaskReplicateParams } from 'tasks.v2.model.tasks';\nimport { ReplicateCreator } from 'tasks.v2.provider.service.task-service';\nimport { ReplicationPeriod } from 'tasks.v2.const';\n\nimport { ReplicationSettings } from './replication-settings/replication-settings';\nimport { ReplicationStart } from './replication-start/replication-start';\nimport { ReplicationFinish } from './replication-finish/replication-finish';\nimport { ReplicationStartTime } from './replication-start-time/replication-start-time';\nimport { ReplicationDatepicker } from './replication-datepicker/replication-datepicker';\nimport { ReplicationDeadline } from './replication-deadline/replication-deadline';\nimport { ReplicationWeekend } from './replication-weekend/replication-weekend';\nimport { ReplicationSheetFooter } from './footer/replication-sheet-footer';\n\nimport './replication-sheet-content.css';\n\ntype Inject = { task: TaskModel, isTemplate: boolean };\n\n// @vue/component\nexport const ReplicationSheetContent = {\n\tname: 'ReplicationSheetContent',\n\tcomponents: {\n\t\tBIcon,\n\t\tHeadlineMd,\n\t\tHoverPill,\n\t\tReplicationSettings,\n\t\tReplicationStart,\n\t\tReplicationStartTime,\n\t\tReplicationDatepicker,\n\t\tReplicationFinish,\n\t\tReplicationDeadline,\n\t\tReplicationWeekend,\n\t\tReplicationSheetFooter,\n\t\tRichLoc,\n\t\tTextMd,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisTemplate: {},\n\t},\n\tprovide(): { replicateParams: TaskReplicateParams }\n\t{\n\t\treturn {\n\t\t\treplicateParams: computed(() => this.replicateParams),\n\t\t};\n\t},\n\temits: ['close'],\n\tsetup(): { Outline: typeof Outline } & Inject\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): { replicateParams: TaskReplicateParams }\n\t{\n\t\treturn {\n\t\t\treplicateParams: ReplicateCreator.createEmptyReplicateParams(),\n\t\t};\n\t},\n\tcomputed: {\n\t\tisDailyPeriod(): boolean\n\t\t{\n\t\t\treturn this.replicateParams.period === ReplicationPeriod.Daily;\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.initReplicateParams();\n\t},\n\tmethods: {\n\t\tinitReplicateParams(): void\n\t\t{\n\t\t\tif (!Type.isObject(this.task?.replicateParams || null))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.replicateParams = {\n\t\t\t\t...this.replicateParams,\n\t\t\t\t...this.task.replicateParams,\n\t\t\t\tweekDays: [...(this.task.replicateParams.weekDays || [])],\n\t\t\t};\n\t\t},\n\t\tupdateReplicateParams(params: Partial<TaskReplicateParams> = {}): void\n\t\t{\n\t\t\tthis.replicateParams = {\n\t\t\t\t...this.replicateParams,\n\t\t\t\t...params,\n\t\t\t};\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\ttop.BX.Helper.show('redirect=detail&code=18127718');\n\t\t},\n\t\tclose(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-sheet\">\n\t\t\t<div class=\"tasks-field-replication-sheet-header\">\n\t\t\t\t<HeadlineMd>{{ loc('TASKS_V2_REPLICATION_TITLE_SHEET') }}</HeadlineMd>\n\t\t\t\t<BIcon\n\t\t\t\t\tclass=\"tasks-field-replication-sheet-close\"\n\t\t\t\t\t:name=\"Outline.CROSS_L\"\n\t\t\t\t\thoverable\n\t\t\t\t\t@click=\"close\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-field-replication-sheet-body\">\n\t\t\t\t<div v-if=\"!isTemplate\" class=\"tasks-field-replication-sheet-description\">\n\t\t\t\t\t<span class=\"tasks-field-replication-sheet-description-text\">\n\t\t\t\t\t\t<RichLoc :text=\"loc('TASKS_V2_REPLICATION_SHEET_DESCRIPTION')\" placeholder=\"[helpdesk]\">\n\t\t\t\t\t\t\t<template #helpdesk=\"{ text }\">\n\t\t\t\t\t\t\t\t<a class=\"tasks-field-replication-helpdesk\" @click=\"showHelpDesk\">{{ text }}</a>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</RichLoc>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<ReplicationSettings @update=\"updateReplicateParams\"/>\n\t\t\t\t<ReplicationStart @update=\"updateReplicateParams\"/>\n\t\t\t\t<ReplicationFinish @update=\"updateReplicateParams\"/>\n\t\t\t\t<ReplicationStartTime @update=\"updateReplicateParams\"/>\n\t\t\t\t<ReplicationDeadline v-if=\"!isTemplate\" @update=\"updateReplicateParams\"/>\n\t\t\t\t<ReplicationWeekend v-if=\"isDailyPeriod\" @update=\"updateReplicateParams\"/>\n\t\t\t</div>\n\t\t\t<ReplicationSheetFooter :replicateParams @close=\"close\"/>\n\t\t</div>\n\t`,\n};\n","import { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { BottomSheet } from 'tasks.v2.component.elements.bottom-sheet';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { ReplicationSheetContent } from './components/replication-sheet/replication-sheet-content';\n\ntype Inject = { task: TaskModel };\n\n// @vue/component\nexport const ReplicationSheet = {\n\tname: 'ReplicationSheet',\n\tcomponents: {\n\t\tBIcon,\n\t\tBottomSheet,\n\t\tReplicationSheetContent,\n\t},\n\tinject: {\n\t\ttask: {},\n\t},\n\tprops: {\n\t\tsheetBindProps: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tsetup(): { Outline: typeof Outline } & Inject\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<BottomSheet\n\t\t\t:sheetBindProps\n\t\t\tcustomClass=\"tasks-bottom-sheet-replicate-content\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<ReplicationSheetContent @close=\"$emit('close')\"/>\n\t\t</BottomSheet>\n\t`,\n};\n","import { HeadlineMd } from 'ui.system.typography.vue';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './replication-sheet-header.css';\n\n// @vue/component\nexport const ReplicationSheetHeader = {\n\tname: 'ReplicationSheetHeader',\n\tcomponents: {\n\t\tHeadlineMd,\n\t\tBIcon,\n\t},\n\temits: ['close'],\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-sheet-header\">\n\t\t\t<HeadlineMd>{{ loc('TASKS_V2_REPLICATION_HISTORY_SHEET') }}</HeadlineMd>\n\t\t\t<BIcon\n\t\t\t\tclass=\"tasks-field-replication-sheet-close\"\n\t\t\t\t:name=\"Outline.CROSS_L\"\n\t\t\t\thoverable\n\t\t\t\t@click=\"$emit('close')\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { DateTimeFormat } from 'main.date';\n\nimport { timezone } from 'tasks.v2.lib.timezone';\n\n// @vue/component\nexport const TimeFields = {\n\tprops: {\n\t\tgetGrid: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsystemLogTimeRef: [],\n\t\t\tsystemLogTime: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tasync update(): Promise<void>\n\t\t{\n\t\t\tconst time = this.getGrid().querySelectorAll('[data-system-log-time]');\n\n\t\t\tthis.systemLogTime = [...time].map((systemLogTimeNode: HTMLElement) => this.getSystemLogTime(systemLogTimeNode));\n\n\t\t\tawait this.$nextTick();\n\n\t\t\ttime.forEach((systemLogTimeNode: HTMLElement) => {\n\t\t\t\tconst systemLogTime = this.getSystemLogTime(systemLogTimeNode);\n\t\t\t\tsystemLogTimeNode.append(this.systemLogTimeRef[systemLogTime.rowId]);\n\t\t\t});\n\t\t},\n\t\tgetSystemLogTime(systemLogTimeNode: HTMLElement): Object\n\t\t{\n\t\t\tconst rowId = Number(systemLogTimeNode.closest('[data-id]').dataset.id);\n\t\t\tconst offsetTimestamp = this.getOffsetTimestamp(systemLogTimeNode.dataset.systemLogTime);\n\n\t\t\treturn {\n\t\t\t\trowId,\n\t\t\t\toffsetTimestamp,\n\t\t\t};\n\t\t},\n\t\tgetOffsetTimestamp(timestampString: string): number\n\t\t{\n\t\t\tconst timestamp = Number(timestampString) * 1000;\n\t\t\tconst offset = timezone.getOffset(timestamp);\n\t\t\tconst offsetTimestamp = (timestamp + offset) / 1000;\n\n\t\t\treturn DateTimeFormat.format(DateTimeFormat.getFormat('FORMAT_DATETIME'), offsetTimestamp);\n\t\t},\n\t\tsetRef(element: HTMLElement, rowId: number): void\n\t\t{\n\t\t\tthis.systemLogTimeRef ??= {};\n\t\t\tthis.systemLogTimeRef[rowId] = element;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<template v-for=\"(time, id) in systemLogTime\" :key=\"id\">\n\t\t\t<div :ref=\"(el) => setRef(el, time.rowId)\">{{ time.offsetTimestamp }}</div>\n\t\t</template>\n\t`,\n};\n","import './error-hint.css';\n\n// @vue/component\nexport const ErrorHint = {\n\tprops: {\n\t\terrorMessage: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\terrorLink: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-hint\">\n\t\t\t<div>{{ errorMessage.replace('#LINK#', '') }}</div>\n\t\t\t<a v-if=\"errorLink\" :href=\"errorLink\">\n\t\t\t\t{{ loc('TASKS_V2_REPLICATION_NO_ACCESS_MORE') }}\n\t\t\t</a>\n\t\t</div>\n\t`,\n};\n","import type { PopupOptions } from 'main.popup';\n\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\n\nimport { Hint } from 'tasks.v2.component.elements.hint';\n\nimport { ErrorHint } from '../error-hint/error-hint';\n\nimport './message-field.css';\n\nexport type Message = {\n\tmessage: ?string,\n\tlink: ?string,\n\trowId: ?number,\n\terrors: ?Array<Object>,\n};\n\nconst pattern = /\\(#(\\d+)\\)(?![\\S\\s]*\\(#\\d+\\))/;\n\n// @vue/component\nexport const MessageField = {\n\tcomponents: {\n\t\tBIcon,\n\t\tHint,\n\t\tErrorHint,\n\t},\n\tprops: {\n\t\t/** @type Message */\n\t\tmessage: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tactiveHintRowId: {\n\t\t\ttype: Number,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['hintOpen', 'hintClose'],\n\tsetup(): { Outline: typeof Outline }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tshowHint: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tformattedMessage(): ?string\n\t\t{\n\t\t\treturn this.message.message?.replace(pattern, '').trim();\n\t\t},\n\t\tlinkText(): ?string\n\t\t{\n\t\t\treturn this.message.message?.match(pattern)[0] ?? null;\n\t\t},\n\t\terrorMessage(): ?string\n\t\t{\n\t\t\treturn this.message.errors[0].MESSAGE;\n\t\t},\n\t\terrorLink(): ?string\n\t\t{\n\t\t\treturn this.message.errors[0].LINK;\n\t\t},\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\toffsetLeft: this.$refs.error.$el.offsetWidth / 2,\n\t\t\t\tmaxWidth: 494,\n\t\t\t\twidth: 494,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\topenHint(): void\n\t\t{\n\t\t\tif (this.activeHintRowId !== null && this.activeHintRowId !== this.message.rowId)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.showHint)\n\t\t\t{\n\t\t\t\tthis.showHint = true;\n\t\t\t\tthis.$emit('hintOpen', this.message.rowId);\n\t\t\t}\n\t\t},\n\t\tcloseHint(): void\n\t\t{\n\t\t\tif (this.showHint)\n\t\t\t{\n\t\t\t\tthis.showHint = false;\n\t\t\t\tthis.$emit('hintClose', this.message.rowId);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-message\">\n\t\t\t<div v-if=\"message.link\">{{ formattedMessage }} <a :href=\"message.link\">{{ linkText }}</a></div>\n\t\t\t<span v-else>{{ message.message }}</span>\n\t\t\t<BIcon\n\t\t\t\tv-if=\"message.errors?.length > 0\"\n\t\t\t\tclass=\"tasks-field-replication-error-icon\"\n\t\t\t\t:name=\"Outline.ALERT\"\n\t\t\t\tref=\"error\"\n\t\t\t\t@mouseenter=\"openHint\"\n\t\t\t/>\n\t\t\t<Hint v-if=\"showHint\" :bindElement=\"$refs.error.$el\" :options=\"popupOptions\" @close=\"closeHint\">\n\t\t\t\t<ErrorHint :errorMessage :errorLink/>\n\t\t\t</Hint>\n\t\t</div>\n\t`,\n};\n","import { MessageField, type Message } from './message-field';\n\n// @vue/component\nexport const MessageFields = {\n\tcomponents: {\n\t\tMessageField,\n\t},\n\tprops: {\n\t\tgetGrid: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsystemLogMessageRef: [],\n\t\t\tsystemLogMessage: [],\n\t\t\tactiveHintRowId: null,\n\t\t};\n\t},\n\tmethods: {\n\t\tasync update(): Promise<void>\n\t\t{\n\t\t\tconst message = this.getGrid().querySelectorAll('[data-system-log-message]');\n\n\t\t\tthis.systemLogMessage = [...message].map((systemLogMessageNode: HTMLElement) => this.getSystemLogMessage(systemLogMessageNode));\n\n\t\t\tawait this.$nextTick();\n\n\t\t\tmessage.forEach((systemLogMessageNode: HTMLElement) => {\n\t\t\t\tconst systemLogMessage = this.getSystemLogMessage(systemLogMessageNode);\n\t\t\t\tsystemLogMessageNode.append(this.systemLogMessageRef[systemLogMessage.rowId]);\n\t\t\t});\n\t\t},\n\t\tgetSystemLogMessage(systemLogMessageNode: HTMLElement): Message\n\t\t{\n\t\t\tconst rowId = Number(systemLogMessageNode.closest('[data-id]').dataset.id);\n\n\t\t\t/** @type {{ message: ?string, link: ?string, errors: ?array }} */\n\t\t\tconst message = JSON.parse(systemLogMessageNode.dataset.systemLogMessage);\n\n\t\t\treturn {\n\t\t\t\trowId,\n\t\t\t\tmessage: message.message,\n\t\t\t\tlink: message.link,\n\t\t\t\terrors: message.errors,\n\t\t\t};\n\t\t},\n\t\tsetRef(element: HTMLElement, rowId: number): void\n\t\t{\n\t\t\tthis.systemLogMessageRef ??= {};\n\t\t\tthis.systemLogMessageRef[rowId] = element;\n\t\t},\n\t\tonHintOpen(rowId: number): void\n\t\t{\n\t\t\tthis.activeHintRowId = rowId;\n\t\t},\n\t\tonHintClose(rowId: number): void\n\t\t{\n\t\t\tif (this.activeHintRowId === rowId)\n\t\t\t{\n\t\t\t\tthis.activeHintRowId = null;\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<template v-for=\"(message, id) in systemLogMessage\" :key=\"id\">\n\t\t\t<MessageField\n\t\t\t\t:ref=\"(el) => setRef(el?.$el, message.rowId)\"\n\t\t\t\t:message=\"message\"\n\t\t\t\t:activeHintRowId\n\t\t\t\t@hintOpen=\"onHintOpen\"\n\t\t\t\t@hintClose=\"onHintClose\"\n\t\t\t/>\n\t\t</template>\n\t`,\n};\n","import './grid-loader.css';\n\n// @vue/component\nexport const GridLoader = {\n\ttemplate: `\n\t\t<div class=\"tasks-template-history-grid-loader-spinner-container\">\n\t\t\t<div class=\"tasks-template-history-grid-loader-spinner\"/>\n\t\t</div>\n\t`,\n};\n","import { Runtime, Uri } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { PopupManager } from 'main.popup';\n\nimport { Endpoint } from 'tasks.v2.const';\nimport { apiClient } from 'tasks.v2.lib.api-client';\nimport { idUtils } from 'tasks.v2.lib.id-utils';\n\nimport { TimeFields } from './time-fields/time-fields';\nimport { MessageFields } from './message-fields/message-fields';\nimport { GridLoader } from './grid-loader/grid-loader';\n\nconst gridId = 'tasks-template-history-grid';\n\n// @vue/component\nexport const ReplicationHistorySheetContent = {\n\tcomponents: {\n\t\tTimeFields,\n\t\tMessageFields,\n\t\tGridLoader,\n\t},\n\tinject: {\n\t\ttaskId: {},\n\t},\n\tsetup(): { taskId: number } {},\n\tcomputed: {\n\t\ttemplateId(): number\n\t\t{\n\t\t\treturn idUtils.unbox(this.taskId);\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tEventEmitter.subscribe('Grid::beforeRequest', this.handleBeforeGridRequest);\n\t\tEventEmitter.subscribe('Grid::updated', this.update);\n\n\t\tvoid this.getData();\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tEventEmitter.unsubscribe('Grid::beforeRequest', this.handleBeforeGridRequest);\n\t\tEventEmitter.unsubscribe('Grid::updated', this.update);\n\n\t\tBX.Main?.gridManager?.destroy(gridId);\n\t\tPopupManager.getPopupById(`${gridId}-grid-settings-window`)?.destroy();\n\t},\n\tmethods: {\n\t\tasync getData(): Promise<void>\n\t\t{\n\t\t\tconst { html } = await apiClient.post(Endpoint.TemplateHistoryGetGrid, { templateId: this.templateId });\n\n\t\t\tawait Runtime.html(this.$refs.grid, html);\n\n\t\t\tthis.update();\n\t\t},\n\t\thandleBeforeGridRequest(event: BaseEvent): void\n\t\t{\n\t\t\tconst [, eventArgs] = event.getData();\n\n\t\t\tif (eventArgs.url)\n\t\t\t{\n\t\t\t\tthis.nav = new Uri(eventArgs.url ?? '').getQueryParams().nav;\n\t\t\t}\n\n\t\t\teventArgs.url = `/bitrix/services/main/ajax.php?action=tasks.V2.Template.History.getGridData&nav=${this.nav}`;\n\t\t\teventArgs.method = 'POST';\n\t\t\teventArgs.data = {\n\t\t\t\ttemplateId: this.templateId,\n\t\t\t};\n\t\t},\n\t\tupdate(): void\n\t\t{\n\t\t\tvoid this.$refs.timeFields.update();\n\t\t\tvoid this.$refs.messageFields.update();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-replication-sheet__history-grid-container\">\n\t\t\t<div ref=\"grid\" class=\"tasks-field-replication-sheet__history-grid-main-content\"><GridLoader/></div>\n\t\t\t<TimeFields ref=\"timeFields\" :getGrid=\"() => this.$refs.grid\"/>\n\t\t\t<MessageFields ref=\"messageFields\" :getGrid=\"() => this.$refs.grid\"/>\n\t\t</div>\n\t`,\n};\n","import { BottomSheet } from 'tasks.v2.component.elements.bottom-sheet';\n\nimport { ReplicationSheetHeader } from './components/replication-sheet/header/replication-sheet-header';\nimport { ReplicationHistorySheetContent } from './components/replication-history-sheet/replication-history-sheet-content';\n\n// @vue/component\nexport const ReplicationHistorySheets = {\n\tname: 'ReplicationHistorySheets',\n\tcomponents: {\n\t\tBottomSheet,\n\t\tReplicationSheetHeader,\n\t\tReplicationHistorySheetContent,\n\t},\n\tprops: {\n\t\tsheetBindProps: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close', 'update'],\n\tmethods: {\n\t\tupdate(params: Partial<TaskReplicateParams>): void\n\t\t{\n\t\t\tthis.$emit('update', params);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BottomSheet :sheetBindProps @close=\"$emit('close')\">\n\t\t\t<div class=\"tasks-field-replication-sheet\">\n\t\t\t\t<ReplicationSheetHeader\n\t\t\t\t\t:head=\"loc('TASKS_V2_REPLICATION_HISTORY_SHEET')\"\n\t\t\t\t\t@close=\"$emit('close')\"\n\t\t\t\t/>\n\t\t\t\t<ReplicationHistorySheetContent/>\n\t\t\t</div>\n\t\t</BottomSheet>\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\n\nimport { TextXs } from 'ui.system.typography.vue';\nimport { BLine } from 'ui.system.skeleton.vue';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Endpoint, EventName } from 'tasks.v2.const';\nimport { apiClient } from 'tasks.v2.lib.api-client';\nimport { idUtils } from 'tasks.v2.lib.id-utils';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { replicationMeta } from './replication-meta';\nimport { ReplicationContent } from './components/replication/replication-content';\nimport { ReplicationSheet } from './replication-sheet';\nimport { ReplicationHistorySheets } from './replication-history-sheet';\nimport './replication.css';\n\n// @vue/component\nexport const Replication = {\n\tname: 'TaskReplication',\n\tcomponents: {\n\t\tBLine,\n\t\tBIcon,\n\t\tTextXs,\n\t\tReplicationContent,\n\t\tReplicationSheet,\n\t\tReplicationHistorySheets,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t\tisEdit: {},\n\t\tisTemplate: {},\n\t},\n\tprops: {\n\t\tisSheetShown: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tisHistorySheetShown: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tsheetBindProps: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:isSheetShown', 'update:isHistorySheetShown'],\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\treplicationMeta,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlogCount: null,\n\t\t\tisLoading: true,\n\t\t};\n\t},\n\tcomputed: {\n\t\thistoryTitle(): string\n\t\t{\n\t\t\treturn this.loc('TASKS_V2_REPLICATION_HISTORY', {\n\t\t\t\t'#COUNT#': this.logCount,\n\t\t\t});\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.isTemplate || !this.task.rights.edit;\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tvoid this.getLogCount();\n\t\tEventEmitter.subscribe(EventName.UpdateReplicateParams, this.getLogCount);\n\t},\n\tunmounted(): void\n\t{\n\t\tEventEmitter.unsubscribe(EventName.UpdateReplicateParams, this.getLogCount);\n\t},\n\tmethods: {\n\t\tasync getLogCount(): Promise<void>\n\t\t{\n\t\t\tif (!this.isEdit || !this.isTemplate)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isLoading = true;\n\n\t\t\tconst templateId = idUtils.unbox(this.taskId);\n\n\t\t\tconst { count } = await apiClient.post(Endpoint.TemplateHistoryGetCount, { templateId });\n\n\t\t\tthis.logCount = count ?? 0;\n\n\t\t\tthis.isLoading = false;\n\t\t},\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (!this.readonly)\n\t\t\t{\n\t\t\t\tthis.setSheetShown(true);\n\t\t\t}\n\t\t},\n\t\tsetSheetShown(isShown: boolean): void\n\t\t{\n\t\t\tthis.$emit('update:isSheetShown', isShown);\n\t\t},\n\t\tsetHistorySheetShown(isShown: boolean): void\n\t\t{\n\t\t\tthis.$emit('update:isHistorySheetShown', isShown);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-full-card-field-container tasks-field-replication\"\n\t\t\t:data-task-id=\"task.id\"\n\t\t\t:data-task-field-id=\"replicationMeta.id\"\n\t\t\tdata-field-container\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t<ReplicationContent/>\n\t\t</div>\n\t\t<template v-if=\"isEdit && isTemplate && task.replicate\">\n\t\t\t<div v-if=\"isLoading\" class=\"tasks-field-replication-history\">\n\t\t\t\t<BLine :width=\"120\"/>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-else-if=\"logCount > 0\"\n\t\t\t\tclass=\"tasks-field-replication-history\"\n\t\t\t\t@click=\"setHistorySheetShown(true)\"\n\t\t\t>\n\t\t\t\t<TextXs className=\"tasks-field-replication-history-title\">{{ historyTitle }}</TextXs>\n\t\t\t\t<BIcon :name=\"Outline.CHEVRON_RIGHT_M\" color=\"var(--ui-color-base-4)\"/>\n\t\t\t</div>\n\t\t</template>\n\t\t<ReplicationSheet v-if=\"isSheetShown\" :sheetBindProps @close=\"setSheetShown(false)\"/>\n\t\t<ReplicationHistorySheets v-if=\"isHistorySheetShown\" :sheetBindProps @close=\"setHistorySheetShown(false)\"/>\n\t`,\n};\n","import { Chip, ChipDesign } from 'ui.system.chip.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { Core } from 'tasks.v2.core';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport type { TaskId } from 'tasks.v2.lib.id-utils';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport { showLimit } from 'tasks.v2.lib.show-limit';\n\nimport { ReplicationSheet } from './replication-sheet';\nimport { replicationMeta } from './replication-meta';\n\ntype Inject = { task: TaskModel, taskId: TaskId };\n\n// @vue/component\nexport const ReplicationChip = {\n\tname: 'ReplicationChip',\n\tcomponents: {\n\t\tChip,\n\t\tReplicationSheet,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t},\n\tprops: {\n\t\tisSheetShown: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tsheetBindProps: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:isSheetShown'],\n\tsetup(): { Outline: typeof Outline, replicationMeta: typeof replicationMeta } & Inject\n\t{\n\t\treturn {\n\t\t\treplicationMeta,\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdesign(): string\n\t\t{\n\t\t\treturn this.isSelected ? ChipDesign.ShadowAccent : ChipDesign.ShadowNoAccent;\n\t\t},\n\t\tisSelected(): boolean\n\t\t{\n\t\t\treturn this.task.filledFields[replicationMeta.id];\n\t\t},\n\t\tisLocked(): boolean\n\t\t{\n\t\t\treturn !Core.getParams().restrictions.recurrentTask.available;\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.isLocked)\n\t\t\t{\n\t\t\t\tvoid showLimit({\n\t\t\t\t\tfeatureId: Core.getParams().restrictions.recurrentTask.featureId,\n\t\t\t\t\tbindElement: this.$el,\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isSelected)\n\t\t\t{\n\t\t\t\tthis.highlightField();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setSheetShown(true);\n\t\t},\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(replicationMeta.id);\n\t\t},\n\t\tsetSheetShown(isShown: boolean): void\n\t\t{\n\t\t\tthis.$emit('update:isSheetShown', isShown);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\t:design\n\t\t\t:icon=\"Outline.REPEAT\"\n\t\t\t:text=\"loc('TASKS_V2_REPLICATION_TITLE_CHIP')\"\n\t\t\t:lock=\"isLocked\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"replicationMeta.id\"\n\t\t\t@click=\"handleClick\"\n\t\t/>\n\t\t<ReplicationSheet\n\t\t\tv-if=\"isSheetShown\"\n\t\t\t:sheetBindProps\n\t\t\t@close=\"setSheetShown(false)\"\n\t\t/>\n\t`,\n};\n"],"names":["replicationMeta","Object","freeze","id","TaskField","Replication","getWeekDayGender","weekDay","ReplicationWeekDayIndex","Sunday","Monday","Tuesday","Thursday","PeriodRuleDailyGenerator","constructor","replicateParams","generate","dailyMonthInterval","everyDay","Loc","getMessage","DateTimeFormat","format","getMessagePlural","PeriodRuleWeeklyGenerator","everyWeek","weekDaysLabel","length","map","wd","join","weekDays","sort","PeriodRuleMonthlyGenerator","monthlyType","ReplicationMonthlyType","Absolute","monthlyMonthNum","monthlyMonthNum1","monthlyDayNum","monthlyWeekDay","weekDayNum","monthlyWeekDayNum","localePostfix","dayNumber","monthlyMonthNum2","Wednesday","Friday","Saturday","PeriodRuleYearlyGenerator","yearlyType","ReplicationYearlyType","yearlyDayNum","yearlyMonth","yearlyMonth1","Date","setMonth","yearlyWeekDayNum","yearlyWeekDay","yearlyMonth2","dayNumberLabel","ReplicationYearlyWeekDayIndex","TimeStringConverter","timestamp","getFormat","timezone","getOffset","parseServerTime","serverTimeString","Type","isStringFilled","calendar","dayStartTime","applyTimeToDate","date","timeString","hours","minutes","split","setHours","parseInt","convertTsToServerTimeString","browserTs","serverTs","Timezone","BrowserTime","toServer","ReplicateRuleGenerator","period","ReplicationPeriod","Weekly","Monthly","Yearly","timeTs","startTs","repeatTill","ReplicationRepeatTill","Times","times","endTs","ReplicationContentState","name","components","HoverPill","TextMd","inject","task","taskId","isTemplate","setup","computed","readonly","rights","edit","ruleFormatted","methods","dontReplicate","taskService","update","replicate","template","ReplicationContent","TextSm","FieldAdd","Outline","ReplicationInterval","RichLoc","BInput","TextXs","UiCheckbox","props","interval","type","Number","required","useInterval","Boolean","default","String","Daily","validator","value","includes","emits","InputDesign","InputSize","data","prevInterval","useIntervalValue","get","set","$emit","intervalValue","toString","replaceAll","isInteger","intervalPeriod","getMess","ReplicationSettingsDay","QuestionMark","markRaw","hintText","monthPeriod","useMonthInterval","monthInterval","monthHintText","week","weekValues","Mon","Tue","Wed","Thu","Fri","Sat","Sun","ReplicationSettingsWeekDaysList","selectedDays","Array","weekIndices","SU","MO","TU","WE","TH","FR","SA","weekStartIndex","weekStart","slice","flat","dayLabelMap","todayDayIndex","getDay","day","dayDate","dayDifference","indexOf","setDate","getDate","label","changeDay","filter","d","ReplicationSettingsWeek","ReplicationSettingsMonthlyByDayOfMonth","UiRadio","prevDayNumber","disabled","mounted","updateDayNumber","days","SerialNumberSelect","UiSelect","modelValue","itemLocaleAlt","items","title","loc","item","find","WeekDaySelect","ReplicationSettingsMonthlyByDayOfWeek","weekDayNumber","Relative","ReplicationSettingsMonth","updateMonthlyMonthNum","prevValue","updateFieldsByMonthlyType","params","patch","ReplicationWeekDayNum","First","MonthSelect","from","_","i","Text","capitalize","menuOptions","height","ReplicationSettingsYearAbsoluteDate","yearlyDayNumber","month","ReplicationSettingsYearRelativeDate","ReplicationSettingsYear","updateByYearlyType","ReplicationSettings","UiTabs","getEmptyPrevTabData","getDefaultTabData","tabs","component","prevPeriod","ReplicateCreator","createReplicateParamsDaily","createReplicateParamsWeekly","createReplicateParamsMonthly","createReplicateParamsYearly","createDefaultReplicationParamsDaily","createDefaultReplicationParamsWeekly","createDefaultReplicationParamsMonthly","createDefaultReplicationParamsYearly","DateStringConverter","offset","today","now","isToday","getFullYear","getMonth","formatDate","parseServerDate","serverDateString","parse","convertServerDateToTs","serverDate","serverTime","ServerTime","toBrowser","convertTsToServerDateString","browserDate","toServerDate","serverTsAsMidnight","ReplicationDatepicker","Popup","dateTs","bindElement","HTMLElement","dateTsModel","created","datePicker","createDatePicker","getTime","show","unmounted","destroy","picker","DatePicker","popupOptions","getRandom","offsetTop","offsetLeft","targetContainer","document","body","events","onClose","selectedDates","DatePickerEvent","SELECT","event","getData","createDateFromUtc","getPicker","subscribe","year","ReplicationStart","UiButton","AirButtonStyle","ButtonSize","isDatepickerOpened","startLabel","beforeMount","workdayStart","H","M","ReplicationFinish","prevTimes","updateFieldsByRepeatTill","endDateTs","isNil","endDateLabel","updateTimes","updateEndDate","Endless","endless","endDate","togglePopup","isRowActive","handleClickDatepickerFinishOpener","target","currentTarget","getAttribute","ReplicationStartTime","startTimeFormatted","showPicker","setTargetNode","$refs","time","$el","ReplicationDeadline","DeadlineAfterPopup","isDeadlinePopupShown","deadlineLabel","deadlineAfter","deadlineOffset","isMinutes","isHours","isWeeks","weeks","updateDeadlineAfter","deadlineTs","isNumber","durationTs","hourTs","dayTs","weekTs","ReplicationWeekend","BMenu","isMenuShown","workdayOnly","weekendAttitudeItems","option","isSelected","onClick","options","skipWeekends","ReplicationSheetFooter","ButtonColor","wasFilled","filledFields","wasEmpty","save","fieldHighlighter","setContainer","$root","highlight","Event","EventEmitter","emit","EventName","UpdateReplicateParams","ReplicationSheetContent","BIcon","HeadlineMd","provide","createEmptyReplicateParams","isDailyPeriod","initReplicateParams","isObject","updateReplicateParams","showHelpDesk","top","BX","Helper","close","ReplicationSheet","BottomSheet","sheetBindProps","ReplicationSheetHeader","TimeFields","getGrid","Function","systemLogTimeRef","systemLogTime","querySelectorAll","systemLogTimeNode","getSystemLogTime","$nextTick","forEach","append","rowId","closest","dataset","offsetTimestamp","getOffsetTimestamp","timestampString","setRef","element","ErrorHint","errorMessage","errorLink","pattern","MessageField","Hint","message","activeHintRowId","showHint","formattedMessage","replace","trim","linkText","match","errors","MESSAGE","LINK","error","offsetWidth","maxWidth","width","openHint","closeHint","MessageFields","systemLogMessageRef","systemLogMessage","systemLogMessageNode","getSystemLogMessage","JSON","link","onHintOpen","onHintClose","GridLoader","gridId","ReplicationHistorySheetContent","templateId","idUtils","unbox","handleBeforeGridRequest","beforeUnmount","unsubscribe","Main","gridManager","PopupManager","getPopupById","html","apiClient","post","Endpoint","TemplateHistoryGetGrid","Runtime","grid","eventArgs","url","nav","Uri","getQueryParams","method","timeFields","messageFields","ReplicationHistorySheets","BLine","isEdit","isSheetShown","isHistorySheetShown","logCount","isLoading","historyTitle","getLogCount","count","TemplateHistoryGetCount","handleClick","setSheetShown","isShown","setHistorySheetShown","ReplicationChip","Chip","design","ChipDesign","ShadowAccent","ShadowNoAccent","isLocked","Core","getParams","restrictions","recurrentTask","available","showLimit","featureId","highlightField"],"mappings":";;;;;;;;OAEaA,eAAe,GAAGC,MAAM,CAACC,MAAM,CAAC;GAC5CC,EAAE,EAAEC,wBAAS,CAACC;CACf,CAAC,CAAC;;CCFK,SAASC,gBAAgB,CAACC,OAAgD,EACjF;GACC,IAAIA,OAAO,KAAKC,sCAAuB,CAACC,MAAM,EAC9C;KACC,OAAO,EAAE;;GAGV,IACCF,OAAO,KAAKC,sCAAuB,CAACE,MAAM,IACvCH,OAAO,KAAKC,sCAAuB,CAACG,OAAO,IAC3CJ,OAAO,KAAKC,sCAAuB,CAACI,QAAQ,EAEhD;KACC,OAAO,IAAI;;GAGZ,OAAO,IAAI;CACZ;;CClB2C;AAM3C,CAAO,MAAMC,wBAAwB,CACrC;GAGCC,WAAW,CAACC,eAAoC,EAChD;KAAA;OAAA;OAAA;;KACC,4CAAI,wCAAoBA,eAAe;;GAGxCC,QAAQ,GACR;KACC,MAAMC,kBAAkB,GAAG,4CAAI,sCAAkBA,kBAAkB;KACnE,MAAMC,QAAQ,GAAG,4CAAI,sCAAkBA,QAAQ,IAAI,CAAC;KAEpD,IAAID,kBAAkB,GAAG,CAAC,EAC1B;OACC,OAAOE,aAAG,CAACC,UAAU,CAAC,gCAAgC,EAAE;SACvD,cAAc,EAAEC,wBAAc,CAACC,MAAM,CAAC,OAAO,EAAE,CAAC,EAAEJ,QAAQ,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,IAAI,CAAC;SAChF,gBAAgB,EAAE,EAAE;SACpB,UAAU,EAAG,IAAGD,kBAAkB,GAAG,CAAE;QACvC,CAAC;;KAGH,OAAOE,aAAG,CAACI,gBAAgB,CAC1B,4BAA4B,EAC5BL,QAAQ,EACR;OACC,UAAU,EAAEA,QAAQ,GAAG,CAAC,GAAI,IAAGA,QAAS,EAAC,GAAG;MAC5C,CACD;;CAEH;;CCtCgC;CAAA;AAMhC,CAAO,MAAMM,yBAAyB,CACtC;GAGCV,WAAW,CAACC,eAAoC,EAChD;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,4CAAoBA,eAAe;;GAGxCC,QAAQ,GACR;KACC,MAAMS,SAAS,GAAG,4CAAI,0CAAkBA,SAAS,IAAI,CAAC;KAEtD,MAAMC,aAAa,GAAG,4CAAI,wBAAWC,MAAM,KAAK,CAAC,GAC9CR,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC,GACtD,4CAAI,wBAAWQ,GAAG,CAAEC,EAAE,IAAKV,aAAG,CAACC,UAAU,CAAE,2BAA0BS,EAAG,EAAC,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;KAEzF,OAAOX,aAAG,CAACI,gBAAgB,CAC1B,6BAA6B,EAC7BE,SAAS,EACT;OACC,UAAU,EAAEA,SAAS,GAAG,CAAC,GAAI,IAAGA,SAAU,EAAC,GAAG,EAAE;OAChD,YAAY,EAAG,KAAIC,aAAc;MACjC,CACD;;CASH;CAAC,yBALA;GACC,MAAMK,QAAQ,GAAG,4CAAI,0CAAkBA,QAAQ;GAE/C,OAAO,CAAC,IAAI,CAAAA,QAAQ,oBAARA,QAAQ,CAAEJ,MAAM,IAAG,CAAC,GAAGI,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,IAAI,EAAE;CAC3D;;CCjCuD;CAAA;CAAA;CAAA;AAExD,CAAO,MAAMC,0BAA0B,CACvC;GAGCnB,WAAW,CAACC,eAAoC,EAChD;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,4CAAoBA,eAAe;;GAGxCC,QAAQ,GACR;KACC,OAAO,4CAAI,0CAAkBkB,WAAW,KAAKC,qCAAsB,CAACC,QAAQ,2CACzE,IAAI,oFACJ,IAAI,yCAAoB;;CAuD7B;CAAC,8BAnDA;GACC,MAAMC,eAAe,GAAG,4CAAI,0CAAkBC,gBAAgB,IAAI,CAAC;GAEnE,OAAOnB,aAAG,CAACI,gBAAgB,CAC1B,gCAAgC,EAChCc,eAAe,EACf;KACC,UAAU,EAAEA,eAAe,GAAG,CAAC,GAAI,IAAGA,eAAgB,EAAC,GAAG,EAAE;KAC5D,cAAc,EAAE,4CAAI,0CAAkBE;IACtC,CACD;CACF;CAAC,8BAGD;GACC,MAAMC,cAAc,GAAG,4CAAI,0CAAkBA,cAAc;GAC3D,MAAMC,UAAU,GAAG,4CAAI,0CAAkBC,iBAAiB;GAC1D,MAAMC,aAAa,GAAGrC,gBAAgB,CAACkC,cAAc,CAAC;GAEtD,MAAMI,SAAS,GAAGzB,aAAG,CAACC,UAAU,CAAE,+BAA8BqB,UAAW,GAAEE,aAAc,EAAC,CAAC;GAC7F,MAAMpC,OAAO,GAAGY,aAAG,CAACC,UAAU,CAAE,+BAA8BoB,cAAc,GAAG,CAAE,EAAC,CAAC;GACnF,MAAMH,eAAe,GAAG,4CAAI,0CAAkBQ,gBAAgB,IAAI,CAAC;GAEnE,OAAO1B,aAAG,CAACC,UAAU,CACnB,iCAA8B,wCAAE,IAAI,mEAAkC,EAAC,EACxE;KACC,cAAc,EAAEwB,SAAS;KACzB,gBAAgB,EAAErC,OAAO;KACzB,UAAU,EAAE8B,eAAe,GAAG,CAAC,GAAI,IAAGA,eAAgB,EAAC,GAAG;IAC1D,CACD;CACF;CAAC,2CAGD;GACC,MAAM9B,OAAO,GAAG,4CAAI,0CAAkBiC,cAAc;GAEpD,IAAIjC,OAAO,KAAKC,sCAAuB,CAACC,MAAM,EAC9C;KACC,OAAO,QAAQ;;GAGhB,IAAIF,OAAO,KAAKC,sCAAuB,CAACsC,SAAS,IAC7CvC,OAAO,KAAKC,sCAAuB,CAACuC,MAAM,IAC1CxC,OAAO,KAAKC,sCAAuB,CAACwC,QAAQ,EAChD;KACC,OAAO,QAAQ;;GAGhB,OAAO,EAAE;CACV;;CCpEuD;CAAA;CAAA;CAAA;AAGxD,CAAO,MAAMC,yBAAyB,CACtC;GAGCnC,WAAW,CAACC,eAAoC,EAChD;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,4CAAoBA,eAAe;;GAGxCC,QAAQ,GACR;KACC,OAAO,4CAAI,0CAAkBkC,UAAU,KAAKC,oCAAqB,CAACf,QAAQ,2CACvE,IAAI,wFACJ,IAAI,6CAAoB;;CAuD7B;CAAC,gCAnDA;GACC,MAAMgB,YAAY,GAAG,4CAAI,0CAAkBA,YAAY,IAAI,CAAC;GAC5D,MAAMC,WAAW,GAAG,4CAAI,0CAAkBC,YAAY,IAAI,CAAC;GAE3D,OAAOnC,aAAG,CAACC,UAAU,CACpB,+BAA+B,EAC/B;KACC,UAAU,EAAG,IAAGgC,YAAa,EAAC;KAC9B,SAAS,EAAE/B,wBAAc,CAACC,MAAM,CAAC,GAAG,EAAE,IAAIiC,IAAI,EAAE,CAACC,QAAQ,CAACH,WAAW,GAAG,CAAC,CAAC,GAAG,IAAI;IACjF,CACD;CACF;CAAC,gCAGD;GACC,MAAMI,gBAAgB,GAAG,4CAAI,0CAAkBA,gBAAgB,IAAI,CAAC;GACpE,MAAMC,aAAa,GAAG,4CAAI,0CAAkBA,aAAa,IAAI,CAAC;GAC9D,MAAML,WAAW,GAAG,4CAAI,0CAAkBM,YAAY,IAAI,CAAC;GAE3D,MAAMC,cAAc,GAAGzC,aAAG,CAACC,UAAU,CAAE,+BAA8BqC,gBAAiB,GAAEnD,gBAAgB,CACvGoD,aAAa,GAAG,CAAC,CAChB,EAAC,CAAC;GAEJ,OAAOvC,aAAG,CAACC,UAAU,CACnB,gCAA6B,wCAAE,IAAI,2CAAsB,EAAC,EAC3D;KACC,cAAc,EAAEwC,cAAc;KAC9B,YAAY,EAAEzC,aAAG,CAACC,UAAU,CAAE,+BAA8BsC,aAAc,EAAC,CAAC;KAC5E,SAAS,EAAErC,wBAAc,CAACC,MAAM,CAAC,GAAG,EAAE,IAAIiC,IAAI,EAAE,CAACC,QAAQ,CAACH,WAAW,GAAG,CAAC,CAAC,GAAG,IAAI;IACjF,CACD;CACF;CAAC,+BAGD;GACC,MAAM9C,OAAO,GAAG,4CAAI,0CAAkBmD,aAAa;GAEnD,IAAInD,OAAO,KAAKsD,4CAA6B,CAACpD,MAAM,EACpD;KACC,OAAO,QAAQ;;GAGhB,IAAIF,OAAO,KAAKsD,4CAA6B,CAACf,SAAS,IACnDvC,OAAO,KAAKsD,4CAA6B,CAACb,QAAQ,IAClDzC,OAAO,KAAKsD,4CAA6B,CAACd,MAAM,EACpD;KACC,OAAO,QAAQ;;GAGhB,OAAO,EAAE;CACV;;CCvEM,MAAMe,mBAAmB,CAChC;GACC,OAAOxC,MAAM,CAACyC,SAAiB,EAC/B;KACC,OAAO1C,wBAAc,CAACC,MAAM,CAC3BD,wBAAc,CAAC2C,SAAS,CAAC,mBAAmB,CAAC,EAC7C,CAACD,SAAS,GAAGE,8BAAQ,CAACC,SAAS,CAACH,SAAS,CAAC,IAAI,IAAI,CAClD;;GAGF,OAAOI,eAAe,CAACC,gBAAwB,EAC/C;KACC,OAAOC,cAAI,CAACC,cAAc,CAACF,gBAAgB,CAAC,GACzCA,gBAAgB,GAChBG,8BAAQ,CAACC,YAAY;;GAIzB,OAAOC,eAAe,CAACC,IAAU,EAAEC,UAAkB,EACrD;KACC,MAAM,CAACC,KAAK,EAAEC,OAAO,CAAC,GAAGF,UAAU,CAACG,KAAK,CAAC,GAAG,CAAC;KAC9CJ,IAAI,CAACK,QAAQ,CAACC,QAAQ,CAACJ,KAAK,EAAE,EAAE,CAAC,EAAEI,QAAQ,CAACH,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;KAE/D,OAAOH,IAAI;;GAGZ,OAAOO,2BAA2B,CAACC,SAAiB,EACpD;KACC,MAAMC,QAAQ,GAAGC,kBAAQ,CAACC,WAAW,CAACC,QAAQ,CAACJ,SAAS,GAAG,IAAI,CAAC;KAEhE,OAAO7D,wBAAc,CAACC,MAAM,CAAC,KAAK,EAAE6D,QAAQ,CAAC;;CAE/C;;CC3B8D;CAAA;CAAA;CAAA;CAAA;AAG9D,CAAO,MAAMI,sBAAsB,CACnC;GAICzE,WAAW,CAACC,eAAoC,EAChD;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,4CAAoBA,eAAe;KACvC,4CAAI,oDAAyBA,eAAe,CAACyE,MAAM;;GAmCpDxE,QAAQ,GACR;KACC,OAAO,CACN,4CAAI,8CAAsBA,QAAQ,EAAE,0CACpC,IAAI,mFACJ,IAAI,8BACJ,CAACc,IAAI,CAAC,GAAG,CAAC;;CAyCb;CAAC,kCA/EwB0D,MAAyC,EACjE;GACC,QAAQA,MAAM;KAEb,KAAKC,gCAAiB,CAACC,MAAM;OAC7B;SACC,4CAAI,gDAAwB,IAAIlE,yBAAyB,yCAAC,IAAI,0CAAkB;SAEhF;;KAGD,KAAKiE,gCAAiB,CAACE,OAAO;OAC9B;SACC,4CAAI,gDAAwB,IAAI1D,0BAA0B,yCAAC,IAAI,0CAAkB;SAEjF;;KAGD,KAAKwD,gCAAiB,CAACG,MAAM;OAC7B;SACC,4CAAI,gDAAwB,IAAI3C,yBAAyB,yCAAC,IAAI,0CAAkB;SAEhF;;KAGD;OACA;SACC,4CAAI,gDAAwB,IAAIpC,wBAAwB,yCAAC,IAAI,0CAAkB;;;CAGlF;CAAC,8BAYD;GACC,MAAMgF,MAAM,GAAG,4CAAI,0CAAkBC,OAAO;GAE5C,OAAO3E,aAAG,CAACC,UAAU,CAAC,iCAAiC,EAAE;KACxD,QAAQ,EAAE0C,mBAAmB,CAACxC,MAAM,CAACuE,MAAM;IAC3C,CAAC;CACH;CAAC,wBAGD;GACC,MAAME,UAAU,GAAG,4CAAI,0CAAkBA,UAAU;GAEnD,IAAIA,UAAU,KAAKC,oCAAqB,CAACC,KAAK,EAC9C;KACC,MAAMC,KAAK,GAAG,4CAAI,0CAAkBA,KAAK;KAEzC,OAAO/E,aAAG,CAACI,gBAAgB,CAC1B,4CAA4C,EAC5C2E,KAAK,EACL;OACC,SAAS,EAAEA;MACX,CACD;;GAGF,IAAIH,UAAU,KAAKC,oCAAqB,CAACzC,IAAI,IAAI,4CAAI,0CAAkB4C,KAAK,EAC5E;KACC,OAAOhF,aAAG,CAACC,UAAU,CACpB,+BAA+B,EAC/B;OACC,QAAQ,EAAEC,wBAAc,CAACC,MAAM,CAAC,OAAO,EAAE,IAAIiC,IAAI,CAAC,4CAAI,0CAAkB4C,KAAK,CAAC;MAC9E,CACD;;GAGF,OAAO,EAAE;CACV;;CC9FD;AACA,CAAO,MAAMC,uBAAuB,GAAG;GACtCC,IAAI,EAAE,yBAAyB;GAC/BC,UAAU,EAAE;gBACXC,+CAAS;aACTC;IACA;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE,EAAE;KACRC,MAAM,EAAE,EAAE;KACVC,UAAU,EAAE;IACZ;GACDC,KAAK,GAAwB,EAAE;GAC/BC,QAAQ,EAAE;KACTC,QAAQ,GACR;OACC,OAAO,CAAC,IAAI,CAACH,UAAU,IAAI,CAAC,IAAI,CAACF,IAAI,CAACM,MAAM,CAACC,IAAI;MACjD;KACDC,aAAa,GACb;OACC,OAAO,IAAI3B,sBAAsB,CAAC,IAAI,CAACmB,IAAI,CAAC3F,eAAe,CAAC,CAACC,QAAQ,EAAE;;IAExE;GACDmG,OAAO,EAAE;KACRC,aAAa,GACb;OACC,KAAKC,iDAAW,CAACC,MAAM,CAAC,IAAI,CAACX,MAAM,EAAE;SACpCY,SAAS,EAAE,KAAK;SAChBxG,eAAe,EAAE,IAAI,CAAC2F,IAAI,CAAC3F;QAC3B,CAAC;;IAEH;GACDyG,QAAQ,EAAG;;;;;CAKZ,CAAC;;CCnCD;AACA,CAAO,MAAMC,kBAAkB,GAAG;GACjCpB,IAAI,EAAE,oBAAoB;GAC1BC,UAAU,EAAE;KACXF,uBAAuB;aACvBsB,+BAAM;eACNC;IACA;GACDlB,MAAM,EAAE;KACPC,IAAI,EAAE;IACN;GACDG,KAAK,GACL;KACC,OAAO;gBACNe;MACA;IACD;GACDJ,QAAQ,EAAG;;;;;;;;;;;CAWZ,CAAC;;CC3BD;AACA,CAAO,MAAMK,mBAAmB,GAAG;GAClCxB,IAAI,EAAE,qBAAqB;GAC3BC,UAAU,EAAE;cACXwB,kCAAO;aACPC,0BAAM;aACNC,+BAAM;iBACNC;IACA;GACDC,KAAK,EAAE;KACNC,QAAQ,EAAE;OACTC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,WAAW,EAAE;OACZH,IAAI,EAAEI,OAAO;OACbC,OAAO,EAAE;MACT;KACDjD,MAAM,EAAE;OACP4C,IAAI,EAAEM,MAAM;OACZD,OAAO,EAAEhD,gCAAiB,CAACkD,KAAK;OAChCC,SAAS,EAAGC,KAAa,IAAK;SAC7B,OAAO,CAACpD,gCAAiB,CAACkD,KAAK,EAAElD,gCAAiB,CAACC,MAAM,EAAED,gCAAiB,CAACE,OAAO,CAAC,CAACmD,QAAQ,CAACD,KAAK,CAAC;;;IAGvG;GACDE,KAAK,EAAE,CAAC,iBAAiB,EAAE,oBAAoB,CAAC;GAChDlC,KAAK,GACL;KACC,OAAO;oBACNmC,+BAAW;kBACXC;MACA;IACD;GACDC,IAAI,GACJ;KACC,OAAO;OACNC,YAAY,EAAE,IAAI,CAAChB;MACnB;IACD;GACDrB,QAAQ,EAAE;KACTsC,gBAAgB,EAAE;OACjBC,GAAG,GACH;SACC,OAAO,IAAI,CAACd,WAAW;QACvB;OACDe,GAAG,CAACT,KAAc,EAClB;SACC,IAAI,CAACU,KAAK,CAAC,oBAAoB,EAAEV,KAAK,CAAC;;MAExC;KACDW,aAAa,EAAE;OACdH,GAAG,GACH;SAAA;SACC,OAAO,uBAAI,CAAClB,QAAQ,qBAAb,eAAesB,QAAQ,EAAE,KAAI,EAAE;QACtC;OACDH,GAAG,CAACT,KAAc,GAAG,EAAE,EACvB;SAAA;SACC,IAAIV,QAAQ,gBAAGnD,QAAQ,CAAC6D,KAAK,CAACa,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,wBAAI,CAAC;SAC7D,IAAI,CAACrF,cAAI,CAACsF,SAAS,CAACxB,QAAQ,CAAC,IAAIA,QAAQ,GAAG,CAAC,EAC7C;WACCA,QAAQ,GAAG,IAAI,CAACgB,YAAY;;SAG7B,IAAI,CAACA,YAAY,GAAGhB,QAAQ;SAC5B,IAAI,CAACoB,KAAK,CAAC,iBAAiB,EAAEpB,QAAQ,CAAC;;MAExC;KACDyB,cAAc,GACd;OACC,MAAMC,OAAO,GAAIrE,MAAyC,IAAK;SAC9D,QAAQA,MAAM;WAEb,KAAKC,gCAAiB,CAACC,MAAM;aAC5B,OAAO,oCAAoC;WAC5C,KAAKD,gCAAiB,CAACE,OAAO;aAC7B,OAAO,qCAAqC;WAC7C;aACC,OAAO,mCAAmC;;QAE5C;OAED,OAAOxE,aAAG,CAACI,gBAAgB,CAACsI,OAAO,CAAC,IAAI,CAACrE,MAAM,CAAC,EAAE,IAAI,CAAC2C,QAAQ,CAAC;;IAEjE;GACDX,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;CA0BZ,CAAC;;CClHD;AACA,CAAO,MAAMsC,sBAAsB,GAAG;GACrCzD,IAAI,EAAE,wBAAwB;GAC9BC,UAAU,EAAE;mBACXyD,qDAAY;KACZlC;IACA;GACDpB,MAAM,EAAE;KACP1F,eAAe,EAAE;IACjB;GACDgI,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBjC,QAAQ,EAAE;KACTtB,MAAM,GACN;OACC,OAAOwE,eAAO,CAACvE,gCAAiB,CAACkD,KAAK,CAAC;MACvC;KACDJ,WAAW,EAAE;OACZc,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACG,QAAQ,GAAG,CAAC;QACxC;OACDoI,GAAG,CAACf,WAAoB,EACxB;SACC,IAAI,CAACgB,KAAK,CAAC,QAAQ,EAAE;WAAErI,QAAQ,EAAEqH,WAAW,GAAG,CAAC,GAAG;UAAM,CAAC;;MAE3D;KACDJ,QAAQ,EAAE;OACTkB,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACG,QAAQ,IAAI,CAAC;QACzC;OACDoI,GAAG,CAACT,KAAa,EACjB;SACC,IAAI,CAACU,KAAK,CAAC,QAAQ,EAAE;WAAErI,QAAQ,EAAE2H;UAAO,CAAC;;MAE1C;KACDoB,QAAQ,GACR;OACC,OAAO9I,aAAG,CAACI,gBAAgB,CAC1B,wCAAwC,EACxC,IAAI,CAAC4G,QAAQ,EACb;SACC,SAAS,EAAE,IAAI,CAACA;QAChB,CACD;MACD;KACD+B,WAAW,GACX;OACC,OAAOF,eAAO,CAACvE,gCAAiB,CAACE,OAAO,CAAC;MACzC;KACDwE,gBAAgB,EAAE;OACjBd,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACE,kBAAkB,GAAG,CAAC;QAClD;OACDqI,GAAG,CAACf,WAAoB,EACxB;SACC,IAAI,CAACgB,KAAK,CAAC,QAAQ,EAAE;WAAEtI,kBAAkB,EAAEsH,WAAW,GAAG,CAAC,GAAG;UAAM,CAAC;;MAErE;KACD6B,aAAa,EAAE;OACdf,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACE,kBAAkB,IAAI,CAAC;QACnD;OACDqI,GAAG,CAACT,KAAa,EACjB;SACC,IAAI,CAACU,KAAK,CAAC,QAAQ,EAAE;WAAEtI,kBAAkB,EAAE4H;UAAO,CAAC;;MAEpD;KACDwB,aAAa,GACb;OACC,OAAOlJ,aAAG,CAACI,gBAAgB,CAC1B,0CAA0C,EAC1C,IAAI,CAAC6I,aAAa,EAClB;SACC,SAAS,EAAE,IAAI,CAACA;QAChB,CACD;;IAEF;GACD5C,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA8BZ,CAAC;;CC/GD,MAAM8C,IAAI,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;CAC9D,MAAMC,UAAU,GAAG;GAClBC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE;CACN,CAAC;;CAED;AACA,CAAO,MAAMC,+BAA+B,GAAG;GAC9C1E,IAAI,EAAE,iCAAiC;GACvCC,UAAU,EAAE;iBACX2B,6CAAU;aACVD;IACA;GACDE,KAAK,EAAE;KACN8C,YAAY,EAAE;;OAEb5C,IAAI,EAAE6C,KAAK;OACX3C,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,qBAAqB,CAAC;GAC9BjC,QAAQ,EAAE;KACT/E,QAAQ,GACR;OACC,MAAMmJ,WAAW,GAAG;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE;QAAG;OACvE,MAAMC,cAAc,GAAGR,WAAW,CAAC3G,8BAAQ,CAACoH,SAAS,CAAC;OAEtD,OAAO,CAACrB,IAAI,CAACsB,KAAK,CAACF,cAAc,CAAC,EAAEpB,IAAI,CAACsB,KAAK,CAAC,CAAC,EAAEF,cAAc,CAAC,CAAC,CAACG,IAAI,CAAC,CAAC,CAAC;MAC1E;KACDC,WAAW,GACX;OACC,MAAMxK,MAAM,GAAG,GAAG;OAClB,MAAMyK,aAAa,GAAG,IAAIxI,IAAI,EAAE,CAACyI,MAAM,EAAE;OAEzC,OAAO,IAAI,CAACjK,QAAQ,CAACH,GAAG,CAAEqK,GAAG,IAAK;SACjC,MAAMC,OAAO,GAAG,IAAI3I,IAAI,EAAE;SAC1B,MAAM4I,aAAa,GAAG,CAAC7B,IAAI,CAAC8B,OAAO,CAACH,GAAG,CAAC,GAAGF,aAAa,IAAI,CAAC;SAE7DG,OAAO,CAACG,OAAO,CAACH,OAAO,CAACI,OAAO,EAAE,GAAGH,aAAa,CAAC;SAElD,OAAO;WACNI,KAAK,EAAElL,wBAAc,CAACC,MAAM,CAACA,MAAM,EAAE4K,OAAO,CAAC;WAC7CrD,KAAK,EAAE0B,UAAU,CAAC0B,GAAG;UACrB;QACD,CAAC;;IAEH;GACD9E,OAAO,EAAE;KACRqF,SAAS,CAACP,GAAW,EACrB;OACC,IAAI,IAAI,CAACjB,YAAY,CAAClC,QAAQ,CAACmD,GAAG,CAAC,EACnC;SACC,IAAI,CAAC1C,KAAK,CAAC,qBAAqB,EAAE,IAAI,CAACyB,YAAY,CAACyB,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKT,GAAG,CAAC,CAAC;QAC7E,MAED;SACC,IAAI,CAAC1C,KAAK,CAAC,qBAAqB,EAAE,CAAC,GAAG,IAAI,CAACyB,YAAY,EAAEiB,GAAG,CAAC,CAAC;;;IAGhE;GACDzE,QAAQ,EAAG;;;;;;;;;;;;;;;;;CAiBZ,CAAC;;CC/ED;AACA,CAAO,MAAMmF,uBAAuB,GAAG;GACtCtG,IAAI,EAAE,yBAAyB;GAC/BC,UAAU,EAAE;mBACXyD,qDAAY;KACZlC,mBAAmB;KACnBkD;IACA;GACDtE,MAAM,EAAE;KACP1F,eAAe,EAAE;IACjB;GACDgI,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBjC,QAAQ,EAAE;KACTtB,MAAM,GACN;OACC,OAAOwE,eAAO,CAACvE,gCAAiB,CAACC,MAAM,CAAC;MACxC;KACD6C,WAAW,EAAE;OACZc,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACU,SAAS,GAAG,CAAC;QACzC;OACD6H,GAAG,CAACf,WAAoB,EACxB;SACC,IAAI,CAACgB,KAAK,CAAC,QAAQ,EAAE;WAAE9H,SAAS,EAAE8G,WAAW,GAAG,CAAC,GAAG;UAAM,CAAC;;MAE5D;KACDJ,QAAQ,EAAE;OACTkB,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACU,SAAS,IAAI,CAAC;QAC1C;OACD6H,GAAG,CAACT,KAAa,EACjB;SACC,IAAI,CAACU,KAAK,CAAC,QAAQ,EAAE;WAAE9H,SAAS,EAAEoH;UAAO,CAAC;;MAE3C;KACD9G,QAAQ,EAAE;OACTsH,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACgB,QAAQ;QACpC;OACDuH,GAAG,CAACvH,QAAkB,EACtB;SACC,IAAI,CAACwH,KAAK,CAAC,QAAQ,EAAE;WAAExH;UAAU,CAAC;;MAEnC;KACDkI,QAAQ,GACR;OACC,OAAO9I,aAAG,CAACI,gBAAgB,CAC1B,yCAAyC,EACzC,IAAI,CAAC4G,QAAQ,EACb;SACC,SAAS,EAAE,IAAI,CAACA;QAChB,CACD;;IAEF;GACDX,QAAQ,EAAG;;;;;;;;;;;;;;;;;CAiBZ,CAAC;;CC/ED;AACA,CAAO,MAAMoF,sCAAsC,GAAG;GACrDvG,IAAI,EAAE,wCAAwC;GAC9CC,UAAU,EAAE;cACXwB,kCAAO;aACPC,0BAAM;aACNC,+BAAM;cACN6E;IACA;GACD3E,KAAK,EAAE;KACNhG,WAAW,EAAE;OACZkG,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACD1F,SAAS,EAAE;OACVwF,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,oBAAoB,EAAE,kBAAkB,CAAC;GACjDlC,KAAK,GACL;KACC,OAAO;oBACNmC,+BAAW;kBACXC,6BAAS;+BACT9G;MACA;IACD;GACD+G,IAAI,GACJ;KACC,OAAO;OACN4D,aAAa,EAAE;MACf;IACD;GACDhG,QAAQ,EAAE;KACTiG,QAAQ,GACR;OACC,OAAO,IAAI,CAAC7K,WAAW,KAAKC,qCAAsB,CAACC,QAAQ;;IAE5D;GACD4K,OAAO,GAAG;KACT,IAAI,CAACF,aAAa,GAAG,IAAI,CAAClK,SAAS;IACnC;GACDuE,OAAO,EAAE;KACR8F,eAAe,CAACrK,SAAiB,GAAG,EAAE,EACtC;OAAA;OACC,IAAIsK,IAAI,gBAAGlI,QAAQ,CAACpC,SAAS,CAAC8G,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,wBAAI,CAAC;OAE7D,IAAI,CAACrB,MAAM,CAACsB,SAAS,CAACuD,IAAI,CAAC,IAAIA,IAAI,GAAG,CAAC,IAAIA,IAAI,GAAG,EAAE,EACpD;SACCA,IAAI,GAAG,IAAI,CAACJ,aAAa;;OAG1B,IAAI,CAACA,aAAa,GAAGI,IAAI;OACzB,IAAI,CAAC3D,KAAK,CAAC,kBAAkB,EAAE2D,IAAI,CAAC;;IAErC;GACD1F,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;CA0BZ,CAAC;;CCtFD;AACA,CAAO,MAAM2F,kBAAkB,GAAG;GACjC9G,IAAI,EAAE,oBAAoB;GAC1BC,UAAU,EAAE;eACX8G;IACA;GACDlF,KAAK,EAAE;KACNmF,UAAU,EAAE;OACXjF,IAAI,EAAEC,MAAM;OACZI,OAAO,EAAE;MACT;KACDsE,QAAQ,EAAE;OACT3E,IAAI,EAAEI,OAAO;OACbC,OAAO,EAAE;MACT;KACDlI,OAAO,EAAE;OACR6H,IAAI,EAAEC,MAAM;OACZI,OAAO,EAAE;;IAEV;GACDM,KAAK,EAAE,CAAC,mBAAmB,CAAC;GAC5BjC,QAAQ,EAAE;KACTwG,aAAa,GACb;OACC,IAAI,IAAI,CAAC/M,OAAO,KAAKC,sCAAuB,CAACC,MAAM,EACnD;SACC,OAAO,QAAQ;;OAGhB,IACC,IAAI,CAACF,OAAO,KAAKC,sCAAuB,CAACsC,SAAS,IAC/C,IAAI,CAACvC,OAAO,KAAKC,sCAAuB,CAACuC,MAAM,IAC/C,IAAI,CAACxC,OAAO,KAAKC,sCAAuB,CAACwC,QAAQ,EAErD;SACC,OAAO,QAAQ;;OAGhB,OAAO,EAAE;MACT;KACDuK,KAAK,GACL;OACC,OAAO,CACN;SAAEpN,EAAE,EAAE,CAAC;SAAEqN,KAAK,EAAE,IAAI,CAACC,GAAG,CAAE,sDAAqD,IAAI,CAACH,aAAc,EAAC;QAAG,EACtG;SAAEnN,EAAE,EAAE,CAAC;SAAEqN,KAAK,EAAE,IAAI,CAACC,GAAG,CAAE,uDAAsD,IAAI,CAACH,aAAc,EAAC;QAAG,EACvG;SAAEnN,EAAE,EAAE,CAAC;SAAEqN,KAAK,EAAE,IAAI,CAACC,GAAG,CAAE,sDAAqD,IAAI,CAACH,aAAc,EAAC;QAAG,EACtG;SAAEnN,EAAE,EAAE,CAAC;SAAEqN,KAAK,EAAE,IAAI,CAACC,GAAG,CAAE,uDAAsD,IAAI,CAACH,aAAc,EAAC;QAAG,EACvG;SAAEnN,EAAE,EAAE,CAAC;SAAEqN,KAAK,EAAE,IAAI,CAACC,GAAG,CAAE,qDAAoD,IAAI,CAACH,aAAc,EAAC;QAAG,CACrG;MACD;KACDI,IAAI,GACJ;OACC,OAAO,IAAI,CAACH,KAAK,CAACI,IAAI,CAAC,CAAC;SAAExN;QAAI,KAAKA,EAAE,KAAK,IAAI,CAACkN,UAAU,CAAC;;IAE3D;GACD7F,QAAQ,EAAG;;;;;;;;CAQZ,CAAC;;CC7DD,MAAM8C,MAAI,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;CAC9D,MAAMC,YAAU,GAAG;GAClBC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE,CAAC;GACNC,GAAG,EAAE;CACN,CAAC;;CAED;AACA,CAAO,MAAM8C,aAAa,GAAG;GAC5BvH,IAAI,EAAE,eAAe;GACrBC,UAAU,EAAE;eACX8G;IACA;GACDlF,KAAK,EAAE;;KAENmF,UAAU,EAAE;OACXjF,IAAI,EAAEC,MAAM;OACZI,OAAO,EAAEjI,sCAAuB,CAACE;MACjC;KACDqM,QAAQ,EAAE;OACT3E,IAAI,EAAEI,OAAO;OACbC,OAAO,EAAE;;IAEV;GACDM,KAAK,EAAE,CAAC,mBAAmB,CAAC;GAC5BjC,QAAQ,EAAE;KACTyG,KAAK,GACL;OACC,MAAMrC,WAAW,GAAG;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE,CAAC;SAAEC,EAAE,EAAE;QAAG;OACvE,MAAMC,cAAc,GAAGR,WAAW,CAAC3G,8BAAQ,CAACoH,SAAS,CAAC;OAEtD,MAAMrK,MAAM,GAAG,GAAG;OAClB,MAAMyK,aAAa,GAAG,IAAIxI,IAAI,EAAE,CAACyI,MAAM,EAAE;OAEzC,OAAO,CAAC1B,MAAI,CAACsB,KAAK,CAACF,cAAc,CAAC,EAAEpB,MAAI,CAACsB,KAAK,CAAC,CAAC,EAAEF,cAAc,CAAC,CAAC,CAChEG,IAAI,CAAC,CAAC,CAAC,CACPjK,GAAG,CAAEqK,GAAG,IAAK;SACb,MAAMC,OAAO,GAAG,IAAI3I,IAAI,EAAE;SAC1B,MAAM4I,aAAa,GAAG,CAAC7B,MAAI,CAAC8B,OAAO,CAACH,GAAG,CAAC,GAAGF,aAAa,IAAI,CAAC;SAE7DG,OAAO,CAACG,OAAO,CAACH,OAAO,CAACI,OAAO,EAAE,GAAGH,aAAa,CAAC;SAElD,OAAO;WACNhM,EAAE,EAAEoK,YAAU,CAAC0B,GAAG,CAAC;WACnBuB,KAAK,EAAEnM,wBAAc,CAACC,MAAM,CAACA,MAAM,EAAE4K,OAAO;UAC5C;QACD,CAAC;MACH;KACDwB,IAAI,GACJ;OACC,OAAO,IAAI,CAACH,KAAK,CAACI,IAAI,CAAC,CAAC;SAAExN;QAAI,KAAKA,EAAE,KAAK,IAAI,CAACkN,UAAU,CAAC;;IAE3D;GACD7F,QAAQ,EAAG;;;;;;;;CAQZ,CAAC;;CChED;AACA,CAAO,MAAMqG,qCAAqC,GAAG;GACpDxH,IAAI,EAAE,uCAAuC;GAC7CC,UAAU,EAAE;KACX6G,kBAAkB;cAClBN,yCAAO;eACPO,2CAAQ;KACRQ;IACA;GACD1F,KAAK,EAAE;KACNhG,WAAW,EAAE;OACZkG,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACD/H,OAAO,EAAE;OACR6H,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDwF,aAAa,EAAE;OACd1F,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,oBAAoB,EAAE,sBAAsB,EAAE,gBAAgB,CAAC;GACvElC,KAAK,GACL;KACC,OAAO;+BACN1E;MACA;IACD;GACD2E,QAAQ,EAAE;KACTiG,QAAQ,GACR;OACC,OAAO,IAAI,CAAC7K,WAAW,KAAKC,qCAAsB,CAAC4L,QAAQ;;IAE5D;GACDvG,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;CAwBZ,CAAC;;CChDD;AACA,CAAO,MAAMwG,wBAAwB,GAAG;GACvC3H,IAAI,EAAE,0BAA0B;GAChCC,UAAU,EAAE;aACXyB,0BAAM;KACNF,mBAAmB;KACnB+E,sCAAsC;KACtCiB,qCAAqC;mBACrC9D,qDAAY;cACZ8C;IACA;GACDpG,MAAM,EAAE;KACP1F,eAAe,EAAE;IACjB;GACDgI,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBlC,KAAK,GACL;KACC,OAAO;oBACNmC,+BAAW;kBACXC;MACA;IACD;GACDC,IAAI,GACJ;KACC,OAAO;OACNtG,SAAS,EAAE,CAAC;OACZqJ,GAAG,EAAE;MACL;IACD;GACDnF,QAAQ,EAAE;KACTtB,MAAM,GACN;OACC,OAAOwE,eAAO,CAACvE,gCAAiB,CAACE,OAAO,CAAC;MACzC;KACDtD,eAAe,GACf;OACC,OAAO,IAAI,CAACH,WAAW,KAAKC,qCAAsB,CAACC,QAAQ,GACxD,IAAI,CAACrB,eAAe,CAACuB,gBAAgB,GACrC,IAAI,CAACvB,eAAe,CAAC8B,gBAAgB;MACxC;KACD0F,WAAW,EAAE;OACZc,GAAG,GACH;SACC,OAAO,IAAI,CAAChH,eAAe,GAAG,CAAC;QAC/B;OACDiH,GAAG,CAACf,WAAoB,EACxB;SACC,IAAI,CAAC0F,qBAAqB,CAAC1F,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC;;MAEnD;KACDJ,QAAQ,EAAE;OACTkB,GAAG,GACH;SACC,OAAO,IAAI,CAAChH,eAAe,IAAI,CAAC;QAChC;OACDiH,GAAG,CAACT,KAAa,EACjB;SACC,IAAI,CAACoF,qBAAqB,CAACpF,KAAK,CAAC;;MAElC;KACD3G,WAAW,EAAE;OACZmH,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACmB,WAAW;QACvC;OACDoH,GAAG,CAAClB,IAAY,EAChB;SACC,MAAM8F,SAAS,GAAG,IAAI,CAAChM,WAAW;SAElC,IAAI,CAACoF,MAAM,CAAC;WAAEpF,WAAW,EAAEkG;UAAM,CAAC;SAElC,IAAI8F,SAAS,KAAK9F,IAAI,EACtB;WACC,IAAI,CAAC+F,yBAAyB,CAAC/F,IAAI,CAAC;;;MAGtC;KACD7F,aAAa,EAAE;OACd8G,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACwB,aAAa,IAAI,CAAC;QAC9C;OACD+G,GAAG,CAACT,KAAa,EACjB;SACC,IAAI,CAACvB,MAAM,CAAC;WAAE/E,aAAa,EAAEsG;UAAO,CAAC;;MAEtC;KACDrG,cAAc,EAAE;OACf6G,GAAG,GACH;SAAA;SACC,gCAAO,IAAI,CAACtI,eAAe,CAACyB,cAAc,oCAAIhC,sCAAuB,CAACE,MAAM;QAC5E;OACD4I,GAAG,CAACT,KAAoB,EACxB;SACC,IAAI,CAACvB,MAAM,CAAC;WAAE9E,cAAc,EAAEqG;UAAO,CAAC;;MAEvC;KACDnG,iBAAiB,EAAE;OAClB2G,GAAG,GACH;SAAA;SACC,iCAAO,IAAI,CAACtI,eAAe,CAAC2B,iBAAiB,qCAAI,CAAC;QAClD;OACD4G,GAAG,CAACT,KAAoB,EACxB;SACC,IAAI,CAACvB,MAAM,CAAC;WAAE5E,iBAAiB,EAAEmG;UAAO,CAAC;;MAE1C;KACDoB,QAAQ,GACR;OACC,OAAO9I,aAAG,CAACI,gBAAgB,CAC1B,0CAA0C,EAC1C,IAAI,CAAC4G,QAAQ,EACb;SACC,SAAS,EAAE,IAAI,CAACA;QAChB,CACD;;IAEF;GACDhB,OAAO,EAAE;KACRG,MAAM,CAAC8G,MAAoC,EAC3C;OACC,IAAI,CAAC7E,KAAK,CAAC,QAAQ,EAAE6E,MAAM,CAAC;MAC5B;KACDH,qBAAqB,CAAC5L,eAA8B,EACpD;OACC,IAAI,IAAI,CAACH,WAAW,KAAKC,qCAAsB,CAACC,QAAQ,EACxD;SACC,IAAI,CAACkF,MAAM,CAAC;WAAEhF,gBAAgB,EAAED;UAAiB,CAAC;QAClD,MAED;SACC,IAAI,CAACiF,MAAM,CAAC;WAAEzE,gBAAgB,EAAER;UAAiB,CAAC;;MAEnD;KACD8L,yBAAyB,CAACjM,WAAmB,EAC7C;OACC,MAAMmM,KAAmC,GAAG,EAAE;OAE9C,IAAInM,WAAW,KAAKC,qCAAsB,CAACC,QAAQ,EACnD;SACCiM,KAAK,CAAC7L,cAAc,GAAG,IAAI;SAC3B6L,KAAK,CAAC3L,iBAAiB,GAAG,IAAI;SAC9B2L,KAAK,CAAC/L,gBAAgB,GAAG,IAAI,CAACvB,eAAe,CAAC8B,gBAAgB;SAC9DwL,KAAK,CAACxL,gBAAgB,GAAG,IAAI;QAC7B,MAED;SACCwL,KAAK,CAAC9L,aAAa,GAAG,IAAI;SAC1B8L,KAAK,CAACxL,gBAAgB,GAAG,IAAI,CAAC9B,eAAe,CAACuB,gBAAgB;SAC9D+L,KAAK,CAAC/L,gBAAgB,GAAG,IAAI;SAC7B+L,KAAK,CAAC7L,cAAc,GAAGhC,sCAAuB,CAACE,MAAM;SACrD2N,KAAK,CAAC3L,iBAAiB,GAAG4L,oCAAqB,CAACC,KAAK;;OAGtD,IAAI,CAACjH,MAAM,CAAC+G,KAAK,CAAC;;IAEnB;GACD7G,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;CA0BZ,CAAC;;CCpMD;AACA,CAAO,MAAMgH,WAAW,GAAG;GAC1BnI,IAAI,EAAE,aAAa;GACnBC,UAAU,EAAE;eACX8G;IACA;GACDlF,KAAK,EAAE;;KAENmF,UAAU,EAAE;OACXjF,IAAI,EAAEC,MAAM;OACZI,OAAO,EAAE;MACT;KACDsE,QAAQ,EAAE;OACT3E,IAAI,EAAEI,OAAO;OACbC,OAAO,EAAE;;IAEV;GACDM,KAAK,EAAE,CAAC,mBAAmB,CAAC;GAC5BjC,QAAQ,EAAE;KACTyG,KAAK,GACL;OACC,OAAOtC,KAAK,CAACwD,IAAI,CAAC;SAAE9M,MAAM,EAAE;QAAI,EAAE,CAAC+M,CAAC,EAAEC,CAAC,MAAM;SAC5CxO,EAAE,EAAEwO,CAAC,GAAG,CAAC;SACTnB,KAAK,EAAEoB,cAAI,CAACC,UAAU,CAACxN,wBAAc,CAACC,MAAM,CAAC,GAAG,EAAE,IAAIiC,IAAI,EAAE,CAACC,QAAQ,CAACmL,CAAC,CAAC,GAAG,IAAI,CAAC;QAChF,CAAC,CAAC;MACH;KACDjB,IAAI,GACJ;OACC,OAAO,IAAI,CAACH,KAAK,CAACI,IAAI,CAAC,CAAC;SAAExN;QAAI,KAAKA,EAAE,KAAK,IAAI,CAACkN,UAAU,CAAC;MAC1D;KACDyB,WAAW,GACX;OACC,OAAO;SACNC,MAAM,EAAE;QACR;;IAEF;GACDvH,QAAQ,EAAG;;;;;;;;;CASZ,CAAC;;CC5CD;AACA,CAAO,MAAMwH,mCAAmC,GAAG;GAClD3I,IAAI,EAAE,qCAAqC;GAC3CC,UAAU,EAAE;aACXyB,0BAAM;cACN8E,yCAAO;KACP2B;IACA;GACDtG,KAAK,EAAE;KACNhF,UAAU,EAAE;OACXkF,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACD2G,eAAe,EAAE;OAChB7G,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDjF,WAAW,EAAE;OACZ+E,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,mBAAmB,EAAE,wBAAwB,EAAE,oBAAoB,CAAC;GAC5ElC,KAAK,GACL;KACC,OAAO;oBACNmC,+BAAW;kBACXC,6BAAS;8BACT9F;MACA;IACD;GACD+F,IAAI,GACJ;KACC,OAAO;OACN4D,aAAa,EAAE;MACf;IACD;GACDhG,QAAQ,EAAE;KACTiG,QAAQ,GACR;OACC,OAAO,IAAI,CAAC7J,UAAU,KAAKC,oCAAqB,CAACf,QAAQ;MACzD;KACDQ,SAAS,EAAE;OACVyG,GAAG,GACH;SACC,OAAO,IAAI,CAAC4F,eAAe;QAC3B;OACD3F,GAAG,CAACT,KAAa,EACjB;SACC,IAAI,CAACU,KAAK,CAAC,wBAAwB,EAAEV,KAAK,CAAC;;MAE5C;KACDqG,KAAK,EAAE;OACN7F,GAAG,GACH;SACC,OAAO,IAAI,CAAChG,WAAW;QACvB;OACDiG,GAAG,CAACT,KAAa,EACjB;SACC,IAAI,CAACU,KAAK,CAAC,oBAAoB,EAAEV,KAAK,CAAC;;;IAGzC;GACDmE,OAAO,GACP;KACC,IAAI,CAACF,aAAa,GAAG,IAAI,CAAClK,SAAS;IACnC;GACDuE,OAAO,EAAE;KACR8F,eAAe,CAACpE,KAAa,GAAG,EAAE,EAClC;OAAA;OACC,IAAIoD,GAAG,gBAAGjH,QAAQ,CAAC6D,KAAK,CAACa,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,wBAAI,CAAC;OAExD,IAAI,CAACrF,cAAI,CAACsF,SAAS,CAACsC,GAAG,CAAC,IAAIA,GAAG,GAAG,CAAC,IAAIA,GAAG,GAAG,EAAE,EAC/C;SACCA,GAAG,GAAG,IAAI,CAACa,aAAa;;OAGzB,IAAI,CAAClK,SAAS,GAAGqJ,GAAG;;IAErB;GACDzE,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;CAwBZ,CAAC;;CCzGD;AACA,CAAO,MAAM2H,mCAAmC,GAAG;GAClD9I,IAAI,EAAE,qCAAqC;GAC3CC,UAAU,EAAE;KACXkI,WAAW;KACXrB,kBAAkB;cAClBN,yCAAO;KACPe;IACA;GACD1F,KAAK,EAAE;KACNhF,UAAU,EAAE;OACXkF,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACD5E,aAAa,EAAE;OACd0E,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACD7E,gBAAgB,EAAE;OACjB2E,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDjF,WAAW,EAAE;OACZ+E,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,mBAAmB,EAAE,sBAAsB,EAAE,yBAAyB,EAAE,oBAAoB,CAAC;GACrGlC,KAAK,GACL;KACC,OAAO;8BACN1D;MACA;IACD;GACD2D,QAAQ,EAAE;KACTiG,QAAQ,GACR;OACC,OAAO,IAAI,CAAC7J,UAAU,KAAKC,oCAAqB,CAAC4K,QAAQ;MACzD;KACDxN,OAAO,EAAE;OACR8I,GAAG,GACH;SACC,OAAO,IAAI,CAAC3F,aAAa;QACzB;OACD4F,GAAG,CAAC/I,OAAe,EACnB;SACC,IAAI,CAACgJ,KAAK,CAAC,sBAAsB,EAAEhJ,OAAO,CAAC;;MAE5C;KACDkC,UAAU,EAAE;OACX4G,GAAG,GACH;SACC,OAAO,IAAI,CAAC5F,gBAAgB;QAC5B;OACD6F,GAAG,CAAC7G,UAAkB,EACtB;SACC,IAAI,CAAC8G,KAAK,CAAC,yBAAyB,EAAE9G,UAAU,CAAC;;MAElD;KACDyM,KAAK,EAAE;OACN7F,GAAG,GACH;SACC,OAAO,IAAI,CAAChG,WAAW;QACvB;OACDiG,GAAG,CAACjG,WAAmB,EACvB;SACC,IAAI,CAACkG,KAAK,CAAC,oBAAoB,EAAElG,WAAW,CAAC;;;IAG/C;GACDmE,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;CAsBZ,CAAC;;CCvFD;AACA,CAAO,MAAM4H,uBAAuB,GAAG;GACtC/I,IAAI,EAAE,yBAAyB;GAC/BC,UAAU,EAAE;KACX0I,mCAAmC;KACnCG;IACA;GACD1I,MAAM,EAAE;KACP1F,eAAe,EAAE;IACjB;GACDgI,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBjC,QAAQ,EAAE;KACT5D,UAAU,EAAE;OACXmG,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACmC,UAAU;QACtC;OACDoG,GAAG,CAACpG,UAAkB,EACtB;SACC,MAAMgL,SAAS,GAAG,IAAI,CAAChL,UAAU;SAEjC,IAAI,CAACoE,MAAM,CAAC;WAAEpE;UAAY,CAAC;SAE3B,IAAIgL,SAAS,KAAK,IAAI,CAAChL,UAAU,EACjC;WACC,IAAI,CAACmM,kBAAkB,CAACnM,UAAU,CAAC;;;MAGrC;KACDQ,aAAa,EAAE;OACd2F,GAAG,GACH;SACC,OAAO,CAAC,IAAI,CAACtI,eAAe,CAAC2C,aAAa,IAAIG,4CAA6B,CAACnD,MAAM,IAAI,CAAC;QACvF;OACD4I,GAAG,CAACT,KAAoB,EACxB;SACC,IAAI,CAACvB,MAAM,CAAC;WAAE5D,aAAa,EAAEW,cAAI,CAACsF,SAAS,CAACd,KAAK,CAAC,GAAGA,KAAK,GAAG,CAAC,GAAGA;UAAO,CAAC;;;IAG3E;GACD1B,OAAO,EAAE;KACRG,MAAM,CAAC8G,MAAoC,EAC3C;OACC,IAAI,CAAC7E,KAAK,CAAC,QAAQ,EAAE6E,MAAM,CAAC;MAC5B;KACDiB,kBAAkB,CAACnM,UAAkB,EACrC;OACC,IAAIA,UAAU,KAAKC,oCAAqB,CAACf,QAAQ,EACjD;SACC,IAAI,CAACkF,MAAM,CAAC;WACX5D,aAAa,EAAE,IAAI;WACnBD,gBAAgB,EAAE,IAAI;WACtBE,YAAY,EAAE,IAAI;WAClBP,YAAY,EAAE,CAAC;WACfE,YAAY,EAAE;UACd,CAAC;QACF,MAED;SACC,IAAI,CAACgE,MAAM,CAAC;WACX5D,aAAa,EAAEG,4CAA6B,CAACnD,MAAM;WACnD+C,gBAAgB,EAAE6K,oCAAqB,CAACC,KAAK;WAC7C5K,YAAY,EAAE,CAAC;WACfP,YAAY,EAAE,IAAI;WAClBE,YAAY,EAAE;UACd,CAAC;;;IAGJ;GACDkE,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;CAmBZ,CAAC;;CCpFD;AACA,CAAO,MAAM8H,mBAAmB,GAAG;GAClCjJ,IAAI,EAAE,qBAAqB;GAC3BC,UAAU,EAAE;aACXE,+BAAM;aACN+I,yCAAM;KACNzF,sBAAsB;KACtB6C,uBAAuB;KACvBqB,wBAAwB;KACxBoB;IACA;GACD3I,MAAM,EAAE;KACP1F,eAAe,EAAE;IACjB;GACDgI,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBjC,QAAQ,EAAE;KACTtB,MAAM,EAAE;OACP6D,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACyE,MAAM;QAClC;OACD8D,GAAG,CAAC9D,MAAc,EAClB;SACC,IAAI,CAAC+D,KAAK,CAAC,QAAQ,EAAE;WACpB/D,MAAM;WACN,GAAG,IAAI,CAACgK,mBAAmB,CAAC,IAAI,CAACzO,eAAe,CAACyE,MAAM,CAAC;WACxD,GAAG,IAAI,CAACiK,iBAAiB,CAACjK,MAAM;UAChC,CAAC;;MAEH;KACDgI,KAAK,GACL;OACC,OAAO,IAAI,CAAChI,MAAM,KAAKC,gCAAiB,CAACC,MAAM,GAC5C,IAAI,CAAC+H,GAAG,CAAC,yCAAyC,CAAC,GACnD,IAAI,CAACA,GAAG,CAAC,qCAAqC,CAAC;MAClD;KACDiC,IAAI,GACJ;OACC,OAAO,CACN;SACCvP,EAAE,EAAEsF,gCAAiB,CAACkD,KAAK;SAC3B6E,KAAK,EAAE,IAAI,CAACC,GAAG,CAAC,uCAAuC,CAAC;SACxDkC,SAAS,EAAE7F;QACX,EACD;SACC3J,EAAE,EAAEsF,gCAAiB,CAACC,MAAM;SAC5B8H,KAAK,EAAE,IAAI,CAACC,GAAG,CAAC,wCAAwC,CAAC;SACzDkC,SAAS,EAAEhD;QACX,EACD;SACCxM,EAAE,EAAEsF,gCAAiB,CAACE,OAAO;SAC7B6H,KAAK,EAAE,IAAI,CAACC,GAAG,CAAC,yCAAyC,CAAC;SAC1DkC,SAAS,EAAE3B;QACX,EACD;SACC7N,EAAE,EAAEsF,gCAAiB,CAACG,MAAM;SAC5B4H,KAAK,EAAE,IAAI,CAACC,GAAG,CAAC,wCAAwC,CAAC;SACzDkC,SAAS,EAAEP;QACX,CACD;;IAEF;GACDjI,OAAO,EAAE;KACRqI,mBAAmB,CAACI,UAAkB,EACtC;OACC,QAAQA,UAAU;SAEjB,KAAKnK,gCAAiB,CAACkD,KAAK;WAC3B,OAAOkH,sDAAgB,CAACC,0BAA0B,EAAE;SACrD,KAAKrK,gCAAiB,CAACC,MAAM;WAC5B,OAAOmK,sDAAgB,CAACE,2BAA2B,EAAE;SACtD,KAAKtK,gCAAiB,CAACE,OAAO;WAC7B,OAAOkK,sDAAgB,CAACG,4BAA4B,EAAE;SACvD,KAAKvK,gCAAiB,CAACG,MAAM;WAC5B,OAAOiK,sDAAgB,CAACI,2BAA2B,EAAE;SACtD;WACC,OAAO,EAAE;;MAEX;KACDR,iBAAiB,CAACjK,MAAc,EAChC;OACC,QAAQA,MAAM;SAEb,KAAKC,gCAAiB,CAACkD,KAAK;WAC3B,OAAOkH,sDAAgB,CAACK,mCAAmC,EAAE;SAC9D,KAAKzK,gCAAiB,CAACC,MAAM;WAC5B,OAAOmK,sDAAgB,CAACM,oCAAoC,EAAE;SAC/D,KAAK1K,gCAAiB,CAACE,OAAO;WAC7B,OAAOkK,sDAAgB,CAACO,qCAAqC,EAAE;SAChE,KAAK3K,gCAAiB,CAACG,MAAM;WAC5B,OAAOiK,sDAAgB,CAACQ,oCAAoC,EAAE;SAC/D;WACC,OAAO,EAAE;;;IAGZ;GACD7I,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;CAoBZ,CAAC;;CC9HM,MAAM8I,mBAAmB,CAChC;GACC,OAAOhP,MAAM,CAACyC,SAAiB,EAC/B;KACC,MAAMwM,MAAM,GAAGtM,8BAAQ,CAACC,SAAS,CAACH,SAAS,CAAC;KAE5C,MAAMyM,KAAK,GAAG,IAAIjN,IAAI,CAACA,IAAI,CAACkN,GAAG,EAAE,GAAGF,MAAM,CAAC;KAC3C,MAAMtE,GAAG,GAAG,IAAI1I,IAAI,CAACQ,SAAS,GAAGwM,MAAM,CAAC;KAExC,MAAMG,OAAO,GAAGF,KAAK,CAACG,WAAW,EAAE,KAAK1E,GAAG,CAAC0E,WAAW,EAAE,IACrDH,KAAK,CAACI,QAAQ,EAAE,KAAK3E,GAAG,CAAC2E,QAAQ,EAAE,IACnCJ,KAAK,CAAClE,OAAO,EAAE,KAAKL,GAAG,CAACK,OAAO,EAAE;KAGrC,IAAIoE,OAAO,EACX;OACC,OAAO9B,cAAI,CAACC,UAAU,CAACxN,wBAAc,CAACC,MAAM,CAAC,OAAO,CAAC,CAAC;;KAGvD,OAAOiD,8BAAQ,CAACsM,UAAU,CAAC9M,SAAS,CAAC;;GAGtC,OAAO+M,eAAe,CAACC,gBAAwB,EAC/C;KACC,IAAI1M,cAAI,CAACC,cAAc,CAACyM,gBAAgB,CAAC,EACzC;OACC,OAAO1P,wBAAc,CAAC2P,KAAK,CAACD,gBAAgB,CAAC;;KAG9C,MAAMrM,IAAI,GAAG,IAAInB,IAAI,EAAE;KACvBmB,IAAI,CAACK,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;KAEzB,OAAOL,IAAI;;GAGZ,OAAOuM,qBAAqB,CAACC,UAAgB,EAAEC,UAAmB,GAAG,IAAI,EACzE;KACC,IAAI9M,cAAI,CAACC,cAAc,CAAC6M,UAAU,CAAC,EACnC;OACCrN,yDAAmB,CAACW,eAAe,CAACyM,UAAU,EAAEC,UAAU,CAAC;;KAG5D,OAAO/L,kBAAQ,CAACgM,UAAU,CAACC,SAAS,CAACH,UAAU,CAAC,GAAG,IAAI;;GAGxD,OAAOI,2BAA2B,CAACpM,SAAiB,EACpD;KACC,MAAMqM,WAAW,GAAG,IAAIhO,IAAI,CAAC2B,SAAS,CAAC;KACvC,MAAMgM,UAAU,GAAG9L,kBAAQ,CAACC,WAAW,CAACmM,YAAY,CAACD,WAAW,CAAC;KACjE,MAAME,kBAAkB,GAAGP,UAAU,CAACnM,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI;KAEjE,OAAO1D,wBAAc,CAACC,MAAM,CAC3BD,wBAAc,CAAC2C,SAAS,CAAC,iBAAiB,CAAC,EAC3CyN,kBAAkB,CAClB;;CAEH;;CCrDA;AACA,CAAO,MAAMC,qBAAqB,GAAG;GACpCrL,IAAI,EAAE,uBAAuB;GAC7BC,UAAU,EAAE;YACXqL;IACA;GACDlL,MAAM,EAAE;;KAEPE,MAAM,EAAE;IACR;GACDuB,KAAK,EAAE;KACN0J,MAAM,EAAE;OACPxJ,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDuJ,WAAW,EAAE;OACZzJ,IAAI,EAAE0J,WAAW;OACjBxJ,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,eAAe,EAAE,OAAO,CAAC;GACjCG,IAAI,GACJ;KACC,OAAO;OACN6I,WAAW,EAAE;MACb;IACD;GACDC,OAAO,GACP;KACC,IAAI,CAACC,UAAU,GAAG,IAAI,CAACC,gBAAgB,EAAE;KAEzC,MAAMxN,IAAI,GAAG,IAAInB,IAAI,CAAC,IAAI,CAACqO,MAAM,GAAG3N,8BAAQ,CAACC,SAAS,CAAC,IAAI,CAAC0N,MAAM,CAAC,CAAC;KACpE,IAAI,CAACG,WAAW,GAAG,IAAIxO,IAAI,CAACmB,IAAI,CAACiM,WAAW,EAAE,EAAEjM,IAAI,CAACkM,QAAQ,EAAE,EAAElM,IAAI,CAAC4H,OAAO,EAAE,CAAC,CAAC6F,OAAO,EAAE;IAC1F;GACDnF,OAAO,GACP;KACC,IAAI,CAACiF,UAAU,CAACG,IAAI,EAAE;IACtB;GACDC,SAAS,GACT;KAAA;KACC,wBAAI,CAACJ,UAAU,qBAAf,iBAAiBK,OAAO,EAAE;IAC1B;GACDnL,OAAO,EAAE;KACR+K,gBAAgB,GAChB;OACC,MAAM3B,MAAM,GAAGtM,8BAAQ,CAACC,SAAS,CAAC,IAAI,CAAC0N,MAAM,CAAC;OAE9C,MAAMW,MAAM,GAAG,IAAIC,wBAAU,CAAC;SAC7BC,YAAY,EAAE;WACbtS,EAAE,EAAG,iCAAgC,IAAI,CAACwG,MAAO,IAAGiI,cAAI,CAAC8D,SAAS,EAAG,EAAC;WACtEb,WAAW,EAAE,IAAI,CAACA,WAAW;WAC7Bc,SAAS,EAAE,CAAC;WACZC,UAAU,EAAE,CAAC,EAAE;WACfC,eAAe,EAAEC,QAAQ,CAACC,IAAI;WAC9BC,MAAM,EAAE;aACPC,OAAO,EAAE,MAAM,IAAI,CAAC1J,KAAK,CAAC,OAAO;;UAElC;SACD2J,aAAa,EAAE,CAAC,IAAI,CAACtB,MAAM,GAAGrB,MAAM,CAAC;SACrCyC,MAAM,EAAE;WACP,CAACG,6BAAe,CAACC,MAAM,GAAIC,KAAgB,IAAK;aAC/C,MAAM;eAAE3O;cAAM,GAAG2O,KAAK,CAACC,OAAO,EAAE;aAChC,MAAMvB,WAAW,GAAGxN,8BAAQ,CAACgP,iBAAiB,CAAC7O,IAAI,CAAC,CAACyN,OAAO,EAAE;aAC9D,IAAI,CAAC5I,KAAK,CAAC,eAAe,EAAEwI,WAAW,GAAG9N,8BAAQ,CAACC,SAAS,CAAC6N,WAAW,CAAC,CAAC;;;QAG5E,CAAC;OAEFQ,MAAM,CAACiB,SAAS,CAAC,KAAK,CAAC,CAACC,SAAS,CAAC,UAAU,EAAGJ,KAAgB,IAAK;SACnE,MAAM;WAAEK,IAAI;WAAExE,KAAK;WAAEjD;UAAK,GAAGoH,KAAK,CAACC,OAAO,EAAE;SAC5C,MAAMvB,WAAW,GAAG,IAAIxO,IAAI,CAACmQ,IAAI,EAAExE,KAAK,EAAEjD,GAAG,CAAC,CAACkG,OAAO,EAAE;SAExD,IAAI,CAAC5I,KAAK,CAAC,OAAO,CAAC;SAEnB,IAAI,CAACwI,WAAW,GAAGA,WAAW;QAC9B,CAAC;OAEF,OAAOQ,MAAM;;IAEd;GACD/K,QAAQ,EAAE;CACX,CAAC;;CC9ED;AACA,CAAO,MAAMmM,gBAAgB,GAAG;GAC/BtN,IAAI,EAAE,kBAAkB;GACxBC,UAAU,EAAE;cACXwB,kCAAO;aACPtB,+BAAM;gBACND,+CAAS;KACTmL,qBAAqB;eACrBkC;IACA;GACDnN,MAAM,EAAE;KACP1F,eAAe,EAAE;IACjB;GACDgI,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBlC,KAAK,GACL;KACC,OAAO;uBACNgN,wCAAc;mBACdC;MACA;IACD;GACD5K,IAAI,GACJ;KACC,OAAO;OACN6K,kBAAkB,EAAE;MACpB;IACD;GACDjN,QAAQ,EAAE;KACThB,OAAO,EAAE;OACRuD,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAAC+E,OAAO;QACnC;OACDwD,GAAG,CAACxD,OAAe,EACnB;SACC,IAAI,CAACyD,KAAK,CAAC,QAAQ,EAAE;WAAEzD;UAAS,CAAC;;MAElC;KACDkO,UAAU,GACV;OACC,OAAO1D,mBAAmB,CAAChP,MAAM,CAAC,IAAI,CAACwE,OAAO,CAAC;;IAEhD;GACDmO,WAAW,GACX;KACC,IAAI,CAAC,IAAI,CAAClT,eAAe,CAAC+E,OAAO,EACjC;OACC,MAAMoO,YAAY,GAAG3P,8BAAQ,CAAC2P,YAAY;OAC1C,MAAM/O,QAAQ,GAAG,IAAI5B,IAAI,EAAE,CAACwB,QAAQ,CAACmP,YAAY,CAACC,CAAC,EAAED,YAAY,CAACE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;OAE1E,IAAI,CAACtO,OAAO,GAAGX,QAAQ,GAAGlB,8BAAQ,CAACC,SAAS,CAACiB,QAAQ,CAAC;;IAEvD;GACDqC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;CAuBZ,CAAC;;CCrED;AACA,CAAO,MAAM6M,iBAAiB,GAAG;GAChChO,IAAI,EAAE,mBAAmB;GACzBC,UAAU,EAAE;gBACXC,+CAAS;KACTmL,qBAAqB;aACrBlL,+BAAM;aACNkB,+BAAM;aACNM,+BAAM;eACN4L,gCAAQ;aACR7L,0BAAM;cACN8E,yCAAO;cACP/E;IACA;GACDrB,MAAM,EAAE;KACP1F,eAAe,EAAE;IACjB;GACDgI,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBlC,KAAK,GAOL;KACC,OAAO;uBACNgN,wCAAc;mBACdC,oCAAU;oBACV9K,+BAAW;kBACXC,6BAAS;8BACTjD;MACA;IACD;GACDkD,IAAI,GACJ;KACC,OAAO;OACN6K,kBAAkB,EAAE,KAAK;OACzBO,SAAS,EAAE,IAAI,CAACvT,eAAe,CAACmF,KAAK,IAAI;MACzC;IACD;GACDY,QAAQ,EAAE;KACTf,UAAU,EAAE;OACXsD,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACgF,UAAU;QACtC;OACDuD,GAAG,CAACT,KAAiB,EACrB;SACC,MAAMqF,SAAS,GAAG,IAAI,CAACnI,UAAU;SAEjC,IAAI,CAACuB,MAAM,CAAC;WAAEvB,UAAU,EAAE8C;UAAO,CAAC;SAElC,IAAIqF,SAAS,KAAKrF,KAAK,EACvB;WACC,IAAI,CAAC0L,wBAAwB,CAAC1L,KAAK,CAAC;;;MAGtC;KACD2L,SAAS,GACT;OACC,OAAOnQ,cAAI,CAACoQ,KAAK,CAAC,IAAI,CAAC1T,eAAe,CAACoF,KAAK,CAAC,GACzC5C,IAAI,CAACkN,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,GACrC,IAAI,CAAC1P,eAAe,CAACoF,KAAK;MAC7B;KACDuO,YAAY,GACZ;OACC,OAAO,IAAI,CAACF,SAAS,GAClBjQ,8BAAQ,CAACsM,UAAU,CAAC,IAAI,CAAC2D,SAAS,CAAC,GACnC,IAAI,CAAC/G,GAAG,CAAC,wCAAwC,CAAC;;IAEtD;GACDtG,OAAO,EAAE;KACRG,MAAM,CAAC8G,MAAoC,EAC3C;OACC,IAAI,CAAC7E,KAAK,CAAC,QAAQ,EAAE6E,MAAM,CAAC;MAC5B;KACDuG,WAAW,CAAC9L,KAAa,EACzB;OAAA;OACC,IAAI3C,KAAK,gBAAGlB,QAAQ,CAAC6D,KAAK,CAACa,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,wBAAI,CAAC;OAE1D,IAAI,CAACrF,cAAI,CAACsF,SAAS,CAACzD,KAAK,CAAC,IAAIA,KAAK,GAAG,CAAC,EACvC;SACCA,KAAK,GAAG,IAAI,CAACoO,SAAS;;OAGvB,IAAI,CAACA,SAAS,GAAGpO,KAAK;OACtB,IAAI,CAACoB,MAAM,CAAC;SAAEpB;QAAO,CAAC;MACtB;KACD0O,aAAa,CAACzO,KAAa,EAC3B;OACC,IAAI,CAACmB,MAAM,CAAC;SAAEnB;QAAO,CAAC;MACtB;KACDoO,wBAAwB,CAACxO,UAAsB,EAC/C;OACC,IAAIA,UAAU,KAAKC,oCAAqB,CAAC6O,OAAO,EAChD;SACC,IAAI,CAACvN,MAAM,CAAC;WACXpB,KAAK,EAAE,IAAI;WACX4O,OAAO,EAAE;UACT,CAAC;;OAGH,IAAI/O,UAAU,KAAKC,oCAAqB,CAACC,KAAK,EAC9C;SACC,IAAI,CAACqO,SAAS,GAAG,CAAC;SAClB,IAAI,CAAChN,MAAM,CAAC;WACXpB,KAAK,EAAE,CAAC;WACR6O,OAAO,EAAE;UACT,CAAC;;OAGH,IAAIhP,UAAU,KAAKC,oCAAqB,CAACzC,IAAI,EAC7C;SACC,IAAI,CAAC+D,MAAM,CAAC;WACXpB,KAAK,EAAE,IAAI;WACX6O,OAAO,EAAE1T,wBAAc,CAACC,MAAM,CAAC,OAAO,EAAE,CAACiC,IAAI,CAACkN,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,IAAI,IAAI;UACrF,CAAC;;MAEH;KACDuE,WAAW,GACX;OACC,IAAI,CAACjB,kBAAkB,GAAG,CAAC,IAAI,CAACA,kBAAkB;MAClD;KACDkB,WAAW,CAAClP,UAAsB,EAClC;OACC,OAAOA,UAAU,KAAK,IAAI,CAACA,UAAU;MACrC;KACDmP,iCAAiC,CAAC7B,KAAK,EACvC;OACC,IAAI,CAAC,IAAI,CAAC4B,WAAW,CAACjP,oCAAqB,CAACzC,IAAI,CAAC,EACjD;SACC;;OAGD,MAAM4R,MAAM,GAAG9B,KAAK,CAAC+B,aAAa;OAClC,MAAMrI,QAAQ,GAAGoI,MAAM,CAACE,YAAY,CAAC,UAAU,CAAC;OAChD,IAAI,EAAEtI,QAAQ,KAAK,MAAM,CAAC,EAC1B;SACC,IAAI,CAACiI,WAAW,EAAE;;;IAGpB;GACDxN,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAuFZ,CAAC;;CC7OD;AACA,CAAO,MAAM8N,oBAAoB,GAAG;GACnCjP,IAAI,EAAE,sBAAsB;GAC5BC,UAAU,EAAE;cACXwB,kCAAO;aACPtB,+BAAM;gBACND;IACA;GACDE,MAAM,EAAE;KACP1F,eAAe,EAAE;IACjB;GACDgI,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBjC,QAAQ,EAAE;KACThB,OAAO,EAAE;OACRuD,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAAC+E,OAAO;QACnC;OACDwD,GAAG,CAACxD,OAAe,EACnB;SACC,IAAI,CAACyD,KAAK,CAAC,QAAQ,EAAE;WAAEzD;UAAS,CAAC;;MAElC;KACDyP,kBAAkB,GAClB;OACC,OAAOzR,mBAAmB,CAACxC,MAAM,CAAC,IAAI,CAACwE,OAAO,CAAC;;IAEhD;GACDqB,OAAO,EAAE;KACRqO,UAAU,GACV;OAAA;OACC,wBAAI,CAACvD,UAAU,+BAAf,IAAI,CAACA,UAAU,GAAK,IAAIO,wBAAU,CAAC;SAClCU,aAAa,EAAE,CAAC,IAAI,CAACpN,OAAO,GAAG7B,8BAAQ,CAACC,SAAS,CAAC,IAAI,CAAC4B,OAAO,CAAC,CAAC;SAChEsC,IAAI,EAAE,MAAM;SACZ4K,MAAM,EAAE;WACP,CAACG,6BAAe,CAACC,MAAM,GAAIC,KAAgB,IAAK;aAC/C,MAAM;eAAE3O;cAAM,GAAG2O,KAAK,CAACC,OAAO,EAAE;aAChC,MAAM1B,MAAM,GAAGrN,8BAAQ,CAACgP,iBAAiB,CAAC7O,IAAI,CAAC,CAACyN,OAAO,EAAE;aAEzD,IAAI,CAACrM,OAAO,GAAG8L,MAAM,GAAG3N,8BAAQ,CAACC,SAAS,CAAC0N,MAAM,CAAC;;UAEnD;SACDa,YAAY,EAAE;WACbI,eAAe,EAAEC,QAAQ,CAACC;;QAE3B,CAAC;OAEF,IAAI,CAACd,UAAU,CAACwD,aAAa,CAAC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC;OAClD,IAAI,CAAC3D,UAAU,CAACG,IAAI,EAAE;;IAEvB;GACD5K,QAAQ,EAAG;;;;;;;;;;;;;;;CAeZ,CAAC;;CCxED;AACA,CAAO,MAAMqO,mBAAmB,GAAG;GAClCxP,IAAI,EAAE,qBAAqB;GAC3BC,UAAU,EAAE;aACXE,+BAAM;yBACNsP,qDAAkB;gBAClBvP;IACA;GACDE,MAAM,EAAE;KACP1F,eAAe,EAAE,EAAE;KACnB4F,MAAM,EAAE;IACR;GACDoC,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBG,IAAI,GACJ;KACC,OAAO;OACN6M,oBAAoB,EAAE;MACtB;IACD;GACDjP,QAAQ,EAAE;KACTkP,aAAa,GACb;OACC,IAAIC,aAAa,GAAG,IAAI,CAAClV,eAAe,CAACmV,cAAc,IAAI,IAAI;OAE/D,IAAI,CAACD,aAAa,EAClB;SACC,OAAO,IAAI,CAACxI,GAAG,CAAC,uCAAuC,CAAC;;OAGzDwI,aAAa,IAAI,IAAI;OAErB,IAAI,IAAI,CAACE,SAAS,CAACF,aAAa,CAAC,EACjC;SACC,MAAMpR,OAAO,GAAGoR,aAAa,IAAI,EAAE,GAAG,IAAI,CAAC;SAE3C,OAAO9U,aAAG,CAACI,gBAAgB,CAC1B,0CAA0C,EAC1CsD,OAAO,EACP;WAAE,iBAAiB,EAAEA;UAAS,CAC9B;;OAGF,IAAI,IAAI,CAACuR,OAAO,CAACH,aAAa,CAAC,EAC/B;SACC,MAAMrR,KAAK,GAAGqR,aAAa,IAAI,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;SAE9C,OAAO9U,aAAG,CAACI,gBAAgB,CAC1B,wCAAwC,EACxCqD,KAAK,EACL;WAAE,iBAAiB,EAAEA;UAAO,CAC5B;;OAGF,IAAI,IAAI,CAACyR,OAAO,CAACJ,aAAa,CAAC,EAC/B;SACC,MAAMK,KAAK,GAAGL,aAAa,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;SAEvD,OAAO9U,aAAG,CAACI,gBAAgB,CAC1B,wCAAwC,EACxC+U,KAAK,EACL;WAAE,iBAAiB,EAAEA;UAAO,CAC5B;;OAGF,MAAMpJ,IAAI,GAAG+I,aAAa,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;OAElD,OAAO9U,aAAG,CAACI,gBAAgB,CAC1B,uCAAuC,EACvC2L,IAAI,EACJ;SAAE,iBAAiB,EAAEA;QAAM,CAC3B;MACD;KACDsD,KAAK,GACL;OACC,MAAMA,KAAK,GAAG,IAAIjN,IAAI,EAAE;OAExB,OAAO,IAAIA,IAAI,CAACiN,KAAK,CAACG,WAAW,EAAE,EAAEH,KAAK,CAACI,QAAQ,EAAE,EAAEJ,KAAK,CAAClE,OAAO,EAAE,CAAC;;IAExE;GACDnF,OAAO,EAAE;KACRG,MAAM,CAAC4O,cAA6B,EACpC;OACC,IAAI,CAAC3M,KAAK,CAAC,QAAQ,EAAE;SAAE2M;QAAgB,CAAC;MACxC;KACDK,mBAAmB,CAACC,UAAyB,EAC7C;OACC,IAAI,CAAClP,MAAM,CAACjD,cAAI,CAACoS,QAAQ,CAACD,UAAU,CAAC,GAAGA,UAAU,GAAG,IAAI,GAAGA,UAAU,CAAC;MACvE;KACDL,SAAS,CAACO,UAAkB,EAC5B;OACC,MAAMC,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;OAE7B,OAAOD,UAAU,GAAGC,MAAM,IAAID,UAAU,GAAGC,MAAM,KAAK,CAAC;MACvD;KACDP,OAAO,CAACM,UAAkB,EAC1B;OACC,MAAME,KAAK,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;OAEjC,OAAOF,UAAU,GAAGE,KAAK,IAAIF,UAAU,GAAGE,KAAK,KAAK,CAAC;MACrD;KACDP,OAAO,CAACK,UAAkB,EAC1B;OACC,MAAMG,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;OAEtC,OAAOH,UAAU,GAAGG,MAAM,KAAK,CAAC;;IAEjC;GACDrP,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;CAsBZ,CAAC;;CChID;AACA,CAAO,MAAMsP,kBAAkB,GAAG;GACjCzQ,IAAI,EAAE,oBAAoB;GAC1BC,UAAU,EAAE;cACXwB,kCAAO;aACPtB,+BAAM;YACNuQ,wBAAK;gBACLxQ;IACA;GACDE,MAAM,EAAE;KACP1F,eAAe,EAAE;IACjB;GACDgI,KAAK,EAAE,CAAC,QAAQ,CAAC;GACjBG,IAAI,GACJ;KACC,OAAO;OACN8N,WAAW,EAAE;MACb;IACD;GACDlQ,QAAQ,EAAE;KACTmQ,WAAW,EAAE;OACZ5N,GAAG,GACH;SACC,OAAO,IAAI,CAACtI,eAAe,CAACkW,WAAW;QACvC;OACD3N,GAAG,CAACT,KAAa,EACjB;SACC,IAAI,CAACvB,MAAM,CAAC;WAAE2P,WAAW,EAAEpO;UAAO,CAAC;;MAEpC;KACD6E,IAAI,GACJ;OACC,OAAO,IAAI,CAACwJ,oBAAoB,CAACvJ,IAAI,CAAED,IAAI,IAAKA,IAAI,CAACvN,EAAE,KAAK,IAAI,CAAC8W,WAAW,CAAC;MAC7E;KACDC,oBAAoB,GACpB;OACC,MAAM3J,KAAK,GAAG,CACb;SACCpN,EAAE,EAAE,GAAG;SACP0I,KAAK,EAAE,IAAI,CAAC4E,GAAG,CAAC,qCAAqC;QACrD,EACD;SACCtN,EAAE,EAAE,GAAG;SACP0I,KAAK,EAAE,IAAI,CAAC4E,GAAG,CAAC,yCAAyC;QACzD,CACD;OAED,OAAOF,KAAK,CAAC3L,GAAG,CAAEuV,MAAM,KAAM;SAC7BhX,EAAE,EAAEgX,MAAM,CAAChX,EAAE;SACbqN,KAAK,EAAE2J,MAAM,CAACtO,KAAK;SACnBuO,UAAU,EAAED,MAAM,CAAChX,EAAE,KAAK,IAAI,CAAC8W,WAAW;SAC1CI,OAAO,EAAE,MAAY;WACpB,IAAI,CAACJ,WAAW,GAAGE,MAAM,CAAChX,EAAE;;QAE7B,CAAC,CAAC;MACH;KACDmX,OAAO,GACP;OACC,OAAO;SACNnX,EAAE,EAAE,kCAAkC;SACtC0R,WAAW,EAAE,IAAI,CAAC6D,KAAK,CAAC6B,YAAY,CAAC3B,GAAG;SACxCrI,KAAK,EAAE,IAAI,CAAC2J,oBAAoB;SAChCvE,SAAS,EAAE,CAAC;SACZE,eAAe,EAAEC,QAAQ,CAACC;QAC1B;;IAEF;GACDkB,WAAW,GACX;KACC,IAAI,CAAC,IAAI,CAAClT,eAAe,CAACkW,WAAW,EACrC;OACC,IAAI,CAACA,WAAW,GAAG,GAAG;;IAEvB;GACD9P,OAAO,EAAE;KACRG,MAAM,CAAC;OAAE2P;MAAuD,EAChE;OACC,IAAI,CAAC1N,KAAK,CAAC,QAAQ,EAAE;SAAE0N;QAAa,CAAC;;IAEtC;GACDzP,QAAQ,EAAG;;;;;;;;;;;;;;;;CAgBZ,CAAC;;CC1FD;AACA,CAAO,MAAMgQ,sBAAsB,GAAG;GACrCnR,IAAI,EAAE,wBAAwB;GAC9BC,UAAU,EAAE;eACXsN;IACA;GACDnN,MAAM,EAAE;KACPC,IAAI,EAAE,EAAE;KACRC,MAAM,EAAE,EAAE;KACVC,UAAU,EAAE;IACZ;GACDsB,KAAK,EAAE;KACNnH,eAAe,EAAE;OAChBqH,IAAI,EAAEnI,MAAM;OACZqI,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,OAAO,CAAC;GAChBlC,KAAK,GACL;KACC,OAAO;uBACNgN,wCAAc;oBACd4D,qCAAW;mBACX3D;MACA;IACD;GACDhN,QAAQ,EAAE;KACT4Q,SAAS,GACT;OACC,OAAO,IAAI,CAAChR,IAAI,CAACiR,YAAY,CAAC3X,eAAe,CAACG,EAAE,CAAC;;IAElD;GACD6R,OAAO,GACP;KACC,IAAI,CAAC4F,QAAQ,GAAG,CAAC,IAAI,CAACF,SAAS,IAAI,CAAC,IAAI,CAAChR,IAAI,CAAC3F,eAAe;IAC7D;GACDoG,OAAO,EAAE;KACR,MAAM0Q,IAAI,GACV;OACC,IAAI,CAACtO,KAAK,CAAC,OAAO,CAAC;OAEnB,IAAI,IAAI,CAACqO,QAAQ,EACjB;SACC,KAAKE,8CAAgB,CAACC,YAAY,CAAC,IAAI,CAACC,KAAK,CAACpC,GAAG,CAAC,CAACqC,SAAS,CAACjY,eAAe,CAACG,EAAE,CAAC;;OAGjF,MAAMkH,iDAAW,CAACC,MAAM,CAAC,IAAI,CAACX,MAAM,EAAE;SACrCY,SAAS,EAAE,IAAI;SACfxG,eAAe,EAAE,IAAI,CAACA;QACtB,CAAC;OAEFmX,eAAK,CAACC,YAAY,CAACC,IAAI,CAACC,wBAAS,CAACC,qBAAqB,CAAC;;IAEzD;GACD9Q,QAAQ,EAAG;;;;;;;;;;;;;;;;;CAiBZ,CAAC;;CC1DD;AACA,CAAO,MAAM+Q,uBAAuB,GAAG;GACtClS,IAAI,EAAE,yBAAyB;GAC/BC,UAAU,EAAE;YACXkS,wBAAK;iBACLC,mCAAU;gBACVlS,+CAAS;KACT+I,mBAAmB;KACnBqE,gBAAgB;KAChB2B,oBAAoB;KACpB5D,qBAAqB;KACrB2C,iBAAiB;KACjBwB,mBAAmB;KACnBiB,kBAAkB;KAClBU,sBAAsB;cACtB1P,kCAAO;aACPtB;IACA;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE,EAAE;KACRC,MAAM,EAAE,EAAE;KACVC,UAAU,EAAE;IACZ;GACD8R,OAAO,GACP;KACC,OAAO;OACN3X,eAAe,EAAE+F,gBAAQ,CAAC,MAAM,IAAI,CAAC/F,eAAe;MACpD;IACD;GACDgI,KAAK,EAAE,CAAC,OAAO,CAAC;GAChBlC,KAAK,GACL;KACC,OAAO;gBACNe;MACA;IACD;GACDsB,IAAI,GACJ;KACC,OAAO;OACNnI,eAAe,EAAE8O,sDAAgB,CAAC8I,0BAA0B;MAC5D;IACD;GACD7R,QAAQ,EAAE;KACT8R,aAAa,GACb;OACC,OAAO,IAAI,CAAC7X,eAAe,CAACyE,MAAM,KAAKC,gCAAiB,CAACkD,KAAK;;IAE/D;GACDqJ,OAAO,GACP;KACC,IAAI,CAAC6G,mBAAmB,EAAE;IAC1B;GACD1R,OAAO,EAAE;KACR0R,mBAAmB,GACnB;OAAA;OACC,IAAI,CAACxU,cAAI,CAACyU,QAAQ,CAAC,mBAAI,CAACpS,IAAI,qBAAT,WAAW3F,eAAe,KAAI,IAAI,CAAC,EACtD;SACC;;OAGD,IAAI,CAACA,eAAe,GAAG;SACtB,GAAG,IAAI,CAACA,eAAe;SACvB,GAAG,IAAI,CAAC2F,IAAI,CAAC3F,eAAe;SAC5BgB,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC2E,IAAI,CAAC3F,eAAe,CAACgB,QAAQ,IAAI,EAAE,CAAC;QACxD;MACD;KACDgX,qBAAqB,CAAC3K,MAAoC,GAAG,EAAE,EAC/D;OACC,IAAI,CAACrN,eAAe,GAAG;SACtB,GAAG,IAAI,CAACA,eAAe;SACvB,GAAGqN;QACH;MACD;KACD4K,YAAY,GACZ;OACCC,GAAG,CAACC,EAAE,CAACC,MAAM,CAAC/G,IAAI,CAAC,+BAA+B,CAAC;MACnD;KACDgH,KAAK,GACL;OACC,IAAI,CAAC7P,KAAK,CAAC,OAAO,CAAC;;IAEpB;GACD/B,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA+BZ,CAAC;;CCjID;AACA,OAAa6R,gBAAgB,GAAG;GAC/BhT,IAAI,EAAE,kBAAkB;GACxBC,UAAU,EAAE;YACXkS,wBAAK;kBACLc,mDAAW;KACXf;IACA;GACD9R,MAAM,EAAE;KACPC,IAAI,EAAE;IACN;GACDwB,KAAK,EAAE;KACNqR,cAAc,EAAE;OACfnR,IAAI,EAAEnI,MAAM;OACZqI,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,OAAO,CAAC;GAChBlC,KAAK,GACL;KACC,OAAO;gBACNe;MACA;IACD;GACDJ,QAAQ,EAAG;;;;;;;;;CASZ,CAAC;;CCnCD;AACA,CAAO,MAAMgS,sBAAsB,GAAG;GACrCnT,IAAI,EAAE,wBAAwB;GAC9BC,UAAU,EAAE;iBACXmS,mCAAU;YACVD;IACA;GACDzP,KAAK,EAAE,CAAC,OAAO,CAAC;GAChBlC,KAAK,GACL;KACC,OAAO;gBACNe;MACA;IACD;GACDJ,QAAQ,EAAG;;;;;;;;;;;CAWZ,CAAC;;CC7BD;AACA,CAAO,MAAMiS,UAAU,GAAG;GACzBvR,KAAK,EAAE;KACNwR,OAAO,EAAE;OACRtR,IAAI,EAAEuR,QAAQ;OACdrR,QAAQ,EAAE;;IAEX;GACDY,IAAI,GACJ;KACC,OAAO;OACN0Q,gBAAgB,EAAE,EAAE;OACpBC,aAAa,EAAE;MACf;IACD;GACD1S,OAAO,EAAE;KACR,MAAMG,MAAM,GACZ;OACC,MAAMqO,IAAI,GAAG,IAAI,CAAC+D,OAAO,EAAE,CAACI,gBAAgB,CAAC,wBAAwB,CAAC;OAEtE,IAAI,CAACD,aAAa,GAAG,CAAC,GAAGlE,IAAI,CAAC,CAAC/T,GAAG,CAAEmY,iBAA8B,IAAK,IAAI,CAACC,gBAAgB,CAACD,iBAAiB,CAAC,CAAC;OAEhH,MAAM,IAAI,CAACE,SAAS,EAAE;OAEtBtE,IAAI,CAACuE,OAAO,CAAEH,iBAA8B,IAAK;SAChD,MAAMF,aAAa,GAAG,IAAI,CAACG,gBAAgB,CAACD,iBAAiB,CAAC;SAC9DA,iBAAiB,CAACI,MAAM,CAAC,IAAI,CAACP,gBAAgB,CAACC,aAAa,CAACO,KAAK,CAAC,CAAC;QACpE,CAAC;MACF;KACDJ,gBAAgB,CAACD,iBAA8B,EAC/C;OACC,MAAMK,KAAK,GAAG/R,MAAM,CAAC0R,iBAAiB,CAACM,OAAO,CAAC,WAAW,CAAC,CAACC,OAAO,CAACna,EAAE,CAAC;OACvE,MAAMoa,eAAe,GAAG,IAAI,CAACC,kBAAkB,CAACT,iBAAiB,CAACO,OAAO,CAACT,aAAa,CAAC;OAExF,OAAO;SACNO,KAAK;SACLG;QACA;MACD;KACDC,kBAAkB,CAACC,eAAuB,EAC1C;OACC,MAAM1W,SAAS,GAAGsE,MAAM,CAACoS,eAAe,CAAC,GAAG,IAAI;OAChD,MAAMlK,MAAM,GAAGtM,8BAAQ,CAACC,SAAS,CAACH,SAAS,CAAC;OAC5C,MAAMwW,eAAe,GAAG,CAACxW,SAAS,GAAGwM,MAAM,IAAI,IAAI;OAEnD,OAAOlP,wBAAc,CAACC,MAAM,CAACD,wBAAc,CAAC2C,SAAS,CAAC,iBAAiB,CAAC,EAAEuW,eAAe,CAAC;MAC1F;KACDG,MAAM,CAACC,OAAoB,EAAEP,KAAa,EAC1C;OAAA;OACC,6BAAI,CAACR,gBAAgB,oCAArB,IAAI,CAACA,gBAAgB,GAAK,EAAE;OAC5B,IAAI,CAACA,gBAAgB,CAACQ,KAAK,CAAC,GAAGO,OAAO;;IAEvC;GACDnT,QAAQ,EAAG;;;;;CAKZ,CAAC;;CC5DD;AACA,CAAO,MAAMoT,SAAS,GAAG;GACxB1S,KAAK,EAAE;KACN2S,YAAY,EAAE;OACbzS,IAAI,EAAEM,MAAM;OACZD,OAAO,EAAE;MACT;KACDqS,SAAS,EAAE;OACV1S,IAAI,EAAEM,MAAM;OACZD,OAAO,EAAE;;IAEV;GACDjB,QAAQ,EAAG;;;;;;;;CAQZ,CAAC;;CCLD,MAAMuT,OAAO,GAAG,+BAA+B;;CAE/C;AACA,CAAO,MAAMC,YAAY,GAAG;GAC3B1U,UAAU,EAAE;YACXkS,wBAAK;WACLyC,qCAAI;KACJL;IACA;GACD1S,KAAK,EAAE;;KAENgT,OAAO,EAAE;OACR9S,IAAI,EAAEnI,MAAM;OACZqI,QAAQ,EAAE;MACV;KACD6S,eAAe,EAAE;OAChB/S,IAAI,EAAEC,MAAM;OACZI,OAAO,EAAE;;IAEV;GACDM,KAAK,EAAE,CAAC,UAAU,EAAE,WAAW,CAAC;GAChClC,KAAK,GACL;KACC,OAAO;gBACNe;MACA;IACD;GACDsB,IAAI,GACJ;KACC,OAAO;OACNkS,QAAQ,EAAE;MACV;IACD;GACDtU,QAAQ,EAAE;KACTuU,gBAAgB,GAChB;OAAA;OACC,gCAAO,IAAI,CAACH,OAAO,CAACA,OAAO,qBAApB,sBAAsBI,OAAO,CAACP,OAAO,EAAE,EAAE,CAAC,CAACQ,IAAI,EAAE;MACxD;KACDC,QAAQ,GACR;OAAA;OACC,2DAAO,IAAI,CAACN,OAAO,CAACA,OAAO,qBAApB,uBAAsBO,KAAK,CAACV,OAAO,CAAC,CAAC,CAAC,CAAC,qCAAI,IAAI;MACtD;KACDF,YAAY,GACZ;OACC,OAAO,IAAI,CAACK,OAAO,CAACQ,MAAM,CAAC,CAAC,CAAC,CAACC,OAAO;MACrC;KACDb,SAAS,GACT;OACC,OAAO,IAAI,CAACI,OAAO,CAACQ,MAAM,CAAC,CAAC,CAAC,CAACE,IAAI;MAClC;KACDnJ,YAAY,GACZ;OACC,OAAO;SACNG,UAAU,EAAE,IAAI,CAAC8C,KAAK,CAACmG,KAAK,CAACjG,GAAG,CAACkG,WAAW,GAAG,CAAC;SAChDC,QAAQ,EAAE,GAAG;SACbC,KAAK,EAAE;QACP;;IAEF;GACD7U,OAAO,EAAE;KACR8U,QAAQ,GACR;OACC,IAAI,IAAI,CAACd,eAAe,KAAK,IAAI,IAAI,IAAI,CAACA,eAAe,KAAK,IAAI,CAACD,OAAO,CAACd,KAAK,EAChF;SACC;;OAGD,IAAI,CAAC,IAAI,CAACgB,QAAQ,EAClB;SACC,IAAI,CAACA,QAAQ,GAAG,IAAI;SACpB,IAAI,CAAC7R,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC2R,OAAO,CAACd,KAAK,CAAC;;MAE3C;KACD8B,SAAS,GACT;OACC,IAAI,IAAI,CAACd,QAAQ,EACjB;SACC,IAAI,CAACA,QAAQ,GAAG,KAAK;SACrB,IAAI,CAAC7R,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC2R,OAAO,CAACd,KAAK,CAAC;;;IAG7C;GACD5S,QAAQ,EAAG;;;;;;;;;;;;;;;;CAgBZ,CAAC;;CCjHD;AACA,CAAO,MAAM2U,aAAa,GAAG;GAC5B7V,UAAU,EAAE;KACX0U;IACA;GACD9S,KAAK,EAAE;KACNwR,OAAO,EAAE;OACRtR,IAAI,EAAEuR,QAAQ;OACdrR,QAAQ,EAAE;;IAEX;GACDY,IAAI,GACJ;KACC,OAAO;OACNkT,mBAAmB,EAAE,EAAE;OACvBC,gBAAgB,EAAE,EAAE;OACpBlB,eAAe,EAAE;MACjB;IACD;GACDhU,OAAO,EAAE;KACR,MAAMG,MAAM,GACZ;OACC,MAAM4T,OAAO,GAAG,IAAI,CAACxB,OAAO,EAAE,CAACI,gBAAgB,CAAC,2BAA2B,CAAC;OAE5E,IAAI,CAACuC,gBAAgB,GAAG,CAAC,GAAGnB,OAAO,CAAC,CAACtZ,GAAG,CAAE0a,oBAAiC,IAAK,IAAI,CAACC,mBAAmB,CAACD,oBAAoB,CAAC,CAAC;OAE/H,MAAM,IAAI,CAACrC,SAAS,EAAE;OAEtBiB,OAAO,CAAChB,OAAO,CAAEoC,oBAAiC,IAAK;SACtD,MAAMD,gBAAgB,GAAG,IAAI,CAACE,mBAAmB,CAACD,oBAAoB,CAAC;SACvEA,oBAAoB,CAACnC,MAAM,CAAC,IAAI,CAACiC,mBAAmB,CAACC,gBAAgB,CAACjC,KAAK,CAAC,CAAC;QAC7E,CAAC;MACF;KACDmC,mBAAmB,CAACD,oBAAiC,EACrD;OACC,MAAMlC,KAAK,GAAG/R,MAAM,CAACiU,oBAAoB,CAACjC,OAAO,CAAC,WAAW,CAAC,CAACC,OAAO,CAACna,EAAE,CAAC;;;OAG1E,MAAM+a,OAAO,GAAGsB,IAAI,CAACxL,KAAK,CAACsL,oBAAoB,CAAChC,OAAO,CAAC+B,gBAAgB,CAAC;OAEzE,OAAO;SACNjC,KAAK;SACLc,OAAO,EAAEA,OAAO,CAACA,OAAO;SACxBuB,IAAI,EAAEvB,OAAO,CAACuB,IAAI;SAClBf,MAAM,EAAER,OAAO,CAACQ;QAChB;MACD;KACDhB,MAAM,CAACC,OAAoB,EAAEP,KAAa,EAC1C;OAAA;OACC,6BAAI,CAACgC,mBAAmB,oCAAxB,IAAI,CAACA,mBAAmB,GAAK,EAAE;OAC/B,IAAI,CAACA,mBAAmB,CAAChC,KAAK,CAAC,GAAGO,OAAO;MACzC;KACD+B,UAAU,CAACtC,KAAa,EACxB;OACC,IAAI,CAACe,eAAe,GAAGf,KAAK;MAC5B;KACDuC,WAAW,CAACvC,KAAa,EACzB;OACC,IAAI,IAAI,CAACe,eAAe,KAAKf,KAAK,EAClC;SACC,IAAI,CAACe,eAAe,GAAG,IAAI;;;IAG7B;GACD3T,QAAQ,EAAG;;;;;;;;;;;CAWZ,CAAC;;CC3ED;AACA,CAAO,MAAMoV,UAAU,GAAG;GACzBpV,QAAQ,EAAG;;;;;CAKZ,CAAC;;CCGD,MAAMqV,MAAM,GAAG,6BAA6B;;CAE5C;AACA,CAAO,MAAMC,8BAA8B,GAAG;GAC7CxW,UAAU,EAAE;KACXmT,UAAU;KACV0C,aAAa;KACbS;IACA;GACDnW,MAAM,EAAE;KACPE,MAAM,EAAE;IACR;GACDE,KAAK,GAAuB,EAAE;GAC9BC,QAAQ,EAAE;KACTiW,UAAU,GACV;OACC,OAAOC,4BAAO,CAACC,KAAK,CAAC,IAAI,CAACtW,MAAM,CAAC;;IAElC;GACDqG,OAAO,GACP;KACCmL,6BAAY,CAAC1E,SAAS,CAAC,qBAAqB,EAAE,IAAI,CAACyJ,uBAAuB,CAAC;KAC3E/E,6BAAY,CAAC1E,SAAS,CAAC,eAAe,EAAE,IAAI,CAACnM,MAAM,CAAC;KAEpD,KAAK,IAAI,CAACgM,OAAO,EAAE;IACnB;GACD6J,aAAa,GACb;KAAA;KACChF,6BAAY,CAACiF,WAAW,CAAC,qBAAqB,EAAE,IAAI,CAACF,uBAAuB,CAAC;KAC7E/E,6BAAY,CAACiF,WAAW,CAAC,eAAe,EAAE,IAAI,CAAC9V,MAAM,CAAC;KAEtD,YAAA4R,EAAE,CAACmE,IAAI,6CAAP,SAASC,WAAW,qBAApB,qBAAsBhL,OAAO,CAACuK,MAAM,CAAC;KACrC,yBAAAU,uBAAY,CAACC,YAAY,CAAE,GAAEX,MAAO,uBAAsB,CAAC,qBAA3D,sBAA6DvK,OAAO,EAAE;IACtE;GACDnL,OAAO,EAAE;KACR,MAAMmM,OAAO,GACb;OACC,MAAM;SAAEmK;QAAM,GAAG,MAAMC,gCAAS,CAACC,IAAI,CAACC,uBAAQ,CAACC,sBAAsB,EAAE;SAAEd,UAAU,EAAE,IAAI,CAACA;QAAY,CAAC;OAEvG,MAAMe,iBAAO,CAACL,IAAI,CAAC,IAAI,CAAC/H,KAAK,CAACqI,IAAI,EAAEN,IAAI,CAAC;OAEzC,IAAI,CAACnW,MAAM,EAAE;MACb;KACD4V,uBAAuB,CAAC7J,KAAgB,EACxC;OACC,MAAM,GAAG2K,SAAS,CAAC,GAAG3K,KAAK,CAACC,OAAO,EAAE;OAErC,IAAI0K,SAAS,CAACC,GAAG,EACjB;SAAA;SACC,IAAI,CAACC,GAAG,GAAG,IAAIC,aAAG,mBAACH,SAAS,CAACC,GAAG,6BAAI,EAAE,CAAC,CAACG,cAAc,EAAE,CAACF,GAAG;;OAG7DF,SAAS,CAACC,GAAG,GAAI,mFAAkF,IAAI,CAACC,GAAI,EAAC;OAC7GF,SAAS,CAACK,MAAM,GAAG,MAAM;OACzBL,SAAS,CAAC9U,IAAI,GAAG;SAChB6T,UAAU,EAAE,IAAI,CAACA;QACjB;MACD;KACDzV,MAAM,GACN;OACC,KAAK,IAAI,CAACoO,KAAK,CAAC4I,UAAU,CAAChX,MAAM,EAAE;OACnC,KAAK,IAAI,CAACoO,KAAK,CAAC6I,aAAa,CAACjX,MAAM,EAAE;;IAEvC;GACDE,QAAQ,EAAG;;;;;;;CAOZ,CAAC;;CC9ED;AACA,CAAO,MAAMgX,wBAAwB,GAAG;GACvCnY,IAAI,EAAE,0BAA0B;GAChCC,UAAU,EAAE;kBACXgT,mDAAW;KACXE,sBAAsB;KACtBsD;IACA;GACD5U,KAAK,EAAE;KACNqR,cAAc,EAAE;OACfnR,IAAI,EAAEnI,MAAM;OACZqI,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC;GAC1B5B,OAAO,EAAE;KACRG,MAAM,CAAC8G,MAAoC,EAC3C;OACC,IAAI,CAAC7E,KAAK,CAAC,QAAQ,EAAE6E,MAAM,CAAC;;IAE7B;GACD5G,QAAQ,EAAG;;;;;;;;;;;CAWZ,CAAC;;CCnBD;AACA,OAAanH,WAAW,GAAG;GAC1BgG,IAAI,EAAE,iBAAiB;GACvBC,UAAU,EAAE;YACXmY,4BAAK;YACLjG,wBAAK;aACLxQ,+BAAM;KACNP,kBAAkB;KAClB4R,gBAAgB;KAChBmF;IACA;GACD/X,MAAM,EAAE;KACPC,IAAI,EAAE,EAAE;KACRC,MAAM,EAAE,EAAE;KACV+X,MAAM,EAAE,EAAE;KACV9X,UAAU,EAAE;IACZ;GACDsB,KAAK,EAAE;KACNyW,YAAY,EAAE;OACbvW,IAAI,EAAEI,OAAO;OACbF,QAAQ,EAAE;MACV;KACDsW,mBAAmB,EAAE;OACpBxW,IAAI,EAAEI,OAAO;OACbF,QAAQ,EAAE;MACV;KACDiR,cAAc,EAAE;OACfnR,IAAI,EAAEnI,MAAM;OACZqI,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,qBAAqB,EAAE,4BAA4B,CAAC;GAC5DlC,KAAK,GACL;KACC,OAAO;gBACNe,0BAAO;OACP5H;MACA;IACD;GACDkJ,IAAI,GACJ;KACC,OAAO;OACN2V,QAAQ,EAAE,IAAI;OACdC,SAAS,EAAE;MACX;IACD;GACDhY,QAAQ,EAAE;KACTiY,YAAY,GACZ;OACC,OAAO,IAAI,CAACtR,GAAG,CAAC,8BAA8B,EAAE;SAC/C,SAAS,EAAE,IAAI,CAACoR;QAChB,CAAC;MACF;KACD9X,QAAQ,GACR;OACC,OAAO,CAAC,IAAI,CAACH,UAAU,IAAI,CAAC,IAAI,CAACF,IAAI,CAACM,MAAM,CAACC,IAAI;;IAElD;GACD+K,OAAO,GACP;KACC,KAAK,IAAI,CAACgN,WAAW,EAAE;KACvB7G,6BAAY,CAAC1E,SAAS,CAAC4E,wBAAS,CAACC,qBAAqB,EAAE,IAAI,CAAC0G,WAAW,CAAC;IACzE;GACD3M,SAAS,GACT;KACC8F,6BAAY,CAACiF,WAAW,CAAC/E,wBAAS,CAACC,qBAAqB,EAAE,IAAI,CAAC0G,WAAW,CAAC;IAC3E;GACD7X,OAAO,EAAE;KACR,MAAM6X,WAAW,GACjB;OACC,IAAI,CAAC,IAAI,CAACN,MAAM,IAAI,CAAC,IAAI,CAAC9X,UAAU,EACpC;SACC;;OAGD,IAAI,CAACkY,SAAS,GAAG,IAAI;OAErB,MAAM/B,UAAU,GAAGC,4BAAO,CAACC,KAAK,CAAC,IAAI,CAACtW,MAAM,CAAC;OAE7C,MAAM;SAAEsY;QAAO,GAAG,MAAMvB,gCAAS,CAACC,IAAI,CAACC,uBAAQ,CAACsB,uBAAuB,EAAE;SAAEnC;QAAY,CAAC;OAExF,IAAI,CAAC8B,QAAQ,GAAGI,KAAK,WAALA,KAAK,GAAI,CAAC;OAE1B,IAAI,CAACH,SAAS,GAAG,KAAK;MACtB;KACDK,WAAW,GACX;OACC,IAAI,CAAC,IAAI,CAACpY,QAAQ,EAClB;SACC,IAAI,CAACqY,aAAa,CAAC,IAAI,CAAC;;MAEzB;KACDA,aAAa,CAACC,OAAgB,EAC9B;OACC,IAAI,CAAC9V,KAAK,CAAC,qBAAqB,EAAE8V,OAAO,CAAC;MAC1C;KACDC,oBAAoB,CAACD,OAAgB,EACrC;OACC,IAAI,CAAC9V,KAAK,CAAC,4BAA4B,EAAE8V,OAAO,CAAC;;IAElD;GACD7X,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;CA0BZ,CAAC;;CClID;AACA,OAAa+X,eAAe,GAAG;GAC9BlZ,IAAI,EAAE,iBAAiB;GACvBC,UAAU,EAAE;WACXkZ,uBAAI;KACJnG;IACA;GACD5S,MAAM,EAAE;KACPC,IAAI,EAAE,EAAE;KACRC,MAAM,EAAE;IACR;GACDuB,KAAK,EAAE;KACNyW,YAAY,EAAE;OACbvW,IAAI,EAAEI,OAAO;OACbF,QAAQ,EAAE;MACV;KACDiR,cAAc,EAAE;OACfnR,IAAI,EAAEnI,MAAM;OACZqI,QAAQ,EAAE;;IAEX;GACDS,KAAK,EAAE,CAAC,qBAAqB,CAAC;GAC9BlC,KAAK,GACL;KACC,OAAO;OACN7G,eAAe;gBACf4H;MACA;IACD;GACDd,QAAQ,EAAE;KACT2Y,MAAM,GACN;OACC,OAAO,IAAI,CAACrI,UAAU,GAAGsI,6BAAU,CAACC,YAAY,GAAGD,6BAAU,CAACE,cAAc;MAC5E;KACDxI,UAAU,GACV;OACC,OAAO,IAAI,CAAC1Q,IAAI,CAACiR,YAAY,CAAC3X,eAAe,CAACG,EAAE,CAAC;MACjD;KACD0f,QAAQ,GACR;OACC,OAAO,CAACC,kBAAI,CAACC,SAAS,EAAE,CAACC,YAAY,CAACC,aAAa,CAACC,SAAS;;IAE9D;GACD/Y,OAAO,EAAE;KACRgY,WAAW,GACX;OACC,IAAI,IAAI,CAACU,QAAQ,EACjB;SACC,KAAKM,gCAAS,CAAC;WACdC,SAAS,EAAEN,kBAAI,CAACC,SAAS,EAAE,CAACC,YAAY,CAACC,aAAa,CAACG,SAAS;WAChEvO,WAAW,EAAE,IAAI,CAAC+D;UAClB,CAAC;SAEF;;OAGD,IAAI,IAAI,CAACwB,UAAU,EACnB;SACC,IAAI,CAACiJ,cAAc,EAAE;SAErB;;OAGD,IAAI,CAACjB,aAAa,CAAC,IAAI,CAAC;MACxB;KACDiB,cAAc,GACd;OACC,KAAKvI,8CAAgB,CAACC,YAAY,CAAC,IAAI,CAACC,KAAK,CAACpC,GAAG,CAAC,CAACqC,SAAS,CAACjY,eAAe,CAACG,EAAE,CAAC;MAChF;KACDif,aAAa,CAACC,OAAgB,EAC9B;OACC,IAAI,CAAC9V,KAAK,CAAC,qBAAqB,EAAE8V,OAAO,CAAC;;IAE3C;GACD7X,QAAQ,EAAG;;;;;;;;;;;;;;;;CAgBZ,CAAC;;;;;;;;;;;;;"}