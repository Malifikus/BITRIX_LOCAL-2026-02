this.BX=this.BX||{};this.BX.Tasks=this.BX.Tasks||{};this.BX.Tasks.V2=this.BX.Tasks.V2||{};this.BX.Tasks.V2.Component=this.BX.Tasks.V2.Component||{};(function(t,e,s,n,a,i,l,c,d,m){"use strict";const p={name:"PlacementsListItem",components:{BIcon:c.BIcon,TextMd:n.TextMd,TextXs:n.TextXs},inject:{taskId:{}},props:{placement:{type:Object,required:true}},setup(){return{Outline:c.Outline}},computed:{isDrawerPlacement(){return this.placement.type===i.PlacementType.taskViewDrawer}},methods:{async onPlacementClick(){if(this.isDrawerPlacement){return}await this.openApplicationSlider()},async openApplicationSlider(){await a.Runtime.loadExtension("applayout");BX.rest.AppLayout.openApplication(this.placement.appId,{taskId:this.taskId},{PLACEMENT:this.placement.type,PLACEMENT_ID:this.placement.id})}},template:`\n\t\t<div class="tasks-field-placement-item" @click="onPlacementClick">\n\t\t\t<div class="tasks-field-placement-item-header">\n\t\t\t\t<div class="tasks-field-placement-item-title-container">\n\t\t\t\t\t<BIcon :name="Outline.PRODUCT" class="tasks-field-placement-item-icon"/>\n\t\t\t\t\t<TextMd accent>{{ placement.title }}</TextMd>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<TextXs\n\t\t\t\tv-if="placement.description"\n\t\t\t\tclass="tasks-field-placement-item-description"\n\t\t\t>\n\t\t\t\t{{ placement.description }}\n\t\t\t</TextXs>\n\t\t</div>\n\t`};const o={name:"PlacementsList",components:{PlacementsListItem:p},props:{placements:{type:Array,required:true}},template:`\n\t\t<div class="tasks-field-placements-list-container">\n\t\t\t<div class="tasks-field-placements-list">\n\t\t\t\t<PlacementsListItem\n\t\t\t\t\tv-for="placement in placements"\n\t\t\t\t\t:key="placement.id"\n\t\t\t\t\t:placement\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`};const r=Object.freeze({id:i.TaskField.Placements,title:a.Loc.getMessage("TASKS_V2_PLACEMENT_TITLE")});const h={name:"TaskPlacements",components:{BIcon:c.BIcon,TextMd:n.TextMd,PlacementsList:o},inject:{task:{},taskId:{}},setup(){return{placementsMeta:r,Animated:c.Animated}},data(){return{isLoading:false}},computed:{placementIds(){return this.task.placementIds},hasPlacements(){return a.Type.isArrayFilled(this.task.placementIds)},placements(){if(!this.hasPlacements){return[]}return this.$store.getters[`${i.Model.Placements}/getByIds`](this.placementIds)},shouldLoadPlacements(){return this.task.containsPlacements&&a.Type.isNull(this.placementIds)}},async created(){if(!this.shouldLoadPlacements){return}await this.loadPlacements()},methods:{async loadPlacements(){this.isLoading=true;try{await s.placementService.get(this.taskId)}catch(t){console.error("Failed to load placements",{taskId:this.taskId,error:t})}finally{this.isLoading=false}}},template:`\n\t\t<div\n\t\t\tclass="tasks-field-placements"\n\t\t\t:data-task-id="taskId"\n\t\t\t:data-task-field-id="placementsMeta.id"\n\t\t\tdata-field-container\n\t\t>\n\t\t\t<template v-if="isLoading">\n\t\t\t\t<div class="tasks-field-placements-empty-container">\n\t\t\t\t\t<BIcon :name="Animated.LOADER_WAIT"/>\n\t\t\t\t\t<TextMd accent>{{ loc('TASKS_V2_PLACEMENT_TITLE_LOADING') }}</TextMd>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<PlacementsList v-else-if="hasPlacements" :placements/>\n\t\t</div>\n\t`};const k={components:{Chip:l.Chip},inject:{taskId:{}},setup(){return{Outline:c.Outline,placementsMeta:r}},computed:{design(){return l.ChipDesign.ShadowAccent}},methods:{highlightField(){void m.fieldHighlighter.setContainer(this.$root.$el).highlight(r.id)}},template:`\n\t\t<Chip\n\t\t\t:design="design"\n\t\t\t:text="placementsMeta.title"\n\t\t\t:icon="Outline.PRODUCT"\n\t\t\t:data-task-id="taskId"\n\t\t\t:data-task-chip-id="placementsMeta.id"\n\t\t\tref="chip"\n\t\t\t@click="highlightField"\n\t\t/>\n\t`};t.Placements=h;t.PlacementsChip=k;t.placementsMeta=r})(this.BX.Tasks.V2.Component.Fields=this.BX.Tasks.V2.Component.Fields||{},BX,BX.Tasks.V2.Provider.Service,BX.UI.System.Typography.Vue,BX,BX.Tasks.V2.Const,BX.UI.System.Chip.Vue,BX.UI.IconSet,BX,BX.Tasks.V2.Lib);
//# sourceMappingURL=placements.bundle.map.js