{"version":3,"file":"placements.bundle.js","sources":["../src/components/placements-list-item/placements-list-item.js","../src/components/placements-list/placements-list.js","../src/placements-meta.js","../src/placements.js","../src/placements-chip.js"],"sourcesContent":["import { Runtime } from 'main.core';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport { TextMd, TextXs } from 'ui.system.typography.vue';\n\nimport { PlacementType } from 'tasks.v2.const';\n\nimport './placements-list-item.css';\n\n// @vue/component\nexport const PlacementsListItem = {\n\tname: 'PlacementsListItem',\n\tcomponents: {\n\t\tBIcon,\n\t\tTextMd,\n\t\tTextXs,\n\t},\n\tinject: {\n\t\ttaskId: {},\n\t},\n\tprops: {\n\t\t/** @type PlacementModel */\n\t\tplacement: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): void\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisDrawerPlacement(): boolean\n\t\t{\n\t\t\treturn this.placement.type === PlacementType.taskViewDrawer;\n\t\t},\n\t},\n\tmethods: {\n\t\tasync onPlacementClick(): Promise<void>\n\t\t{\n\t\t\tif (this.isDrawerPlacement)\n\t\t\t{\n\t\t\t\t// TODO: Open application drawer\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait this.openApplicationSlider();\n\t\t},\n\t\tasync openApplicationSlider(): void\n\t\t{\n\t\t\tawait Runtime.loadExtension('applayout');\n\n\t\t\tBX.rest.AppLayout.openApplication(\n\t\t\t\tthis.placement.appId,\n\t\t\t\t{\n\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tPLACEMENT: this.placement.type,\n\t\t\t\t\tPLACEMENT_ID: this.placement.id,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-placement-item\" @click=\"onPlacementClick\">\n\t\t\t<div class=\"tasks-field-placement-item-header\">\n\t\t\t\t<div class=\"tasks-field-placement-item-title-container\">\n\t\t\t\t\t<BIcon :name=\"Outline.PRODUCT\" class=\"tasks-field-placement-item-icon\"/>\n\t\t\t\t\t<TextMd accent>{{ placement.title }}</TextMd>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<TextXs\n\t\t\t\tv-if=\"placement.description\"\n\t\t\t\tclass=\"tasks-field-placement-item-description\"\n\t\t\t>\n\t\t\t\t{{ placement.description }}\n\t\t\t</TextXs>\n\t\t</div>\n\t`,\n};\n","import { PlacementsListItem } from '../placements-list-item/placements-list-item';\n\nimport './placements-list.css';\n\n// @vue/component\nexport const PlacementsList = {\n\tname: 'PlacementsList',\n\tcomponents: {\n\t\tPlacementsListItem,\n\t},\n\tprops: {\n\t\t/** @type PlacementModel[] */\n\t\tplacements: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-field-placements-list-container\">\n\t\t\t<div class=\"tasks-field-placements-list\">\n\t\t\t\t<PlacementsListItem\n\t\t\t\t\tv-for=\"placement in placements\"\n\t\t\t\t\t:key=\"placement.id\"\n\t\t\t\t\t:placement\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { TaskField } from 'tasks.v2.const';\n\nexport const placementsMeta = Object.freeze({\n\tid: TaskField.Placements,\n\ttitle: Loc.getMessage('TASKS_V2_PLACEMENT_TITLE'),\n});\n","import { TextMd } from 'ui.system.typography.vue';\nimport { BIcon, Animated } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.animated';\n\nimport { Type } from 'main.core';\nimport { Model } from 'tasks.v2.const';\nimport { placementService } from 'tasks.v2.provider.service.placement-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport type { PlacementModel } from 'tasks.v2.model.placements';\n\nimport { PlacementsList } from './components/placements-list/placements-list';\nimport { placementsMeta } from './placements-meta';\n\nimport './placements.css';\n\n// @vue/component\nexport const Placements = {\n\tname: 'TaskPlacements',\n\tcomponents: {\n\t\tBIcon,\n\t\tTextMd,\n\t\tPlacementsList,\n\t},\n\tinject: {\n\t\ttask: {},\n\t\ttaskId: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tplacementsMeta,\n\t\t\tAnimated,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisLoading: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tplacementIds(): ?number[]\n\t\t{\n\t\t\treturn this.task.placementIds;\n\t\t},\n\t\thasPlacements(): boolean\n\t\t{\n\t\t\treturn Type.isArrayFilled(this.task.placementIds);\n\t\t},\n\t\tplacements(): PlacementModel[]\n\t\t{\n\t\t\tif (!this.hasPlacements)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this.$store.getters[`${Model.Placements}/getByIds`](this.placementIds);\n\t\t},\n\t\tshouldLoadPlacements(): boolean\n\t\t{\n\t\t\treturn this.task.containsPlacements && Type.isNull(this.placementIds);\n\t\t},\n\t},\n\tasync created(): void\n\t{\n\t\tif (!this.shouldLoadPlacements)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.loadPlacements();\n\t},\n\tmethods: {\n\t\tasync loadPlacements(): Promise<void>\n\t\t{\n\t\t\tthis.isLoading = true;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait placementService.get(this.taskId);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error('Failed to load placements', {\n\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\terror,\n\t\t\t\t});\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-field-placements\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"placementsMeta.id\"\n\t\t\tdata-field-container\n\t\t>\n\t\t\t<template v-if=\"isLoading\">\n\t\t\t\t<div class=\"tasks-field-placements-empty-container\">\n\t\t\t\t\t<BIcon :name=\"Animated.LOADER_WAIT\"/>\n\t\t\t\t\t<TextMd accent>{{ loc('TASKS_V2_PLACEMENT_TITLE_LOADING') }}</TextMd>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<PlacementsList v-else-if=\"hasPlacements\" :placements/>\n\t\t</div>\n\t`,\n};\n","import { Chip, ChipDesign } from 'ui.system.chip.vue';\nimport { Outline } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.outline';\n\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\n\nimport { placementsMeta } from './placements-meta';\n\n// @vue/component\nexport const PlacementsChip = {\n\tcomponents: {\n\t\tChip,\n\t},\n\tinject: {\n\t\ttaskId: {},\n\t},\n\tsetup(): void\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tplacementsMeta,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdesign(): string\n\t\t{\n\t\t\treturn ChipDesign.ShadowAccent;\n\t\t},\n\t},\n\tmethods: {\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(placementsMeta.id);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\t:design=\"design\"\n\t\t\t:text=\"placementsMeta.title\"\n\t\t\t:icon=\"Outline.PRODUCT\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"placementsMeta.id\"\n\t\t\tref=\"chip\"\n\t\t\t@click=\"highlightField\"\n\t\t/>\n\t`,\n};\n"],"names":["PlacementsListItem","name","components","BIcon","TextMd","TextXs","inject","taskId","props","placement","type","Object","required","setup","Outline","computed","isDrawerPlacement","PlacementType","taskViewDrawer","methods","onPlacementClick","openApplicationSlider","Runtime","loadExtension","BX","rest","AppLayout","openApplication","appId","PLACEMENT","PLACEMENT_ID","id","template","PlacementsList","placements","Array","placementsMeta","freeze","TaskField","Placements","title","Loc","getMessage","task","Animated","data","isLoading","placementIds","hasPlacements","Type","isArrayFilled","$store","getters","Model","shouldLoadPlacements","containsPlacements","isNull","created","loadPlacements","placementService","get","error","console","PlacementsChip","Chip","design","ChipDesign","ShadowAccent","highlightField","fieldHighlighter","setContainer","$root","$el","highlight"],"mappings":"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"}