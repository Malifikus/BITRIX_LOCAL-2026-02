{"version":3,"file":"templates-button.bundle.js","sources":["../src/templates-button.js"],"sourcesContent":["import { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport { TextSm } from 'ui.system.typography.vue';\nimport 'ui.icon-set.outline';\n\nimport { EntitySelectorEntity } from 'tasks.v2.const';\nimport { HoverPill } from 'tasks.v2.component.elements.hover-pill';\nimport { EntitySelectorDialog } from 'tasks.v2.lib.entity-selector-dialog';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './templates-button.css';\n\nexport const TemplatesButton = {\n\tcomponents: {\n\t\tBIcon,\n\t\tTextSm,\n\t\tHoverPill,\n\t},\n\tinject: {\n\t\ttask: {},\n\t},\n\tsetup(): { task: TaskModel }\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\temits: ['template'],\n\tbeforeUnmount(): void\n\t{\n\t\tthis.dialog?.destroy();\n\t},\n\tmethods: {\n\t\tshowDialog(): void\n\t\t{\n\t\t\tthis.dialog ??= new EntitySelectorDialog({\n\t\t\t\tcontext: 'tasks-card',\n\t\t\t\tmultiple: false,\n\t\t\t\tenableSearch: true,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: EntitySelectorEntity.Template,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\twithFooter: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tpreselectedItems: this.task.templateId ? [[EntitySelectorEntity.Template, this.task.templateId]] : [],\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: (): void => {\n\t\t\t\t\t\t\tconst templateId = this.dialog.getSelectedItems()[0]?.getId();\n\t\t\t\t\t\t\tif (templateId > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.$emit('template', templateId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.dialog.showTo(this.$refs.button);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div ref=\"button\">\n\t\t\t<HoverPill @click=\"showDialog\">\n\t\t\t\t<div class=\"tasks-full-card-templates-button-container\">\n\t\t\t\t\t<div class=\"tasks-full-card-templates-button-container-text\">{{ loc('TASKS_V2_TEMPLATES') }}</div>\n\t\t\t\t\t<BIcon :name=\"Outline.CHEVRON_DOWN_L\" color=\"var(--ui-color-design-plain-na-content)\"/>\n\t\t\t\t</div>\n\t\t\t</HoverPill>\n\t\t</div>\n\t`,\n};\n"],"names":["TemplatesButton","components","BIcon","TextSm","HoverPill","inject","task","setup","Outline","emits","beforeUnmount","dialog","destroy","methods","showDialog","EntitySelectorDialog","context","multiple","enableSearch","entities","id","EntitySelectorEntity","Template","options","withFooter","preselectedItems","templateId","popupOptions","events","onClose","getSelectedItems","getId","$emit","showTo","$refs","button","template"],"mappings":";;;;;;;OAWaA,eAAe,GAAG;GAC9BC,UAAU,EAAE;YACXC,wBAAK;aACLC,+BAAM;gBACNC;IACA;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE;IACN;GACDC,KAAK,GACL;KACC,OAAO;gBACNC;MACA;IACD;GACDC,KAAK,EAAE,CAAC,UAAU,CAAC;GACnBC,aAAa,GACb;KAAA;KACC,oBAAI,CAACC,MAAM,qBAAX,aAAaC,OAAO,EAAE;IACtB;GACDC,OAAO,EAAE;KACRC,UAAU,GACV;OAAA;OACC,qBAAI,CAACH,MAAM,4BAAX,IAAI,CAACA,MAAM,GAAK,IAAII,sDAAoB,CAAC;SACxCC,OAAO,EAAE,YAAY;SACrBC,QAAQ,EAAE,KAAK;SACfC,YAAY,EAAE,IAAI;SAClBC,QAAQ,EAAE,CACT;WACCC,EAAE,EAAEC,mCAAoB,CAACC,QAAQ;WACjCC,OAAO,EAAE;aACRC,UAAU,EAAE;;UAEb,CACD;SACDC,gBAAgB,EAAE,IAAI,CAACnB,IAAI,CAACoB,UAAU,GAAG,CAAC,CAACL,mCAAoB,CAACC,QAAQ,EAAE,IAAI,CAAChB,IAAI,CAACoB,UAAU,CAAC,CAAC,GAAG,EAAE;SACrGC,YAAY,EAAE;WACbC,MAAM,EAAE;aACPC,OAAO,EAAE,MAAY;eAAA;eACpB,MAAMH,UAAU,4BAAG,IAAI,CAACf,MAAM,CAACmB,gBAAgB,EAAE,CAAC,CAAC,CAAC,qBAAjC,sBAAmCC,KAAK,EAAE;eAC7D,IAAIL,UAAU,GAAG,CAAC,EAClB;iBACC,IAAI,CAACM,KAAK,CAAC,UAAU,EAAEN,UAAU,CAAC;;;;;QAKtC,CAAC;OAEF,IAAI,CAACf,MAAM,CAACsB,MAAM,CAAC,IAAI,CAACC,KAAK,CAACC,MAAM,CAAC;;IAEtC;GACDC,QAAQ,EAAG;;;;;;;;;;CAUZ,CAAC;;;;;;;;"}