{"version":3,"file":"call-model.bundle.js","sources":["../src/call.js","../src/conference.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Call Application model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {Type} from 'main.core';\nimport {ConferenceUserState} from 'call.const';\n\nexport class CallModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'call';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tusers: {}\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\treturn {\n\t\t\tid: params.id ? params.id : 0,\n\t\t\tstate: ConferenceUserState.Idle,\n\t\t\ttalking: false,\n\t\t\tpinned: false,\n\t\t\tcameraState: false,\n\t\t\tmicrophoneState: false,\n\t\t\tscreenState: false,\n\t\t\tfloorRequestState: false\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetUser: state => (userId) =>\n\t\t\t{\n\t\t\t\tuserId = parseInt(userId, 10);\n\n\t\t\t\tif (!state.users[userId])\n\t\t\t\t{\n\t\t\t\t\treturn this.getElementState({id: userId});\n\t\t\t\t}\n\n\t\t\t\treturn state.users[userId];\n\t\t\t},\n\t\t\tgetBlankUser: state => (userId) =>\n\t\t\t{\n\t\t\t\tuserId = parseInt(userId, 10);\n\n\t\t\t\treturn this.getElementState({id: userId});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tupdateUser: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.id = parseInt(payload.id, 10);\n\n\t\t\t\tpayload.fields = Object.assign(\n\t\t\t\t\t{},\n\t\t\t\t\tthis.validate(payload.fields),\n\t\t\t\t);\n\n\t\t\t\tstore.commit('updateUser', payload);\n\t\t\t},\n\t\t\tunpinUser: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('unpinUser');\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tupdateUser: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (!state.users[payload.id])\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.users, payload.id, Object.assign(this.getElementState(), payload.fields, {id: payload.id}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate.users[payload.id] = Object.assign(state.users[payload.id], payload.fields);\n\t\t\t\t}\n\t\t\t},\n\t\t\tunpinUser: (state, payload) =>\n\t\t\t{\n\t\t\t\tconst pinnedUser = Object.values(state.users).find(user => user.pinned === true);\n\n\t\t\t\tif (pinnedUser)\n\t\t\t\t{\n\t\t\t\t\tstate.users[pinnedUser.id].pinned = false;\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tvalidate(payload)\n\t{\n\t\tconst result = {};\n\n\t\tif (Type.isNumber(payload.id) || Type.isString(payload.id))\n\t\t{\n\t\t\tresult.id = parseInt(payload.id, 10);\n\t\t}\n\n\t\tif (ConferenceUserState[payload.state])\n\t\t{\n\t\t\tresult.state = payload.state;\n\t\t}\n\n\t\tif (Type.isBoolean(payload.talking))\n\t\t{\n\t\t\tresult.talking = payload.talking;\n\t\t}\n\n\t\tif (Type.isBoolean(payload.pinned))\n\t\t{\n\t\t\tresult.pinned = payload.pinned;\n\t\t}\n\n\t\tif (Type.isBoolean(payload.cameraState))\n\t\t{\n\t\t\tresult.cameraState = payload.cameraState;\n\t\t}\n\n\t\tif (Type.isBoolean(payload.microphoneState))\n\t\t{\n\t\t\tresult.microphoneState = payload.microphoneState;\n\t\t}\n\n\t\tif (Type.isBoolean(payload.screenState))\n\t\t{\n\t\t\tresult.screenState = payload.screenState;\n\t\t}\n\n\t\tif (Type.isBoolean(payload.floorRequestState))\n\t\t{\n\t\t\tresult.floorRequestState = payload.floorRequestState;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn {\n\t\t\tusers: false\n\t\t}\n\t}\n}","/**\n * Bitrix Messenger\n * Call Application model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {ConferenceStateType, ConferenceRightPanelMode as RightPanelMode} from 'call.const';\n\nexport class ConferenceModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'conference';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcommon:\n\t\t\t{\n\t\t\t\tinited: false,\n\t\t\t\tpassChecked: true,\n\t\t\t\tshowChat: false,\n\t\t\t\tuserCount: 0,\n\t\t\t\tmessageCount: 0,\n\t\t\t\tuserInCallCount: 0,\n\t\t\t\tstate: ConferenceStateType.preparation,\n\t\t\t\tcallEnded: false,\n\t\t\t\tshowSmiles: false,\n\t\t\t\terror: '',\n\t\t\t\tconferenceTitle: '',\n\t\t\t\talias: '',\n\t\t\t\tpermissionsRequested: false,\n\t\t\t\tconferenceStarted: null,\n\t\t\t\tconferenceStartDate: null,\n\t\t\t\tjoinWithVideo: null,\n\t\t\t\tuserReadyToJoin: false,\n\t\t\t\tisBroadcast: false,\n\t\t\t\tusers: [],\n\t\t\t\tusersInCall: [],\n\t\t\t\tpresenters: [],\n\t\t\t\trightPanelMode: RightPanelMode.hidden,\n\t\t\t\thasErrorInCall: false,\n\t\t\t},\n\t\t\tuser:\n\t\t\t{\n\t\t\t\tid: -1,\n\t\t\t\thash: ''\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tshowChat: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.newState !== 'boolean')\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('showChat', payload);\n\t\t\t},\n\t\t\tchangeRightPanelMode: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!RightPanelMode[payload.mode])\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('changeRightPanelMode', payload);\n\t\t\t},\n\t\t\tsetPermissionsRequested: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.status !== 'boolean')\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tstore.commit('setPermissionsRequested', payload);\n\t\t\t},\n\t\t\tsetPresenters: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!Array.isArray(payload.presenters))\n\t\t\t\t{\n\t\t\t\t\tpayload.presenters = [payload.presenters];\n\t\t\t\t}\n\n\t\t\t\tstore.commit('setPresenters', payload);\n\t\t\t},\n\t\t\tsetUsers: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!Array.isArray(payload.users))\n\t\t\t\t{\n\t\t\t\t\tpayload.users = [payload.users];\n\t\t\t\t}\n\n\t\t\t\tstore.commit('setUsers', payload);\n\t\t\t},\n\t\t\tremoveUsers: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!Array.isArray(payload.users))\n\t\t\t\t{\n\t\t\t\t\tpayload.users = [payload.users];\n\t\t\t\t}\n\n\t\t\t\tstore.commit('removeUsers', payload);\n\t\t\t},\n\t\t\tsetUsersInCall: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!Array.isArray(payload.users))\n\t\t\t\t{\n\t\t\t\t\tpayload.users = [payload.users];\n\t\t\t\t}\n\n\t\t\t\tstore.commit('setUsersInCall', payload);\n\t\t\t},\n\t\t\tremoveUsersInCall: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!Array.isArray(payload.users))\n\t\t\t\t{\n\t\t\t\t\tpayload.users = [payload.users];\n\t\t\t\t}\n\n\t\t\t\tstore.commit('removeUsersInCall', payload);\n\t\t\t},\n\t\t\tsetConferenceTitle: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.conferenceTitle !== 'string')\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('setConferenceTitle', payload);\n\t\t\t},\n\t\t\tsetBroadcastMode: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.broadcastMode !== 'boolean')\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('setBroadcastMode', payload);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tcommon: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.inited === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.inited = payload.inited;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.passChecked === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.passChecked = payload.passChecked;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.userCount === 'number' || typeof payload.userCount === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.userCount = parseInt(payload.userCount);\n\t\t\t\t}\n\t\t\t\tif (typeof payload.messageCount === 'number' || typeof payload.messageCount === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.messageCount = parseInt(payload.messageCount);\n\t\t\t\t}\n\t\t\t\tif (typeof payload.userInCallCount === 'number' || typeof payload.userInCallCount === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.userInCallCount = parseInt(payload.userInCallCount);\n\t\t\t\t}\n\t\t\t\tif (typeof payload.componentError === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.componentError = payload.componentError;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.isBroadcast === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.isBroadcast = payload.isBroadcast;\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(payload.presenters))\n\t\t\t\t{\n\t\t\t\t\tstate.common.presenters = payload.presenters;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.hasErrorInCall === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.hasErrorInCall = payload.hasErrorInCall;\n\t\t\t\t}\n\t\t\t},\n\t\t\tuser: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.id === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.user.id = payload.id;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.hash === 'string' && payload.hash !== state.user.hash)\n\t\t\t\t{\n\t\t\t\t\tstate.user.hash = payload.hash;\n\t\t\t\t}\n\t\t\t\tif (this.isSaveNeeded({user: payload}))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowChat: (state, {newState}) =>\n\t\t\t{\n\t\t\t\tstate.common.showChat = newState;\n\t\t\t},\n\t\t\tchangeRightPanelMode: (state, {mode}) =>\n\t\t\t{\n\t\t\t\tstate.common.rightPanelMode = mode;\n\t\t\t},\n\t\t\tsetPermissionsRequested: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.permissionsRequested = payload.status;\n\t\t\t},\n\t\t\tstartCall: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.state = ConferenceStateType.call;\n\t\t\t\tstate.common.callEnded = false;\n\t\t\t},\n\t\t\tendCall: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.state = ConferenceStateType.preparation;\n\t\t\t\tstate.common.callEnded = true;\n\t\t\t},\n\t\t\treturnToPreparation: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.state = ConferenceStateType.preparation;\n\t\t\t},\n\t\t\ttoggleSmiles: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.showSmiles = !state.common.showSmiles;\n\t\t\t},\n\t\t\tsetError: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.errorCode === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.error = payload.errorCode;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetConferenceTitle: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.conferenceTitle = payload.conferenceTitle;\n\t\t\t},\n\t\t\tsetBroadcastMode: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.isBroadcast = payload.broadcastMode;\n\t\t\t},\n\t\t\tsetAlias: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.alias === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.alias = payload.alias;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetJoinType: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.joinWithVideo === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.joinWithVideo = payload.joinWithVideo;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetConferenceStatus: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.conferenceStarted === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.conferenceStarted = payload.conferenceStarted;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetConferenceHasErrorInCall: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.hasErrorInCall === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.hasErrorInCall = payload.hasErrorInCall;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetConferenceStartDate: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (payload.conferenceStartDate instanceof Date)\n\t\t\t\t{\n\t\t\t\t\tstate.common.conferenceStartDate = payload.conferenceStartDate;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetUserReadyToJoin: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.userReadyToJoin = true;\n\t\t\t},\n\t\t\tsetPresenters: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (payload.replace)\n\t\t\t\t{\n\t\t\t\t\tstate.common.presenters = payload.presenters;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpayload.presenters.forEach(presenter => {\n\t\t\t\t\t\tpresenter = parseInt(presenter);\n\t\t\t\t\t\tif (!state.common.presenters.includes(presenter))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.common.presenters.push(presenter);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetUsers: (state, payload) =>\n\t\t\t{\n\t\t\t\tpayload.users.forEach(user => {\n\t\t\t\t\tuser = parseInt(user);\n\t\t\t\t\tif (!state.common.users.includes(user))\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.users.push(user);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tremoveUsers: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.users = state.common.users.filter(user => {\n\t\t\t\t\treturn !payload.users.includes(parseInt(user));\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetUsersInCall: (state, payload) =>\n\t\t\t{\n\t\t\t\tpayload.users.forEach(user => {\n\t\t\t\t\tuser = parseInt(user);\n\t\t\t\t\tif (!state.common.usersInCall.includes(user))\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.common.usersInCall.push(user);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tremoveUsersInCall: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.usersInCall = state.common.usersInCall.filter(user => {\n\t\t\t\t\treturn !payload.users.includes(parseInt(user));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn {\n\t\t\tcommon: {\n\t\t\t\tinited: null,\n\t\t\t\tstate: null,\n\t\t\t\tshowSmiles: null,\n\t\t\t\tuserCount: null,\n\t\t\t\tmessageCount: null,\n\t\t\t\tuserInCallCount: null,\n\t\t\t\terror: null,\n\t\t\t\tconferenceTitle: null,\n\t\t\t\talias: null,\n\t\t\t\tconferenceStarted: null,\n\t\t\t\tconferenceStartDate: null,\n\t\t\t\tjoinWithVideo: null,\n\t\t\t\tuserReadyToJoin: null,\n\t\t\t\trightPanelMode: null,\n\t\t\t\tpresenters: null,\n\t\t\t\tusers: null,\n\t\t\t\thasErrorInCall: null,\n\t\t\t},\n\t\t}\n\t}\n}"],"names":["CallModel","users","params","id","state","ConferenceUserState","Idle","talking","pinned","cameraState","microphoneState","screenState","floorRequestState","getUser","userId","parseInt","getElementState","getBlankUser","updateUser","store","payload","fields","Object","assign","validate","commit","unpinUser","Vue","set","pinnedUser","values","find","user","result","Type","isNumber","isString","isBoolean","VuexBuilderModel","ConferenceModel","common","inited","passChecked","showChat","userCount","messageCount","userInCallCount","ConferenceStateType","preparation","callEnded","showSmiles","error","conferenceTitle","alias","permissionsRequested","conferenceStarted","conferenceStartDate","joinWithVideo","userReadyToJoin","isBroadcast","usersInCall","presenters","rightPanelMode","RightPanelMode","hidden","hasErrorInCall","hash","newState","changeRightPanelMode","mode","setPermissionsRequested","status","setPresenters","Array","isArray","setUsers","removeUsers","setUsersInCall","removeUsersInCall","setConferenceTitle","setBroadcastMode","broadcastMode","componentError","isSaveNeeded","saveState","startCall","call","endCall","returnToPreparation","toggleSmiles","setError","errorCode","setAlias","setJoinType","setConferenceStatus","setConferenceHasErrorInCall","setConferenceStartDate","Date","setUserReadyToJoin","replace","forEach","presenter","includes","push","filter"],"mappings":"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"}