this.BX=this.BX||{};this.BX.Bizproc=this.BX.Bizproc||{};(function(e,t,i){"use strict";var l,a;function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,l)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t){o(e,t);t.add(e)}function c(e,t,i){o(e,t);t.set(e,i)}function o(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function b(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var p=new WeakMap;var u=new WeakMap;var h=new WeakMap;var v=new WeakMap;var d=new WeakMap;var f=new WeakMap;var P=new WeakMap;var w=new WeakMap;var H=new WeakSet;var y=new WeakSet;var F=new WeakSet;var S=new WeakSet;var g=new WeakSet;var k=new WeakSet;var G=new WeakSet;var m=new WeakSet;var O=function(){function e(t){babelHelpers.classCallCheck(this,e);n(this,m);n(this,G);n(this,k);n(this,g);n(this,S);n(this,F);n(this,y);n(this,H);c(this,p,{writable:true,value:void 0});c(this,u,{writable:true,value:void 0});c(this,h,{writable:true,value:void 0});c(this,v,{writable:true,value:void 0});c(this,d,{writable:true,value:void 0});c(this,f,{writable:true,value:null});c(this,P,{writable:true,value:null});c(this,w,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,p,t.containerId);babelHelpers.classPrivateFieldSet(this,u,t.config||{});babelHelpers.classPrivateFieldSet(this,h,t.inputName);babelHelpers.classPrivateFieldSet(this,v,t.property);babelHelpers.classPrivateFieldSet(this,d,t.initialValue||"")}babelHelpers.createClass(e,[{key:"init",value:function e(){babelHelpers.classPrivateFieldSet(this,f,document.getElementById(babelHelpers.classPrivateFieldGet(this,p)));if(!babelHelpers.classPrivateFieldGet(this,f)){return}b(this,y,W).call(this);b(this,F,j).call(this);b(this,k,M).call(this,b(this,m,X).call(this,babelHelpers.classPrivateFieldGet(this,d)));b(this,S,E).call(this)}},{key:"destroy",value:function e(){babelHelpers.classPrivateFieldSet(this,f,null);babelHelpers.classPrivateFieldSet(this,P,null);babelHelpers.classPrivateFieldSet(this,w,null)}}],[{key:"create",value:function t(i){var l=new e(i);l.init();return l}},{key:"decorateNode",value:function i(l,a){if(!l){return null}if(!e.selectors){e.selectors=new WeakMap}var r=e.selectors.get(l);if(!r){var n=JSON.parse(l.dataset.config||"{}");n.containerId=l.id;var c=t.Type.isPlainObject(a)?a:{};n.config=s(s({},n.config),c);r=BX.Bizproc.EntitySelector.create(n);e.selectors.set(l,r)}return r}}]);return e}();function B(){var e=babelHelpers.classPrivateFieldGet(this,v).Multiple;return e===true}function W(){babelHelpers.classPrivateFieldSet(this,P,new i.TagSelector(babelHelpers.classPrivateFieldGet(this,u)));babelHelpers.classPrivateFieldGet(this,P).renderTo(babelHelpers.classPrivateFieldGet(this,f))}function j(){babelHelpers.classPrivateFieldSet(this,w,t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(["<div></div>"]))));t.Dom.hide(babelHelpers.classPrivateFieldGet(this,w));t.Dom.append(babelHelpers.classPrivateFieldGet(this,w),babelHelpers.classPrivateFieldGet(this,f))}function E(){var e,t=this;if(!((e=babelHelpers.classPrivateFieldGet(this,P))!==null&&e!==void 0&&e.dialog)){return}babelHelpers.classPrivateFieldGet(this,P).dialog.subscribe("Item:onSelect",(function(e){b(t,g,D).call(t)}));babelHelpers.classPrivateFieldGet(this,P).dialog.subscribe("Item:onDeselect",(function(e){b(t,g,D).call(t)}))}function D(){if(!babelHelpers.classPrivateFieldGet(this,P)){return}var e=babelHelpers.classPrivateFieldGet(this,P).getDialog();if(!e){return}var t=e.getSelectedItems();var i=t.map((function(e){return String(e.getId())}));b(this,k,M).call(this,i)}function M(e){var i=this;if(!babelHelpers.classPrivateFieldGet(this,w)){return}t.Dom.clean(babelHelpers.classPrivateFieldGet(this,w));if(e.length===0){b(this,G,T).call(this,"");return}e.forEach((function(e){b(i,G,T).call(i,e)}))}function T(e){if(!babelHelpers.classPrivateFieldGet(this,w)){return}var i=t.Tag.render(a||(a=babelHelpers.taggedTemplateLiteral(['<input type="hidden" />'])));i.name=b(this,H,B).call(this)?"".concat(babelHelpers.classPrivateFieldGet(this,h),"[]"):babelHelpers.classPrivateFieldGet(this,h);i.value=e;t.Dom.append(i,babelHelpers.classPrivateFieldGet(this,w))}function X(e){if(!e){return[]}if(b(this,H,B).call(this)&&t.Type.isArray(e)){return e}return[e]}babelHelpers.defineProperty(O,"selectors",null);BX.Bizproc.EntitySelector=O;e.EntitySelector=O})(this.BX.Bizproc.EntitySelector=this.BX.Bizproc.EntitySelector||{},BX,BX.UI.EntitySelector);
//# sourceMappingURL=bp-entity-selector.bundle.map.js