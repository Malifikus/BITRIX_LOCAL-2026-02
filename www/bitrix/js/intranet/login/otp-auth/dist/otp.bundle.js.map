{"version":3,"file":"otp.bundle.js","sources":["../src/components/legacy-otp.js","../src/components/captcha.js","../src/api/ajax.js","../src/components/push-otp.js","../src/components/alternative-methods.js","../src/components/digit-input.js","../src/components/verification-code.js","../src/components/sms.js","../src/components/alphanumeric-input.js","../src/components/recovery-code-input.js","../src/components/recovery-codes.js","../src/components/recover-access.js","../src/app.js","../src/index.js"],"sourcesContent":["// @vue/component\nimport { Headline } from 'ui.system.typography.vue';\n\nexport const LegacyOtp = {\n\tcomponents: {\n\t\tHeadline,\n\t},\n\tprops: {\n\t\tauthUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tauthOtpHelpLink: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tauthLoginUrl: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\trememberOtp: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tcaptchaCode: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tnotShowLinks: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisBitrix24: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\terrorMessage: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisWaiting: false,\n\t\t\tcsrfToken: null,\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tif (this.$refs.modalInput)\n\t\t{\n\t\t\tthis.$refs.modalInput.focus();\n\t\t}\n\t},\n\tmethods: {\n\t\tonSubmitForm() {\n\t\t\tthis.isWaiting = true;\n\t\t\tthis.$emit('form-submit');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<form name=\"form_auth\" method=\"post\" target=\"_top\" :action=\"authUrl\">\n\t\t\t<input type=\"hidden\" name=\"AUTH_FORM\" value=\"Y\" />\n\t\t\t<input type=\"hidden\" name=\"TYPE\" value=\"OTP\" />\n\t\t\t<input type=\"hidden\" name=\"sessid\" :value=\"this.$Bitrix.Loc.getMessage('bitrix_sessid')\" />\n\n\t\t\t<div class=\"intranet-island-otp-push-legacy-otp__wrapper\">\n\t\t\t\t<Headline size='lg' class=\"intranet-form-title\">\n\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_TITLE') }}\n\t\t\t\t</Headline>\n\t\t\t\t<div class=\"intranet-login-enter-form intranet-logging-in__login-form\">\n\t\t\t\t\t<div v-if=\"errorMessage\" class=\"intranet-login-error-block\" v-html=\"errorMessage\"></div>\n\t\t\t\t\t<div class=\"intranet-login-enter-form__login-wrapper\">\n\t\t\t\t\t\t<div class=\"intranet-text-input intranet-login-enter-form__login\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tname=\"USER_OTP\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element intranet-text-input__field\"\n\t\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\t\tvalue=\"\"\n\t\t\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\t\t\t:placeholder=\"this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_PLACEHOLDER')\"\n\t\t\t\t\t\t\t\tref=\"modalInput\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\n\t\t\t\t\t\t<template v-if=\"captchaCode\">\n\t\t\t\t\t\t\t<Headline size='sm' class=\"intranet-form-title --vertical-padding\">\n\t\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CAPTCHA_PROMT') }}\n\t\t\t\t\t\t\t</Headline>\n\t\t\t\t\t\t\t<div class=\"intranet-text-captcha_item\">\n\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"captcha_sid\" :value=\"captchaCode\" />\n\t\t\t\t\t\t\t\t<img :src=\"'/bitrix/tools/captcha.php?captcha_sid=' + captchaCode\" width=\"180\" height=\"40\" alt=\"CAPTCHA\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-text-input intranet-login-enter-form__login\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tname=\"captcha_word\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CAPTCHA_PROMT')\"\n\t\t\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\t\t\tvalue=\"\"\n\t\t\t\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element intranet-text-input__field\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"intranet-text-btn intranet-text-btn__reg ui-btn ui-btn-lg ui-btn-success\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t@click=\"onSubmitForm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"intranet-text-btn__content-wrapper\">\n\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CONTINUE_BUTTON') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"intranet-text-btn__spinner\" v-show=\"isWaiting\"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div v-if=\"rememberOtp\" class=\"intranet-base-checkbox intranet-password-enter-form__remember-me\">\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"OTP_REMEMBER\" name=\"OTP_REMEMBER\" value=\"Y\" class=\"login-checkbox-user-remember\"/>\n\t\t\t\t\t\t<label for=\"OTP_REMEMBER\" class=\"login-item-checkbox-label\">&nbsp;\n\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage(\"INTRANET_AUTH_OTP_REMEMBER_ME\") }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Teleport to=\".intranet-body__footer-right\">\n\t\t\t\t<button class=\"intranet-help-widget intranet-page-base__help\">\n\t\t\t\t\t<i class=\"ui-icon-set intranet-help-widget__icon\"></i>\n\t\t\t\t\t<a class=\"intranet-help-widget__text\" :href=\"authOtpHelpLink\">\n\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_HELP') }}\n\t\t\t\t\t</a>\n\t\t\t\t</button>\n\t\t\t</Teleport>\n\n\t\t\t<Teleport to=\".intranet-body__header-right\" v-if=\"!notShowLinks && !isBitrix24\">\n\t\t\t\t<div class=\"intranet-text-btn intranet-text-btn--auth\">\n\t\t\t\t\t<a class=\"intranet-text-btn-link\" :href=\"authLoginUrl\" rel=\"nofollow\">\n\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_LINK') }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</Teleport>\n\t\t</form>\n\t`,\n};\n","import { Headline } from 'ui.system.typography.vue';\n// @vue/component\nexport const Captcha = {\n\tcomponents: {\n\t\tHeadline,\n\t},\n\tprops: {\n\t\tcaptchaCode: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisWaiting: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tgetCaptchaSrc(): string\n\t\t{\n\t\t\treturn `/bitrix/tools/captcha.php?captcha_sid=${this.captchaCode}`;\n\t\t},\n\t},\n\tmethods: {\n\t\tonSubmitForm()\n\t\t{\n\t\t\tthis.isWaiting = true;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"intranet-island-otp-captcha__wrapper\">\n\t\t\t<Headline size='md' class=\"intranet-form-add-block__headline --margin\">\n\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CAPTCHA_PROMT') }}\n\t\t\t</Headline>\n\t\t\t<div class=\"intranet-text-captcha_item\">\n\t\t\t\t<input type=\"hidden\" name=\"captcha_sid\" :value=\"captchaCode\" class=\"login-inp\"/>\n\t\t\t\t<img :src=\"getCaptchaSrc\" width=\"180\" height=\"40\" alt=\"CAPTCHA\"/>\n\t\t\t</div>\n\t\t\t<div class=\"intranet-text-input intranet-login-enter-form__login\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"captcha_word\"\n\t\t\t\t\t:placeholder=\"this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CAPTCHA_PROMT')\"\n\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\tvalue=\"\"\n\t\t\t\t\tclass=\"ui-ctl-element intranet-text-input__field\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\n\t\t\t<button\n\t\t\t\tclass=\"intranet-text-btn ui-btn ui-btn-lg ui-btn-success --wide\"\n\t\t\t\ttype=\"submit\"\n\t\t\t\t@click=\"onSubmitForm\"\n\t\t\t>\n\t\t\t\t<span class=\"intranet-text-btn__content-wrapper\">\n\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CONTINUE_BUTTON') }}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"intranet-text-btn__spinner\" v-show=\"isWaiting\"></span>\n\t\t\t</button>\n\t\t</div>\n\t`,\n};\n","import { ajax } from 'main.core';\n\nexport class Ajax\n{\n\tstatic sendAuthSms(): Promise\n\t{\n\t\treturn ajax.runAction('intranet.v2.Otp.sendAuthSms', {});\n\t}\n\n\tstatic sendMobilePush(channelTag: string): Promise\n\t{\n\t\treturn ajax.runAction('intranet.v2.Otp.sendMobilePush', {\n\t\t\tdata: {\n\t\t\t\tchannelTag,\n\t\t\t},\n\t\t});\n\t}\n}\n","import { Captcha } from './captcha';\nimport { Headline } from 'ui.system.typography.vue';\nimport { Ajax } from '../api/ajax';\nimport { sendData } from 'ui.analytics';\n\n// @vue/component\n\nexport const PushOtp = {\n\tcomponents: {\n\t\tCaptcha,\n\t\tHeadline,\n\t},\n\tprops: {\n\t\tpushOtpConfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tauthUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trememberOtp: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tcaptchaCode: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tuserDevice: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\terrorMessage: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t\tisAlternativeMethodsAvailable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisPushBlockVisible: true,\n\t\t\tisCaptchaBlockVisible: false,\n\t\t\tisUserDeviceVisible: (Object.keys(this.userDevice).length > 0),\n\t\t\tisPushDisabled: true,\n\t\t\tcooldownSecondsLeft: 0,\n\t\t\tcooldownIntervalId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tdeviceIconClass(): String\n\t\t{\n\t\t\treturn `intranet-island-otp__device-icon--${this.userDevice.icon}`;\n\t\t},\n\t\tisCountdownVisible(): boolean\n\t\t{\n\t\t\treturn this.isPushDisabled && this.cooldownSecondsLeft > 0;\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tif (this.pushOtpConfig)\n\t\t{\n\t\t\tthis.initPushOtp();\n\t\t}\n\n\t\tconst storedCooldownSeconds = this.readCooldownSecondsLeft();\n\t\tif (storedCooldownSeconds > 0)\n\t\t{\n\t\t\tthis.startCooldown(storedCooldownSeconds, false);\n\t\t}\n\t\telse if (this.wasCooldownInitialized())\n\t\t{\n\t\t\tthis.isPushDisabled = false;\n\t\t\tthis.cooldownSecondsLeft = 0;\n\t\t\tthis.clearCooldownDeadline();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst initialCooldown = this.getCooldownSeconds();\n\t\t\tif (initialCooldown > 0)\n\t\t\t{\n\t\t\t\tthis.startCooldown(initialCooldown);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.isPushDisabled = false;\n\t\t\t\tthis.cooldownSecondsLeft = 0;\n\t\t\t}\n\t\t}\n\t\tsendData({\n\t\t\ttool: 'security',\n\t\t\tcategory: 'fa_auth_form',\n\t\t\tevent: 'show',\n\t\t});\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.stopCooldownTimer();\n\t},\n\tmethods: {\n\t\trepeatPush()\n\t\t{\n\t\t\tif (this.isPushDisabled || !this.pushOtpConfig)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tAjax.sendMobilePush(this.pushOtpConfig.channelTag)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.startCooldown(this.getCooldownSeconds());\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.startCooldown(this.getCooldownSeconds());\n\t\t\t\t});\n\t\t},\n\t\tgetCooldownSeconds(): number\n\t\t{\n\t\t\tconst defaultCooldown = 5;\n\t\t\tconst seconds = Number(this.pushOtpConfig?.cooldownSeconds);\n\n\t\t\treturn Number.isFinite(seconds) && seconds > 0 ? Math.floor(seconds) : defaultCooldown;\n\t\t},\n\t\tstartCooldown(seconds, shouldPersist = true)\n\t\t{\n\t\t\tconst cooldown = Number(seconds);\n\n\t\t\tif (!cooldown || cooldown <= 0)\n\t\t\t{\n\t\t\t\tthis.stopCooldownTimer();\n\t\t\t\tthis.isPushDisabled = false;\n\t\t\t\tthis.cooldownSecondsLeft = 0;\n\t\t\t\tthis.clearCooldownDeadline();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.cooldownSecondsLeft = Math.floor(cooldown);\n\t\t\tthis.isPushDisabled = true;\n\t\t\tif (shouldPersist)\n\t\t\t{\n\t\t\t\tthis.saveCooldownDeadline(this.cooldownSecondsLeft);\n\t\t\t}\n\t\t\tthis.markCooldownInitialized();\n\n\t\t\tthis.stopCooldownTimer();\n\t\t\tthis.cooldownIntervalId = setInterval(() => {\n\t\t\t\tif (this.cooldownSecondsLeft <= 1)\n\t\t\t\t{\n\t\t\t\t\tthis.stopCooldownTimer();\n\t\t\t\t\tthis.cooldownSecondsLeft = 0;\n\t\t\t\t\tthis.isPushDisabled = false;\n\t\t\t\t\tthis.clearCooldownDeadline();\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.cooldownSecondsLeft -= 1;\n\t\t\t}, 1000);\n\t\t},\n\t\tstopCooldownTimer()\n\t\t{\n\t\t\tif (this.cooldownIntervalId)\n\t\t\t{\n\t\t\t\tclearInterval(this.cooldownIntervalId);\n\t\t\t\tthis.cooldownIntervalId = null;\n\t\t\t}\n\t\t},\n\t\tgetCooldownStorageKey(): string\n\t\t{\n\t\t\tconst channelTag = this.pushOtpConfig?.channelTag ?? 'default';\n\n\t\t\treturn `intranet:push-otp:cooldown:${channelTag}`;\n\t\t},\n\t\tgetCooldownInitKey(): string\n\t\t{\n\t\t\treturn `${this.getCooldownStorageKey()}:initialized`;\n\t\t},\n\t\tisStorageAvailable(): boolean\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn Boolean(window?.localStorage);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tmarkCooldownInitialized(): void\n\t\t{\n\t\t\tif (!this.isStorageAvailable())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.setItem(this.getCooldownInitKey(), '1');\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t},\n\t\twasCooldownInitialized(): boolean\n\t\t{\n\t\t\tif (!this.isStorageAvailable())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn window.localStorage.getItem(this.getCooldownInitKey()) === '1';\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tsaveCooldownDeadline(seconds): void\n\t\t{\n\t\t\tif (!this.isStorageAvailable())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst deadline = Date.now() + (Number(seconds) * 1000);\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.setItem(this.getCooldownStorageKey(), String(deadline));\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t},\n\t\treadCooldownSecondsLeft(): number\n\t\t{\n\t\t\tif (!this.isStorageAvailable())\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tconst storedValue = Number(window.localStorage.getItem(this.getCooldownStorageKey()));\n\t\t\t\tif (!Number.isFinite(storedValue))\n\t\t\t\t{\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\tconst diffMs = storedValue - Date.now();\n\n\t\t\t\treturn diffMs > 0 ? Math.ceil(diffMs / 1000) : 0;\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t},\n\t\tclearCooldownDeadline(): void\n\t\t{\n\t\t\tif (!this.isStorageAvailable())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.removeItem(this.getCooldownStorageKey());\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t},\n\t\tshowAlternatives()\n\t\t{\n\t\t\tif (this.isAlternativeMethodsAvailable)\n\t\t\t{\n\t\t\t\tthis.$emit('show-alternatives');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$emit('show-recover-access');\n\t\t\t}\n\t\t\tsendData({\n\t\t\t\ttool: 'security',\n\t\t\t\tcategory: 'fa_auth_form',\n\t\t\t\tevent: 'other_type_click',\n\t\t\t});\n\t\t},\n\t\tshowCaptcha()\n\t\t{\n\t\t\tthis.isPushBlockVisible = false;\n\t\t\tthis.isCaptchaBlockVisible = true;\n\t\t},\n\t\tinitPushOtp()\n\t\t{\n\t\t\tconst BX = window.BX;\n\t\t\tif (!BX || !this.pushOtpConfig)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst Pull = new BX.PullClient();\n\t\t\tPull.subscribe({\n\t\t\t\tmoduleId: 'security',\n\t\t\t\tcommand: 'pushOtpCode',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (params.code)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst form = document.forms.form_auth;\n\t\t\t\t\t\tif (form && form.USER_OTP)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tform.USER_OTP.value = params.code;\n\t\t\t\t\t\t\tif (this.captchaCode)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.showCaptcha();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t\tPull.start(this.pushOtpConfig.pullConfig);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<form name=\"form_auth\" method=\"post\" target=\"_top\" :action=\"authUrl\">\n\t\t\t<input type=\"hidden\" name=\"AUTH_FORM\" value=\"Y\" />\n\t\t\t<input type=\"hidden\" name=\"TYPE\" value=\"OTP\" />\n\t\t\t<input type=\"hidden\" name=\"USER_OTP\" />\n\t\t\t<input type=\"hidden\" name=\"sessid\" :value=\"this.$Bitrix.Loc.getMessage('bitrix_sessid')\"/>\n\n\t\t\t<div v-show=\"isPushBlockVisible\" class=\"intranet-island-otp-push__wrapper\">\n\t\t\t\t<Headline size='lg' class=\"intranet-form-title\">\n\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CONFIRM_AUTH') }}\n\t\t\t\t</Headline>\n\t\t\t\t<div v-if=\"errorMessage\" class=\"intranet-otp-error-block\" v-html=\"errorMessage\"></div>\n\t\t\t\t<div class=\"intranet-island-otp-push__main-content\">\n\t\t\t\t\t<div class=\"intranet-island-otp-push__description\">\n\t\t\t\t\t\t<span>{{ this.$Bitrix.Loc.getMessage(\"INTRANET_AUTH_OTP_PUSH_SENDED\") }}</span>\n\t\t\t\t\t\t<span>{{ this.$Bitrix.Loc.getMessage(\"INTRANET_AUTH_OTP_CONFIRM_TEXT\") }}</span>\n\t\t\t\t\t\t<div class=\"intranet-island-otp-push__arrow\"\n\t\t\t\t\t\t\t :class=\"{ '--low': !isUserDeviceVisible }\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"isUserDeviceVisible\" class=\"intranet-island-otp__device-row\">\n\t\t\t\t\t\t\t<div class=\"intranet-island-otp__device-icon\"\n\t\t\t\t\t\t\t\t :class=\"deviceIconClass\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t  \t{{ this.userDevice.model }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"rememberOtp\" class=\"intranet-base-checkbox intranet-password-enter-form__remember-me\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"OTP_REMEMBER\" name=\"OTP_REMEMBER\" value=\"Y\" class=\"login-checkbox-user-remember\"/>\n\t\t\t\t\t\t\t<label for=\"OTP_REMEMBER\" class=\"login-item-checkbox-label\">\n\t\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage(\"INTRANET_AUTH_OTP_REMEMBER_ME\") }}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-island-otp-push__mobile\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-island-otp-push-links__wrapper\">\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass=\"intranet-island-otp-push__link --repeat-push\" \n\t\t\t\t\t\t:class=\"{ '--disabled': isPushDisabled }\"\n\t\t\t\t\t\t@click=\"repeatPush\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_RESEND_PUSH') }}\n\t\t\t\t\t\t<template v-if=\"isCountdownVisible\">\n\t\t\t\t\t\t\t({{ cooldownSecondsLeft }})\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"intranet-island-otp-push__link\" @click=\"showAlternatives\">\n\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_ALTERNATIVE_WAY') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<template v-if=\"captchaCode\">\n\t\t\t\t<captcha\n\t\t\t\t\tv-show=\"isCaptchaBlockVisible\"\n\t\t\t\t\t:captchaCode=\"captchaCode\"\n\t\t\t\t></captcha>\n\t\t\t</template>\n\t\t</form>\n\t`,\n};\n","// @vue/component\nimport { Headline } from 'ui.system.typography.vue';\nimport { sendData } from 'ui.analytics';\n\nexport const AlternativeMethods = {\n\tcomponents: {\n\t\tHeadline,\n\t},\n\tprops: {\n\t\tcanLoginBySms: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisRecoveryCodesEnabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.sendAnalytics('other_type_show');\n\t},\n\tmethods: {\n\t\tshowPushOtp()\n\t\t{\n\t\t\tthis.$emit('back-to-push');\n\t\t\tthis.sendAnalytics('choose_auth_type', 'app');\n\t\t},\n\t\tshowSms()\n\t\t{\n\t\t\tthis.$emit('show-sms');\n\t\t\tthis.sendAnalytics('choose_auth_type', 'sms');\n\t\t},\n\t\tshowRecoveryCodes()\n\t\t{\n\t\t\tthis.$emit('show-recovery-codes');\n\t\t\tthis.sendAnalytics('choose_auth_type', 'code');\n\t\t},\n\t\tshowRecoverAccess()\n\t\t{\n\t\t\tthis.$emit('show-recover-access');\n\t\t},\n\t\tsendAnalytics(event, type = null)\n\t\t{\n\t\t\tconst options = {\n\t\t\t\ttool: 'security',\n\t\t\t\tcategory: 'fa_auth_form',\n\t\t\t\tevent,\n\t\t\t};\n\n\t\t\tif (type)\n\t\t\t{\n\t\t\t\toptions.type = type;\n\t\t\t}\n\n\t\t\tsendData(options);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"intranet-island-otp-push-alternative__wrapper\">\n\t\t\t<div @click=\"showPushOtp\" class=\"intranet-back-button\">\n\t\t\t\t<i class=\"ui-icon-set --arrow-left-l intranet-back-button__arrow --alternative\"></i>\n\t\t\t</div>\n\t\t\t<Headline size='lg' class=\"intranet-form-title --padding\">\n\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_ALTERNATIVE_WAY_TITLE') }}\n\t\t\t</Headline>\n\n\t\t\t<div class=\"intranet-island-otp-push-alternative-items__wrapper\">\n\t\t\t\t<div v-if=\"canLoginBySms\" class=\"intranet-island-otp-push-alternative__item\" @click=\"showSms\">\n\t\t\t\t\t<i class=\"ui-icon-set --o-sms intranet-island-otp-push-alternative-item__icon\"></i>\n\t\t\t\t\t<span>{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_SMS') }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"isRecoveryCodesEnabled\" class=\"intranet-island-otp-push-alternative__item\" @click=\"showRecoveryCodes\">\n\t\t\t\t\t<i class=\"ui-icon-set --key intranet-island-otp-push-alternative-item__icon\"></i>\n\t\t\t\t\t<span>{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_RECOVERY_CODES') }}</span>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"intranet-island-otp-push__link --gray --underline\" @click=\"showRecoverAccess\">\n\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_RECOVER_ACCESS_TITLE') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","const CLICK_EVENT = 'click';\nconst PASTE_EVENT = 'value-paste';\nconst CHANGE_EVENT = 'digit-change';\n\n// @vue/component\nexport const DigitInput = {\n\tprops: {\n\t\tdigitValue: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\tvalidator: (value) => (/\\d/.test(value) || value === ''),\n\t\t},\n\n\t\tisFocused: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\terror: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\temits: [\n\t\tCLICK_EVENT,\n\t\t// Contains pasted value as a payload\n\t\tPASTE_EVENT,\n\t\t// Contains new digit value in form of numeric string as a payload\n\t\tCHANGE_EVENT,\n\t],\n\n\tcomputed: {\n\t\tinputExtraClasses(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'intranet-digit-input--filled': this.digitValue !== '',\n\t\t\t};\n\t\t},\n\t\tinputClass(): string\n\t\t{\n\t\t\treturn `intranet-digit-input${this.error ? ' --error' : ''}`;\n\t\t},\n\t},\n\n\twatch: {\n\t\tisFocused(needFocus)\n\t\t{\n\t\t\tif (needFocus)\n\t\t\t{\n\t\t\t\tthis.$el.focus();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$el.blur();\n\t\t\t}\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonClick(): void\n\t\t{\n\t\t\tthis.$emit(CLICK_EVENT);\n\t\t},\n\n\t\tdeselectInputContent(): void\n\t\t{\n\t\t\tthis.$el.selectionStart = this.$el.selectionEnd;\n\t\t},\n\n\t\tonPaste(event): void\n\t\t{\n\t\t\tconst pastedValue = (event.clipboardData || window.clipboardData).getData('text');\n\t\t\tthis.$emit(PASTE_EVENT, pastedValue);\n\t\t},\n\n\t\tonKeyDown(event): void\n\t\t{\n\t\t\tconst isShortcutKey = event.ctrlKey || event.altKey || event.metaKey;\n\n\t\t\tif (!isShortcutKey)\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\tif (/\\d/.test(event.key) || event.key === 'Backspace')\n\t\t\t{\n\t\t\t\tthis.$emit(CHANGE_EVENT, event.key === 'Backspace' ? '' : event.key);\n\t\t\t}\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tmaxlength=\"1\"\n\t\t\tinputmode=\"numeric\"\n\t\t\t:class=\"inputClass\"\n\t\t\t:class=\"inputExtraClasses\"\n\t\t\t:value=\"digitValue\"\n\t\t\t@click=\"onClick\"\n\t\t\t@keydown=\"onKeyDown\"\n\t\t\t@paste.prevent=\"onPaste\"\n\t\t>\n\t`,\n};\n","import { DigitInput } from './digit-input';\n\nconst CODE_CHANGE = 'code-change';\nconst CODE_COMPLETE = 'code-complete';\n\n// @vue/component\nexport const VerificationCode = {\n\tcomponents: {\n\t\tDigitInput,\n\t},\n\n\tprops: {\n\t\tcode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\terror: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\t// Specifies whether it should be short (4-digit) or long (6-digit) code\n\t\tisPhoneCode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\temits: [\n\t\t// Contains changed code in form of numeric string value as a payload\n\t\tCODE_CHANGE,\n\t\t// Emitted when the code is fully filled\n\t\tCODE_COMPLETE,\n\t],\n\n\tdata(): object\n\t{\n\t\treturn {\n\t\t\tcodeArray: [],\n\t\t\t// Indicates what digit input component is currently focused\n\t\t\tfocusIndex: -1,\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tcodeLength(): number\n\t\t{\n\t\t\treturn this.isPhoneCode ? 6 : 8;\n\t\t},\n\t\tisCodeComplete(): boolean\n\t\t{\n\t\t\treturn this.codeArray.length === this.codeLength\n\t\t\t\t&& this.codeArray.every((digit) => digit !== '');\n\t\t},\n\t},\n\n\twatch: {\n\t\tcode(newValue): void\n\t\t{\n\t\t\tthis.fillCodeArrayFromCode(newValue);\n\t\t},\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.fillCodeArrayFromCode(this.code);\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.focusIndex = 0;\n\t},\n\n\tmethods: {\n\t\tfillCodeArrayFromCode(code): void\n\t\t{\n\t\t\tfor (let i = 0; i < this.codeLength; i++)\n\t\t\t{\n\t\t\t\tthis.codeArray[i] = code.length > i ? code[i] : '';\n\t\t\t}\n\t\t},\n\n\t\tonDigitChange(changedDigitIndex, newValue): void\n\t\t{\n\t\t\tthis.updateCodeDigit(changedDigitIndex, newValue);\n\n\t\t\tif (newValue === '')\n\t\t\t{\n\t\t\t\tthis.focusPreviousDigitInput(changedDigitIndex);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.focusNextDigitInput(changedDigitIndex);\n\t\t\t}\n\n\t\t\tconst fullCode = this.codeArray.join('');\n\t\t\tthis.$emit(CODE_CHANGE, fullCode);\n\n\t\t\tif (this.isCodeComplete)\n\t\t\t{\n\t\t\t\tthis.$emit(CODE_COMPLETE, fullCode);\n\t\t\t}\n\t\t},\n\n\t\tupdateCodeDigit(changedDigitIndex, newValue): void\n\t\t{\n\t\t\tif (changedDigitIndex >= 0 && changedDigitIndex < this.codeArray.length)\n\t\t\t{\n\t\t\t\tthis.codeArray[changedDigitIndex] = newValue;\n\t\t\t}\n\t\t},\n\n\t\tfocusPreviousDigitInput(changedDigitIndex): void\n\t\t{\n\t\t\tconst previousIndex = changedDigitIndex - 1;\n\n\t\t\tif (previousIndex >= 0 && this.isNextDigitEmpty(changedDigitIndex))\n\t\t\t{\n\t\t\t\tthis.focusIndex = previousIndex;\n\t\t\t}\n\t\t},\n\n\t\tisNextDigitEmpty(currentIndex: number): boolean\n\t\t{\n\t\t\tlet nextIndex = currentIndex + 1;\n\n\t\t\tif (nextIndex >= this.codeLength)\n\t\t\t{\n\t\t\t\tnextIndex = this.codeLength - 1;\n\t\t\t}\n\n\t\t\treturn this.codeArray[nextIndex] === '';\n\t\t},\n\n\t\tfocusNextDigitInput(changedDigitIndex): void\n\t\t{\n\t\t\tconst nextIndex = changedDigitIndex + 1;\n\n\t\t\tif (this.isPreviousDigitEmpty(changedDigitIndex))\n\t\t\t{\n\t\t\t\tthis.focusIndex = this.calculateLastEmptyDigitIndex();\n\t\t\t}\n\t\t\telse if (nextIndex < this.codeLength)\n\t\t\t{\n\t\t\t\tthis.focusIndex = nextIndex;\n\t\t\t}\n\t\t},\n\n\t\tisPreviousDigitEmpty(currentDigitIndex: number): boolean\n\t\t{\n\t\t\tlet previousIndex = currentDigitIndex - 1;\n\n\t\t\tif (previousIndex < 0)\n\t\t\t{\n\t\t\t\tpreviousIndex = 0;\n\t\t\t}\n\n\t\t\treturn this.codeArray[previousIndex] === '';\n\t\t},\n\n\t\tcalculateLastEmptyDigitIndex(): number\n\t\t{\n\t\t\tconst lastNonEmptyDigitIndex = this.findLastNonEmptyDigitIndex();\n\n\t\t\tif (lastNonEmptyDigitIndex < 0)\n\t\t\t{\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tconst lastEmptyDigitIndex = lastNonEmptyDigitIndex + 1;\n\n\t\t\treturn lastEmptyDigitIndex < (this.codeLength - 1)\n\t\t\t\t? lastEmptyDigitIndex + 1\n\t\t\t\t: lastEmptyDigitIndex\n\t\t\t;\n\t\t},\n\n\t\tfindLastNonEmptyDigitIndex(): number\n\t\t{\n\t\t\tif (this.codeArray[0] === '')\n\t\t\t{\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < this.codeLength; i++)\n\t\t\t{\n\t\t\t\tif (this.codeArray[i] === '')\n\t\t\t\t{\n\t\t\t\t\treturn i > 0 ? i - 1 : 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.codeLength - 1;\n\t\t},\n\n\t\tisShiftedInput(inputIndex: number): boolean\n\t\t{\n\t\t\treturn this.isPhoneCode && inputIndex === this.codeLength / 2;\n\t\t},\n\n\t\tonPaste(pastedValue): void\n\t\t{\n\t\t\tif (this.isValidNumericCode(pastedValue))\n\t\t\t{\n\t\t\t\tthis.fillCodeArrayFromCode(pastedValue);\n\t\t\t}\n\t\t\telse if (this.isSingleDigit(pastedValue) && this.focusIndex >= 0)\n\t\t\t{\n\t\t\t\tthis.codeArray[this.focusIndex] = pastedValue;\n\t\t\t}\n\n\t\t\tconst fullCode = this.codeArray.join('');\n\t\t\tthis.$emit(CODE_CHANGE, fullCode);\n\n\t\t\tif (this.isCodeComplete)\n\t\t\t{\n\t\t\t\tthis.$emit(CODE_COMPLETE, fullCode);\n\t\t\t}\n\t\t},\n\n\t\tisValidNumericCode(someCode: string): boolean\n\t\t{\n\t\t\tconst codeRegExp = new RegExp(`^[0-9]{${this.codeLength}}$`);\n\n\t\t\treturn codeRegExp.test(someCode);\n\t\t},\n\n\t\tisSingleDigit(someValue: string): boolean\n\t\t{\n\t\t\treturn /^\\d$/.test(someValue);\n\t\t},\n\n\t\tonClick(inputIndex): void\n\t\t{\n\t\t\tthis.focusIndex = inputIndex;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"intranet-verification-code\">\n\t\t\t<digit-input\n\t\t\t\tv-for=\"digitPos in codeLength\"\n\t\t\t\tclass=\"intranet-verification-code__digit\"\n\t\t\t\t:class=\"{ 'intranet-verification-code__digit--shifted': isShiftedInput(digitPos - 1) }\"\n\t\t\t\t:key=\"digitPos\"\n\t\t\t\t:is-focused=\"focusIndex === (digitPos - 1)\"\n\t\t\t\t:digit-value=\"codeArray[digitPos - 1] ?? ''\"\n\t\t\t\t:error=\"error\"\n\t\t\t\t@value-paste=\"onPaste\"\n\t\t\t\t@click=\"onClick(digitPos - 1)\"\n\t\t\t\t@digit-change=\"onDigitChange(digitPos - 1, $event)\"\n\t\t\t></digit-input>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { Headline } from 'ui.system.typography.vue';\nimport { VerificationCode } from './verification-code';\nimport { Ajax } from '../api/ajax';\nimport { Captcha } from './captcha';\nimport { sendData } from 'ui.analytics';\n\n// @vue/component\nexport const Sms = {\n\tcomponents: {\n\t\tVerificationCode,\n\t\tCaptcha,\n\t\tHeadline,\n\t},\n\tprops: {\n\t\tauthUrl: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tcaptchaCode: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tmaskedUserAuthPhoneNumber: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\terrorMessage: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisWaiting: false,\n\t\t\tcode: '',\n\t\t\tisSmsBlockVisible: true,\n\t\t\tisCaptchaBlockVisible: false,\n\t\t\tcountdown: null,\n\t\t\tcountdownInterval: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tphoneMessage(): String\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_SMS_SENDED', {\n\t\t\t\t'#NUMBER#': `<strong>${this.maskedUserAuthPhoneNumber}</strong>`,\n\t\t\t});\n\t\t},\n\t\tisResendSmsAvailable(): boolean\n\t\t{\n\t\t\treturn (this.countdown && this.countdown <= 0);\n\t\t},\n\t\tisCountdownVisible(): boolean\n\t\t{\n\t\t\treturn (this.countdown && this.countdown > 0);\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.sendSmsCode();\n\t\tthis.sendAnalytics('sms_show');\n\t},\n\tmethods: {\n\t\tonSubmitForm()\n\t\t{\n\t\t\tif (this.captchaCode)\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.showCaptcha();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.isWaiting = true;\n\t\t\t\tthis.$emit('form-submit');\n\t\t\t}\n\t\t},\n\t\tasync sendSmsCode()\n\t\t{\n\t\t\tawait Ajax.sendAuthSms().then((response) => {\n\t\t\t\tthis.countdown = Type.isNumber(response.data?.timeLeft) ? response.data?.timeLeft : 0;\n\t\t\t\tthis.startCountdownTimer();\n\t\t\t}, (response) => {\n\t\t\t\tthis.countdown = Type.isNumber(response.data?.timeLeft) ? response.data?.timeLeft : 0;\n\t\t\t\tthis.startCountdownTimer();\n\t\t\t}).catch((error) => console.error(error));\n\t\t},\n\t\tasync resendSendSmsCode()\n\t\t{\n\t\t\tthis.sendAnalytics('sms_repeat_click');\n\t\t\tawait this.sendSmsCode();\n\t\t},\n\t\tstartCountdownTimer()\n\t\t{\n\t\t\tclearInterval(this.countdownInterval);\n\n\t\t\tthis.countdownInterval = setInterval(() => {\n\t\t\t\tthis.countdown--;\n\t\t\t\tif (this.countdown < 0)\n\t\t\t\t{\n\t\t\t\t\tclearInterval(this.countdownInterval);\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t},\n\t\tonCodeChange(code)\n\t\t{\n\t\t\tthis.code = code;\n\t\t},\n\t\tonCodeComplete(code)\n\t\t{\n\t\t\tthis.code = code;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tif (this.captchaCode)\n\t\t\t\t{\n\t\t\t\t\tthis.showCaptcha();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.isWaiting = true;\n\t\t\t\t\tthis.$emit('form-submit');\n\t\t\t\t\tif (this.$refs.authForm)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.authForm.submit();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tshowPushOtp()\n\t\t{\n\t\t\tthis.$emit('clear-errors');\n\t\t\tthis.$emit('back-to-push');\n\t\t},\n\t\tshowCaptcha()\n\t\t{\n\t\t\tthis.isSmsBlockVisible = false;\n\t\t\tthis.isCaptchaBlockVisible = true;\n\t\t},\n\t\tsendAnalytics(event)\n\t\t{\n\t\t\tsendData({\n\t\t\t\ttool: 'security',\n\t\t\t\tcategory: 'fa_auth_form',\n\t\t\t\tevent,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<form ref=\"authForm\" name=\"form_auth\" method=\"post\" target=\"_top\" :action=\"authUrl\">\n\t\t\t<input type=\"hidden\" name=\"AUTH_FORM\" value=\"Y\"/>\n\t\t\t<input type=\"hidden\" name=\"TYPE\" value=\"OTP\"/>\n\t\t\t<input type=\"hidden\" name=\"USER_OTP\" :value=\"code\"/>\n\t\t\t<input type=\"hidden\" name=\"CURRENT_STEP\" value=\"sms\"/>\n\t\t\t<input type=\"hidden\" name=\"sessid\" :value=\"this.$Bitrix.Loc.getMessage('bitrix_sessid')\"/>\n\n\t\t\t<div v-show=\"isSmsBlockVisible\" class=\"intranet-island-otp-push-sms__wrapper\">\n\t\t\t\t<div @click=\"showPushOtp\" class=\"intranet-back-button\">\n\t\t\t\t\t<i class=\"ui-icon-set --arrow-left-l intranet-back-button__arrow --smscode\"></i>\n\t\t\t\t</div>\n\t\t\t\t<Headline size='lg' class=\"intranet-form-title --padding\">\n\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CONFIRM_LOGIN') }}\n\t\t\t\t</Headline>\n\t\t\t\t<span class=\"intranet-island-otp-push-sms__description\">\n\t\t\t\t\t<div v-html=\"phoneMessage\"></div>\n\t\t\t\t</span>\n\t\t\t\t<VerificationCode\n\t\t\t\t\t:code=\"code\"\n\t\t\t\t\t:isPhoneCode=true\n\t\t\t\t\t:error=\"errorMessage\"\n\t\t\t\t\t@code-change=\"onCodeChange\"\n\t\t\t\t\t@code-complete=\"onCodeComplete\"\n\t\t\t\t></VerificationCode>\n\t\t\t\t<div class=\"intranet-otp-error-block\" v-html=\"errorMessage\"></div>\n\n\t\t\t\t<div class=\"intranet-island-otp-push-sms__resend\">\n\t\t\t\t\t<span v-if=\"isResendSmsAvailable\" class=\"intranet-island-otp-push__link\" @click=\"resendSendSmsCode\">\n\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_SMS_RESEND') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span v-if=\"isCountdownVisible\" class=\"intranet-island-otp-push-sms__countdown\">\n\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_SMS_COUNTDOWN', {'#SEC#': this.countdown}) }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<button\n\t\t\t\t\tclass=\"intranet-text-btn intranet-text-btn__reg ui-btn ui-btn-lg ui-btn-success --wide\"\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t@click=\"onSubmitForm\"\n\t\t\t\t>\n\t\t\t\t\t\t<span class=\"intranet-text-btn__content-wrapper\">\n\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CONTINUE_BUTTON') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"intranet-text-btn__spinner\" v-show=\"isWaiting\"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<template v-if=\"captchaCode\">\n\t\t\t\t<captcha\n\t\t\t\t\tv-show=\"isCaptchaBlockVisible\"\n\t\t\t\t\t:captchaCode=\"captchaCode\"\n\t\t\t\t></captcha>\n\t\t\t</template>\n\t\t</form>\n\t`,\n};\n","const CHARACTER_CHANGE = 'char-change';\nconst VALUE_PASTE = 'value-paste';\n\n// @vue/component\nexport const AlphanumericInput = {\n\tprops: {\n\t\tcharValue: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\terror: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tisFocused: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\temits: [\n\t\tCHARACTER_CHANGE,\n\t\tVALUE_PASTE,\n\t],\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tinputValue: this.charValue,\n\t\t};\n\t},\n\tcomputed: {\n\t\tinputClass(): string\n\t\t{\n\t\t\treturn `intranet-char-input${this.error ? ' --error' : ''}`;\n\t\t},\n\t},\n\n\twatch: {\n\t\tcharValue(newValue): void\n\t\t{\n\t\t\tthis.inputValue = newValue;\n\t\t},\n\n\t\tisFocused(newValue): void\n\t\t{\n\t\t\tif (newValue)\n\t\t\t{\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs.input?.focus();\n\t\t\t\t\tthis.$refs.input?.select();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonInput(event): void\n\t\t{\n\t\t\tconst newValue = event.target.value;\n\t\t\tconst lastChar = newValue.slice(-1);\n\n\t\t\tif (this.isValidCharacter(lastChar))\n\t\t\t{\n\t\t\t\tthis.inputValue = lastChar;\n\t\t\t\tthis.$emit(CHARACTER_CHANGE, this.inputValue);\n\t\t\t}\n\t\t},\n\n\t\tonPaste(event): void\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tconst pastedValue = event.clipboardData.getData('text');\n\t\t\tthis.$emit(VALUE_PASTE, pastedValue);\n\t\t},\n\n\t\tonKeyDown(event): void\n\t\t{\n\t\t\tif (!this.isAllowedKey(event))\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.key === 'Backspace')\n\t\t\t{\n\t\t\t\tthis.inputValue = '';\n\t\t\t\tthis.$emit(CHARACTER_CHANGE, '');\n\t\t\t}\n\t\t},\n\n\t\tisValidCharacter(char): boolean\n\t\t{\n\t\t\treturn /^[\\dA-Za-z]$/.test(char);\n\t\t},\n\n\t\tisAllowedKey(event): boolean\n\t\t{\n\t\t\tconst key = event.key;\n\n\t\t\tif (key === 'Backspace')\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn this.isValidCharacter(key);\n\t\t},\n\n\t\tonClick(): void\n\t\t{\n\t\t\tthis.$emit('click');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<input\n\t\t  ref=\"input\"\n\t\t  type=\"text\"\n\t\t  :class=\"inputClass\"\n\t\t  :value=\"inputValue\"\n\t\t  maxlength=\"1\"\n\t\t  @input=\"onInput\"\n\t\t  @paste=\"onPaste\"\n\t\t  @keydown=\"onKeyDown\"\n\t\t  @click=\"onClick\"\n\t\t/>\n\t`,\n};\n","import { AlphanumericInput } from './alphanumeric-input';\n\nconst CODE_CHANGE = 'code-change';\nconst CODE_COMPLETE = 'code-complete';\n\n// @vue/component\nexport const RecoveryCodeInput = {\n\tcomponents: {\n\t\tAlphanumericInput,\n\t},\n\n\tprops: {\n\t\tcode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcodeLength: {\n\t\t\ttype: Number,\n\t\t\tdefault: 8,\n\t\t},\n\t\tseparatorPosition: {\n\t\t\ttype: Number,\n\t\t\tdefault: 4,\n\t\t},\n\t\tseparator: {\n\t\t\ttype: String,\n\t\t\tdefault: '-',\n\t\t},\n\t\terror: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\n\temits: [\n\t\tCODE_CHANGE,\n\t\tCODE_COMPLETE,\n\t],\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcodeArray: [],\n\t\t\tfocusIndex: -1,\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tisCodeComplete(): boolean\n\t\t{\n\t\t\treturn this.codeArray.length === this.codeLength\n\t\t\t\t&& this.codeArray.every((char) => char !== '');\n\t\t},\n\t},\n\n\twatch: {\n\t\tcode(newValue): void {\n\t\t\tthis.fillCodeArrayFromCode(newValue);\n\t\t},\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.fillCodeArrayFromCode(this.code);\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.focusIndex = 0;\n\t},\n\n\tmethods: {\n\t\tfillCodeArrayFromCode(code): void\n\t\t{\n\t\t\tconst cleanCode = code.replace(this.separator, '');\n\n\t\t\tfor (let i = 0; i < this.codeLength; i++)\n\t\t\t{\n\t\t\t\tthis.codeArray[i] = cleanCode.length > i ? cleanCode[i] : '';\n\t\t\t}\n\t\t},\n\n\t\tonCharacterChange(changedIndex, newValue): void\n\t\t{\n\t\t\tthis.updateCodeCharacter(changedIndex, newValue);\n\n\t\t\tif (newValue === '')\n\t\t\t{\n\t\t\t\tthis.focusPreviousInput(changedIndex);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.focusNextInput(changedIndex);\n\t\t\t}\n\n\t\t\tconst formattedCode = this.getFormattedCode();\n\t\t\tthis.$emit(CODE_CHANGE, formattedCode);\n\n\t\t\tif (this.isCodeComplete)\n\t\t\t{\n\t\t\t\tthis.$emit(CODE_COMPLETE, formattedCode);\n\t\t\t}\n\t\t},\n\n\t\tupdateCodeCharacter(changedIndex, newValue): void\n\t\t{\n\t\t\tif (changedIndex >= 0 && changedIndex < this.codeArray.length)\n\t\t\t{\n\t\t\t\tthis.codeArray[changedIndex] = newValue.toLowerCase();\n\t\t\t}\n\t\t},\n\n\t\tfocusPreviousInput(changedIndex): void\n\t\t{\n\t\t\tconst previousIndex = changedIndex - 1;\n\n\t\t\tif (previousIndex >= 0)\n\t\t\t{\n\t\t\t\tthis.focusIndex = previousIndex;\n\t\t\t}\n\t\t},\n\n\t\tfocusNextInput(changedIndex): void\n\t\t{\n\t\t\tconst nextIndex = changedIndex + 1;\n\n\t\t\tif (nextIndex < this.codeLength)\n\t\t\t{\n\t\t\t\tthis.focusIndex = nextIndex;\n\t\t\t}\n\t\t},\n\n\t\tgetFormattedCode(): string\n\t\t{\n\t\t\tconst code = this.codeArray.join('');\n\t\t\tif (code.length > this.separatorPosition)\n\t\t\t{\n\t\t\t\treturn code.slice(0, Math.max(0, this.separatorPosition))\n\t\t\t\t\t+ this.separator\n\t\t\t\t\t+ code.slice(Math.max(0, this.separatorPosition));\n\t\t\t}\n\n\t\t\treturn code;\n\t\t},\n\n\t\tonPaste(pastedValue): void\n\t\t{\n\t\t\tconst cleanValue = pastedValue.replaceAll(/[^\\dA-Za-z]/g, '').toLowerCase();\n\n\t\t\tif (this.isValidRecoveryCode(cleanValue))\n\t\t\t{\n\t\t\t\tthis.fillCodeArrayFromCode(cleanValue);\n\t\t\t}\n\t\t\telse if (this.isSingleCharacter(pastedValue) && this.focusIndex >= 0)\n\t\t\t{\n\t\t\t\tthis.codeArray[this.focusIndex] = pastedValue.toLowerCase();\n\t\t\t}\n\n\t\t\tconst formattedCode = this.getFormattedCode();\n\t\t\tthis.$emit(CODE_CHANGE, formattedCode);\n\n\t\t\tif (this.isCodeComplete)\n\t\t\t{\n\t\t\t\tthis.$emit(CODE_COMPLETE, formattedCode);\n\t\t\t}\n\t\t},\n\n\t\tisValidRecoveryCode(someCode: string): boolean\n\t\t{\n\t\t\tconst codeRegExp = new RegExp(`^[a-zA-Z0-9]{${this.codeLength}}$`);\n\n\t\t\treturn codeRegExp.test(someCode);\n\t\t},\n\n\t\tisSingleCharacter(someValue: string): boolean\n\t\t{\n\t\t\treturn /^[\\dA-Za-z]$/.test(someValue);\n\t\t},\n\n\t\tonClick(inputIndex): void {\n\t\t\tthis.focusIndex = inputIndex;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"intranet-verification-code\">\n\t\t\t<alphanumeric-input\n\t\t\t\tv-for=\"charPos in codeLength\"\n\t\t\t\tclass=\"intranet-verification-code__char\"\n\t\t\t\t:key=\"charPos\"\n\t\t\t\t:is-focused=\"focusIndex === (charPos - 1)\"\n\t\t\t\t:error=\"error\"\n\t\t\t\t:char-value=\"codeArray[charPos - 1] ?? ''\"\n\t\t\t\t@value-paste=\"onPaste\"\n\t\t\t\t@click=\"onClick(charPos - 1)\"\n\t\t\t\t@char-change=\"onCharacterChange(charPos - 1, $event)\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Headline } from 'ui.system.typography.vue';\nimport { RecoveryCodeInput } from './recovery-code-input';\nimport { Captcha } from './captcha';\nimport { sendData } from 'ui.analytics';\n\n// @vue/component\nexport const RecoveryCodes = {\n\tcomponents: {\n\t\tRecoveryCodeInput,\n\t\tCaptcha,\n\t\tHeadline,\n\t},\n\tprops: {\n\t\trootNode: {\n\t\t\ttype: HTMLElement,\n\t\t\tdefault: null,\n\t\t},\n\t\tauthUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcaptchaCode: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\trecoveryCodesHelpLink: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\terrorMessage: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisWaiting: false,\n\t\t\trecoveryCode: '',\n\t\t\tisRecoveryCodeBlockVisible: true,\n\t\t\tisCaptchaBlockVisible: false,\n\t\t};\n\t},\n\tmounted()\n\t{\n\t\tBX.UI.Hint.init(this.rootNode);\n\t\tsendData({\n\t\t\ttool: 'security',\n\t\t\tcategory: 'fa_auth_form',\n\t\t\tevent: 'form_code_show',\n\t\t});\n\t},\n\tmethods: {\n\t\tonSubmitForm(event)\n\t\t{\n\t\t\tif (this.captchaCode)\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.showCaptcha();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.isWaiting = true;\n\t\t\t\tthis.$emit('form-submit');\n\t\t\t}\n\t\t},\n\t\tonRecoveryCodeChange(code)\n\t\t{\n\t\t\tthis.recoveryCode = code;\n\t\t},\n\t\tonRecoveryCodeComplete(code)\n\t\t{\n\t\t\tthis.recoveryCode = code;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tif (this.captchaCode)\n\t\t\t\t{\n\t\t\t\t\tthis.showCaptcha();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.isWaiting = true;\n\t\t\t\t\tthis.$emit('form-submit');\n\t\t\t\t\tif (this.$refs.authForm)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$refs.authForm.submit();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tshowPushOtp()\n\t\t{\n\t\t\tthis.$emit('clear-errors');\n\t\t\tthis.$emit('back-to-push');\n\t\t},\n\t\tshowCaptcha()\n\t\t{\n\t\t\tthis.isRecoveryCodeBlockVisible = false;\n\t\t\tthis.isCaptchaBlockVisible = true;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<form ref=\"authForm\" name=\"form_auth\" method=\"post\" target=\"_top\" :action=\"authUrl\">\n\t\t\t<input type=\"hidden\" name=\"AUTH_FORM\" value=\"Y\" />\n\t\t\t<input type=\"hidden\" name=\"TYPE\" value=\"OTP\"/>\n\t\t\t<input type=\"hidden\" name=\"USER_OTP\" :value=\"recoveryCode\"/>\n\t\t\t<input type=\"hidden\" name=\"CURRENT_STEP\" value=\"recoveryCodes\"/>\n\t\t\t<input type=\"hidden\" name=\"sessid\" :value=\"this.$Bitrix.Loc.getMessage('bitrix_sessid')\"/>\n\n\t\t\t<div v-show=\"isRecoveryCodeBlockVisible\" class=\"intranet-island-otp-push-recovery-codes__wrapper\">\n\t\t\t\t<div @click=\"showPushOtp\" class=\"intranet-back-button\">\n\t\t\t\t\t<i class=\"ui-icon-set --arrow-left-l intranet-back-button__arrow --recovery\"></i>\n\t\t\t\t</div>\n\n\t\t\t\t<Headline size='lg' class=\"intranet-form-title --padding\">\n\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CONFIRM_LOGIN') }}\n\t\t\t\t</Headline>\n\t\t\t\t<span class=\"intranet-island-otp-push-recovery-codes__description\">\n\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_INPUT_RECOVERY_CODE') }}\n\t\t\t\t</span>\n\t\t\t\t<a class=\"intranet-island-otp-push__link --underline\" :href=\"recoveryCodesHelpLink\" target=\"_blank\">\n\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_MORE') }}\n\t\t\t\t</a>\n\t\t\t\t<RecoveryCodeInput \n\t\t\t\t\t:code=\"recoveryCode\"\n\t\t\t\t\t:error=\"errorMessage\"\n\t\t\t\t\t@code-change=\"onRecoveryCodeChange\"\n\t\t\t\t\t@code-complete=\"onRecoveryCodeComplete\"\n\t\t\t\t></RecoveryCodeInput>\n\t\t\t\t<div class=\"intranet-otp-error-block\" v-html=\"errorMessage\"></div>\n\n\t\t\t\t<button\n\t\t\t\t\tclass=\"intranet-text-btn intranet-text-btn__reg ui-btn ui-btn-lg ui-btn-success --wide\"\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t@click=\"onSubmitForm($event)\"\n\t\t\t\t>\n\t\t\t\t\t\t<span class=\"intranet-text-btn__content-wrapper\">\n\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_CONTINUE_BUTTON') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"intranet-text-btn__spinner\" v-show=\"isWaiting\"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<template v-if=\"captchaCode\">\n\t\t\t\t<captcha\n\t\t\t\t\tv-show=\"isCaptchaBlockVisible\"\n\t\t\t\t\t:captchaCode=\"captchaCode\"\n\t\t\t\t></captcha>\n\t\t\t</template>\n\t\t</form>\n\t`,\n};\n","// @vue/component\nimport { Headline } from 'ui.system.typography.vue';\nimport { sendData } from 'ui.analytics';\n\nexport const RecoverAccess = {\n\tcomponents: {\n\t\tHeadline,\n\t},\n\tprops: {\n\t\tisAlternativeMethodsAvailable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tmounted() {\n\t\tsendData({\n\t\t\ttool: 'security',\n\t\t\tcategory: 'fa_auth_form',\n\t\t\tevent: 'restore_access_show',\n\t\t});\n\t},\n\tmethods: {\n\t\tshowAlternatives()\n\t\t{\n\t\t\tif (this.isAlternativeMethodsAvailable)\n\t\t\t{\n\t\t\t\tthis.$emit('show-alternatives');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$emit('back-to-push');\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"intranet-island-otp-recover-access__wrapper\">\n\t\t\t<Headline size='lg' class=\"intranet-form-title\">\n\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_RECOVER_ACCESS_TITLE') }}\n\t\t\t</Headline>\n\t\t\t<div class=\"intranet-island-otp-recover-access__description --width\">\n\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_RECOVER_ACCESS_TEXT') }}\n\t\t\t</div>\n\t\t\t<div class=\"intranet-island-revover-access-links__wrapper\">\n\t\t\t\t<span class=\"intranet-island-recover-access__link\" @click=\"showAlternatives\">\n\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('INTRANET_AUTH_OTP_ALTERNATIVE_WAY') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { LegacyOtp } from './components/legacy-otp';\nimport { PushOtp } from './components/push-otp';\nimport { AlternativeMethods } from './components/alternative-methods';\nimport { Sms } from './components/sms';\nimport { RecoveryCodes } from './components/recovery-codes';\nimport { RecoverAccess } from './components/recover-access';\nimport { Captcha } from './components/captcha';\n\n// @vue/component\nexport const Main = {\n\tcomponents: {\n\t\tLegacyOtp,\n\t\tPushOtp,\n\t\tAlternativeMethods,\n\t\tSms,\n\t\tRecoveryCodes,\n\t\tRecoverAccess,\n\t\tCaptcha,\n\t},\n\tprops: {\n\t\trootNode: {\n\t\t\ttype: HTMLElement,\n\t\t\tdefault: null,\n\t\t},\n\t\tpushOtpConfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tauthUrl: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tauthOtpHelpLink: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tauthLoginUrl: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\trememberOtp: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tcaptchaCode: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tnotShowLinks: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisBitrix24: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tcanLoginBySms: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisRecoveryCodesEnabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tmaskedUserAuthPhoneNumber: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tuserDevice: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tcurrentStep: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\trecoveryCodesHelpLink: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\terrorMessageText: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\tlet currentStep = 'legacy';\n\n\t\tif (this.pushOtpConfig)\n\t\t{\n\t\t\tcurrentStep = this.currentStep ?? 'push';\n\t\t}\n\n\t\treturn {\n\t\t\tisWaiting: false,\n\t\t\terrorMessage: this.errorMessageText,\n\t\t\tcurrentAuthStep: currentStep,\n\t\t\tisAlternativeMethodsAvailable: (this.canLoginBySms || this.isRecoveryCodesEnabled),\n\t\t};\n\t},\n\tcomputed: {\n\t\tcurrentComponent(): string\n\t\t{\n\t\t\tconst components = {\n\t\t\t\tlegacy: 'LegacyOtp',\n\t\t\t\tpush: 'PushOtp',\n\t\t\t\talternative: 'AlternativeMethods',\n\t\t\t\tsms: 'Sms',\n\t\t\t\trecoveryCodes: 'RecoveryCodes',\n\t\t\t\trecoverAccess: 'RecoverAccess',\n\t\t\t};\n\n\t\t\treturn components[this.currentAuthStep] || 'LegacyOtp';\n\t\t},\n\t},\n\tmethods: {\n\t\tonSubmitForm()\n\t\t{\n\t\t\tthis.isWaiting = true;\n\t\t},\n\t\tonShowAlternatives()\n\t\t{\n\t\t\tthis.currentAuthStep = 'alternative';\n\t\t},\n\t\tonShowSms()\n\t\t{\n\t\t\tthis.currentAuthStep = 'sms';\n\t\t},\n\t\tonShowRecoveryCodes()\n\t\t{\n\t\t\tthis.currentAuthStep = 'recoveryCodes';\n\t\t},\n\t\tonShowRecoverAccess()\n\t\t{\n\t\t\tthis.currentAuthStep = 'recoverAccess';\n\t\t},\n\t\tonBackToPush()\n\t\t{\n\t\t\tthis.currentAuthStep = 'push';\n\t\t},\n\t\tonBackToLegacy()\n\t\t{\n\t\t\tthis.currentAuthStep = 'legacy';\n\t\t},\n\t\tonClearErrors()\n\t\t{\n\t\t\tthis.errorMessage = '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<component\n\t\t :is=\"currentComponent\"\n\t\t :authUrl=\"authUrl\"\n\t\t :authOtpHelpLink=\"authOtpHelpLink\"\n\t\t :authLoginUrl=\"authLoginUrl\"\n\t\t :rememberOtp=\"rememberOtp\"\n\t\t :captchaCode=\"captchaCode\"\n\t\t :notShowLinks=\"notShowLinks\"\n\t\t :isBitrix24=\"isBitrix24\"\n\t\t :canLoginBySms=\"canLoginBySms\"\n\t\t :isRecoveryCodesEnabled=\"isRecoveryCodesEnabled\"\n\t\t :maskedUserAuthPhoneNumber=\"maskedUserAuthPhoneNumber\"\n\t\t :userDevice=\"userDevice\"\n\t\t :pushOtpConfig=\"pushOtpConfig\"\n\t\t :recoveryCodesHelpLink=\"recoveryCodesHelpLink\"\n\t\t :errorMessage=\"errorMessage\"\n\t\t :isAlternativeMethodsAvailable=\"isAlternativeMethodsAvailable\"\n\t\t @form-submit=\"onSubmitForm\"\n\t\t @show-alternatives=\"onShowAlternatives\"\n\t\t @back-to-push=\"onBackToPush\"\n\t\t @back-to-legacy=\"onBackToLegacy\"\n\t\t @show-sms=\"onShowSms\"\n\t\t @show-recovery-codes=\"onShowRecoveryCodes\"\n\t\t @show-recover-access=\"onShowRecoverAccess\"\n\t\t @clear-errors=\"onClearErrors\"\n\t\t/>\n\t`,\n};\n","import { BitrixVue } from 'ui.vue3';\nimport { Type } from 'main.core';\nimport { Main } from './app';\nimport './style.css';\n\nexport type SystemAuthOtpParamsType = {\n\tcontainerNode: HTMLElement,\n\tpushOtpConfig?: Object,\n\tauthUrl: string,\n\tauthOtpHelpLink?: string,\n\tauthLoginUrl?: string,\n\trememberOtp?: boolean,\n\tcaptchaCode?: string,\n\tnotShowLinks?: boolean,\n\tisBitrix24?: boolean,\n\tcanLoginBySms?: boolean,\n\tisRecoveryCodesEnabled?: boolean,\n\tmaskedUserAuthPhoneNumber?: string,\n\tuserDevice?: Object,\n\tcurrentStep?: string,\n\trecoveryCodesHelpLink: string,\n\terrorMessage?: HTMLElement,\n}\n\nexport class OtpAuth\n{\n\tstatic #rootNode: HTMLElement;\n\tstatic #application;\n\n\tstatic init(params: SystemAuthOtpParamsType): void\n\t{\n\t\tthis.#rootNode = params.containerNode;\n\n\t\tif (!Type.isDomNode(this.#rootNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#application = BitrixVue.createApp(Main, {\n\t\t\trootNode: this.#rootNode,\n\t\t\tpushOtpConfig: params.pushOtpConfig,\n\t\t\tauthUrl: params.authUrl,\n\t\t\tauthOtpHelpLink: params.authOtpHelpLink,\n\t\t\tauthLoginUrl: params.authLoginUrl,\n\t\t\trememberOtp: params.rememberOtp,\n\t\t\tcaptchaCode: params.captchaCode,\n\t\t\tnotShowLinks: params.notShowLinks,\n\t\t\tcanLoginBySms: params.canLoginBySms,\n\t\t\tisRecoveryCodesEnabled: params.isRecoveryCodesEnabled,\n\t\t\tmaskedUserAuthPhoneNumber: params.maskedUserAuthPhoneNumber,\n\t\t\tuserDevice: params.userDevice,\n\t\t\tcurrentStep: params.currentStep,\n\t\t\trecoveryCodesHelpLink: params.recoveryCodesHelpLink,\n\t\t\terrorMessageText: params.errorMessage,\n\t\t});\n\t\tthis.#application.mount(this.#rootNode);\n\t}\n}\n"],"names":["LegacyOtp","components","Headline","props","authUrl","type","String","required","authOtpHelpLink","default","authLoginUrl","rememberOtp","Boolean","captchaCode","notShowLinks","isBitrix24","errorMessage","data","isWaiting","csrfToken","mounted","$refs","modalInput","focus","methods","onSubmitForm","$emit","template","Captcha","computed","getCaptchaSrc","Ajax","sendAuthSms","ajax","runAction","sendMobilePush","channelTag","PushOtp","pushOtpConfig","Object","userDevice","isAlternativeMethodsAvailable","isPushBlockVisible","isCaptchaBlockVisible","isUserDeviceVisible","keys","length","isPushDisabled","cooldownSecondsLeft","cooldownIntervalId","deviceIconClass","icon","isCountdownVisible","initPushOtp","storedCooldownSeconds","readCooldownSecondsLeft","startCooldown","wasCooldownInitialized","clearCooldownDeadline","initialCooldown","getCooldownSeconds","sendData","tool","category","event","beforeUnmount","stopCooldownTimer","repeatPush","then","catch","defaultCooldown","seconds","Number","cooldownSeconds","isFinite","Math","floor","shouldPersist","cooldown","saveCooldownDeadline","markCooldownInitialized","setInterval","clearInterval","getCooldownStorageKey","getCooldownInitKey","isStorageAvailable","window","localStorage","setItem","error","console","getItem","deadline","Date","now","storedValue","diffMs","ceil","removeItem","showAlternatives","showCaptcha","BX","Pull","PullClient","subscribe","moduleId","command","callback","params","code","form","document","forms","form_auth","USER_OTP","value","submit","start","pullConfig","AlternativeMethods","canLoginBySms","isRecoveryCodesEnabled","sendAnalytics","showPushOtp","showSms","showRecoveryCodes","showRecoverAccess","options","CLICK_EVENT","PASTE_EVENT","CHANGE_EVENT","DigitInput","digitValue","validator","test","isFocused","emits","inputExtraClasses","inputClass","watch","needFocus","$el","blur","onClick","deselectInputContent","selectionStart","selectionEnd","onPaste","pastedValue","clipboardData","getData","onKeyDown","isShortcutKey","ctrlKey","altKey","metaKey","preventDefault","key","CODE_CHANGE","CODE_COMPLETE","VerificationCode","isPhoneCode","codeArray","focusIndex","codeLength","isCodeComplete","every","digit","newValue","fillCodeArrayFromCode","created","i","onDigitChange","changedDigitIndex","updateCodeDigit","focusPreviousDigitInput","focusNextDigitInput","fullCode","join","previousIndex","isNextDigitEmpty","currentIndex","nextIndex","isPreviousDigitEmpty","calculateLastEmptyDigitIndex","currentDigitIndex","lastNonEmptyDigitIndex","findLastNonEmptyDigitIndex","lastEmptyDigitIndex","isShiftedInput","inputIndex","isValidNumericCode","isSingleDigit","someCode","codeRegExp","RegExp","someValue","Sms","maskedUserAuthPhoneNumber","isSmsBlockVisible","countdown","countdownInterval","phoneMessage","$Bitrix","Loc","getMessage","isResendSmsAvailable","sendSmsCode","response","Type","isNumber","timeLeft","startCountdownTimer","resendSendSmsCode","onCodeChange","onCodeComplete","$nextTick","authForm","CHARACTER_CHANGE","VALUE_PASTE","AlphanumericInput","charValue","inputValue","input","select","onInput","target","lastChar","slice","isValidCharacter","isAllowedKey","char","RecoveryCodeInput","separatorPosition","separator","cleanCode","replace","onCharacterChange","changedIndex","updateCodeCharacter","focusPreviousInput","focusNextInput","formattedCode","getFormattedCode","toLowerCase","max","cleanValue","replaceAll","isValidRecoveryCode","isSingleCharacter","RecoveryCodes","rootNode","HTMLElement","recoveryCodesHelpLink","recoveryCode","isRecoveryCodeBlockVisible","UI","Hint","init","onRecoveryCodeChange","onRecoveryCodeComplete","RecoverAccess","Main","currentStep","errorMessageText","currentAuthStep","currentComponent","legacy","push","alternative","sms","recoveryCodes","recoverAccess","onShowAlternatives","onShowSms","onShowRecoveryCodes","onShowRecoverAccess","onBackToPush","onBackToLegacy","onClearErrors","OtpAuth","containerNode","isDomNode","BitrixVue","createApp","mount"],"mappings":"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"}