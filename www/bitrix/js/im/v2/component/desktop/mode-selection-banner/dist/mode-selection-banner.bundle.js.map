{"version":3,"file":"mode-selection-banner.bundle.js","sources":["../src/components/select-button.js","../src/components/mode-option.js","../src/components/mode-option-list.js","../src/mode-selection-banner.js"],"sourcesContent":["import { Button as ConfirmButton, ButtonSize } from 'ui.vue3.components.button';\n\n// @vue/component\nexport const SelectButton = {\n\tname: 'SelectConfirm',\n\tcomponents: { ConfirmButton },\n\temits: ['click'],\n\tcomputed: {\n\t\tButtonSize: () => ButtonSize,\n\t},\n\tmethods: {\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-desktop-mode-selection-banner__select-confirm_container\">\n\t\t\t<span class=\"bx-im-desktop-mode-selection-banner__select-confirm_description\">\n\t\t\t\t{{ loc('IM_DESKTOP_MODE_SELECTION_BANNER_MORE_DESCRIPTION_SELECT_CONFIRM') }}\n\t\t\t</span>\n\t\t\t<ConfirmButton\n\t\t\t\tclass=\"bx-im-desktop-mode-selection-banner__select-confirm_button\"\n\t\t\t\t:text=\"loc('IM_DESKTOP_MODE_SELECTION_BANNER_BUTTON_SELECT_CONFIRM')\"\n\t\t\t\t:size=\"ButtonSize.EXTRA_LARGE\"\n\t\t\t\t@click=\"$emit('click')\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import type { LabelOptions } from './mode-option-list';\n\n// @vue/component\nexport const ModeOption = {\n\tname: 'ModeOption',\n\tprops: {\n\t\tisSelected: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tlabels: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdescriptionTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescriptionText: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['click'],\n\tcomputed: {\n\t\tlabelsCollection(): LabelOptions[]\n\t\t{\n\t\t\treturn this.labels;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<li @click=\"$emit('click')\" class=\"bx-im-desktop-mode-selection-banner__mode-option\" :class=\"{'--selected': isSelected}\">\n\t\t\t<div class=\"bx-im-desktop-mode-selection-banner__selected-icon\"></div>\n\t\t\t<div class=\"bx-im-desktop-mode-selection-banner__image_container\">\n\t\t\t\t<span class=\"bx-im-desktop-mode-selection-banner__image\"></span>\n\t\t\t\t<ul class=\"bx-im-desktop-mode-selection-banner__label-list\">\n\t\t\t\t\t<li v-for=\"label in labelsCollection\" :class=\"['bx-im-desktop-mode-selection-banner__label-item', '--' + label.value]\">\n\t\t\t\t\t\t{{ label.text }}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<slot name=\"extra-information\"></slot>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-desktop-mode-selection-banner__description_container\">\n\t\t\t\t<h2 class=\"bx-im-desktop-mode-selection-banner__description_title\">\n\t\t\t\t\t{{ descriptionTitle }}\n\t\t\t\t</h2>\n\t\t\t\t<p class=\"bx-im-desktop-mode-selection-banner__description_text\">\n\t\t\t\t\t{{ descriptionText }}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</li>\n\t`,\n};\n","import { ModeOption } from './mode-option';\n\nexport type LabelOptions = {\n\tvalue: string,\n\ttext: string,\n}\n\nconst FeatureLabel = {\n\tclients: 'clients',\n\ttasks: 'tasks',\n\tother: 'other',\n\tdocuments: 'documents',\n\tchannels: 'channels',\n\tchats: 'chats',\n\tcalls: 'calls',\n};\n\nconst ONE_WINDOW_CARD_CLASS = '--one-window';\nconst TWO_WINDOW_CARD_CLASS = '--two-window';\n\n// @vue/component\nexport const ModeOptionList = {\n\tname: 'ModeOptionList',\n\tcomponents: { ModeOption },\n\tprops: {\n\t\tisTwoWindowModeSelected: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['twoWindowClick', 'oneWindowClick'],\n\tcomputed: {\n\t\tOneWindowCardClass: () => ONE_WINDOW_CARD_CLASS,\n\t\tTwoWindowCardClass: () => TWO_WINDOW_CARD_CLASS,\n\t\ttwoWindowModeLabels(): LabelOptions[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tvalue: FeatureLabel.clients,\n\t\t\t\t\ttext: this.loc('IM_DESKTOP_MODE_SELECTION_BANNER_LABEL_CLIENTS'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: FeatureLabel.tasks,\n\t\t\t\t\ttext: this.loc('IM_DESKTOP_MODE_SELECTION_BANNER_LABEL_TASKS'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: FeatureLabel.other,\n\t\t\t\t\ttext: this.loc('IM_DESKTOP_MODE_SELECTION_BANNER_LABEL_OTHER'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: FeatureLabel.documents,\n\t\t\t\t\ttext: this.loc('IM_DESKTOP_MODE_SELECTION_BANNER_LABEL_DOCUMENTS'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: FeatureLabel.channels,\n\t\t\t\t\ttext: this.loc('IM_DESKTOP_MODE_SELECTION_BANNER_LABEL_CHANNELS'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: FeatureLabel.chats,\n\t\t\t\t\ttext: this.loc('IM_DESKTOP_MODE_SELECTION_BANNER_LABEL_CHATS'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: FeatureLabel.calls,\n\t\t\t\t\ttext: this.loc('IM_DESKTOP_MODE_SELECTION_BANNER_LABEL_CALLS'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\toneWindowModeLabels(): LabelOptions[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tvalue: FeatureLabel.channels,\n\t\t\t\t\ttext: this.loc('IM_DESKTOP_MODE_SELECTION_BANNER_LABEL_CHANNELS'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: FeatureLabel.chats,\n\t\t\t\t\ttext: this.loc('IM_DESKTOP_MODE_SELECTION_BANNER_LABEL_CHATS'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: FeatureLabel.calls,\n\t\t\t\t\ttext: this.loc('IM_DESKTOP_MODE_SELECTION_BANNER_LABEL_CALLS'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmethods: {\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ul class=\"bx-im-desktop-mode-selection-banner__mode-option-list\">\n\t\t\t<ModeOption\n\t\t\t\t:isSelected=\"isTwoWindowModeSelected\"\n\t\t\t\t:labels=\"twoWindowModeLabels\"\n\t\t\t\t:class=\"TwoWindowCardClass\"\n\t\t\t\t:descriptionTitle=\"loc('IM_DESKTOP_MODE_SELECTION_BANNER_TITLE_TWO_WINDOW')\"\n\t\t\t\t:descriptionText=\"loc('IM_DESKTOP_MODE_SELECTION_BANNER_DESCRIPTION_TWO_WINDOW')\"\n\t\t\t\t@click=\"$emit('twoWindowClick')\"\n\t\t\t/>\n\t\t\t<ModeOption\n\t\t\t\t:isSelected=\"!isTwoWindowModeSelected\"\n\t\t\t\t:labels=\"oneWindowModeLabels\"\n\t\t\t\t:class=\"OneWindowCardClass\"\n\t\t\t\t:descriptionTitle=\"loc('IM_DESKTOP_MODE_SELECTION_BANNER_TITLE_ONE_WINDOW')\"\n\t\t\t\t:descriptionText=\"loc('IM_DESKTOP_MODE_SELECTION_BANNER_DESCRIPTION_ONE_WINDOW')\"\n\t\t\t\t@click=\"$emit('oneWindowClick')\"\n\t\t\t>\n\t\t\t\t<template #extra-information>\n\t\t\t\t\t<span class=\"bx-im-desktop-mode-selection-banner__extra-information\">{{ loc('IM_DESKTOP_MODE_SELECTION_BANNER_NOTE') }}</span>\n\t\t\t\t</template>\n\t\t\t</ModeOption>\n\t\t</ul>\n\t`,\n};\n","import { PromoId } from 'im.v2.const';\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { PromoManager } from 'im.v2.lib.promo';\nimport { DesktopApi } from 'im.v2.lib.desktop-api';\n\nimport { SelectButton } from './components/select-button';\nimport { ModeOptionList } from './components/mode-option-list';\n\nimport type { JsonObject } from 'main.core';\n\nimport './css/mode-selection-banner.css';\n\n// @vue/component\nexport const DesktopModeSelectionBanner = {\n\tname: 'ModeSelectionBanner',\n\tcomponents: { SelectButton, ModeOptionList },\n\temits: ['close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisTwoWindowModeSelected: true,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisTwoWindowMode(): boolean\n\t\t{\n\t\t\treturn DesktopApi.isTwoWindowMode();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.isTwoWindowModeSelected = this.isTwoWindowMode;\n\t},\n\tmethods: {\n\t\tonTwoWindowClick()\n\t\t{\n\t\t\tthis.isTwoWindowModeSelected = true;\n\t\t},\n\t\tonOneWindowClick()\n\t\t{\n\t\t\tthis.isTwoWindowModeSelected = false;\n\t\t},\n\t\tonSelectionConfirm()\n\t\t{\n\t\t\tvoid PromoManager.getInstance().markAsWatched(PromoId.desktopModeSelection);\n\n\t\t\tif (this.isTwoWindowModeSelected)\n\t\t\t{\n\t\t\t\tAnalytics.getInstance().desktopMode.onBannerTwoWindowEnable();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tAnalytics.getInstance().desktopMode.onBannerOneWindowEnable();\n\t\t\t}\n\n\t\t\tif (this.isTwoWindowModeSelected !== this.isTwoWindowMode)\n\t\t\t{\n\t\t\t\tDesktopApi.setTwoWindowMode(this.isTwoWindowModeSelected);\n\t\t\t\tDesktopApi.restart();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-messenger__scope bx-im-desktop-mode-selection-banner__container\">\n\t\t\t<div class=\"bx-im-desktop-mode-selection-banner__content-container\">\n\t\t\t\t<h1 class=\"bx-im-desktop-mode-selection-banner__title\">{{ loc('IM_DESKTOP_MODE_SELECTION_BANNER_TITLE') }}</h1>\n\t\t\t\t<ModeOptionList \n\t\t\t\t\t@twoWindowClick=\"onTwoWindowClick\"\n\t\t\t\t\t@oneWindowClick='onOneWindowClick'\n\t\t\t\t\t:isTwoWindowModeSelected=\"isTwoWindowModeSelected\"\n\t\t\t\t/>\n\t\t\t\t<SelectButton @click=\"onSelectionConfirm\" />\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n"],"names":["SelectButton","name","components","ConfirmButton","emits","computed","ButtonSize","methods","loc","phraseCode","$Bitrix","Loc","getMessage","template","ModeOption","props","isSelected","type","Boolean","required","labels","Object","descriptionTitle","String","descriptionText","labelsCollection","FeatureLabel","clients","tasks","other","documents","channels","chats","calls","ONE_WINDOW_CARD_CLASS","TWO_WINDOW_CARD_CLASS","ModeOptionList","isTwoWindowModeSelected","OneWindowCardClass","TwoWindowCardClass","twoWindowModeLabels","value","text","oneWindowModeLabels","DesktopModeSelectionBanner","data","isTwoWindowMode","DesktopApi","created","onTwoWindowClick","onOneWindowClick","onSelectionConfirm","PromoManager","getInstance","markAsWatched","PromoId","desktopModeSelection","Analytics","desktopMode","onBannerTwoWindowEnable","onBannerOneWindowEnable","setTwoWindowMode","restart","$emit"],"mappings":"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"}