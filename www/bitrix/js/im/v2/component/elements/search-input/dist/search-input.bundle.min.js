this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};this.BX.Messenger.v2.Component=this.BX.Messenger.v2.Component||{};(function(e,t,s,n,i){"use strict";const o={name:"SearchInput",components:{Spinner:i.Spinner},props:{placeholder:{type:String,default:""},searchMode:{type:Boolean,default:true},withIcon:{type:Boolean,default:true},withLoader:{type:Boolean,default:false},isLoading:{type:Boolean,default:false},delayForFocusOnStart:{type:Number||null,default:null}},emits:["queryChange","inputFocus","inputBlur","keyPressed","close","closeByEsc"],data(){return{query:"",hasFocus:false}},computed:{SpinnerSize:()=>i.SpinnerSize,SpinnerColor:()=>i.SpinnerColor,isEmptyQuery(){return this.query.length===0}},watch:{searchMode(e){if(e===true){this.focus()}else{this.query="";this.blur()}}},created(){this.getEmitter().subscribe(t.EventType.key.onBeforeEscape,this.onBeforeEscape)},beforeUnmount(){this.getEmitter().unsubscribe(t.EventType.key.onBeforeEscape,this.onBeforeEscape)},mounted(){if(this.delayForFocusOnStart===0){this.focus()}else if(this.delayForFocusOnStart>0){setTimeout((()=>{this.focus()}),this.delayForFocusOnStart)}},methods:{onBeforeEscape(){if(!this.hasFocus){return n.EscEventAction.ignored}if(this.isEmptyQuery){this.closeByEsc()}else{this.onClearInput()}return n.EscEventAction.handled},onInputUpdate(){this.$emit("queryChange",this.query)},onFocus(){this.focus();this.$emit("inputFocus")},onCloseClick(){this.query="";this.hasFocus=false;this.$emit("queryChange",this.query);this.$emit("close")},onClearInput(){this.query="";this.focus();this.$emit("queryChange",this.query)},onKeyUp(e){if(s.Utils.key.isCombination(e,"Escape")){return}this.$emit("keyPressed",e)},closeByEsc(){this.query="";this.hasFocus=false;this.$emit("queryChange",this.query);this.$emit("closeByEsc")},focus(){this.hasFocus=true;this.$refs.searchInput.focus()},blur(){this.hasFocus=false;this.$refs.searchInput.blur()},getEmitter(){return this.$Bitrix.eventEmitter}},template:`\n\t\t<div class="bx-im-search-input__scope bx-im-search-input__container" :class="{'--has-focus': hasFocus}">\n\t\t\t<div v-if="!isLoading" class="bx-im-search-input__search-icon"></div>\n\t\t\t<Spinner \n\t\t\t\tv-if="withLoader && isLoading" \n\t\t\t\t:size="SpinnerSize.XXS" \n\t\t\t\t:color="SpinnerColor.grey" \n\t\t\t\tclass="bx-im-search-input__loader"\n\t\t\t/>\n\t\t\t<input\n\t\t\t\t@focus="onFocus"\n\t\t\t\t@input="onInputUpdate"\n\t\t\t\t@keyup="onKeyUp"\n\t\t\t\tv-model="query"\n\t\t\t\tclass="bx-im-search-input__element"\n\t\t\t\t:class="{'--with-icon': withIcon}"\n\t\t\t\t:placeholder="placeholder"\n\t\t\t\tref="searchInput"\n\t\t\t/>\n\t\t\t<div v-if="hasFocus" class="bx-im-search-input__close-icon" @click="onCloseClick"></div>\n\t\t</div>\n\t`};e.SearchInput=o})(this.BX.Messenger.v2.Component.Elements=this.BX.Messenger.v2.Component.Elements||{},BX.Messenger.v2.Const,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Component.Elements);
//# sourceMappingURL=search-input.bundle.map.js