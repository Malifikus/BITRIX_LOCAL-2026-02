{"version":3,"file":"registry.bundle.js","sources":["../src/elements/sticker-pack-form/components/header/header.js","../src/elements/sticker-pack-form/components/upload-button/upload-button.js","../src/elements/sticker-pack-form/classes/uploader-filter.js","../src/elements/sticker-pack-form/classes/uploader.js","../src/elements/sticker-pack-form/components/uploader-widget.js","../src/elements/sticker-pack-form/sticker-pack-form.js","../src/elements/pack-stickers/components/add-sticker-button.js","../src/elements/sticker-item/sticker-item.js","../src/elements/pack-stickers/pack-stickers.js"],"sourcesContent":["import './css/header.css';\n\nexport const StickerPackFormHeader = {\n\tname: 'StickerPackFormHeader',\n\tmethods: {\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-sticker-pack-form-header__container\">\n\t\t\t<div class=\"bx-im-sticker-pack-form-header__image\"></div>\n\t\t\t<div class=\"bx-im-sticker-pack-form-header__content\">\n\t\t\t\t<div class=\"bx-im-sticker-pack-form-header__title\">\n\t\t\t\t\t{{ loc('IM_STICKER_PACK_FORM_WELCOME_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-sticker-pack-form-header__description\">\n\t\t\t\t\t{{ loc('IM_STICKER_PACK_FORM_WELCOME_BODY') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { AirButtonStyle, Button as UiButton, ButtonSize } from 'ui.vue3.components.button';\nimport { RichLoc } from 'ui.vue3.components.rich-loc';\nimport { Outline as OutlineIcons } from 'ui.icon-set.api.core';\n\nimport { openHelpdeskArticle } from 'im.v2.lib.helpdesk';\n\nimport './upload-button.css';\n\n// @vue/component\nexport const UploadButton = {\n\tname: 'UploadButton',\n\tcomponents: { UiButton, RichLoc },\n\tinject: ['uploader'],\n\tcomputed: {\n\t\tButtonSize: () => ButtonSize,\n\t\tAirButtonStyle: () => AirButtonStyle,\n\t\tOutlineIcons: () => OutlineIcons,\n\t\tdescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('IM_STICKER_PACK_FORM_DESCRIPTION');\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.uploader.assignBrowse(this.$refs.upload);\n\t},\n\tmethods: {\n\t\tonHelpdeskLinkClick()\n\t\t{\n\t\t\topenHelpdeskArticle('26987270');\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-sticker-pack-form-upload-button__container\">\n\t\t\t<div class=\"bx-im-sticker-pack-form-upload-button__button\" ref=\"upload\">\n\t\t\t\t<UiButton\n\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t:leftIcon=\"OutlineIcons.PLUS_L\"\n\t\t\t\t\t:text=\"loc('IM_STICKER_PACK_FORM_ADD_FILES_BUTTON')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-sticker-pack-form-upload-button__description\">\n\t\t\t\t<RichLoc\n\t\t\t\t\t:text=\"description\"\n\t\t\t\t\tplaceholder=\"[url]\"\n\t\t\t\t>\n\t\t\t\t\t<template #url=\"{ text }\">\n\t\t\t\t\t\t<span \n\t\t\t\t\t\t\tclass=\"bx-im-sticker-pack-form-upload-button__description-link\" \n\t\t\t\t\t\t\t@click=\"onHelpdeskLinkClick\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ text }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</template>\n\t\t\t\t</RichLoc>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { Filter, UploaderError, type UploaderFile } from 'ui.uploader.core';\n\nconst WEBP_MIME_TYPE = 'image/webp';\nconst WEBP_MAX_SIZE = 1024 * 500; // 500 KB\nconst WEBP_MAX_RESOLUTION = 512; // 512 px\n\nexport class UploaderFilter extends Filter\n{\n\tapply(file: UploaderFile): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (this.#isValid(file))\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treject(new UploaderError('UPLOADING_ERROR', Loc.getMessage('IM_STICKER_PACK_FORM_UPLOADING_LIMITS_WEBP')));\n\t\t\t}\n\t\t});\n\t}\n\n\t#isValid(file: UploaderFile): boolean\n\t{\n\t\tif (file.getType() !== WEBP_MIME_TYPE)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (file.isAnimated())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isAllowedSize = file.getSize() <= WEBP_MAX_SIZE;\n\t\tconst isAllowedResolution = file.getWidth() <= WEBP_MAX_RESOLUTION && file.getHeight() <= WEBP_MAX_RESOLUTION;\n\n\t\treturn isAllowedSize && isAllowedResolution;\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { FilterType, UploaderEvent } from 'ui.uploader.core';\n\nimport { UploaderFilter } from './uploader-filter';\n\nimport type { UploaderOptions } from 'ui.uploader.core';\n\nconst CONTROLLER_ACTION = 'im.v2.controller.sticker.stickerUploader';\nconst MAX_FILES_COUNT = 50;\nconst MAX_FILE_SIZE = 50 * 1024 * 1024; // 50 MB\nconst FILE_TYPES = ['image/jpg', 'image/jpeg', 'image/png', 'image/webp'];\n\nexport class Uploader extends EventEmitter\n{\n\t#fileIds: Set<string> = new Set();\n\tstatic UPLOAD_EVENT = 'uploadedFiles';\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Messenger.v2.Textarea.StickersUploader');\n\t}\n\n\tgetOptions(): UploaderOptions\n\t{\n\t\treturn {\n\t\t\tcontroller: CONTROLLER_ACTION,\n\t\t\tmultiple: true,\n\t\t\tmaxFileCount: MAX_FILES_COUNT,\n\t\t\tautoUpload: true,\n\t\t\tmaxFileSize: MAX_FILE_SIZE,\n\t\t\tacceptedFileTypes: FILE_TYPES,\n\t\t\tevents: {\n\t\t\t\t[UploaderEvent.FILE_COMPLETE]: (event) => {\n\t\t\t\t\tconst { file } = event.getData();\n\t\t\t\t\tconst id = file.getServerFileId();\n\t\t\t\t\tif (id)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#fileIds.add(id);\n\t\t\t\t\t\tthis.emit(Uploader.UPLOAD_EVENT, [...this.#fileIds.values()]);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t[UploaderEvent.FILE_REMOVE]: (event) => {\n\t\t\t\t\tconst { file } = event.getData();\n\t\t\t\t\tconst id = file.getServerFileId();\n\t\t\t\t\tif (id)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#fileIds.delete(id);\n\t\t\t\t\t\tthis.emit(Uploader.UPLOAD_EVENT, [...this.#fileIds.values()]);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tfilters: [\n\t\t\t\t{\n\t\t\t\t\ttype: FilterType.PREPARATION,\n\t\t\t\t\tfilter: UploaderFilter,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n}\n","import { TileWidgetComponent, TileWidgetSlot } from 'ui.uploader.tile-widget';\n\nimport { Uploader } from '../classes/uploader';\nimport { UploadButton } from '../components/upload-button/upload-button';\n\nimport type { TileWidgetOptions } from 'ui.uploader.tile-widget';\nimport type { UploaderOptions } from 'ui.uploader.core';\n\nconst UploaderWidgetOptions: TileWidgetOptions = {\n\treadonly: false,\n\thideDropArea: false,\n\tslots: {\n\t\t[TileWidgetSlot.BEFORE_DROP_AREA]: UploadButton,\n\t},\n};\n\nexport const UploaderWidget = {\n\tname: 'UploaderWidget',\n\tcomponents: { TileWidgetComponent },\n\temits: ['uploadedFiles'],\n\tcomputed: {\n\t\tUploaderWidgetOptions: () => UploaderWidgetOptions,\n\t\tuploaderOptions(): UploaderOptions\n\t\t{\n\t\t\treturn this.uploader.getOptions();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.uploader = new Uploader();\n\t\tthis.uploader.subscribe(Uploader.UPLOAD_EVENT, (event) => {\n\t\t\tconst fileIds = event.getData();\n\t\t\tthis.$emit('uploadedFiles', fileIds);\n\t\t});\n\t},\n\ttemplate: `\n\t\t<TileWidgetComponent\n\t\t\t:uploaderOptions=\"uploaderOptions\"\n\t\t\t:widgetOptions=\"UploaderWidgetOptions\"\n\t\t/>\n\t`,\n};\n","import { Loc, Tag } from 'main.core';\nimport { SidePanel } from 'main.sidepanel';\nimport { Layout } from 'ui.sidepanel.layout';\nimport { BInput, InputDesign } from 'ui.system.input.vue';\nimport { AirButtonStyle, Button as UiButton, ButtonSize } from 'ui.vue3.components.button';\n\nimport { StickerPackType } from 'im.v2.const';\nimport { Notifier } from 'im.v2.lib.notifier';\nimport { StickerService } from 'im.v2.provider.service.sticker';\n\nimport { StickerPackFormHeader } from './components/header/header';\nimport { UploadButton } from './components/upload-button/upload-button';\nimport { UploaderWidget } from './components/uploader-widget';\n\nimport './css/sticker-pack-form.css';\n\nimport type { JsonObject } from 'main.core';\n\nconst SLIDER_ID = 'im:sticker-pack-form';\nconst SLIDER_WIDTH = 700;\n\n// @vue/component\nexport const StickerPackForm = {\n\tname: 'StickerPackForm',\n\tcomponents: { BInput, UiButton, StickerPackFormHeader, UploaderWidget, UploadButton },\n\tprops: {\n\t\tpack: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t},\n\temits: ['close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tuploadedFileIds: [],\n\t\t\tpackName: this.pack?.name || '',\n\t\t};\n\t},\n\tcomputed: {\n\t\tInputDesign: () => InputDesign,\n\t\tAirButtonStyle: () => AirButtonStyle,\n\t\tButtonSize: () => ButtonSize,\n\t\thasUploadedFiles(): boolean\n\t\t{\n\t\t\treturn this.uploadedFileIds.length > 0;\n\t\t},\n\t\tisUpdateMode(): boolean\n\t\t{\n\t\t\treturn Boolean(this.pack);\n\t\t},\n\t\tsaveButtonName(): string\n\t\t{\n\t\t\tif (this.isUpdateMode)\n\t\t\t{\n\t\t\t\treturn this.loc('IM_STICKER_PACK_FORM_BUTTON_SAVE');\n\t\t\t}\n\n\t\t\treturn this.loc('IM_STICKER_PACK_FORM_BUTTON_CREATE');\n\t\t},\n\t\tcontentContainer(): HTMLElement\n\t\t{\n\t\t\treturn Tag.render`<div></div>`;\n\t\t},\n\t\tfooterContainer(): HTMLElement\n\t\t{\n\t\t\treturn Tag.render`<div></div>`;\n\t\t},\n\t\ttitle(): string\n\t\t{\n\t\t\tif (this.isUpdateMode)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('IM_STICKER_PACK_FORM_UPDATE_TITLE');\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('IM_STICKER_PACK_FORM_CREATE_TITLE');\n\t\t},\n\t\tdescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('IM_STICKER_PACK_FORM_DESCRIPTION');\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.openSlider();\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.closeSlider();\n\t},\n\tmethods: {\n\t\topenSlider()\n\t\t{\n\t\t\tSidePanel.Instance.open(SLIDER_ID, {\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: SLIDER_WIDTH,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn this.createLayoutContent();\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.$emit('close');\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tcloseSlider()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t\tconst slider = SidePanel.Instance.getSlider(SLIDER_ID);\n\t\t\tslider?.close();\n\t\t},\n\t\tcreateLayoutContent(): HTMLElement\n\t\t{\n\t\t\treturn Layout.createContent({\n\t\t\t\ttitle: this.title,\n\t\t\t\tdesign: {\n\t\t\t\t\tsection: false,\n\t\t\t\t\talignButtonsLeft: true,\n\t\t\t\t},\n\t\t\t\tcontent: () => this.contentContainer,\n\t\t\t\tbuttons: () => [this.footerContainer],\n\t\t\t});\n\t\t},\n\t\tonUploadedFiles(ids: string[])\n\t\t{\n\t\t\tthis.uploadedFileIds = ids;\n\t\t},\n\t\tonSave()\n\t\t{\n\t\t\tif (this.isUpdateMode)\n\t\t\t{\n\t\t\t\tvoid this.updatePack();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvoid this.createPack();\n\t\t},\n\t\tasync createPack()\n\t\t{\n\t\t\tawait StickerService.getInstance().createPack({\n\t\t\t\tuuids: this.uploadedFileIds,\n\t\t\t\ttype: StickerPackType.custom,\n\t\t\t\tname: this.packName,\n\t\t\t});\n\t\t\tNotifier.sticker.onCreatePackComplete();\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tasync updatePack()\n\t\t{\n\t\t\tawait StickerService.getInstance().updatePack({\n\t\t\t\tuuids: this.uploadedFileIds,\n\t\t\t\tid: this.pack.id,\n\t\t\t\ttype: this.pack.type,\n\t\t\t\tname: this.packName,\n\t\t\t});\n\n\t\t\tNotifier.sticker.onUpdatePackComplete();\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Teleport :to=\"contentContainer\">\n\t\t\t<div class=\"bx-im-sticker-pack-form__section\">\n\t\t\t\t<StickerPackFormHeader />\n\t\t\t\t<UploaderWidget @uploadedFiles=\"onUploadedFiles\" />\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"hasUploadedFiles || isUpdateMode\"\n\t\t\t\tclass=\"bx-im-sticker-pack-form__section\"\n\t\t\t>\n\t\t\t\t<div class=\"bx-im-sticker-pack-form__pack-title\">\n\t\t\t\t\t{{ loc('IM_STICKER_PACK_FORM_PACK_NAME') }}\n\t\t\t\t</div>\n\t\t\t\t<BInput v-model.trim=\"packName\" :design=\"InputDesign.Primary\" />\n\t\t\t</div>\n\t\t</Teleport>\n\t\t<Teleport :to=\"footerContainer\">\n\t\t\t<div class=\"bx-im-sticker-pack-form__buttons\">\n\t\t\t\t<UiButton\n\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t:text=\"saveButtonName\"\n\t\t\t\t\t@click=\"onSave\"\n\t\t\t\t/>\n\t\t\t\t<UiButton\n\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t:style=\"AirButtonStyle.PLAIN\"\n\t\t\t\t\t:text=\"loc('IM_STICKER_PACK_FORM_BUTTON_CANCEL')\"\n\t\t\t\t\t@click=\"$emit('close');\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Teleport>\n\t`,\n};\n","import { BIcon, Outline as OutlineIcons } from 'ui.icon-set.api.vue';\n\nimport { StickerPackForm } from '../../sticker-pack-form/sticker-pack-form';\n\nimport './css/add-sticker-button.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const AddStickerButton = {\n\tname: 'AddStickerButton',\n\tcomponents: { BIcon, StickerPackForm },\n\tinject: ['disableAutoHide', 'enableAutoHide'],\n\tprops: {\n\t\tpack: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tshowPackForm: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tOutlineIcons: () => OutlineIcons,\n\t},\n\tmethods: {\n\t\tonUpdatePackClick()\n\t\t{\n\t\t\tthis.disableAutoHide();\n\t\t\tthis.showPackForm = true;\n\t\t},\n\t\tonPackFormClose()\n\t\t{\n\t\t\tthis.enableAutoHide();\n\t\t\tthis.showPackForm = false;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-stickers-add-sticker-button__container\" @click=\"onUpdatePackClick\">\n\t\t\t<div class=\"bx-im-stickers-add-sticker-button__button\">\n\t\t\t\t<BIcon\n\t\t\t\t\t:name=\"OutlineIcons.PLUS_L\"\n\t\t\t\t\t:title=\"loc('IM_TEXTAREA_STICKER_SELECTOR_STICKERS_RECENT')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<StickerPackForm v-if=\"showPackForm\" :pack=\"pack\" @close=\"onPackFormClose\" />\n\t\t</div>\n\t`,\n};\n","import './sticker-item.css';\n\n// @vue/component\nexport const StickerItem = {\n\tname: 'StickerItem',\n\tprops: {\n\t\tsticker: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-sticker-item__container\">\n\t\t\t<img :src=\"sticker.uri\" alt=\"\" loading=\"lazy\" draggable=\"false\" />\n\t\t</div>\n\t`,\n};\n","import { Core } from 'im.v2.application.core';\nimport { RecentPackId, RecentPackType, StickerPackType } from 'im.v2.const';\n\nimport { AddStickerButton } from './components/add-sticker-button';\nimport { StickerItem } from '../sticker-item/sticker-item';\n\nimport './css/pack-stickers.css';\n\nimport type { ImModelSticker } from 'im.v2.model';\n\n// @vue/component\nexport const PackStickers = {\n\tname: 'PackStickers',\n\tcomponents: { StickerItem, AddStickerButton },\n\tprops: {\n\t\tpack: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\twithAddButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\temits: ['clickSticker', 'openContextMenuSticker'],\n\tcomputed: {\n\t\tisRecentPack(): boolean\n\t\t{\n\t\t\treturn this.pack.id === RecentPackId && this.pack.type === RecentPackType;\n\t\t},\n\t\trecentStickers(): ImModelSticker[]\n\t\t{\n\t\t\treturn this.$store.getters['stickers/recent/get'];\n\t\t},\n\t\tstickers(): ImModelSticker[]\n\t\t{\n\t\t\tif (this.isRecentPack)\n\t\t\t{\n\t\t\t\treturn this.recentStickers;\n\t\t\t}\n\n\t\t\treturn this.$store.getters['stickers/getByPack']({\n\t\t\t\tid: this.pack.id,\n\t\t\t\ttype: this.pack.type,\n\t\t\t});\n\t\t},\n\t\tcanAddStickers(): boolean\n\t\t{\n\t\t\tif (!this.withAddButton)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.pack.type !== StickerPackType.custom)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.pack.authorId === Core.getUserId();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-pack-stickers__container\">\n\t\t\t<StickerItem\n\t\t\t\tv-for=\"sticker in stickers\"\n\t\t\t\t:key=\"sticker.id\"\n\t\t\t\t:sticker=\"sticker\"\n\t\t\t\t@click=\"$emit('clickSticker', { event: $event, sticker })\"\n\t\t\t\t@contextmenu.prevent=\"$emit('openContextMenuSticker', { event: $event, sticker })\"\n\t\t\t/>\n\t\t\t<AddStickerButton v-if=\"canAddStickers\" :pack=\"pack\" />\n\t\t</div>\n\t`,\n};\n"],"names":["StickerPackFormHeader","name","methods","loc","phraseCode","$Bitrix","Loc","getMessage","template","UploadButton","components","UiButton","RichLoc","inject","computed","ButtonSize","AirButtonStyle","OutlineIcons","description","mounted","uploader","assignBrowse","$refs","upload","onHelpdeskLinkClick","openHelpdeskArticle","WEBP_MIME_TYPE","WEBP_MAX_SIZE","WEBP_MAX_RESOLUTION","UploaderFilter","Filter","apply","file","Promise","resolve","reject","UploaderError","getType","isAnimated","isAllowedSize","getSize","isAllowedResolution","getWidth","getHeight","CONTROLLER_ACTION","MAX_FILES_COUNT","MAX_FILE_SIZE","FILE_TYPES","Uploader","EventEmitter","constructor","Set","setEventNamespace","getOptions","controller","multiple","maxFileCount","autoUpload","maxFileSize","acceptedFileTypes","events","UploaderEvent","FILE_COMPLETE","event","getData","id","getServerFileId","add","emit","UPLOAD_EVENT","values","FILE_REMOVE","delete","filters","type","FilterType","PREPARATION","filter","UploaderWidgetOptions","readonly","hideDropArea","slots","TileWidgetSlot","BEFORE_DROP_AREA","UploaderWidget","TileWidgetComponent","emits","uploaderOptions","created","subscribe","fileIds","$emit","SLIDER_ID","SLIDER_WIDTH","StickerPackForm","BInput","props","pack","Object","default","data","uploadedFileIds","packName","InputDesign","hasUploadedFiles","length","isUpdateMode","Boolean","saveButtonName","contentContainer","Tag","render","footerContainer","title","openSlider","beforeUnmount","closeSlider","SidePanel","Instance","open","cacheable","width","contentCallback","createLayoutContent","onClose","slider","getSlider","close","Layout","createContent","design","section","alignButtonsLeft","content","buttons","onUploadedFiles","ids","onSave","updatePack","createPack","StickerService","getInstance","uuids","StickerPackType","custom","Notifier","sticker","onCreatePackComplete","onUpdatePackComplete","AddStickerButton","BIcon","required","showPackForm","onUpdatePackClick","disableAutoHide","onPackFormClose","enableAutoHide","StickerItem","PackStickers","withAddButton","isRecentPack","RecentPackId","RecentPackType","recentStickers","$store","getters","stickers","canAddStickers","authorId","Core","getUserId"],"mappings":"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"}