{"version":3,"file":"sticker.bundle.js","sources":["../src/components/pack-popup-content.js","../src/components/pack-popup.js","../src/components/sticker-fallback.js","../src/sticker.js"],"sourcesContent":["import { BIcon, Outline as OutlineIcons } from 'ui.icon-set.api.vue';\nimport { Button as UiButton, ButtonSize, AirButtonStyle } from 'ui.vue3.components.button';\n\nimport { Core } from 'im.v2.application.core';\nimport { Shimmer, Spinner, SpinnerColor, SpinnerSize } from 'im.v2.component.elements.loader';\nimport { Color, PopupType, StickerPackType } from 'im.v2.const';\nimport { StickerPackMenu, StickerMenu } from 'im.v2.lib.menu';\nimport { StickerService } from 'im.v2.provider.service.sticker';\nimport { StickerPackForm, PackStickers } from 'im.v2.component.sticker';\nimport { Notifier } from 'im.v2.lib.notifier';\n\nimport '../css/components/pack-popup.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelSticker, ImModelStickerPack } from 'im.v2.model';\n\nconst SHIMMER_WIDTH = 178;\nconst SHIMMER_HEIGHT = 12;\n\n// @vue/component\nexport const PackPopupContent = {\n\tname: 'PackPopupContent',\n\tcomponents: { UiButton, BIcon, Spinner, Shimmer, StickerPackForm, PackStickers },\n\tinject: ['disableAutoHide', 'enableAutoHide'],\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tpackId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tpackType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisLoading: false,\n\t\t\tisRequestSending: false,\n\t\t\tshowPackForm: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tSHIMMER_WIDTH: () => SHIMMER_WIDTH,\n\t\tSHIMMER_HEIGHT: () => SHIMMER_HEIGHT,\n\t\tPopupType: () => PopupType,\n\t\tButtonSize: () => ButtonSize,\n\t\tSpinnerColor: () => SpinnerColor,\n\t\tSpinnerSize: () => SpinnerSize,\n\t\tOutlineIcons: () => OutlineIcons,\n\t\tAirButtonStyle: () => AirButtonStyle,\n\t\tColor: () => Color,\n\t\tpack(): ?ImModelStickerPack\n\t\t{\n\t\t\treturn this.$store.getters['stickers/packs/getByIdentifier']({ id: this.packId, type: this.packType });\n\t\t},\n\t\tbuttonText(): string\n\t\t{\n\t\t\tif (this.pack.isAdded)\n\t\t\t{\n\t\t\t\treturn this.loc('IM_MESSAGE_STICKER_PACK_ADDED');\n\t\t\t}\n\n\t\t\treturn this.loc('IM_MESSAGE_STICKER_PACK_ADD');\n\t\t},\n\t\tbuttonStyle(): $Values<typeof AirButtonStyle>\n\t\t{\n\t\t\tif (this.pack.isAdded)\n\t\t\t{\n\t\t\t\treturn AirButtonStyle.PLAIN;\n\t\t\t}\n\n\t\t\treturn AirButtonStyle.FILLED;\n\t\t},\n\t\tisPackOwner(): boolean\n\t\t{\n\t\t\treturn this.pack.authorId === Core.getUserId();\n\t\t},\n\t\tcanShowContextMenu(): boolean\n\t\t{\n\t\t\tif (this.isLoading)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.isPackOwner)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.pack.type === StickerPackType.custom;\n\t\t},\n\t},\n\tasync created()\n\t{\n\t\tthis.stickerService = StickerService.getInstance();\n\t\tthis.isLoading = true;\n\t\tawait this.stickerService.loadPack({\n\t\t\tid: this.packId,\n\t\t\ttype: this.packType,\n\t\t});\n\t\tthis.isLoading = false;\n\t},\n\tmethods: {\n\t\tasync linkStickerPack()\n\t\t{\n\t\t\tif (this.pack?.isAdded)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isRequestSending = true;\n\t\t\tawait this.stickerService.linkPack({ id: this.packId, type: this.packType });\n\t\t\tthis.isRequestSending = false;\n\t\t\tNotifier.sticker.onLinkPackComplete();\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tshowPackMenu(event: PointerEvent)\n\t\t{\n\t\t\tif (!this.packMenu)\n\t\t\t{\n\t\t\t\tthis.packMenu = new StickerPackMenu();\n\t\t\t\tthis.packMenu.subscribe('openEditor', () => {\n\t\t\t\t\tthis.showPackForm = true;\n\t\t\t\t});\n\t\t\t\tthis.packMenu.subscribe('closeParentPopup', () => {\n\t\t\t\t\tthis.$emit('close');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.disableAutoHide();\n\t\t\tthis.packMenu.openMenu({\n\t\t\t\tpack: this.pack,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tisRecent: false,\n\t\t\t}, event.target);\n\t\t},\n\t\tshowStickerMenu({ event, sticker }: { event: PointerEvent, sticker: ImModelSticker })\n\t\t{\n\t\t\tif (!this.stickerMenu)\n\t\t\t{\n\t\t\t\tthis.stickerMenu = new StickerMenu();\n\t\t\t\tthis.stickerMenu.subscribe('close', () => {\n\t\t\t\t\tthis.enableAutoHide();\n\t\t\t\t});\n\t\t\t\tthis.stickerMenu.subscribe('closeParentPopup', () => {\n\t\t\t\t\tthis.$emit('close');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.disableAutoHide();\n\n\t\t\tthis.stickerMenu.openMenu({\n\t\t\t\tsticker,\n\t\t\t\tisRecent: false,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t}, event.target);\n\t\t},\n\t\tonStickerPackFormClose()\n\t\t{\n\t\t\tthis.enableAutoHide();\n\t\t\tthis.showPackForm = false;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-stickers-pack-popup__container\">\n\t\t\t<div class=\"bx-im-stickers-pack-popup__header\">\n\t\t\t\t<Shimmer v-if=\"isLoading\" :width=\"SHIMMER_WIDTH\" :height=\"SHIMMER_HEIGHT\" />\n\t\t\t\t<div v-else class=\"bx-im-stickers-pack-popup__header-title --ellipsis\">{{ pack.name }}</div>\n\t\t\t\t<div class=\"bx-im-stickers-pack-popup__header-controls\">\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\tv-if=\"canShowContextMenu\"\n\t\t\t\t\t\t:name=\"OutlineIcons.MORE_M\"\n\t\t\t\t\t\t:hoverable=\"true\"\n\t\t\t\t\t\tclass=\"bx-im-stickers-pack-popup__control-icon\"\n\t\t\t\t\t\t@click=\"showPackMenu\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\t:name=\"OutlineIcons.CROSS_M\"\n\t\t\t\t\t\t:hoverable=\"true\"\n\t\t\t\t\t\tclass=\"bx-im-stickers-pack-popup__control-icon\"\n\t\t\t\t\t\t@click=\"$emit('close')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<PackStickers\n\t\t\t\tv-if=\"!isLoading\"\n\t\t\t\t:pack=\"pack\"\n\t\t\t\t:withAddButton=\"false\"\n\t\t\t\tclass=\"bx-im-stickers-pack-popup__sticker-list\"\n\t\t\t\t@clickSticker=\"showStickerMenu\"\n\t\t\t\t@openContextMenuSticker=\"showStickerMenu\"\n\t\t\t/>\n\t\t\t<div v-else class=\"bx-im-stickers-pack-popup__loader\">\n\t\t\t\t<Spinner\n\t\t\t\t\t:size=\"SpinnerSize.M\"\n\t\t\t\t\t:color=\"SpinnerColor.mainPrimary\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div \n\t\t\t\tv-if=\"!isLoading\"\n\t\t\t\t:class=\"{'--pack-added': pack.isAdded}\"\n\t\t\t\tclass=\"bx-im-stickers-pack-popup__footer\"\n\t\t\t>\n\t\t\t\t<UiButton\n\t\t\t\t\t:size=\"ButtonSize.LARGE\"\n\t\t\t\t\t:text=\"buttonText\"\n\t\t\t\t\t:loading=\"isRequestSending\"\n\t\t\t\t\t:style=\"buttonStyle\"\n\t\t\t\t\t:left-icon=\"OutlineIcons.CHECK_L\"\n\t\t\t\t\t@click=\"linkStickerPack\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<StickerPackForm v-if=\"showPackForm\" :pack=\"pack\" @close=\"onStickerPackFormClose\" />\n\t\t</div>\n\t`,\n};\n","import { MessengerPopup } from 'im.v2.component.elements.popup';\nimport { PopupType } from 'im.v2.const';\n\nimport { PackPopupContent } from './pack-popup-content';\n\nimport type { PopupOptions } from 'main.popup';\n\n// @vue/component\nexport const PackPopup = {\n\tname: 'StickerPackPopup',\n\tcomponents: { MessengerPopup, PackPopupContent },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tpackId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tpackType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tcomputed: {\n\t\tPopupType: () => PopupType,\n\t\tpopupConfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: 404,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tfixed: true,\n\t\t\t\toverlay: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tborderRadius: '20px',\n\t\t\t\tcontentBorderRadius: '20px',\n\t\t\t\tclassName: 'bx-im-messenger__scope',\n\t\t\t\tbackground: 'transparent',\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<MessengerPopup\n\t\t\t:config=\"popupConfig\"\n\t\t\t:id=\"PopupType.stickerPack\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<PackPopupContent \n\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t:packId=\"packId\"\n\t\t\t\t:packType=\"packType\"\n\t\t\t\t@close=\"$emit('close')\"\n\t\t\t/>\n\t\t</MessengerPopup>\n\t`,\n};\n","import { BIcon, Outline as OutlineIcons } from 'ui.icon-set.api.vue';\n\nimport '../css/components/sticker-fallback.css';\n\n// @vue/component\nexport const StickerFallback = {\n\tname: 'StickerFallback',\n\tcomponents: { BIcon },\n\tcomputed: {\n\t\tOutlineIcons: () => OutlineIcons,\n\t},\n\tmethods: {\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-message-sticker-fallback__container\">\n\t\t\t<div class=\"bx-im-message-sticker-fallback__content\">\n\t\t\t\t<BIcon :name=\"OutlineIcons.ALERT\" />\n\t\t\t\t{{ loc('IM_MESSAGE_STICKER_EMPTY') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\n\nimport { BaseMessage } from 'im.v2.component.message.base';\nimport { MessageHeader, MessageStatus, ReactionList } from 'im.v2.component.message.elements';\n\nimport { PackPopup } from './components/pack-popup';\nimport { StickerFallback } from './components/sticker-fallback';\n\nimport './css/sticker.css';\n\nimport type { ImModelMessage, ImModelSticker } from 'im.v2.model';\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const StickerMessage = {\n\tname: 'StickerMessage',\n\tcomponents: { BaseMessage, MessageStatus, ReactionList, MessageHeader, StickerFallback, PackPopup },\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tshowPackPopup: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tsticker(): ?ImModelSticker\n\t\t{\n\t\t\tconst sticker = this.$store.getters['stickers/messages/getStickerByMessageId'](this.message.id);\n\n\t\t\treturn this.$store.getters['stickers/get'](sticker);\n\t\t},\n\t\timageUri(): ?string\n\t\t{\n\t\t\treturn this.sticker?.uri;\n\t\t},\n\t\thasStickerUri(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.imageUri);\n\t\t},\n\t\timageHeightStyles(): {height?: string}\n\t\t{\n\t\t\tif (!this.sticker.width || !this.sticker.height)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tconst STICKER_MAX_SIZE = 166;\n\t\t\tconst currentRatio = this.sticker.width / this.sticker.height;\n\t\t\tconst reducedHeight = Math.round(STICKER_MAX_SIZE / currentRatio);\n\t\t\tconst finalHeight = Math.min(reducedHeight, STICKER_MAX_SIZE);\n\n\t\t\treturn {\n\t\t\t\theight: `${finalHeight}px`,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tonStickerClick()\n\t\t{\n\t\t\tif (!this.hasStickerUri)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.showPackPopup = true;\n\t\t},\n\t\tonClosePopup()\n\t\t{\n\t\t\tthis.showPackPopup = false;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseMessage\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:item=\"item\"\n\t\t\t:withBackground=\"false\"\n\t\t\t:afterMessageWidthLimit=\"false\"\n\t\t>\n\t\t\t<template #before-message>\n\t\t\t\t<div class=\"bx-im-message-sticker__header-container\">\n\t\t\t\t\t<MessageHeader :item=\"item\" :isOverlay=\"true\" />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div class=\"bx-im-message-sticker__container\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasStickerUri\"\n\t\t\t\t\tclass=\"bx-im-message-sticker__image\"\n\t\t\t\t\t:style=\"imageHeightStyles\"\n\t\t\t\t\t@click=\"onStickerClick\"\n\t\t\t\t>\n\t\t\t\t\t<img :src=\"imageUri\" alt=\"\" loading=\"lazy\"/>\n\t\t\t\t</div>\n\t\t\t\t<StickerFallback v-else />\n\t\t\t\t<div class=\"bx-im-message-sticker__message-status-container\">\n\t\t\t\t\t<MessageStatus :item=\"message\" :isOverlay=\"true\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<template #after-message>\n\t\t\t\t<div class=\"bx-im-message-sticker__reactions-container\">\n\t\t\t\t\t<ReactionList \n\t\t\t\t\t\t:messageId=\"message.id\"\n\t\t\t\t\t\t:contextDialogId=\"dialogId\"\n\t\t\t\t\t\tclass=\"bx-im-message-sticker__reactions\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<PackPopup\n\t\t\t\tv-if=\"showPackPopup\"\n\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t:packId=\"sticker.packId\"\n\t\t\t\t:packType=\"sticker.packType\"\n\t\t\t\t@close=\"onClosePopup\"\n\t\t\t/>\n\t\t</BaseMessage>\n\t`,\n};\n"],"names":["SHIMMER_WIDTH","SHIMMER_HEIGHT","PackPopupContent","name","components","UiButton","BIcon","Spinner","Shimmer","StickerPackForm","PackStickers","inject","props","dialogId","type","String","required","packId","Number","packType","emits","data","isLoading","isRequestSending","showPackForm","computed","PopupType","ButtonSize","SpinnerColor","SpinnerSize","OutlineIcons","AirButtonStyle","Color","pack","$store","getters","id","buttonText","isAdded","loc","buttonStyle","PLAIN","FILLED","isPackOwner","authorId","Core","getUserId","canShowContextMenu","StickerPackType","custom","created","stickerService","StickerService","getInstance","loadPack","methods","linkStickerPack","linkPack","Notifier","sticker","onLinkPackComplete","$emit","showPackMenu","event","packMenu","StickerPackMenu","subscribe","disableAutoHide","openMenu","isRecent","target","showStickerMenu","stickerMenu","StickerMenu","enableAutoHide","onStickerPackFormClose","phraseCode","$Bitrix","Loc","getMessage","template","PackPopup","MessengerPopup","popupConfig","width","targetContainer","document","body","fixed","overlay","autoHide","padding","contentPadding","borderRadius","contentBorderRadius","className","background","StickerFallback","StickerMessage","BaseMessage","MessageStatus","ReactionList","MessageHeader","item","Object","showPackPopup","message","imageUri","uri","hasStickerUri","Type","isStringFilled","imageHeightStyles","height","STICKER_MAX_SIZE","currentRatio","reducedHeight","Math","round","finalHeight","min","onStickerClick","onClosePopup"],"mappings":";;;;;;;;CAgBA,MAAMA,aAAa,GAAG,GAAG;CACzB,MAAMC,cAAc,GAAG,EAAE;;CAEzB;AACA,CAAO,MAAMC,gBAAgB,GAAG;GAC/BC,IAAI,EAAE,kBAAkB;GACxBC,UAAU,EAAE;eAAEC,gCAAQ;YAAEC,wBAAK;cAAEC,uCAAO;cAAEC,uCAAO;sBAAEC,uCAAe;mBAAEC;IAAc;GAChFC,MAAM,EAAE,CAAC,iBAAiB,EAAE,gBAAgB,CAAC;GAC7CC,KAAK,EAAE;KACNC,QAAQ,EAAE;OACTC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,MAAM,EAAE;OACPH,IAAI,EAAEI,MAAM;OACZF,QAAQ,EAAE;MACV;KACDG,QAAQ,EAAE;OACTL,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDI,KAAK,EAAE,CAAC,OAAO,CAAC;GAChBC,IAAI,GACJ;KACC,OAAO;OACNC,SAAS,EAAE,KAAK;OAChBC,gBAAgB,EAAE,KAAK;OACvBC,YAAY,EAAE;MACd;IACD;GACDC,QAAQ,EAAE;KACTzB,aAAa,EAAE,MAAMA,aAAa;KAClCC,cAAc,EAAE,MAAMA,cAAc;KACpCyB,SAAS,EAAE,MAAMA,qBAAS;KAC1BC,UAAU,EAAE,MAAMA,oCAAU;KAC5BC,YAAY,EAAE,MAAMA,4CAAY;KAChCC,WAAW,EAAE,MAAMA,2CAAW;KAC9BC,YAAY,EAAE,MAAMA,0BAAY;KAChCC,cAAc,EAAE,MAAMA,wCAAc;KACpCC,KAAK,EAAE,MAAMA,iBAAK;KAClBC,IAAI,GACJ;OACC,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,gCAAgC,CAAC,CAAC;SAAEC,EAAE,EAAE,IAAI,CAACnB,MAAM;SAAEH,IAAI,EAAE,IAAI,CAACK;QAAU,CAAC;MACtG;KACDkB,UAAU,GACV;OACC,IAAI,IAAI,CAACJ,IAAI,CAACK,OAAO,EACrB;SACC,OAAO,IAAI,CAACC,GAAG,CAAC,+BAA+B,CAAC;;OAGjD,OAAO,IAAI,CAACA,GAAG,CAAC,6BAA6B,CAAC;MAC9C;KACDC,WAAW,GACX;OACC,IAAI,IAAI,CAACP,IAAI,CAACK,OAAO,EACrB;SACC,OAAOP,wCAAc,CAACU,KAAK;;OAG5B,OAAOV,wCAAc,CAACW,MAAM;MAC5B;KACDC,WAAW,GACX;OACC,OAAO,IAAI,CAACV,IAAI,CAACW,QAAQ,KAAKC,2BAAI,CAACC,SAAS,EAAE;MAC9C;KACDC,kBAAkB,GAClB;OACC,IAAI,IAAI,CAACzB,SAAS,EAClB;SACC,OAAO,KAAK;;OAGb,IAAI,CAAC,IAAI,CAACqB,WAAW,EACrB;SACC,OAAO,KAAK;;OAGb,OAAO,IAAI,CAACV,IAAI,CAACnB,IAAI,KAAKkC,2BAAe,CAACC,MAAM;;IAEjD;GACD,MAAMC,OAAO,GACb;KACC,IAAI,CAACC,cAAc,GAAGC,6CAAc,CAACC,WAAW,EAAE;KAClD,IAAI,CAAC/B,SAAS,GAAG,IAAI;KACrB,MAAM,IAAI,CAAC6B,cAAc,CAACG,QAAQ,CAAC;OAClClB,EAAE,EAAE,IAAI,CAACnB,MAAM;OACfH,IAAI,EAAE,IAAI,CAACK;MACX,CAAC;KACF,IAAI,CAACG,SAAS,GAAG,KAAK;IACtB;GACDiC,OAAO,EAAE;KACR,MAAMC,eAAe,GACrB;OAAA;OACC,kBAAI,IAAI,CAACvB,IAAI,aAAT,WAAWK,OAAO,EACtB;SACC;;OAGD,IAAI,CAACf,gBAAgB,GAAG,IAAI;OAC5B,MAAM,IAAI,CAAC4B,cAAc,CAACM,QAAQ,CAAC;SAAErB,EAAE,EAAE,IAAI,CAACnB,MAAM;SAAEH,IAAI,EAAE,IAAI,CAACK;QAAU,CAAC;OAC5E,IAAI,CAACI,gBAAgB,GAAG,KAAK;OAC7BmC,2BAAQ,CAACC,OAAO,CAACC,kBAAkB,EAAE;OACrC,IAAI,CAACC,KAAK,CAAC,OAAO,CAAC;MACnB;KACDC,YAAY,CAACC,KAAmB,EAChC;OACC,IAAI,CAAC,IAAI,CAACC,QAAQ,EAClB;SACC,IAAI,CAACA,QAAQ,GAAG,IAAIC,8BAAe,EAAE;SACrC,IAAI,CAACD,QAAQ,CAACE,SAAS,CAAC,YAAY,EAAE,MAAM;WAC3C,IAAI,CAAC1C,YAAY,GAAG,IAAI;UACxB,CAAC;SACF,IAAI,CAACwC,QAAQ,CAACE,SAAS,CAAC,kBAAkB,EAAE,MAAM;WACjD,IAAI,CAACL,KAAK,CAAC,OAAO,CAAC;UACnB,CAAC;;OAGH,IAAI,CAACM,eAAe,EAAE;OACtB,IAAI,CAACH,QAAQ,CAACI,QAAQ,CAAC;SACtBnC,IAAI,EAAE,IAAI,CAACA,IAAI;SACfpB,QAAQ,EAAE,IAAI,CAACA,QAAQ;SACvBwD,QAAQ,EAAE;QACV,EAAEN,KAAK,CAACO,MAAM,CAAC;MAChB;KACDC,eAAe,CAAC;OAAER,KAAK;OAAEJ;MAA2D,EACpF;OACC,IAAI,CAAC,IAAI,CAACa,WAAW,EACrB;SACC,IAAI,CAACA,WAAW,GAAG,IAAIC,0BAAW,EAAE;SACpC,IAAI,CAACD,WAAW,CAACN,SAAS,CAAC,OAAO,EAAE,MAAM;WACzC,IAAI,CAACQ,cAAc,EAAE;UACrB,CAAC;SACF,IAAI,CAACF,WAAW,CAACN,SAAS,CAAC,kBAAkB,EAAE,MAAM;WACpD,IAAI,CAACL,KAAK,CAAC,OAAO,CAAC;UACnB,CAAC;;OAGH,IAAI,CAACM,eAAe,EAAE;OAEtB,IAAI,CAACK,WAAW,CAACJ,QAAQ,CAAC;SACzBT,OAAO;SACPU,QAAQ,EAAE,KAAK;SACfxD,QAAQ,EAAE,IAAI,CAACA;QACf,EAAEkD,KAAK,CAACO,MAAM,CAAC;MAChB;KACDK,sBAAsB,GACtB;OACC,IAAI,CAACD,cAAc,EAAE;OACrB,IAAI,CAAClD,YAAY,GAAG,KAAK;MACzB;KACDe,GAAG,CAACqC,UAAkB,EACtB;OACC,OAAO,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,UAAU,CAACH,UAAU,CAAC;;IAE/C;GACDI,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAoDZ,CAAC;;CC1ND;AACA,CAAO,MAAMC,SAAS,GAAG;GACxB9E,IAAI,EAAE,kBAAkB;GACxBC,UAAU,EAAE;qBAAE8E,6CAAc;KAAEhF;IAAkB;GAChDU,KAAK,EAAE;KACNC,QAAQ,EAAE;OACTC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,MAAM,EAAE;OACPH,IAAI,EAAEI,MAAM;OACZF,QAAQ,EAAE;MACV;KACDG,QAAQ,EAAE;OACTL,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDI,KAAK,EAAE,CAAC,OAAO,CAAC;GAChBK,QAAQ,EAAE;KACTC,SAAS,EAAE,MAAMA,qBAAS;KAC1ByD,WAAW,GACX;OACC,OAAO;SACNC,KAAK,EAAE,GAAG;SACVC,eAAe,EAAEC,QAAQ,CAACC,IAAI;SAC9BC,KAAK,EAAE,IAAI;SACXC,OAAO,EAAE,IAAI;SACbC,QAAQ,EAAE,IAAI;SACdC,OAAO,EAAE,CAAC;SACVC,cAAc,EAAE,CAAC;SACjBC,YAAY,EAAE,MAAM;SACpBC,mBAAmB,EAAE,MAAM;SAC3BC,SAAS,EAAE,wBAAwB;SACnCC,UAAU,EAAE;QACZ;;IAEF;GACDhB,QAAQ,EAAG;;;;;;;;;;;;;;CAcZ,CAAC;;CCvDD;AACA,CAAO,MAAMiB,eAAe,GAAG;GAC9B9F,IAAI,EAAE,iBAAiB;GACvBC,UAAU,EAAE;YAAEE;IAAO;GACrBmB,QAAQ,EAAE;KACTK,YAAY,EAAE,MAAMA;IACpB;GACDyB,OAAO,EAAE;KACRhB,GAAG,CAACqC,UAAkB,EACtB;OACC,OAAO,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,UAAU,CAACH,UAAU,CAAC;;IAE/C;GACDI,QAAQ,EAAG;;;;;;;;CAQZ,CAAC;;CCZD;AACA,OAAakB,cAAc,GAAG;GAC7B/F,IAAI,EAAE,gBAAgB;GACtBC,UAAU,EAAE;kBAAE+F,wCAAW;oBAAEC,8CAAa;mBAAEC,6CAAY;oBAAEC,8CAAa;KAAEL,eAAe;KAAEhB;IAAW;GACnGrE,KAAK,EAAE;KACN2F,IAAI,EAAE;OACLzF,IAAI,EAAE0F,MAAM;OACZxF,QAAQ,EAAE;MACV;KACDH,QAAQ,EAAE;OACTC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDK,IAAI,GACJ;KACC,OAAO;OACNoF,aAAa,EAAE;MACf;IACD;GACDhF,QAAQ,EAAE;KACTiF,OAAO,GACP;OACC,OAAO,IAAI,CAACH,IAAI;MAChB;KACD5C,OAAO,GACP;OACC,MAAMA,OAAO,GAAG,IAAI,CAACzB,MAAM,CAACC,OAAO,CAAC,yCAAyC,CAAC,CAAC,IAAI,CAACuE,OAAO,CAACtE,EAAE,CAAC;OAE/F,OAAO,IAAI,CAACF,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,CAACwB,OAAO,CAAC;MACnD;KACDgD,QAAQ,GACR;OAAA;OACC,wBAAO,IAAI,CAAChD,OAAO,qBAAZ,cAAciD,GAAG;MACxB;KACDC,aAAa,GACb;OACC,OAAOC,cAAI,CAACC,cAAc,CAAC,IAAI,CAACJ,QAAQ,CAAC;MACzC;KACDK,iBAAiB,GACjB;OACC,IAAI,CAAC,IAAI,CAACrD,OAAO,CAACyB,KAAK,IAAI,CAAC,IAAI,CAACzB,OAAO,CAACsD,MAAM,EAC/C;SACC,OAAO,EAAE;;OAGV,MAAMC,gBAAgB,GAAG,GAAG;OAC5B,MAAMC,YAAY,GAAG,IAAI,CAACxD,OAAO,CAACyB,KAAK,GAAG,IAAI,CAACzB,OAAO,CAACsD,MAAM;OAC7D,MAAMG,aAAa,GAAGC,IAAI,CAACC,KAAK,CAACJ,gBAAgB,GAAGC,YAAY,CAAC;OACjE,MAAMI,WAAW,GAAGF,IAAI,CAACG,GAAG,CAACJ,aAAa,EAAEF,gBAAgB,CAAC;OAE7D,OAAO;SACND,MAAM,EAAG,GAAEM,WAAY;QACvB;;IAEF;GACDhE,OAAO,EAAE;KACRkE,cAAc,GACd;OACC,IAAI,CAAC,IAAI,CAACZ,aAAa,EACvB;SACC;;OAGD,IAAI,CAACJ,aAAa,GAAG,IAAI;MACzB;KACDiB,YAAY,GACZ;OACC,IAAI,CAACjB,aAAa,GAAG,KAAK;;IAE3B;GACDzB,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA4CZ,CAAC;;;;;;;;"}