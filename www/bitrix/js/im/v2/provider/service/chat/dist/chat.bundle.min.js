this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,s,a,t,r,l,i,o,d,c,n,b,h,v,p,u,g,L,P,F,H,m,B){"use strict";var C=babelHelpers.classPrivateFieldLooseKey("store");var y=babelHelpers.classPrivateFieldLooseKey("updateModels");class f{constructor(){Object.defineProperty(this,y,{value:M});Object.defineProperty(this,C,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,C)[C]=P.Core.getStore()}async deleteChat(e){F.Logger.warn(`ChatService: deleteChat, dialogId: ${e}`);const s=await m.runAction(H.RestMethod.imV2ChatDelete,{data:{dialogId:e}}).catch((([e])=>{console.error("ChatService: deleteChat error:",e);u.Notifier.chat.onDeleteError()}));await babelHelpers.classPrivateFieldLooseBase(this,y)[y](e);return s}async deleteCollab(e){F.Logger.warn(`ChatService: deleteCollab, dialogId: ${e}`);try{await m.runAction(H.RestMethod.socialnetworkCollabDelete,{data:{dialogId:e}});await babelHelpers.classPrivateFieldLooseBase(this,y)[y](e);return Promise.resolve()}catch(e){const[s]=e;console.error("ChatService: deleteCollab error:",s);u.Notifier.collab.handleDeleteError(s);return Promise.resolve()}}}function M(e){void babelHelpers.classPrivateFieldLooseBase(this,C)[C].dispatch("chats/update",{dialogId:e,fields:{inited:false}});void babelHelpers.classPrivateFieldLooseBase(this,C)[C].dispatch("recent/delete",{id:e});const s=babelHelpers.classPrivateFieldLooseBase(this,C)[C].getters["chats/get"](e,true);void babelHelpers.classPrivateFieldLooseBase(this,C)[C].dispatch("messages/clearChatCollection",{chatId:s.chatId})}var I=babelHelpers.classPrivateFieldLooseKey("restResult");class w{constructor(e){Object.defineProperty(this,I,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,I)[I]=e}getChatId(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].chat.id}getDialogId(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].chat.dialogId}isOpenlinesChat(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].chat.type===H.ChatType.lines}isCopilotChat(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].chat.type===H.ChatType.copilot}isCollabChat(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].chat.type===H.ChatType.collab}getChats(){const e={...babelHelpers.classPrivateFieldLooseBase(this,I)[I].chat,hasPrevPage:babelHelpers.classPrivateFieldLooseBase(this,I)[I].hasPrevPage,hasNextPage:babelHelpers.classPrivateFieldLooseBase(this,I)[I].hasNextPage,tariffRestrictions:babelHelpers.classPrivateFieldLooseBase(this,I)[I].tariffRestrictions};const s={[babelHelpers.classPrivateFieldLooseBase(this,I)[I].chat.dialogId]:e};babelHelpers.classPrivateFieldLooseBase(this,I)[I].users.forEach((e=>{if(s[e.id]){s[e.id]={...s[e.id],...i.UserManager.getDialogForUser(e)}}else{s[e.id]=i.UserManager.getDialogForUser(e)}}));return Object.values(s)}getFiles(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].files)!=null?e:[]}getUsers(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].users)!=null?e:[]}getAdditionalUsers(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].usersShort)!=null?e:[]}getMessages(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].messages)!=null?e:[]}getCommentInfo(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].commentInfo)!=null?e:[]}getStickerMessages(){const e=[];if(!babelHelpers.classPrivateFieldLooseBase(this,I)[I].messages){return e}babelHelpers.classPrivateFieldLooseBase(this,I)[I].messages.forEach((s=>{const a=Boolean(s.params.STICKER_PARAMS);if(!a){return}e.push({messageId:s.id,...s.params.STICKER_PARAMS})}));return e}getStickers(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].stickers)!=null?e:[]}getCollabInfo(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].collabInfo)!=null?e:null}getMessagesToStore(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].additionalMessages)!=null?e:[]}getPinnedMessageIds(){var e;const s=[];const a=(e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].pins)!=null?e:[];a.forEach((e=>{s.push(e.messageId)}));return s}getReactions(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,I)[I].reactions)!=null?e:[]}getCopilot(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].copilot}getSession(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].session}getAutoDeleteConfig(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].messagesAutoDeleteConfigs}}const{callInstalled:S}=L.Extension.getSettings("im.v2.lib.call");var R=babelHelpers.classPrivateFieldLooseKey("store");var U=babelHelpers.classPrivateFieldLooseKey("requestChat");var A=babelHelpers.classPrivateFieldLooseKey("markDialogAsLoading");var D=babelHelpers.classPrivateFieldLooseKey("markDialogAsLoaded");var O=babelHelpers.classPrivateFieldLooseKey("markDialogAsNotLoaded");var j=babelHelpers.classPrivateFieldLooseKey("isDialogLoadedMarkNeeded");var K=babelHelpers.classPrivateFieldLooseKey("updateModels");var T=babelHelpers.classPrivateFieldLooseKey("needLayoutRedirect");var k=babelHelpers.classPrivateFieldLooseKey("redirectToLayout");var E=babelHelpers.classPrivateFieldLooseKey("needRedirectToOpenLinesLayout");var V=babelHelpers.classPrivateFieldLooseKey("checkFeatureDisabled");var X=babelHelpers.classPrivateFieldLooseKey("checkCollabFeatureDisabled");var N=babelHelpers.classPrivateFieldLooseKey("openFeatureSlider");class x{constructor(){Object.defineProperty(this,N,{value:se});Object.defineProperty(this,X,{value:ee});Object.defineProperty(this,V,{value:Z});Object.defineProperty(this,E,{value:G});Object.defineProperty(this,k,{value:J});Object.defineProperty(this,T,{value:Q});Object.defineProperty(this,K,{value:z});Object.defineProperty(this,j,{value:W});Object.defineProperty(this,O,{value:Y});Object.defineProperty(this,D,{value:_});Object.defineProperty(this,A,{value:q});Object.defineProperty(this,U,{value:$});Object.defineProperty(this,R,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,R)[R]=P.Core.getStore()}loadChat(e){const s={dialogId:e};return babelHelpers.classPrivateFieldLooseBase(this,U)[U](H.RestMethod.imV2ChatShallowLoad,s)}loadChatByChatId(e){const s={chatId:e,messageLimit:r.MessageService.getMessageRequestLimit()};return babelHelpers.classPrivateFieldLooseBase(this,U)[U](H.RestMethod.imV2ChatLoad,s)}loadChatWithMessages(e){const s={dialogId:e,messageLimit:r.MessageService.getMessageRequestLimit()};return babelHelpers.classPrivateFieldLooseBase(this,U)[U](H.RestMethod.imV2ChatLoad,s)}loadChatWithContext(e,s){const a={dialogId:e,messageId:s,messageLimit:r.MessageService.getMessageRequestLimit()};return babelHelpers.classPrivateFieldLooseBase(this,U)[U](H.RestMethod.imV2ChatLoadInContext,a)}prepareDialogId(e){if(!p.Utils.dialog.isExternalId(e)){return Promise.resolve(e)}return m.runAction(H.RestMethod.imV2ChatGetDialogId,{data:{externalId:e}}).then((e=>e.dialogId)).catch((e=>{console.error("ChatService: Load: error preparing external id",e)}))}async loadComments(e){const s={postId:e,messageLimit:r.MessageService.getMessageRequestLimit(),autoJoin:true,createIfNotExists:true};const{chatId:a}=await babelHelpers.classPrivateFieldLooseBase(this,U)[U](H.RestMethod.imV2ChatLoad,s);return babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("messages/comments/set",{messageId:e,chatId:a})}async loadCommentInfo(e){const s=babelHelpers.classPrivateFieldLooseBase(this,R)[R].getters["chats/get"](e,true);const a=babelHelpers.classPrivateFieldLooseBase(this,R)[R].getters["messages/getByChatId"](s.chatId);const t=a.map((e=>e.id));const{commentInfo:r,usersShort:l}=await m.runAction(H.RestMethod.imV2ChatMessageCommentInfoList,{data:{messageIds:t}}).catch((e=>{console.error("ChatService: Load: error loading comment info",e)}));const o=new i.UserManager;void babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("messages/comments/set",r);void o.addUsersToModel(l)}clearChat(e){const s=babelHelpers.classPrivateFieldLooseBase(this,R)[R].getters["chats/get"](e,true);babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("messages/clearChatCollection",{chatId:s.chatId});babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("chats/update",{dialogId:e,fields:{inited:false}})}}async function $(e,s){const{dialogId:r,messageId:l}=s;babelHelpers.classPrivateFieldLooseBase(this,A)[A](r);const i=await m.runAction(e,{data:s}).catch((([e])=>{console.error("ChatService: Load: error loading chat",e);u.Notifier.chat.handleLoadError(e);babelHelpers.classPrivateFieldLooseBase(this,O)[O](r);throw e}));if(babelHelpers.classPrivateFieldLooseBase(this,V)[V](i)){await babelHelpers.classPrivateFieldLooseBase(this,O)[O](r);await t.Messenger.openChat();return babelHelpers.classPrivateFieldLooseBase(this,N)[N](i)}if(babelHelpers.classPrivateFieldLooseBase(this,T)[T](i)){return babelHelpers.classPrivateFieldLooseBase(this,k)[k](i,l)}const{dialogId:o,chatId:d}=await babelHelpers.classPrivateFieldLooseBase(this,K)[K](i);const{callInfo:c}=i;if(S){a.CallTokenManager.setToken(c.chatId,c.token)}if(babelHelpers.classPrivateFieldLooseBase(this,j)[j](e)){await babelHelpers.classPrivateFieldLooseBase(this,D)[D](o)}return{dialogId:o,chatId:d}}function q(e){void babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("chats/update",{dialogId:e,fields:{loading:true}})}function _(e){return babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("chats/update",{dialogId:e,fields:{inited:true,loading:false}})}function Y(e){return babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("chats/update",{dialogId:e,fields:{loading:false}})}function W(e){return e!==H.RestMethod.imV2ChatShallowLoad}async function z(e){const a=new w(e);const t=babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("chats/set",a.getChats());const r=babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("files/set",a.getFiles());const o=babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("chats/autoDelete/set",a.getAutoDeleteConfig());const d=new i.UserManager;const c=Promise.all([babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("users/set",a.getUsers()),d.addUsersToModel(a.getAdditionalUsers())]);const n=Promise.all([babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("messages/setChatCollection",{messages:a.getMessages(),clearCollection:true}),babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("messages/store",a.getMessagesToStore()),babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("messages/pin/setPinned",{chatId:a.getChatId(),pinnedMessages:a.getPinnedMessageIds()}),babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("messages/reactions/set",a.getReactions()),babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("messages/comments/set",a.getCommentInfo())]);const b=new l.CopilotManager;const h=b.handleChatLoadResponse(a.getCopilot());let v=Promise.resolve();if(s.OpenLinesManager){v=s.OpenLinesManager.handleChatLoadResponse(a.getSession())}const p=babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("chats/collabs/set",{chatId:a.getChatId(),collabInfo:a.getCollabInfo()});const u=Promise.all([babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("stickers/messages/set",a.getStickerMessages()),babelHelpers.classPrivateFieldLooseBase(this,R)[R].dispatch("stickers/set",a.getStickers())]);await Promise.all([t,r,c,n,h,v,p,o,u]);return{dialogId:a.getDialogId(),chatId:a.getChatId()}}function Q(e){return babelHelpers.classPrivateFieldLooseBase(this,E)[E](e)}function J(e){const s=new w(e);g.LayoutManager.getInstance().setLastOpenedElement(H.Layout.chat,"");if(babelHelpers.classPrivateFieldLooseBase(this,E)[E](e)){return t.Messenger.openLines(s.getDialogId())}return Promise.resolve()}function G(e){const s=B.FeatureManager.isFeatureAvailable(B.Feature.openLinesV2);if(s){return false}const a=new w(e);return a.isOpenlinesChat()&&L.Type.isStringFilled(a.getDialogId())}function Z(e){return babelHelpers.classPrivateFieldLooseBase(this,X)[X](e)}function ee(e){const s=new w(e);return s.isCollabChat()&&!B.FeatureManager.collab.isAvailable()}function se(e){if(babelHelpers.classPrivateFieldLooseBase(this,X)[X](e)){B.FeatureManager.collab.openFeatureSlider()}}const ae="CHAT";const te="OPEN";var re=babelHelpers.classPrivateFieldLooseKey("restClient");var le=babelHelpers.classPrivateFieldLooseKey("store");var ie=babelHelpers.classPrivateFieldLooseKey("prepareFields");var oe=babelHelpers.classPrivateFieldLooseKey("addCollabToModel");var de=babelHelpers.classPrivateFieldLooseKey("addChatToModel");var ce=babelHelpers.classPrivateFieldLooseKey("sendAnalytics");var ne=babelHelpers.classPrivateFieldLooseKey("prepareType");class be{constructor(){Object.defineProperty(this,ne,{value:ge});Object.defineProperty(this,ce,{value:ue});Object.defineProperty(this,de,{value:pe});Object.defineProperty(this,oe,{value:ve});Object.defineProperty(this,ie,{value:he});Object.defineProperty(this,re,{writable:true,value:void 0});Object.defineProperty(this,le,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,re)[re]=P.Core.getRestClient();babelHelpers.classPrivateFieldLooseBase(this,le)[le]=P.Core.getStore()}async createChat(e){F.Logger.warn("ChatService: createChat",e);const s=await babelHelpers.classPrivateFieldLooseBase(this,ie)[ie](e);const a=await babelHelpers.classPrivateFieldLooseBase(this,re)[re].callMethod(H.RestMethod.imV2ChatAdd,{fields:s}).catch((e=>{console.error("ChatService: createChat error:",e);u.Notifier.chat.onCreateError();throw e}));const{chatId:t}=a.data();F.Logger.warn("ChatService: createChat result",t);const r=`chat${t}`;babelHelpers.classPrivateFieldLooseBase(this,de)[de](r,s);babelHelpers.classPrivateFieldLooseBase(this,ce)[ce](r);return{newDialogId:r,newChatId:t}}async createCollab(e){F.Logger.warn("ChatService: createCollab",e);const s=await babelHelpers.classPrivateFieldLooseBase(this,ie)[ie](e);const a={ownerId:s.ownerId,name:s.title,description:s.description,avatarId:s.avatar,moderatorMembers:p.Utils.user.prepareSelectorIds(e.moderatorMembers),permissions:e.permissions,options:{...e.options,messagesAutoDeleteDelay:s.messagesAutoDeleteDelay}};const t=await m.runAction(H.RestMethod.socialnetworkCollabCreate,{data:a}).catch((([e])=>{console.error("ChatService: createCollab error:",e);u.Notifier.collab.handleCreateError(e);throw e}));const{chatId:r}=t;F.Logger.warn("ChatService: createCollab result",r);const l=`chat${r}`;babelHelpers.classPrivateFieldLooseBase(this,oe)[oe](l,s);babelHelpers.classPrivateFieldLooseBase(this,ce)[ce](l);return{newDialogId:l,newChatId:r}}}async function he(e){var s,a,t,r;const l={...e};if(l.type){l.type=babelHelpers.classPrivateFieldLooseBase(this,ne)[ne](l.type)}if(l.entityType){l.entityType=babelHelpers.classPrivateFieldLooseBase(this,ne)[ne](l.entityType)}if(l.avatar){l.avatar=await p.Utils.file.getBase64(e.avatar)}l.managers=(s=l.managers)!=null?s:[];l.members=(a=l.members)!=null?a:[];const i=[...l.members,...l.managers];if(l.ownerId){i.push(l.ownerId)}l.members=[...new Set(i)];const o={type:(t=l.type)==null?void 0:t.toUpperCase(),entityType:(r=l.entityType)==null?void 0:r.toUpperCase(),title:l.title,avatar:l.avatar,description:l.description,users:l.members,memberEntities:l.memberEntities,managers:l.managers,ownerId:l.ownerId,searchable:l.isAvailableInSearch?"Y":"N",manageUsersAdd:l.manageUsersAdd,manageUsersDelete:l.manageUsersDelete,manageUi:l.manageUi,manageSettings:l.manageSettings,manageMessages:l.manageMessages,conferencePassword:l.conferencePassword,copilotMainRole:l.copilotMainRole,messagesAutoDeleteDelay:l.autoDeleteDelay};Object.entries(o).forEach((([e,s])=>{if(L.Type.isUndefined(s)){delete o[e]}}));return o}function ve(e,s){babelHelpers.classPrivateFieldLooseBase(this,le)[le].dispatch("chats/set",{dialogId:e,type:H.ChatType.collab,name:s.title})}function pe(e,s){let a=s.searchable==="Y"?te:ae;if(L.Type.isStringFilled(s.entityType)){a=s.entityType.toLowerCase()}if(L.Type.isStringFilled(s.type)){a=s.type.toLowerCase()}babelHelpers.classPrivateFieldLooseBase(this,le)[le].dispatch("chats/set",{dialogId:e,type:a.toLowerCase(),name:s.title,userCounter:s.users.length,role:H.UserRole.owner,permissions:{manageUi:s.manageUi,manageSettings:s.manageSettings,manageUsersAdd:s.manageUsersAdd,manageUsersDelete:s.manageUsersDelete,manageMessages:s.manageMessages}})}function ue(e){o.Analytics.getInstance().ignoreNextChatOpen(e)}function ge(e){return p.Utils.text.convertCamelToSnakeCase(e).toUpperCase()}var Le=babelHelpers.classPrivateFieldLooseKey("store");var Pe=babelHelpers.classPrivateFieldLooseKey("prepareFields");var Fe=babelHelpers.classPrivateFieldLooseKey("updateChatInModel");class He{constructor(){Object.defineProperty(this,Fe,{value:Be});Object.defineProperty(this,Pe,{value:me});Object.defineProperty(this,Le,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]=P.Core.getStore()}async prepareAvatar(e){if(!d.isResizableImage(e)){return Promise.reject(new Error("UpdateService: prepareAvatar: incorrect image"))}const s=180;const{preview:a}=await d.resizeImage(e,{width:s,height:s});return a}async changeAvatar(e,s){F.Logger.warn("ChatService: changeAvatar",e,s);const a=await p.Utils.file.getBase64(s);return m.runAction(H.RestMethod.imV2ChatUpdateAvatar,{data:{id:e,avatar:a}}).catch((([e])=>{console.error("ChatService: changeAvatar error:",e)}))}async updateChat(e,s){F.Logger.warn(`ChatService: updateChat, chatId: ${e}`,s);const a=await babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](s);const t=await m.runAction(H.RestMethod.imV2ChatUpdate,{data:{id:e,fields:a},id:e}).catch((([e])=>{console.error("ChatService: updateChat error:",e);u.Notifier.chat.onUpdateError();throw e}));F.Logger.warn("ChatService: updateChat result",t);const r=`chat${e}`;await babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe](r,s);return t}async updateCollab(e,s){F.Logger.warn(`ChatService: updateCollab, dialogId: ${e}`,s);const a=await babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](s);let t={dialogId:e,name:a.title,description:a.description,avatarId:a.avatar};if(s.groupSettings){const e=s.groupSettings;t={...t,ownerId:e.ownerId,addModeratorMembers:p.Utils.user.prepareSelectorIds(e.addModeratorMembers),deleteModeratorMembers:p.Utils.user.prepareSelectorIds(e.deleteModeratorMembers),permissions:e.permissions,options:e.options}}const r=await m.runAction(H.RestMethod.socialnetworkCollabUpdate,{data:t}).catch((([e])=>{console.error("ChatService: updateCollab error:",e);u.Notifier.collab.handleUpdateError(e);throw e}));F.Logger.warn("ChatService: updateCollab result",r);return r}async getMemberEntities(e){return m.runAction(H.RestMethod.imV2ChatMemberEntitiesList,{data:{chatId:e}}).catch((([e])=>{console.error("ChatService: getMemberEntities error:",e)}))}}async function me(e){const s={title:e.title,description:e.description,ownerId:e.ownerId,searchable:e.isAvailableInSearch?"Y":"N",manageUi:e.manageUi,manageUsersAdd:e.manageUsersAdd,manageUsersDelete:e.manageUsersDelete,manageMessages:e.manageMessages,addedMemberEntities:e.addedMemberEntities,deletedMemberEntities:e.deletedMemberEntities,addedManagers:e.addedManagers,deletedManagers:e.deletedManagers};if(e.avatar){s.avatar=await p.Utils.file.getBase64(e.avatar)}Object.entries(s).forEach((([e,a])=>{if(L.Type.isUndefined(a)){delete s[e]}}));return s}function Be(e,s){return babelHelpers.classPrivateFieldLooseBase(this,Le)[Le].dispatch("chats/update",{dialogId:e,fields:{name:s.title,description:s.description,ownerId:s.ownerId,managerList:s.managers,type:s.type,role:c.getChatRoleForUser(s),permissions:{manageUi:s.manageUi,manageUsersAdd:s.manageUsersAdd,manageUsersDelete:s.manageUsersDelete,manageMessages:s.manageMessages}}})}var Ce=babelHelpers.classPrivateFieldLooseKey("store");var ye=babelHelpers.classPrivateFieldLooseKey("restClient");var fe=babelHelpers.classPrivateFieldLooseKey("updateChatTitleInModel");class Me{constructor(){Object.defineProperty(this,fe,{value:Ie});Object.defineProperty(this,Ce,{writable:true,value:void 0});Object.defineProperty(this,ye,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]=P.Core.getStore();babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]=P.Core.getRestClient()}renameChat(e,s){F.Logger.warn("ChatService: renameChat",e,s);if(s===""){return Promise.resolve()}const a=babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce].getters["chats/get"](e);const t=a.name;babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](e,s);return babelHelpers.classPrivateFieldLooseBase(this,ye)[ye].callMethod(H.RestMethod.imChatUpdateTitle,{dialog_id:e,title:s}).catch((s=>{babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](e,t);console.error("ChatService: renameChat error",s.error());u.Notifier.chat.onRenameError()}))}}function Ie(e,s){babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce].dispatch("chats/update",{dialogId:e,fields:{name:s}})}var we=babelHelpers.classPrivateFieldLooseKey("store");var Se=babelHelpers.classPrivateFieldLooseKey("restClient");var Re=babelHelpers.classPrivateFieldLooseKey("sendMuteRequestDebounced");var Ue=babelHelpers.classPrivateFieldLooseKey("sendMuteRequest");class Ae{constructor(){Object.defineProperty(this,Ue,{value:De});Object.defineProperty(this,we,{writable:true,value:void 0});Object.defineProperty(this,Se,{writable:true,value:void 0});Object.defineProperty(this,Re,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,we)[we]=P.Core.getStore();babelHelpers.classPrivateFieldLooseBase(this,Se)[Se]=P.Core.getRestClient();const e=500;babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]=L.Runtime.debounce(babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue],e)}muteChat(e){F.Logger.warn("ChatService: muteChat",e);void babelHelpers.classPrivateFieldLooseBase(this,we)[we].dispatch("chats/mute",{dialogId:e});const s={dialog_id:e,action:"Y"};babelHelpers.classPrivateFieldLooseBase(this,Re)[Re](s)}unmuteChat(e){F.Logger.warn("ChatService: unmuteChat",e);void babelHelpers.classPrivateFieldLooseBase(this,we)[we].dispatch("chats/unmute",{dialogId:e});const s={dialog_id:e,action:"N"};babelHelpers.classPrivateFieldLooseBase(this,Re)[Re](s)}}function De(e){const{dialog_id:s,action:a}=e;return babelHelpers.classPrivateFieldLooseBase(this,Se)[Se].callMethod(H.RestMethod.imChatMute,e).catch((e=>{const t=a==="Y"?"muting":"unmuting";console.error(`Im.RecentList: error ${t} chat`,e.error());const r=a==="Y"?"chats/unmute":"chats/mute";void babelHelpers.classPrivateFieldLooseBase(this,we)[we].dispatch(r,{dialogId:s})}))}var Oe=babelHelpers.classPrivateFieldLooseKey("store");class je{constructor(){Object.defineProperty(this,Oe,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]=P.Core.getStore()}pinChat(e){F.Logger.warn("PinService: pinChat",e);void babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe].dispatch("recent/pin",{id:e,action:true});m.runAction(H.RestMethod.imV2RecentPin,{data:{dialogId:e}}).catch((([s])=>{console.error("PinService: error pinning chat",s);u.Notifier.recent.handlePinError(s);void babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe].dispatch("recent/pin",{id:e,action:false})}))}unpinChat(e){F.Logger.warn("PinService: unpinChat",e);void babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe].dispatch("recent/pin",{id:e,action:false});m.runAction(H.RestMethod.imV2RecentUnpin,{data:{dialogId:e}}).catch((([s])=>{console.error("PinService: error unpinning chat",s);u.Notifier.recent.onUnpinError();void babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe].dispatch("recent/pin",{id:e,action:true})}))}}const Ke=300;var Te=babelHelpers.classPrivateFieldLooseKey("store");var ke=babelHelpers.classPrivateFieldLooseKey("restClient");var Ee=babelHelpers.classPrivateFieldLooseKey("messagesToRead");var Ve=babelHelpers.classPrivateFieldLooseKey("readMessagesForChat");var Xe=babelHelpers.classPrivateFieldLooseKey("readMessageOnClient");var Ne=babelHelpers.classPrivateFieldLooseKey("decreaseCommentCounter");var xe=babelHelpers.classPrivateFieldLooseKey("decreaseChatCounter");var $e=babelHelpers.classPrivateFieldLooseKey("readMessageOnServer");var qe=babelHelpers.classPrivateFieldLooseKey("checkChatCounter");var _e=babelHelpers.classPrivateFieldLooseKey("getDialogIdByChatId");var Ye=babelHelpers.classPrivateFieldLooseKey("getDialogByChatId");class We{constructor(){Object.defineProperty(this,Ye,{value:as});Object.defineProperty(this,_e,{value:ss});Object.defineProperty(this,qe,{value:es});Object.defineProperty(this,$e,{value:Ze});Object.defineProperty(this,xe,{value:Ge});Object.defineProperty(this,Ne,{value:Je});Object.defineProperty(this,Xe,{value:Qe});Object.defineProperty(this,Ve,{value:ze});Object.defineProperty(this,Te,{writable:true,value:void 0});Object.defineProperty(this,ke,{writable:true,value:void 0});Object.defineProperty(this,Ee,{writable:true,value:{}});babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]=P.Core.getStore();babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]=P.Core.getRestClient()}readAllByType(e){const s=b.CounterClearActionsByChatType[e];if(s){s.forEach((s=>{void babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch(s,{type:e})}))}m.runAction(H.RestMethod.imV2ChatReadAllByType,{data:{type:e}}).catch((([e])=>{console.error("ReadService: readAllByType error",e)}))}readAll(){F.Logger.warn("ReadService: readAll");b.CounterClearActionsDefault.forEach((e=>{void babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch(e)}));m.runAction(H.RestMethod.imV2ChatReadAll).catch((([e])=>{console.error("ReadService: readAll error",e)}))}readDialog(e){F.Logger.warn("ReadService: readDialog",e);void babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch("recent/unread",{id:e,action:false});void babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch("chats/update",{dialogId:e,fields:{counter:0}});babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].callMethod(H.RestMethod.imV2ChatRead,{dialogId:e}).catch((e=>{console.error("ReadService: error reading chat",e.error())}))}unreadDialog(e){F.Logger.warn("ReadService: unreadDialog",e);void babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch("recent/unread",{id:e,action:true});babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].callMethod(H.RestMethod.imV2ChatUnread,{dialogId:e}).catch((s=>{console.error("ReadService: error setting chat as unread",s.error());void babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch("recent/unread",{id:e,action:false})}))}readMessage(e,s){if(!babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee][e]){babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee][e]=new Set}babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee][e].add(s);clearTimeout(this.readTimeout);this.readTimeout=setTimeout((()=>{Object.entries(babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]).forEach((([e,s])=>{void babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve](e,s)}))}),Ke)}async readChatQueuedMessages(e){if(!babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee][e]){return}clearTimeout(this.readTimeout);void babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve](e,babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee][e])}clearDialogMark(e){F.Logger.warn("ReadService: clear dialog mark",e);const s=babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].getters["chats/get"](e);const a=babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].getters["recent/get"](e);if(s.markedId===0&&!(a!=null&&a.unread)){return}void babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch("recent/unread",{id:e,action:false});void babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch("chats/update",{dialogId:e,fields:{markedId:0}});babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].callMethod(H.RestMethod.imV2ChatRead,{dialogId:e,onlyRecent:"Y"}).catch((e=>{console.error("ReadService: error clearing dialog mark",e.error())}))}}async function ze(e,s){const a=Number.parseInt(e,10);F.Logger.warn("ReadService: readMessages",s);if(s.size===0){return true}const t=[...s];delete babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee][a];const r=await babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe](a,t);F.Logger.warn("ReadService: readMessage, need to reduce counter by",r);await babelHelpers.classPrivateFieldLooseBase(this,xe)[xe](a,r);const l=await babelHelpers.classPrivateFieldLooseBase(this,$e)[$e](a,t).catch((([e])=>{console.error("ReadService: error reading message",e)}));babelHelpers.classPrivateFieldLooseBase(this,qe)[qe](l);return true}function Qe(e,s){const a=Math.max(...s);const t=babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye](e);if(a>t.lastReadId){void babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch("chats/update",{dialogId:babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e),fields:{lastId:a}})}return babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch("messages/readMessages",{chatId:e,messageIds:s})}function Je(e,s){const a=babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye](e);let t=a.counter-s;if(t<0){t=0}const r={[a.parentChatId]:{[e]:t}};return P.Core.getStore().dispatch("counters/setCommentCounters",r)}function Ge(e,s){const a=babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye](e);if(a.type===H.ChatType.comment){return babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne](e,s)}let t=a.counter-s;if(t<0){t=0}return babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch("chats/update",{dialogId:babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e),fields:{counter:t}})}function Ze(e,s){F.Logger.warn("ReadService: readMessages on server",s);return m.runAction(H.RestMethod.imV2ChatMessageRead,{data:{chatId:e,ids:s,actionUuid:n.UuidManager.getInstance().getActionUuid()}})}function es(e){if(!e){return}const{chatId:s,counter:a}=e;const t=babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye](s);if(t.counter>a){F.Logger.warn("ReadService: counter from server is lower than local one",t.counter,a);void babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].dispatch("chats/update",{dialogId:t.dialogId,fields:{counter:a}})}}function ss(e){const s=babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].getters["chats/getByChatId"](e);if(!s){return 0}return s.dialogId}function as(e){return babelHelpers.classPrivateFieldLooseBase(this,Te)[Te].getters["chats/getByChatId"](e)}var ts=babelHelpers.classPrivateFieldLooseKey("store");var rs=babelHelpers.classPrivateFieldLooseKey("restClient");var ls=babelHelpers.classPrivateFieldLooseKey("onChatLeave");class is{constructor(){Object.defineProperty(this,ls,{value:os});Object.defineProperty(this,ts,{writable:true,value:void 0});Object.defineProperty(this,rs,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ts)[ts]=P.Core.getStore();babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]=P.Core.getRestClient()}async leaveChat(e){const s={dialogId:e,userId:P.Core.getUserId()};try{await babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].callMethod(H.RestMethod.imV2ChatDeleteUser,s);babelHelpers.classPrivateFieldLooseBase(this,ls)[ls](e)}catch(e){console.error("UserService: leave chat error",e.error());u.Notifier.chat.handleLeaveError(e.error())}}async leaveCollab(e){const s={data:{dialogId:e}};try{await m.runAction(H.RestMethod.socialnetworkMemberLeave,s);babelHelpers.classPrivateFieldLooseBase(this,ls)[ls](e)}catch(e){console.error("UserService: leave collab error",e[0]);u.Notifier.collab.onLeaveError()}}async kickUserFromChat(e,s){const a={dialogId:e,userId:s};await babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].callMethod(H.RestMethod.imV2ChatDeleteUser,a).catch((e=>{console.error("UserService: error kicking from chat",e.error());u.Notifier.chat.handleUserKickError(e.error())}))}async kickUserFromCollab(e,s){const a=p.Utils.user.prepareSelectorIds(s);const t={data:{dialogId:e,members:a}};await m.runAction(H.RestMethod.socialnetworkMemberDelete,t).catch((([e])=>{console.error("UserService: error kicking from collab",e);u.Notifier.collab.onKickUserError()}))}addToChat(e){const s={chat_id:e.chatId,users:e.members,hide_history:!e.showHistory};return babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].callMethod(H.RestMethod.imChatUserAdd,s).catch((e=>{console.error("UserService: error adding to chat",e.error());throw e.error()}))}joinChat(e){F.Logger.warn(`UserService: join chat ${e}`);void babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].dispatch("chats/update",{dialogId:e,fields:{role:H.UserRole.member}});babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].callMethod(H.RestMethod.imV2ChatJoin,{dialogId:e}).catch((e=>{console.error("UserService: error joining chat",e.error())}))}addManager(e,s){F.Logger.warn(`UserService: add manager ${s} to ${e}`);const{managerList:a}=babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].getters["chats/get"](e);if(a.includes(s)){return}const t=[...a,s];void babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].dispatch("chats/update",{dialogId:e,fields:{managerList:t}});const r={data:{dialogId:e,userIds:[s]}};m.runAction(H.RestMethod.imV2ChatAddManagers,r).catch((([e])=>{console.error("UserService: add manager error",e)}))}removeManager(e,s){F.Logger.warn(`UserService: remove manager ${s} from ${e}`);const{managerList:a}=babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].getters["chats/get"](e);if(!a.includes(s)){return}const t=a.filter((e=>e!==s));void babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].dispatch("chats/update",{dialogId:e,fields:{managerList:t}});const r={data:{dialogId:e,userIds:[s]}};m.runAction(H.RestMethod.imV2ChatDeleteManagers,r).catch((([e])=>{console.error("UserService: remove manager error",e)}))}}function os(e){void babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].dispatch("chats/update",{dialogId:e,fields:{inited:false}});void babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].dispatch("recent/hide",{id:e});const s=babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].getters["application/isChatOpen"](e);if(s){g.LayoutManager.getInstance().clearCurrentLayoutEntityId();void g.LayoutManager.getInstance().deleteLastOpenedElementById(e)}}var ds=babelHelpers.classPrivateFieldLooseKey("store");var cs=babelHelpers.classPrivateFieldLooseKey("sendRequestDebounced");var ns=babelHelpers.classPrivateFieldLooseKey("sendRequest");var bs=babelHelpers.classPrivateFieldLooseKey("handleResponse");var hs=babelHelpers.classPrivateFieldLooseKey("getChatId");class vs{constructor(){Object.defineProperty(this,hs,{value:gs});Object.defineProperty(this,bs,{value:us});Object.defineProperty(this,ns,{value:ps});Object.defineProperty(this,ds,{writable:true,value:void 0});Object.defineProperty(this,cs,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]=P.Core.getStore();const e=500;babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]=L.Runtime.debounce(babelHelpers.classPrivateFieldLooseBase(this,ns)[ns],e)}setDelay(e,s){F.Logger.warn("MessagesAutoDeleteService: setDelay",e,s);const a=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs](e);const t=babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].getters["chats/autoDelete/getDelay"](a);if(t===s){return}void babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].dispatch("chats/autoDelete/set",{chatId:a,delay:s});babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]({dialogId:e,delay:s,previousDelay:t})}}async function ps(e){const{dialogId:s,delay:a,previousDelay:t}=e;try{const e=await m.runAction(H.RestMethod.imV2ChatSetMessagesAutoDeleteDelay,{data:{dialogId:s,hours:a}});babelHelpers.classPrivateFieldLooseBase(this,bs)[bs](a,e)}catch(e){console.error("MessagesAutoDeleteService: Error setting auto delete delay",e);void babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].dispatch("chats/autoDelete/set",{chatId:babelHelpers.classPrivateFieldLooseBase(this,hs)[hs](s),delay:t})}}function us(e,s){const[a]=s.messagesAutoDeleteConfigs;if(e!==a.delay&&a.delay===H.AutoDeleteDelay.Off){B.FeatureManager.messagesAutoDelete.openFeatureSlider()}void babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].dispatch("chats/autoDelete/set",{chatId:a.chatId,delay:a.delay})}function gs(e){return babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].getters["chats/get"](e).chatId}var Ls=babelHelpers.classPrivateFieldLooseKey("loadService");var Ps=babelHelpers.classPrivateFieldLooseKey("createService");var Fs=babelHelpers.classPrivateFieldLooseKey("updateService");var Hs=babelHelpers.classPrivateFieldLooseKey("renameService");var ms=babelHelpers.classPrivateFieldLooseKey("muteService");var Bs=babelHelpers.classPrivateFieldLooseKey("pinService");var Cs=babelHelpers.classPrivateFieldLooseKey("readService");var ys=babelHelpers.classPrivateFieldLooseKey("userService");var fs=babelHelpers.classPrivateFieldLooseKey("deleteService");var Ms=babelHelpers.classPrivateFieldLooseKey("messagesAutoDeleteService");var Is=babelHelpers.classPrivateFieldLooseKey("initServices");class ws{constructor(){Object.defineProperty(this,Is,{value:Ss});Object.defineProperty(this,Ls,{writable:true,value:void 0});Object.defineProperty(this,Ps,{writable:true,value:void 0});Object.defineProperty(this,Fs,{writable:true,value:void 0});Object.defineProperty(this,Hs,{writable:true,value:void 0});Object.defineProperty(this,ms,{writable:true,value:void 0});Object.defineProperty(this,Bs,{writable:true,value:void 0});Object.defineProperty(this,Cs,{writable:true,value:void 0});Object.defineProperty(this,ys,{writable:true,value:void 0});Object.defineProperty(this,fs,{writable:true,value:void 0});Object.defineProperty(this,Ms,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Is)[Is]()}loadChat(e){return babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].loadChat(e)}loadChatByChatId(e){return babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].loadChatByChatId(e)}loadChatWithMessages(e){return babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].loadChatWithMessages(e)}loadChatWithContext(e,s){return babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].loadChatWithContext(e,s)}loadComments(e){return babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].loadComments(e)}loadCommentInfo(e){return babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].loadCommentInfo(e)}prepareDialogId(e){return babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].prepareDialogId(e)}clearChat(e){return babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls].clearChat(e)}createChat(e){return babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].createChat(e)}createCollab(e){return babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].createCollab(e)}prepareAvatar(e){return babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs].prepareAvatar(e)}changeAvatar(e,s){return babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs].changeAvatar(e,s)}updateChat(e,s){return babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs].updateChat(e,s)}updateCollab(e,s){return babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs].updateCollab(e,s)}getMemberEntities(e){return babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs].getMemberEntities(e)}deleteChat(e){return babelHelpers.classPrivateFieldLooseBase(this,fs)[fs].deleteChat(e)}deleteCollab(e){return babelHelpers.classPrivateFieldLooseBase(this,fs)[fs].deleteCollab(e)}renameChat(e,s){return babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs].renameChat(e,s)}muteChat(e){babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].muteChat(e)}unmuteChat(e){babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].unmuteChat(e)}pinChat(e){babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs].pinChat(e)}unpinChat(e){babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs].unpinChat(e)}readAll(){babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].readAll()}readAllByType(e){babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].readAllByType(e)}readDialog(e){babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].readDialog(e)}unreadDialog(e){babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].unreadDialog(e)}readMessage(e,s){babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].readMessage(e,s)}readChatQueuedMessages(e){babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].readChatQueuedMessages(e)}clearDialogMark(e){babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].clearDialogMark(e)}leaveChat(e){babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].leaveChat(e)}leaveCollab(e){babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].leaveCollab(e)}kickUserFromChat(e,s){babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].kickUserFromChat(e,s)}kickUserFromCollab(e,s){babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].kickUserFromCollab(e,s)}addToChat(e){return babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].addToChat(e)}joinChat(e){babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].joinChat(e)}addManager(e,s){babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].addManager(e,s)}removeManager(e,s){babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].removeManager(e,s)}setMessagesAutoDeleteDelay(e,s){babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms].setDelay(e,s)}}function Ss(){babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]=new x;babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=new be;babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]=new He;babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]=new Me;babelHelpers.classPrivateFieldLooseBase(this,ms)[ms]=new Ae;babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]=new je;babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs]=new We;babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]=new is;babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]=new f;babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]=new vs}e.ChatService=ws})(this.BX.Messenger.v2.Service=this.BX.Messenger.v2.Service||{},BX?.OpenLines?.v2?.Lib??{},BX?.Call?.Lib??{},BX?.Messenger?.v2?.Lib??{},BX?.Messenger?.v2?.Service??{},BX?.Messenger?.v2?.Lib??{},BX?.Messenger?.v2?.Lib??{},BX?.Messenger?.v2?.Lib??{},BX?.UI?.Uploader??{},BX?.Messenger?.v2?.Lib??{},BX?.Messenger?.v2?.Lib??{},BX?.Messenger?.v2?.Lib??{},BX?.Vue3?.Vuex??{},BX??{},BX?.Messenger?.v2?.Lib??{},BX?.Messenger?.v2?.Lib??{},BX?.Messenger?.v2?.Lib??{},BX??{},BX?.Messenger?.v2?.Application??{},BX?.Messenger?.v2?.Lib??{},BX?.Messenger?.v2?.Const??{},BX?.Messenger?.v2?.Lib??{},BX?.Messenger?.v2?.Lib??{});
//# sourceMappingURL=chat.bundle.map.js