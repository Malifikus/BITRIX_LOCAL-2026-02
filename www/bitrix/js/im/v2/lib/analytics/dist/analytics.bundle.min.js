this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,a,s,o,i,c){"use strict";const n="notes";const r="chatType_aiAssistant";const l=Object.freeze({private:"chatType_private",multiuser:"chatType_multiuser"});const p=Object.freeze({openChat:"open_chat",createNewChat:"create_new_chat",audioUse:"audio_use",openTab:"open_tab",popupOpen:"popup_open",openPrices:"open_prices",openSettings:"open_settings",clickCreateNew:"click_create_new",openExisting:"open_existing",typeMessage:"type_message",pinChat:"pin_chat",clickDelete:"click_delete",clickShare:"click_share",cancelDelete:"cancel_delete",delete:"delete",view:"view",click:"click",clickEdit:"click_edit",submitEdit:"submit_edit",clickCallButton:"click_call_button",clickStartConf:"click_start_conf",clickJoin:"click_join",clickAddUser:"click_add_user",openCalendar:"open_calendar",openTasks:"open_tasks",openFiles:"open_files",clickCreatePoll:"click_create_poll",clickCreateTask:"click_create_task",clickCreateEvent:"click_create_event",clickAttach:"click_attach",downloadFile:"download_file",saveToDisk:"save_to_disk",pinMessage:"pin_message",unpinMessage:"unpin_message",pinnedMessageLimitException:"pinned_message_limit_exception",startSearch:"start_search",selectRecipient:"select_recipient",selectUser:"select_user",openCreateMenu:"open_create_menu",clickUpdate:"click_update",clickMoreInformation:"click_more_information",goToWeb:"go_to_web",copyMessage:"copy_message",clickReply:"click_reply",copyFile:"copy_file",copyLink:"copy_link",addToFav:"add_to_fav",seeLater:"see_later",select:"select",addFeedback:"add_feedback",viewPopup:"view_popup",selectAppMode:"select_app_mode",copyChatLink:"copy_chat_link",viewTranscription:"view_transcription",play:"play",pause:"pause",changeSpeed:"change_speed",askCopilot:"ask_copilot",modeOn:"mode_on",modeOff:"mode_off",clickMcpIntegrations:"click_mcp_integrations",notificationOpen:"notif_open",notificationUnsubscribe:"notif_unsubscribe"});const d=Object.freeze({ai:"ai",checkin:"checkin",im:"im",infoHelper:"InfoHelper",inform:"inform",notification:"notification"});const g=Object.freeze({chatOperations:"chat_operations",shift:"shift",messenger:"messenger",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",limit:"limit",limitBanner:"limit_banner",toolOff:"tool_off",message:"message",chatPopup:"chat_popup",call:"call",collab:"collab",updateAppPopup:"update_app_popup",audioMessage:"audiomessage",videoMessage:"videomessage",notificationOperations:"notif_ops"});const h=Object.freeze({ai:"ai",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",deletedMessage:"deleted_message",limitOfficeChatingHistory:"limit_office_chating_history",privateCall:"private",groupCall:"group",may25DesktopRelease:"may_25_desktop_release",selectAppMode:"select_app_mode",oneWindow:"single_window",aiAssistant:"aiAssistant",think:"think"});const y=Object.freeze({copilotTab:"copilot_tab",chat:"chat",chatStart:"chat_start",chatHistory:"chat_history",sidebar:"sidebar",popup:"popup",activeChat:"active_chat",comments:"comments",chatHeader:"chat_header",chatSidebar:"chat_sidebar",chatTextarea:"chat_textarea",editor:"editor",chatWindow:"chat_window",forward:"forward",userAdd:"user_add",chatCreateMenu:"chat_create_menu",chatEmptyState:"chat_empty_state",settings:"settings",miniChat:"mini_chat"});const b=Object.freeze({contextMenu:"context_menu",sidebar:"sidebar",chatWindow:"chat_window",messageLink:"message_link",chatSidebar:"chat_sidebar",chatList:"chat_list",window:"window",membersPanel:"user_list"});const u=Object.freeze({initialBanner:"initial_banner",videocall:"videocall",audiocall:"audiocall",startButton:"start_button",more:"more"});const v=Object.freeze({success:"success",errorTurnedOff:"error_turnedoff"});const _=Object.freeze({collabEmptyState:"collab_empty_state"});const C=Object.freeze({single:"single",multiple:"multiple",selected:"selected"});const m=Object.freeze({quickAccessLabel:"bell_button"});function f(e){const t=o.Core.getStore().getters["chats/collabs/getByChatId"](e);if(!t){return null}return`collabId_${t.collabId}`}const I=Object.freeze({userIntranet:"user_intranet",userExtranet:"user_extranet",userCollaber:"user_collaber"});function P(){const e=o.Core.getStore().getters["users/get"](o.Core.getUserId(),true);switch(e.type){case i.UserType.user:return I.userIntranet;case i.UserType.extranet:return I.userExtranet;case i.UserType.collaber:return I.userCollaber;default:return I.userIntranet}}function S(e){switch(e){case i.ChatType.channel:case i.ChatType.openChannel:case i.ChatType.comment:case i.ChatType.generalChannel:return g.channel;case i.ChatType.copilot:return g.copilot;case i.ChatType.videoconf:return g.videoconf;case i.ChatType.collab:return g.collab;default:return g.chat}}function k(e){return o.Core.getStore().getters["users/bots/isAiAssistant"](e)}function L(e){return o.Core.getStore().getters["chats/isNotes"](e)}const F="custom";const T="aiAssistant";function w(e){if(L(e.dialogId)){return n}if(k(e.dialogId)){return T}const t=Object.values(i.ChatType).includes(e.type);if(t){return e.type}return F}const B={[i.CollabEntityType.tasks]:p.openTasks,[i.CollabEntityType.calendar]:p.openCalendar,[i.CollabEntityType.files]:p.openFiles};class D{onClick(e,t){const a=B[t];if(!a){return}const s=o.Core.getStore().getters["chats/get"](e,true);const n={tool:d.im,category:g.collab,event:a,c_section:y.chatHeader,p2:P(),p5:`chatId_${s.chatId}`};if(s.type===i.ChatType.collab){n.p4=f(s.chatId)}c.sendData(n)}}var H=babelHelpers.classPrivateFieldLooseKey("onClick");class O{constructor(){Object.defineProperty(this,H,{value:$})}onCreateTaskFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,H)[H]({dialogId:e,event:p.clickCreateTask,section:y.chatSidebar})}onCreateTaskFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,H)[H]({dialogId:e,event:p.clickCreateTask,section:y.chatTextarea})}onCreateEventFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,H)[H]({dialogId:e,event:p.clickCreateEvent,section:y.chatSidebar})}onCreateEventFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,H)[H]({dialogId:e,event:p.clickCreateEvent,section:y.chatTextarea})}onCreateVoteFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,H)[H]({dialogId:e,event:p.clickCreatePoll,section:y.chatTextarea})}}function $({dialogId:e,event:t,section:a}){const s=o.Core.getStore().getters["chats/get"](e,true);const n={tool:d.im,category:S(s.type),event:t,c_section:a,p1:`chatType_${w(s)}`,p2:P(),p5:`chatId_${s.chatId}`};if(s.type===i.ChatType.collab){n.p4=f(s.chatId)}c.sendData(n)}class M{onClick(e){const t=o.Core.getStore().getters["chats/get"](e);c.sendData({tool:d.im,category:S(t.type),event:p.clickDelete,type:w(t),c_section:y.sidebar,c_sub_section:b.contextMenu,p1:`chatType_${t.type}`})}onCancel(e){const t=o.Core.getStore().getters["chats/get"](e);c.sendData({tool:d.im,category:S(t.type),event:p.cancelDelete,type:w(t),c_section:y.popup,p1:`chatType_${t.type}`})}onConfirm(e){const t=o.Core.getStore().getters["chats/get"](e);c.sendData({tool:d.im,category:S(t.type),event:p.delete,type:w(t),c_section:y.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onChatDeletedNotification(e){const t=o.Core.getStore().getters["chats/get"](e);const a=S(t);c.sendData({tool:d.im,category:g.chatPopup,event:p.view,type:`deleted_${a}`,c_section:y.activeChat,p1:`chatType_${t.type}`})}}class x{onNotFoundNotification({dialogId:e}){const t=o.Core.getStore().getters["chats/get"](e);if(!t){return}c.sendData({tool:d.im,category:g.chatPopup,event:p.view,type:h.deletedMessage,p1:`chatType_${t.type}`})}onDeletedPostNotification({dialogId:e}){const t=o.Core.getStore().getters["chats/get"](e);c.sendData({tool:d.im,category:g.chatPopup,event:p.view,type:h.deletedMessage,c_section:y.comments,p1:`chatType_${t.type}`,p4:`parentChatId_${t.chatId}`})}}var A=babelHelpers.classPrivateFieldLooseKey("onBannerClick");var j=babelHelpers.classPrivateFieldLooseKey("getSidebarPanelNameForAnalytics");class E{constructor(){Object.defineProperty(this,j,{value:W});Object.defineProperty(this,A,{value:U})}onDialogLimitExceeded({dialogId:e,noMessages:t}){const a=t?y.chatStart:y.chatHistory;const s=o.Core.getStore().getters["chats/get"](e);const i=w(s);const n={tool:d.im,category:g.limitBanner,event:p.view,type:h.limitOfficeChatingHistory,c_section:a,p1:`chatType_${i}`};c.sendData(n)}onSidebarLimitExceeded({dialogId:e,panel:t}){const a=o.Core.getStore().getters["chats/get"](e);const s=w(a);const i={tool:d.im,category:g.limitBanner,event:p.view,type:h.limitOfficeChatingHistory,c_section:y.sidebar,c_element:babelHelpers.classPrivateFieldLooseBase(this,j)[j](t),p1:`chatType_${s}`};c.sendData(i)}onDialogBannerClick({dialogId:e}){const t=y.chatWindow;babelHelpers.classPrivateFieldLooseBase(this,A)[A]({dialogId:e,section:t})}onSidebarBannerClick({dialogId:e,panel:t}){const a=y.sidebar;const s=babelHelpers.classPrivateFieldLooseBase(this,j)[j](t);babelHelpers.classPrivateFieldLooseBase(this,A)[A]({dialogId:e,section:a,element:s})}onGoToContextLimitExceeded({dialogId:e}){const t=y.messageLink;babelHelpers.classPrivateFieldLooseBase(this,A)[A]({dialogId:e,section:t})}}function U({dialogId:e,section:t,element:a}){const s=o.Core.getStore().getters["chats/get"](e);const i=w(s);const n={tool:d.im,category:g.limitBanner,event:p.click,type:h.limitOfficeChatingHistory,c_section:t,p1:`chatType_${i}`};if(a){n.c_element=a}c.sendData(n)}function W(e){switch(e){case i.SidebarDetailBlock.main:return"main";case i.SidebarDetailBlock.file:case i.SidebarDetailBlock.fileUnsorted:case i.SidebarDetailBlock.audio:case i.SidebarDetailBlock.brief:case i.SidebarDetailBlock.document:case i.SidebarDetailBlock.media:return"docs";case i.SidebarDetailBlock.messageSearch:return"message_search";case i.SidebarDetailBlock.favorite:return"favs";case i.SidebarDetailBlock.link:return"links";case i.SidebarDetailBlock.task:return"task";case i.SidebarDetailBlock.meeting:return"event";default:return"unknown"}}const R=Object.freeze({recent:"recent",searchResult:"search_result"});var K=babelHelpers.classPrivateFieldLooseKey("hasSearchedBefore");var N=babelHelpers.classPrivateFieldLooseKey("onSelectUser");var z=babelHelpers.classPrivateFieldLooseKey("onAddUserClick");class X{constructor(){Object.defineProperty(this,z,{value:q});Object.defineProperty(this,N,{value:V});Object.defineProperty(this,K,{writable:true,value:false})}onChatSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,z)[z](e,y.chatSidebar)}onChatHeaderClick(e){babelHelpers.classPrivateFieldLooseBase(this,z)[z](e,y.chatHeader)}onStartSearch({dialogId:e}){if(babelHelpers.classPrivateFieldLooseBase(this,K)[K]){return}babelHelpers.classPrivateFieldLooseBase(this,K)[K]=true;const t=o.Core.getStore().getters["chats/get"](e);c.sendData({tool:d.im,category:S(t.type),event:p.startSearch,c_section:y.userAdd,p1:`chatType_${t.type}`,p2:P()})}onClosePopup(){babelHelpers.classPrivateFieldLooseBase(this,K)[K]=false}onSelectUserFromRecent({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,N)[N]({dialogId:e,position:t,source:R.recent})}onSelectUserFromSearchResult({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,N)[N]({dialogId:e,position:t,source:R.searchResult})}}function V({dialogId:e,position:t,source:a}){const s=o.Core.getStore().getters["chats/get"](e,true);c.sendData({tool:d.im,category:S(s.type),event:p.selectUser,type:a,c_section:y.userAdd,p1:`chatType_${s.type}`,p2:P(),p3:`position_${t}`})}function q(e,t){const a=o.Core.getStore().getters["chats/get"](e,true);const s={tool:d.im,category:S(a.type),event:p.clickAddUser,c_section:t,p1:`chatType_${w(a)}`,p2:P(),p5:`chatId_${a.chatId}`};if(a.type===i.ChatType.collab){s.p4=f(a.chatId)}c.sendData(s)}class G{onOpenForm(e){const t=o.Core.getStore().getters["chats/get"](e);const a={tool:d.im,category:S(t.type),event:p.clickEdit,c_section:y.sidebar,c_sub_section:b.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`};if(t.type===i.ChatType.collab){a.p4=f(t.chatId)}c.sendData(a)}onSubmitForm(e){const t=o.Core.getStore().getters["chats/get"](e);const a={tool:d.im,category:S(t.type),c_section:y.editor,event:p.submitEdit,p1:`chatType_${t.type}`,p2:P(),p5:`chatId_${t.chatId}`};if(t.type===i.ChatType.collab){a.p4=f(t.chatId)}c.sendData(a)}}class J{onStartClick(e){const t=o.Core.getStore().getters["application/getLayout"].name;c.sendData({tool:d.im,category:S(e),event:p.clickCreateNew,type:e,c_section:`${t}_tab`,p2:P()})}onCollabEmptyStateCreateClick(){c.sendData({tool:d.im,category:S(i.ChatType.collab),event:p.clickCreateNew,type:i.ChatType.collab,c_section:_.collabEmptyState,p2:P()})}onMenuCreateClick(){const e=o.Core.getStore().getters["application/getLayout"].name;c.sendData({tool:d.im,category:g.messenger,event:p.openCreateMenu,c_section:`${e}_tab`})}}class Q{onOpenPriceTable(e){c.sendData({tool:d.infoHelper,category:g.limit,event:p.openPrices,type:e,c_section:y.chat})}onOpenToolsSettings(e){c.sendData({tool:d.infoHelper,category:g.toolOff,event:p.openSettings,type:e,c_section:y.chat})}}class Y{onOpenCheckInPopup(){c.sendData({event:p.popupOpen,tool:d.checkin,category:g.shift,c_section:y.chat})}}const Z=Object.freeze({create_menu:"create_menu",role_picker:"role_picker"});var ee=babelHelpers.classPrivateFieldLooseKey("sendDataForCopilotCreation");class te{constructor(){Object.defineProperty(this,ee,{value:ae})}onCreateChat(e){c.sendData({event:p.createNewChat,tool:d.ai,category:g.chatOperations,c_section:y.copilotTab,type:h.ai,p3:l.private,p5:`chatId_${e}`})}onCreateDefaultChatInRecent(){babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]({c_sub_section:Z.create_menu})}onSelectRoleInRecent(){babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]({c_sub_section:Z.role_picker})}onOpenChat(e){const t=o.Core.getStore().getters["chats/get"](e);const a=t.userCounter<=2?l.private:l.multiuser;c.sendData({event:p.openChat,tool:d.ai,category:g.chatOperations,c_section:y.copilotTab,type:h.ai,p3:a,p5:`chatId_${t.chatId}`})}onOpenTab({isAvailable:e=true}={}){const t={event:p.openTab,tool:d.ai,category:g.chatOperations,c_section:y.copilotTab,status:e?v.success:v.errorTurnedOff};c.sendData(t)}onUseAudioInput(e){var a;const s=o.Core.getStore().getters["chats/get"](e);const n=s.type===i.ChatType.copilot;if(!n){return}const r=o.Core.getStore().getters["application/getLayout"].name;const h=o.Core.getStore().getters["copilot/chats/getRole"](e);const y=o.Core.getStore().getters["copilot/chats/getAIModel"](e);const b=(a=y.name)!=null?a:y;const u=s.userCounter<=2?l.private:l.multiuser;c.sendData({event:p.audioUse,tool:d.ai,category:g.chatOperations,c_section:`${r}_tab`,p2:`provider_${b}`,p3:u,p4:`role_${t.Text.toCamelCase(h.code)}`,p5:`chatId_${s.chatId}`})}onToggleReasoning(e){var a;const s=o.Core.getStore().getters["copilot/chats/isReasoningEnabled"](e);const i=s?p.modeOn:p.modeOff;const n=o.Core.getStore().getters["chats/get"](e);const r=o.Core.getStore().getters["application/getLayout"].name;const l=o.Core.getStore().getters["copilot/chats/getRole"](e);const y=o.Core.getStore().getters["copilot/chats/getAIModel"](e);const b=(a=y.name)!=null?a:y;c.sendData({event:i,tool:d.im,category:g.copilot,type:h.think,c_section:`${r}_tab`,p1:w(n),p2:`provider_${b}`,p4:`role_${t.Text.toCamelCase(l.code)}`,p5:`chatId_${n.chatId}`})}}function ae(e){const t=o.Core.getStore().getters["application/getLayout"].name;c.sendData({event:p.clickCreateNew,tool:d.im,category:g.copilot,c_section:`${t}_tab`,type:h.copilot,...e})}class se{onOpenUploadMenu(e){const t=o.Core.getStore().getters["chats/get"](e);const a=w(t);const s={tool:d.im,category:S(t.type),event:p.clickAttach,c_section:y.chatTextarea,p1:`chatType_${a}`,p2:P(),p5:`chatId_${t.chatId}`};if(t.type===i.ChatType.collab){s.p4=f(t.chatId)}c.sendData(s)}}class oe{getSerializedParams(e){const t=this.getAnalyticsOptions(e);const a=Object.entries(t).map((([e,t])=>`st[${e}]=${encodeURIComponent(t)}`));return a.join("&")}getAnalyticsOptions(e){const t=o.Core.getStore().getters["chats/get"](e,true);const a=t.type;const s={tool:d.im,event:p.clickCreatePoll,category:S(a),p1:`chatType_${a}`,p2:P(),p5:`chatId_${t.chatId}`};if(a===i.ChatType.comment){const e=o.Core.getStore().getters["chats/getByChatId"](t.parentChatId);s.p1=`chatType_${e.type}`;s.p4=`parentChatId_${t.parentChatId}`}if(a===i.ChatType.collab){s.p4=f(t.chatId)}return s}}var ie=babelHelpers.classPrivateFieldLooseKey("getEventSpecificParams");class ce{constructor(){Object.defineProperty(this,ie,{value:ne})}onUnpin({dialogId:e,eventParams:t={}}){this.onSendData({dialogId:e,eventParams:{event:p.unpinMessage,...t}})}onSendData({dialogId:e,eventParams:t}){const a=o.Core.getStore().getters["chats/get"](e,true);const s={tool:d.im,category:S(a.type),p1:`chatType_${w(a)}`,...babelHelpers.classPrivateFieldLooseBase(this,ie)[ie](t.event,a.chatId),...t};c.sendData(s)}}function ne(e,t){const a=o.Core.getStore().getters["messages/pin/getPinned"](t).length;if(e===p.pinMessage){return{p3:`pinnedCount_${a}`,type:a>1?C.multiple:C.single}}if(e===p.unpinMessage){return{type:a>0?C.selected:C.single}}return{}}const re=Object.freeze({recent:"recent",searchResult:"search_result",notes:"notes"});var le=babelHelpers.classPrivateFieldLooseKey("hasSearchedBefore");var pe=babelHelpers.classPrivateFieldLooseKey("onSelectRecipient");class de{constructor(){Object.defineProperty(this,pe,{value:ge});Object.defineProperty(this,le,{writable:true,value:false})}onClickForward(e){const t=o.Core.getStore().getters["chats/get"](e);c.sendData({tool:d.im,category:S(t.type),event:p.clickShare,c_section:y.chatWindow,c_sub_section:b.contextMenu,p1:`chatType_${w(t)}`,p2:a.getUserType()})}onStartSearch({dialogId:e}){if(babelHelpers.classPrivateFieldLooseBase(this,le)[le]){return}babelHelpers.classPrivateFieldLooseBase(this,le)[le]=true;const t=o.Core.getStore().getters["chats/get"](e);c.sendData({tool:d.im,category:S(t.type),event:p.startSearch,c_section:y.forward,p1:`chatType_${w(t)}`,p2:a.getUserType()})}onSelectRecipientFromRecent({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]({dialogId:e,position:t,source:re.recent})}onSelectRecipientFromSearchResult({dialogId:e,position:t}){babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]({dialogId:e,position:t,source:re.searchResult})}onClosePopup(){babelHelpers.classPrivateFieldLooseBase(this,le)[le]=false}}function ge({dialogId:e,position:t,source:s}){const i=o.Core.getStore().getters["chats/get"](e);const n=L(e)?re.notes:s;c.sendData({tool:d.im,category:S(i.type),event:p.selectRecipient,type:n,c_section:y.forward,p1:`chatType_${w(i)}`,p2:a.getUserType(),p3:`position_${t}`})}const he={single:"files_single",many:"files_all"};const ye={...i.FileType,media:"media",any:"any"};var be=babelHelpers.classPrivateFieldLooseKey("onCopyTextCopilot");var ue=babelHelpers.classPrivateFieldLooseKey("getFilesAmountParam");var ve=babelHelpers.classPrivateFieldLooseKey("getAnalyticsFileType");var _e=babelHelpers.classPrivateFieldLooseKey("getBaseParams");class Ce{constructor(){Object.defineProperty(this,_e,{value:Pe});Object.defineProperty(this,ve,{value:Ie});Object.defineProperty(this,ue,{value:fe});Object.defineProperty(this,be,{value:me});this.messageForward=new de;this.messagePins=new ce}onSendFeedback(e){var a;const s=o.Core.getStore().getters["application/getLayout"].name;const i=o.Core.getStore().getters["copilot/chats/getRole"](e);const n=o.Core.getStore().getters["copilot/chats/getAIModel"](e);const r=(a=n.name)!=null?a:n;c.sendData({category:g.copilot,event:p.addFeedback,c_section:`${s}_tab`,p2:`provider_${r}`,p4:`role_${t.Text.toCamelCase(i.code)}`,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onDelete({messageId:e,dialogId:t}){const a=o.Core.getStore().getters["messages/getById"](e);const i=new s.MessageComponentManager(a).getName();c.sendData({category:g.message,event:p.clickDelete,type:i,c_section:y.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](t)})}onCancelDelete({messageId:e,dialogId:t}){const a=o.Core.getStore().getters["messages/getById"](e);const i=new s.MessageComponentManager(a).getName();c.sendData({category:g.message,event:p.cancelDelete,type:i,c_section:y.popup,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](t)})}onFileDownload({messageId:e,dialogId:t}){const s=o.Core.getStore().getters["chats/get"](t);const n={category:S(s.type),event:p.downloadFile,type:babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e),c_section:y.chatWindow,p2:a.getUserType(),p3:babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e),p5:`chatId_${s.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](t)};if(s.type===i.ChatType.collab){n.p4=a.getCollabId(s.chatId)}c.sendData(n)}onSaveOnDisk({messageId:e,dialogId:t}){const s=o.Core.getStore().getters["chats/get"](t);const n={category:S(s.type),event:p.saveToDisk,type:babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e),c_section:y.chatWindow,c_element:u.more,p2:a.getUserType(),p3:babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e),p5:`chatId_${s.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](t)};if(s.type===i.ChatType.collab){n.p4=a.getCollabId(s.chatId)}c.sendData(n)}onCopyLink(e){const t=o.Core.getStore().getters["chats/get"](e,true);c.sendData({category:S(t.type),event:p.copyLink,c_section:y.chatWindow,c_element:u.more,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onCopyFile({dialogId:e,fileId:t}){const a=o.Core.getStore().getters["chats/get"](e,true);const s=o.Core.getStore().getters["files/get"](t);c.sendData({category:S(a.type),event:p.copyFile,type:s.type,c_section:y.chatWindow,c_element:u.more,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onEdit(e){const t=o.Core.getStore().getters["chats/get"](e,true);c.sendData({category:S(t.type),event:p.clickEdit,c_section:y.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onCreateTask(e){const t=o.Core.getStore().getters["chats/get"](e,true);c.sendData({category:S(t.type),event:p.clickCreateTask,c_section:y.chatWindow,c_element:u.more,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onSelect(e){const t=o.Core.getStore().getters["chats/get"](e,true);c.sendData({category:S(t.type),event:p.select,c_section:y.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onMark(e){const t=o.Core.getStore().getters["chats/get"](e,true);c.sendData({category:S(t.type),event:p.seeLater,c_section:y.chatWindow,c_element:u.more,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onReply(e){const t=o.Core.getStore().getters["chats/get"](e,true);c.sendData({category:S(t.type),event:p.clickReply,c_section:y.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onAddFavorite({dialogId:e,messageId:t}){const a=o.Core.getStore().getters["chats/get"](e,true);const i=o.Core.getStore().getters["messages/getById"](t);const n=new s.MessageComponentManager(i).getName();c.sendData({category:S(a.type),event:p.addToFav,type:n,c_section:y.chatWindow,c_element:u.more,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onCreateEvent(e){const t=o.Core.getStore().getters["chats/get"](e,true);c.sendData({category:S(t.type),event:p.clickCreateEvent,c_section:y.chatWindow,c_element:u.more,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onCopyText({dialogId:e,messageId:t}){const a=o.Core.getStore().getters["chats/get"](e,true);const n=o.Core.getStore().getters["messages/getById"](t);const r=new s.MessageComponentManager(n).getName();if(a.type===i.ChatType.copilot){babelHelpers.classPrivateFieldLooseBase(this,be)[be]({dialogId:e,messageId:t});return}c.sendData({category:S(a.type),event:p.copyMessage,type:r,c_section:y.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}onPin(e){this.messagePins.onSendData({dialogId:e,eventParams:{event:p.pinMessage,c_section:y.chatWindow}})}onReachingPinsLimit(e){this.messagePins.onSendData({dialogId:e,eventParams:{event:p.pinnedMessageLimitException,c_section:y.chatWindow}})}onUnpin(e){this.messagePins.onUnpin({dialogId:e,eventParams:{c_section:y.chatWindow}})}onForward(e){this.messageForward.onClickForward(e)}onAskCopilot(e){const t=o.Core.getStore().getters["chats/get"](e,true);c.sendData({category:S(t.type),event:p.askCopilot,c_section:y.chatWindow,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}}function me({dialogId:e,messageId:a}){var i;const n=o.Core.getStore().getters["copilot/chats/getAIModel"](e);const r=o.Core.getStore().getters["application/getLayout"].name;const l=o.Core.getStore().getters["chats/get"](e,true);const d=o.Core.getStore().getters["messages/getById"](a);const h=o.Core.getStore().getters["copilot/chats/getRole"](e);const y=new s.MessageComponentManager(d).getName();const b=(i=n.name)!=null?i:n;c.sendData({category:g.copilot,event:p.copyMessage,type:y,c_section:`${r}_tab`,p2:`provider_${b}`,p4:`role_${t.Text.toCamelCase(h.code)}`,p5:`chatId_${l.chatId}`,...babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e)})}function fe(e){const t=o.Core.getStore().getters["messages/getById"](e);if(t.files.length===1){return he.single}return he.many}function Ie(e){const t=o.Core.getStore().getters["messages/getById"](e);const a=t.files.map((e=>o.Core.getStore().getters["files/get"](e).type));const s=[...new Set(a)];if(s.length===1){return s[0]}if(s.length===2&&s.includes(i.FileType.image)&&s.includes(i.FileType.video)){return ye.media}return ye.any}function Pe(e){const t=o.Core.getStore().getters["chats/get"](e,true);return{tool:d.im,c_sub_section:b.contextMenu,p1:`chatType_${w(t)}`}}class Se{getEmptyStateContext(){return y.chatEmptyState}getRecentCreateMenuContext(){return y.chatCreateMenu}}class ke{onPin(e){if(!L(e)){return}const t=o.Core.getStore().getters["chats/get"](e);const a={tool:d.im,category:S(t.type),event:p.pinChat,p1:w(t)};c.sendData(a)}}var Le=babelHelpers.classPrivateFieldLooseKey("buildModeEnableData");class Fe{constructor(){Object.defineProperty(this,Le,{value:Te})}onBannerShow(){c.sendData({tool:d.im,category:g.messenger,event:p.viewPopup,type:h.selectAppMode})}onBannerOneWindowEnable(){c.sendData(babelHelpers.classPrivateFieldLooseBase(this,Le)[Le](h.oneWindow,y.popup))}onBannerTwoWindowEnable(){c.sendData(babelHelpers.classPrivateFieldLooseBase(this,Le)[Le](h.twoWindow,y.popup))}onSettingsOneWindowEnable(){c.sendData(babelHelpers.classPrivateFieldLooseBase(this,Le)[Le](h.oneWindow,y.settings))}onSettingsTwoWindowEnable(){c.sendData(babelHelpers.classPrivateFieldLooseBase(this,Le)[Le](h.twoWindow,y.settings))}}function Te(e,t){return{tool:d.im,category:g.messenger,event:p.selectAppMode,type:e,c_section:t}}var we=babelHelpers.classPrivateFieldLooseKey("buildAnalyticsData");class Be{constructor(){Object.defineProperty(this,we,{value:De})}onCopyMembersPanel(e){c.sendData(babelHelpers.classPrivateFieldLooseBase(this,we)[we](e,b.membersPanel))}onCopyContextMenu(e){c.sendData(babelHelpers.classPrivateFieldLooseBase(this,we)[we](e,b.contextMenu))}}function De(e,t){const a=o.Core.getStore().getters["chats/get"](e);return{tool:d.im,category:S(a.type),event:p.copyChatLink,c_section:y.sidebar,c_sub_section:t}}class He{onOpenWidget(e){const t=w(e);c.sendData({tool:d.im,category:S(t),event:p.openExisting,type:t,c_section:y.miniChat,p2:P(),p5:`chatId_${e.chatId}`})}onOpenChatAI(e,t=false){const a=o.Core.getStore().getters["application/getLayout"].name;c.sendData({tool:d.ai,category:g.chatOperations,event:p.openChat,type:r,c_section:t?y.miniChat:`${a}_tab`,p2:P(),p3:`chatType_${w(e)}`,p5:`chatId_${e.chatId}`})}onUseAudioInput(e){const t=o.Core.getStore().getters["chats/get"](e);const a=o.Core.getStore().getters["application/getLayout"].name;if(!k(t.dialogId)){return}c.sendData({event:p.audioUse,tool:d.ai,category:g.chatOperations,c_section:`${a}_tab`,p3:r,p5:`chatId_${t.chatId}`})}onMcpIntegrationClick(){c.sendData({tool:d.im,category:g.chat,event:p.clickMcpIntegrations,c_section:y.chatTextarea,p1:r})}}var Oe=babelHelpers.classPrivateFieldLooseKey("getTypeByChatId");var $e=babelHelpers.classPrivateFieldLooseKey("getCategoryByFileType");class Me{constructor(){Object.defineProperty(this,$e,{value:Ae});Object.defineProperty(this,Oe,{value:xe})}onViewTranscription(e,t){const a=o.Core.getStore().getters["files/get"](e);const s=babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe](a.chatId);const i=babelHelpers.classPrivateFieldLooseBase(this,$e)[$e](a);const n=t.toLowerCase();c.sendData({tool:d.im,category:i,event:p.viewTranscription,status:n,p1:`chatType_${s}`})}onPlay(e){const t=o.Core.getStore().getters["files/get"](e);const a=babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe](t.chatId);const s=babelHelpers.classPrivateFieldLooseBase(this,$e)[$e](t);c.sendData({tool:d.im,category:s,event:p.play,p1:`chatType_${a}`})}onPause(e){const t=o.Core.getStore().getters["files/get"](e);const a=babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe](t.chatId);const s=babelHelpers.classPrivateFieldLooseBase(this,$e)[$e](t);c.sendData({tool:d.im,category:s,event:p.pause,p1:`chatType_${a}`})}onChangeRate(e,t){const a=babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe](e);c.sendData({tool:d.im,category:g.audioMessage,event:p.changeSpeed,p1:`chatType_${a}`,p2:`speed_${t}`})}}function xe(e){const t=o.Core.getStore().getters["chats/getByChatId"](e);return w(t)}function Ae(e){if(e.isVideoNote){return g.videoMessage}return g.audioMessage}class je{onOpenFromQuickAccessPanel(){c.sendData({tool:d.notification,category:g.notificationOperations,event:p.notificationOpen,c_element:m.quickAccessLabel})}onUnsubscribeFromNotification(e){c.sendData({tool:d.notification,category:g.notificationOperations,event:p.notificationUnsubscribe,p1:e.moduleId,p2:e.optionName})}}var Ee=babelHelpers.classPrivateFieldLooseKey("excludedChats");var Ue=babelHelpers.classPrivateFieldLooseKey("chatsWithTyping");var We=babelHelpers.classPrivateFieldLooseKey("currentTab");var Re=babelHelpers.classPrivateFieldLooseKey("instance");class Ke{constructor(){Object.defineProperty(this,Ee,{writable:true,value:new Set});Object.defineProperty(this,Ue,{writable:true,value:new Set});Object.defineProperty(this,We,{writable:true,value:i.Layout.chat});this.chatCreate=new J;this.chatEdit=new G;this.chatDelete=new M;this.messageDelete=new x;this.historyLimit=new E;this.userAdd=new X;this.collabEntities=new D;this.chatEntities=new O;this.supervisor=new Q;this.checkIn=new Y;this.copilot=new te;this.attachMenu=new se;this.vote=new oe;this.messagePins=new ce;this.messageForward=new de;this.messageContextMenu=new Ce;this.sliderInvite=new Se;this.chatPins=new ke;this.desktopMode=new Fe;this.chatInviteLink=new Be;this.aiAssistant=new He;this.player=new Me;this.notification=new je}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]){babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]=new this}return babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]}ignoreNextChatOpen(e){babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee].add(e)}onOpenTab(e){const t=[i.Layout.copilot,i.Layout.collab,i.Layout.channel,i.Layout.notification,i.Layout.settings,i.Layout.openlines,i.Layout.taskComments];if(!t.includes(e)){return}if(babelHelpers.classPrivateFieldLooseBase(this,We)[We]===e){return}babelHelpers.classPrivateFieldLooseBase(this,We)[We]=e;c.sendData({event:p.openTab,tool:d.im,category:g.messenger,type:e,p2:P()})}onOpenChat(e){if(babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee].has(e.dialogId)){babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee].delete(e.dialogId);return}babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue].delete(e.dialogId);const a=w(e);if(a===i.ChatType.copilot){this.copilot.onOpenChat(e.dialogId)}if(k(e.dialogId)){this.aiAssistant.onOpenChatAI(e)}const s=o.Core.getStore().getters["application/getLayout"].name;const n=e.role===i.UserRole.guest?"N":"Y";const r={tool:d.im,category:S(a),event:p.openExisting,type:a,c_section:`${s}_tab`,p2:P()};if(!L(e.dialogId)){r.p5=`chatId_${e.chatId}`}if(a===i.ChatType.comment){const t=o.Core.getStore().getters["chats/getByChatId"](e.parentChatId);r.p1=`chatType_${t.type}`;r.p4=`parentChatId_${e.parentChatId}`}if(a===i.ChatType.collab){r.p4=f(e.chatId)}if(a!==i.ChatType.copilot){r.p3=`isMember_${n}`}if(a===i.ChatType.copilot){const a=o.Core.getStore().getters["copilot/chats/getRole"](e.dialogId);r.p4=`role_${t.Text.toCamelCase(a.code)}`}c.sendData(r)}onTypeMessage(e){if(!L(e.dialogId)||babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue].has(e.dialogId)){return}babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue].add(e.dialogId);const t=w(e);const a={tool:d.im,category:S(t),event:p.typeMessage,p1:`chatType_${t}`};c.sendData(a)}}Object.defineProperty(Ke,Re,{writable:true,value:void 0});e.Analytics=Ke;e.CreateChatContext=_;e.getCollabId=f;e.getUserType=P})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX.Messenger.v2.Const,BX.UI.Analytics);
//# sourceMappingURL=analytics.bundle.map.js