{"version":3,"file":"desktop-api.bundle.js","sources":["../src/functions/lifecycle.js","../src/features.js","../src/functions/account.js","../src/functions/version.js","../src/functions/event.js","../src/functions/settings.js","../src/functions/window.js","../src/functions/icon.js","../src/functions/common.js","../src/functions/legacy.js","../src/functions/notifications.js","../src/functions/logger.js","../src/functions/call/mask.js","../src/functions/call/background.js","../src/functions/disk.js","../src/functions/debug.js","../src/functions/media-compressor.js","../src/desktop-api.js"],"sourcesContent":["import { Type } from 'main.core';\nexport const lifecycleFunctions = {\n\tisDesktop(): boolean\n\t{\n\t\treturn Type.isObject(window.BXDesktopSystem);\n\t},\n\trestart()\n\t{\n\t\tif (this.getApiVersion() < 74)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBXDesktopSystem?.Restart();\n\t},\n\tshutdown()\n\t{\n\t\tBXDesktopSystem?.Shutdown();\n\t},\n};\n","export const DesktopFeature = {\n\tmask: {\n\t\tid: 'mask',\n\t\tversion: 72,\n\t},\n\trestart: {\n\t\tid: 'restart',\n\t\tversion: 74,\n\t},\n\taccountManagement: {\n\t\tid: 'accountManagement',\n\t\tversion: 75,\n\t},\n\topenNewTab: {\n\t\tid: 'openNewTab',\n\t\tversion: 76,\n\t},\n\topenPage: {\n\t\tid: 'openPage',\n\t\tversion: 79,\n\t},\n\tportalTabActivation: {\n\t\tid: 'portalTabActivation',\n\t\tversion: 85,\n\t},\n};\n","/* eslint-disable no-undef */\nimport { ajax as Ajax } from 'main.core';\n\nimport { RestMethod } from 'im.v2.const';\n\nimport { lifecycleFunctions } from './lifecycle';\n\nimport type { DesktopAccount } from '../types/account';\n\nexport const accountFunctions = {\n\topenAddAccountTab()\n\t{\n\t\tBXDesktopSystem?.AccountAddForm();\n\t},\n\tdeleteAccount(host: string, login: string)\n\t{\n\t\tBXDesktopSystem?.AccountDelete(host, login);\n\t},\n\tconnectAccount(host: string, login: string, protocol: string, userLang: string)\n\t{\n\t\tBXDesktopSystem?.AccountConnect(host, login, protocol, userLang);\n\t},\n\tdisconnectAccount(host: string)\n\t{\n\t\tBXDesktopSystem?.AccountDisconnect(host);\n\t},\n\tgetAccountList(): DesktopAccount[]\n\t{\n\t\treturn BXDesktopSystem?.AccountList();\n\t},\n\tgetLogin(): string\n\t{\n\t\treturn BXDesktopWindow.GetBDiskLogin();\n\t},\n\tlogin(): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBXDesktopSystem?.Login({\n\t\t\t\t// there is no fail callback. If it fails, desktop will show login form\n\t\t\t\tsuccess: () => resolve(),\n\t\t\t});\n\t\t});\n\t},\n\tasync logout(): Promise\n\t{\n\t\ttry\n\t\t{\n\t\t\tawait Ajax.runAction(RestMethod.imV2DesktopLogout);\n\t\t\tBXDesktopSystem?.Logout(2);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('DesktopApi logout error', error);\n\t\t\tBXDesktopSystem?.Logout(3);\n\t\t}\n\t},\n\tasync terminate(): Promise\n\t{\n\t\ttry\n\t\t{\n\t\t\tawait Ajax.runAction(RestMethod.imV2DesktopLogout);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tlifecycleFunctions.shutdown();\n\t\t}\n\t},\n};\n","import { Browser } from 'main.core';\n\nimport { DesktopFeature } from '../features';\nimport { accountFunctions } from './account';\n\ntype DesktopFeatureItem = $Keys<typeof DesktopFeature>;\n\nexport const versionFunctions = {\n\tgetMajorVersion(): number\n\t{\n\t\tif (!this.isDesktop())\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst [majorVersion] = window.BXDesktopSystem.GetProperty('versionParts');\n\n\t\treturn majorVersion;\n\t},\n\tgetApiVersion(): number\n\t{\n\t\tif (!this.isDesktop())\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tconst [majorVersion, minorVersion, buildVersion, apiVersion] = window.BXDesktopSystem.GetProperty('versionParts');\n\n\t\treturn apiVersion;\n\t},\n\tgetBackendRevision(): number\n\t{\n\t\tconst rawRevision = BXDesktopSystem.GetBackendRevision(location.hostname, accountFunctions.getLogin());\n\n\t\treturn Number(rawRevision);\n\t},\n\tsetBackendRevision(revision: number): void\n\t{\n\t\tBXDesktopSystem.SetBackendRevision(location.hostname, accountFunctions.getLogin(), revision);\n\t},\n\tisFeatureEnabled(code: string): boolean\n\t{\n\t\treturn Boolean(window.BXDesktopSystem?.FeatureEnabled(code));\n\t},\n\tisFeatureSupported(code: DesktopFeatureItem): boolean\n\t{\n\t\treturn this.isFeatureSupportedInVersion(this.getApiVersion(), code);\n\t},\n\tisFeatureSupportedInVersion(version: number, code: DesktopFeatureItem): boolean\n\t{\n\t\tif (!DesktopFeature[code])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn version >= DesktopFeature[code].version;\n\t},\n\t/**\n\t  * Returns the Windows OS build number.\n\t  * Returns 0 if the OS is not Windows or if the function does not exist.\n\t  * For a list of Windows build numbers, see: https://en.wikipedia.org/wiki/List_of_Microsoft_Windows_versions\n\t  */\n\tgetWindowsOSBuild(): number\n\t{\n\t\tif (!Browser.isWin())\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn window.BXDesktopSystem?.UserOsBuild() ?? 0;\n\t},\n};\n","import { Event, Type } from 'main.core';\n\nconst eventHandlers = {};\n\nexport const eventFunctions = {\n\tsubscribe(eventName: string, handler: Function)\n\t{\n\t\tif (!this.isDesktop())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst preparedHandler = (event) => {\n\t\t\tconst params = event.detail ?? [];\n\t\t\thandler.apply(window, params);\n\t\t};\n\n\t\tif (!eventHandlers[eventName])\n\t\t{\n\t\t\teventHandlers[eventName] = [];\n\t\t}\n\t\teventHandlers[eventName].push(preparedHandler);\n\n\t\tEvent.bind(window, eventName, preparedHandler);\n\t},\n\tunsubscribe(eventName: string, handler: Function)\n\t{\n\t\tif (!Type.isFunction(handler))\n\t\t{\n\t\t\tif (!Type.isArrayFilled(eventHandlers[eventName]))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\teventHandlers[eventName].forEach((eventHandler) => {\n\t\t\t\tEvent.unbind(window, eventName, eventHandler);\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.unbind(window, eventName, handler);\n\t},\n\temit(eventName: string, params: any[] = [])\n\t{\n\t\tconst mainWindow = opener || top;\n\t\tconst allWindows: Object[] = mainWindow.BXWindows;\n\t\tallWindows.forEach((window) => {\n\t\t\tif (!window || window.name === '')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twindow?.BXDesktopWindow?.DispatchCustomEvent(eventName, params);\n\t\t});\n\n\t\tthis.emitToMainWindow(eventName, params);\n\t},\n\temitToMainWindow(eventName: string, params: any[] = [])\n\t{\n\t\tconst mainWindow = opener || top;\n\t\tmainWindow.BXDesktopSystem?.GetMainWindow()?.DispatchCustomEvent(eventName, params);\n\t},\n};\n","export const DesktopSettingsKey = {\n\thideImTab: 'bxd_hide_im_tab',\n\tsmoothing: 'bxd_camera_smoothing',\n\tsmoothing_v2: 'bxd_camera_smoothing_v2',\n\tsliderBindingsStatus: 'sliderBindingsStatus',\n};\n\nexport const settingsFunctions = {\n\tgetSliderBindingsStatus(): boolean\n\t{\n\t\tconst result = this.getCustomSetting(DesktopSettingsKey.sliderBindingsStatus, '1');\n\n\t\treturn result === '1';\n\t},\n\tgetCameraSmoothingStatus(): boolean\n\t{\n\t\treturn this.getCustomSetting(DesktopSettingsKey.smoothing, '0') === '1';\n\t},\n\tsetCameraSmoothingStatus(status: boolean)\n\t{\n\t\tconst preparedStatus = status === true ? '1' : '0';\n\n\t\tif (this.getApiVersion() > 76)\n\t\t{\n\t\t\tthis.setCustomSetting(DesktopSettingsKey.smoothing_v2, preparedStatus);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setCustomSetting(DesktopSettingsKey.smoothing, preparedStatus);\n\t},\n\tisTwoWindowMode(): boolean\n\t{\n\t\treturn Boolean(BXDesktopSystem?.IsTwoWindowsMode());\n\t},\n\tsetTwoWindowMode(flag: boolean)\n\t{\n\t\tif (flag === true)\n\t\t{\n\t\t\tBXDesktopSystem?.V10();\n\n\t\t\treturn;\n\t\t}\n\n\t\tBXDesktopSystem?.V8();\n\t},\n\tgetAutostartStatus(): boolean\n\t{\n\t\treturn BXDesktopSystem?.GetProperty('autostart');\n\t},\n\tsetAutostartStatus(flag: boolean)\n\t{\n\t\tBXDesktopSystem?.SetProperty('autostart', flag);\n\t},\n\tsetCustomSetting(name: string, value: string)\n\t{\n\t\tBXDesktopSystem?.StoreSettings(name, value);\n\t},\n\tgetCustomSetting(name: string, defaultValue: string): string\n\t{\n\t\treturn BXDesktopSystem?.QuerySettings(name, defaultValue);\n\t},\n};\n","import { Dom, Event, Extension, Type } from 'main.core';\n\nimport { Path, WINDOW_ACTIVATION_DELAY } from 'im.v2.const';\nimport { Utils } from 'im.v2.lib.utils';\n\nimport { settingsFunctions } from './settings';\n\ntype TabsList = {\n\turl: string,\n\theight: number,\n\twidth: number,\n\tid: string,\n\tinMainWindow: boolean,\n\tpopup: boolean,\n\twindowClass: string\n}\n\n/* eslint-disable no-undef */\nexport const windowFunctions = {\n\twait(ms: number): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(resolve, ms);\n\t\t});\n\t},\n\tasync handlePortalTabActivation(): Promise\n\t{\n\t\tconst hasActiveTab = await this.hasActivePortalTab();\n\n\t\tif (hasActiveTab)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tthis.activatePortalFirstTab();\n\n\t\treturn Promise.resolve();\n\t},\n\tactivatePortalFirstTab()\n\t{\n\t\tBXDesktopSystem.ActivateFirstTab();\n\t},\n\thasActivePortalTab(): Promise\n\t{\n\t\treturn BXDesktopSystem.HasActiveTab();\n\t},\n\tasync setTabWithChatPageActive(): Promise<void>\n\t{\n\t\tthis.setActiveTabUrl(`${location.origin}${Path.online}`);\n\t\tawait this.wait(WINDOW_ACTIVATION_DELAY);\n\t},\n\tshouldActivateTabWithChatPage(): boolean\n\t{\n\t\tconst tabsList = this.getTabsList();\n\n\t\tconst tabsWithChatPage = tabsList.filter((tab) => tab.url.includes(Path.online));\n\n\t\tconst hasTabsWithVisibleChatPage = tabsWithChatPage.some((tab) => tab.visible);\n\n\t\treturn tabsWithChatPage.length > 0 && !hasTabsWithVisibleChatPage;\n\t},\n\tgetTabsList(): TabsList[]\n\t{\n\t\treturn BXDesktopSystem.BrowserList();\n\t},\n\tisTwoWindowMode(): boolean\n\t{\n\t\treturn Boolean(BXDesktopSystem?.IsTwoWindowsMode());\n\t},\n\tisChatWindow(): boolean\n\t{\n\t\tconst settings = Extension.getSettings('im.v2.lib.desktop-api');\n\n\t\treturn this.isDesktop() && settings.get('isChatWindow');\n\t},\n\tisChatTab(): boolean\n\t{\n\t\tif (this.isChatWindow())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.isDesktop() && location.href.includes('&IM_TAB=Y');\n\t},\n\tisActiveTab(): boolean\n\t{\n\t\treturn this.isDesktop() && BXDesktopSystem.IsActiveTab();\n\t},\n\tsetActiveTab(target = window)\n\t{\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\ttarget.BXDesktopSystem?.SetActiveTab();\n\t},\n\tsetActiveTabUrl(url: string)\n\t{\n\t\tBXDesktopSystem.SetActiveTabUrl(url);\n\t},\n\tasync showBrowserWindow()\n\t{\n\t\tBXDesktopWindow.ExecuteCommand('show.main');\n\t\tawait this.wait(WINDOW_ACTIVATION_DELAY);\n\t},\n\tshowWindow(target = window)\n\t{\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\ttarget.BXDesktopWindow?.ExecuteCommand('show');\n\t},\n\tactivateWindow(target = window)\n\t{\n\t\tthis.setActiveTab(target);\n\t\tthis.showWindow(target);\n\t},\n\thideWindow(target = window)\n\t{\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\ttarget.BXDesktopWindow?.ExecuteCommand('hide');\n\t},\n\tcloseWindow(target = window)\n\t{\n\t\tif (!Type.isObject(target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\ttarget.BXDesktopWindow?.ExecuteCommand('close');\n\t},\n\thideLoader()\n\t{\n\t\tDom.remove(document.getElementById('bx-desktop-loader'));\n\t},\n\treloadWindow()\n\t{\n\t\tBXDesktopSystem.Login({});\n\t},\n\treloadChatWindow(): void\n\t{\n\t\tBXDesktopSystem?.ExecJsInApp(location.hostname, 'location.reload()');\n\t},\n\tfindWindow(name: string = ''): ?Window\n\t{\n\t\tconst mainWindow = opener || top;\n\n\t\treturn mainWindow.BXWindows.find((window) => window?.name === name);\n\t},\n\topenPage(url: string, options: { skipNativeBrowser?: boolean } = {}): Promise\n\t{\n\t\tconst targetUrl = new URL(url);\n\t\tif (targetUrl.host !== location.host)\n\t\t{\n\t\t\tsetTimeout(() => this.hideWindow(), 100);\n\n\t\t\treturn Promise.resolve(false);\n\t\t}\n\n\t\tif (!settingsFunctions.isTwoWindowMode())\n\t\t{\n\t\t\tif (options.skipNativeBrowser === true)\n\t\t\t{\n\t\t\t\tsetTimeout(() => this.hideWindow(), 100);\n\n\t\t\t\treturn Promise.resolve(false);\n\t\t\t}\n\n\t\t\tUtils.browser.openLink(targetUrl.href);\n\n\t\t\t// workaround timeout, if application is activated on hit, it cant be hidden immediately\n\t\t\tsetTimeout(() => this.hideWindow(), 100);\n\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\tthis.createTab(targetUrl.href);\n\n\t\treturn Promise.resolve(true);\n\t},\n\topenInBrowser(url: string)\n\t{\n\t\tBXDesktopSystem.OpenInBrowser(url);\n\t},\n\tcreateTab(path: string): void\n\t{\n\t\tconst preparedPath = Dom.create({ tag: 'a', attrs: { href: path } }).href;\n\n\t\tBXDesktopSystem.CreateTab(preparedPath);\n\t},\n\tcreateImTab(path: string): void\n\t{\n\t\tconst preparedPath = Dom.create({ tag: 'a', attrs: { href: path } }).href;\n\n\t\tBXDesktopSystem.CreateImTab(preparedPath);\n\t},\n\tcreateWindow(name: string, callback: Function)\n\t{\n\t\tBXDesktopSystem.GetWindow(name, callback);\n\t},\n\tcreateTopmostWindow(htmlContent: string): boolean\n\t{\n\t\treturn BXDesktopSystem.ExecuteCommand('topmost.show.html', htmlContent);\n\t},\n\tsetWindowPosition(rawParams: {x?: number, y?: number, width?: number, height?: number})\n\t{\n\t\tconst preparedParams = {};\n\t\tObject.entries(rawParams).forEach(([key, value]) => {\n\t\t\tconst preparedKey = key[0].toUpperCase() + key.slice(1);\n\t\t\tpreparedParams[preparedKey] = value;\n\t\t});\n\t\tBXDesktopWindow?.SetProperty('position', preparedParams);\n\t},\n\tprepareHtml(html: string | HTMLElement, js: string | HTMLElement): string\n\t{\n\t\tlet plainHtml = '';\n\t\tif (Type.isDomNode(html))\n\t\t{\n\t\t\tplainHtml = html.outerHTML;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tplainHtml = html;\n\t\t}\n\n\t\tlet plainJs = '';\n\t\tif (Type.isDomNode(js))\n\t\t{\n\t\t\tplainJs = js.outerHTML;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tplainJs = js;\n\t\t}\n\n\t\tEvent.ready();\n\n\t\tif (Type.isStringFilled(plainJs))\n\t\t{\n\t\t\tplainJs = `\n\t\t\t\t<script>\n\t\t\t\t\tBX.ready(() => {\n\t\t\t\t\t\t${plainJs}\n\t\t\t\t\t});\n\t\t\t\t</script>\n\t\t\t`;\n\t\t}\n\n\t\treturn `${plainHtml}${plainJs}`;\n\t},\n\tsetWindowSize(width: number, height: number)\n\t{\n\t\tBXDesktopWindow.SetProperty('clientSize', { Width: width, Height: height });\n\t},\n\tsetMinimumWindowSize(width: number, height: number)\n\t{\n\t\tBXDesktopWindow.SetProperty('minClientSize', { Width: width, Height: height });\n\t},\n};\n","import { Browser } from 'main.core';\n\nexport const iconFunctions = {\n\tsetCounter(counter: number, important: boolean = false)\n\t{\n\t\tconst preparedCounter = counter.toString();\n\t\tBXDesktopSystem?.SetIconBadge(preparedCounter, important);\n\t\tBXDesktopSystem?.SetTabBadge(0, preparedCounter);\n\t},\n\tsetBrowserIconBadge(counter: string | number)\n\t{\n\t\tBXDesktopSystem?.SetBrowserIconBadge(counter.toString());\n\t},\n\tsetIconStatus(status: string)\n\t{\n\t\tBXDesktopSystem?.SetIconStatus(status);\n\t},\n\tsetOfflineIcon()\n\t{\n\t\tBXDesktopSystem?.SetIconStatus('offline');\n\t},\n\tflashIcon()\n\t{\n\t\tif (!Browser.isWin())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBXDesktopSystem?.FlashIcon();\n\t},\n};\n","export const commonFunctions = {\n\tprepareResourcePath(source: string): string\n\t{\n\t\tlet result = '';\n\n\t\ttry\n\t\t{\n\t\t\tconst url = new URL(source, location.origin);\n\t\t\tresult = url.href;\n\t\t}\n\t\tcatch\n\t\t{\n\t\t\t// empty\n\t\t}\n\n\t\treturn result;\n\t},\n};\n","import {Extension} from 'main.core';\n\nexport const legacyFunctions = {\n\tchangeTab(tabId: string)\n\t{\n\t\tconst settings = Extension.getSettings('im.v2.lib.desktop-api');\n\t\tconst v2 = settings.get('v2');\n\t\tif (v2)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.desktop.changeTab(tabId);\n\t}\n};","export const notificationFunctions = {\n\tremoveNativeNotifications()\n\t{\n\t\tif (this.getApiVersion() < 74)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBXDesktopSystem?.NotificationRemoveAll();\n\t},\n};\n","import { Type, Browser, Loc } from 'main.core';\nimport { Logger } from 'im.v2.lib.logger';\n\nexport const loggerFunctions = {\n\twriteToLogFile(filename: string, text: any)\n\t{\n\t\tif (!Type.isStringFilled(filename))\n\t\t{\n\t\t\tconsole.error('Desktop logger: filename is not defined');\n\t\t\treturn;\n\t\t}\n\n\t\tlet textPrepared = '';\n\t\tif (Type.isString(text))\n\t\t{\n\t\t\ttextPrepared = text;\n\t\t}\n\t\telse if (Type.isNumber(text))\n\t\t{\n\t\t\ttextPrepared = text.toString();\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttextPrepared = JSON.stringify(text);\n\t\t}\n\n\t\tBXDesktopSystem?.Log(filename, textPrepared);\n\t},\n\tprintWelcomePrompt()\n\t{\n\t\tconst version = BXDesktopSystem.GetProperty('versionParts').join('.');\n\t\tlet osName = 'unknown';\n\t\tif (Browser.isMac())\n\t\t{\n\t\t\tosName = 'MacOS';\n\t\t}\n\t\telse if (Browser.isWin())\n\t\t{\n\t\t\tosName = 'Windows';\n\t\t}\n\t\telse if (Browser.isLinux())\n\t\t{\n\t\t\tosName = 'Linux';\n\t\t}\n\n\t\tconst promptMessage = Loc.getMessage('IM_LIB_DESKTOP_API_WELCOME_PROMPT', { '#VERSION#': version, '#OS#': osName });\n\t\tLogger.desktop(promptMessage);\n\t},\n\tsetLogInfo(logFunction: Function)\n\t{\n\t\tBXDesktopSystem.LogInfo = logFunction;\n\t},\n};\n","export const callMaskFunctions = {\n\tgetCallMask()\n\t{\n\t\tif (!this.isDesktop())\n\t\t{\n\t\t\treturn { id: '' };\n\t\t}\n\n\t\treturn {\n\t\t\tid: BXDesktopSystem.QuerySettings('bxd_camera_3dbackground_id') || '',\n\t\t};\n\t},\n\tsetCallMaskLoadHandlers(callback: function)\n\t{\n\t\tthis.subscribe('BX3dAvatarReady', callback);\n\t\tthis.subscribe('BX3dAvatarError', callback);\n\t},\n\tsetCallMask(id, maskUrl, backgroundUrl): boolean\n\t{\n\t\tif (this.getApiVersion() < 72)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!id)\n\t\t{\n\t\t\tBXDesktopSystem.Set3dAvatar('', '');\n\t\t\tBXDesktopSystem.StoreSettings('bxd_camera_3dbackground_id', '');\n\t\t\treturn true;\n\t\t}\n\n\t\tmaskUrl = this.prepareResourcePath(maskUrl);\n\t\tbackgroundUrl = this.prepareResourcePath(backgroundUrl);\n\n\t\tBXDesktopSystem.Set3dAvatar(maskUrl, backgroundUrl);\n\t\tBXDesktopSystem.StoreSettings('bxd_camera_3dbackground_id', id);\n\n\t\treturn true;\n\t},\n};\n","\nexport const callBackgroundFunctions = {\n\tisBlur(source)\n\t{\n\t\treturn source.toString().toLowerCase().includes('blur')\n\t},\n\tgetLimitationBackground(source)\n\t{\n\t\tconst limitation = BX.message('call_features');\n\t\tconst defaultLimitation = {enable: true};\n\t\tlet limitationType = '';\n\n\t\tif (source && source !== 'none') {\n\t\t\tlimitationType = `${this.isBlur(source) ? 'blur_' : ''}background`\n\t\t}\n\t\tconst currentLimitation = limitationType ? limitation?.[`call_${limitationType}`] : null;\n\n\t\tif (!currentLimitation) {\n\t\t\treturn defaultLimitation;\n\t\t}\n\n\t\treturn {\n\t\t\tenable: currentLimitation.enable,\n\t\t\tarticleCode: currentLimitation.articleCode\n\t\t}\n\t},\n\topenArticle(articleCode)\n\t{\n\t\tconst infoHelper = BX.UI.InfoHelper;\n\n\t\tif (infoHelper.isOpen())\n\t\t{\n\t\t\tinfoHelper.close()\n\t\t}\n\n\t\tinfoHelper.show(articleCode);\n\t},\n\thandleLimitationBackground(limitationObj, handle)\n\t{\n\t\tconst {enable, articleCode} = limitationObj\n\n\t\tif (enable && typeof handle === \"function\")\n\t\t{\n\t\t\thandle()\n\t\t}\n\n\t\tif (!enable && articleCode)\n\t\t{\n\t\t\tthis.openArticle(articleCode)\n\t\t}\n\t},\n\tgetBackgroundImage(): Object\n\t{\n\t\tconst id = BXDesktopSystem.QuerySettings(\"bxd_camera_background_id\") || 'none';\n\n\t\tif (!this.isDesktop() || !this.getLimitationBackground(id)?.enable)\n\t\t{\n\t\t\treturn { id: 'none', source: '' };\n\t\t}\n\n\t\treturn { id };\n\t},\n\tsetCallBackground(id, source)\n\t{\n\t\tif (source === 'none' || source === '')\n\t\t{\n\t\t\tsource = '';\n\t\t}\n\t\telse if (source === 'blur')\n\t\t{\n\t\t\t// empty\n\t\t}\n\t\telse if (source === 'gaussianBlur')\n\t\t{\n\t\t\tsource = 'GaussianBlur';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsource = this.prepareResourcePath(source);\n\t\t}\n\n\t\tvar promise = new BX.Promise();\n\n\t\tconst limitation = this.getLimitationBackground(source);\n\n\t\tlet currentSource = '';\n\t\tlet currentId = '';\n\n\n\t\tthis.handleLimitationBackground(limitation, () => {\n\t\t\tcurrentSource = source;\n\t\t\tcurrentId = id;\n\t\t})\n\n\t\tsetTimeout(() => {\n\t\t\tthis.setCallMask(false);\n\t\t\tBXDesktopSystem.StoreSettings('bxd_camera_background_id', currentId);\n\t\t\tBXDesktopSystem.StoreSettings('bxd_camera_background', currentSource);\n\t\t\tpromise.resolve(currentId || \"none\");\n\t\t}, 100);\n\n\t\treturn promise;\n\t},\n};\n","import { EventType } from 'im.v2.const';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nexport const diskFunctions = {\n\tstartDiskSync(): void\n\t{\n\t\tBXFileStorage?.SyncPause(false);\n\t\tconst event = new BaseEvent({ compatData: [true] });\n\t\tEventEmitter.emit(window, EventType.desktop.onSyncPause, event);\n\t},\n\tstopDiskSync(): void\n\t{\n\t\tBXFileStorage?.SyncPause(true);\n\t\tconst event = new BaseEvent({ compatData: [false] });\n\t\tEventEmitter.emit(window, EventType.desktop.onSyncPause, event);\n\t},\n};\n","export const debugFunctions = {\n\topenDeveloperTools(): boolean\n\t{\n\t\tBXDesktopWindow?.OpenDeveloperTools();\n\t},\n\topenLogsFolder()\n\t{\n\t\tBXDesktopSystem?.OpenLogsFolder();\n\t},\n};\n","import { Type } from 'main.core';\n\ninterface MediaCompressor\n{\n\tcompress(file: File | Blob): Promise<any>;\n\tcancel(): void;\n\tremoveCompressedFile(): void;\n}\n\nexport const mediaCompressorFunctions = {\n\tisMediaCompressorAvailable(): boolean\n\t{\n\t\treturn this.getApiVersion() >= 88 && Type.isFunction(window.BXMediaCompressor);\n\t},\n\n\tcreateMediaCompressor(): MediaCompressor\n\t{\n\t\treturn new window.BXMediaCompressor();\n\t},\n};\n","import { lifecycleFunctions } from './functions/lifecycle';\nimport { versionFunctions } from './functions/version';\nimport { eventFunctions } from './functions/event';\nimport { windowFunctions } from './functions/window';\nimport { iconFunctions } from './functions/icon';\nimport { settingsFunctions } from './functions/settings';\nimport { commonFunctions } from './functions/common';\nimport { legacyFunctions } from './functions/legacy';\nimport { notificationFunctions } from './functions/notifications';\nimport { loggerFunctions } from './functions/logger';\nimport { callMaskFunctions } from './functions/call/mask';\nimport { callBackgroundFunctions } from './functions/call/background';\nimport { accountFunctions } from './functions/account';\nimport { diskFunctions } from './functions/disk';\nimport { debugFunctions } from './functions/debug';\nimport { mediaCompressorFunctions } from './functions/media-compressor';\n\nexport { DesktopFeature } from './features';\nexport { DesktopSettingsKey } from './functions/settings';\n\nexport const DesktopApi = {\n\t...lifecycleFunctions,\n\t...commonFunctions,\n\t...versionFunctions,\n\t...eventFunctions,\n\t...windowFunctions,\n\t...iconFunctions,\n\t...notificationFunctions,\n\t...settingsFunctions,\n\t...legacyFunctions,\n\t...callBackgroundFunctions,\n\t...callMaskFunctions,\n\t...loggerFunctions,\n\t...accountFunctions,\n\t...diskFunctions,\n\t...debugFunctions,\n\t...mediaCompressorFunctions,\n};\n\nexport type { DesktopAccount } from './types/account';\n"],"names":["lifecycleFunctions","isDesktop","Type","isObject","window","BXDesktopSystem","restart","getApiVersion","Restart","shutdown","Shutdown","DesktopFeature","mask","id","version","accountManagement","openNewTab","openPage","portalTabActivation","accountFunctions","openAddAccountTab","AccountAddForm","deleteAccount","host","login","AccountDelete","connectAccount","protocol","userLang","AccountConnect","disconnectAccount","AccountDisconnect","getAccountList","AccountList","getLogin","BXDesktopWindow","GetBDiskLogin","Promise","resolve","Login","success","logout","Ajax","runAction","RestMethod","imV2DesktopLogout","Logout","error","console","terminate","versionFunctions","getMajorVersion","majorVersion","GetProperty","minorVersion","buildVersion","apiVersion","getBackendRevision","rawRevision","GetBackendRevision","location","hostname","Number","setBackendRevision","revision","SetBackendRevision","isFeatureEnabled","code","Boolean","FeatureEnabled","isFeatureSupported","isFeatureSupportedInVersion","getWindowsOSBuild","Browser","isWin","UserOsBuild","eventHandlers","eventFunctions","subscribe","eventName","handler","preparedHandler","event","params","detail","apply","push","Event","bind","unsubscribe","isFunction","isArrayFilled","forEach","eventHandler","unbind","emit","mainWindow","opener","top","allWindows","BXWindows","name","DispatchCustomEvent","emitToMainWindow","GetMainWindow","DesktopSettingsKey","hideImTab","smoothing","smoothing_v2","sliderBindingsStatus","settingsFunctions","getSliderBindingsStatus","result","getCustomSetting","getCameraSmoothingStatus","setCameraSmoothingStatus","status","preparedStatus","setCustomSetting","isTwoWindowMode","IsTwoWindowsMode","setTwoWindowMode","flag","V10","V8","getAutostartStatus","setAutostartStatus","SetProperty","value","StoreSettings","defaultValue","QuerySettings","windowFunctions","wait","ms","setTimeout","handlePortalTabActivation","hasActiveTab","hasActivePortalTab","activatePortalFirstTab","ActivateFirstTab","HasActiveTab","setTabWithChatPageActive","setActiveTabUrl","origin","Path","online","WINDOW_ACTIVATION_DELAY","shouldActivateTabWithChatPage","tabsList","getTabsList","tabsWithChatPage","filter","tab","url","includes","hasTabsWithVisibleChatPage","some","visible","length","BrowserList","isChatWindow","settings","Extension","getSettings","get","isChatTab","href","isActiveTab","IsActiveTab","setActiveTab","target","SetActiveTab","SetActiveTabUrl","showBrowserWindow","ExecuteCommand","showWindow","activateWindow","hideWindow","closeWindow","hideLoader","Dom","remove","document","getElementById","reloadWindow","reloadChatWindow","ExecJsInApp","findWindow","find","options","targetUrl","URL","skipNativeBrowser","Utils","browser","openLink","createTab","openInBrowser","OpenInBrowser","path","preparedPath","create","tag","attrs","CreateTab","createImTab","CreateImTab","createWindow","callback","GetWindow","createTopmostWindow","htmlContent","setWindowPosition","rawParams","preparedParams","Object","entries","key","preparedKey","toUpperCase","slice","prepareHtml","html","js","plainHtml","isDomNode","outerHTML","plainJs","ready","isStringFilled","setWindowSize","width","height","Width","Height","setMinimumWindowSize","iconFunctions","setCounter","counter","important","preparedCounter","toString","SetIconBadge","SetTabBadge","setBrowserIconBadge","SetBrowserIconBadge","setIconStatus","SetIconStatus","setOfflineIcon","flashIcon","FlashIcon","commonFunctions","prepareResourcePath","source","legacyFunctions","changeTab","tabId","v2","BX","desktop","notificationFunctions","removeNativeNotifications","NotificationRemoveAll","loggerFunctions","writeToLogFile","filename","text","textPrepared","isString","isNumber","JSON","stringify","Log","printWelcomePrompt","join","osName","isMac","isLinux","promptMessage","Loc","getMessage","Logger","setLogInfo","logFunction","LogInfo","callMaskFunctions","getCallMask","setCallMaskLoadHandlers","setCallMask","maskUrl","backgroundUrl","Set3dAvatar","callBackgroundFunctions","isBlur","toLowerCase","getLimitationBackground","limitation","message","defaultLimitation","enable","limitationType","currentLimitation","articleCode","openArticle","infoHelper","UI","InfoHelper","isOpen","close","show","handleLimitationBackground","limitationObj","handle","getBackgroundImage","setCallBackground","promise","currentSource","currentId","diskFunctions","startDiskSync","BXFileStorage","SyncPause","BaseEvent","compatData","EventEmitter","EventType","onSyncPause","stopDiskSync","debugFunctions","openDeveloperTools","OpenDeveloperTools","openLogsFolder","OpenLogsFolder","mediaCompressorFunctions","isMediaCompressorAvailable","BXMediaCompressor","createMediaCompressor","DesktopApi"],"mappings":"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"}