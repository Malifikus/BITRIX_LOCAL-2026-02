{"version":3,"file":"work-status-control-panel.bundle.js","sources":["../src/component/button-split/button-split.js","../src/component/clock/clock.js","../src/component/app.js","../src/work-status-control-panel.js"],"sourcesContent":["import { Type } from 'main.core';\nimport { MenuOptions } from 'main.popup';\nimport {\n\tSplitButton as UIButtonSplit,\n\tButtonColor, ButtonSize,\n\tButtonState, ButtonIcon,\n\tAirButtonStyle,\n\tButtonCounterColor,\n\tButtonTag,\n} from 'ui.buttons';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport { BMenu } from 'ui.system.menu.vue';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\nimport './button-split.css';\n\n\nconst BUTTON_PART_TYPE = {\n\tTEXT: 'TEXT',\n\tDROPDOWN: 'DROPDOWN',\n\t// in development\n\tTOGGLE: 'TOGGLE',\n};\n\n// @vue/component\nexport const ButtonSplitBkp: BitrixVueComponentProps | { button: ?UIButtonSplit } = {\n\tname: 'UiButtonSplitBkp',\n\tcomponents: { BMenu },\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tidKey: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tclass: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tleftIcon: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tstyle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twide: Boolean,\n\t\tmenuOptions: {\n\t\t\ttype: MenuOptions,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: [ 'click', 'clickSecondary' ],\n\tdata(): Object {\n\t\treturn {\n\t\t\tisMounted: false,\n\t\t\tisMenuShown: false,\n\t\t\tmenuOptionsBound: null,\n\t\t};\n\t},\n\twatch: {},\n\tcreated(): void {\n\t\tconst UIButtonSplitNew = new UIButtonSplit({\n\t\t\tid: this.idKey,\n\t\t\tclassName: this.class,\n\t\t\tprops: { id: this.id },\n\t\t\ttext: this.text,\n\t\t\tsize: this.size,\n\t\t\ticon: this.leftIcon,\n\t\t\tuseAirDesign: true,\n\t\t\tstyle: this.style,\n\t\t\twide: this.wide,\n\t\t\tmainButton: {\n\t\t\t\tonclick: () => this.$emit('click'),\n\t\t\t},\n\t\t\tmenuButton: {\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.isMenuShown = !this.isMenuShown;\n\t\t\t\t\tthis.$emit('clickSecondary');\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tthis.buttonNew = UIButtonSplitNew;\n\t},\n\tmounted(): void {\n\t\tconst buttonNewRendered = this.buttonNew?.render();\n\t\tthis.$refs.buttonPlaceholder.after(buttonNewRendered);\n\t\tif (this.menuOptions)\n\t\t{\n\t\t\tthis.menuOptionsBound = {\n\t\t\t\t...this.menuOptions,\n\t\t\t\tclassName: 'popup-window_for-button-split',\n\t\t\t\tbindElement: buttonNewRendered,\n\t\t\t};\n\t\t}\n\t\tthis.isMounted = true;\n\t},\n\tunmounted(): void {\n\t\tthis.buttonNew?.getContainer()?.remove();\n\t},\n\tmethods: {},\n\ttemplate: `\n\t\t<button v-if=\"!isMounted\" ref=\"buttonPlaceholder\"></button>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptionsBound\" @close=\"isMenuShown = false\"/>\n\t`,\n};\n\n// @vue/component\nexport const ButtonText = {\n\tname: 'ButtonText',\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ticonLeft: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ticonRight: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tonclick: {\n\t\t\ttype: Function,\n\t\t\tdefault: () => {},\n\t\t},\n\t},\n\temits: [],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t};\n\t},\n\tmounted(): void\n\t{\n\t},\n\tupdated(): void\n\t{\n\t},\n\tmethods: {\n\n\t\t// handlers\n\n\t\thandleClickButton(): void\n\t\t{\n\t\t\tthis.onclick();\n\t\t},\n\n\t\t// handlers end\n\n\t},\n\ttemplate: `\n\t\t<button\n\t\t\t:id=\"id\"\n\t\t\tclass=\"ui-btn-part ui-btn-part_text\"\n\t\t\t@click=\"handleClickButton\"\n\t\t>\n\t\t\t<BIcon\n\t\t\t\tv-if=\"iconLeft\"\n\t\t\t\tclass=\"ui-btn-part__img\"\n\t\t\t\t:name=\"iconLeft\"\n\t\t\t/>\n\t\t\t<span class=\"ui-btn-part__text\">{{ text }}</span>\n\t\t\t<BIcon\n\t\t\t\tv-if=\"iconRight\"\n\t\t\t\tclass=\"ui-btn-part__img\"\n\t\t\t\t:name=\"iconRight\"\n\t\t\t/>\n\t\t</button>\n\t`,\n};\n\n// @vue/component\nexport const ButtonDropdown = {\n\tname: 'ButtonDropdown',\n\tcomponents: {\n\t\tBIcon,\n\t\tBMenu,\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tisLoading: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t},\n\t\tmenuOptions: {\n\t\t\ttype: MenuOptions,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: [],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tmenuOptionsBound(): any {\n\t\t\treturn {\n\t\t\t\t...this.menuOptions,\n\t\t\t\tclassName: 'popup-window_for-button-split',\n\t\t\t\tbindElement: this.$refs.opener,\n\t\t\t};\n\t\t},\n\t},\n\tmounted(): void\n\t{},\n\tupdated(): void\n\t{},\n\tmethods: {\n\n\t\t// handlers\n\n\t\thandleClickButton(): void\n\t\t{\n\t\t\tthis.isMenuShown = !this.isMenuShown;\n\t\t},\n\n\t\t// handlers end\n\n\t},\n\ttemplate: `\n\t\t<button\n\t\t\tref=\"opener\"\n\t\t\t:id=\"id\"\n\t\t\tclass=\"ui-btn-part ui-btn-part_dropdown ui-icon-set__scope\"\n\t\t\t:class=\"{'ui-btn-part_loading': isLoading}\"\n\t\t\t@click=\"handleClickButton\"\n\t\t>\n\t\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptionsBound\" @close=\"isMenuShown = false\" />\n\t\t</button>\n\t`,\n};\n\n// @vue/component\nexport const ButtonPlaceholder = {\n\tname: 'ButtonPlaceholder',\n\tcomponents: {},\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\temits: [],\n\tsetup(): Object\n\t{\n\t\treturn {};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {};\n\t},\n\tmounted(): void\n\t{},\n\tupdated(): void\n\t{},\n\tmethods: {},\n\ttemplate: `\n\t\t<div class=\"ui-btn-part ui-btn-part_fallback\">\n\t\t\t<p class=\"ui-btn-part__info\" >Type unknown. Id: {{ id }}. Text: {{ text }}.</p>\n\t\t</div>\n\t`,\n};\n\n// @vue/component\nexport const ButtonSplit: BitrixVueComponentProps | { button: ?UIButtonSplit } = {\n\tname: 'UiButtonSplit',\n\tcomponents: {\n\t\tButtonText,\n\t\tButtonDropdown,\n\t\tButtonPlaceholder,\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tstyleName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twide: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t},\n\t\tbuttonParts: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault: () => ([]),\n\t\t},\n\t},\n\temits: [\n\t\t'click',\n\t\t'menuOpen',\n\t\t'menuClose',\n\t],\n\tdata(): Object {\n\t\treturn {\n\t\t};\n\t},\n\tcomputed: {\n\t\tclassSumm(): String\n\t\t{\n\t\t\tconst classBase = '--air';\n\t\t\tconst classStyle = this.styleName ? (' ' + this.styleName) : '';\n\t\t\tconst classSize = this.size ? (' ' + this.size) : '';\n\t\t\tconst classWide = this.wide ? ' --wide' : '';\n\t\t\tconst classSummNew = classBase + classStyle + classSize + classWide;\n\t\t\treturn classSummNew;\n\t\t},\n\t},\n\twatch: {\n\t},\n\tcreated(): void\n\t{},\n\tmounted(): void\n\t{},\n\tunmounted(): void\n\t{},\n\tmethods: {\n\t\tgetButtonPartComponent(buttonPart): Object\n\t\t{\n\t\t\tif (buttonPart.type === BUTTON_PART_TYPE.TEXT)\n\t\t\t{\n\t\t\t\treturn ButtonText;\n\t\t\t}\n\n\t\t\tif (buttonPart.type === BUTTON_PART_TYPE.DROPDOWN)\n\t\t\t{\n\t\t\t\treturn ButtonDropdown;\n\t\t\t}\n\n\t\t\tif (buttonPart.type === BUTTON_PART_TYPE.TOGGLE)\n\t\t\t{\n\t\t\t\treturn ButtonPlaceholder;\n\t\t\t}\n\n\t\t\treturn ButtonPlaceholder;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ul\n\t\t\t:id=\"id\"\n\t\t\tclass=\"ui-btn-split ui-btn-split_vue-tmp\"\n\t\t\t:class=\"classSumm\"\n\t\t>\n\t\t\t<li\n\t\t\t\tv-for=\"buttonPart in buttonParts\"\n\t\t\t\t:key=\"buttonPart.id + buttonPart.type\"\n\t\t\t\tclass=\"ui-btn-split__item\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'ui-btn-split__item_no-divider': buttonPart.isNoNextDivider,\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<component\n\t\t\t\t\t:is=\"getButtonPartComponent(buttonPart)\"\n\t\t\t\t\t:key=\"buttonPart.id + buttonPart.type\"\n\t\t\t\t\t:id=\"buttonPart.id\"\n\t\t\t\t\t:ref=\"buttonPart.id\"\n\t\t\t\t\t:icon-left=\"buttonPart.iconLeft\"\n\t\t\t\t\t:icon-right=\"buttonPart.iconRight\"\n\t\t\t\t\t:text=\"buttonPart.text\"\n\t\t\t\t\t:menuOptions=\"buttonPart.menuOptions\"\n\t\t\t\t\t:onclick=\"buttonPart.onClick\"\n\t\t\t\t/>\n\t\t\t</li>\n\t\t</ul>\n\t`,\n};\n\n// @vue/component\nexport const ButtonTextDropdown: BitrixVueComponentProps | { button: ?UIButtonSplit } = {\n\tname: 'UiButtonTextDropdown',\n\tcomponents: {\n\t\tButtonSplit,\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tisLoading: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ticonLeft: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ticonRight: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tstyleName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twide: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t},\n\t\tmenuOptions: {\n\t\t\ttype: MenuOptions,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: [\n\t\t'click',\n\t],\n\tdata(): Object {\n\t\treturn {\n\t\t};\n\t},\n\tcomputed: {\n\t\tbuttonParts(): String\n\t\t{\n\t\t\tconst buttonPartsNew = [\n\t\t\t\t{\n\t\t\t\t\tid: this.id + 'Text',\n\t\t\t\t\ttype: BUTTON_PART_TYPE.TEXT,\n\t\t\t\t\ttext: this.text,\n\t\t\t\t\ticonLeft: this.iconLeft,\n\t\t\t\t\ticonRight: this.iconRight,\n\t\t\t\t\tonClick: () => this.$emit('click'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: this.id + 'Dropdown',\n\t\t\t\t\ttype: BUTTON_PART_TYPE.DROPDOWN,\n\t\t\t\t\tmenuOptions: this.menuOptions,\n\t\t\t\t},\n\t\t\t];\n\t\t\treturn buttonPartsNew;\n\t\t},\n\t},\n\twatch: {\n\t},\n\tcreated(): void\n\t{},\n\tmounted(): void\n\t{},\n\tunmounted(): void\n\t{},\n\tmethods: {\n\t},\n\ttemplate: `\n\t\t<ButtonSplit\n\t\t\t:id=\"id\"\n\t\t\t:size=\"size\"\n\t\t\t:style-name=\"styleName\"\n\t\t\t:wide=\"wide\"\n\t\t\t:buttonParts=\"buttonParts\"\n\t\t/>\n\t`,\n};\n\nexport {\n\tButtonColor,\n\tButtonSize,\n\tButtonIcon,\n\tAirButtonStyle,\n\tButtonCounterColor,\n\tButtonState,\n\tButtonTag,\n\tBUTTON_PART_TYPE,\n};\n","import './clock.css';\n\n// @vue/component\nexport const Clock = {\n\tcomponents: {\n\t},\n\tprops: {\n\t\ttime: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tisHourShown: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisMinuteShown: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisSecondShown: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\temits: [\n\t],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t};\n\t},\n\tmounted(): void\n\t{\n\t},\n\tupdated(): void\n\t{\n\t},\n\tmethods: {\n\n\t\tconvertMillisecondsToHrMinSec(time: number): any\n\t\t{\n\t\t\tconst timeFullSeconds = Math.floor(time / 1000);\n\t\t\tconst hours = Math.floor(timeFullSeconds / 3600);\n\t\t\tconst minutes = Math.floor(timeFullSeconds / 60) - (hours * 60);\n\t\t\tconst seconds = timeFullSeconds - (minutes * 60) - (hours * 3600);\n\n\t\t\treturn {\n\t\t\t\thours,\n\t\t\t\tminutes,\n\t\t\t\tseconds,\n\t\t\t};\n\t\t},\n\n\t\ttimeNumToDoubleDigitString(num): string\n\t\t{\n\t\t\treturn num > 9 ? String(num) : ('00' + num).slice(-2);\n\t\t},\n\n\t\t// handlers\n\n\t\t// handlers end\n\n\t},\n\ttemplate: `\n\t\t<p class=\"bui-clock\">\n\t\t\t<span\n\t\t\t\tv-if=\"isHourShown\"\n\t\t\t\tclass=\"bui-clock__value bui-clock__value_hours\"\n\t\t\t>{{\n\t\t\t\ttimeNumToDoubleDigitString(convertMillisecondsToHrMinSec(time).hours)\n\t\t\t}}</span>\n\t\t\t<span\n          \t\tv-if=\"isMinuteShown\"\n\t\t\t\tclass=\"bui-clock__value bui-clock__value_minutes\"\n\t\t\t>{{\n\t\t\t\ttimeNumToDoubleDigitString(convertMillisecondsToHrMinSec(time).minutes)\n\t\t\t}}</span>\n\t\t\t<span\n\t\t\t\tv-if=\"isSecondShown\"\n\t\t\t\tclass=\"bui-clock__value bui-clock__value_seconds\"\n\t\t\t>{{\n\t\t\t\t\ttimeNumToDoubleDigitString(convertMillisecondsToHrMinSec(time).seconds)\n\t\t\t\t}}</span>\n\t\t</p>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport {\n\tButton as UiButton,\n\tAirButtonStyle,\n\tButtonSize,\n} from 'ui.vue3.components.button';\nimport { BLine } from 'ui.system.skeleton.vue';\n\nimport { ButtonTextDropdown as UIButtonTextDropdown } from './button-split/button-split';\nimport { Clock } from './clock/clock';\nimport './app.css';\n\n\n// @vue/component\nexport const App = {\n\tname: 'WorkStatusControlPanel',\n\tcomponents: {\n\t\tUiButton,\n\t\tUIButtonTextDropdown,\n\t\tBIcon,\n\t\tClock,\n\t\tBLine,\n\t},\n\tprovide(): Object\n\t{\n\t\treturn {};\n\t},\n\tprops: {},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tOutline,\n\t\t\tLoc,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tdataId: '',\n\t\t\tworkStatus: '',\n\t\t\treportReq: '',\n\t\t\tcanOpen: '',\n\t\t\tcanOpenAndRelaunch: '',\n\t\t\tcanEdit: '',\n\t\t\treportOpening: false,\n\t\t\ttimerWorkingDayValue: 0,\n\t\t\ttimerPauseValue: 0,\n\t\t\tlastProcessedHour: -1,\n\t\t};\n\t},\n\tcomputed: {\n\n\t\ttitleText(): string\n\t\t{\n\t\t\tif (this.workStatus === 'PAUSED')\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_STATUS_PAUSED');\n\t\t\t}\n\n\t\t\tif (this.workStatus === 'CLOSED')\n\t\t\t{\n\t\t\t\treturn this.canOpen === 'OPEN'\n\t\t\t\t\t? Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_STATUS_NOT_STARTED')\n\t\t\t\t\t: Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_STATUS_CLOSED');\n\t\t\t}\n\n\t\t\tif (this.workStatus === 'EXPIRED')\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_STATUS_NOT_CLOSED');\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_STATUS_STARTED');\n\t\t},\n\n\t\tisEditingAvailable(): boolean\n\t\t{\n\t\t\treturn (this.dataId && this.canEdit === 'Y' && !(this.workStatus === 'EXPIRED' && this.reportReq !== 'A'));\n\t\t},\n\n\t\tisCustomTimeAvailable(): boolean\n\t\t{\n\t\t\treturn this.canEdit && this.workStatus !== 'PAUSED';\n\t\t},\n\n\t\tstyleForTimerProps(): string\n\t\t{\n\t\t\tif (this.workStatus === 'PAUSED')\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ticon: null,\n\t\t\t\t\tstatus: 'paused',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this.workStatus === 'EXPIRED')\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ticon: Outline.ALERT,\n\t\t\t\t\tstatus: 'expired',\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\n\t\t// control buttons\n\n\t\tbuttonStartProps(): any\n\t\t{\n\t\t\tconst buttonId = 'buttonStartDropdownAnchor';\n\t\t\tconst buttonText = Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_START');\n\t\t\tconst buttonIcon = Outline.PLAY_L;\n\n\t\t\tconst buttonStartPropsSingle = {\n\t\t\t\tid: buttonId,\n\t\t\t\ttext: buttonText,\n\t\t\t\ticon: buttonIcon,\n\t\t\t\tonClick: async (): void => {\n\t\t\t\t\tthis.openDay(event);\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst buttonStartPropsMulti = {\n\t\t\t\tid: buttonId,\n\t\t\t\ttext: buttonText,\n\t\t\t\ticon: buttonIcon,\n\t\t\t\tmenuOptions: {\n\t\t\t\t\tid: 'timeman-start-button-context-menu',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_START_SAME'),\n\t\t\t\t\t\t\ticon: Outline.PLAY_L,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tthis.openDay(event);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_START_DIFFERENT'),\n\t\t\t\t\t\t\ticon: Outline.EDIT_L,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst buttonElement = document.getElementById(buttonId);\n\n\t\t\t\t\t\t\t\tif (window.BXTIMEMAN?.WND?.CLOCKWND)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.CLOCKWND.Clear();\n\t\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.CLOCKWND = null;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.DATA.STATE = 'CLOSED';\n\n\t\t\t\t\t\t\t\t// one for button text, another for popup positioning\n\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.PARENT.MAIN_BUTTON = buttonElement;\n\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.MAIN_BUTTON = buttonElement;\n\n\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.ShowClock();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tonClick: async (): void => {\n\t\t\t\t\tthis.openDay(event);\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn this.isCustomTimeAvailable ? buttonStartPropsMulti : buttonStartPropsSingle;\n\t\t},\n\n\t\tbuttonPauseProps(): any\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_PAUSE'),\n\t\t\t\ticon: Outline.PAUSE_L,\n\t\t\t\tstyle: AirButtonStyle.OUTLINE_ACCENT_2,\n\t\t\t\tonClick: async (): void => {\n\t\t\t\t\twindow.BXTIMEMAN.WND.ACTIONS.PAUSE(event);\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\n\t\tbuttonContinueProps(): any\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_CONTINUE'),\n\t\t\t\ticon: Outline.PLAY_L,\n\t\t\t\tonClick: async (): void => {\n\t\t\t\t\twindow.BXTIMEMAN.WND.ACTIONS.REOPEN(event);\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\n\t\tbuttonStopProps(): any\n\t\t{\n\t\t\tconst buttonId = 'buttonStop';\n\t\t\tconst buttonStopStyle = (this.workStatus === 'OPENED')\n\t\t\t\t? AirButtonStyle.FILLED\n\t\t\t\t: AirButtonStyle.OUTLINE_ACCENT_2;\n\t\t\tconst buttonText = Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_STOP');\n\t\t\tconst buttonIcon = Outline.POWER;\n\n\t\t\tconst buttonStopPropsSingle = {\n\t\t\t\tid: buttonId,\n\t\t\t\tstyle: buttonStopStyle,\n\t\t\t\ttext: buttonText,\n\t\t\t\ticon: buttonIcon,\n\t\t\t\tonClick: async (): void => {\n\t\t\t\t\tthis.closeDay(event);\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst buttonStopPropsMulti = {\n\t\t\t\tid: buttonId,\n\t\t\t\ttext: buttonText,\n\t\t\t\ticonLeft: buttonIcon,\n\t\t\t\tstyle: buttonStopStyle,\n\t\t\t\tmenuOptions: {\n\t\t\t\t\tid: 'timeman-stop-button-context-menu',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_STOP_SAME'),\n\t\t\t\t\t\t\ticon: Outline.POWER,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tthis.closeDay(event);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_STOP_DIFFERENT'),\n\t\t\t\t\t\t\ticon: Outline.EDIT_L,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tif (window.BXTIMEMAN?.WND?.CLOCKWND)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.CLOCKWND.Clear();\n\t\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.CLOCKWND = null;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst buttonElement = window.document.getElementById(buttonId);\n\t\t\t\t\t\t\t\t// one for button text, another for popup positioning\n\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.PARENT.MAIN_BUTTON = buttonElement;\n\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.MAIN_BUTTON = buttonElement;\n\n\t\t\t\t\t\t\t\twindow.BXTIMEMAN.WND.ShowClock();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tonClick: async (): void => {\n\t\t\t\t\tthis.closeDay(event);\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn this.isCustomTimeAvailable ? buttonStopPropsMulti : buttonStopPropsSingle;\n\t\t},\n\n\t\tbuttonRestartProps(): any\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_RESTART'),\n\t\t\t\ticon: Outline.REFRESH,\n\t\t\t\tstyle: AirButtonStyle.OUTLINE_ACCENT_2,\n\t\t\t\tonClick: async (): void => {\n\t\t\t\t\twindow.BXTIMEMAN.WND.ACTIONS.REOPEN(event);\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\n\t\tbuttonFinishExpiredProps(): any\n\t\t{\n\t\t\tconst buttonId = 'buttonFinishExpired';\n\n\t\t\treturn {\n\t\t\t\tid: buttonId,\n\t\t\t\ttext: Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_FINISH_EXPIRED'),\n\t\t\t\ticon: Outline.ALERT_ACCENT,\n\t\t\t\tstyle: AirButtonStyle.TINTED_ALERT,\n\t\t\t\tonClick: async (): void => {\n\t\t\t\t\tif (window.BXTIMEMAN?.WND?.CLOCKWND)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.BXTIMEMAN.WND.CLOCKWND.Clear();\n\t\t\t\t\t\twindow.BXTIMEMAN.WND.CLOCKWND = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst buttonElement = window.document.getElementById(buttonId);\n\t\t\t\t\t// one for button text, another for popup positioning\n\t\t\t\t\twindow.BXTIMEMAN.WND.PARENT.MAIN_BUTTON = buttonElement;\n\t\t\t\t\twindow.BXTIMEMAN.WND.MAIN_BUTTON = buttonElement;\n\n\t\t\t\t\twindow.BXTIMEMAN.WND.ACTIONS.CLOSE(event);\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\n\t\t// control buttons end\n\n\t\tactions(): any[]\n\t\t{\n\t\t\tconst actionItems = [];\n\n\t\t\tif (this.workStatus === 'OPENED')\n\t\t\t{\n\t\t\t\tactionItems.push(this.buttonPauseProps);\n\t\t\t\tactionItems.push(this.buttonStopProps);\n\t\t\t}\n\n\t\t\tif (this.workStatus === 'PAUSED')\n\t\t\t{\n\t\t\t\tactionItems.push(this.buttonContinueProps);\n\t\t\t\tactionItems.push(this.buttonStopProps);\n\t\t\t}\n\n\t\t\tif (this.workStatus === 'CLOSED')\n\t\t\t{\n\t\t\t\tif (this.canOpen === 'OPEN')\n\t\t\t\t{\n\t\t\t\t\tactionItems.push(this.buttonStartProps);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tactionItems.push(this.buttonRestartProps);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.workStatus === 'EXPIRED')\n\t\t\t{\n\t\t\t\tactionItems.push(this.buttonFinishExpiredProps);\n\t\t\t}\n\n\t\t\treturn actionItems;\n\t\t},\n\t},\n\twatch: {},\n\tmounted(): void\n\t{\n\t\tthis.updateDayState();\n\t\tthis.updateWorkingDayTimer();\n\t\tsetInterval(() => {\n\t\t\tthis.updateWorkingDayTimer();\n\t\t}, 1000);\n\n\t\tEventEmitter.subscribe('onTimeManDataRecieved', this.handleTimemanDataRecieved);\n\t\tEventEmitter.subscribe('onPlannerDataRecieved', this.handleTimemanDataRecieved);\n\t\tEventEmitter.subscribe('onTimeManNeedRebuild', this.handleTimemanDataRecieved);\n\t\tEventEmitter.subscribe('onTopPanelCollapse', this.handleTimemanDataRecieved);\n\t\tEventEmitter.subscribe('onTimeManWindowBuild', this.handleTimemanDataRecieved);\n\t\tEventEmitter.subscribe('onTimemanInit', this.handleTimemanDataRecieved);\n\t},\n\tbeforeUnmount(): void\n\t{},\n\tunmounted(): void\n\t{},\n\tmethods: {\n\t\tconvertMillisecondsToHrMinSec(time: number): any\n\t\t{\n\t\t\tconst timeFullSeconds = Math.ceil(time / 1000);\n\t\t\tconst hours = Math.floor(timeFullSeconds / 3600);\n\t\t\tconst minutes = Math.floor(timeFullSeconds / 60) - (hours * 60);\n\t\t\tconst seconds = timeFullSeconds - (minutes * 60) - (hours * 3600);\n\n\t\t\treturn {\n\t\t\t\thours,\n\t\t\t\tminutes,\n\t\t\t\tseconds,\n\t\t\t};\n\t\t},\n\n\t\ttimeNumToDoubleDigitString(num): string\n\t\t{\n\t\t\treturn num > 9 ? String(num) : ('00' + num).slice(-2);\n\t\t},\n\n\t\tgetDataId(): any\n\t\t{\n\t\t\treturn window.BXTIMEMAN.DATA.ID || '';\n\t\t},\n\n\t\tgetWorkStatus(): any\n\t\t{\n\t\t\treturn window.BXTIMEMAN.DATA.STATE || '';\n\t\t},\n\n\t\tgetReportReq(): any\n\t\t{\n\t\t\treturn window.BXTIMEMAN.DATA.REPORT_REQ || '';\n\t\t},\n\n\t\tgetCanOpen(): any\n\t\t{\n\t\t\treturn window.BXTIMEMAN.DATA.CAN_OPEN || '';\n\t\t},\n\n\t\tgetCanOpenAndRelaunch(): any\n\t\t{\n\t\t\treturn window.BXTIMEMAN.DATA.CAN_OPEN_AND_RELAUNCH || '';\n\t\t},\n\n\t\tgetCanEdit(): any\n\t\t{\n\t\t\treturn window.BXTIMEMAN.DATA.CAN_EDIT || '';\n\t\t},\n\n\t\tupdateDayState(): any\n\t\t{\n\t\t\tthis.dataId = this.getDataId();\n\t\t\tthis.workStatus = this.getWorkStatus();\n\t\t\tthis.reportReq = this.getReportReq();\n\t\t\tthis.canOpen = this.getCanOpen();\n\t\t\tthis.canOpenAndRelaunch = this.getCanOpenAndRelaunch();\n\t\t\tthis.canEdit = this.getCanEdit();\n\t\t},\n\n\t\tupdateDayStateIfNewHour(): void\n\t\t{\n\t\t\tconst currentHour = new Date().getHours();\n\n\t\t\tif (currentHour !== this.lastProcessedHour)\n\t\t\t{\n\t\t\t\twindow.BXTIMEMAN.Update();\n\n\t\t\t\tthis.lastProcessedHour = currentHour;\n\t\t\t}\n\t\t},\n\n\t\tupdateWorkingDayTimer()\n\t\t{\n\t\t\tconst dateNow = Date.now();\n\t\t\tconst timerInfo = { ...window.BXTIMEMAN.DATA.INFO };\n\t\t\tconst dateStart = parseInt(timerInfo.DATE_START) * 1000;\n\t\t\tconst dateWorkingDayStopped = parseInt(timerInfo.DATE_FINISH) * 1000;\n\t\t\tconst timeTimeLeaks = parseInt(timerInfo.TIME_LEAKS) * 1000;\n\t\t\tconst delta = dateNow - dateStart;\n\t\t\tconst deltaPast = dateWorkingDayStopped - dateStart;\n\t\t\tconst deltaPause = dateNow - dateWorkingDayStopped;\n\n\t\t\tthis.updateDayStateIfNewHour();\n\n\t\t\tif (this.workStatus === 'CLOSED')\n\t\t\t{\n\t\t\t\tif (this.canOpen === 'OPEN')\n\t\t\t\t{\n\t\t\t\t\tthis.timerWorkingDayValue = 0;\n\t\t\t\t\tthis.timerPauseValue = 0;\n\t\t\t\t}\n\t\t\t\telse if (this.canOpen === 'REOPEN')\n\t\t\t\t{\n\t\t\t\t\tthis.timerWorkingDayValue = deltaPast - timeTimeLeaks;\n\t\t\t\t\tthis.timerPauseValue = timeTimeLeaks;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.workStatus === 'OPENED')\n\t\t\t{\n\t\t\t\tthis.timerWorkingDayValue = delta - timeTimeLeaks;\n\t\t\t\tthis.timerPauseValue = timeTimeLeaks;\n\t\t\t}\n\t\t\telse if (this.workStatus === 'PAUSED')\n\t\t\t{\n\t\t\t\tthis.timerWorkingDayValue = deltaPast - timeTimeLeaks;\n\t\t\t\tthis.timerPauseValue = deltaPause + timeTimeLeaks;\n\t\t\t}\n\t\t\telse if (this.workStatus === 'EXPIRED')\n\t\t\t{\n\t\t\t\tthis.timerWorkingDayValue = delta - timeTimeLeaks;\n\t\t\t\tthis.timerPauseValue = timeTimeLeaks;\n\t\t\t}\n\t\t},\n\n\t\topenDay(event): any\n\t\t{\n\t\t\twindow.BXTIMEMAN.WND.ACTIONS.OPEN(event);\n\t\t},\n\n\t\tcloseDay(event): any\n\t\t{\n\t\t\twindow.BXTIMEMAN.WND.ACTIONS.CLOSE(event);\n\t\t},\n\n\t\t// handlers\n\n\t\thandleTimemanDataRecieved(): any\n\t\t{\n\t\t\tthis.updateDayState();\n\t\t\tthis.updateWorkingDayTimer();\n\t\t},\n\n\t\thandleClickTimerEditorOpener(): any\n\t\t{\n\t\t\twindow.BXTIMEMAN.WND.ShowEditVue(event.target);\n\t\t},\n\n\t\thandleClickTimemanOpener(): void\n\t\t{\n\t\t\tif (this.reportOpening)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (window.BXTIMEMAN.WND?.isShown())\n\t\t\t{\n\t\t\t\twindow.BXTIMEMAN.WND.Hide();\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.reportOpening = true;\n\n\t\t\t\twindow.BXTIMEMAN.setBindOptions({\n\t\t\t\t\tnode: this.$refs.reportOpener,\n\t\t\t\t\tmode: 'popup',\n\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tangle: false,\n\t\t\t\t\t\toffsetTop: -40,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tbindOptions: {\n\t\t\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\t\t\tforceTop: true,\n\t\t\t\t\t\t\tforceLeft: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\t\t\tthis.reportOpening = false;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonClose: () => {},\n\t\t\t\t\t\t\tonDestroy: () => {},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfixed: true,\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\twindow.BXTIMEMAN.Open();\n\t\t\t}\n\t\t},\n\n\t\t// handlers end\n\n\t\tgetControlButtonComponent(action): Object\n\t\t{\n\t\t\tconst isButtonSplit = Boolean(action.menuOptions);\n\t\t\tconst ControlButtonComponent = isButtonSplit ? UIButtonTextDropdown : UiButton;\n\n\t\t\treturn ControlButtonComponent;\n\t\t},\n\n\t},\n\ttemplate: `\n\t\t<div class=\"tm-control-panel\">\n\t\t\t<div class=\"tm-control-panel__info\">\n\t\t\t\t<div\n\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t'tm-control-panel__timer',\n\t\t\t\t\t\t'tm-timer',\n\t\t\t\t\t\tthis.styleForTimerProps?.status ? ('tm-timer_' + this.styleForTimerProps.status) : null,\n\t\t\t\t\t]\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"this.styleForTimerProps?.icon\"\n\t\t\t\t\t\tclass=\"tm-timer__visual\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<BIcon\n\t\t\t\t\t\t\tclass=\"tm-timer__visual-img\"\n\t\t\t\t\t\t\t:name=\"this.styleForTimerProps.icon\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"tm-timer__title\">{{ this.titleText }}</p>\n\t\t\t\t\t<Clock\n\t\t\t\t\t\t:time=\"timerWorkingDayValue\"\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"isEditingAvailable\"\n\t\t\t\t\t\tclass=\"tm-timer__editor-opener\"\n\t\t\t\t\t\t@click=\"handleClickTimerEditorOpener\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<BIcon\n\t\t\t\t\t\t\tclass=\"tm-timer__editor-opener-img\"\n\t\t\t\t\t\t\t:size=\"16\"\n\t\t\t\t\t\t\t:name=\"Outline.EDIT_L\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tm-control-panel__widget-opener-container\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tref=\"reportOpener\"\n\t\t\t\t\t\tclass=\"tm-control-panel__widget-opener\"\n\t\t\t\t\t\t:class=\"{'tm-control-panel__widget-opener_loading': reportOpening}\"\n\t\t\t\t\t\t@click=\"this.handleClickTimemanOpener\"\n\t\t\t\t\t>\n<!--\t\t\t\t\t\t{{ Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_ACTION_OPEN_PLAN') }}-->\n\t\t\t\t\t\t<BIcon\n\t\t\t\t\t\t\tclass=\"tm-control-panel__widget-opener-img\"\n\t\t\t\t\t\t\t:size=\"22\"\n\t\t\t\t\t\t\t:name=\"Outline.CHEVRON_RIGHT_L\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"Boolean(this.timerPauseValue)\"\n\t\t\t\tclass=\"tm-control-panel__info tm-control-panel__info_pause\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t'tm-control-panel__timer',\n\t\t\t\t\t\t'tm-control-panel__timer_pause',\n\t\t\t\t\t\t'tm-timer',\n\t\t\t\t\t\tthis.styleForTimerProps?.status ? ('tm-timer_' + this.styleForTimerProps.status) : null,\n\t\t\t\t\t]\"\n\t\t\t\t>\n\t\t\t\t\t<p class=\"tm-timer__title\">{{ Loc.getMessage('TIMEMAN_WORK_STATUS_CONTROL_PANEL_NOTE_PAUSE_LENGTH') }}</p>\n\t\t\t\t\t<Clock\n\t\t\t\t\t\t:time=\"timerPauseValue\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ul class=\"tm-control-panel__actions-list\">\n\t\t\t\t<li\n\t\t\t\t\tv-for=\"action in this.actions\"\n\t\t\t\t\t:key=\"action.text\"\n\t\t\t\t\tclass=\"tm-control-panel__actions-item\"\n\t\t\t\t>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is=\"getControlButtonComponent(action)\"\n\t\t\t\t\t\t:key=\"\n\t\t\t\t\t\t\taction.style\n\t\t\t\t\t\t\t+ action.iconLeft\n\t\t\t\t\t\t\t+ action.icon\n\t\t\t\t\t\t\t+ action.text\n\t\t\t\t\t\t\t+ action.id\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tclass=\"tm-control-panel__action\"\n\t\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t\t:wide=\"true\"\n\t\t\t\t\t\t:id=\"action.id\"\n\t\t\t\t\t\t:text=\"action.text\"\n\t\t\t\t\t\t:style=\"action.style\"\n\t\t\t\t\t\t:style-name=\"action.style\"\n\t\t\t\t\t\t:icon-left=\"action.iconLeft\"\n\t\t\t\t\t\t:left-icon=\"action.icon\"\n\t\t\t\t\t\t:menuOptions=\"action.menuOptions\"\n\t\t\t\t\t\t@click=\"action.onClick\"\n\t\t\t\t\t/>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t`,\n};\n","import { Tag, Extension } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { BitrixVue } from 'ui.vue3';\n\nimport 'timeman';\nimport 'CJSTask';\nimport 'planner';\nimport 'tasks_planner_handler';\nimport 'calendar_planner_handler';\nimport 'ajax';\nimport 'timer';\nimport 'popup';\nimport 'ls';\n\nimport { App } from './component/app';\n\nimport './work-status-control-panel.css';\n\ntype Data = {\n\tworkReport: Object,\n\tinfo: Object & {\n\t\tSTATE: string,\n\t\tCAN_OPEN?: string,\n\t\tINFO: Object & {\n\t\t\tDATE_START: number,\n\t\t\tTIME_LEAKS: number,\n\t\t},\n\t},\n\tsiteId: string,\n};\n\nexport class WorkStatusControlPanel\n{\n\t#data: Data = {};\n\t#timemanInstantContainerNode: HTMLElement;\n\n\tconstructor()\n\t{\n\t\tconst settings = Extension.getSettings('timeman.work-status-control-panel');\n\n\t\tthis.#data.workReport = settings.get('workReport');\n\t\tthis.#data.info = settings.get('info');\n\t\tthis.#data.siteId = settings.get('siteId');\n\n\t\tthis.#timemanInstantContainerNode = Tag.render`\n\t\t\t<div class=\"timeman-instant-container\"></div>\n\t\t`;\n\n\t\tEventEmitter.subscribe('onTimemanInit', this.#init.bind(this));\n\t\tEventEmitter.subscribe('onTimeManDataRecieved', this.#updateState.bind(this));\n\n\t\twindow.BX.timeman('bx_tm', this.#data.info, this.#data.siteId);\n\t}\n\n\t#mountApplication(container: HTMLElement): void\n\t{\n\t\tconst application = BitrixVue.createApp(App, {});\n\t\tapplication.mount(container);\n\t}\n\n\t#init(): void\n\t{\n\t\twindow.BXTIMEMAN.initFormWeekly(this.#data.workReport);\n\t}\n\n\t#updateState(baseEvent: BaseEvent): void\n\t{\n\t\tconst [data] = baseEvent.getCompatData();\n\n\t\tthis.#data.info = data;\n\t}\n\n\trenderWorkStatusControlPanel(): HTMLElement\n\t{\n\t\tevent.stopPropagation();\n\n\t\tthis.#mountApplication(this.#timemanInstantContainerNode);\n\n\t\treturn Tag.render`\n\t\t\t${this.#timemanInstantContainerNode}\n\t\t`;\n\t}\n}\n"],"names":["BUTTON_PART_TYPE","TEXT","DROPDOWN","TOGGLE","ButtonText","name","components","BIcon","props","id","type","String","default","text","iconLeft","iconRight","onclick","Function","emits","setup","data","mounted","updated","methods","handleClickButton","template","ButtonDropdown","BMenu","isLoading","Boolean","required","menuOptions","MenuOptions","Outline","isMenuShown","computed","menuOptionsBound","className","bindElement","$refs","opener","ButtonPlaceholder","ButtonSplit","size","styleName","wide","buttonParts","Array","classSumm","classBase","classStyle","classSize","classWide","classSummNew","watch","created","unmounted","getButtonPartComponent","buttonPart","ButtonTextDropdown","buttonPartsNew","onClick","$emit","Clock","time","Number","isHourShown","isMinuteShown","isSecondShown","convertMillisecondsToHrMinSec","timeFullSeconds","Math","floor","hours","minutes","seconds","timeNumToDoubleDigitString","num","slice","App","UiButton","UIButtonTextDropdown","BLine","provide","ButtonSize","Loc","dataId","workStatus","reportReq","canOpen","canOpenAndRelaunch","canEdit","reportOpening","timerWorkingDayValue","timerPauseValue","lastProcessedHour","titleText","getMessage","isEditingAvailable","isCustomTimeAvailable","styleForTimerProps","icon","status","ALERT","buttonStartProps","buttonId","buttonText","buttonIcon","PLAY_L","buttonStartPropsSingle","openDay","event","buttonStartPropsMulti","items","title","EDIT_L","buttonElement","document","getElementById","window","BXTIMEMAN","WND","CLOCKWND","Clear","DATA","STATE","PARENT","MAIN_BUTTON","ShowClock","buttonPauseProps","PAUSE_L","style","AirButtonStyle","OUTLINE_ACCENT_2","ACTIONS","PAUSE","buttonContinueProps","REOPEN","buttonStopProps","buttonStopStyle","FILLED","POWER","buttonStopPropsSingle","closeDay","buttonStopPropsMulti","buttonRestartProps","REFRESH","buttonFinishExpiredProps","ALERT_ACCENT","TINTED_ALERT","CLOSE","actions","actionItems","push","updateDayState","updateWorkingDayTimer","setInterval","EventEmitter","subscribe","handleTimemanDataRecieved","beforeUnmount","ceil","getDataId","ID","getWorkStatus","getReportReq","REPORT_REQ","getCanOpen","CAN_OPEN","getCanOpenAndRelaunch","CAN_OPEN_AND_RELAUNCH","getCanEdit","CAN_EDIT","updateDayStateIfNewHour","currentHour","Date","getHours","Update","dateNow","now","timerInfo","INFO","dateStart","parseInt","DATE_START","dateWorkingDayStopped","DATE_FINISH","timeTimeLeaks","TIME_LEAKS","delta","deltaPast","deltaPause","OPEN","handleClickTimerEditorOpener","ShowEditVue","target","handleClickTimemanOpener","isShown","Hide","setBindOptions","node","reportOpener","mode","popupOptions","autoHide","angle","offsetTop","closeByEsc","bindOptions","forceBindPosition","forceTop","forceLeft","events","onShow","onClose","onDestroy","fixed","Open","getControlButtonComponent","action","isButtonSplit","ControlButtonComponent","WorkStatusControlPanel","constructor","settings","Extension","getSettings","workReport","get","info","siteId","Tag","render","bind","BX","timeman","renderWorkStatusControlPanel","stopPropagation","container","application","BitrixVue","createApp","mount","initFormWeekly","baseEvent","getCompatData"],"mappings":"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"}